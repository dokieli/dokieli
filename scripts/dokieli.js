(()=>{var e,t,n={608:(e,t,n)=>{var{Buffer:r}=n(8287),i={},o=i.LEFT_BRACE=1,s=i.RIGHT_BRACE=2,a=i.LEFT_BRACKET=3,l=i.RIGHT_BRACKET=4,c=i.COLON=5,u=i.COMMA=6,d=i.TRUE=7,h=i.FALSE=8,p=i.NULL=9,f=i.STRING=10,m=i.NUMBER=11,g=i.START=17,v=i.STOP=18,y=i.TRUE1=33,b=i.TRUE2=34,w=i.TRUE3=35,_=i.FALSE1=49,x=i.FALSE2=50,S=i.FALSE3=51,C=i.FALSE4=52,k=i.NULL1=65,E=i.NULL2=66,A=i.NULL3=67,T=i.NUMBER1=81,I=i.NUMBER3=83,R=i.STRING1=97,L=i.STRING2=98,N=i.STRING3=99,O=i.STRING4=100,D=i.STRING5=101,M=i.STRING6=102,P=i.VALUE=113,j=i.KEY=114,U=i.OBJECT=129,B=i.ARRAY=130,F="\\".charCodeAt(0),z="/".charCodeAt(0),q="\b".charCodeAt(0),$="\f".charCodeAt(0),H="\n".charCodeAt(0),V="\r".charCodeAt(0),W="\t".charCodeAt(0),G=65536;function J(e){return r.alloc?r.alloc(e):new r(e)}function K(){this.tState=g,this.value=void 0,this.string=void 0,this.stringBuffer=J(G),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=P,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:J(2),3:J(3),4:J(4)},this.offset=-1}K.toknam=function(e){for(var t=Object.keys(i),n=0,r=t.length;n<r;n++){var o=t[n];if(i[o]===e)return o}return e&&"0x"+e.toString(16)};var Z=K.prototype;Z.onError=function(e){throw e},Z.charError=function(e,t){this.tState=v,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+K.toknam(this.tState)))},Z.appendStringChar=function(e){this.stringBufferOffset>=G&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=e},Z.appendStringBuf=function(e,t,n){var r=e.length;"number"==typeof t&&(r="number"==typeof n?n<0?e.length-t+n:n-t:e.length-t),r<0&&(r=0),this.stringBufferOffset+r>G&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),e.copy(this.stringBuffer,this.stringBufferOffset,t,n),this.stringBufferOffset+=r},Z.write=function(e){var t;"string"==typeof e&&(e=new r(e));for(var n=0,i=e.length;n<i;n++)if(this.tState===g){if(t=e[n],this.offset++,123===t)this.onToken(o,"{");else if(125===t)this.onToken(s,"}");else if(91===t)this.onToken(a,"[");else if(93===t)this.onToken(l,"]");else if(58===t)this.onToken(c,":");else if(44===t)this.onToken(u,",");else if(116===t)this.tState=y;else if(102===t)this.tState=_;else if(110===t)this.tState=k;else if(34===t)this.string="",this.stringBufferOffset=0,this.tState=R;else if(45===t)this.string="-",this.tState=T;else if(t>=48&&t<64)this.string=String.fromCharCode(t),this.tState=I;else if(32!==t&&9!==t&&10!==t&&13!==t)return this.charError(e,n)}else if(this.tState===R)if(t=e[n],this.bytes_remaining>0){for(var m=0;m<this.bytes_remaining;m++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+m]=e[m];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,n=n+m-1}else if(0===this.bytes_remaining&&t>=128){if(t<=193||t>244)return this.onError(new Error("Invalid UTF-8 character at position "+n+" in state "+K.toknam(this.tState)));if(t>=194&&t<=223&&(this.bytes_in_sequence=2),t>=224&&t<=239&&(this.bytes_in_sequence=3),t>=240&&t<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+n>e.length){for(var v=0;v<=e.length-1-n;v++)this.temp_buffs[this.bytes_in_sequence][v]=e[n+v];this.bytes_remaining=n+this.bytes_in_sequence-e.length,n=e.length-1}else this.appendStringBuf(e,n,n+this.bytes_in_sequence),n=n+this.bytes_in_sequence-1}else if(34===t)this.tState=g,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(f,this.string),this.offset+=r.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===t)this.tState=L;else{if(!(t>=32))return this.charError(e,n);this.appendStringChar(t)}else if(this.tState===L)if(34===(t=e[n]))this.appendStringChar(t),this.tState=R;else if(92===t)this.appendStringChar(F),this.tState=R;else if(47===t)this.appendStringChar(z),this.tState=R;else if(98===t)this.appendStringChar(q),this.tState=R;else if(102===t)this.appendStringChar($),this.tState=R;else if(110===t)this.appendStringChar(H),this.tState=R;else if(114===t)this.appendStringChar(V),this.tState=R;else if(116===t)this.appendStringChar(W),this.tState=R;else{if(117!==t)return this.charError(e,n);this.unicode="",this.tState=N}else if(this.tState===N||this.tState===O||this.tState===D||this.tState===M){if(!((t=e[n])>=48&&t<64||t>64&&t<=70||t>96&&t<=102))return this.charError(e,n);if(this.unicode+=String.fromCharCode(t),this.tState++===M){var P=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&P>=56320&&P<57344?(this.appendStringBuf(new r(String.fromCharCode(this.highSurrogate,P))),this.highSurrogate=void 0):void 0===this.highSurrogate&&P>=55296&&P<56320?this.highSurrogate=P:(void 0!==this.highSurrogate&&(this.appendStringBuf(new r(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new r(String.fromCharCode(P)))),this.tState=R}}else if(this.tState===T||this.tState===I)switch(t=e[n]){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(t),this.tState=I;break;default:this.tState=g;var j=this.numberReviver(this.string,e,n);if(j)return j;this.offset+=this.string.length-1,this.string=void 0,n--}else if(this.tState===y){if(114!==e[n])return this.charError(e,n);this.tState=b}else if(this.tState===b){if(117!==e[n])return this.charError(e,n);this.tState=w}else if(this.tState===w){if(101!==e[n])return this.charError(e,n);this.tState=g,this.onToken(d,!0),this.offset+=3}else if(this.tState===_){if(97!==e[n])return this.charError(e,n);this.tState=x}else if(this.tState===x){if(108!==e[n])return this.charError(e,n);this.tState=S}else if(this.tState===S){if(115!==e[n])return this.charError(e,n);this.tState=C}else if(this.tState===C){if(101!==e[n])return this.charError(e,n);this.tState=g,this.onToken(h,!1),this.offset+=4}else if(this.tState===k){if(117!==e[n])return this.charError(e,n);this.tState=E}else if(this.tState===E){if(108!==e[n])return this.charError(e,n);this.tState=A}else if(this.tState===A){if(108!==e[n])return this.charError(e,n);this.tState=g,this.onToken(p,null),this.offset+=3}},Z.onToken=function(e,t){},Z.parseError=function(e,t){this.tState=v,this.onError(new Error("Unexpected "+K.toknam(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+K.toknam(this.state)))},Z.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},Z.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=P)},Z.emit=function(e){this.mode&&(this.state=u),this.onValue(e)},Z.onValue=function(e){},Z.onToken=function(e,t){if(this.state===P)if(e===f||e===m||e===d||e===h||e===p)this.value&&(this.value[this.key]=t),this.emit(t);else if(e===o)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=j,this.mode=U;else if(e===a)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=B,this.state=P;else if(e===s){if(this.mode!==U)return this.parseError(e,t);this.pop()}else{if(e!==l)return this.parseError(e,t);if(this.mode!==B)return this.parseError(e,t);this.pop()}else if(this.state===j)if(e===f)this.key=t,this.state=c;else{if(e!==s)return this.parseError(e,t);this.pop()}else if(this.state===c){if(e!==c)return this.parseError(e,t);this.state=P}else{if(this.state!==u)return this.parseError(e,t);if(e===u)this.mode===B?(this.key++,this.state=P):this.mode===U&&(this.state=j);else{if(!(e===l&&this.mode===B||e===s&&this.mode===U))return this.parseError(e,t);this.pop()}}},Z.numberReviver=function(e,t,n){var r=Number(e);if(isNaN(r))return this.charError(t,n);e.match(/[0-9]+/)==e&&r.toString()!=e?this.onToken(f,e):this.onToken(m,r)},K.C=i,e.exports=K},44:e=>{"use strict";e.exports=class e{constructor(e,t=new Map,n=0){this.prefix=e,this._existing=t,this.counter=n}clone(){const{prefix:t,_existing:n,counter:r}=this;return new e(t,new Map(n),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const n=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,n),n}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}},2183:(e,t,n)=>{"use strict";const{bufferToHex:r,crypto:i}=n(886),o=new Map([["sha256","SHA-256"],["SHA256","SHA-256"],["SHA-256","SHA-256"],["sha384","SHA-384"],["SHA384","SHA-384"],["SHA-384","SHA-384"],["sha512","SHA-512"],["SHA512","SHA-512"],["SHA-512","SHA-512"]]);e.exports=class{constructor(e){if(!i||!i.subtle)throw new Error("crypto.subtle not found.");if(!o.has(e))throw new Error(`Unsupported algorithm "${e}".`);this.algorithm=o.get(e),this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=await i.subtle.digest(this.algorithm,e);return r(t)}}},6686:e=>{"use strict";const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",i="BlankNode",o="Literal",s={};function a(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&(e.object.termType!==o||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value))}(()=>{const e="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",t=e+"0-9-\xb7\u0300-\u036f\u203f-\u2040",n="_:((?:["+e+"0-9])(?:(?:["+t+".])*(?:["+t+"]))?)",r='(?:<((?:[^\0- <>"{}|^`\\\\]|\\\\u[0-9A-Fa-f]{4}|\\\\U[0-9A-Fa-f]{8})*)>)',i="[ \\t]+",o="[ \\t]*",a="(?:"+r+"|"+n+")"+i,l=r+i,c="(?:"+r+"|"+n+"|"+('(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:'+("(?:\\^\\^"+r+")")+"|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?)")+")"+o,u="(?:\\.|(?:(?:"+r+"|"+n+")"+o+"\\.))";s.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,s.empty=new RegExp("^"+o+"$"),s.quad=new RegExp("^"+o+a+l+c+u+o+"$")})(),e.exports=class e{static parse(e){const l=[],c={},u=e.split(s.eoln);let h=0;for(const e of u){if(h++,s.empty.test(e))continue;const u=e.match(s.quad);if(null===u)throw new Error("N-Quads parse error on line "+h+".");const p={subject:null,predicate:null,object:null,graph:null};if(void 0!==u[1]?p.subject={termType:r,value:g(u[1])}:p.subject={termType:i,value:u[2]},p.predicate={termType:r,value:g(u[3])},void 0!==u[4]?p.object={termType:r,value:g(u[4])}:void 0!==u[5]?p.object={termType:i,value:u[5]}:(p.object={termType:o,value:void 0,datatype:{termType:r}},void 0!==u[7]?p.object.datatype.value=g(u[7]):void 0!==u[8]?(p.object.datatype.value=t,p.object.language=u[8]):p.object.datatype.value=n,p.object.value=d(u[6])),void 0!==u[9]?p.graph={termType:r,value:g(u[9])}:void 0!==u[10]?p.graph={termType:i,value:u[10]}:p.graph={termType:"DefaultGraph",value:""},p.graph.value in c){let e=!0;const t=c[p.graph.value];for(const n of t)if(a(n,p)){e=!1;break}e&&(t.push(p),l.push(p))}else c[p.graph.value]=[p],l.push(p)}return l}static serialize(t){const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuadComponents(e,o,s,a){let u="";return e.termType===r?u+=`<${f(e.value)}>`:u+=`_:${e.value}`,o.termType===r?u+=` <${f(o.value)}> `:u+=` _:${o.value} `,s.termType===r?u+=`<${f(s.value)}>`:s.termType===i?u+=`_:${s.value}`:(u+=`"${function(e){if(!l.test(e))return e;return e.replace(l,function(e){return c[e.codePointAt(0)]})}(s.value)}"`,s.datatype.value===t?s.language&&(u+=`@${s.language}`):s.datatype.value!==n&&(u+=`^^<${f(s.datatype.value)}>`)),a.termType===r?u+=` <${f(a.value)}>`:a.termType===i&&(u+=` _:${a.value}`),u+=" .\n",u}static serializeQuad(t){return e.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}};const l=/[\u0000-\u001F\u007F"\\]/g,c=[];for(let e=0;e<=127;++e)l.test(String.fromCharCode(e))&&(c[e]="\\u"+e.toString(16).toUpperCase().padStart(4,"0"),l.lastIndex=0);c["\b".codePointAt(0)]="\\b",c["\t".codePointAt(0)]="\\t",c["\n".codePointAt(0)]="\\n",c["\f".codePointAt(0)]="\\f",c["\r".codePointAt(0)]="\\r",c['"'.codePointAt(0)]='\\"',c["\\".codePointAt(0)]="\\\\";const u=/(?:\\([btnfr"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function d(e){return u.test(e)?e.replace(u,function(e,t,n,r){if(t)switch(t){case"b":return"\b";case"t":return"\t";case"n":return"\n";case"f":return"\f";case"r":return"\r";case'"':return'"';case"'":return"'";case"\\":return"\\"}return n?String.fromCharCode(parseInt(n,16)):r?String.fromCodePoint(parseInt(r,16)):void 0}):e}const h=/[\u0000-\u0020<>"{}|^`\\]/g,p=[];for(let e=0;e<=127;++e)h.test(String.fromCharCode(e))&&(p[e]="\\u"+e.toString(16).toUpperCase().padStart(4,"0"),h.lastIndex=0);function f(e){return h.test(e)?e.replace(h,function(e){return p[e.codePointAt(0)]}):e}const m=/(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function g(e){return m.test(e)?e.replace(m,function(e,t,n){return t?String.fromCharCode(parseInt(t,16)):n?String.fromCodePoint(parseInt(n,16)):void 0}):e}},940:e=>{"use strict";e.exports=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,n=e.slice();let r=null,i=0;const o=e.length;for(let n=0;n<o;++n){const s=e[n],a=t.get(s);(null===r||s>r)&&(a&&n>0&&s>e[n-1]||!a&&n<o-1&&s>e[n+1])&&(r=s,i=n)}if(null===r)this.done=!0;else{const n=t.get(r)?i-1:i+1;e[i]=e[n],e[n]=r;for(const n of e)n>r&&t.set(n,!t.get(n))}return n}}},4099:(e,t,n)=>{"use strict";const r=n(44),i=n(2183),o=n(940),s=n(6686);function a(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=null,messageDigestAlgorithm:t="sha256",canonicalIdMap:n=new Map,maxWorkFactor:o=1,maxDeepIterations:s=-1,timeout:a=0}={}){this.name="RDFC-1.0",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("c14n",n),this.createMessageDigest=e||(()=>new i(t)),this.maxWorkFactor=o,this.maxDeepIterations=s,this.remainingDeepIterations=0,this.timeout=a,a>0&&(this.startTime=Date.now()),this.quads=null}main(e){this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];for(const e of n)this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const i=[...t.keys()].sort(),o=[];for(const e of i){const n=t.get(e);if(n.length>1){o.push(n);continue}const r=n[0];this.canonicalIssuer.getId(r)}if(this.maxDeepIterations<0)if(0===this.maxWorkFactor)this.maxDeepIterations=0;else if(this.maxWorkFactor===1/0)this.maxDeepIterations=1/0;else{const e=o.reduce((e,t)=>e+t.length,0);this.maxDeepIterations=e**this.maxWorkFactor}this.maxDeepIterations>Number.MAX_SAFE_INTEGER&&(this.maxDeepIterations=1/0),this.remainingDeepIterations=this.maxDeepIterations;for(const e of o){const t=[];for(const n of e){if(this.canonicalIssuer.hasId(n))continue;const e=new r("b");e.getId(n);const i=this.hashNDegreeQuads(n,e);t.push(i)}t.sort(a);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const l=[];for(const e of this.quads){const t=s.serializeQuadComponents(this._componentWithCanonicalId(e.subject),e.predicate,this._componentWithCanonicalId(e.object),this._componentWithCanonicalId(e.graph));l.push(t)}return l.sort(),l.join("")}hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const n of r)t.push(s.serializeQuadComponents(this.modifyFirstDegreeComponent(e,n.subject,"subject"),n.predicate,this.modifyFirstDegreeComponent(e,n.object,"object"),this.modifyFirstDegreeComponent(e,n.graph,"graph")));t.sort();const i=this.createMessageDigest();for(const e of t)i.update(e);return n.hash=i.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){const i=this.createMessageDigest();let o;return i.update(r),"g"!==r&&i.update(this.getRelatedPredicate(t)),o=this.canonicalIssuer.hasId(e)?"_:"+this.canonicalIssuer.getId(e):n.hasId(e)?"_:"+n.getId(e):this.blankNodeInfo.get(e).hash,i.update(o),i.digest()}hashNDegreeQuads(e,t){if(0===this.remainingDeepIterations)throw new Error(`Maximum deep iterations exceeded (${this.maxDeepIterations}).`);this.remainingDeepIterations--;const n=this.createMessageDigest(),r=this.createHashToRelated(e,t),i=[...r.keys()].sort();for(const e of i){n.update(e);let i,s="";const a=new o(r.get(e));let l=0;for(;a.hasNext();){const e=a.next();if(++l%3==0&&this.timeout>0&&Date.now()-this.startTime>this.timeout)throw new Error("Canonize timeout.");let n=t.clone(),r="";const o=[];let c=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?r+="_:"+this.canonicalIssuer.getId(t):(n.hasId(t)||o.push(t),r+="_:"+n.getId(t)),0!==s.length&&r>s){c=!0;break}if(!c){for(const e of o){const t=this.hashNDegreeQuads(e,n);if(r+="_:"+n.getId(e),r+=`<${t.hash}>`,n=t.issuer,0!==s.length&&r>s){c=!0;break}}c||(0===s.length||r<s)&&(s=r,i=n)}}n.update(s),t=i}return{hash:n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"a":"z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r)this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:n});return n}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:o}){if("BlankNode"!==t.termType||t.value===r)return;const s=t.value,a=this.hashRelatedBlankNode(s,e,i,n),l=o.get(a);l?l.push(s):o.set(a,[s])}_componentWithCanonicalId(e){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}}},886:(e,t,n)=>{"use strict";n(2791),t.setImmediate=setImmediate,t.crypto=globalThis.crypto;const r=[];for(let e=0;e<=255;++e)r.push(e.toString(16).padStart(2,"0"));t.bufferToHex=function(e){let t="";const n=new Uint8Array(e);for(let e=0;e<n.length;++e)t+=r[n[e]];return t}},5201:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaxesParser=t.EVENTS=void 0;const r=n(1487),i=n(4797),o=n(446);var s=r.isS,a=r.isChar,l=r.isNameStartChar,c=r.isNameChar,u=r.S_LIST,d=r.NAME_RE,h=i.isChar,p=o.isNCNameStartChar,f=o.isNCNameChar,m=o.NC_NAME_RE;const g="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",y={__proto__:null,xml:g,xmlns:v},b={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},w=-1,_=-2,x=13,S=33,C=10,k=60,E=61,A=62,T=63,I=93,R=e=>34===e||39===e,L=[34,39],N=[...L,91,A],O=[...L,k,I],D=[E,T,...u],M=[...u,A,38,k];function P(e,t,n){switch(t){case"xml":n!==g&&e.fail(`xml prefix must be bound to ${g}.`);break;case"xmlns":n!==v&&e.fail(`xmlns prefix must be bound to ${v}.`)}switch(n){case v:e.fail(""===t?`the default namespace may not be set to ${n}.`:`may not assign a prefix (even "xmlns") to the URI ${v}.`);break;case g:switch(t){case"xml":break;case"":e.fail(`the default namespace may not be set to ${n}.`);break;default:e.fail("may not assign the xml namespace to another prefix.")}}}const j=e=>m.test(e),U=e=>d.test(e);t.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const B={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};t.SaxesParser=class{get closed(){return this._closed}constructor(e){this.opt=null!=e?e:{},this.fragmentOpt=!!this.opt.fragment;const t=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,t){this.nameStartCheck=p,this.nameCheck=f,this.isName=j,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},y);const e=this.opt.additionalNamespaces;null!=e&&(!function(e,t){for(const n of Object.keys(t))P(e,n,t[n])}(this,e),Object.assign(this.ns,e))}else this.nameStartCheck=l,this.nameCheck=c,this.isName=U,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var e;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:t}=this;this.state=t?x:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=t,this.xmlDeclPossible=!t,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:n}=this.opt;if(void 0===n){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");n="1.0"}this.setXMLVersion(n),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(b),null===(e=this.readyHandler)||void 0===e||e.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(e,t){this[B[e]]=t}off(e){this[B[e]]=void 0}makeError(e){var t;let n=null!==(t=this.fileName)&&void 0!==t?t:"";return this.trackPosition&&(n.length>0&&(n+=":"),n+=`${this.line}:${this.column}`),n.length>0&&(n+=": "),new Error(n+e)}fail(e){const t=this.makeError(e),n=this.errorHandler;if(void 0===n)throw t;return n(t),this}write(e){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let t=!1;null===e?(t=!0,e=""):"object"==typeof e&&(e=e.toString()),void 0!==this.carriedFromPrevious&&(e=`${this.carriedFromPrevious}${e}`,this.carriedFromPrevious=void 0);let n=e.length;const r=e.charCodeAt(n-1);!t&&(13===r||r>=55296&&r<=56319)&&(this.carriedFromPrevious=e[n-1],n--,e=e.slice(0,n));const{stateTable:i}=this;for(this.chunk=e,this.i=0;this.i<n;)i[this.state].call(this);return this.chunkPosition+=n,t?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:e,i:t}=this;if(this.prevI=t,this.i=t+1,t>=e.length)return w;const n=e.charCodeAt(t);if(this.column++,n<55296){if(n>=32||9===n)return n;switch(n){case C:return this.line++,this.column=0,this.positionAtNewLine=this.position,C;case 13:return e.charCodeAt(t+1)===C&&(this.i=t+2),this.line++,this.column=0,this.positionAtNewLine=this.position,_;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const r=65536+1024*(n-55296)+(e.charCodeAt(t+1)-56320);return this.i=t+2,r>1114111&&this.fail("disallowed character."),r}getCode11(){const{chunk:e,i:t}=this;if(this.prevI=t,this.i=t+1,t>=e.length)return w;const n=e.charCodeAt(t);if(this.column++,n<55296){if(n>31&&n<127||n>159&&8232!==n||9===n)return n;switch(n){case C:return this.line++,this.column=0,this.positionAtNewLine=this.position,C;case 13:{const n=e.charCodeAt(t+1);n!==C&&133!==n||(this.i=t+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,_;default:return this.fail("disallowed character."),n}}if(n>56319)return n>=57344&&n<=65533||this.fail("disallowed character."),n;const r=65536+1024*(n-55296)+(e.charCodeAt(t+1)-56320);return this.i=t+2,r>1114111&&this.fail("disallowed character."),r}getCodeNorm(){const e=this.getCode();return e===_?C:e}unget(){this.i=this.prevI,this.column--}captureTo(e){let{i:t}=this;const{chunk:n}=this;for(;;){const r=this.getCode(),i=r===_,o=i?C:r;if(o===w||e.includes(o))return this.text+=n.slice(t,this.prevI),o;i&&(this.text+=`${n.slice(t,this.prevI)}\n`,t=this.i)}}captureToChar(e){let{i:t}=this;const{chunk:n}=this;for(;;){let r=this.getCode();switch(r){case _:this.text+=`${n.slice(t,this.prevI)}\n`,t=this.i,r=C;break;case w:return this.text+=n.slice(t),!1}if(r===e)return this.text+=n.slice(t,this.prevI),!0}}captureNameChars(){const{chunk:e,i:t}=this;for(;;){const n=this.getCode();if(n===w)return this.name+=e.slice(t),w;if(!c(n))return this.name+=e.slice(t,this.prevI),n===_?C:n}}skipSpaces(){for(;;){const e=this.getCodeNorm();if(e===w||!s(e))return e}}setXMLVersion(e){this.currentXMLVersion=e,"1.0"===e?(this.isChar=a,this.getCode=this.getCode10):(this.isChar=h,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const e=this.i,t=this.skipSpaces();switch(this.prevI!==e&&(this.xmlDeclPossible=!1),t){case k:if(this.state=15,0!==this.text.length)throw new Error("no-empty text at start");break;case w:break;default:this.unget(),this.state=x,this.xmlDeclPossible=!1}}sDoctype(){var e;const t=this.captureTo(N);switch(t){case A:null===(e=this.doctypeHandler)||void 0===e||e.call(this,this.text),this.text="",this.state=x,this.doctype=!0;break;case w:break;default:this.text+=String.fromCodePoint(t),91===t?this.state=4:R(t)&&(this.state=3,this.q=t)}}sDoctypeQuote(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.q=null,this.state=2)}sDTD(){const e=this.captureTo(O);e!==w&&(this.text+=String.fromCodePoint(e),e===I?this.state=2:e===k?this.state=6:R(e)&&(this.state=5,this.q=e))}sDTDQuoted(){const e=this.q;this.captureToChar(e)&&(this.text+=String.fromCodePoint(e),this.state=4,this.q=null)}sDTDOpenWaka(){const e=this.getCodeNorm();switch(this.text+=String.fromCodePoint(e),e){case 33:this.state=7,this.openWakaBang="";break;case T:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const e=String.fromCodePoint(this.getCodeNorm()),t=this.openWakaBang+=e;this.text+=e,"-"!==t&&(this.state="--"===t?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),this.state=45===e?10:8}sDTDCommentEnded(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===A?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(T)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const e=this.getCodeNorm();this.text+=String.fromCodePoint(e),e===A&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:e}=this;const{chunk:t}=this;e:for(;;)switch(this.getCode()){case _:this.entity+=`${t.slice(e,this.prevI)}\n`,e=this.i;break;case 59:{const{entityReturnState:n}=this,r=this.entity+t.slice(e,this.prevI);let i;this.state=n,""===r?(this.fail("empty entity name."),i="&;"):(i=this.parseEntity(r),this.entity=""),n===x&&void 0===this.textHandler||(this.text+=i);break e}case w:this.entity+=t.slice(e);break e}}sOpenWaka(){const e=this.getCode();if(l(e))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(e){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case T:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=x,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var e;const t=this.getCodeNorm();45===t?(this.state=19,null===(e=this.commentHandler)||void 0===e||e.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(t)}`,this.state=17)}sCommentEnded(){const e=this.getCodeNorm();e!==A?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(e)}`,this.state=17):this.state=x}sCData(){this.captureToChar(I)&&(this.state=21)}sCDataEnding(){const e=this.getCodeNorm();e===I?this.state=22:(this.text+=`]${String.fromCodePoint(e)}`,this.state=20)}sCDataEnding2(){var e;const t=this.getCodeNorm();switch(t){case A:null===(e=this.cdataHandler)||void 0===e||e.call(this,this.text),this.text="",this.state=x;break;case I:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(t)}`,this.state=20}}sPIFirstChar(){const e=this.getCodeNorm();this.nameStartCheck(e)?(this.piTarget+=String.fromCodePoint(e),this.state=24):e===T||s(e)?(this.fail("processing instruction without a target."),this.state=e===T?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(e),this.state=24)}sPIRest(){const{chunk:e,i:t}=this;for(;;){const n=this.getCodeNorm();if(n===w)return void(this.piTarget+=e.slice(t));if(!this.nameCheck(n)){this.piTarget+=e.slice(t,this.prevI);const r=n===T;r||s(n)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=r?S:27):this.state=r?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(n));break}}}sPIBody(){if(0===this.text.length){const e=this.getCodeNorm();e===T?this.state=26:s(e)||(this.text=String.fromCodePoint(e))}else this.captureToChar(T)&&(this.state=26)}sPIEnding(){var e;const t=this.getCodeNorm();if(t===A){const{piTarget:t}=this;"xml"===t.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(e=this.piHandler)||void 0===e||e.call(this,{target:t,body:this.text}),this.piTarget=this.text="",this.state=x}else t===T?this.text+="?":(this.text+=`?${String.fromCodePoint(t)}`,this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const e=this.skipSpaces();e!==T?e!==w&&(this.state=28,this.name=String.fromCodePoint(e)):this.state=S}sXMLDeclName(){const e=this.captureTo(D);if(e===T)return this.state=S,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(s(e)||e===E){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=e===E?30:29}}sXMLDeclEq(){const e=this.getCodeNorm();if(e===T)return this.state=S,void this.fail("XML declaration is incomplete.");s(e)||(e!==E&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const e=this.getCodeNorm();if(e===T)return this.state=S,void this.fail("XML declaration is incomplete.");s(e)||(R(e)?this.q=e:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const e=this.captureTo([this.q,T]);if(e===T)return this.state=S,this.text="",void this.fail("XML declaration is incomplete.");if(e===w)return;const t=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const e=t;this.xmlDecl.version=e,/^1\.[0-9]+$/.test(e)?this.opt.forceXMLVersion||this.setXMLVersion(e):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(t)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=t;break;case"standalone":"yes"!==t&&"no"!==t&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=t}this.name="",this.state=32}sXMLDeclSeparator(){const e=this.getCodeNorm();e!==T?(s(e)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=S}sXMLDeclEnding(){var e;this.getCodeNorm()===A?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(e=this.xmldeclHandler)||void 0===e||e.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=x):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var e;const t=this.captureNameChars();if(t===w)return;const n=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=n.ns=Object.create(null)),null===(e=this.openTagStartHandler)||void 0===e||e.call(this,n),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),t){case A:this.openTag();break;case 47:this.state=35;break;default:s(t)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===A?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const e=this.skipSpaces();e!==w&&(l(e)?(this.unget(),this.state=37):e===A?this.openTag():47===e?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const e=this.captureNameChars();e===E?this.state=39:s(e)?this.state=38:e===A?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):e!==w&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const e=this.skipSpaces();switch(e){case w:return;case E:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",e===A?this.openTag():l(e)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const e=this.getCodeNorm();R(e)?(this.q=e,this.state=40):s(e)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:e,chunk:t}=this;let{i:n}=this;for(;;)switch(this.getCode()){case e:return this.pushAttrib(this.name,this.text+t.slice(n,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=t.slice(n,this.prevI),this.state=14,void(this.entityReturnState=40);case C:case _:case 9:this.text+=`${t.slice(n,this.prevI)} `,n=this.i;break;case k:return this.text+=t.slice(n,this.prevI),void this.fail("disallowed character.");case w:return void(this.text+=t.slice(n))}}sAttribValueClosed(){const e=this.getCodeNorm();s(e)?this.state=36:e===A?this.openTag():47===e?this.state=35:l(e)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const e=this.captureTo(M);switch(e){case 38:this.state=14,this.entityReturnState=42;break;case k:this.fail("disallowed character.");break;case w:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",e===A?this.openTag():this.state=36}}sCloseTag(){const e=this.captureNameChars();e===A?this.closeTag():s(e)?this.state=44:e!==w&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case A:this.closeTag();break;case w:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:e,forbiddenState:t}=this;const{chunk:n,textHandler:r}=this;e:for(;;)switch(this.getCode()){case k:if(this.state=15,void 0!==r){const{text:t}=this,i=n.slice(e,this.prevI);0!==t.length?(r(t+i),this.text=""):0!==i.length&&r(i)}t=0;break e;case 38:this.state=14,this.entityReturnState=x,void 0!==r&&(this.text+=n.slice(e,this.prevI)),t=0;break e;case I:switch(t){case 0:t=1;break;case 1:t=2;break;case 2:break;default:throw new Error("impossible state")}break;case A:2===t&&this.fail('the string "]]>" is disallowed in char data.'),t=0;break;case _:void 0!==r&&(this.text+=`${n.slice(e,this.prevI)}\n`),e=this.i,t=0;break;case w:void 0!==r&&(this.text+=n.slice(e));break e;default:t=0}this.forbiddenState=t}handleTextOutsideRoot(){let{i:e}=this;const{chunk:t,textHandler:n}=this;let r=!1;e:for(;;){const i=this.getCode();switch(i){case k:if(this.state=15,void 0!==n){const{text:r}=this,i=t.slice(e,this.prevI);0!==r.length?(n(r+i),this.text=""):0!==i.length&&n(i)}break e;case 38:this.state=14,this.entityReturnState=x,void 0!==n&&(this.text+=t.slice(e,this.prevI)),r=!0;break e;case _:void 0!==n&&(this.text+=`${t.slice(e,this.prevI)}\n`),e=this.i;break;case w:void 0!==n&&(this.text+=t.slice(e));break e;default:s(i)||(r=!0)}}r&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(e,t){var n;const{prefix:r,local:i}=this.qname(e),o={name:e,prefix:r,local:i,value:t};if(this.attribList.push(o),null===(n=this.attributeHandler)||void 0===n||n.call(this,o),"xmlns"===r){const e=t.trim();"1.0"===this.currentXMLVersion&&""===e&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[i]=e,P(this,i,e)}else if("xmlns"===e){const e=t.trim();this.topNS[""]=e,P(this,"",e)}}pushAttribPlain(e,t){var n;const r={name:e,value:t};this.attribList.push(r),null===(n=this.attributeHandler)||void 0===n||n.call(this,r)}end(){var e,t;this.sawRoot||this.fail("document must contain a root element.");const{tags:n}=this;for(;n.length>0;){const e=n.pop();this.fail(`unclosed tag: ${e.name}`)}0!==this.state&&this.state!==x&&this.fail("unexpected end.");const{text:r}=this;return 0!==r.length&&(null===(e=this.textHandler)||void 0===e||e.call(this,r),this.text=""),this._closed=!0,null===(t=this.endHandler)||void 0===t||t.call(this),this._init(),this}resolve(e){var t,n;let r=this.topNS[e];if(void 0!==r)return r;const{tags:i}=this;for(let t=i.length-1;t>=0;t--)if(r=i[t].ns[e],void 0!==r)return r;return r=this.ns[e],void 0!==r?r:null===(n=(t=this.opt).resolvePrefix)||void 0===n?void 0:n.call(t,e)}qname(e){const t=e.indexOf(":");if(-1===t)return{prefix:"",local:e};const n=e.slice(t+1),r=e.slice(0,t);return(""===r||""===n||n.includes(":"))&&this.fail(`malformed name: ${e}.`),{prefix:r,local:n}}processAttribsNS(){var e;const{attribList:t}=this,n=this.tag;{const{prefix:t,local:r}=this.qname(n.name);n.prefix=t,n.local=r;const i=n.uri=null!==(e=this.resolve(t))&&void 0!==e?e:"";""!==t&&("xmlns"===t&&this.fail('tags may not have "xmlns" as prefix.'),""===i&&(this.fail(`unbound namespace prefix: ${JSON.stringify(t)}.`),n.uri=t))}if(0===t.length)return;const{attributes:r}=n,i=new Set;for(const e of t){const{name:t,prefix:n,local:o}=e;let s,a;""===n?(s="xmlns"===t?v:"",a=t):(s=this.resolve(n),void 0===s&&(this.fail(`unbound namespace prefix: ${JSON.stringify(n)}.`),s=n),a=`{${s}}${o}`),i.has(a)&&this.fail(`duplicate attribute: ${a}.`),i.add(a),e.uri=s,r[t]=e}this.attribList=[]}processAttribsPlain(){const{attribList:e}=this,t=this.tag.attributes;for(const{name:n,value:r}of e)void 0!==t[n]&&this.fail(`duplicate attribute: ${n}.`),t[n]=r;this.attribList=[]}openTag(){var e;this.processAttribs();const{tags:t}=this,n=this.tag;n.isSelfClosing=!1,null===(e=this.openTagHandler)||void 0===e||e.call(this,n),t.push(n),this.state=x,this.name=""}openSelfClosingTag(){var e,t,n;this.processAttribs();const{tags:r}=this,i=this.tag;i.isSelfClosing=!0,null===(e=this.openTagHandler)||void 0===e||e.call(this,i),null===(t=this.closeTagHandler)||void 0===t||t.call(this,i);null===(this.tag=null!==(n=r[r.length-1])&&void 0!==n?n:null)&&(this.closedRoot=!0),this.state=x,this.name=""}closeTag(){const{tags:e,name:t}=this;if(this.state=x,this.name="",""===t)return this.fail("weird empty close tag."),void(this.text+="</>");const n=this.closeTagHandler;let r=e.length;for(;r-- >0;){const r=this.tag=e.pop();if(this.topNS=r.ns,null==n||n(r),r.name===t)break;this.fail("unexpected close tag.")}0===r?this.closedRoot=!0:r<0&&(this.fail(`unmatched closing tag: ${t}.`),this.text+=`</${t}>`)}parseEntity(e){if("#"!==e[0]){const t=this.ENTITIES[e];return void 0!==t?t:(this.fail(this.isName(e)?"undefined entity.":"disallowed character in entity name."),`&${e};`)}let t=NaN;return"x"===e[1]&&/^#x[0-9a-f]+$/i.test(e)?t=parseInt(e.slice(2),16):/^#[0-9]+$/.test(e)&&(t=parseInt(e.slice(1),10)),this.isChar(t)?String.fromCodePoint(t):(this.fail("malformed character entity."),`&${e};`)}}},5568:e=>{"use strict";const{AbortController:t,AbortSignal:n}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=n,e.exports.default=t},7526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],l=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,l)),u=0,d=l>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(e,a,a+s>l?l:a+s));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function c(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(l(r));return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8287:(e,t,n)=>{"use strict";const r=n(7526),i=n(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,n)}function c(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=a(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|f(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Z(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),a(e<0?0:0|f(e))}function h(e){const t=e.length<0?0:0|f(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function f(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let r=-1;for(o=n;o<a;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(Z(r))return s;e[n+s]=r}return s}function _(e,t,n,r){return J(W(t,e.length-n),e,n,r)}function x(e,t,n,r){return J(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return J(G(t),e,n,r)}function C(e,t,n,r){return J(function(e,t){let n,r,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=n){let n,r,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(l=(31&t)<<6|63&n,l>127&&(o=l));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(l=(15&t)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=e[i+1],r=e[i+2],a=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(e){const t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return c(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<a;++e)if(c[e]!==u[e]){o=c[e],s=u[e];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return x(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const A=4096;function T(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Q[e[r]];return i}function L(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r,i){q(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function M(e,t,n,r,i){q(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return t=+t,n>>>=0,o||P(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=X(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),l.prototype.readBigUInt64BE=X(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||N(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=X(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=X(function(e){$(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=X(function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=X(function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o|0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=X(function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=X(function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%s]}return this};const B={};function F(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function q(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new B.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){$(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(r,i,o)}function $(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw $(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),F("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),F("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=z(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r},RangeError);const V=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function J(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Y:e}function Y(){throw new Error("BigInt not supported")}},2341:e=>{"use strict";e.exports=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((t,n,r)=>t+(0===r?"":",")+e(void 0===n||"symbol"==typeof n?null:n),"")+"]":"{"+Object.keys(t).sort().reduce((n,r,i)=>{if(void 0===t[r]||"symbol"==typeof t[r])return n;return n+(0===n.length?"":",")+e(r)+":"+e(t[r])},"")+"}"}},4460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),t.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}))},3806:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;var a=s(n(5413)),l=n(2730),c=n(4460),u=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function d(e){return e.replace(/"/g,"&quot;")}var h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function p(e,t){void 0===t&&(t={});for(var n=("length"in e?e:[e]),r="",i=0;i<n.length;i++)r+=f(n[i],t);return r}function f(e,t){switch(e.type){case a.Root:return p(e.children,t);case a.Doctype:case a.Directive:return"<".concat(e.data,">");case a.Comment:return function(e){return"\x3c!--".concat(e.data,"--\x3e")}(e);case a.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var n;"foreign"===t.xmlMode&&(e.name=null!==(n=c.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&m.has(e.parent.name)&&(t=r(r({},t),{xmlMode:!1})));!t.xmlMode&&g.has(e.name)&&(t=r(r({},t),{xmlMode:"foreign"}));var i="<".concat(e.name),o=function(e,t){var n;if(e){var r=!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)?d:t.xmlMode||"utf8"!==t.encodeEntities?l.encodeXML:l.escapeAttribute;return Object.keys(e).map(function(n){var i,o,s=null!==(i=e[n])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(n=null!==(o=c.attributeNames.get(n))&&void 0!==o?o:n),t.emptyAttrs||t.xmlMode||""!==s?"".concat(n,'="').concat(r(s),'"'):n}).join(" ")}}(e.attribs,t);o&&(i+=" ".concat(o));0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&h.has(e.name))?(t.xmlMode||(i+=" "),i+="/>"):(i+=">",e.children.length>0&&(i+=p(e.children,t)),!t.xmlMode&&h.has(e.name)||(i+="</".concat(e.name,">")));return i}(e,t);case a.Text:return function(e,t){var n,r=e.data||"";!1===(null!==(n=t.encodeEntities)&&void 0!==n?n:t.decodeEntities)||!t.xmlMode&&e.parent&&u.has(e.parent.name)||(r=t.xmlMode||"utf8"!==t.encodeEntities?(0,l.encodeXML)(r):(0,l.escapeText)(r));return r}(e,t)}}t.render=p,t.default=p;var m=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"])},5413:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},1141:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var o=n(5413),s=n(9338);i(n(9338),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(n=t,t=a),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:a,this.elementCB=null!=n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?o.ElementType.Tag:void 0,r=new s.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===o.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new s.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===o.ElementType.Comment)this.lastNode.data+=e;else{var t=new s.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new s.Text(""),t=new s.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new s.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},9338:function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var s=n(5413),a=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),x(this,e)},e}();t.Node=a;var l=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return i(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(a);t.DataNode=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.Text,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(l);t.Text=c;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.Comment,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(l);t.Comment=u;var d=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=s.ElementType.Directive,r}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(l);t.ProcessingInstruction=d;var h=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return i(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(a);t.NodeWithChildren=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.CDATA,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(h);t.CDATA=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=s.ElementType.Root,t}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(h);t.Document=f;var m=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?s.ElementType.Script:"style"===t?s.ElementType.Style:s.ElementType.Tag);var o=e.call(this,r)||this;return o.name=t,o.attribs=n,o.type=i,o}return i(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map(function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}})},enumerable:!1,configurable:!0}),t}(h);function g(e){return(0,s.isTag)(e)}function v(e){return e.type===s.ElementType.CDATA}function y(e){return e.type===s.ElementType.Text}function b(e){return e.type===s.ElementType.Comment}function w(e){return e.type===s.ElementType.Directive}function _(e){return e.type===s.ElementType.Root}function x(e,t){var n;if(void 0===t&&(t=!1),y(e))n=new c(e.data);else if(b(e))n=new u(e.data);else if(g(e)){var r=t?S(e.children):[],i=new m(e.name,o({},e.attribs),r);r.forEach(function(e){return e.parent=i}),null!=e.namespace&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=o({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=o({},e["x-attribsPrefix"])),n=i}else if(v(e)){r=t?S(e.children):[];var s=new p(r);r.forEach(function(e){return e.parent=s}),n=s}else if(_(e)){r=t?S(e.children):[];var a=new f(r);r.forEach(function(e){return e.parent=a}),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),n=a}else{if(!w(e))throw new Error("Not implemented yet: ".concat(e.type));var l=new d(e.name,e.data);null!=e["x-name"]&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function S(e){for(var t=e.map(function(e){return x(e,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=m,t.isTag=g,t.isCDATA=v,t.isText=y,t.isComment=b,t.isDirective=w,t.isDocument=_,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=x},4437:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=function(e){var t=l(d,e);return t?"feed"===t.name?function(e){var t,n=e.children,r={type:"atom",items:(0,i.getElementsByTagName)("entry",n).map(function(e){var t,n=e.children,r={media:a(n)};u(r,"id","id",n),u(r,"title","title",n);var i=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;i&&(r.link=i);var o=c("summary",n)||c("content",n);o&&(r.description=o);var s=c("updated",n);return s&&(r.pubDate=new Date(s)),r})};u(r,"id","id",n),u(r,"title","title",n);var o=null===(t=l("link",n))||void 0===t?void 0:t.attribs.href;o&&(r.link=o);u(r,"description","subtitle",n);var s=c("updated",n);s&&(r.updated=new Date(s));return u(r,"author","email",n,!0),r}(t):function(e){var t,n,r=null!==(n=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],o={type:e.name.substr(0,3),id:"",items:(0,i.getElementsByTagName)("item",e.children).map(function(e){var t=e.children,n={media:a(t)};u(n,"id","guid",t),u(n,"title","title",t),u(n,"link","link",t),u(n,"description","description",t);var r=c("pubDate",t)||c("dc:date",t);return r&&(n.pubDate=new Date(r)),n})};u(o,"title","title",r),u(o,"link","link",r),u(o,"description","description",r);var s=c("lastBuildDate",r);s&&(o.updated=new Date(s));return u(o,"author","managingEditor",r,!0),o}(t):null};var r=n(6037),i=n(3209);var o=["url","type","lang"],s=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,i.getElementsByTagName)("media:content",e).map(function(e){for(var t=e.attribs,n={medium:t.medium,isDefault:!!t.isDefault},r=0,i=o;r<i.length;r++){t[c=i[r]]&&(n[c]=t[c])}for(var a=0,l=s;a<l.length;a++){var c;t[c=l[a]]&&(n[c]=parseInt(t[c],10))}return t.expression&&(n.expression=t.expression),n})}function l(e,t){return(0,i.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,n){return void 0===n&&(n=!1),(0,r.textContent)((0,i.getElementsByTagName)(e,t,n,1)).trim()}function u(e,t,n,r,i){void 0===i&&(i=!1);var o=c(n,r,i);o&&(e[t]=o)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},5397:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentPosition=void 0,t.removeSubsets=function(e){var t=e.length;for(;--t>=0;){var n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0)e.splice(t,1);else for(var r=n.parent;r;r=r.parent)if(e.includes(r)){e.splice(t,1);break}}return e},t.compareDocumentPosition=o,t.uniqueSort=function(e){return(e=e.filter(function(e,t,n){return!n.includes(e,t+1)})).sort(function(e,t){var n=o(e,t);return n&r.PRECEDING?-1:n&r.FOLLOWING?1:0}),e};var r,i=n(1141);function o(e,t){var n=[],o=[];if(e===t)return 0;for(var s=(0,i.hasChildren)(e)?e:e.parent;s;)n.unshift(s),s=s.parent;for(s=(0,i.hasChildren)(t)?t:t.parent;s;)o.unshift(s),s=s.parent;for(var a=Math.min(n.length,o.length),l=0;l<a&&n[l]===o[l];)l++;if(0===l)return r.DISCONNECTED;var c=n[l-1],u=c.children,d=n[l],h=o[l];return u.indexOf(d)>u.indexOf(h)?c===t?r.FOLLOWING|r.CONTAINED_BY:r.FOLLOWING:c===e?r.PRECEDING|r.CONTAINS:r.PRECEDING}!function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(r||(t.DocumentPosition=r={}))},8888:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,i(n(6037),t),i(n(8938),t),i(n(3403),t),i(n(718),t),i(n(3209),t),i(n(5397),t),i(n(4437),t);var o=n(1141);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return o.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return o.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return o.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return o.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return o.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return o.hasChildren}})},3209:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testElement=function(e,t){var n=l(e);return!n||n(t)},t.getElements=function(e,t,n,r){void 0===r&&(r=1/0);var o=l(e);return o?(0,i.filter)(o,t,n,r):[]},t.getElementById=function(e,t,n){void 0===n&&(n=!0);Array.isArray(t)||(t=[t]);return(0,i.findOne)(s("id",e),t,n)},t.getElementsByTagName=function(e,t,n,r){void 0===n&&(n=!0);void 0===r&&(r=1/0);return(0,i.filter)(o.tag_name(e),t,n,r)},t.getElementsByClassName=function(e,t,n,r){void 0===n&&(n=!0);void 0===r&&(r=1/0);return(0,i.filter)(s("class",e),t,n,r)},t.getElementsByTagType=function(e,t,n,r){void 0===n&&(n=!0);void 0===r&&(r=1/0);return(0,i.filter)(o.tag_type(e),t,n,r)};var r=n(1141),i=n(718),o={tag_name:function(e){return"function"==typeof e?function(t){return(0,r.isTag)(t)&&e(t.name)}:"*"===e?r.isTag:function(t){return(0,r.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,r.isText)(t)&&e(t.data)}:function(t){return(0,r.isText)(t)&&t.data===e}}};function s(e,t){return"function"==typeof t?function(n){return(0,r.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,r.isTag)(n)&&n.attribs[e]===t}}function a(e,t){return function(n){return e(n)||t(n)}}function l(e){var t=Object.keys(e).map(function(t){var n=e[t];return Object.prototype.hasOwnProperty.call(o,t)?o[t](n):s(t,n)});return 0===t.length?null:t.reduce(a)}},3403:(e,t)=>{"use strict";function n(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(t,"__esModule",{value:!0}),t.removeElement=n,t.replaceElement=function(e,t){var n=t.prev=e.prev;n&&(n.next=t);var r=t.next=e.next;r&&(r.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t,e.parent=null}},t.appendChild=function(e,t){if(n(t),t.next=null,t.parent=e,e.children.push(t)>1){var r=e.children[e.children.length-2];r.next=t,t.prev=r}else t.prev=null},t.append=function(e,t){n(t);var r=e.parent,i=e.next;if(t.next=i,t.prev=e,e.next=t,t.parent=r,i){if(i.prev=t,r){var o=r.children;o.splice(o.lastIndexOf(i),0,t)}}else r&&r.children.push(t)},t.prependChild=function(e,t){if(n(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var r=e.children[1];r.prev=t,t.next=r}else t.next=null},t.prepend=function(e,t){n(t);var r=e.parent;if(r){var i=r.children;i.splice(i.indexOf(e),0,t)}e.prev&&(e.prev.next=t);t.parent=r,t.prev=e.prev,t.next=e,e.prev=t}},718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filter=function(e,t,n,r){void 0===n&&(n=!0);void 0===r&&(r=1/0);return i(e,Array.isArray(t)?t:[t],n,r)},t.find=i,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,n,i){void 0===i&&(i=!0);for(var o=Array.isArray(n)?n:[n],s=0;s<o.length;s++){var a=o[s];if((0,r.isTag)(a)&&t(a))return a;if(i&&(0,r.hasChildren)(a)&&a.children.length>0){var l=e(t,a.children,!0);if(l)return l}}return null},t.existsOne=function e(t,n){return(Array.isArray(n)?n:[n]).some(function(n){return(0,r.isTag)(n)&&t(n)||(0,r.hasChildren)(n)&&e(t,n.children)})},t.findAll=function(e,t){for(var n=[],i=[Array.isArray(t)?t:[t]],o=[0];;)if(o[0]>=i[0].length){if(1===i.length)return n;i.shift(),o.shift()}else{var s=i[0][o[0]++];(0,r.isTag)(s)&&e(s)&&n.push(s),(0,r.hasChildren)(s)&&s.children.length>0&&(o.unshift(0),i.unshift(s.children))}};var r=n(1141);function i(e,t,n,i){for(var o=[],s=[Array.isArray(t)?t:[t]],a=[0];;)if(a[0]>=s[0].length){if(1===a.length)return o;s.shift(),a.shift()}else{var l=s[0][a[0]++];if(e(l)&&(o.push(l),--i<=0))return o;n&&(0,r.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),s.unshift(l.children))}}},6037:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,i.hasChildren)(e)?e.children.map(function(e){return a(e,t)}).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,i.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,i.isCDATA)(t)?e(t.children):(0,i.isText)(t)?t.data:""},t.textContent=function e(t){if(Array.isArray(t))return t.map(e).join("");if((0,i.hasChildren)(t)&&!(0,i.isComment)(t))return e(t.children);return(0,i.isText)(t)?t.data:""},t.innerText=function e(t){if(Array.isArray(t))return t.map(e).join("");if((0,i.hasChildren)(t)&&(t.type===s.ElementType.Tag||(0,i.isCDATA)(t)))return e(t.children);return(0,i.isText)(t)?t.data:""};var i=n(1141),o=r(n(3806)),s=n(5413);function a(e,t){return(0,o.default)(e,t)}},8938:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChildren=i,t.getParent=o,t.getSiblings=function(e){var t=o(e);if(null!=t)return i(t);var n=[e],r=e.prev,s=e.next;for(;null!=r;)n.unshift(r),r=r.prev;for(;null!=s;)n.push(s),s=s.next;return n},t.getAttributeValue=function(e,t){var n;return null===(n=e.attribs)||void 0===n?void 0:n[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){var t=e.next;for(;null!==t&&!(0,r.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){var t=e.prev;for(;null!==t&&!(0,r.isTag)(t);)t=t.prev;return t};var r=n(1141);function i(e){return(0,r.hasChildren)(e)?e.children:[]}function o(e){return e.parent||null}},9878:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=s(n(3603));t.htmlDecodeTree=a.default;var l=s(n(2517));t.xmlDecodeTree=l.default;var c=o(n(5096));t.decodeCodePoint=c.default;var u,d=n(5096);Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return d.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return d.fromCodePoint}}),function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(u||(u={}));var h,p,f;function m(e){return e>=u.ZERO&&e<=u.NINE}function g(e){return e>=u.UPPER_A&&e<=u.UPPER_F||e>=u.LOWER_A&&e<=u.LOWER_F}function v(e){return e===u.EQUALS||function(e){return e>=u.UPPER_A&&e<=u.UPPER_Z||e>=u.LOWER_A&&e<=u.LOWER_Z||m(e)}(e)}!function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(h=t.BinTrieFlags||(t.BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(p||(p={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(f=t.DecodingMode||(t.DecodingMode={}));var y=function(){function e(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=p.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=p.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case p.EntityStart:return e.charCodeAt(t)===u.NUM?(this.state=p.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=p.NamedEntity,this.stateNamedEntity(e,t));case p.NumericStart:return this.stateNumericStart(e,t);case p.NumericDecimal:return this.stateNumericDecimal(e,t);case p.NumericHex:return this.stateNumericHex(e,t);case p.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===u.LOWER_X?(this.state=p.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=p.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,n,r){if(t!==n){var i=n-t;this.result=this.result*Math.pow(r,i)+parseInt(e.substr(t,i),r),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){for(var n=t;t<e.length;){var r=e.charCodeAt(t);if(!m(r)&&!g(r))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var n=t;t<e.length;){var r=e.charCodeAt(t);if(!m(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===u.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,c.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==u.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var n=this.decodeTree,r=n[this.treeIndex],i=(r&h.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var o=e.charCodeAt(t);if(this.treeIndex=w(n,r,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===f.Attribute&&(0===i||v(o))?0:this.emitNotTerminatedNamedEntity();if(0!==(i=((r=n[this.treeIndex])&h.VALUE_LENGTH)>>14)){if(o===u.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,n=(this.decodeTree[t]&h.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,n,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,n){var r=this.decodeTree;return this.emitCodePoint(1===t?r[e]&~h.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n},e.prototype.end=function(){var e;switch(this.state){case p.NamedEntity:return 0===this.result||this.decodeMode===f.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case p.NumericDecimal:return this.emitNumericEntity(0,2);case p.NumericHex:return this.emitNumericEntity(0,3);case p.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case p.EntityStart:return 0}},e}();function b(e){var t="",n=new y(e,function(e){return t+=(0,c.fromCodePoint)(e)});return function(e,r){for(var i=0,o=0;(o=e.indexOf("&",o))>=0;){t+=e.slice(i,o),n.startEntity(r);var s=n.write(e,o+1);if(s<0){i=o+n.end();break}i=o+s,o=0===s?i+1:i}var a=t+e.slice(i);return t="",a}}function w(e,t,n,r){var i=(t&h.BRANCH_LENGTH)>>7,o=t&h.JUMP_TABLE;if(0===i)return 0!==o&&r===o?n:-1;if(o){var s=r-o;return s<0||s>=i?-1:e[n+s]-1}for(var a=n,l=a+i-1;a<=l;){var c=a+l>>>1,u=e[c];if(u<r)a=c+1;else{if(!(u>r))return e[c+i];l=c-1}}return-1}t.EntityDecoder=y,t.determineBranch=w;var _=b(a.default),x=b(l.default);t.decodeHTML=function(e,t){return void 0===t&&(t=f.Legacy),_(e,t)},t.decodeHTMLAttribute=function(e){return _(e,f.Attribute)},t.decodeHTMLStrict=function(e){return _(e,f.Strict)},t.decodeXML=function(e){return x(e,f.Strict)}},5096:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function i(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=r.get(e))&&void 0!==t?t:e}t.fromCodePoint=null!==(n=String.fromCodePoint)&&void 0!==n?n:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)},t.replaceCodePoint=i,t.default=function(e){return(0,t.fromCodePoint)(i(e))}},1818:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNonAsciiHTML=t.encodeHTML=void 0;var i=r(n(5504)),o=n(5987),s=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function a(e,t){for(var n,r="",s=0;null!==(n=e.exec(t));){var a=n.index;r+=t.substring(s,a);var l=t.charCodeAt(a),c=i.default.get(l);if("object"==typeof c){if(a+1<t.length){var u=t.charCodeAt(a+1),d="number"==typeof c.n?c.n===u?c.o:void 0:c.n.get(u);if(void 0!==d){r+=d,s=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)r+=c,s=a+1;else{var h=(0,o.getCodePoint)(t,a);r+="&#x".concat(h.toString(16),";"),s=e.lastIndex+=Number(h!==l)}}return r+t.substr(s)}t.encodeHTML=function(e){return a(s,e)},t.encodeNonAsciiHTML=function(e){return a(o.xmlReplacer,e)}},5987:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var n=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function r(e){for(var r,i="",o=0;null!==(r=t.xmlReplacer.exec(e));){var s=r.index,a=e.charCodeAt(s),l=n.get(a);void 0!==l?(i+=e.substring(o,s)+l,o=s+1):(i+="".concat(e.substring(o,s),"&#x").concat((0,t.getCodePoint)(e,s).toString(16),";"),o=t.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return i+e.substr(o)}function i(e,t){return function(n){for(var r,i=0,o="";r=e.exec(n);)i!==r.index&&(o+=n.substring(i,r.index)),o+=t.get(r[0].charCodeAt(0)),i=r.index+1;return o+n.substring(i)}}t.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},t.encodeXML=r,t.escape=r,t.escapeUTF8=i(/[&<>'"]/g,n),t.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))},3603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array('\u1d41<\xd5\u0131\u028a\u049d\u057b\u05d0\u0675\u06de\u07a2\u07d6\u080f\u0a4a\u0a91\u0da1\u0e6d\u0f09\u0f26\u10ca\u1228\u12e1\u1415\u149d\u14c3\u14df\u1525\0\0\0\0\0\0\u156b\u16cd\u198d\u1c12\u1ddd\u1f7e\u2060\u21b0\u228d\u23c0\u23fb\u2442\u2824\u2912\u2d08\u2e48\u2fce\u3016\u32ba\u3639\u37ac\u38fe\u3a28\u3a71\u3ae0\u3b2e\u0800EMabcfglmnoprstu\\bfms\x7f\x84\x8b\x90\x95\x98\xa6\xb3\xb9\xc8\xcflig\u803b\xc6\u40c6P\u803b&\u4026cute\u803b\xc1\u40c1reve;\u4102\u0100iyx}rc\u803b\xc2\u40c2;\u4410r;\uc000\u{1d504}rave\u803b\xc0\u40c0pha;\u4391acr;\u4100d;\u6a53\u0100gp\x9d\xa1on;\u4104f;\uc000\u{1d538}plyFunction;\u6061ing\u803b\xc5\u40c5\u0100cs\xbe\xc3r;\uc000\u{1d49c}ign;\u6254ilde\u803b\xc3\u40c3ml\u803b\xc4\u40c4\u0400aceforsu\xe5\xfb\xfe\u0117\u011c\u0122\u0127\u012a\u0100cr\xea\xf2kslash;\u6216\u0176\xf6\xf8;\u6ae7ed;\u6306y;\u4411\u0180crt\u0105\u010b\u0114ause;\u6235noullis;\u612ca;\u4392r;\uc000\u{1d505}pf;\uc000\u{1d539}eve;\u42d8c\xf2\u0113mpeq;\u624e\u0700HOacdefhilorsu\u014d\u0151\u0156\u0180\u019e\u01a2\u01b5\u01b7\u01ba\u01dc\u0215\u0273\u0278\u027ecy;\u4427PY\u803b\xa9\u40a9\u0180cpy\u015d\u0162\u017aute;\u4106\u0100;i\u0167\u0168\u62d2talDifferentialD;\u6145leys;\u612d\u0200aeio\u0189\u018e\u0194\u0198ron;\u410cdil\u803b\xc7\u40c7rc;\u4108nint;\u6230ot;\u410a\u0100dn\u01a7\u01adilla;\u40b8terDot;\u40b7\xf2\u017fi;\u43a7rcle\u0200DMPT\u01c7\u01cb\u01d1\u01d6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01e2\u01f8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020foubleQuote;\u601duote;\u6019\u0200lnpu\u021e\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6a74\u0180git\u022f\u0236\u023aruent;\u6261nt;\u622fourIntegral;\u622e\u0100fr\u024c\u024e;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6a2fcr;\uc000\u{1d49e}p\u0100;C\u0284\u0285\u62d3ap;\u624d\u0580DJSZacefios\u02a0\u02ac\u02b0\u02b4\u02b8\u02cb\u02d7\u02e1\u02e6\u0333\u048d\u0100;o\u0179\u02a5trahd;\u6911cy;\u4402cy;\u4405cy;\u440f\u0180grs\u02bf\u02c4\u02c7ger;\u6021r;\u61a1hv;\u6ae4\u0100ay\u02d0\u02d5ron;\u410e;\u4414l\u0100;t\u02dd\u02de\u6207a;\u4394r;\uc000\u{1d507}\u0100af\u02eb\u0327\u0100cm\u02f0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031ccute;\u40b4o\u0174\u030b\u030d;\u42d9bleAcute;\u42ddrave;\u4060ilde;\u42dcond;\u62c4ferentialD;\u6146\u0470\u033d\0\0\0\u0342\u0354\0\u0405f;\uc000\u{1d53b}\u0180;DE\u0348\u0349\u034d\u40a8ot;\u60dcqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03cf\u03e2\u03f8ontourIntegra\xec\u0239o\u0274\u0379\0\0\u037b\xbb\u0349nArrow;\u61d3\u0100eo\u0387\u03a4ft\u0180ART\u0390\u0396\u03a1rrow;\u61d0ightArrow;\u61d4e\xe5\u02cang\u0100LR\u03ab\u03c4eft\u0100AR\u03b3\u03b9rrow;\u67f8ightArrow;\u67faightArrow;\u67f9ight\u0100AT\u03d8\u03derrow;\u61d2ee;\u62a8p\u0241\u03e9\0\0\u03efrrow;\u61d1ownArrow;\u61d5erticalBar;\u6225n\u0300ABLRTa\u0412\u042a\u0430\u045e\u047f\u037crrow\u0180;BU\u041d\u041e\u0422\u6193ar;\u6913pArrow;\u61f5reve;\u4311eft\u02d2\u043a\0\u0446\0\u0450ightVector;\u6950eeVector;\u695eector\u0100;B\u0459\u045a\u61bdar;\u6956ight\u01d4\u0467\0\u0471eeVector;\u695fector\u0100;B\u047a\u047b\u61c1ar;\u6957ee\u0100;A\u0486\u0487\u62a4rrow;\u61a7\u0100ct\u0492\u0497r;\uc000\u{1d49f}rok;\u4110\u0800NTacdfglmopqstux\u04bd\u04c0\u04c4\u04cb\u04de\u04e2\u04e7\u04ee\u04f5\u0521\u052f\u0536\u0552\u055d\u0560\u0565G;\u414aH\u803b\xd0\u40d0cute\u803b\xc9\u40c9\u0180aiy\u04d2\u04d7\u04dcron;\u411arc\u803b\xca\u40ca;\u442dot;\u4116r;\uc000\u{1d508}rave\u803b\xc8\u40c8ement;\u6208\u0100ap\u04fa\u04fecr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65fberySmallSquare;\u65ab\u0100gp\u0526\u052aon;\u4118f;\uc000\u{1d53c}silon;\u4395u\u0100ai\u053c\u0549l\u0100;T\u0542\u0543\u6a75ilde;\u6242librium;\u61cc\u0100ci\u0557\u055ar;\u6130m;\u6a73a;\u4397ml\u803b\xcb\u40cb\u0100ip\u056a\u056fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058d\u05b2\u05ccy;\u4424r;\uc000\u{1d509}lled\u0253\u0597\0\0\u05a3mallSquare;\u65fcerySmallSquare;\u65aa\u0370\u05ba\0\u05bf\0\0\u05c4f;\uc000\u{1d53d}All;\u6200riertrf;\u6131c\xf2\u05cb\u0600JTabcdfgorst\u05e8\u05ec\u05ef\u05fa\u0600\u0612\u0616\u061b\u061d\u0623\u066c\u0672cy;\u4403\u803b>\u403emma\u0100;d\u05f7\u05f8\u4393;\u43dcreve;\u411e\u0180eiy\u0607\u060c\u0610dil;\u4122rc;\u411c;\u4413ot;\u4120r;\uc000\u{1d50a};\u62d9pf;\uc000\u{1d53e}eater\u0300EFGLST\u0635\u0644\u064e\u0656\u065b\u0666qual\u0100;L\u063e\u063f\u6265ess;\u62dbullEqual;\u6267reater;\u6aa2ess;\u6277lantEqual;\u6a7eilde;\u6273cr;\uc000\u{1d4a2};\u626b\u0400Aacfiosu\u0685\u068b\u0696\u069b\u069e\u06aa\u06be\u06caRDcy;\u442a\u0100ct\u0690\u0694ek;\u42c7;\u405eirc;\u4124r;\u610clbertSpace;\u610b\u01f0\u06af\0\u06b2f;\u610dizontalLine;\u6500\u0100ct\u06c3\u06c5\xf2\u06a9rok;\u4126mp\u0144\u06d0\u06d8ownHum\xf0\u012fqual;\u624f\u0700EJOacdfgmnostu\u06fa\u06fe\u0703\u0707\u070e\u071a\u071e\u0721\u0728\u0744\u0778\u078b\u078f\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803b\xcd\u40cd\u0100iy\u0713\u0718rc\u803b\xce\u40ce;\u4418ot;\u4130r;\u6111rave\u803b\xcc\u40cc\u0180;ap\u0720\u072f\u073f\u0100cg\u0734\u0737r;\u412ainaryI;\u6148lie\xf3\u03dd\u01f4\u0749\0\u0762\u0100;e\u074d\u074e\u622c\u0100gr\u0753\u0758ral;\u622bsection;\u62c2isible\u0100CT\u076c\u0772omma;\u6063imes;\u6062\u0180gpt\u077f\u0783\u0788on;\u412ef;\uc000\u{1d540}a;\u4399cr;\u6110ilde;\u4128\u01eb\u079a\0\u079ecy;\u4406l\u803b\xcf\u40cf\u0280cfosu\u07ac\u07b7\u07bc\u07c2\u07d0\u0100iy\u07b1\u07b5rc;\u4134;\u4419r;\uc000\u{1d50d}pf;\uc000\u{1d541}\u01e3\u07c7\0\u07ccr;\uc000\u{1d4a5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07e4\u07e8\u07ec\u07f1\u07fd\u0802\u0808cy;\u4425cy;\u440cppa;\u439a\u0100ey\u07f6\u07fbdil;\u4136;\u441ar;\uc000\u{1d50e}pf;\uc000\u{1d542}cr;\uc000\u{1d4a6}\u0580JTaceflmost\u0825\u0829\u082c\u0850\u0863\u09b3\u09b8\u09c7\u09cd\u0a37\u0a47cy;\u4409\u803b<\u403c\u0280cmnpr\u0837\u083c\u0841\u0844\u084dute;\u4139bda;\u439bg;\u67ealacetrf;\u6112r;\u619e\u0180aey\u0857\u085c\u0861ron;\u413ddil;\u413b;\u441b\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087e\u08a9\u08b1\u08e0\u08e6\u08fc\u092f\u095b\u0390\u096a\u0100nr\u0883\u088fgleBracket;\u67e8row\u0180;BR\u0899\u089a\u089e\u6190ar;\u61e4ightArrow;\u61c6eiling;\u6308o\u01f5\u08b7\0\u08c3bleBracket;\u67e6n\u01d4\u08c8\0\u08d2eeVector;\u6961ector\u0100;B\u08db\u08dc\u61c3ar;\u6959loor;\u630aight\u0100AV\u08ef\u08f5rrow;\u6194ector;\u694e\u0100er\u0901\u0917e\u0180;AV\u0909\u090a\u0910\u62a3rrow;\u61a4ector;\u695aiangle\u0180;BE\u0924\u0925\u0929\u62b2ar;\u69cfqual;\u62b4p\u0180DTV\u0937\u0942\u094cownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61bfar;\u6958ector\u0100;B\u0965\u0966\u61bcar;\u6952ight\xe1\u039cs\u0300EFGLST\u097e\u098b\u0995\u099d\u09a2\u09adqualGreater;\u62daullEqual;\u6266reater;\u6276ess;\u6aa1lantEqual;\u6a7dilde;\u6272r;\uc000\u{1d50f}\u0100;e\u09bd\u09be\u62d8ftarrow;\u61daidot;\u413f\u0180npw\u09d4\u0a16\u0a1bg\u0200LRlr\u09de\u09f7\u0a02\u0a10eft\u0100AR\u09e6\u09ecrrow;\u67f5ightArrow;\u67f7ightArrow;\u67f6eft\u0100ar\u03b3\u0a0aight\xe1\u03bfight\xe1\u03caf;\uc000\u{1d543}er\u0100LR\u0a22\u0a2ceftArrow;\u6199ightArrow;\u6198\u0180cht\u0a3e\u0a40\u0a42\xf2\u084c;\u61b0rok;\u4141;\u626a\u0400acefiosu\u0a5a\u0a5d\u0a60\u0a77\u0a7c\u0a85\u0a8b\u0a8ep;\u6905y;\u441c\u0100dl\u0a65\u0a6fiumSpace;\u605flintrf;\u6133r;\uc000\u{1d510}nusPlus;\u6213pf;\uc000\u{1d544}c\xf2\u0a76;\u439c\u0480Jacefostu\u0aa3\u0aa7\u0aad\u0ac0\u0b14\u0b19\u0d91\u0d97\u0d9ecy;\u440acute;\u4143\u0180aey\u0ab4\u0ab9\u0aberon;\u4147dil;\u4145;\u441d\u0180gsw\u0ac7\u0af0\u0b0eative\u0180MTV\u0ad3\u0adf\u0ae8ediumSpace;\u600bhi\u0100cn\u0ae6\u0ad8\xeb\u0ad9eryThi\xee\u0ad9ted\u0100GL\u0af8\u0b06reaterGreate\xf2\u0673essLes\xf3\u0a48Line;\u400ar;\uc000\u{1d511}\u0200Bnpt\u0b22\u0b28\u0b37\u0b3areak;\u6060BreakingSpace;\u40a0f;\u6115\u0680;CDEGHLNPRSTV\u0b55\u0b56\u0b6a\u0b7c\u0ba1\u0beb\u0c04\u0c5e\u0c84\u0ca6\u0cd8\u0d61\u0d85\u6aec\u0100ou\u0b5b\u0b64ngruent;\u6262pCap;\u626doubleVerticalBar;\u6226\u0180lqx\u0b83\u0b8a\u0b9bement;\u6209ual\u0100;T\u0b92\u0b93\u6260ilde;\uc000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0bb6\u0bb7\u0bbd\u0bc9\u0bd3\u0bd8\u0be5\u626fqual;\u6271ullEqual;\uc000\u2267\u0338reater;\uc000\u226b\u0338ess;\u6279lantEqual;\uc000\u2a7e\u0338ilde;\u6275ump\u0144\u0bf2\u0bfdownHump;\uc000\u224e\u0338qual;\uc000\u224f\u0338e\u0100fs\u0c0a\u0c27tTriangle\u0180;BE\u0c1a\u0c1b\u0c21\u62eaar;\uc000\u29cf\u0338qual;\u62ecs\u0300;EGLST\u0c35\u0c36\u0c3c\u0c44\u0c4b\u0c58\u626equal;\u6270reater;\u6278ess;\uc000\u226a\u0338lantEqual;\uc000\u2a7d\u0338ilde;\u6274ested\u0100GL\u0c68\u0c79reaterGreater;\uc000\u2aa2\u0338essLess;\uc000\u2aa1\u0338recedes\u0180;ES\u0c92\u0c93\u0c9b\u6280qual;\uc000\u2aaf\u0338lantEqual;\u62e0\u0100ei\u0cab\u0cb9verseElement;\u620cghtTriangle\u0180;BE\u0ccb\u0ccc\u0cd2\u62ebar;\uc000\u29d0\u0338qual;\u62ed\u0100qu\u0cdd\u0d0cuareSu\u0100bp\u0ce8\u0cf9set\u0100;E\u0cf0\u0cf3\uc000\u228f\u0338qual;\u62e2erset\u0100;E\u0d03\u0d06\uc000\u2290\u0338qual;\u62e3\u0180bcp\u0d13\u0d24\u0d4eset\u0100;E\u0d1b\u0d1e\uc000\u2282\u20d2qual;\u6288ceeds\u0200;EST\u0d32\u0d33\u0d3b\u0d46\u6281qual;\uc000\u2ab0\u0338lantEqual;\u62e1ilde;\uc000\u227f\u0338erset\u0100;E\u0d58\u0d5b\uc000\u2283\u20d2qual;\u6289ilde\u0200;EFT\u0d6e\u0d6f\u0d75\u0d7f\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uc000\u{1d4a9}ilde\u803b\xd1\u40d1;\u439d\u0700Eacdfgmoprstuv\u0dbd\u0dc2\u0dc9\u0dd5\u0ddb\u0de0\u0de7\u0dfc\u0e02\u0e20\u0e22\u0e32\u0e3f\u0e44lig;\u4152cute\u803b\xd3\u40d3\u0100iy\u0dce\u0dd3rc\u803b\xd4\u40d4;\u441eblac;\u4150r;\uc000\u{1d512}rave\u803b\xd2\u40d2\u0180aei\u0dee\u0df2\u0df6cr;\u414cga;\u43a9cron;\u439fpf;\uc000\u{1d546}enCurly\u0100DQ\u0e0e\u0e1aoubleQuote;\u601cuote;\u6018;\u6a54\u0100cl\u0e27\u0e2cr;\uc000\u{1d4aa}ash\u803b\xd8\u40d8i\u016c\u0e37\u0e3cde\u803b\xd5\u40d5es;\u6a37ml\u803b\xd6\u40d6er\u0100BP\u0e4b\u0e60\u0100ar\u0e50\u0e53r;\u603eac\u0100ek\u0e5a\u0e5c;\u63deet;\u63b4arenthesis;\u63dc\u0480acfhilors\u0e7f\u0e87\u0e8a\u0e8f\u0e92\u0e94\u0e9d\u0eb0\u0efcrtialD;\u6202y;\u441fr;\uc000\u{1d513}i;\u43a6;\u43a0usMinus;\u40b1\u0100ip\u0ea2\u0eadncareplan\xe5\u069df;\u6119\u0200;eio\u0eb9\u0eba\u0ee0\u0ee4\u6abbcedes\u0200;EST\u0ec8\u0ec9\u0ecf\u0eda\u627aqual;\u6aaflantEqual;\u627cilde;\u627eme;\u6033\u0100dp\u0ee9\u0eeeuct;\u620fortion\u0100;a\u0225\u0ef9l;\u621d\u0100ci\u0f01\u0f06r;\uc000\u{1d4ab};\u43a8\u0200Ufos\u0f11\u0f16\u0f1b\u0f1fOT\u803b"\u4022r;\uc000\u{1d514}pf;\u611acr;\uc000\u{1d4ac}\u0600BEacefhiorsu\u0f3e\u0f43\u0f47\u0f60\u0f73\u0fa7\u0faa\u0fad\u1096\u10a9\u10b4\u10bearr;\u6910G\u803b\xae\u40ae\u0180cnr\u0f4e\u0f53\u0f56ute;\u4154g;\u67ebr\u0100;t\u0f5c\u0f5d\u61a0l;\u6916\u0180aey\u0f67\u0f6c\u0f71ron;\u4158dil;\u4156;\u4420\u0100;v\u0f78\u0f79\u611cerse\u0100EU\u0f82\u0f99\u0100lq\u0f87\u0f8eement;\u620builibrium;\u61cbpEquilibrium;\u696fr\xbb\u0f79o;\u43a1ght\u0400ACDFTUVa\u0fc1\u0feb\u0ff3\u1022\u1028\u105b\u1087\u03d8\u0100nr\u0fc6\u0fd2gleBracket;\u67e9row\u0180;BL\u0fdc\u0fdd\u0fe1\u6192ar;\u61e5eftArrow;\u61c4eiling;\u6309o\u01f5\u0ff9\0\u1005bleBracket;\u67e7n\u01d4\u100a\0\u1014eeVector;\u695dector\u0100;B\u101d\u101e\u61c2ar;\u6955loor;\u630b\u0100er\u102d\u1043e\u0180;AV\u1035\u1036\u103c\u62a2rrow;\u61a6ector;\u695biangle\u0180;BE\u1050\u1051\u1055\u62b3ar;\u69d0qual;\u62b5p\u0180DTV\u1063\u106e\u1078ownVector;\u694feeVector;\u695cector\u0100;B\u1082\u1083\u61bear;\u6954ector\u0100;B\u1091\u1092\u61c0ar;\u6953\u0100pu\u109b\u109ef;\u611dndImplies;\u6970ightarrow;\u61db\u0100ch\u10b9\u10bcr;\u611b;\u61b1leDelayed;\u69f4\u0680HOacfhimoqstu\u10e4\u10f1\u10f7\u10fd\u1119\u111e\u1151\u1156\u1161\u1167\u11b5\u11bb\u11bf\u0100Cc\u10e9\u10eeHcy;\u4429y;\u4428FTcy;\u442ccute;\u415a\u0280;aeiy\u1108\u1109\u110e\u1113\u1117\u6abcron;\u4160dil;\u415erc;\u415c;\u4421r;\uc000\u{1d516}ort\u0200DLRU\u112a\u1134\u113e\u1149ownArrow\xbb\u041eeftArrow\xbb\u089aightArrow\xbb\u0fddpArrow;\u6191gma;\u43a3allCircle;\u6218pf;\uc000\u{1d54a}\u0272\u116d\0\0\u1170t;\u621aare\u0200;ISU\u117b\u117c\u1189\u11af\u65a1ntersection;\u6293u\u0100bp\u118f\u119eset\u0100;E\u1197\u1198\u628fqual;\u6291erset\u0100;E\u11a8\u11a9\u6290qual;\u6292nion;\u6294cr;\uc000\u{1d4ae}ar;\u62c6\u0200bcmp\u11c8\u11db\u1209\u120b\u0100;s\u11cd\u11ce\u62d0et\u0100;E\u11cd\u11d5qual;\u6286\u0100ch\u11e0\u1205eeds\u0200;EST\u11ed\u11ee\u11f4\u11ff\u627bqual;\u6ab0lantEqual;\u627dilde;\u627fTh\xe1\u0f8c;\u6211\u0180;es\u1212\u1213\u1223\u62d1rset\u0100;E\u121c\u121d\u6283qual;\u6287et\xbb\u1213\u0580HRSacfhiors\u123e\u1244\u1249\u1255\u125e\u1271\u1276\u129f\u12c2\u12c8\u12d1ORN\u803b\xde\u40deADE;\u6122\u0100Hc\u124e\u1252cy;\u440by;\u4426\u0100bu\u125a\u125c;\u4009;\u43a4\u0180aey\u1265\u126a\u126fron;\u4164dil;\u4162;\u4422r;\uc000\u{1d517}\u0100ei\u127b\u1289\u01f2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128e\u1298kSpace;\uc000\u205f\u200aSpace;\u6009lde\u0200;EFT\u12ab\u12ac\u12b2\u12bc\u623cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uc000\u{1d54b}ipleDot;\u60db\u0100ct\u12d6\u12dbr;\uc000\u{1d4af}rok;\u4166\u0ae1\u12f7\u130e\u131a\u1326\0\u132c\u1331\0\0\0\0\0\u1338\u133d\u1377\u1385\0\u13ff\u1404\u140a\u1410\u0100cr\u12fb\u1301ute\u803b\xda\u40dar\u0100;o\u1307\u1308\u619fcir;\u6949r\u01e3\u1313\0\u1316y;\u440eve;\u416c\u0100iy\u131e\u1323rc\u803b\xdb\u40db;\u4423blac;\u4170r;\uc000\u{1d518}rave\u803b\xd9\u40d9acr;\u416a\u0100di\u1341\u1369er\u0100BP\u1348\u135d\u0100ar\u134d\u1350r;\u405fac\u0100ek\u1357\u1359;\u63dfet;\u63b5arenthesis;\u63ddon\u0100;P\u1370\u1371\u62c3lus;\u628e\u0100gp\u137b\u137fon;\u4172f;\uc000\u{1d54c}\u0400ADETadps\u1395\u13ae\u13b8\u13c4\u03e8\u13d2\u13d7\u13f3rrow\u0180;BD\u1150\u13a0\u13a4ar;\u6912ownArrow;\u61c5ownArrow;\u6195quilibrium;\u696eee\u0100;A\u13cb\u13cc\u62a5rrow;\u61a5own\xe1\u03f3er\u0100LR\u13de\u13e8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13f9\u13fa\u43d2on;\u43a5ing;\u416ecr;\uc000\u{1d4b0}ilde;\u4168ml\u803b\xdc\u40dc\u0480Dbcdefosv\u1427\u142c\u1430\u1433\u143e\u1485\u148a\u1490\u1496ash;\u62abar;\u6aeby;\u4412ash\u0100;l\u143b\u143c\u62a9;\u6ae6\u0100er\u1443\u1445;\u62c1\u0180bty\u144c\u1450\u147aar;\u6016\u0100;i\u144f\u1455cal\u0200BLST\u1461\u1465\u146a\u1474ar;\u6223ine;\u407ceparator;\u6758ilde;\u6240ThinSpace;\u600ar;\uc000\u{1d519}pf;\uc000\u{1d54d}cr;\uc000\u{1d4b1}dash;\u62aa\u0280cefos\u14a7\u14ac\u14b1\u14b6\u14bcirc;\u4174dge;\u62c0r;\uc000\u{1d51a}pf;\uc000\u{1d54e}cr;\uc000\u{1d4b2}\u0200fios\u14cb\u14d0\u14d2\u14d8r;\uc000\u{1d51b};\u439epf;\uc000\u{1d54f}cr;\uc000\u{1d4b3}\u0480AIUacfosu\u14f1\u14f5\u14f9\u14fd\u1504\u150f\u1514\u151a\u1520cy;\u442fcy;\u4407cy;\u442ecute\u803b\xdd\u40dd\u0100iy\u1509\u150drc;\u4176;\u442br;\uc000\u{1d51c}pf;\uc000\u{1d550}cr;\uc000\u{1d4b4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153f\u154b\u154f\u155d\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417d;\u4417ot;\u417b\u01f2\u1554\0\u155boWidt\xe8\u0ad9a;\u4396r;\u6128pf;\u6124cr;\uc000\u{1d4b5}\u0be1\u1583\u158a\u1590\0\u15b0\u15b6\u15bf\0\0\0\0\u15c6\u15db\u15eb\u165f\u166d\0\u1695\u169b\u16b2\u16b9\0\u16becute\u803b\xe1\u40e1reve;\u4103\u0300;Ediuy\u159c\u159d\u15a1\u15a3\u15a8\u15ad\u623e;\uc000\u223e\u0333;\u623frc\u803b\xe2\u40e2te\u80bb\xb4\u0306;\u4430lig\u803b\xe6\u40e6\u0100;r\xb2\u15ba;\uc000\u{1d51e}rave\u803b\xe0\u40e0\u0100ep\u15ca\u15d6\u0100fp\u15cf\u15d4sym;\u6135\xe8\u15d3ha;\u43b1\u0100ap\u15dfc\u0100cl\u15e4\u15e7r;\u4101g;\u6a3f\u0264\u15f0\0\0\u160a\u0280;adsv\u15fa\u15fb\u15ff\u1601\u1607\u6227nd;\u6a55;\u6a5clope;\u6a58;\u6a5a\u0380;elmrsz\u1618\u1619\u161b\u161e\u163f\u164f\u1659\u6220;\u69a4e\xbb\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163a\u163c\u163e;\u69a8;\u69a9;\u69aa;\u69ab;\u69ac;\u69ad;\u69ae;\u69aft\u0100;v\u1645\u1646\u621fb\u0100;d\u164c\u164d\u62be;\u699d\u0100pt\u1654\u1657h;\u6222\xbb\xb9arr;\u637c\u0100gp\u1663\u1667on;\u4105f;\uc000\u{1d552}\u0380;Eaeiop\u12c1\u167b\u167d\u1682\u1684\u1687\u168a;\u6a70cir;\u6a6f;\u624ad;\u624bs;\u4027rox\u0100;e\u12c1\u1692\xf1\u1683ing\u803b\xe5\u40e5\u0180cty\u16a1\u16a6\u16a8r;\uc000\u{1d4b6};\u402amp\u0100;e\u12c1\u16af\xf1\u0288ilde\u803b\xe3\u40e3ml\u803b\xe4\u40e4\u0100ci\u16c2\u16c8onin\xf4\u0272nt;\u6a11\u0800Nabcdefiklnoprsu\u16ed\u16f1\u1730\u173c\u1743\u1748\u1778\u177d\u17e0\u17e6\u1839\u1850\u170d\u193d\u1948\u1970ot;\u6aed\u0100cr\u16f6\u171ek\u0200ceps\u1700\u1705\u170d\u1713ong;\u624cpsilon;\u43f6rime;\u6035im\u0100;e\u171a\u171b\u623dq;\u62cd\u0176\u1722\u1726ee;\u62bded\u0100;g\u172c\u172d\u6305e\xbb\u172drk\u0100;t\u135c\u1737brk;\u63b6\u0100oy\u1701\u1741;\u4431quo;\u601e\u0280cmprt\u1753\u175b\u1761\u1764\u1768aus\u0100;e\u010a\u0109ptyv;\u69b0s\xe9\u170cno\xf5\u0113\u0180ahw\u176f\u1771\u1773;\u43b2;\u6136een;\u626cr;\uc000\u{1d51f}g\u0380costuvw\u178d\u179d\u17b3\u17c1\u17d5\u17db\u17de\u0180aiu\u1794\u1796\u179a\xf0\u0760rc;\u65efp\xbb\u1371\u0180dpt\u17a4\u17a8\u17adot;\u6a00lus;\u6a01imes;\u6a02\u0271\u17b9\0\0\u17becup;\u6a06ar;\u6605riangle\u0100du\u17cd\u17d2own;\u65bdp;\u65b3plus;\u6a04e\xe5\u1444\xe5\u14adarow;\u690d\u0180ako\u17ed\u1826\u1835\u0100cn\u17f2\u1823k\u0180lst\u17fa\u05ab\u1802ozenge;\u69ebriangle\u0200;dlr\u1812\u1813\u1818\u181d\u65b4own;\u65beeft;\u65c2ight;\u65b8k;\u6423\u01b1\u182b\0\u1833\u01b2\u182f\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183e\u184d\u0100;q\u1843\u1846\uc000=\u20e5uiv;\uc000\u2261\u20e5t;\u6310\u0200ptwx\u1859\u185e\u1867\u186cf;\uc000\u{1d553}\u0100;t\u13cb\u1863om\xbb\u13cctie;\u62c8\u0600DHUVbdhmptuv\u1885\u1896\u18aa\u18bb\u18d7\u18db\u18ec\u18ff\u1905\u190a\u1910\u1921\u0200LRlr\u188e\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18a1\u18a2\u18a4\u18a6\u18a8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18b3\u18b5\u18b7\u18b9;\u655d;\u655a;\u655c;\u6559\u0380;HLRhlr\u18ca\u18cb\u18cd\u18cf\u18d1\u18d3\u18d5\u6551;\u656c;\u6563;\u6560;\u656b;\u6562;\u655fox;\u69c9\u0200LRlr\u18e4\u18e6\u18e8\u18ea;\u6555;\u6552;\u6510;\u650c\u0280;DUdu\u06bd\u18f7\u18f9\u18fb\u18fd;\u6565;\u6568;\u652c;\u6534inus;\u629flus;\u629eimes;\u62a0\u0200LRlr\u1919\u191b\u191d\u191f;\u655b;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193b\u6502;\u656a;\u6561;\u655e;\u653c;\u6524;\u651c\u0100ev\u0123\u1942bar\u803b\xa6\u40a6\u0200ceio\u1951\u1956\u195a\u1960r;\uc000\u{1d4b7}mi;\u604fm\u0100;e\u171a\u171cl\u0180;bh\u1968\u1969\u196b\u405c;\u69c5sub;\u67c8\u016c\u1974\u197el\u0100;e\u1979\u197a\u6022t\xbb\u197ap\u0180;Ee\u012f\u1985\u1987;\u6aae\u0100;q\u06dc\u06db\u0ce1\u19a7\0\u19e8\u1a11\u1a15\u1a32\0\u1a37\u1a50\0\0\u1ab4\0\0\u1ac1\0\0\u1b21\u1b2e\u1b4d\u1b52\0\u1bfd\0\u1c0c\u0180cpr\u19ad\u19b2\u19ddute;\u4107\u0300;abcds\u19bf\u19c0\u19c4\u19ca\u19d5\u19d9\u6229nd;\u6a44rcup;\u6a49\u0100au\u19cf\u19d2p;\u6a4bp;\u6a47ot;\u6a40;\uc000\u2229\ufe00\u0100eo\u19e2\u19e5t;\u6041\xee\u0693\u0200aeiu\u19f0\u19fb\u1a01\u1a05\u01f0\u19f5\0\u19f8s;\u6a4don;\u410ddil\u803b\xe7\u40e7rc;\u4109ps\u0100;s\u1a0c\u1a0d\u6a4cm;\u6a50ot;\u410b\u0180dmn\u1a1b\u1a20\u1a26il\u80bb\xb8\u01adptyv;\u69b2t\u8100\xa2;e\u1a2d\u1a2e\u40a2r\xe4\u01b2r;\uc000\u{1d520}\u0180cei\u1a3d\u1a40\u1a4dy;\u4447ck\u0100;m\u1a47\u1a48\u6713ark\xbb\u1a48;\u43c7r\u0380;Ecefms\u1a5f\u1a60\u1a62\u1a6b\u1aa4\u1aaa\u1aae\u65cb;\u69c3\u0180;el\u1a69\u1a6a\u1a6d\u42c6q;\u6257e\u0261\u1a74\0\0\u1a88rrow\u0100lr\u1a7c\u1a81eft;\u61baight;\u61bb\u0280RSacd\u1a92\u1a94\u1a96\u1a9a\u1a9f\xbb\u0f47;\u64c8st;\u629birc;\u629aash;\u629dnint;\u6a10id;\u6aefcir;\u69c2ubs\u0100;u\u1abb\u1abc\u6663it\xbb\u1abc\u02ec\u1ac7\u1ad4\u1afa\0\u1b0aon\u0100;e\u1acd\u1ace\u403a\u0100;q\xc7\xc6\u026d\u1ad9\0\0\u1ae2a\u0100;t\u1ade\u1adf\u402c;\u4040\u0180;fl\u1ae8\u1ae9\u1aeb\u6201\xee\u1160e\u0100mx\u1af1\u1af6ent\xbb\u1ae9e\xf3\u024d\u01e7\u1afe\0\u1b07\u0100;d\u12bb\u1b02ot;\u6a6dn\xf4\u0246\u0180fry\u1b10\u1b14\u1b17;\uc000\u{1d554}o\xe4\u0254\u8100\xa9;s\u0155\u1b1dr;\u6117\u0100ao\u1b25\u1b29rr;\u61b5ss;\u6717\u0100cu\u1b32\u1b37r;\uc000\u{1d4b8}\u0100bp\u1b3c\u1b44\u0100;e\u1b41\u1b42\u6acf;\u6ad1\u0100;e\u1b49\u1b4a\u6ad0;\u6ad2dot;\u62ef\u0380delprvw\u1b60\u1b6c\u1b77\u1b82\u1bac\u1bd4\u1bf9arr\u0100lr\u1b68\u1b6a;\u6938;\u6935\u0270\u1b72\0\0\u1b75r;\u62dec;\u62dfarr\u0100;p\u1b7f\u1b80\u61b6;\u693d\u0300;bcdos\u1b8f\u1b90\u1b96\u1ba1\u1ba5\u1ba8\u622arcap;\u6a48\u0100au\u1b9b\u1b9ep;\u6a46p;\u6a4aot;\u628dr;\u6a45;\uc000\u222a\ufe00\u0200alrv\u1bb5\u1bbf\u1bde\u1be3rr\u0100;m\u1bbc\u1bbd\u61b7;\u693cy\u0180evw\u1bc7\u1bd4\u1bd8q\u0270\u1bce\0\0\u1bd2re\xe3\u1b73u\xe3\u1b75ee;\u62ceedge;\u62cfen\u803b\xa4\u40a4earrow\u0100lr\u1bee\u1bf3eft\xbb\u1b80ight\xbb\u1bbde\xe4\u1bdd\u0100ci\u1c01\u1c07onin\xf4\u01f7nt;\u6231lcty;\u632d\u0980AHabcdefhijlorstuwz\u1c38\u1c3b\u1c3f\u1c5d\u1c69\u1c75\u1c8a\u1c9e\u1cac\u1cb7\u1cfb\u1cff\u1d0d\u1d7b\u1d91\u1dab\u1dbb\u1dc6\u1dcdr\xf2\u0381ar;\u6965\u0200glrs\u1c48\u1c4d\u1c52\u1c54ger;\u6020eth;\u6138\xf2\u1133h\u0100;v\u1c5a\u1c5b\u6010\xbb\u090a\u016b\u1c61\u1c67arow;\u690fa\xe3\u0315\u0100ay\u1c6e\u1c73ron;\u410f;\u4434\u0180;ao\u0332\u1c7c\u1c84\u0100gr\u02bf\u1c81r;\u61catseq;\u6a77\u0180glm\u1c91\u1c94\u1c98\u803b\xb0\u40b0ta;\u43b4ptyv;\u69b1\u0100ir\u1ca3\u1ca8sht;\u697f;\uc000\u{1d521}ar\u0100lr\u1cb3\u1cb5\xbb\u08dc\xbb\u101e\u0280aegsv\u1cc2\u0378\u1cd6\u1cdc\u1ce0m\u0180;os\u0326\u1cca\u1cd4nd\u0100;s\u0326\u1cd1uit;\u6666amma;\u43ddin;\u62f2\u0180;io\u1ce7\u1ce8\u1cf8\u40f7de\u8100\xf7;o\u1ce7\u1cf0ntimes;\u62c7n\xf8\u1cf7cy;\u4452c\u026f\u1d06\0\0\u1d0arn;\u631eop;\u630d\u0280lptuw\u1d18\u1d1d\u1d22\u1d49\u1d55lar;\u4024f;\uc000\u{1d555}\u0280;emps\u030b\u1d2d\u1d37\u1d3d\u1d42q\u0100;d\u0352\u1d33ot;\u6251inus;\u6238lus;\u6214quare;\u62a1blebarwedg\xe5\xfan\u0180adh\u112e\u1d5d\u1d67ownarrow\xf3\u1c83arpoon\u0100lr\u1d72\u1d76ef\xf4\u1cb4igh\xf4\u1cb6\u0162\u1d7f\u1d85karo\xf7\u0f42\u026f\u1d8a\0\0\u1d8ern;\u631fop;\u630c\u0180cot\u1d98\u1da3\u1da6\u0100ry\u1d9d\u1da1;\uc000\u{1d4b9};\u4455l;\u69f6rok;\u4111\u0100dr\u1db0\u1db4ot;\u62f1i\u0100;f\u1dba\u1816\u65bf\u0100ah\u1dc0\u1dc3r\xf2\u0429a\xf2\u0fa6angle;\u69a6\u0100ci\u1dd2\u1dd5y;\u445fgrarr;\u67ff\u0900Dacdefglmnopqrstux\u1e01\u1e09\u1e19\u1e38\u0578\u1e3c\u1e49\u1e61\u1e7e\u1ea5\u1eaf\u1ebd\u1ee1\u1f2a\u1f37\u1f44\u1f4e\u1f5a\u0100Do\u1e06\u1d34o\xf4\u1c89\u0100cs\u1e0e\u1e14ute\u803b\xe9\u40e9ter;\u6a6e\u0200aioy\u1e22\u1e27\u1e31\u1e36ron;\u411br\u0100;c\u1e2d\u1e2e\u6256\u803b\xea\u40ealon;\u6255;\u444dot;\u4117\u0100Dr\u1e41\u1e45ot;\u6252;\uc000\u{1d522}\u0180;rs\u1e50\u1e51\u1e57\u6a9aave\u803b\xe8\u40e8\u0100;d\u1e5c\u1e5d\u6a96ot;\u6a98\u0200;ils\u1e6a\u1e6b\u1e72\u1e74\u6a99nters;\u63e7;\u6113\u0100;d\u1e79\u1e7a\u6a95ot;\u6a97\u0180aps\u1e85\u1e89\u1e97cr;\u4113ty\u0180;sv\u1e92\u1e93\u1e95\u6205et\xbb\u1e93p\u01001;\u1e9d\u1ea4\u0133\u1ea1\u1ea3;\u6004;\u6005\u6003\u0100gs\u1eaa\u1eac;\u414bp;\u6002\u0100gp\u1eb4\u1eb8on;\u4119f;\uc000\u{1d556}\u0180als\u1ec4\u1ece\u1ed2r\u0100;s\u1eca\u1ecb\u62d5l;\u69e3us;\u6a71i\u0180;lv\u1eda\u1edb\u1edf\u43b5on\xbb\u1edb;\u43f5\u0200csuv\u1eea\u1ef3\u1f0b\u1f23\u0100io\u1eef\u1e31rc\xbb\u1e2e\u0269\u1ef9\0\0\u1efb\xed\u0548ant\u0100gl\u1f02\u1f06tr\xbb\u1e5dess\xbb\u1e7a\u0180aei\u1f12\u1f16\u1f1als;\u403dst;\u625fv\u0100;D\u0235\u1f20D;\u6a78parsl;\u69e5\u0100Da\u1f2f\u1f33ot;\u6253rr;\u6971\u0180cdi\u1f3e\u1f41\u1ef8r;\u612fo\xf4\u0352\u0100ah\u1f49\u1f4b;\u43b7\u803b\xf0\u40f0\u0100mr\u1f53\u1f57l\u803b\xeb\u40ebo;\u60ac\u0180cip\u1f61\u1f64\u1f67l;\u4021s\xf4\u056e\u0100eo\u1f6c\u1f74ctatio\xee\u0559nential\xe5\u0579\u09e1\u1f92\0\u1f9e\0\u1fa1\u1fa7\0\0\u1fc6\u1fcc\0\u1fd3\0\u1fe6\u1fea\u2000\0\u2008\u205allingdotse\xf1\u1e44y;\u4444male;\u6640\u0180ilr\u1fad\u1fb3\u1fc1lig;\u8000\ufb03\u0269\u1fb9\0\0\u1fbdg;\u8000\ufb00ig;\u8000\ufb04;\uc000\u{1d523}lig;\u8000\ufb01lig;\uc000fj\u0180alt\u1fd9\u1fdc\u1fe1t;\u666dig;\u8000\ufb02ns;\u65b1of;\u4192\u01f0\u1fee\0\u1ff3f;\uc000\u{1d557}\u0100ak\u05bf\u1ff7\u0100;v\u1ffc\u1ffd\u62d4;\u6ad9artint;\u6a0d\u0100ao\u200c\u2055\u0100cs\u2011\u2052\u03b1\u201a\u2030\u2038\u2045\u2048\0\u2050\u03b2\u2022\u2025\u2027\u202a\u202c\0\u202e\u803b\xbd\u40bd;\u6153\u803b\xbc\u40bc;\u6155;\u6159;\u615b\u01b3\u2034\0\u2036;\u6154;\u6156\u02b4\u203e\u2041\0\0\u2043\u803b\xbe\u40be;\u6157;\u615c5;\u6158\u01b6\u204c\0\u204e;\u615a;\u615d8;\u615el;\u6044wn;\u6322cr;\uc000\u{1d4bb}\u0880Eabcdefgijlnorstv\u2082\u2089\u209f\u20a5\u20b0\u20b4\u20f0\u20f5\u20fa\u20ff\u2103\u2112\u2138\u0317\u213e\u2152\u219e\u0100;l\u064d\u2087;\u6a8c\u0180cmp\u2090\u2095\u209dute;\u41f5ma\u0100;d\u209c\u1cda\u43b3;\u6a86reve;\u411f\u0100iy\u20aa\u20aerc;\u411d;\u4433ot;\u4121\u0200;lqs\u063e\u0642\u20bd\u20c9\u0180;qs\u063e\u064c\u20c4lan\xf4\u0665\u0200;cdl\u0665\u20d2\u20d5\u20e5c;\u6aa9ot\u0100;o\u20dc\u20dd\u6a80\u0100;l\u20e2\u20e3\u6a82;\u6a84\u0100;e\u20ea\u20ed\uc000\u22db\ufe00s;\u6a94r;\uc000\u{1d524}\u0100;g\u0673\u061bmel;\u6137cy;\u4453\u0200;Eaj\u065a\u210c\u210e\u2110;\u6a92;\u6aa5;\u6aa4\u0200Eaes\u211b\u211d\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6a8arox\xbb\u2124\u0100;q\u212e\u212f\u6a88\u0100;q\u212e\u211bim;\u62e7pf;\uc000\u{1d558}\u0100ci\u2143\u2146r;\u610am\u0180;el\u066b\u214e\u2150;\u6a8e;\u6a90\u8300>;cdlqr\u05ee\u2160\u216a\u216e\u2173\u2179\u0100ci\u2165\u2167;\u6aa7r;\u6a7aot;\u62d7Par;\u6995uest;\u6a7c\u0280adels\u2184\u216a\u2190\u0656\u219b\u01f0\u2189\0\u218epro\xf8\u209er;\u6978q\u0100lq\u063f\u2196les\xf3\u2088i\xed\u066b\u0100en\u21a3\u21adrtneqq;\uc000\u2269\ufe00\xc5\u21aa\u0500Aabcefkosy\u21c4\u21c7\u21f1\u21f5\u21fa\u2218\u221d\u222f\u2268\u227dr\xf2\u03a0\u0200ilmr\u21d0\u21d4\u21d7\u21dbrs\xf0\u1484f\xbb\u2024il\xf4\u06a9\u0100dr\u21e0\u21e4cy;\u444a\u0180;cw\u08f4\u21eb\u21efir;\u6948;\u61adar;\u610firc;\u4125\u0180alr\u2201\u220e\u2213rts\u0100;u\u2209\u220a\u6665it\xbb\u220alip;\u6026con;\u62b9r;\uc000\u{1d525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223a\u223e\u2243\u225e\u2263rr;\u61fftht;\u623bk\u0100lr\u2249\u2253eftarrow;\u61a9ightarrow;\u61aaf;\uc000\u{1d559}bar;\u6015\u0180clt\u226f\u2274\u2278r;\uc000\u{1d4bd}as\xe8\u21f4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xbb\u1c5b\u0ae1\u22a3\0\u22aa\0\u22b8\u22c5\u22ce\0\u22d5\u22f3\0\0\u22f8\u2322\u2367\u2362\u237f\0\u2386\u23aa\u23b4cute\u803b\xed\u40ed\u0180;iy\u0771\u22b0\u22b5rc\u803b\xee\u40ee;\u4438\u0100cx\u22bc\u22bfy;\u4435cl\u803b\xa1\u40a1\u0100fr\u039f\u22c9;\uc000\u{1d526}rave\u803b\xec\u40ec\u0200;ino\u073e\u22dd\u22e9\u22ee\u0100in\u22e2\u22e6nt;\u6a0ct;\u622dfin;\u69dcta;\u6129lig;\u4133\u0180aop\u22fe\u231a\u231d\u0180cgt\u2305\u2308\u2317r;\u412b\u0180elp\u071f\u230f\u2313in\xe5\u078ear\xf4\u0720h;\u4131f;\u62b7ed;\u41b5\u0280;cfot\u04f4\u232c\u2331\u233d\u2341are;\u6105in\u0100;t\u2338\u2339\u621eie;\u69dddo\xf4\u2319\u0280;celp\u0757\u234c\u2350\u235b\u2361al;\u62ba\u0100gr\u2355\u2359er\xf3\u1563\xe3\u234darhk;\u6a17rod;\u6a3c\u0200cgpt\u236f\u2372\u2376\u237by;\u4451on;\u412ff;\uc000\u{1d55a}a;\u43b9uest\u803b\xbf\u40bf\u0100ci\u238a\u238fr;\uc000\u{1d4be}n\u0280;Edsv\u04f4\u239b\u239d\u23a1\u04f3;\u62f9ot;\u62f5\u0100;v\u23a6\u23a7\u62f4;\u62f3\u0100;i\u0777\u23aelde;\u4129\u01eb\u23b8\0\u23bccy;\u4456l\u803b\xef\u40ef\u0300cfmosu\u23cc\u23d7\u23dc\u23e1\u23e7\u23f5\u0100iy\u23d1\u23d5rc;\u4135;\u4439r;\uc000\u{1d527}ath;\u4237pf;\uc000\u{1d55b}\u01e3\u23ec\0\u23f1r;\uc000\u{1d4bf}rcy;\u4458kcy;\u4454\u0400acfghjos\u240b\u2416\u2422\u2427\u242d\u2431\u2435\u243bppa\u0100;v\u2413\u2414\u43ba;\u43f0\u0100ey\u241b\u2420dil;\u4137;\u443ar;\uc000\u{1d528}reen;\u4138cy;\u4445cy;\u445cpf;\uc000\u{1d55c}cr;\uc000\u{1d4c0}\u0b80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248d\u2491\u250e\u253d\u255a\u2580\u264e\u265e\u2665\u2679\u267d\u269a\u26b2\u26d8\u275d\u2768\u278b\u27c0\u2801\u2812\u0180art\u2477\u247a\u247cr\xf2\u09c6\xf2\u0395ail;\u691barr;\u690e\u0100;g\u0994\u248b;\u6a8bar;\u6962\u0963\u24a5\0\u24aa\0\u24b1\0\0\0\0\0\u24b5\u24ba\0\u24c6\u24c8\u24cd\0\u24f9ute;\u413amptyv;\u69b4ra\xee\u084cbda;\u43bbg\u0180;dl\u088e\u24c1\u24c3;\u6991\xe5\u088e;\u6a85uo\u803b\xab\u40abr\u0400;bfhlpst\u0899\u24de\u24e6\u24e9\u24eb\u24ee\u24f1\u24f5\u0100;f\u089d\u24e3s;\u691fs;\u691d\xeb\u2252p;\u61abl;\u6939im;\u6973l;\u61a2\u0180;ae\u24ff\u2500\u2504\u6aabil;\u6919\u0100;s\u2509\u250a\u6aad;\uc000\u2aad\ufe00\u0180abr\u2515\u2519\u251drr;\u690crk;\u6772\u0100ak\u2522\u252cc\u0100ek\u2528\u252a;\u407b;\u405b\u0100es\u2531\u2533;\u698bl\u0100du\u2539\u253b;\u698f;\u698d\u0200aeuy\u2546\u254b\u2556\u2558ron;\u413e\u0100di\u2550\u2554il;\u413c\xec\u08b0\xe2\u2529;\u443b\u0200cqrs\u2563\u2566\u256d\u257da;\u6936uo\u0100;r\u0e19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694bh;\u61b2\u0280;fgqs\u258b\u258c\u0989\u25f3\u25ff\u6264t\u0280ahlrt\u2598\u25a4\u25b7\u25c2\u25e8rrow\u0100;t\u0899\u25a1a\xe9\u24f6arpoon\u0100du\u25af\u25b4own\xbb\u045ap\xbb\u0966eftarrows;\u61c7ight\u0180ahs\u25cd\u25d6\u25derrow\u0100;s\u08f4\u08a7arpoon\xf3\u0f98quigarro\xf7\u21f0hreetimes;\u62cb\u0180;qs\u258b\u0993\u25falan\xf4\u09ac\u0280;cdgs\u09ac\u260a\u260d\u261d\u2628c;\u6aa8ot\u0100;o\u2614\u2615\u6a7f\u0100;r\u261a\u261b\u6a81;\u6a83\u0100;e\u2622\u2625\uc000\u22da\ufe00s;\u6a93\u0280adegs\u2633\u2639\u263d\u2649\u264bppro\xf8\u24c6ot;\u62d6q\u0100gq\u2643\u2645\xf4\u0989gt\xf2\u248c\xf4\u099bi\xed\u09b2\u0180ilr\u2655\u08e1\u265asht;\u697c;\uc000\u{1d529}\u0100;E\u099c\u2663;\u6a91\u0161\u2669\u2676r\u0100du\u25b2\u266e\u0100;l\u0965\u2673;\u696alk;\u6584cy;\u4459\u0280;acht\u0a48\u2688\u268b\u2691\u2696r\xf2\u25c1orne\xf2\u1d08ard;\u696bri;\u65fa\u0100io\u269f\u26a4dot;\u4140ust\u0100;a\u26ac\u26ad\u63b0che\xbb\u26ad\u0200Eaes\u26bb\u26bd\u26c9\u26d4;\u6268p\u0100;p\u26c3\u26c4\u6a89rox\xbb\u26c4\u0100;q\u26ce\u26cf\u6a87\u0100;q\u26ce\u26bbim;\u62e6\u0400abnoptwz\u26e9\u26f4\u26f7\u271a\u272f\u2741\u2747\u2750\u0100nr\u26ee\u26f1g;\u67ecr;\u61fdr\xeb\u08c1g\u0180lmr\u26ff\u270d\u2714eft\u0100ar\u09e6\u2707ight\xe1\u09f2apsto;\u67fcight\xe1\u09fdparrow\u0100lr\u2725\u2729ef\xf4\u24edight;\u61ac\u0180afl\u2736\u2739\u273dr;\u6985;\uc000\u{1d55d}us;\u6a2dimes;\u6a34\u0161\u274b\u274fst;\u6217\xe1\u134e\u0180;ef\u2757\u2758\u1800\u65cange\xbb\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277c\u2785\u2787r\xf2\u08a8orne\xf2\u1d8car\u0100;d\u0f98\u2783;\u696d;\u600eri;\u62bf\u0300achiqt\u2798\u279d\u0a40\u27a2\u27ae\u27bbquo;\u6039r;\uc000\u{1d4c1}m\u0180;eg\u09b2\u27aa\u27ac;\u6a8d;\u6a8f\u0100bu\u252a\u27b3o\u0100;r\u0e1f\u27b9;\u601arok;\u4142\u8400<;cdhilqr\u082b\u27d2\u2639\u27dc\u27e0\u27e5\u27ea\u27f0\u0100ci\u27d7\u27d9;\u6aa6r;\u6a79re\xe5\u25f2mes;\u62c9arr;\u6976uest;\u6a7b\u0100Pi\u27f5\u27f9ar;\u6996\u0180;ef\u2800\u092d\u181b\u65c3r\u0100du\u2807\u280dshar;\u694ahar;\u6966\u0100en\u2817\u2821rtneqq;\uc000\u2268\ufe00\xc5\u281e\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288e\u2893\u28a0\u28a5\u28a8\u28da\u28e2\u28e4\u0a83\u28f3\u2902Dot;\u623a\u0200clpr\u284e\u2852\u2863\u287dr\u803b\xaf\u40af\u0100et\u2857\u2859;\u6642\u0100;e\u285e\u285f\u6720se\xbb\u285f\u0100;s\u103b\u2868to\u0200;dlu\u103b\u2873\u2877\u287bow\xee\u048cef\xf4\u090f\xf0\u13d1ker;\u65ae\u0100oy\u2887\u288cmma;\u6a29;\u443cash;\u6014asuredangle\xbb\u1626r;\uc000\u{1d52a}o;\u6127\u0180cdn\u28af\u28b4\u28c9ro\u803b\xb5\u40b5\u0200;acd\u1464\u28bd\u28c0\u28c4s\xf4\u16a7ir;\u6af0ot\u80bb\xb7\u01b5us\u0180;bd\u28d2\u1903\u28d3\u6212\u0100;u\u1d3c\u28d8;\u6a2a\u0163\u28de\u28e1p;\u6adb\xf2\u2212\xf0\u0a81\u0100dp\u28e9\u28eeels;\u62a7f;\uc000\u{1d55e}\u0100ct\u28f8\u28fdr;\uc000\u{1d4c2}pos\xbb\u159d\u0180;lm\u2909\u290a\u290d\u43bctimap;\u62b8\u0c00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297e\u2989\u2998\u29da\u29e9\u2a15\u2a1a\u2a58\u2a5d\u2a83\u2a95\u2aa4\u2aa8\u2b04\u2b07\u2b44\u2b7f\u2bae\u2c34\u2c67\u2c7c\u2ce9\u0100gt\u2947\u294b;\uc000\u22d9\u0338\u0100;v\u2950\u0bcf\uc000\u226b\u20d2\u0180elt\u295a\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61cdightarrow;\u61ce;\uc000\u22d8\u0338\u0100;v\u297b\u0c47\uc000\u226a\u20d2ightarrow;\u61cf\u0100Dd\u298e\u2993ash;\u62afash;\u62ae\u0280bcnpt\u29a3\u29a7\u29ac\u29b1\u29ccla\xbb\u02deute;\u4144g;\uc000\u2220\u20d2\u0280;Eiop\u0d84\u29bc\u29c0\u29c5\u29c8;\uc000\u2a70\u0338d;\uc000\u224b\u0338s;\u4149ro\xf8\u0d84ur\u0100;a\u29d3\u29d4\u666el\u0100;s\u29d3\u0b38\u01f3\u29df\0\u29e3p\u80bb\xa0\u0b37mp\u0100;e\u0bf9\u0c00\u0280aeouy\u29f4\u29fe\u2a03\u2a10\u2a13\u01f0\u29f9\0\u29fb;\u6a43on;\u4148dil;\u4146ng\u0100;d\u0d7e\u2a0aot;\uc000\u2a6d\u0338p;\u6a42;\u443dash;\u6013\u0380;Aadqsx\u0b92\u2a29\u2a2d\u2a3b\u2a41\u2a45\u2a50rr;\u61d7r\u0100hr\u2a33\u2a36k;\u6924\u0100;o\u13f2\u13f0ot;\uc000\u2250\u0338ui\xf6\u0b63\u0100ei\u2a4a\u2a4ear;\u6928\xed\u0b98ist\u0100;s\u0ba0\u0b9fr;\uc000\u{1d52b}\u0200Eest\u0bc5\u2a66\u2a79\u2a7c\u0180;qs\u0bbc\u2a6d\u0be1\u0180;qs\u0bbc\u0bc5\u2a74lan\xf4\u0be2i\xed\u0bea\u0100;r\u0bb6\u2a81\xbb\u0bb7\u0180Aap\u2a8a\u2a8d\u2a91r\xf2\u2971rr;\u61aear;\u6af2\u0180;sv\u0f8d\u2a9c\u0f8c\u0100;d\u2aa1\u2aa2\u62fc;\u62facy;\u445a\u0380AEadest\u2ab7\u2aba\u2abe\u2ac2\u2ac5\u2af6\u2af9r\xf2\u2966;\uc000\u2266\u0338rr;\u619ar;\u6025\u0200;fqs\u0c3b\u2ace\u2ae3\u2aeft\u0100ar\u2ad4\u2ad9rro\xf7\u2ac1ightarro\xf7\u2a90\u0180;qs\u0c3b\u2aba\u2aealan\xf4\u0c55\u0100;s\u0c55\u2af4\xbb\u0c36i\xed\u0c5d\u0100;r\u0c35\u2afei\u0100;e\u0c1a\u0c25i\xe4\u0d90\u0100pt\u2b0c\u2b11f;\uc000\u{1d55f}\u8180\xac;in\u2b19\u2b1a\u2b36\u40acn\u0200;Edv\u0b89\u2b24\u2b28\u2b2e;\uc000\u22f9\u0338ot;\uc000\u22f5\u0338\u01e1\u0b89\u2b33\u2b35;\u62f7;\u62f6i\u0100;v\u0cb8\u2b3c\u01e1\u0cb8\u2b41\u2b43;\u62fe;\u62fd\u0180aor\u2b4b\u2b63\u2b69r\u0200;ast\u0b7b\u2b55\u2b5a\u2b5flle\xec\u0b7bl;\uc000\u2afd\u20e5;\uc000\u2202\u0338lint;\u6a14\u0180;ce\u0c92\u2b70\u2b73u\xe5\u0ca5\u0100;c\u0c98\u2b78\u0100;e\u0c92\u2b7d\xf1\u0c98\u0200Aait\u2b88\u2b8b\u2b9d\u2ba7r\xf2\u2988rr\u0180;cw\u2b94\u2b95\u2b99\u619b;\uc000\u2933\u0338;\uc000\u219d\u0338ghtarrow\xbb\u2b95ri\u0100;e\u0ccb\u0cd6\u0380chimpqu\u2bbd\u2bcd\u2bd9\u2b04\u0b78\u2be4\u2bef\u0200;cer\u0d32\u2bc6\u0d37\u2bc9u\xe5\u0d45;\uc000\u{1d4c3}ort\u026d\u2b05\0\0\u2bd6ar\xe1\u2b56m\u0100;e\u0d6e\u2bdf\u0100;q\u0d74\u0d73su\u0100bp\u2beb\u2bed\xe5\u0cf8\xe5\u0d0b\u0180bcp\u2bf6\u2c11\u2c19\u0200;Ees\u2bff\u2c00\u0d22\u2c04\u6284;\uc000\u2ac5\u0338et\u0100;e\u0d1b\u2c0bq\u0100;q\u0d23\u2c00c\u0100;e\u0d32\u2c17\xf1\u0d38\u0200;Ees\u2c22\u2c23\u0d5f\u2c27\u6285;\uc000\u2ac6\u0338et\u0100;e\u0d58\u2c2eq\u0100;q\u0d60\u2c23\u0200gilr\u2c3d\u2c3f\u2c45\u2c47\xec\u0bd7lde\u803b\xf1\u40f1\xe7\u0c43iangle\u0100lr\u2c52\u2c5ceft\u0100;e\u0c1a\u2c5a\xf1\u0c26ight\u0100;e\u0ccb\u2c65\xf1\u0cd7\u0100;m\u2c6c\u2c6d\u43bd\u0180;es\u2c74\u2c75\u2c79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2c8f\u2c94\u2c99\u2c9e\u2ca3\u2cb0\u2cb6\u2cd3\u2ce3ash;\u62adarr;\u6904p;\uc000\u224d\u20d2ash;\u62ac\u0100et\u2ca8\u2cac;\uc000\u2265\u20d2;\uc000>\u20d2nfin;\u69de\u0180Aet\u2cbd\u2cc1\u2cc5rr;\u6902;\uc000\u2264\u20d2\u0100;r\u2cca\u2ccd\uc000<\u20d2ie;\uc000\u22b4\u20d2\u0100At\u2cd8\u2cdcrr;\u6903rie;\uc000\u22b5\u20d2im;\uc000\u223c\u20d2\u0180Aan\u2cf0\u2cf4\u2d02rr;\u61d6r\u0100hr\u2cfa\u2cfdk;\u6923\u0100;o\u13e7\u13e5ear;\u6927\u1253\u1a95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2d2d\0\u2d38\u2d48\u2d60\u2d65\u2d72\u2d84\u1b07\0\0\u2d8d\u2dab\0\u2dc8\u2dce\0\u2ddc\u2e19\u2e2b\u2e3e\u2e43\u0100cs\u2d31\u1a97ute\u803b\xf3\u40f3\u0100iy\u2d3c\u2d45r\u0100;c\u1a9e\u2d42\u803b\xf4\u40f4;\u443e\u0280abios\u1aa0\u2d52\u2d57\u01c8\u2d5alac;\u4151v;\u6a38old;\u69bclig;\u4153\u0100cr\u2d69\u2d6dir;\u69bf;\uc000\u{1d52c}\u036f\u2d79\0\0\u2d7c\0\u2d82n;\u42dbave\u803b\xf2\u40f2;\u69c1\u0100bm\u2d88\u0df4ar;\u69b5\u0200acit\u2d95\u2d98\u2da5\u2da8r\xf2\u1a80\u0100ir\u2d9d\u2da0r;\u69beoss;\u69bbn\xe5\u0e52;\u69c0\u0180aei\u2db1\u2db5\u2db9cr;\u414dga;\u43c9\u0180cdn\u2dc0\u2dc5\u01cdron;\u43bf;\u69b6pf;\uc000\u{1d560}\u0180ael\u2dd4\u2dd7\u01d2r;\u69b7rp;\u69b9\u0380;adiosv\u2dea\u2deb\u2dee\u2e08\u2e0d\u2e10\u2e16\u6228r\xf2\u1a86\u0200;efm\u2df7\u2df8\u2e02\u2e05\u6a5dr\u0100;o\u2dfe\u2dff\u6134f\xbb\u2dff\u803b\xaa\u40aa\u803b\xba\u40bagof;\u62b6r;\u6a56lope;\u6a57;\u6a5b\u0180clo\u2e1f\u2e21\u2e27\xf2\u2e01ash\u803b\xf8\u40f8l;\u6298i\u016c\u2e2f\u2e34de\u803b\xf5\u40f5es\u0100;a\u01db\u2e3as;\u6a36ml\u803b\xf6\u40f6bar;\u633d\u0ae1\u2e5e\0\u2e7d\0\u2e80\u2e9d\0\u2ea2\u2eb9\0\0\u2ecb\u0e9c\0\u2f13\0\0\u2f2b\u2fbc\0\u2fc8r\u0200;ast\u0403\u2e67\u2e72\u0e85\u8100\xb6;l\u2e6d\u2e6e\u40b6le\xec\u0403\u0269\u2e78\0\0\u2e7bm;\u6af3;\u6afdy;\u443fr\u0280cimpt\u2e8b\u2e8f\u2e93\u1865\u2e97nt;\u4025od;\u402eil;\u6030enk;\u6031r;\uc000\u{1d52d}\u0180imo\u2ea8\u2eb0\u2eb4\u0100;v\u2ead\u2eae\u43c6;\u43d5ma\xf4\u0a76ne;\u660e\u0180;tv\u2ebf\u2ec0\u2ec8\u43c0chfork\xbb\u1ffd;\u43d6\u0100au\u2ecf\u2edfn\u0100ck\u2ed5\u2eddk\u0100;h\u21f4\u2edb;\u610e\xf6\u21f4s\u0480;abcdemst\u2ef3\u2ef4\u1908\u2ef9\u2efd\u2f04\u2f06\u2f0a\u2f0e\u402bcir;\u6a23ir;\u6a22\u0100ou\u1d40\u2f02;\u6a25;\u6a72n\u80bb\xb1\u0e9dim;\u6a26wo;\u6a27\u0180ipu\u2f19\u2f20\u2f25ntint;\u6a15f;\uc000\u{1d561}nd\u803b\xa3\u40a3\u0500;Eaceinosu\u0ec8\u2f3f\u2f41\u2f44\u2f47\u2f81\u2f89\u2f92\u2f7e\u2fb6;\u6ab3p;\u6ab7u\xe5\u0ed9\u0100;c\u0ece\u2f4c\u0300;acens\u0ec8\u2f59\u2f5f\u2f66\u2f68\u2f7eppro\xf8\u2f43urlye\xf1\u0ed9\xf1\u0ece\u0180aes\u2f6f\u2f76\u2f7approx;\u6ab9qq;\u6ab5im;\u62e8i\xed\u0edfme\u0100;s\u2f88\u0eae\u6032\u0180Eas\u2f78\u2f90\u2f7a\xf0\u2f75\u0180dfp\u0eec\u2f99\u2faf\u0180als\u2fa0\u2fa5\u2faalar;\u632eine;\u6312urf;\u6313\u0100;t\u0efb\u2fb4\xef\u0efbrel;\u62b0\u0100ci\u2fc0\u2fc5r;\uc000\u{1d4c5};\u43c8ncsp;\u6008\u0300fiopsu\u2fda\u22e2\u2fdf\u2fe5\u2feb\u2ff1r;\uc000\u{1d52e}pf;\uc000\u{1d562}rime;\u6057cr;\uc000\u{1d4c6}\u0180aeo\u2ff8\u3009\u3013t\u0100ei\u2ffe\u3005rnion\xf3\u06b0nt;\u6a16st\u0100;e\u3010\u3011\u403f\xf1\u1f19\xf4\u0f14\u0a80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30e0\u310e\u312b\u3147\u3162\u3172\u318e\u3206\u3215\u3224\u3229\u3258\u326e\u3272\u3290\u32b0\u32b7\u0180art\u3047\u304a\u304cr\xf2\u10b3\xf2\u03ddail;\u691car\xf2\u1c65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307f\u308f\u3094\u30cc\u0100eu\u306d\u3071;\uc000\u223d\u0331te;\u4155i\xe3\u116emptyv;\u69b3g\u0200;del\u0fd1\u3089\u308b\u308d;\u6992;\u69a5\xe5\u0fd1uo\u803b\xbb\u40bbr\u0580;abcfhlpstw\u0fdc\u30ac\u30af\u30b7\u30b9\u30bc\u30be\u30c0\u30c3\u30c7\u30cap;\u6975\u0100;f\u0fe0\u30b4s;\u6920;\u6933s;\u691e\xeb\u225d\xf0\u272el;\u6945im;\u6974l;\u61a3;\u619d\u0100ai\u30d1\u30d5il;\u691ao\u0100;n\u30db\u30dc\u6236al\xf3\u0f1e\u0180abr\u30e7\u30ea\u30eer\xf2\u17e5rk;\u6773\u0100ak\u30f3\u30fdc\u0100ek\u30f9\u30fb;\u407d;\u405d\u0100es\u3102\u3104;\u698cl\u0100du\u310a\u310c;\u698e;\u6990\u0200aeuy\u3117\u311c\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xec\u0ff2\xe2\u30fa;\u4440\u0200clqs\u3134\u3137\u313d\u3144a;\u6937dhar;\u6969uo\u0100;r\u020e\u020dh;\u61b3\u0180acg\u314e\u315f\u0f44l\u0200;ips\u0f78\u3158\u315b\u109cn\xe5\u10bbar\xf4\u0fa9t;\u65ad\u0180ilr\u3169\u1023\u316esht;\u697d;\uc000\u{1d52f}\u0100ao\u3177\u3186r\u0100du\u317d\u317f\xbb\u047b\u0100;l\u1091\u3184;\u696c\u0100;v\u318b\u318c\u43c1;\u43f1\u0180gns\u3195\u31f9\u31fcht\u0300ahlrst\u31a4\u31b0\u31c2\u31d8\u31e4\u31eerrow\u0100;t\u0fdc\u31ada\xe9\u30c8arpoon\u0100du\u31bb\u31bfow\xee\u317ep\xbb\u1092eft\u0100ah\u31ca\u31d0rrow\xf3\u0feaarpoon\xf3\u0551ightarrows;\u61c9quigarro\xf7\u30cbhreetimes;\u62ccg;\u42daingdotse\xf1\u1f32\u0180ahm\u320d\u3210\u3213r\xf2\u0feaa\xf2\u0551;\u600foust\u0100;a\u321e\u321f\u63b1che\xbb\u321fmid;\u6aee\u0200abpt\u3232\u323d\u3240\u3252\u0100nr\u3237\u323ag;\u67edr;\u61fer\xeb\u1003\u0180afl\u3247\u324a\u324er;\u6986;\uc000\u{1d563}us;\u6a2eimes;\u6a35\u0100ap\u325d\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6a12ar\xf2\u31e3\u0200achq\u327b\u3280\u10bc\u3285quo;\u603ar;\uc000\u{1d4c7}\u0100bu\u30fb\u328ao\u0100;r\u0214\u0213\u0180hir\u3297\u329b\u32a0re\xe5\u31f8mes;\u62cai\u0200;efl\u32aa\u1059\u1821\u32ab\u65b9tri;\u69celuhar;\u6968;\u611e\u0d61\u32d5\u32db\u32df\u332c\u3338\u3371\0\u337a\u33a4\0\0\u33ec\u33f0\0\u3428\u3448\u345a\u34ad\u34b1\u34ca\u34f1\0\u3616\0\0\u3633cute;\u415bqu\xef\u27ba\u0500;Eaceinpsy\u11ed\u32f3\u32f5\u32ff\u3302\u330b\u330f\u331f\u3326\u3329;\u6ab4\u01f0\u32fa\0\u32fc;\u6ab8on;\u4161u\xe5\u11fe\u0100;d\u11f3\u3307il;\u415frc;\u415d\u0180Eas\u3316\u3318\u331b;\u6ab6p;\u6abaim;\u62e9olint;\u6a13i\xed\u1204;\u4441ot\u0180;be\u3334\u1d47\u3335\u62c5;\u6a66\u0380Aacmstx\u3346\u334a\u3357\u335b\u335e\u3363\u336drr;\u61d8r\u0100hr\u3350\u3352\xeb\u2228\u0100;o\u0a36\u0a34t\u803b\xa7\u40a7i;\u403bwar;\u6929m\u0100in\u3369\xf0nu\xf3\xf1t;\u6736r\u0100;o\u3376\u2055\uc000\u{1d530}\u0200acoy\u3382\u3386\u3391\u33a0rp;\u666f\u0100hy\u338b\u338fcy;\u4449;\u4448rt\u026d\u3399\0\0\u339ci\xe4\u1464ara\xec\u2e6f\u803b\xad\u40ad\u0100gm\u33a8\u33b4ma\u0180;fv\u33b1\u33b2\u33b2\u43c3;\u43c2\u0400;deglnpr\u12ab\u33c5\u33c9\u33ce\u33d6\u33de\u33e1\u33e6ot;\u6a6a\u0100;q\u12b1\u12b0\u0100;E\u33d3\u33d4\u6a9e;\u6aa0\u0100;E\u33db\u33dc\u6a9d;\u6a9fe;\u6246lus;\u6a24arr;\u6972ar\xf2\u113d\u0200aeit\u33f8\u3408\u340f\u3417\u0100ls\u33fd\u3404lsetm\xe9\u336ahp;\u6a33parsl;\u69e4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341c\u341d\u6aaa\u0100;s\u3422\u3423\u6aac;\uc000\u2aac\ufe00\u0180flp\u342e\u3433\u3442tcy;\u444c\u0100;b\u3438\u3439\u402f\u0100;a\u343e\u343f\u69c4r;\u633ff;\uc000\u{1d564}a\u0100dr\u344d\u0402es\u0100;u\u3454\u3455\u6660it\xbb\u3455\u0180csu\u3460\u3479\u349f\u0100au\u3465\u346fp\u0100;s\u1188\u346b;\uc000\u2293\ufe00p\u0100;s\u11b4\u3475;\uc000\u2294\ufe00u\u0100bp\u347f\u348f\u0180;es\u1197\u119c\u3486et\u0100;e\u1197\u348d\xf1\u119d\u0180;es\u11a8\u11ad\u3496et\u0100;e\u11a8\u349d\xf1\u11ae\u0180;af\u117b\u34a6\u05b0r\u0165\u34ab\u05b1\xbb\u117car\xf2\u1148\u0200cemt\u34b9\u34be\u34c2\u34c5r;\uc000\u{1d4c8}tm\xee\xf1i\xec\u3415ar\xe6\u11be\u0100ar\u34ce\u34d5r\u0100;f\u34d4\u17bf\u6606\u0100an\u34da\u34edight\u0100ep\u34e3\u34eapsilo\xee\u1ee0h\xe9\u2eafs\xbb\u2852\u0280bcmnp\u34fb\u355e\u1209\u358b\u358e\u0480;Edemnprs\u350e\u350f\u3511\u3515\u351e\u3523\u352c\u3531\u3536\u6282;\u6ac5ot;\u6abd\u0100;d\u11da\u351aot;\u6ac3ult;\u6ac1\u0100Ee\u3528\u352a;\u6acb;\u628alus;\u6abfarr;\u6979\u0180eiu\u353d\u3552\u3555t\u0180;en\u350e\u3545\u354bq\u0100;q\u11da\u350feq\u0100;q\u352b\u3528m;\u6ac7\u0100bp\u355a\u355c;\u6ad5;\u6ad3c\u0300;acens\u11ed\u356c\u3572\u3579\u357b\u3326ppro\xf8\u32faurlye\xf1\u11fe\xf1\u11f3\u0180aes\u3582\u3588\u331bppro\xf8\u331aq\xf1\u3317g;\u666a\u0680123;Edehlmnps\u35a9\u35ac\u35af\u121c\u35b2\u35b4\u35c0\u35c9\u35d5\u35da\u35df\u35e8\u35ed\u803b\xb9\u40b9\u803b\xb2\u40b2\u803b\xb3\u40b3;\u6ac6\u0100os\u35b9\u35bct;\u6abeub;\u6ad8\u0100;d\u1222\u35c5ot;\u6ac4s\u0100ou\u35cf\u35d2l;\u67c9b;\u6ad7arr;\u697bult;\u6ac2\u0100Ee\u35e4\u35e6;\u6acc;\u628blus;\u6ac0\u0180eiu\u35f4\u3609\u360ct\u0180;en\u121c\u35fc\u3602q\u0100;q\u1222\u35b2eq\u0100;q\u35e7\u35e4m;\u6ac8\u0100bp\u3611\u3613;\u6ad4;\u6ad6\u0180Aan\u361c\u3620\u362drr;\u61d9r\u0100hr\u3626\u3628\xeb\u222e\u0100;o\u0a2b\u0a29war;\u692alig\u803b\xdf\u40df\u0be1\u3651\u365d\u3660\u12ce\u3673\u3679\0\u367e\u36c2\0\0\0\0\0\u36db\u3703\0\u3709\u376c\0\0\0\u3787\u0272\u3656\0\0\u365bget;\u6316;\u43c4r\xeb\u0e5f\u0180aey\u3666\u366b\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uc000\u{1d531}\u0200eiko\u3686\u369d\u36b5\u36bc\u01f2\u368b\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369b\u43b8ym;\u43d1\u0100cn\u36a2\u36b2k\u0100as\u36a8\u36aeppro\xf8\u12c1im\xbb\u12acs\xf0\u129e\u0100as\u36ba\u36ae\xf0\u12c1rn\u803b\xfe\u40fe\u01ec\u031f\u36c6\u22e7es\u8180\xd7;bd\u36cf\u36d0\u36d8\u40d7\u0100;a\u190f\u36d5r;\u6a31;\u6a30\u0180eps\u36e1\u36e3\u3700\xe1\u2a4d\u0200;bcf\u0486\u36ec\u36f0\u36f4ot;\u6336ir;\u6af1\u0100;o\u36f9\u36fc\uc000\u{1d565}rk;\u6ada\xe1\u3362rime;\u6034\u0180aip\u370f\u3712\u3764d\xe5\u1248\u0380adempst\u3721\u374d\u3740\u3751\u3757\u375c\u375fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65b5own\xbb\u1dbbeft\u0100;e\u2800\u373e\xf1\u092e;\u625cight\u0100;e\u32aa\u374b\xf1\u105aot;\u65ecinus;\u6a3alus;\u6a39b;\u69cdime;\u6a3bezium;\u63e2\u0180cht\u3772\u377d\u3781\u0100ry\u3777\u377b;\uc000\u{1d4c9};\u4446cy;\u445brok;\u4167\u0100io\u378b\u378ex\xf4\u1777head\u0100lr\u3797\u37a0eftarro\xf7\u084fightarrow\xbb\u0f5d\u0900AHabcdfghlmoprstuw\u37d0\u37d3\u37d7\u37e4\u37f0\u37fc\u380e\u381c\u3823\u3834\u3851\u385d\u386b\u38a9\u38cc\u38d2\u38ea\u38f6r\xf2\u03edar;\u6963\u0100cr\u37dc\u37e2ute\u803b\xfa\u40fa\xf2\u1150r\u01e3\u37ea\0\u37edy;\u445eve;\u416d\u0100iy\u37f5\u37farc\u803b\xfb\u40fb;\u4443\u0180abh\u3803\u3806\u380br\xf2\u13adlac;\u4171a\xf2\u13c3\u0100ir\u3813\u3818sht;\u697e;\uc000\u{1d532}rave\u803b\xf9\u40f9\u0161\u3827\u3831r\u0100lr\u382c\u382e\xbb\u0957\xbb\u1083lk;\u6580\u0100ct\u3839\u384d\u026f\u383f\0\0\u384arn\u0100;e\u3845\u3846\u631cr\xbb\u3846op;\u630fri;\u65f8\u0100al\u3856\u385acr;\u416b\u80bb\xa8\u0349\u0100gp\u3862\u3866on;\u4173f;\uc000\u{1d566}\u0300adhlsu\u114b\u3878\u387d\u1372\u3891\u38a0own\xe1\u13b3arpoon\u0100lr\u3888\u388cef\xf4\u382digh\xf4\u382fi\u0180;hl\u3899\u389a\u389c\u43c5\xbb\u13faon\xbb\u389aparrows;\u61c8\u0180cit\u38b0\u38c4\u38c8\u026f\u38b6\0\0\u38c1rn\u0100;e\u38bc\u38bd\u631dr\xbb\u38bdop;\u630eng;\u416fri;\u65f9cr;\uc000\u{1d4ca}\u0180dir\u38d9\u38dd\u38e2ot;\u62f0lde;\u4169i\u0100;f\u3730\u38e8\xbb\u1813\u0100am\u38ef\u38f2r\xf2\u38a8l\u803b\xfc\u40fcangle;\u69a7\u0780ABDacdeflnoprsz\u391c\u391f\u3929\u392d\u39b5\u39b8\u39bd\u39df\u39e4\u39e8\u39f3\u39f9\u39fd\u3a01\u3a20r\xf2\u03f7ar\u0100;v\u3926\u3927\u6ae8;\u6ae9as\xe8\u03e1\u0100nr\u3932\u3937grt;\u699c\u0380eknprst\u34e3\u3946\u394b\u3952\u395d\u3964\u3996app\xe1\u2415othin\xe7\u1e96\u0180hir\u34eb\u2ec8\u3959op\xf4\u2fb5\u0100;h\u13b7\u3962\xef\u318d\u0100iu\u3969\u396dgm\xe1\u33b3\u0100bp\u3972\u3984setneq\u0100;q\u397d\u3980\uc000\u228a\ufe00;\uc000\u2acb\ufe00setneq\u0100;q\u398f\u3992\uc000\u228b\ufe00;\uc000\u2acc\ufe00\u0100hr\u399b\u399fet\xe1\u369ciangle\u0100lr\u39aa\u39afeft\xbb\u0925ight\xbb\u1051y;\u4432ash\xbb\u1036\u0180elr\u39c4\u39d2\u39d7\u0180;be\u2dea\u39cb\u39cfar;\u62bbq;\u625alip;\u62ee\u0100bt\u39dc\u1468a\xf2\u1469r;\uc000\u{1d533}tr\xe9\u39aesu\u0100bp\u39ef\u39f1\xbb\u0d1c\xbb\u0d59pf;\uc000\u{1d567}ro\xf0\u0efbtr\xe9\u39b4\u0100cu\u3a06\u3a0br;\uc000\u{1d4cb}\u0100bp\u3a10\u3a18n\u0100Ee\u3980\u3a16\xbb\u397en\u0100Ee\u3992\u3a1e\xbb\u3990igzag;\u699a\u0380cefoprs\u3a36\u3a3b\u3a56\u3a5b\u3a54\u3a61\u3a6airc;\u4175\u0100di\u3a40\u3a51\u0100bg\u3a45\u3a49ar;\u6a5fe\u0100;q\u15fa\u3a4f;\u6259erp;\u6118r;\uc000\u{1d534}pf;\uc000\u{1d568}\u0100;e\u1479\u3a66at\xe8\u1479cr;\uc000\u{1d4cc}\u0ae3\u178e\u3a87\0\u3a8b\0\u3a90\u3a9b\0\0\u3a9d\u3aa8\u3aab\u3aaf\0\0\u3ac3\u3ace\0\u3ad8\u17dc\u17dftr\xe9\u17d1r;\uc000\u{1d535}\u0100Aa\u3a94\u3a97r\xf2\u03c3r\xf2\u09f6;\u43be\u0100Aa\u3aa1\u3aa4r\xf2\u03b8r\xf2\u09eba\xf0\u2713is;\u62fb\u0180dpt\u17a4\u3ab5\u3abe\u0100fl\u3aba\u17a9;\uc000\u{1d569}im\xe5\u17b2\u0100Aa\u3ac7\u3acar\xf2\u03cer\xf2\u0a01\u0100cq\u3ad2\u17b8r;\uc000\u{1d4cd}\u0100pt\u17d6\u3adcr\xe9\u17d4\u0400acefiosu\u3af0\u3afd\u3b08\u3b0c\u3b11\u3b15\u3b1b\u3b21c\u0100uy\u3af6\u3afbte\u803b\xfd\u40fd;\u444f\u0100iy\u3b02\u3b06rc;\u4177;\u444bn\u803b\xa5\u40a5r;\uc000\u{1d536}cy;\u4457pf;\uc000\u{1d56a}cr;\uc000\u{1d4ce}\u0100cm\u3b26\u3b29y;\u444el\u803b\xff\u40ff\u0500acdefhiosw\u3b42\u3b48\u3b54\u3b58\u3b64\u3b69\u3b6d\u3b74\u3b7a\u3b80cute;\u417a\u0100ay\u3b4d\u3b52ron;\u417e;\u4437ot;\u417c\u0100et\u3b5d\u3b61tr\xe6\u155fa;\u43b6r;\uc000\u{1d537}cy;\u4436grarr;\u61ddpf;\uc000\u{1d56b}cr;\uc000\u{1d4cf}\u0100jn\u3b85\u3b87;\u600dj;\u600c'.split("").map(function(e){return e.charCodeAt(0)}))},2517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array("\u0200aglq\t\x15\x18\x1b\u026d\x0f\0\0\x12p;\u4026os;\u4027t;\u403et;\u403cuot;\u4022".split("").map(function(e){return e.charCodeAt(0)}))},5504:(e,t)=>{"use strict";function n(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Map(n([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(n([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(n([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(n([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]))},2730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var r,i,o=n(9878),s=n(1818),a=n(5987);function l(e,t){if(void 0===t&&(t=r.XML),("number"==typeof t?t:t.level)===r.HTML){var n="object"==typeof t?t.mode:void 0;return(0,o.decodeHTML)(e,n)}return(0,o.decodeXML)(e)}!function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(r=t.EntityLevel||(t.EntityLevel={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(i=t.EncodingMode||(t.EncodingMode={})),t.decode=l,t.decodeStrict=function(e,t){var n;void 0===t&&(t=r.XML);var i="number"==typeof t?{level:t}:t;return null!==(n=i.mode)&&void 0!==n||(i.mode=o.DecodingMode.Strict),l(e,i)},t.encode=function(e,t){void 0===t&&(t=r.XML);var n="number"==typeof t?{level:t}:t;return n.mode===i.UTF8?(0,a.escapeUTF8)(e):n.mode===i.Attribute?(0,a.escapeAttribute)(e):n.mode===i.Text?(0,a.escapeText)(e):n.level===r.HTML?n.mode===i.ASCII?(0,s.encodeNonAsciiHTML)(e):(0,s.encodeHTML)(e):(0,a.encodeXML)(e)};var c=n(5987);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var u=n(1818);Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return u.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return u.encodeHTML}});var d=n(9878);Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})},7007:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,s,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=f(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1724:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var s=o(n(7918)),a=n(9878),l=new Set(["input","option","optgroup","select","button","datalist","textarea"]),c=new Set(["p"]),u=new Set(["thead","tbody"]),d=new Set(["dd","dt"]),h=new Set(["rt","rp"]),p=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",c],["h1",c],["h2",c],["h3",c],["h4",c],["h5",c],["h6",c],["select",l],["input",l],["output",l],["button",l],["datalist",l],["textarea",l],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",d],["dt",d],["address",c],["article",c],["aside",c],["blockquote",c],["details",c],["div",c],["dl",c],["fieldset",c],["figcaption",c],["figure",c],["footer",c],["form",c],["header",c],["hr",c],["main",c],["nav",c],["ol",c],["pre",c],["section",c],["table",c],["ul",c],["rt",h],["rp",h],["tbody",u],["tfoot",u]]),f=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),m=new Set(["math","svg"]),g=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),v=/\s|\//,y=function(){function e(e,t){var n,r,i,o,a,l;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=null!==(n=t.lowerCaseTags)&&void 0!==n?n:this.htmlMode,this.lowerCaseAttributeNames=null!==(r=t.lowerCaseAttributeNames)&&void 0!==r?r:this.htmlMode,this.recognizeSelfClosing=null!==(i=t.recognizeSelfClosing)&&void 0!==i?i:!this.htmlMode,this.tokenizer=new(null!==(o=t.Tokenizer)&&void 0!==o?o:s.default)(this.options,this),this.foreignContext=[!this.htmlMode],null===(l=(a=this.cbs).onparserinit)||void 0===l||l.call(a,this)}return e.prototype.ontext=function(e,t){var n,r,i=this.getSlice(e,t);this.endIndex=t-1,null===(r=(n=this.cbs).ontext)||void 0===r||r.call(n,i),this.startIndex=t},e.prototype.ontextentity=function(e,t){var n,r;this.endIndex=t-1,null===(r=(n=this.cbs).ontext)||void 0===r||r.call(n,(0,a.fromCodePoint)(e)),this.startIndex=t},e.prototype.isVoidElement=function(e){return this.htmlMode&&f.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);this.lowerCaseTagNames&&(n=n.toLowerCase()),this.emitOpenTag(n)},e.prototype.emitOpenTag=function(e){var t,n,r,i;this.openTagStart=this.startIndex,this.tagname=e;var o=this.htmlMode&&p.get(e);if(o)for(;this.stack.length>0&&o.has(this.stack[0]);){var s=this.stack.shift();null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,s,!0)}this.isVoidElement(e)||(this.stack.unshift(e),this.htmlMode&&(m.has(e)?this.foreignContext.unshift(!0):g.has(e)&&this.foreignContext.unshift(!1))),null===(i=(r=this.cbs).onopentagname)||void 0===i||i.call(r,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,n;this.startIndex=this.openTagStart,this.attribs&&(null===(n=(t=this.cbs).onopentag)||void 0===n||n.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var n,r,i,o,s,a,l,c;this.endIndex=t;var u=this.getSlice(e,t);if(this.lowerCaseTagNames&&(u=u.toLowerCase()),this.htmlMode&&(m.has(u)||g.has(u))&&this.foreignContext.shift(),this.isVoidElement(u))this.htmlMode&&"br"===u&&(null===(o=(i=this.cbs).onopentagname)||void 0===o||o.call(i,"br"),null===(a=(s=this.cbs).onopentag)||void 0===a||a.call(s,"br",{},!0),null===(c=(l=this.cbs).onclosetag)||void 0===c||c.call(l,"br",!1));else{var d=this.stack.indexOf(u);if(-1!==d)for(var h=0;h<=d;h++){var p=this.stack.shift();null===(r=(n=this.cbs).onclosetag)||void 0===r||r.call(n,p,h!==d)}else this.htmlMode&&"p"===u&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,n,r=this.tagname;this.endOpenTag(e),this.stack[0]===r&&(null===(n=(t=this.cbs).onclosetag)||void 0===n||n.call(t,r,!e),this.stack.shift())},e.prototype.onattribname=function(e,t){this.startIndex=e;var n=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?n.toLowerCase():n},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,a.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var n,r;this.endIndex=t,null===(r=(n=this.cbs).onattribute)||void 0===r||r.call(n,this.attribname,this.attribvalue,e===s.QuoteType.Double?'"':e===s.QuoteType.Single?"'":e===s.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(v),n=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(n=n.toLowerCase()),n},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(n))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var n=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(n);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(n))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,n){var r,i,o,s;this.endIndex=t,null===(i=(r=this.cbs).oncomment)||void 0===i||i.call(r,this.getSlice(e,t-n)),null===(s=(o=this.cbs).oncommentend)||void 0===s||s.call(o),this.startIndex=t+1},e.prototype.oncdata=function(e,t,n){var r,i,o,s,a,l,c,u,d,h;this.endIndex=t;var p=this.getSlice(e,t-n);!this.htmlMode||this.options.recognizeCDATA?(null===(i=(r=this.cbs).oncdatastart)||void 0===i||i.call(r),null===(s=(o=this.cbs).ontext)||void 0===s||s.call(o,p),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(u=(c=this.cbs).oncomment)||void 0===u||u.call(c,"[CDATA[".concat(p,"]]")),null===(h=(d=this.cbs).oncommentend)||void 0===h||h.call(d)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var n=0;n<this.stack.length;n++)this.cbs.onclosetag(this.stack[n],!0)}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,n,r;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(r=(n=this.cbs).onparserinit)||void 0===r||r.call(n,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var n=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),n+=this.buffers[0].slice(0,t-this.bufferOffset);return n},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,n;this.ended?null===(n=(t=this.cbs).onerror)||void 0===n||n.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=y},7918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var r,i,o,s=n(9878);function a(e){return e===r.Space||e===r.NewLine||e===r.Tab||e===r.FormFeed||e===r.CarriageReturn}function l(e){return e===r.Slash||e===r.Gt||a(e)}!function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(r||(r={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"}(i||(i={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(o||(t.QuoteType=o={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])},u=function(){function e(e,t){var n=e.xmlMode,r=void 0!==n&&n,o=e.decodeEntities,a=void 0===o||o,l=this;this.cbs=t,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=r,this.decodeEntities=a,this.entityDecoder=new s.EntityDecoder(r?s.xmlDecodeTree:s.htmlDecodeTree,function(e,t){return l.emitCodePoint(e,t)})}return e.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.stateText=function(e){e===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===r.Amp&&this.startEntity()},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?l(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===r.Gt||a(e)){var t=this.index-this.currentSequence.length;if(this.sectionStart<t){var n=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=n}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===c.TitleEnd?this.decodeEntities&&e===r.Amp&&this.startEntity():this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===r.Lt)},e.prototype.stateCDATASequence=function(e){e===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!l(e):function(e){return e>=r.LowerA&&e<=r.LowerZ||e>=r.UpperA&&e<=r.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=i.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===r.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===r.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode?this.state=i.InTagName:t===c.ScriptEnd[2]?this.state=i.BeforeSpecialS:t===c.TitleEnd[2]?this.state=i.BeforeSpecialT:this.state=i.InTagName}else e===r.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){l(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){a(e)||(e===r.Gt?this.state=i.Text:(this.state=this.isTagStartChar(e)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===r.Gt||a(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.sectionStart=this.index+1):e===r.Slash?this.state=i.InSelfClosingTag:a(e)||(this.state=i.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(e)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===r.Eq||l(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=i.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===r.Eq?this.state=i.BeforeAttributeValue:e===r.Slash||e===r.Gt?(this.cbs.onattribend(o.NoValue,this.sectionStart),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e)):a(e)||(this.cbs.onattribend(o.NoValue,this.sectionStart),this.state=i.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===r.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):e===r.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):a(e)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===r.DoubleQuote?o.Double:o.Single,this.index+1),this.state=i.BeforeAttributeName):this.decodeEntities&&e===r.Amp&&this.startEntity()},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,r.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,r.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){a(e)||e===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(o.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===r.Amp&&this.startEntity()},e.prototype.stateBeforeDeclaration=function(e){e===r.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=e===r.Dash?i.BeforeComment:i.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===r.Dash?(this.state=i.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):t===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeSpecialT=function(e){var t=32|e;t===c.TitleEnd[3]?this.startSpecial(c.TitleEnd,4):t===c.TextareaEnd[3]?this.startSpecial(c.TextareaEnd,4):(this.state=i.InTagName,this.stateInTagName(e))},e.prototype.startEntity=function(){this.baseState=this.state,this.state=i.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?s.DecodingMode.Strict:this.baseState===i.Text||this.baseState===i.InSpecialTag?s.DecodingMode.Legacy:s.DecodingMode.Attribute)},e.prototype.stateInEntity=function(){var e=this.entityDecoder.write(this.buffer,this.index-this.offset);e>=0?(this.state=this.baseState,0===e&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==i.InAttributeValueDq&&this.state!==i.InAttributeValueSq&&this.state!==i.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:this.stateText(e);break;case i.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case i.InSpecialTag:this.stateInSpecialTag(e);break;case i.CDATASequence:this.stateCDATASequence(e);break;case i.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case i.InAttributeName:this.stateInAttributeName(e);break;case i.InCommentLike:this.stateInCommentLike(e);break;case i.InSpecialComment:this.stateInSpecialComment(e);break;case i.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case i.InTagName:this.stateInTagName(e);break;case i.InClosingTagName:this.stateInClosingTagName(e);break;case i.BeforeTagName:this.stateBeforeTagName(e);break;case i.AfterAttributeName:this.stateAfterAttributeName(e);break;case i.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case i.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case i.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case i.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case i.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case i.BeforeSpecialT:this.stateBeforeSpecialT(e);break;case i.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case i.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case i.InDeclaration:this.stateInDeclaration(e);break;case i.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case i.BeforeComment:this.stateBeforeComment(e);break;case i.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case i.InEntity:this.stateInEntity()}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===i.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.sectionStart>=e||(this.state===i.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,e))},e.prototype.emitCodePoint=function(e,t){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.onattribentity(e)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+t,this.index=this.sectionStart-1,this.cbs.ontextentity(e,this.sectionStart))},e}();t.default=u},8659:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.QuoteType=t.Tokenizer=t.createDomStream=t.createDocumentStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=n(1724),l=n(1724);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=n(1141),u=n(1141);function d(e,t){var n=new c.DomHandler(void 0,t);return new a.Parser(n,t).end(e),n.root}function h(e,t){return d(e,t).children}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return u.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return u.DomHandler}}),t.parseDocument=d,t.parseDOM=h,t.createDocumentStream=function(e,t,n){var r=new c.DomHandler(function(t){return e(t,r.root)},t,n);return new a.Parser(r,t)},t.createDomStream=function(e,t,n){var r=new c.DomHandler(e,t,n);return new a.Parser(r,t)};var p=n(7918);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return s(p).default}}),Object.defineProperty(t,"QuoteType",{enumerable:!0,get:function(){return p.QuoteType}}),t.ElementType=o(n(5413));var f=n(8888),m=n(8888);Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return m.getFeed}});var g={xmlMode:!0};t.parseFeed=function(e,t){return void 0===t&&(t=g),(0,f.getFeed)(h(e,t))},t.DomUtils=o(n(8888))},2384:(e,t,n)=>{"use strict";var r=n(8287).Buffer,i=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,s=/\s|\uFEFF|\xA0/,a=/\r?\n[\x20\x09]+/g,l=/[;,"]/,c=/[;,"]|\s/,u=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,d=1,h=2,p=4;function f(e){return e.replace(o,"")}function m(e){return s.test(e)}function g(e,t){for(;m(e[t]);)t++;return t}function v(e){return c.test(e)||!u.test(e)}class y{constructor(e){this.refs=[],e&&this.parse(e)}rel(e){for(var t=[],n=e.toLowerCase(),r=0;r<this.refs.length;r++)"string"==typeof this.refs[r].rel&&this.refs[r].rel.toLowerCase()===n&&t.push(this.refs[r]);return t}get(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var n=[],r=0;r<this.refs.length;r++)"string"==typeof this.refs[r][e]&&this.refs[r][e].toLowerCase()===t&&n.push(this.refs[r]);return n}set(e){return this.refs.push(e),this}setUnique(e){return this.refs.some(t=>{return n=t,r=e,Object.keys(n).length===Object.keys(r).length&&Object.keys(n).every(e=>e in r&&n[e]===r[e]);var n,r})||this.refs.push(e),this}has(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var n=0;n<this.refs.length;n++)if("string"==typeof this.refs[n][e]&&this.refs[n][e].toLowerCase()===t)return!0;return!1}parse(e,t){e=f(e=(t=t||0)?e.slice(t):e).replace(a,"");for(var n=d,r=e.length,i=(t=0,null);t<r;)if(n===d){if(m(e[t])){t++;continue}if("<"!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);if(null!=i&&(null!=i.rel?this.refs.push(...y.expandRelations(i)):this.refs.push(i)),-1===(c=e.indexOf(">",t)))throw new Error("Expected end of URI delimiter at offset "+t);i={uri:e.slice(t+1,c)},t=c,n=h,t++}else if(n===h){if(m(e[t])){t++;continue}if(";"===e[t])n=p,t++;else{if(","!==e[t])throw new Error('Unexpected character "'+e[t]+'" at offset '+t);n=d,t++}}else{if(n!==p)throw new Error('Unknown parser state "'+n+'"');if(";"===e[t]||m(e[t])){t++;continue}-1===(c=e.indexOf("=",t))&&(c=e.indexOf(";",t)),-1===c&&(c=e.length);var o=f(e.slice(t,c)).toLowerCase(),s="";if('"'===e[t=g(e,t=c+1)])for(t++;t<r;){if('"'===e[t]){t++;break}"\\"===e[t]&&t++,s+=e[t],t++}else{for(var c=t+1;!l.test(e[c])&&c<r;)c++;s=e.slice(t,c),t=c}switch(i[o]&&y.isSingleOccurenceAttr(o)||("*"===o[o.length-1]?i[o]=y.parseExtendedValue(s):(s="type"===o?s.toLowerCase():s,null!=i[o]?Array.isArray(i[o])?i[o].push(s):i[o]=[i[o],s]:i[o]=s)),e[t]){case",":n=d;break;case";":n=p}t++}return null!=i&&(null!=i.rel?this.refs.push(...y.expandRelations(i)):this.refs.push(i)),i=null,this}toString(){for(var e=[],t="",n=null,r=0;r<this.refs.length;r++)n=this.refs[r],t=Object.keys(this.refs[r]).reduce(function(e,t){return"uri"===t?e:e+"; "+y.formatAttribute(t,n[t])},"<"+n.uri+">"),e.push(t);return e.join(", ")}}y.isCompatibleEncoding=function(e){return i.test(e)},y.parse=function(e,t){return(new y).parse(e,t)},y.isSingleOccurenceAttr=function(e){return"rel"===e||"type"===e||"media"===e||"title"===e||"title*"===e},y.isTokenAttr=function(e){return"rel"===e||"type"===e||"anchor"===e},y.escapeQuotes=function(e){return e.replace(/"/g,'\\"')},y.expandRelations=function(e){return e.rel.split(" ").map(function(t){var n=Object.assign({},e);return n.rel=t,n})},y.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:y.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:y.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}},y.formatExtendedAttribute=function(e,t){var n=(t.encoding||"utf-8").toUpperCase();return e+"="+n+"'"+(t.language||"en")+"'"+(r.isBuffer(t.value)&&y.isCompatibleEncoding(n)?t.value.toString(n):r.isBuffer(t.value)?t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):encodeURIComponent(t.value))},y.formatAttribute=function(e,t){return Array.isArray(t)?t.map(t=>y.formatAttribute(e,t)).join("; "):"*"===e[e.length-1]||"string"!=typeof t?y.formatExtendedAttribute(e,t):(y.isTokenAttr(e)?t=v(t)?'"'+y.escapeQuotes(t)+'"':y.escapeQuotes(t):v(t)&&(t='"'+(t=(t=encodeURIComponent(t)).replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"))+'"'),e+"="+t)},e.exports=y},251:(e,t)=>{t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=f,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=f,s/=256,c-=8);e[n+p-f]|=128*m}},2395:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2803),t),i(n(5094),t),i(n(585),t),i(n(9146),t),i(n(5086),t),i(n(5215),t),i(n(4931),t)},2803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextParser=void 0;const r=n(742),i=n(5094),o=n(585),s=n(5215),a=n(4931);class l{constructor(e){e=e||{},this.documentLoader=e.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps=!("redirectSchemaOrgHttps"in e)||!!e.redirectSchemaOrgHttps}static validateLanguage(e,t,n){if("string"!=typeof e)throw new i.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(e)}'`,n);if(!a.Util.REGEX_LANGUAGE_TAG.test(e)){if(t)throw new i.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(e)}'`,n);return!1}return!0}static validateDirection(e,t){if("string"!=typeof e)throw new i.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(e)}'`,i.ERROR_CODES.INVALID_BASE_DIRECTION);if(!a.Util.REGEX_DIRECTION_TAG.test(e)){if(t)throw new i.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(e)}'`,i.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(e){for(const t of Object.keys(e)){let n=e[t];if(n&&"object"==typeof n&&n["@reverse"]&&!n["@id"]){if("string"!=typeof n["@reverse"]||a.Util.isValidKeyword(n["@reverse"]))throw new i.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${n["@reverse"]}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);n=e[t]=Object.assign(Object.assign({},n),{"@id":n["@reverse"]}),n["@id"]=n["@reverse"],a.Util.isPotentialKeyword(n["@reverse"])?delete n["@reverse"]:n["@reverse"]=!0}}return e}expandPrefixedTerms(e,t,n){const r=e.getContextRaw();for(const o of n||Object.keys(r))if(a.Util.EXPAND_KEYS_BLACKLIST.indexOf(o)<0&&!a.Util.isReservedInternalKeyword(o)){const n=r[o];if(a.Util.isPotentialKeyword(o)&&a.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(o)>=0&&("@type"!==o||"object"==typeof r[o]&&!r[o]["@protected"]&&"@set"!==r[o]["@container"]))throw new i.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${o} to ${JSON.stringify(n)}`,i.ERROR_CODES.KEYWORD_REDEFINITION);if(a.Util.ALIAS_RANGE_BLACKLIST.indexOf(a.Util.getContextValueId(n))>=0)throw new i.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${o} to ${JSON.stringify(n)}`,i.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(n&&a.Util.isPotentialKeyword(a.Util.getContextValueId(n))&&!0===n["@prefix"])throw new i.ErrorCoded(`Tried to use keyword aliases as prefix: '${o}': '${JSON.stringify(n)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);for(;a.Util.isPrefixValue(r[o]);){const n=r[o];let i=!1;if("string"==typeof n)r[o]=e.expandTerm(n,!0),i=i||n!==r[o];else{const s=n["@id"],l=n["@type"],c=!("@prefix"in n)||a.Util.isValidIri(o);if("@id"in n)null!=s&&"string"==typeof s&&(r[o]=Object.assign(Object.assign({},r[o]),{"@id":e.expandTerm(s,!0)}),i=i||s!==r[o]["@id"]);else if(!a.Util.isPotentialKeyword(o)&&c){const t=e.expandTerm(o,!0);t!==o&&(r[o]=Object.assign(Object.assign({},r[o]),{"@id":t}),i=!0)}if(l&&"string"==typeof l&&"@vocab"!==l&&(!n["@container"]||!n["@container"]["@type"])&&c){let n=e.expandTerm(l,!0);t&&l===n&&(n=e.expandTerm(l,!1)),n!==l&&(i=!0,r[o]=Object.assign(Object.assign({},r[o]),{"@type":n}))}}if(!i)break}}}normalize(e,{processingMode:t,normalizeLanguageTags:n}){if(n||1===t)for(const t of Object.keys(e))if("@language"===t&&"string"==typeof e[t])e[t]=e[t].toLowerCase();else{const n=e[t];if(n&&"object"==typeof n&&"string"==typeof n["@language"]){const r=n["@language"].toLowerCase();r!==n["@language"]&&(e[t]=Object.assign(Object.assign({},n),{"@language":r}))}}}containersToHash(e){for(const t of Object.keys(e)){const n=e[t];if(n&&"object"==typeof n)if("string"==typeof n["@container"])e[t]=Object.assign(Object.assign({},n),{"@container":{[n["@container"]]:!0}});else if(Array.isArray(n["@container"])){const r={};for(const e of n["@container"])r[e]=!0;e[t]=Object.assign(Object.assign({},n),{"@container":r})}}}applyScopedProtected(e,{processingMode:t},n){if(t&&t>=1.1&&e["@protected"]){for(const t of Object.keys(e))if(!a.Util.isReservedInternalKeyword(t)&&!a.Util.isPotentialKeyword(t)&&!a.Util.isTermProtected(e,t)){const r=e[t];r&&"object"==typeof r?"@protected"in e[t]||(e[t]=Object.assign(Object.assign({},e[t]),{"@protected":!0})):(e[t]={"@id":r,"@protected":!0},a.Util.isSimpleTermDefinitionPrefix(r,n)&&(e[t]=Object.assign(Object.assign({},e[t]),{"@prefix":!0})))}delete e["@protected"]}}validateKeywordRedefinitions(e,t,n,r){for(const n of null!=r?r:Object.keys(t))if(a.Util.isTermProtected(e,n)&&("string"==typeof t[n]?t[n]={"@id":t[n],"@protected":!0}:t[n]=Object.assign(Object.assign({},t[n]),{"@protected":!0}),!a.Util.deepEqual(e[n],t[n])))throw new i.ErrorCoded(`Attempted to override the protected keyword ${n} from ${JSON.stringify(a.Util.getContextValueId(e[n]))} to ${JSON.stringify(a.Util.getContextValueId(t[n]))}`,i.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(e,{processingMode:t}){for(const n of Object.keys(e)){if(a.Util.isReservedInternalKeyword(n))continue;if(""===n)throw new i.ErrorCoded(`The empty term is not allowed, got: '${n}': '${JSON.stringify(e[n])}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);const r=e[n],o=typeof r;if(a.Util.isPotentialKeyword(n)){switch(n.substr(1)){case"vocab":if(null!==r&&"string"!==o)throw new i.ErrorCoded(`Found an invalid @vocab IRI: ${r}`,i.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==r&&"string"!==o)throw new i.ErrorCoded(`Found an invalid @base IRI: ${e[n]}`,i.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==r&&l.validateLanguage(r,!0,i.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==r&&"number"!==o)throw new i.ErrorCoded(`Found an invalid @version number: ${r}`,i.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==r&&l.validateDirection(r,!0);break;case"propagate":if(1===t)throw new i.ErrorCoded(`Found an illegal @propagate keyword: ${r}`,i.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==r&&"boolean"!==o)throw new i.ErrorCoded(`Found an invalid @propagate value: ${r}`,i.ERROR_CODES.INVALID_PROPAGATE_VALUE)}if(a.Util.isValidKeyword(n)&&a.Util.isValidKeyword(a.Util.getContextValueId(r)))throw new i.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${a.Util.getContextValueId(r)}'`,i.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==r)switch(o){case"string":if(a.Util.getPrefix(r,e)===n)throw new i.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.CYCLIC_IRI_MAPPING);if(a.Util.isValidIriWeak(n)){if("@type"===r)throw new i.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${r}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIri(r)&&r!==new s.JsonLdContextNormalized(e).expandTerm(n))throw new i.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${r}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!(a.Util.isCompactIri(n)||"@id"in r||("@id"===r["@type"]?e["@base"]:e["@vocab"])))throw new i.ErrorCoded(`Missing @id in context entry: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);for(const c of Object.keys(r)){const u=r[c];if(u)switch(c){case"@id":if(a.Util.isValidKeyword(u)&&"@type"!==u&&"@id"!==u&&"@graph"!==u&&"@nest"!==u)throw new i.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIriWeak(n)){if("@type"===u)throw new i.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.isValidIri(u)&&u!==new s.JsonLdContextNormalized(e).expandTerm(n))throw new i.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!=typeof u)throw new i.ErrorCoded(`Detected non-string @id in context entry: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING);if(a.Util.getPrefix(u,e)===n)throw new i.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===r["@container"]&&"@id"!==u&&"@vocab"!==u)throw new i.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${n}': '${u}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!=typeof u)throw new i.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(o)}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);if(!("@id"===u||"@vocab"===u||1!==t&&"@json"===u||1!==t&&"@none"===u||"_"!==u[0]&&a.Util.isValidIri(u)))throw new i.ErrorCoded(`A context @type must be an absolute IRI, found: '${n}': '${u}'`,i.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"==typeof u&&r["@id"]&&r["@id"]!==u)throw new i.ErrorCoded(`Found non-matching @id and @reverse term values in '${n}':'${u}' and '${r["@id"]}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in r)throw new i.ErrorCoded(`@nest is not allowed in the reverse property '${n}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===t&&(Object.keys(u).length>1||a.Util.CONTAINERS_1_0.indexOf(Object.keys(u)[0])<0))throw new i.ErrorCoded(`Invalid term @container for '${n}' ('${Object.keys(u)}') in 1.0, must be only one of ${a.Util.CONTAINERS_1_0.join(", ")}`,i.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const e of Object.keys(u)){if("@list"===e&&r["@reverse"])throw new i.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${n}'`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(a.Util.CONTAINERS.indexOf(e)<0)throw new i.ErrorCoded(`Invalid term @container for '${n}' ('${e}'), must be one of ${a.Util.CONTAINERS.join(", ")}`,i.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":l.validateLanguage(u,!0,i.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":l.validateDirection(u,!0);break;case"@prefix":if(null!==u&&"boolean"!=typeof u)throw new i.ErrorCoded(`Found an invalid term @prefix boolean in: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in r)&&!a.Util.isValidIri(n))throw new i.ErrorCoded(`Invalid @prefix definition for '${n}' ('${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===t||!r["@container"]||!r["@container"]["@index"])throw new i.ErrorCoded(`Attempt to add illegal key to value object: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(a.Util.isPotentialKeyword(u)&&"@nest"!==u)throw new i.ErrorCoded(`Found an invalid term @nest value in: '${n}': '${JSON.stringify(r)}'`,i.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new i.ErrorCoded(`Found an invalid term value: '${n}': '${r}'`,i.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(e,t,n){return"string"==typeof e||(n&&!("@base"in e)&&t.parentContext&&"object"==typeof t.parentContext&&"@base"in t.parentContext&&(e["@base"]=t.parentContext["@base"],t.parentContext["@__baseDocument"]&&(e["@__baseDocument"]=!0)),t.baseIRI&&!t.external&&("@base"in e?null===e["@base"]||"string"!=typeof e["@base"]||a.Util.isValidIri(e["@base"])||(e["@base"]=(0,r.resolve)(e["@base"],t.parentContext&&t.parentContext["@base"]||t.baseIRI)):(e["@base"]=t.baseIRI,e["@__baseDocument"]=!0))),e}normalizeContextIri(e,t){if(!a.Util.isValidIri(e))try{e=(0,r.resolve)(e,t)}catch(t){throw new Error(`Invalid context IRI: ${e}`)}return this.redirectSchemaOrgHttps&&e.startsWith("http://schema.org")&&(e="https://schema.org/"),e}async parseInnerContexts(e,t,n){for(const r of null!=n?n:Object.keys(e)){const n=e[r];if(n&&"object"==typeof n&&"@context"in n&&null!==n["@context"]&&!t.ignoreScopedContexts){if(this.validateContext)try{const i=Object.assign(Object.assign({},e),{[r]:Object.assign({},e[r])});delete i[r]["@context"],await this.parse(n["@context"],Object.assign(Object.assign({},t),{external:!1,parentContext:i,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(e){throw new i.ErrorCoded(e.message,i.ERROR_CODES.INVALID_SCOPED_CONTEXT)}e[r]=Object.assign(Object.assign({},n),{"@context":(await this.parse(n["@context"],Object.assign(Object.assign({},t),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}))).getContextRaw()})}}return e}async parse(e,t={},n={}){const{baseIRI:r,parentContext:o,external:c,processingMode:u=l.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:d,ignoreProtection:h,minimalProcessing:p}=t,f=t.remoteContexts||{};if(Object.keys(f).length>=this.remoteContextsDepthLimit)throw new i.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(f),i.ERROR_CODES.CONTEXT_OVERFLOW);if(null==e){if(!h&&o&&a.Util.hasProtectedTerms(o))throw new i.ErrorCoded("Illegal context nullification when terms are protected",i.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new s.JsonLdContextNormalized(this.applyBaseEntry({},t,!1))}if("string"==typeof e){const n=this.normalizeContextIri(e,r),i=this.getOverriddenLoad(n,t);if(i)return new s.JsonLdContextNormalized(i);const o=await this.parse(await this.load(n),Object.assign(Object.assign({},t),{baseIRI:n,external:!0,remoteContexts:Object.assign(Object.assign({},f),{[n]:!0})}));return this.applyBaseEntry(o.getContextRaw(),t,!0),o}if(Array.isArray(e)){const n=[],i=await Promise.all(e.map((e,i)=>{if("string"==typeof e){const o=this.normalizeContextIri(e,r);n[i]=o;const s=this.getOverriddenLoad(o,t);return s||this.load(o)}return e}));if(p)return new s.JsonLdContextNormalized(i);const a=await i.reduce((e,r,o)=>e.then(e=>this.parse(r,Object.assign(Object.assign({},t),{baseIRI:n[o]||t.baseIRI,external:!!n[o]||t.external,parentContext:e.getContextRaw(),remoteContexts:n[o]?Object.assign(Object.assign({},f),{[n[o]]:!0}):f}),{skipValidation:o<i.length-1})),Promise.resolve(new s.JsonLdContextNormalized(o||{})));return this.applyBaseEntry(a.getContextRaw(),t,!0),a}if("object"==typeof e){if("@context"in e)return await this.parse(e["@context"],t);if(e=Object.assign({},e),c&&delete e["@base"],this.applyBaseEntry(e,t,!0),this.containersToHash(e),p)return new s.JsonLdContextNormalized(e);let f={};if("@import"in e){if(!(u>=1.1))throw new i.ErrorCoded("Context importing is not supported in JSON-LD 1.0",i.ERROR_CODES.INVALID_CONTEXT_ENTRY);if("string"!=typeof e["@import"])throw new i.ErrorCoded("An @import value must be a string, but got "+typeof e["@import"],i.ERROR_CODES.INVALID_IMPORT_VALUE);f=await this.loadImportContext(this.normalizeContextIri(e["@import"],r)),delete e["@import"]}this.applyScopedProtected(f,{processingMode:u},s.defaultExpandOptions);const m=Object.assign(f,e);this.idifyReverseTerms(m),this.normalize(m,{processingMode:u,normalizeLanguageTags:d}),this.applyScopedProtected(m,{processingMode:u},s.defaultExpandOptions);const g=Object.keys(m),v=[];if("object"==typeof o)for(const e in o)e in m?v.push(e):m[e]=o[e];await this.parseInnerContexts(m,t,g);const y=new s.JsonLdContextNormalized(m);return(m&&m["@version"]||l.DEFAULT_PROCESSING_MODE)>=1.1&&(e["@vocab"]&&"string"==typeof e["@vocab"]||""===e["@vocab"])&&(o&&"@vocab"in o&&e["@vocab"].indexOf(":")<0?m["@vocab"]=o["@vocab"]+e["@vocab"]:(a.Util.isCompactIri(e["@vocab"])||e["@vocab"]in m)&&(m["@vocab"]=y.expandTerm(e["@vocab"],!0))),this.expandPrefixedTerms(y,this.expandContentTypeToBase,g),!h&&o&&u>=1.1&&this.validateKeywordRedefinitions(o,m,s.defaultExpandOptions,v),this.validateContext&&!n.skipValidation&&this.validate(m,{processingMode:u}),y}throw new i.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${e}`,i.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(e){const t=this.documentCache[e];if(t)return t;let n;try{n=await this.documentLoader.load(e)}catch(t){throw new i.ErrorCoded(`Failed to load remote context ${e}: ${t.message}`,i.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in n))throw new i.ErrorCoded(`Missing @context in remote context at ${e}`,i.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[e]=n["@context"]}getOverriddenLoad(e,t){if(e in(t.remoteContexts||{})){if(t.ignoreRemoteScopedContexts)return e;throw new i.ErrorCoded("Detected a cyclic context inclusion of "+e,i.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(e){let t=await this.load(e);if("object"!=typeof t||Array.isArray(t))throw new i.ErrorCoded("An imported context must be a single object: "+e,i.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in t)throw new i.ErrorCoded("An imported context can not import another context: "+e,i.ERROR_CODES.INVALID_CONTEXT_ENTRY);return t=Object.assign({},t),this.containersToHash(t),t}}l.DEFAULT_PROCESSING_MODE=1.1,t.ContextParser=l},5094:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_CODES=t.ErrorCoded=void 0;class n extends Error{constructor(e,t){super(e),this.code=t}}t.ErrorCoded=n,function(e){e.COLLIDING_KEYWORDS="colliding keywords",e.CONFLICTING_INDEXES="conflicting indexes",e.CYCLIC_IRI_MAPPING="cyclic IRI mapping",e.INVALID_ID_VALUE="invalid @id value",e.INVALID_INDEX_VALUE="invalid @index value",e.INVALID_NEST_VALUE="invalid @nest value",e.INVALID_PREFIX_VALUE="invalid @prefix value",e.INVALID_PROPAGATE_VALUE="invalid @propagate value",e.INVALID_REVERSE_VALUE="invalid @reverse value",e.INVALID_IMPORT_VALUE="invalid @import value",e.INVALID_VERSION_VALUE="invalid @version value",e.INVALID_BASE_IRI="invalid base IRI",e.INVALID_CONTAINER_MAPPING="invalid container mapping",e.INVALID_CONTEXT_ENTRY="invalid context entry",e.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",e.INVALID_DEFAULT_LANGUAGE="invalid default language",e.INVALID_INCLUDED_VALUE="invalid @included value",e.INVALID_IRI_MAPPING="invalid IRI mapping",e.INVALID_JSON_LITERAL="invalid JSON literal",e.INVALID_KEYWORD_ALIAS="invalid keyword alias",e.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",e.INVALID_LANGUAGE_MAPPING="invalid language mapping",e.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",e.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",e.INVALID_LOCAL_CONTEXT="invalid local context",e.INVALID_REMOTE_CONTEXT="invalid remote context",e.INVALID_REVERSE_PROPERTY="invalid reverse property",e.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",e.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",e.INVALID_SCOPED_CONTEXT="invalid scoped context",e.INVALID_SCRIPT_ELEMENT="invalid script element",e.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",e.INVALID_TERM_DEFINITION="invalid term definition",e.INVALID_TYPE_MAPPING="invalid type mapping",e.INVALID_TYPE_VALUE="invalid type value",e.INVALID_TYPED_VALUE="invalid typed value",e.INVALID_VALUE_OBJECT="invalid value object",e.INVALID_VALUE_OBJECT_VALUE="invalid value object value",e.INVALID_VOCAB_MAPPING="invalid vocab mapping",e.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",e.KEYWORD_REDEFINITION="keyword redefinition",e.LOADING_DOCUMENT_FAILED="loading document failed",e.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",e.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",e.PROCESSING_MODE_CONFLICT="processing mode conflict",e.PROTECTED_TERM_REDEFINITION="protected term redefinition",e.CONTEXT_OVERFLOW="context overflow",e.INVALID_BASE_DIRECTION="invalid base direction",e.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",e.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",e.INVALID_EMBEDDED_NODE="invalid embedded node",e.INVALID_ANNOTATION="invalid annotation"}(t.ERROR_CODES||(t.ERROR_CODES={}))},585:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchDocumentLoader=void 0;const r=n(5094),i=n(2384),o=n(742);t.FetchDocumentLoader=class{constructor(e){this.fetcher=e}async load(e){const t=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(t.ok&&t.headers){let n=t.headers.get("Content-Type");if(n){const e=n.indexOf(";");e>0&&(n=n.substr(0,e))}if("application/ld+json"===n)return await t.json();if(t.headers.has("Link")){let n;if(t.headers.forEach((t,r)=>{if("link"===r){const r=(0,i.parse)(t);for(const t of r.get("type","application/ld+json"))if("alternate"===t.rel){if(n)throw new Error("Multiple JSON-LD alternate links were found on "+e);n=(0,o.resolve)(t.uri,e)}}}),n)return this.load(n)}throw new r.ErrorCoded(`Unsupported JSON-LD media type ${n}`,r.ERROR_CODES.LOADING_DOCUMENT_FAILED)}throw new Error(t.statusText||`Status code: ${t.status}`)}}},9146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultExpandOptions=t.JsonLdContextNormalized=void 0;const r=n(742),i=n(5094),o=n(4931);t.JsonLdContextNormalized=class{constructor(e){this.contextRaw=e}getContextRaw(){return this.contextRaw}expandTerm(e,n,s=t.defaultExpandOptions){const a=this.contextRaw[e];if(null===a||a&&null===a["@id"])return null;let l=!0;if(a&&n){const t=o.Util.getContextValueId(a);if(t&&t!==e){if("string"==typeof t&&(o.Util.isValidIri(t)||o.Util.isValidKeyword(t)))return t;o.Util.isPotentialKeyword(t)||(l=!1)}}const c=o.Util.getPrefix(e,this.contextRaw),u=this.contextRaw["@vocab"],d=(!!u||""===u)&&u.indexOf(":")<0,h=this.contextRaw["@base"],p=o.Util.isPotentialKeyword(e);if(c){const t=this.contextRaw[c],n=o.Util.getContextValueId(t);if(n){if("string"!=typeof t&&s.allowPrefixForcing){if("_"!==n[0]&&!p&&!t["@prefix"]&&!(e in this.contextRaw))return e}else if(!o.Util.isSimpleTermDefinitionPrefix(n,s))return e;return n+e.substr(c.length+1)}}else{if(n&&(u||""===u||s.allowVocabRelativeToBase&&h&&d)&&!p&&!o.Util.isCompactIri(e)){if(d){if(s.allowVocabRelativeToBase)return(u||h?(0,r.resolve)(u,h):"")+e;throw new i.ErrorCoded(`Relative vocab expansion for term '${e}' with vocab '${u}' is not allowed.`,i.ERROR_CODES.INVALID_VOCAB_MAPPING)}return u+e}if(!n&&h&&!p&&!o.Util.isCompactIri(e))return(0,r.resolve)(e,h)}if(l)return e;throw new i.ErrorCoded(`Invalid IRI mapping found for context entry '${e}': '${JSON.stringify(a)}'`,i.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(e,t){if(t&&this.contextRaw["@vocab"]&&e.startsWith(this.contextRaw["@vocab"]))return e.substr(this.contextRaw["@vocab"].length);if(!t&&this.contextRaw["@base"]&&e.startsWith(this.contextRaw["@base"]))return e.substr(this.contextRaw["@base"].length);const n={prefix:"",suffix:e};for(const r in this.contextRaw){const i=this.contextRaw[r];if(i&&!o.Util.isPotentialKeyword(r)){const s=o.Util.getContextValueId(i);if(e.startsWith(s)){const i=e.substr(s.length);if(i)i.length<n.suffix.length&&(n.prefix=r,n.suffix=i);else if(t)return r}}}return n.prefix?n.prefix+":"+n.suffix:e}},t.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},4931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;class n{static isCompactIri(e){return e.indexOf(":")>0&&!(e&&"#"===e[0])}static getPrefix(e,t){if(e&&"#"===e[0])return null;const n=e.indexOf(":");if(n>=0){if(e.length>n+1&&"/"===e.charAt(n+1)&&"/"===e.charAt(n+2))return null;const r=e.substr(0,n);if("_"===r)return null;if(t[r])return r}return null}static getContextValueId(e){if(null===e||"string"==typeof e)return e;const t=e["@id"];return t||null}static isSimpleTermDefinitionPrefix(e,t){return!n.isPotentialKeyword(e)&&(t.allowPrefixNonGenDelims||"string"==typeof e&&("_"===e[0]||n.isPrefixIriEndingWithGenDelim(e)))}static isPotentialKeyword(e){return"string"==typeof e&&n.KEYWORD_REGEX.test(e)}static isPrefixIriEndingWithGenDelim(e){return n.ENDS_WITH_GEN_DELIM.test(e)}static isPrefixValue(e){return e&&("string"==typeof e||e&&"object"==typeof e)}static isValidIri(e){return Boolean(e&&n.IRI_REGEX.test(e))}static isValidIriWeak(e){return!!e&&":"!==e[0]&&n.IRI_REGEX_WEAK.test(e)}static isValidKeyword(e){return n.VALID_KEYWORDS[e]}static isTermProtected(e,t){const n=e[t];return!("string"==typeof n)&&n&&n["@protected"]}static hasProtectedTerms(e){for(const t of Object.keys(e))if(n.isTermProtected(e,t))return!0;return!1}static isReservedInternalKeyword(e){return e.startsWith("@__")}static deepEqual(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(n=>{const r=e[n],i=t[n];return r===i||null!==r&&null!==i&&"object"==typeof r&&"object"==typeof i&&this.deepEqual(r,i)})}}n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,n.IRI_REGEX_WEAK=/(?::[^:])|\//,n.KEYWORD_REGEX=/^@[a-z]+$/i,n.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,n.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,n.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,n.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},n.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],n.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],n.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],n.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],n.CONTAINERS_1_0=["@list","@set","@index"],t.Util=n},8690:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2277),t)},4405:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextTree=void 0;class n{constructor(){this.subTrees={}}getContext(e){if(e.length>0){const[t,...n]=e,r=this.subTrees[t];if(r){const e=r.getContext(n);if(e)return e.then(({context:e,depth:t})=>({context:e,depth:t+1}))}}return this.context?this.context.then(e=>({context:e,depth:0})):null}setContext(e,t){if(0===e.length)this.context=t;else{const[r,...i]=e;let o=this.subTrees[r];o||(o=this.subTrees[r]=new n),o.setContext(i,t)}}removeContext(e){this.setContext(e,null)}}t.ContextTree=n},2277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonLdParser=void 0;const r=n(608),i=n(2395),o=n(9198),s=n(9693),a=n(4860),l=n(2386),c=n(6970),u=n(3809),d=n(5998),h=n(5517),p=n(736),f=n(4910),m=n(2036),g=n(6454),v=n(3283),y=n(3099),b=n(888),w=n(2384),_=n(6105);class x extends o.Transform{constructor(e){super({readableObjectMode:!0}),e=e||{},this.options=e,this.parsingContext=new y.ParsingContext(Object.assign({parser:this},e)),this.util=new b.Util({dataFactory:e.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new r,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{void 0!==this.jsonParser.mode&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(e,t,n,r){let o,s,a=["application/activity+json"];if(r&&r.wellKnownMediaTypes&&(a=r.wellKnownMediaTypes),"application/ld+json"!==t&&!a.includes(t)){if("application/json"!==t&&!t.endsWith("+json"))throw new i.ErrorCoded(`Unsupported JSON-LD media type ${t}`,i.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(n&&n.has("Link")&&n.forEach((t,n)=>{if("link"===n){const n=(0,w.parse)(t);for(const t of n.get("rel","http://www.w3.org/ns/json-ld#context")){if(o)throw new i.ErrorCoded("Multiple JSON-LD context link headers were found on "+e,i.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);o=t.uri}}}),!o&&!(null==r?void 0:r.ignoreMissingContextLinkHeader))throw new i.ErrorCoded(`Missing context link header for media type ${t} on ${e}`,i.ERROR_CODES.LOADING_DOCUMENT_FAILED)}if(n&&n.has("Content-Type")){const e=n.get("Content-Type"),t=/; *profile=([^"]*)/.exec(e);t&&"http://www.w3.org/ns/json-ld#streaming"===t[1]&&(s=!0)}return new x(Object.assign({baseIRI:e,context:o,streamingProfile:s},r||{}))}import(e){if("pipe"in e){e.on("error",e=>t.emit("error",e));const t=e.pipe(new x(this.options));return t}{const t=new o.PassThrough({readableObjectMode:!0});e.on("error",e=>n.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));const n=t.pipe(new x(this.options));return n}}_transform(e,t,n){this.jsonParser.write(e),this.lastOnValueJob.then(()=>n(),e=>n(e))}async newOnValueJob(e,t,n,r){let o=!0;if(r&&n<this.lastDepth){const e=this.parsingContext.listPointerStack[this.lastDepth];e&&(e.value&&this.push(this.util.dataFactory.quad(e.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),e.listId.listHead=!0,this.parsingContext.idStack[e.listRootDepth+1]=[e.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await a.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),o=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const s=await this.util.unaliasKeyword(e[n],e,n),l=await this.util.unaliasKeywordParent(e,n);this.parsingContext.emittedStack[n]=!0;let c=!0;i.Util.isValidKeyword(s)&&"@reverse"===l&&"@context"!==s&&this.emit("error",new i.ErrorCoded(`Found the @id '${t}' inside an @reverse property`,i.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let u=!1;this.parsingContext.validationStack.length>1&&(u=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let t=Math.max(1,this.parsingContext.validationStack.length-1);t<e.length-1;t++){const r=this.parsingContext.validationStack[t]||(this.parsingContext.validationStack[t]=await this.validateKey(e.slice(0,t+1),t,u));if(!r.valid){this.parsingContext.emittedStack[n]=!1,c=!1;break}!u&&r.property&&(u=!0)}if(await this.util.isLiteral(e,n)&&(c=!1),c)for(const r of x.ENTRY_HANDLERS){const i=await r.test(this.parsingContext,this.util,s,e,n);if(i){await r.handle(this.parsingContext,this.util,s,e,t,n,i),r.isStackProcessor()&&(this.parsingContext.processingStack[n]=!0);break}}0===n&&Array.isArray(t)&&await this.util.validateValueIndexes(t),o&&n<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=n,this.lastKeys=e,this.parsingContext.unaliasedKeywordCacheStack.splice(n-1)}flushStacks(e){this.parsingContext.processingStack.splice(e,1),this.parsingContext.processingType.splice(e,1),this.parsingContext.emittedStack.splice(e,1),this.parsingContext.idStack.splice(e,1),this.parsingContext.graphStack.splice(e+1,1),this.parsingContext.graphContainerTermStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1),this.parsingContext.validationStack.splice(e-1,2),this.parsingContext.literalStack.splice(e,this.parsingContext.literalStack.length-e),this.parsingContext.annotationsBuffer.splice(e,1)}async flushBuffer(e,t){let n=this.parsingContext.idStack[e];!!n||(n=this.parsingContext.idStack[e]=[this.util.dataFactory.blankNode()]);const r=this.parsingContext.unidentifiedValuesBuffer[e];if(r){for(const i of n){const n=await this.util.getDepthOffsetGraph(e,t),o=this.parsingContext.graphStack[e]||n>=0?this.parsingContext.idStack[e-n-1]:[await this.util.getGraphContainerValue(t,e)];if(o)for(const t of o){this.parsingContext.emittedStack[e]=!0;for(const n of r)this.util.emitQuadChecked(e,i,n.predicate,n.object,t,n.reverse,n.isEmbedded)}else{const n=this.parsingContext.getUnidentifiedGraphBufferSafe(e-await this.util.getDepthOffsetGraph(e,t)-1);for(const e of r)e.reverse?n.push({object:i,predicate:e.predicate,subject:e.object,isEmbedded:e.isEmbedded}):n.push({object:e.object,predicate:e.predicate,subject:i,isEmbedded:e.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(e,1),this.parsingContext.literalStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1)}const o=this.parsingContext.unidentifiedGraphsBuffer[e];if(o){for(const t of n){const n=1!==e||"BlankNode"!==t.termType||this.parsingContext.topLevelProperties?t:this.util.getDefaultGraph();this.parsingContext.emittedStack[e]=!0;for(const t of o)this.parsingContext.emitQuad(e,this.util.dataFactory.quad(t.subject,t.predicate,t.object,n))}this.parsingContext.unidentifiedGraphsBuffer.splice(e,1)}const s=this.parsingContext.annotationsBuffer[e];if(s){s.length>0&&1===e&&this.parsingContext.emitError(new i.ErrorCoded("Annotations can not be made on top-level nodes",i.ERROR_CODES.INVALID_ANNOTATION));const t=this.parsingContext.getAnnotationsBufferSafe(e-1);for(const e of s)t.push(e);delete this.parsingContext.annotationsBuffer[e]}}async validateKey(e,t,n){for(const r of x.ENTRY_HANDLERS)if(await r.validate(this.parsingContext,this.util,e,t,n))return{valid:!0,property:n||r.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=e=>{const t=this.jsonParser.stack.length,n=new Array(t+1).fill(0).map((e,n)=>n===t?this.jsonParser.key:this.jsonParser.stack[n].key);if(!this.isParsingContextInner(t)){const r=()=>this.newOnValueJob(n,e,t,!0);if(this.parsingContext.streamingProfile||this.parsingContext.contextTree.getContext(n.slice(0,-1)))this.lastOnValueJob=this.lastOnValueJob.then(r);else if("@context"===n[t]){let e=this.contextJobs[t];e||(e=this.contextJobs[t]=[]),e.push(r)}else this.contextAwaitingJobs.push({job:r,keys:n,depth:t});this.parsingContext.streamingProfile||0!==t||(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=e=>{this.emit("error",e)}}isParsingContextInner(e){for(let t=e;t>0;t--)if("@context"===this.jsonParser.stack[t-1].key)return!0;return!1}async executeBufferedJobs(){for(const e of this.contextJobs)if(e)for(const t of e)await t();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const e=[];for(const t of this.contextAwaitingJobs)"@type"===await this.util.unaliasKeyword(t.keys[t.depth],t.keys,t.depth,!0)||"number"==typeof t.keys[t.depth]&&"@type"===await this.util.unaliasKeyword(t.keys[t.depth-1],t.keys,t.depth-1,!0)?this.typeJobs.push({job:t.job,keys:t.keys.slice(0,t.keys.length-1)}):e.push(t);for(const t of e){if(this.typeJobs.length>0){const e=[],n=[];for(let r=0;r<this.typeJobs.length;r++){const i=this.typeJobs[r];b.Util.isPrefixArray(i.keys,t.keys)&&(e.push(i),n.push(r))}const r=e.sort((e,t)=>e.keys.length-t.keys.length);for(const e of r)await e.job();const i=n.sort().reverse();for(const e of i)this.typeJobs.splice(e,1)}await t.job()}}}t.JsonLdParser=x,x.DEFAULT_PROCESSING_MODE="1.1",x.ENTRY_HANDLERS=[new s.EntryHandlerArrayValue,new u.EntryHandlerKeywordContext,new h.EntryHandlerKeywordId,new p.EntryHandlerKeywordIncluded,new d.EntryHandlerKeywordGraph,new f.EntryHandlerKeywordNest,new m.EntryHandlerKeywordType,new v.EntryHandlerKeywordValue,new _.EntryHandlerKeywordAnnotation,new a.EntryHandlerContainer,new g.EntryHandlerKeywordUnknownFallback,new c.EntryHandlerPredicate,new l.EntryHandlerInvalidFallback]},3099:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingContext=void 0;const r=n(2395),i=n(5094),o=n(4405),s=n(2277);class a{constructor(e){this.contextParser=new r.ContextParser({documentLoader:e.documentLoader,skipValidation:e.skipContextValidation}),this.streamingProfile=!!e.streamingProfile,this.baseIRI=e.baseIRI,this.produceGeneralizedRdf=!!e.produceGeneralizedRdf,this.allowSubjectList=!!e.allowSubjectList,this.processingMode=e.processingMode||s.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!e.strictValues,this.validateValueIndexes=!!e.validateValueIndexes,this.defaultGraph=e.defaultGraph,this.rdfDirection=e.rdfDirection,this.normalizeLanguageTags=e.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=e.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=!1!==e.rdfstar,this.rdfstarReverseInEmbedded=e.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new o.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=e.parser,e.context?(this.rootContext=this.parseContext(e.context),this.rootContext.then(e=>this.validateContext(e))):this.rootContext=Promise.resolve(new r.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(e,t,n){return this.contextParser.parse(e,{baseIRI:this.baseIRI,ignoreProtection:n,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:t,processingMode:this.activeProcessingMode})}validateContext(e){const t=e.getContextRaw()["@version"];if(t){if(this.activeProcessingMode&&t>this.activeProcessingMode)throw new i.ErrorCoded(`Unsupported JSON-LD version '${t}' under active processing mode ${this.activeProcessingMode}.`,i.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&t<this.activeProcessingMode)throw new i.ErrorCoded(`Invalid JSON-LD version ${t} under active processing mode ${this.activeProcessingMode}.`,i.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=t}}async getContext(e,t=1){const n=e;for(;"number"==typeof e[e.length-1];)e=e.slice(0,e.length-1);t&&(e=e.slice(0,-t));const i=await this.getContextPropagationAware(e);let o=i.context.getContextRaw();for(let e=i.depth;e<n.length-t;e++){const i=n[e],s=o[i];if(s&&"object"==typeof s&&"@context"in s){const a=(await this.parseContext(s,o,!0)).getContextRaw(),l=!(i in a)||a[i]["@context"]["@propagate"];!1===l&&e!==n.length-1-t||(o=Object.assign({},a),delete o["@propagate"],o[i]=Object.assign({},o[i]),"@id"in s&&(o[i]["@id"]=s["@id"]),delete o[i]["@context"],!1!==l&&this.contextTree.setContext(n.slice(0,e+t),Promise.resolve(new r.JsonLdContextNormalized(o))))}}return new r.JsonLdContextNormalized(o)}async getContextPropagationAware(e){const t=e.length;let n,i=null;do{n=!1,i&&"@__propagateFallback"in i.context.getContextRaw()?i.context=new r.JsonLdContextNormalized(i.context.getContextRaw()["@__propagateFallback"]):(i&&(e=e.slice(0,i.depth-1)),i=await this.contextTree.getContext(e)||{context:await this.rootContext,depth:0});const t=e[e.length-1];if(t in i.context.getContextRaw()){const e=i.context.getContextRaw()[t];e&&"object"==typeof e&&"@context"in e&&(n=!0)}}while(i.depth>0&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==t&&!n);return 0===i.depth&&!1===i.context.getContextRaw()["@propagate"]&&i.depth!==t&&(i.context=new r.JsonLdContextNormalized({})),i}async newOnValueJob(e,t,n,r){await this.parser.newOnValueJob(e,t,n,r)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const e of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(e.depth,e.keys),this.parser.flushStacks(e.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}return!1}emitQuad(e,t){1===e&&(this.topLevelProperties=!0),this.parser.push(t)}emitError(e){this.parser.emit("error",e)}emitContext(e){this.parser.emit("context",e)}getUnidentifiedValueBufferSafe(e){let t=this.unidentifiedValuesBuffer[e];return t||(t=[],this.unidentifiedValuesBuffer[e]=t),t}getUnidentifiedGraphBufferSafe(e){let t=this.unidentifiedGraphsBuffer[e];return t||(t=[],this.unidentifiedGraphsBuffer[e]=t),t}getAnnotationsBufferSafe(e){let t=this.annotationsBuffer[e];return t||(t=[],this.annotationsBuffer[e]=t),t}getExpandOptions(){return a.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(e,t){const n=this.idStack[e+t];if(n&&(this.idStack[e]=n,this.emittedStack[e]=!0,delete this.idStack[e+t]),this.pendingContainerFlushBuffers.length)for(const n of this.pendingContainerFlushBuffers)n.depth>=e+t&&(n.depth-=t,n.keys.splice(e,t));this.unidentifiedValuesBuffer[e+t]&&(this.unidentifiedValuesBuffer[e]=this.unidentifiedValuesBuffer[e+t],delete this.unidentifiedValuesBuffer[e+t]),this.annotationsBuffer[e+t-1]&&(this.annotationsBuffer[e-1]||(this.annotationsBuffer[e-1]=[]),this.annotationsBuffer[e-1]=[...this.annotationsBuffer[e-1],...this.annotationsBuffer[e+t-1]],delete this.annotationsBuffer[e+t-1])}}t.ParsingContext=a,a.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}},888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;const r=n(2395),i=n(7793),o=n(4860),s=n(2341);class a{constructor(e){this.parsingContext=e.parsingContext,this.dataFactory=e.dataFactory||new i.DataFactory,this.rdfFirst=this.dataFactory.namedNode(a.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(a.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(a.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(a.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(a.RDF+"JSON")}static getContextValue(e,t,n,r){const i=e.getContextRaw()[n];if(!i)return r;const o=i[t];return void 0===o?r:o}static getContextValueContainer(e,t){return a.getContextValue(e,"@container",t,{"@set":!0})}static getContextValueType(e,t){const n=a.getContextValue(e,"@type",t,null);return"@none"===n?null:n}static getContextValueLanguage(e,t){return a.getContextValue(e,"@language",t,e.getContextRaw()["@language"]||null)}static getContextValueDirection(e,t){return a.getContextValue(e,"@direction",t,e.getContextRaw()["@direction"]||null)}static isContextValueReverse(e,t){return!!a.getContextValue(e,"@reverse",t,null)}static getContextValueIndex(e,t){return a.getContextValue(e,"@index",t,e.getContextRaw()["@index"]||null)}static isPropertyReverse(e,t,n){return"@reverse"===n!==a.isContextValueReverse(e,t)}static isPropertyInEmbeddedNode(e){return"@id"===e}static isPropertyInAnnotationObject(e){return"@annotation"===e}static isValidIri(e){return null!==e&&r.Util.isValidIri(e)}static isPrefixArray(e,t){if(e.length>t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}async validateValueIndexes(e){if(this.parsingContext.validateValueIndexes){const t={};for(const n of e)if(n&&"object"==typeof n){const e=n["@id"],i=n["@index"];if(e&&i){const n=t[e];if(n&&n!==i)throw new r.ErrorCoded(`Conflicting @index value for ${e}`,r.ERROR_CODES.CONFLICTING_INDEXES);t[e]=i}}}}async valueToTerm(e,t,n,i,o){if("@json"===a.getContextValueType(e,t))return[this.dataFactory.literal(this.valueToJsonString(n),this.rdfJson)];const s=typeof n;switch(s){case"object":if(null==n)return[];if(Array.isArray(n))return"@list"in a.getContextValueContainer(e,t)?0===n.length?[this.rdfNil]:this.parsingContext.idStack[i+1]||[]:(await this.validateValueIndexes(n),[]);if(e=await this.getContextSelfOrPropertyScoped(e,t),"@context"in n&&(e=await this.parsingContext.parseContext(n["@context"],(await this.parsingContext.getContext(o,0)).getContextRaw())),"@value"in(n=await this.unaliasKeywords(n,o,i,e))){let s,a,l,c,u;for(t in n){const e=n[t];switch(t){case"@value":s=e;break;case"@language":a=e;break;case"@direction":l=e;break;case"@type":c=e;break;case"@index":u=e;break;case"@annotation":break;default:throw new r.ErrorCoded(`Unknown value entry '${t}' in @value: ${JSON.stringify(n)}`,r.ERROR_CODES.INVALID_VALUE_OBJECT)}}if("@json"===await this.unaliasKeyword(c,o,i,!0,e))return[this.dataFactory.literal(this.valueToJsonString(s),this.rdfJson)];if(null===s)return[];if("object"==typeof s)throw new r.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(s)}'`,r.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&u&&"string"!=typeof u)throw new r.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_INDEX_VALUE);if(a){if("string"!=typeof s)throw new r.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(s)}'`,r.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!r.ContextParser.validateLanguage(a,this.parsingContext.strictValues,r.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||1===this.parsingContext.activeProcessingMode)&&(a=a.toLowerCase())}if(l){if("string"!=typeof s)throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(s)}'`);if(!r.ContextParser.validateDirection(l,this.parsingContext.strictValues))return[]}if(a&&l){if(c)throw new r.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(n)}'`,r.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(i,s,a,l))}if(a){if(c)throw new r.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(n)}'`,r.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(s,a)]}if(l){if(c)throw new r.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(n)}'`,r.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(i,s,a,l))}if(c){if("string"!=typeof c)throw new r.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_TYPED_VALUE);const t=this.createVocabOrBaseTerm(e,c);if(!t)throw new r.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(c)}'`,r.ERROR_CODES.INVALID_TYPED_VALUE);if("NamedNode"!==t.termType)throw new r.ErrorCoded(`Illegal value type (${t.termType}): ${c}`,r.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(s,t)]}return await this.valueToTerm(new r.JsonLdContextNormalized({}),t,s,i,o)}if("@set"in n){if(Object.keys(n).length>1)throw new r.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${t}'`,r.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}if("@list"in n){if(Object.keys(n).length>1)throw new r.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${t}'`,r.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const e=n["@list"];return Array.isArray(e)?0===e.length?[this.rdfNil]:this.parsingContext.idStack[i+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(o),t,e,i-1,o.slice(0,-1))}if("@reverse"in n&&"boolean"==typeof n["@reverse"])return[];if("@graph"in a.getContextValueContainer(await this.parsingContext.getContext(o),t)){const e=this.parsingContext.graphContainerTermStack[i+1];return e?Object.values(e):[this.dataFactory.blankNode()]}if("@id"in n){if(Object.keys(n).length>1&&(e=await this.parsingContext.getContext(o,0)),"@context"in n&&(e=await this.parsingContext.parseContext(n["@context"],e.getContextRaw())),"@vocab"===n["@type"])return this.nullableTermToArray(this.createVocabOrBaseTerm(e,n["@id"]));{const t=n["@id"];let o;if("object"==typeof t){if(!this.parsingContext.rdfstar)throw new r.ErrorCoded(`Found illegal @id '${n}'`,r.ERROR_CODES.INVALID_ID_VALUE);o=this.parsingContext.idStack[i+1][0]}else o=this.resourceToTerm(e,t);return this.nullableTermToArray(o)}}return this.parsingContext.emittedStack[i+1]||n&&"object"==typeof n&&0===Object.keys(n).length?this.parsingContext.idStack[i+1]||(this.parsingContext.idStack[i+1]=[this.dataFactory.blankNode()]):[];case"string":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(e,t),t,n,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(e,t),t,Boolean(n).toString(),this.dataFactory.namedNode(a.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(i,await this.getContextSelfOrPropertyScoped(e,t),t,n,this.dataFactory.namedNode(n%1==0&&n<1e21?a.XSD_INTEGER:a.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${s}`)),[]}}async getContextSelfOrPropertyScoped(e,t){const n=e.getContextRaw()[t];return n&&"object"==typeof n&&"@context"in n&&(e=await this.parsingContext.parseContext(n,e.getContextRaw(),!0)),e}nullableTermToArray(e){return e?[e]:[]}predicateToTerm(e,t){const n=e.expandTerm(t,!0,this.parsingContext.getExpandOptions());return n?"_"===n[0]&&":"===n[1]?this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(n.substr(2)):null:a.isValidIri(n)?this.dataFactory.namedNode(n):n&&this.parsingContext.strictValues?(this.parsingContext.emitError(new r.ErrorCoded(`Invalid predicate IRI: ${n}`,r.ERROR_CODES.INVALID_IRI_MAPPING)),null):null:null}resourceToTerm(e,t){if(t.startsWith("_:"))return this.dataFactory.blankNode(t.substr(2));const n=e.expandTerm(t,!1,this.parsingContext.getExpandOptions());if(!a.isValidIri(n)){if(!n||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error(`Invalid resource IRI: ${n}`))}return this.dataFactory.namedNode(n)}createVocabOrBaseTerm(e,t){if(t.startsWith("_:"))return this.dataFactory.blankNode(t.substr(2));const n=this.parsingContext.getExpandOptions();let r=e.expandTerm(t,!0,n);if(r===t&&(r=e.expandTerm(t,!1,n)),!a.isValidIri(r)){if(!r||!this.parsingContext.strictValues||r.startsWith("@"))return null;this.parsingContext.emitError(new Error(`Invalid term IRI: ${r}`))}return this.dataFactory.namedNode(r)}intToString(e,t){if("number"==typeof e){if(Number.isFinite(e)){return!(e%1==0)||t&&t.value===a.XSD_DOUBLE?e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):Number(e).toString()}return e>0?"INF":"-INF"}return e}stringValueToTerm(e,t,n,r,i){const o=a.getContextValueType(t,n);if(o)if("@id"===o){if(!i)return this.resourceToTerm(t,this.intToString(r,i))}else if("@vocab"===o){if(!i)return this.createVocabOrBaseTerm(t,this.intToString(r,i))}else i=this.dataFactory.namedNode(o);if(!i){const o=a.getContextValueLanguage(t,n),s=a.getContextValueDirection(t,n);return s?this.createLanguageDirectionLiteral(e,this.intToString(r,i),o,s):this.dataFactory.literal(this.intToString(r,i),o)}return this.dataFactory.literal(this.intToString(r,i),i)}createLanguageDirectionLiteral(e,t,n,r){if("i18n-datatype"===this.parsingContext.rdfDirection)return n||(n=""),this.dataFactory.literal(t,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${n}_${r}`));if("compound-literal"===this.parsingContext.rdfDirection){const i=this.dataFactory.blankNode(),o=this.getDefaultGraph();return this.parsingContext.emitQuad(e,this.dataFactory.quad(i,this.dataFactory.namedNode(a.RDF+"value"),this.dataFactory.literal(t),o)),n&&this.parsingContext.emitQuad(e,this.dataFactory.quad(i,this.dataFactory.namedNode(a.RDF+"language"),this.dataFactory.literal(n),o)),this.parsingContext.emitQuad(e,this.dataFactory.quad(i,this.dataFactory.namedNode(a.RDF+"direction"),this.dataFactory.literal(r),o)),i}return this.dataFactory.literal(t,{language:n||"",direction:r})}valueToJsonString(e){return s(e)}async unaliasKeyword(e,t,n,i,o){if(Number.isInteger(e))return e;if(!i){const e=this.parsingContext.unaliasedKeywordCacheStack[n];if(e)return e}if(!r.Util.isPotentialKeyword(e)){let n=(o=o||await this.parsingContext.getContext(t)).getContextRaw()[e];n&&"object"==typeof n&&(n=n["@id"]),r.Util.isValidKeyword(n)&&(e=n)}return i?e:this.parsingContext.unaliasedKeywordCacheStack[n]=e}async unaliasKeywordParent(e,t){return await this.unaliasKeyword(t>0&&e[t-1],e,t-1)}async unaliasKeywords(e,t,n,r){const i={};for(const o in e)i[await this.unaliasKeyword(o,t,n+1,!0,r)]=e[o];return i}async isLiteral(e,t){for(let n=t;n>=0;n--){if("@annotation"===await this.unaliasKeyword(e[n],e,n))return!1;if(this.parsingContext.literalStack[n]||this.parsingContext.jsonLiteralStack[n])return!0}return!1}async getDepthOffsetGraph(e,t){for(let n=e-1;n>0;n--)if("@graph"===await this.unaliasKeyword(t[n],t,n)){const r=(await o.EntryHandlerContainer.getContainerHandler(this.parsingContext,t,n)).containers;return o.EntryHandlerContainer.isComplexGraphContainer(r)?-1:e-n-1}return-1}validateReverseSubject(e){if("Literal"===e.termType)throw new r.ErrorCoded(`Found illegal literal in subject position: ${e.value}`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(e,t){let n=this.getDefaultGraph();const{containers:r,depth:i}=await o.EntryHandlerContainer.getContainerHandler(this.parsingContext,e,t);if("@graph"in r){const t=o.EntryHandlerContainer.getContainerGraphIndex(r,i,e),s=this.parsingContext.graphContainerTermStack[i];if(n=s?s[t]:null,!n){let o=null;if("@id"in r){const t=await this.getContainerKey(e[i],e,i);null!==t&&(o=await this.resourceToTerm(await this.parsingContext.getContext(e),t))}o||(o=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[i]||(this.parsingContext.graphContainerTermStack[i]={}),n=this.parsingContext.graphContainerTermStack[i][t]=o}}return n}async getPropertiesDepth(e,t){let n=t;for(let r=t-1;r>0;r--)if("number"!=typeof e[r]){const t=await this.unaliasKeyword(e[r],e,r);if("@reverse"===t)return r;if("@nest"!==t)return n;n=r}return n}async getContainerKey(e,t,n){const r=await this.unaliasKeyword(e,t,n);return"@none"===r?null:r}validateReverseInEmbeddedNode(e,t,n){if(n&&t&&!this.parsingContext.rdfstarReverseInEmbedded)throw new r.ErrorCoded(`Illegal reverse property in embedded node in ${e}`,r.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(e,t,n,i,o,s,a){let l;if(s?(this.validateReverseSubject(i),l=this.dataFactory.quad(i,n,t,o)):l=this.dataFactory.quad(t,n,i,o),a){if("DefaultGraph"!==l.graph.termType&&(l=this.dataFactory.quad(l.subject,l.predicate,l.object)),this.parsingContext.idStack[e-1])throw new r.ErrorCoded("Illegal multiple properties in an embedded node",r.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[e-1]=[l]}else this.parsingContext.emitQuad(e,l);const c=this.parsingContext.annotationsBuffer[e];if(c){for(const t of c)this.emitAnnotation(e,l,t);delete this.parsingContext.annotationsBuffer[e]}}emitAnnotation(e,t,n){let r;n.reverse?(this.validateReverseSubject(n.object),r=this.dataFactory.quad(n.object,n.predicate,t)):r=this.dataFactory.quad(t,n.predicate,n.object),this.parsingContext.emitQuad(e,r);for(const t of n.nestedAnnotations)this.emitAnnotation(e,r,t)}}t.Util=a,a.XSD="http://www.w3.org/2001/XMLSchema#",a.XSD_BOOLEAN=a.XSD+"boolean",a.XSD_INTEGER=a.XSD+"integer",a.XSD_DOUBLE=a.XSD+"double",a.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#"},7986:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIdentifier=void 0;t.ContainerHandlerIdentifier=class{canCombineWithGraph(){return!0}async handle(e,t,n,r,i,o){let s;if(t.emittedStack[o+1]&&t.idStack[o+1])s=t.idStack[o+1][0];else{const e=null!==await n.getContainerKey(r[o],r,o)?await n.resourceToTerm(await t.getContext(r),r[o]):n.dataFactory.blankNode();if(!e)return void(t.emittedStack[o]=!1);s=e,t.idStack[o+1]=[s]}let a=t.idStack[o];a||(a=t.idStack[o]=[]),a.some(e=>e.equals(s))||a.push(s),await t.handlePendingContainerFlushBuffers()||(t.emittedStack[o]=!1)}}},1977:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerIndex=void 0;const r=n(2395),i=n(6970),o=n(888);t.ContainerHandlerIndex=class{canCombineWithGraph(){return!0}async handle(e,t,n,s,a,l){if(!Array.isArray(a)){const c="@graph"in e,u=await t.getContext(s),d=s[l-1],h=o.Util.getContextValueIndex(u,d);if(h){if(r.Util.isPotentialKeyword(h))throw new r.ErrorCoded(`Keywords can not be used as @index value, got: ${h}`,r.ERROR_CODES.INVALID_TERM_DEFINITION);if("string"!=typeof h)throw new r.ErrorCoded(`@index values must be strings, got: ${h}`,r.ERROR_CODES.INVALID_TERM_DEFINITION);if("object"!=typeof a){if("@id"!==o.Util.getContextValueType(u,d))throw new r.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${a}`,r.ERROR_CODES.INVALID_VALUE_OBJECT);const e=n.resourceToTerm(u,a);e&&(t.idStack[l+1]=[e])}const e=n.createVocabOrBaseTerm(u,h);if(e){const r=await n.valueToTerm(u,h,await n.getContainerKey(s[l],s,l),l,s);if(c){const i=await n.getGraphContainerValue(s,l+1);for(const o of r)t.emitQuad(l,n.dataFactory.quad(i,e,o,n.getDefaultGraph()))}else for(const o of r)await i.EntryHandlerPredicate.handlePredicateObject(t,n,s,l+1,e,o,!1,!1,!1)}}const p=c?2:1;await t.newOnValueJob(s.slice(0,s.length-p),a,l-p,!0),await t.handlePendingContainerFlushBuffers()}t.emittedStack[l]=!1}}},3847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerLanguage=void 0;const r=n(2395);t.ContainerHandlerLanguage=class{canCombineWithGraph(){return!1}async handle(e,t,n,i,o,s){const a=await n.getContainerKey(i[s],i,s);if(Array.isArray(o))o=o.map(e=>({"@value":e,"@language":a}));else{if("string"!=typeof o)throw new r.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(o)}', but expected string`,r.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);o={"@value":o,"@language":a}}await t.newOnValueJob(i.slice(0,i.length-1),o,s-1,!0),t.emittedStack[s]=!1}}},7229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerHandlerType=void 0;const r=n(6970),i=n(888);t.ContainerHandlerType=class{canCombineWithGraph(){return!1}async handle(e,t,n,o,s,a){if(!Array.isArray(s)){if("string"==typeof s){const e=await t.getContext(o),r="@vocab"===i.Util.getContextValueType(e,o[a-1])?await n.createVocabOrBaseTerm(e,s):await n.resourceToTerm(e,s);if(r){const e={"@id":"NamedNode"===r.termType?r.value:s};await t.newOnValueJob(o.slice(0,o.length-1),e,a-1,!0),t.idStack[a+1]=[r]}}else{const e=!!t.idStack[a+1];e||delete t.idStack[a],await t.newOnValueJob(o.slice(0,o.length-1),s,a-1,!0),e||(t.idStack[a+1]=t.idStack[a])}const e=await n.getContainerKey(o[a],o,a),l=null!==e?n.createVocabOrBaseTerm(await t.getContext(o),e):null;l&&await r.EntryHandlerPredicate.handlePredicateObject(t,n,o,a+1,n.rdfType,l,!1,!1,!1),await t.handlePendingContainerFlushBuffers()}t.emittedStack[a]=!1}}},9693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerArrayValue=void 0;const r=n(888),i=n(2395);t.EntryHandlerArrayValue=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,n,r,i){return this.test(e,t,null,n,r)}async test(e,t,n,r,i){return"number"==typeof r[i]}async handle(e,t,n,i,o,s){let a=await t.unaliasKeywordParent(i,s);if("@list"===a){let n=null,r=0;for(let e=s-2;e>0;e--){const t=i[e];if("string"==typeof t||"number"==typeof t){r=e,n=t;break}}if(null!==n){const a=await t.valueToTerm(await e.getContext(i),n,o,s,i);for(const n of a)await this.handleListElement(e,t,n,o,s,i.slice(0,r),r);0===a.length&&await this.handleListElement(e,t,null,o,s,i.slice(0,r),r)}}else if("@set"===a)await e.newOnValueJob(i.slice(0,-2),o,s-2,!1);else if(void 0!==a&&"@type"!==a){for(let e=s-1;e>0;e--)if("number"!=typeof i[e]){a=await t.unaliasKeyword(i[e],i,e);break}const n=await e.getContext(i.slice(0,-1));if("@list"in r.Util.getContextValueContainer(n,a)){e.emittedStack[s+1]=!0;const n=await t.valueToTerm(await e.getContext(i),a,o,s,i);for(const r of n)await this.handleListElement(e,t,r,o,s,i.slice(0,-1),s-1);0===n.length&&await this.handleListElement(e,t,null,o,s,i.slice(0,-1),s-1)}else e.shiftStack(s,1),await e.newOnValueJob(i.slice(0,-1),o,s-1,!1),e.contextTree.removeContext(i.slice(0,-1))}}async handleListElement(e,t,n,r,o,s,a){let l=e.listPointerStack[o];if(null!==r&&null!==(await t.unaliasKeywords(r,s,o))["@value"]){if(l&&l.value){const n=t.dataFactory.blankNode();e.emitQuad(o,t.dataFactory.quad(l.value,t.rdfRest,n,t.getDefaultGraph())),l.value=n}else{const e=t.dataFactory.blankNode();l={value:e,listRootDepth:a,listId:e}}n&&e.emitQuad(o,t.dataFactory.quad(l.value,t.rdfFirst,n,t.getDefaultGraph()))}else l||(l={listRootDepth:a,listId:t.rdfNil});e.listPointerStack[o]=l,e.rdfstar&&e.annotationsBuffer[o]&&e.emitError(new i.ErrorCoded("Found an illegal annotation inside a list",i.ERROR_CODES.INVALID_ANNOTATION))}}},4860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerContainer=void 0;const r=n(7986),i=n(1977),o=n(3847),s=n(7229),a=n(888);class l{static isSimpleGraphContainer(e){return"@graph"in e&&("@set"in e&&2===Object.keys(e).length||1===Object.keys(e).length)}static isComplexGraphContainer(e){return"@graph"in e&&("@set"in e&&Object.keys(e).length>2||!("@set"in e)&&Object.keys(e).length>1)}static getContainerGraphIndex(e,t,n){let r=l.isSimpleGraphContainer(e),i="";for(let e=t;e<n.length;e++)r&&"number"!=typeof n[e]||(i+=":"+n[e]),r||"number"==typeof n[e]||(r=!0);return i}static async getContainerHandler(e,t,n){const r={containers:{"@set":!0},depth:n,fallback:!0};let i=!1;const o=await e.getContext(t,2);for(let e=n-1;e>=0;e--)if("number"!=typeof t[e]){const n=a.Util.getContextValue(o,"@container",t[e],!1);if(n&&l.isSimpleGraphContainer(n))return{containers:n,depth:e+1,fallback:!1};const s=a.Util.getContextValue(o,"@container",t[e-1],!1);if(s){const t="@graph"in s;for(const n in l.CONTAINER_HANDLERS)if(s[n])return t?l.CONTAINER_HANDLERS[n].canCombineWithGraph()?{containers:s,depth:e,fallback:!1}:r:i?r:{containers:s,depth:e,fallback:!1};return r}if(i)return r;i=!0}return r}static async isBufferableContainerHandler(e,t,n){const r=await l.getContainerHandler(e,t,n);return!r.fallback&&!("@graph"in r.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,n,r,i){return!!await this.test(e,t,null,n,r)}async test(e,t,n,r,i){const o=a.Util.getContextValueContainer(await e.getContext(r,2),r[i-1]);for(const e in l.CONTAINER_HANDLERS)if(o[e])return{containers:o,handler:l.CONTAINER_HANDLERS[e]};return null}async handle(e,t,n,r,i,o,s){return s.handler.handle(s.containers,e,t,r,i,o)}}t.EntryHandlerContainer=l,l.CONTAINER_HANDLERS={"@id":new r.ContainerHandlerIdentifier,"@index":new i.ContainerHandlerIndex,"@language":new o.ContainerHandlerLanguage,"@type":new s.ContainerHandlerType}},2386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerInvalidFallback=void 0;t.EntryHandlerInvalidFallback=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,n,r,i){return!1}async test(e,t,n,r,i){return!0}async handle(e,t,n,r,i,o){e.emittedStack[o]=!1}}},6970:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerPredicate=void 0;const r=n(2395),i=n(888);class o{static async handlePredicateObject(e,t,n,i,o,s,a,l,c){const u=await t.getPropertiesDepth(n,i),d=await t.getDepthOffsetGraph(i,n),h=i-d,p=e.idStack[u];if(p&&!c)for(const r of p){if(d>=0){const n=e.idStack[h-1];if(n)for(const e of n)t.emitQuadChecked(i,r,o,s,e,a,l);else a?(t.validateReverseSubject(s),e.getUnidentifiedGraphBufferSafe(h-1).push({subject:s,predicate:o,object:r,isEmbedded:l})):e.getUnidentifiedGraphBufferSafe(h-1).push({subject:r,predicate:o,object:s,isEmbedded:l})}else{const e=await t.getGraphContainerValue(n,u);t.emitQuadChecked(i,r,o,s,e,a,l)}}else if(a&&t.validateReverseSubject(s),c){if(e.rdfstar){e.idStack[i]&&e.emitError(new r.ErrorCoded(`Found an illegal @id inside an annotation: ${e.idStack[i][0].value}`,r.ERROR_CODES.INVALID_ANNOTATION));for(let o=0;o<i;o++)"@id"===await t.unaliasKeyword(n[o],n,o)&&e.emitError(new r.ErrorCoded("Found an illegal annotation inside an embedded node",r.ERROR_CODES.INVALID_ANNOTATION));const l=e.getAnnotationsBufferSafe(u),c={predicate:o,object:s,reverse:a,nestedAnnotations:[],depth:u};l.push(c);for(let e=l.length-2;e>=0;e--){const t=l[e];t.depth>u&&(c.nestedAnnotations.push(t),l.splice(e,1))}}}else e.getUnidentifiedValueBufferSafe(u).push({predicate:o,object:s,reverse:a,isEmbedded:l})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(e,t,n,r,o){const s=n[r];if(s){const o=await e.getContext(n);if(!e.jsonLiteralStack[r]&&await t.predicateToTerm(o,n[r]))return"@json"===i.Util.getContextValueType(o,s)&&(e.jsonLiteralStack[r+1]=!0),!0}return!1}async test(e,t,n,r,i){return r[i]}async handle(e,t,n,s,a,l,c){const u=s[l],d=await e.getContext(s),h=await t.predicateToTerm(d,n);if(h){const c=await t.valueToTerm(d,n,a,l,s);if(c.length)for(let p of c){let c=await t.unaliasKeywordParent(s,l);const f=i.Util.isPropertyReverse(d,u,c);let m=0;for(;"@reverse"===c||"number"==typeof c;)"number"==typeof c?m++:l--,c=await t.unaliasKeywordParent(s,l-m);const g=i.Util.isPropertyInEmbeddedNode(c);t.validateReverseInEmbeddedNode(n,f,g);const v=i.Util.isPropertyInAnnotationObject(c);if(a){const o="@list"in i.Util.getContextValueContainer(d,n);if(o||a["@list"]){if((o&&!Array.isArray(a)&&!a["@list"]||a["@list"]&&!Array.isArray(a["@list"]))&&p!==t.rdfNil){const n=t.dataFactory.blankNode();e.emitQuad(l,t.dataFactory.quad(n,t.rdfRest,t.rdfNil,t.getDefaultGraph())),e.emitQuad(l,t.dataFactory.quad(n,t.rdfFirst,p,t.getDefaultGraph())),p=n}if(f&&!e.allowSubjectList)throw new r.ErrorCoded(`Found illegal list value in subject position at ${n}`,r.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await o.handlePredicateObject(e,t,s,l,h,p,f,g,v)}}}}t.EntryHandlerPredicate=o},1548:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeyword=void 0;t.EntryHandlerKeyword=class{constructor(e){this.keyword=e}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,n,r,i){return!1}async test(e,t,n,r,i){return n===this.keyword}}},6105:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordAnnotation=void 0;const r=n(1548),i=n(2395);class o extends r.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(e,t,n,r,o,s){("string"==typeof o||"object"==typeof o&&o["@value"])&&e.emitError(new i.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(o)}`,i.ERROR_CODES.INVALID_ANNOTATION))}}t.EntryHandlerKeywordAnnotation=o},3809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordContext=void 0;const r=n(2395),i=n(1548);class o extends i.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(e,t,n,i,o,s){e.streamingProfile&&(e.processingStack[s]||e.processingType[s]||void 0!==e.idStack[s])&&e.emitError(new r.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",r.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const a=e.getContext(i),l=e.parseContext(o,(await a).getContextRaw());e.contextTree.setContext(i.slice(0,-1),l),e.emitContext(o),await e.validateContext(await l)}}t.EntryHandlerKeywordContext=o},5998:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordGraph=void 0;const r=n(1548);class i extends r.EntryHandlerKeyword{constructor(){super("@graph")}async handle(e,t,n,r,i,o){e.graphStack[o+1]=!0}}t.EntryHandlerKeywordGraph=i},5517:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordId=void 0;const r=n(2395),i=n(1548);class o extends i.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(e,t,n,i,o,s){if("string"!=typeof o){if(e.rdfstar&&"object"==typeof o){const t=Object.keys(o);1===t.length&&"@id"===t[0]&&e.emitError(new r.ErrorCoded(`Invalid embedded node without property with @id ${o["@id"]}`,r.ERROR_CODES.INVALID_EMBEDDED_NODE))}else e.emitError(new r.ErrorCoded(`Found illegal @id '${o}'`,r.ERROR_CODES.INVALID_ID_VALUE));return}const a=await t.getPropertiesDepth(i,s);if(void 0!==e.idStack[a]&&(e.idStack[a][0].listHead?e.emitError(new r.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${i[s-1]}'`,r.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):e.emitError(new r.ErrorCoded(`Found duplicate @ids '${e.idStack[a][0].value}' and '${o}'`,r.ERROR_CODES.COLLIDING_KEYWORDS))),e.rdfstar&&e.annotationsBuffer[s])for(const t of e.annotationsBuffer[s])t.depth===s&&e.emitError(new r.ErrorCoded(`Found an illegal @id inside an annotation: ${o}`,r.ERROR_CODES.INVALID_ANNOTATION));e.idStack[a]=t.nullableTermToArray(await t.resourceToTerm(await e.getContext(i),o))}}t.EntryHandlerKeywordId=o},736:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordIncluded=void 0;const r=n(2395),i=n(1548);class o extends i.EntryHandlerKeyword{constructor(){super("@included")}async handle(e,t,n,i,o,s){"object"!=typeof o&&e.emitError(new r.ErrorCoded(`Found illegal @included '${o}'`,r.ERROR_CODES.INVALID_INCLUDED_VALUE));const a=await t.unaliasKeywords(o,i,s,await e.getContext(i));"@value"in a&&e.emitError(new r.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(o)}'`,r.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in a&&e.emitError(new r.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(o)}'`,r.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.emittedStack[s]=!1}}t.EntryHandlerKeywordIncluded=o},4910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordNest=void 0;const r=n(2395),i=n(1548);class o extends i.EntryHandlerKeyword{constructor(){super("@nest")}async handle(e,t,n,i,o,s){"object"!=typeof o&&e.emitError(new r.ErrorCoded(`Found invalid @nest entry for '${n}': '${o}'`,r.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await t.unaliasKeywords(o,i,s,await e.getContext(i))&&e.emitError(new r.ErrorCoded(`Found an invalid @value node for '${n}'`,r.ERROR_CODES.INVALID_NEST_VALUE)),e.emittedStack[s]=!1}}t.EntryHandlerKeywordNest=o},2036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordType=void 0;const r=n(2395),i=n(888),o=n(6970),s=n(1548);class a extends s.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(e,t,n,s,a,l){const c=s[l],u=await e.getContext(s),d=t.rdfType,h=await t.unaliasKeywordParent(s,l),p=i.Util.isPropertyReverse(u,c,h),f=i.Util.isPropertyInEmbeddedNode(h);t.validateReverseInEmbeddedNode(n,p,f);const m=i.Util.isPropertyInAnnotationObject(h),g=Array.isArray(a)?a:[a];for(const n of g){"string"!=typeof n&&e.emitError(new r.ErrorCoded(`Found illegal @type '${n}'`,r.ERROR_CODES.INVALID_TYPE_VALUE));const i=t.createVocabOrBaseTerm(u,n);i&&await o.EntryHandlerPredicate.handlePredicateObject(e,t,s,l,d,i,p,f,m)}let v=Promise.resolve(u),y=!1;for(const t of g.sort()){const n=i.Util.getContextValue(u,"@context",t,null);n&&(y=!0,v=v.then(t=>e.parseContext(n,t.getContextRaw())))}!e.streamingProfile||!y&&e.streamingProfileAllowOutOfOrderPlainType||!e.processingStack[l]&&!e.idStack[l]||e.emitError(new r.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",r.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),y&&(v=v.then(e=>!0!==e.getContextRaw()["@propagate"]?new r.JsonLdContextNormalized(Object.assign(Object.assign({},e.getContextRaw()),{"@propagate":!1,"@__propagateFallback":u.getContextRaw()})):e),e.contextTree.setContext(s.slice(0,s.length-1),v)),e.processingType[l]=!0}}t.EntryHandlerKeywordType=a},6454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordUnknownFallback=void 0;const r=n(2395);class i{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(e,t,n,i,o){const s=await t.unaliasKeyword(n[i],n,i);return!!r.Util.isPotentialKeyword(s)&&!(!o&&"@list"===s)}async test(e,t,n,i,o){return r.Util.isPotentialKeyword(n)}async handle(e,t,n,o,s,a){const l=i.VALID_KEYWORDS_TYPES[n];void 0!==l?l&&typeof s!==l.type&&e.emitError(new r.ErrorCoded(`Invalid value type for '${n}' with value '${s}'`,l.errorCode)):e.strictValues&&e.emitError(new Error(`Unknown keyword '${n}' with value '${s}'`)),e.emittedStack[a]=!1}}t.EntryHandlerKeywordUnknownFallback=i,i.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:r.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:r.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null}},3283:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryHandlerKeywordValue=void 0;const r=n(1548);class i extends r.EntryHandlerKeyword{constructor(){super("@value")}async validate(e,t,n,r,i){const o=n[r];return o&&!e.literalStack[r]&&await this.test(e,t,o,n,r)&&(e.literalStack[r]=!0),super.validate(e,t,n,r,i)}async test(e,t,n,r,i){return"@value"===await t.unaliasKeyword(r[i],r.slice(0,r.length-1),i-1,!0)}async handle(e,t,n,r,i,o){e.literalStack[o]=!0,delete e.unidentifiedValuesBuffer[o],delete e.unidentifiedGraphsBuffer[o],e.emittedStack[o]=!1}}t.EntryHandlerKeywordValue=i},7034:(e,t,n)=>{"use strict";const{isArray:r,isObject:i,isString:o}=n(5001),{asArray:s}=n(9263),{prependBase:a}=n(470),l=n(2207),c=n(7532);function u(e){throw new l("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function d({context:e,base:t}){if(!e)return;const n=e["@context"];if(o(n))e["@context"]=a(t,n);else if(r(n))for(let e=0;e<n.length;++e){const r=n[e];o(r)?n[e]=a(t,r):i(r)&&d({context:{"@context":r},base:t})}else if(i(n))for(const e in n)d({context:n[e],base:t})}e.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:n,base:a,cycles:l=new Set}){t&&i(t)&&t["@context"]&&(t=t["@context"]),t=s(t);const d=[];for(const s of t){if(o(s)){let t=this._get(s);t||(t=await this._resolveRemoteContext({activeCtx:e,url:s,documentLoader:n,base:a,cycles:l})),r(t)?d.push(...t):d.push(t);continue}if(null===s){d.push(new c({document:null}));continue}i(s)||u(t);const h=JSON.stringify(s);let p=this._get(h);p||(p=new c({document:s}),this._cacheResolvedContext({key:h,resolved:p,tag:"static"})),d.push(p)}return d}_get(e){let t=this.perOpCache.get(e);if(!t){const n=this.sharedCache.get(e);n&&(t=n.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:n}){if(this.perOpCache.set(e,t),void 0!==n){let r=this.sharedCache.get(e);r||(r=new Map,this.sharedCache.set(e,r)),r.set(n,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:n,base:r,cycles:i}){t=a(r,t);const{context:o,remoteDoc:s}=await this._fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:i});d({context:o,base:r=s.documentUrl||t});const l=await this.resolve({activeCtx:e,context:o,documentLoader:n,base:r,cycles:i});return this._cacheResolvedContext({key:t,resolved:l,tag:s.tag}),l}async _fetchContext({activeCtx:e,url:t,documentLoader:n,cycles:s}){if(s.size>10)throw new l("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(s.has(t))throw new l("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let a,c;s.add(t);try{c=await n(t),a=c.document||null,o(a)&&(a=JSON.parse(a))}catch(e){throw new l(`Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context. URL: "${t}".`,"jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!i(a))throw new l(`Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object. URL: "${t}".`,"jsonld.InvalidUrl",{code:"invalid remote context",url:t});return a="@context"in a?{"@context":a["@context"]}:{"@context":{}},c.contextUrl&&(r(a["@context"])||(a["@context"]=[a["@context"]]),a["@context"].push(c.contextUrl)),{context:a,remoteDoc:c}}}},2207:e=>{"use strict";e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},5445:e=>{"use strict";e.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},8229:(e,t,n)=>{"use strict";e.exports=n(989).NQuads},3743:e=>{"use strict";e.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}},7532:(e,t,n)=>{"use strict";const r=n(6575);e.exports=class{constructor({document:e}){this.document=e,this.cache=new r({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},1058:(e,t,n)=>{"use strict";const r=n(2207),{isArray:i,isObject:o,isString:s,isUndefined:a}=n(5001),{isList:l,isValue:c,isGraph:u,isSimpleGraph:d,isSubjectReference:h}=n(3978),{expandIri:p,getContextValue:f,isKeyword:m,process:g,processingMode:v}=n(1972),{removeBase:y,prependBase:b}=n(470),{REGEX_KEYWORD:w,addValue:_,asArray:x,compareShortestLeast:S}=n(9263),C={};function k(e,t,n){if("@nest"!==p(e,t,{vocab:!0},n))throw new r("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=C,C.compact=async({activeCtx:e,activeProperty:t=null,element:n,options:p={}})=>{if(i(n)){let r=[];for(let i=0;i<n.length;++i){const o=await C.compact({activeCtx:e,activeProperty:t,element:n[i],options:p});null!==o&&r.push(o)}if(p.compactArrays&&1===r.length){0===(f(e,t,"@container")||[]).length&&(r=r[0])}return r}const y=f(e,t,"@context");if(a(y)||(e=await g({activeCtx:e,localCtx:y,propagate:!0,overrideProtected:!0,options:p})),o(n)){if(p.link&&"@id"in n&&p.link.hasOwnProperty(n["@id"])){const e=p.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(c(n)||h(n)){const r=C.compactValue({activeCtx:e,activeProperty:t,value:n,options:p});return p.link&&h(n)&&(p.link.hasOwnProperty(n["@id"])||(p.link[n["@id"]]=[]),p.link[n["@id"]].push({expanded:n,compacted:r})),r}if(l(n)){if((f(e,t,"@container")||[]).includes("@list"))return C.compact({activeCtx:e,activeProperty:t,element:n["@list"],options:p})}const y="@reverse"===t,b={},w=e;c(n)||h(n)||(e=e.revertToPreviousContext());const S=f(w,t,"@context");a(S)||(e=await g({activeCtx:e,localCtx:S,propagate:!0,overrideProtected:!0,options:p})),p.link&&"@id"in n&&(p.link.hasOwnProperty(n["@id"])||(p.link[n["@id"]]=[]),p.link[n["@id"]].push({expanded:n,compacted:b}));let E=n["@type"]||[];E.length>1&&(E=Array.from(E).sort());const A=e;for(const t of E){const n=C.compactIri({activeCtx:A,iri:t,relativeTo:{vocab:!0}}),r=f(w,n,"@context");a(r)||(e=await g({activeCtx:e,localCtx:r,options:p,propagate:!1}))}const T=Object.keys(n).sort();for(const a of T){const h=n[a];if("@id"===a){let t=x(h).map(t=>C.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:p.base}));1===t.length&&(t=t[0]);b[C.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t;continue}if("@type"===a){let t=x(h).map(e=>C.compactIri({activeCtx:w,iri:e,relativeTo:{vocab:!0}}));1===t.length&&(t=t[0]);const n=C.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),r=(f(e,n,"@container")||[]).includes("@set")&&v(e,1.1)||i(t)&&0===h.length;_(b,n,t,{propertyIsArray:r});continue}if("@reverse"===a){const t=await C.compact({activeCtx:e,activeProperty:"@reverse",element:h,options:p});for(const n in t)if(e.mappings.has(n)&&e.mappings.get(n).reverse){const r=t[n],i=(f(e,n,"@container")||[]).includes("@set")||!p.compactArrays;_(b,n,r,{propertyIsArray:i}),delete t[n]}if(Object.keys(t).length>0){const n=C.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});_(b,n,t)}continue}if("@preserve"===a){const n=await C.compact({activeCtx:e,activeProperty:t,element:h,options:p});i(n)&&0===n.length||_(b,a,n);continue}if("@index"===a){if((f(e,t,"@container")||[]).includes("@index"))continue;const n=C.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});_(b,n,h);continue}if("@graph"!==a&&"@list"!==a&&"@included"!==a&&m(a)){const t=C.compactIri({activeCtx:e,iri:a,relativeTo:{vocab:!0}});_(b,t,h);continue}if(!i(h))throw new r("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===h.length){const t=C.compactIri({activeCtx:e,iri:a,value:h,relativeTo:{vocab:!0},reverse:y}),n=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let r=b;n&&(k(e,n,p),o(b[n])||(b[n]={}),r=b[n]),_(r,t,h,{propertyIsArray:!0})}for(const t of h){const n=C.compactIri({activeCtx:e,iri:a,value:t,relativeTo:{vocab:!0},reverse:y}),r=e.mappings.has(n)?e.mappings.get(n)["@nest"]:null;let h=b;r&&(k(e,r,p),o(b[r])||(b[r]={}),h=b[r]);const m=f(e,n,"@container")||[],g=u(t),v=l(t);let w;v?w=t["@list"]:g&&(w=t["@graph"]);let S=await C.compact({activeCtx:e,activeProperty:n,element:v||g?w:t,options:p});if(v){if(i(S)||(S=[S]),m.includes("@list")){_(h,n,S,{valueIsArray:!0,allowDuplicate:!0});continue}S={[C.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:S},"@index"in t&&(S[C.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(g)if(m.includes("@graph")&&(m.includes("@id")||m.includes("@index")&&d(t))){let r;h.hasOwnProperty(n)?r=h[n]:h[n]=r={};const i=(m.includes("@id")?t["@id"]:t["@index"])||C.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});_(r,i,S,{propertyIsArray:!p.compactArrays||m.includes("@set")})}else m.includes("@graph")&&d(t)?(i(S)&&S.length>1&&(S={"@included":S}),_(h,n,S,{propertyIsArray:!p.compactArrays||m.includes("@set")})):(i(S)&&1===S.length&&p.compactArrays&&(S=S[0]),S={[C.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:S},"@id"in t&&(S[C.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(S[C.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),_(h,n,S,{propertyIsArray:!p.compactArrays||m.includes("@set")}));else if(m.includes("@language")||m.includes("@index")||m.includes("@id")||m.includes("@type")){let r,i;if(h.hasOwnProperty(n)?r=h[n]:h[n]=r={},m.includes("@language"))c(S)&&(S=S["@value"]),i=t["@language"];else if(m.includes("@index")){const r=f(e,n,"@index")||"@index",o=C.compactIri({activeCtx:e,iri:r,relativeTo:{vocab:!0}});if("@index"===r)i=t["@index"],delete S[o];else{let e;if([i,...e]=x(S[r]||[]),s(i))switch(e.length){case 0:delete S[r];break;case 1:S[r]=e[0];break;default:S[r]=e}else i=null}}else if(m.includes("@id")){const t=C.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});i=S[t],delete S[t]}else if(m.includes("@type")){const r=C.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let o;switch([i,...o]=x(S[r]||[]),o.length){case 0:delete S[r];break;case 1:S[r]=o[0];break;default:S[r]=o}1===Object.keys(S).length&&"@id"in t&&(S=await C.compact({activeCtx:e,activeProperty:n,element:{"@id":t["@id"]},options:p}))}i||(i=C.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),_(r,i,S,{propertyIsArray:m.includes("@set")})}else{const e=!p.compactArrays||m.includes("@set")||m.includes("@list")||i(S)&&0===S.length||"@list"===a||"@graph"===a;_(h,n,S,{propertyIsArray:e})}}}return b}return n},C.compactIri=({activeCtx:e,iri:t,value:n=null,relativeTo:i={vocab:!1},reverse:s=!1,base:a=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const d=e.getInverse();if(m(t)&&t in d&&"@none"in d[t]&&"@type"in d[t]["@none"]&&"@none"in d[t]["@none"]["@type"])return d[t]["@none"]["@type"]["@none"];if(i.vocab&&t in d){const r=e["@language"]||"@none",i=[];o(n)&&"@index"in n&&!("@graph"in n)&&i.push("@index","@index@set"),o(n)&&"@preserve"in n&&(n=n["@preserve"][0]),u(n)?("@index"in n&&i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&i.push("@graph@id","@graph@id@set"),i.push("@graph","@graph@set","@set"),"@index"in n||i.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||i.push("@graph@id","@graph@id@set")):o(n)&&!c(n)&&i.push("@id","@id@set","@type","@set@type");let a="@language",d="@null";if(s)a="@type",d="@reverse",i.push("@set");else if(l(n)){"@index"in n||i.push("@list");const e=n["@list"];if(0===e.length)a="@any",d="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const i=e[r];let o="@none",s="@none";if(c(i))if("@direction"in i){o=`${(i["@language"]||"").toLowerCase()}_${i["@direction"]}`}else"@language"in i?o=i["@language"].toLowerCase():"@type"in i?s=i["@type"]:o="@null";else s="@id";if(null===t?t=o:o!==t&&c(i)&&(t="@none"),null===n?n=s:s!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none",n=n||"@none","@none"!==n?(a="@type",d=n):d=t}}else{if(c(n))if("@language"in n&&!("@index"in n)){i.push("@language","@language@set"),d=n["@language"];const e=n["@direction"];e&&(d=`${d}_${e}`)}else"@direction"in n&&!("@index"in n)?d=`_${n["@direction"]}`:"@type"in n&&(a="@type",d=n["@type"]);else a="@type",d="@id";i.push("@set")}i.push("@none"),o(n)&&!("@index"in n)&&i.push("@index","@index@set"),c(n)&&1===Object.keys(n).length&&i.push("@language","@language@set");const h=function(e,t,n,r,i,s){null===s&&(s="@null");const a=[];if(("@id"===s||"@reverse"===s)&&o(n)&&"@id"in n){"@reverse"===s&&a.push("@reverse");const t=C.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===n["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}else{a.push(s);const e=a.find(e=>e.includes("_"));e&&a.push(e.replace(/^[^_]+_/,"_"))}a.push("@none");const l=e.inverse[t];for(const e of r){if(!(e in l))continue;const t=l[e][i];for(const e of a)if(e in t)return t[e]}return null}(e,t,n,i,a,d);if(null!==h)return h}if(i.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!e.mappings.has(r))return r}}let h=null;const p=[];let f=e.fastCurieMap;const g=t.length-1;for(let e=0;e<g&&t[e]in f;++e)f=f[t[e]],""in f&&p.push(f[""][0]);for(let r=p.length-1;r>=0;--r){const i=p[r],o=i.terms;for(const r of o){const o=r+":"+t.substr(i.iri.length);e.mappings.get(r)._prefix&&(!e.mappings.has(o)||null===n&&e.mappings.get(o)["@id"]===t)&&(null===h||S(o,h)<0)&&(h=o)}}if(null!==h)return h;for(const[n,i]of e.mappings)if(i&&i._prefix&&t.startsWith(n+":"))throw new r(`Absolute IRI "${t}" confused with prefix "${n}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});if(!i.vocab){if("@base"in e){if(e["@base"]){const n=y(b(a,e["@base"]),t);return w.test(n)?`./${n}`:n}return t}return y(a,t)}return t},C.compactValue=({activeCtx:e,activeProperty:t,value:n,options:r})=>{if(c(n)){const r=f(e,t,"@type"),i=f(e,t,"@language"),o=f(e,t,"@direction"),a=f(e,t,"@container")||[],l="@index"in n&&!a.includes("@index");if(!l&&"@none"!==r){if(n["@type"]===r)return n["@value"];if("@language"in n&&n["@language"]===i&&"@direction"in n&&n["@direction"]===o)return n["@value"];if("@language"in n&&n["@language"]===i)return n["@value"];if("@direction"in n&&n["@direction"]===o)return n["@value"]}const c=Object.keys(n).length,u=1===c||2===c&&"@index"in n&&!l,d="@language"in e,h=s(n["@value"]),p=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(u&&"@none"!==r&&(!d||!h||p))return n["@value"];const m={};return l&&(m[C.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?m[C.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=C.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(m[C.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),"@direction"in n&&(m[C.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=n["@direction"]),m[C.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],m}const i=p(e,t,{vocab:!0},r),o=f(e,t,"@type"),a=C.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===o},base:r.base});return"@id"===o||"@vocab"===o||"@graph"===i?a:{[C.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:a}}},9378:e=>{"use strict";const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:n,XSD_BOOLEAN:n+"boolean",XSD_DOUBLE:n+"double",XSD_INTEGER:n+"integer",XSD_STRING:n+"string"}},1972:(e,t,n)=>{"use strict";const r=n(9263),i=n(2207),{isArray:o,isObject:s,isString:a,isUndefined:l}=n(5001),{isAbsolute:c,isRelative:u,prependBase:d}=n(470),{handleEvent:h}=n(2246),{REGEX_BCP47:p,REGEX_KEYWORD:f,asArray:m,compareShortestLeast:g}=n(9263),v=new Map,y={};function b(e,t,n,r,i,o){if(null===t||!a(t)||y.isKeyword(t))return t;if(t.match(f))return null;if(r&&r.hasOwnProperty(t)&&!0!==i.get(t)&&y.createTermDefinition({activeCtx:e,localCtx:r,term:t,defined:i,options:o}),(n=n||{}).vocab){const n=e.mappings.get(t);if(null===n)return null;if(s(n)&&"@id"in n)return n["@id"]}const l=t.indexOf(":");if(l>0){const n=t.substr(0,l),s=t.substr(l+1);if("_"===n||0===s.indexOf("//"))return t;r&&r.hasOwnProperty(n)&&y.createTermDefinition({activeCtx:e,localCtx:r,term:n,defined:i,options:o});const a=e.mappings.get(n);if(a&&a._prefix)return a["@id"]+s;if(c(t))return t}if(n.vocab&&"@vocab"in e){t=e["@vocab"]+t}else if(n.base){let n,r;"@base"in e?e["@base"]?(r=d(o.base,e["@base"]),n=d(r,t)):(r=e["@base"],n=t):(r=o.base,n=d(o.base,t)),t=n}return t}function w(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const n=Array.isArray(e);if(n!==Array.isArray(t))return!1;if(n){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!w(e[n],t[n]))return!1;return!0}const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const n in e){let r=e[n],i=t[n];if("@container"===n&&Array.isArray(r)&&Array.isArray(i)&&(r=r.slice().sort(),i=i.slice().sort()),!w(r,i))return!1}return!0}e.exports=y,y.process=async({activeCtx:e,localCtx:t,options:n,propagate:r=!0,overrideProtected:l=!1,cycles:f=new Set})=>{s(t)&&"@context"in t&&o(t["@context"])&&(t=t["@context"]);if(0===m(t).length)return e;const g=[],v=[({event:e,next:t})=>{g.push(e),t()}];n.eventHandler&&v.push(n.eventHandler);const w=n;n={...n,eventHandler:v};const _=await n.contextResolver.resolve({activeCtx:e,context:t,documentLoader:n.documentLoader,base:n.base});s(_[0].document)&&"boolean"==typeof _[0].document["@propagate"]&&(r=_[0].document["@propagate"]);let x=e;r||x.previousContext||(x=x.clone(),x.previousContext=e);for(const r of _){let{document:o}=r;if(e=x,null===o){if(!l&&0!==Object.keys(e.protected).length)throw new i("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});x=e=y.getInitialContext(n).clone();continue}const m=r.getProcessed(e);if(m){if(w.eventHandler)for(const e of m.events)h({event:e,options:w});x=e=m.context;continue}if(s(o)&&"@context"in o&&(o=o["@context"]),!s(o))throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:o});x=x.clone();const v=new Map;if("@version"in o){if(1.1!==o["@version"])throw new i("Unsupported JSON-LD version: "+o["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:o});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new i("@version: "+o["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:o});x.processingMode="json-ld-1.1",x["@version"]=o["@version"],v.set("@version",!0)}if(x.processingMode=x.processingMode||e.processingMode,"@base"in o){let e=o["@base"];if(null===e||c(e));else{if(!u(e))throw new i('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:o});e=d(x["@base"],e)}x["@base"]=e,v.set("@base",!0)}if("@vocab"in o){const e=o["@vocab"];if(null===e)delete x["@vocab"];else{if(!a(e))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:o});if(!c(e)&&y.processingMode(x,1))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:o});{const t=b(x,e,{vocab:!0,base:!0},void 0,void 0,n);c(t)||n.eventHandler&&h({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:t}},options:n}),x["@vocab"]=t}}v.set("@vocab",!0)}if("@language"in o){const e=o["@language"];if(null===e)delete x["@language"];else{if(!a(e))throw new i('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:o});e.match(p)||n.eventHandler&&h({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:n}),x["@language"]=e.toLowerCase()}v.set("@language",!0)}if("@direction"in o){const t=o["@direction"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:o});if(null===t)delete x["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new i('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:o});x["@direction"]=t}v.set("@direction",!0)}if("@propagate"in o){const n=o["@propagate"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:o});if("boolean"!=typeof n)throw new i("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});v.set("@propagate",!0)}if("@import"in o){const r=o["@import"];if("json-ld-1.0"===e.processingMode)throw new i("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:o});if(!a(r))throw new i("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const s=await n.contextResolver.resolve({activeCtx:e,context:r,documentLoader:n.documentLoader,base:n.base});if(1!==s.length)throw new i("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const l=s[0].getProcessed(e);if(l)o=l;else{const n=s[0].document;if("@import"in n)throw new i("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in n)o.hasOwnProperty(e)||(o[e]=n[e]);s[0].setProcessed(e,o)}v.set("@import",!0)}v.set("@protected",o["@protected"]||!1);for(const e in o)if(y.createTermDefinition({activeCtx:x,localCtx:o,term:e,defined:v,options:n,overrideProtected:l}),s(o[e])&&"@context"in o[e]){const t=o[e]["@context"];let r=!0;if(a(t)){const e=d(n.base,t);f.has(e)?r=!1:f.add(e)}if(r)try{await y.process({activeCtx:x.clone(),localCtx:o[e]["@context"],overrideProtected:!0,options:n,cycles:f})}catch(t){throw new i("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:o[e]["@context"],term:e})}}r.setProcessed(e,{context:x,events:g})}return x},y.createTermDefinition=({activeCtx:e,localCtx:t,term:n,defined:r,options:l,overrideProtected:u=!1})=>{if(r.has(n)){if(r.get(n))return;throw new i("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}let d;if(r.set(n,!1),t.hasOwnProperty(n)&&(d=t[n]),"@type"===n&&s(d)&&"@set"===(d["@container"]||"@set")&&y.processingMode(e,1.1)){const e=["@container","@id","@protected"],r=Object.keys(d);if(0===r.length||r.some(t=>!e.includes(t)))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n})}else{if(y.isKeyword(n))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(n.match(f))return void(l.eventHandler&&h({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:n}},options:l}));if(""===n)throw new i("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const p=e.mappings.get(n);e.mappings.has(n)&&e.mappings.delete(n);let m=!1;if((a(d)||null===d)&&(m=!0,d={"@id":d}),!s(d))throw new i("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const g={};e.mappings.set(n,g),g.reverse=!1;const v=["@container","@id","@language","@reverse","@type"];y.processingMode(e,1.1)&&v.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in d)if(!v.includes(e))throw new i("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const _=n.indexOf(":");if(g._termHasColon=_>0,"@reverse"in d){if("@id"in d)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in d)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const o=d["@reverse"];if(!a(o))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(o.match(f))return l.eventHandler&&h({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:o}},options:l}),void(p?e.mappings.set(n,p):e.mappings.delete(n));const s=b(e,o,{vocab:!0,base:!1},t,r,l);if(!c(s))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});g["@id"]=s,g.reverse=!0}else if("@id"in d){let o=d["@id"];if(o&&!a(o))throw new i("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===o)g["@id"]=null;else{if(!y.isKeyword(o)&&o.match(f))return l.eventHandler&&h({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:o}},options:l}),void(p?e.mappings.set(n,p):e.mappings.delete(n));if(o!==n){if(o=b(e,o,{vocab:!0,base:!1},t,r,l),!c(o)&&!y.isKeyword(o))throw new i("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(n.match(/(?::[^:])|\//)){if(b(e,n,{vocab:!0,base:!1},t,new Map(r).set(n,!0),l)!==o)throw new i("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t})}g["@id"]=o,g._prefix=m&&!g._termHasColon&&null!==o.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in g))if(g._termHasColon){const i=n.substr(0,_);if(t.hasOwnProperty(i)&&y.createTermDefinition({activeCtx:e,localCtx:t,term:i,defined:r,options:l}),e.mappings.has(i)){const t=n.substr(_+1);g["@id"]=e.mappings.get(i)["@id"]+t}else g["@id"]=n}else if("@type"===n)g["@id"]=n;else{if(!("@vocab"in e))throw new i("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});g["@id"]=e["@vocab"]+n}if((!0===d["@protected"]||!0===r.get("@protected")&&!1!==d["@protected"])&&(e.protected[n]=!0,g.protected=!0),r.set(n,!0),"@type"in d){let n=d["@type"];if(!a(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===n||"@none"===n){if(y.processingMode(e,1))throw new i(`Invalid JSON-LD syntax; an @context @type value must not be "${n}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==n&&"@vocab"!==n){if(n=b(e,n,{vocab:!0,base:!1},t,r,l),!c(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new i("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}g["@type"]=n}if("@container"in d){const n=a(d["@container"])?[d["@container"]]:d["@container"]||[],r=["@list","@set","@index","@language"];let s=!0;const l=n.includes("@set");if(y.processingMode(e,1.1)){if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new i("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new i("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else s&=n.length<=(l?2:1);if(n.includes("@type")&&(g["@type"]=g["@type"]||"@id",!["@id","@vocab"].includes(g["@type"])))throw new i("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else s&=!o(d["@container"]),s&=n.length<=1;if(s&=n.every(e=>r.includes(e)),s&=!(l&&n.includes("@list")),!s)throw new i("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(g.reverse&&!n.every(e=>["@index","@set"].includes(e)))throw new i("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});g["@container"]=n}if("@index"in d){if(!("@container"in d)||!g["@container"].includes("@index"))throw new i(`Invalid JSON-LD syntax; @index without @index in @container: "${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!a(d["@index"])||0===d["@index"].indexOf("@"))throw new i(`Invalid JSON-LD syntax; @index must expand to an IRI: "${d["@index"]}" on term "${n}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});g["@index"]=d["@index"]}if("@context"in d&&(g["@context"]=d["@context"]),"@language"in d&&!("@type"in d)){let e=d["@language"];if(null!==e&&!a(e))throw new i("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),g["@language"]=e}if("@prefix"in d){if(n.match(/:|\//))throw new i("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(y.isKeyword(g["@id"]))throw new i("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof d["@prefix"])throw new i("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});g._prefix=!0===d["@prefix"]}if("@direction"in d){const e=d["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new i('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});g["@direction"]=e}if("@nest"in d){const e=d["@nest"];if(!a(e)||"@nest"!==e&&0===e.indexOf("@"))throw new i("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});g["@nest"]=e}const x=g["@id"];if("@context"===x||"@preserve"===x)throw new i("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(p&&p.protected&&!u&&(e.protected[n]=!0,g.protected=!0,!w(p,g)))throw new i("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:n})},y.expandIri=(e,t,n,r)=>b(e,t,n,void 0,void 0,r),y.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),n=v.get(t);if(n)return n;const i={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},r={},i=(e["@language"]||"@none").toLowerCase(),a=e["@direction"],l=e.mappings,c=[...l.keys()].sort(g);for(const e of c){const o=l.get(e);if(null===o)continue;let c=o["@container"]||"@none";if(c=[].concat(c).sort().join(""),null===o["@id"])continue;const u=m(o["@id"]);for(const l of u){let u=t[l];const d=y.isKeyword(l);if(u)d||o._termHasColon||r[l].push(e);else if(t[l]=u={},!d&&!o._termHasColon){r[l]=[e];const t={iri:l,terms:r[l]};l[0]in n?n[l[0]].push(t):n[l[0]]=[t]}if(u[c]||(u[c]={"@language":{},"@type":{},"@any":{}}),u=u[c],s(e,u["@any"],"@none"),o.reverse)s(e,u["@type"],"@reverse");else if("@none"===o["@type"])s(e,u["@any"],"@none"),s(e,u["@language"],"@none"),s(e,u["@type"],"@none");else if("@type"in o)s(e,u["@type"],o["@type"]);else if("@language"in o&&"@direction"in o){const t=o["@language"],n=o["@direction"];s(e,u["@language"],t&&n?`${t}_${n}`.toLowerCase():t?t.toLowerCase():n?`_${n}`:"@null")}else"@language"in o?s(e,u["@language"],(o["@language"]||"@null").toLowerCase()):"@direction"in o?o["@direction"]?s(e,u["@language"],`_${o["@direction"]}`):s(e,u["@language"],"@none"):a?(s(e,u["@language"],`_${a}`),s(e,u["@language"],"@none"),s(e,u["@type"],"@none")):(s(e,u["@language"],i),s(e,u["@language"],"@none"),s(e,u["@type"],"@none"))}}for(const e in n)o(n,e,1);return t},clone:function(){const e={};e.mappings=r.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=r.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone());e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]);"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e},revertToPreviousContext:function(){if(!this.previousContext)return this;return this.previousContext.clone()},protected:{}};return 1e4===v.size&&v.clear(),v.set(t,i),i;function o(e,t,n){const r=e[t],i=e[t]={};let s,a;for(const e of r)s=e.iri,a=n>=s.length?"":s[n],a in i?i[a].push(e):i[a]=[e];for(const e in i)""!==e&&o(i,e,n+1)}function s(e,t,n){t.hasOwnProperty(n)||(t[n]=e)}},y.getContextValue=(e,t,n)=>{if(null===t){if("@context"===n)return;return null}if(e.mappings.has(t)){const r=e.mappings.get(t);if(l(n))return r;if(r.hasOwnProperty(n))return r[n]}return"@language"===n&&n in e||"@direction"===n&&n in e?e[n]:"@context"!==n?null:void 0},y.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,y.isKeyword=e=>{if(!a(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},6957:(e,t,n)=>{"use strict";const{parseLinkHeader:r,buildHeaders:i}=n(9263),{LINK_HEADER_CONTEXT:o}=n(9378),s=n(2207),a=n(3743),{prependBase:l}=n(470),c=/(^|(\r\n))link:/i;e.exports=({secure:e,headers:t={},xhr:n}={headers:{}})=>{t=i(t);return(new a).wrapLoader(async function i(a){if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))throw new s('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a});if(e&&0!==a.indexOf("https"))throw new s('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a});let u;try{u=await function(e,t,n){e=e||XMLHttpRequest;const r=new e;return new Promise((e,i)=>{r.onload=()=>e(r),r.onerror=e=>i(e),r.open("GET",t,!0);for(const e in n)r.setRequestHeader(e,n[e]);r.send()})}(n,a,t)}catch(e){throw new s("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:e})}if(u.status>=400)throw new s("URL could not be dereferenced: "+u.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:a,httpStatusCode:u.status});let d={contextUrl:null,documentUrl:a,document:u.response},h=null;const p=u.getResponseHeader("Content-Type");let f;c.test(u.getAllResponseHeaders())&&(f=u.getResponseHeader("Link"));if(f&&"application/ld+json"!==p){const e=r(f),t=e[o];if(Array.isArray(t))throw new s("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a});t&&(d.contextUrl=t.target),h=e.alternate,h&&"application/ld+json"==h.type&&!(p||"").match(/^application\/(\w*\+)?json$/)&&(d=await i(l(a,h.target)))}return d})}},2246:(e,t,n)=>{"use strict";const r=n(2207),{isArray:i}=n(5001),{asArray:o}=n(9263),s={};function a({event:e,handlers:t}){let n=!0;for(let o=0;n&&o<t.length;++o){n=!1;const s=t[o];if(i(s))n=a({event:e,handlers:s});else if("function"==typeof s)s({event:e,next:()=>{n=!0}});else{if("object"!=typeof s)throw new r("Invalid event handler.","jsonld.InvalidEventHandler",{event:e});e.code in s?s[e.code]({event:e,next:()=>{n=!0}}):n=!0}}return n}e.exports=s,s.defaultEventHandler=null,s.setupEventHandler=({options:e={}})=>{const t=[].concat(e.safe?s.safeEventHandler:[],e.eventHandler?o(e.eventHandler):[],s.defaultEventHandler?s.defaultEventHandler:[]);return 0===t.length?null:t},s.handleEvent=({event:e,options:t})=>{a({event:e,handlers:t.eventHandler})};const l=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);s.safeEventHandler=function({event:e,next:t}){if("warning"===e.level&&l.has(e.code))throw new r("Safe mode validation error.","jsonld.ValidationError",{event:e});t()},s.logEventHandler=function({event:e,next:t}){console.log(`EVENT: ${e.message}`,{event:e}),t()},s.logWarningEventHandler=function({event:e,next:t}){"warning"===e.level&&console.warn(`WARNING: ${e.message}`,{event:e}),t()},s.unhandledEventHandler=function({event:e}){throw new r("No handler for event.","jsonld.UnhandledEvent",{event:e})},s.setDefaultEventHandler=function({eventHandler:e}={}){s.defaultEventHandler=e?o(e):null}},4019:(e,t,n)=>{"use strict";const r=n(2207),{isArray:i,isObject:o,isEmptyObject:s,isString:a,isUndefined:l}=n(5001),{isList:c,isValue:u,isGraph:d,isSubject:h}=n(3978),{expandIri:p,getContextValue:f,isKeyword:m,process:g,processingMode:v}=n(1972),{isAbsolute:y}=n(470),{REGEX_BCP47:b,REGEX_KEYWORD:w,addValue:_,asArray:x,getValues:S,validateTypeValue:C}=n(9263),{handleEvent:k}=n(2246),E={};function A({value:e,count:t,options:n}){if(0===t||"@value"in e||"@list"in e||1===t&&"@id"in e){if(n.eventHandler){let r,i;0===t?(r="empty object",i="Dropping empty object."):"@value"in e?(r="object with only @value",i="Dropping object with only @value."):"@list"in e?(r="object with only @list",i="Dropping object with only @list."):1===t&&"@id"in e&&(r="object with only @id",i="Dropping object with only @id."),k({event:{type:["JsonLdEvent"],code:r,level:"warning",message:i,details:{value:e}},options:n})}return null}return e}async function T({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:d,expandedParent:w,options:S={},insideList:I,typeKey:N,typeScopedContext:O}){const D=Object.keys(d).sort(),M=[];let P;const j=d[N]&&"@json"===p(e,i(d[N])?d[N][0]:d[N],{vocab:!0},{...S,typeExpansion:!0});for(const T of D){let I,N=d[T];if("@context"===T)continue;const D=p(e,T,{vocab:!0},S);if(null===D||!y(D)&&!m(D)){S.eventHandler&&k({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:T,expandedProperty:D}},options:S});continue}if(m(D)){if("@reverse"===n)throw new r("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:N});if(D in w&&"@included"!==D&&"@type"!==D)throw new r("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:D})}if("@id"===D){if(!a(N)){if(!S.isFrame)throw new r('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:N});if(o(N)){if(!s(N))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:N})}else{if(!i(N))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:N});if(!N.every(e=>a(e)))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:N})}}_(w,"@id",x(N).map(t=>{if(a(t)){const n=p(e,t,{base:!0},S);return S.eventHandler&&(null===n?k(null===t?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:t}},options:S}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:S}):y(n)||k({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:t,expandedId:n}},options:S})),n}return t}),{propertyIsArray:S.isFrame});continue}if("@type"===D){o(N)&&(N=Object.fromEntries(Object.entries(N).map(([e,t])=>[p(O,e,{vocab:!0}),x(t).map(e=>p(O,e,{base:!0,vocab:!0},{...S,typeExpansion:!0}))]))),C(N,S.isFrame),_(w,"@type",x(N).map(e=>{if(a(e)){const t=p(O,e,{base:!0,vocab:!0},{...S,typeExpansion:!0});return"@json"===t||y(t)||S.eventHandler&&k({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:e}},options:S}),t}return e}),{propertyIsArray:!!S.isFrame});continue}if("@included"===D&&v(e,1.1)){const n=x(await E.expand({activeCtx:e,activeProperty:t,element:N,options:S}));if(!n.every(e=>h(e)))throw new r("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:N});_(w,"@included",n,{propertyIsArray:!0});continue}if("@graph"===D&&!o(N)&&!i(N))throw new r('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:N});if("@value"===D){P=N,j&&v(e,1.1)?w["@value"]=N:_(w,"@value",N,{propertyIsArray:S.isFrame});continue}if("@language"===D){if(null===N)continue;if(!a(N)&&!S.isFrame)throw new r('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:N});N=x(N).map(e=>a(e)?e.toLowerCase():e);for(const e of N)a(e)&&!e.match(b)&&S.eventHandler&&k({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:S});_(w,"@language",N,{propertyIsArray:S.isFrame});continue}if("@direction"===D){if(!a(N)&&!S.isFrame)throw new r('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:N});N=x(N);for(const e of N)if(a(e)&&"ltr"!==e&&"rtl"!==e)throw new r('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:N});_(w,"@direction",N,{propertyIsArray:S.isFrame});continue}if("@index"===D){if(!a(N))throw new r('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:N});_(w,"@index",N);continue}if("@reverse"===D){if(!o(N))throw new r('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:N});if(I=await E.expand({activeCtx:e,activeProperty:"@reverse",element:N,options:S}),"@reverse"in I)for(const e in I["@reverse"])_(w,e,I["@reverse"][e],{propertyIsArray:!0});let t=w["@reverse"]||null;for(const e in I){if("@reverse"===e)continue;null===t&&(t=w["@reverse"]={}),_(t,e,[],{propertyIsArray:!0});const n=I[e];for(let i=0;i<n.length;++i){const o=n[i];if(u(o)||c(o))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:I});_(t,e,o,{propertyIsArray:!0})}}continue}if("@nest"===D){M.push(T);continue}let U=e;const B=f(e,T,"@context");l(B)||(U=await g({activeCtx:e,localCtx:B,propagate:!0,overrideProtected:!0,options:S}));const F=f(e,T,"@container")||[];if(F.includes("@language")&&o(N)){I=R(U,N,f(U,T,"@direction"),S)}else if(F.includes("@index")&&o(N)){const t=F.includes("@graph"),n=f(U,T,"@index")||"@index",r="@index"!==n&&p(e,n,{vocab:!0},S);I=await L({activeCtx:U,options:S,activeProperty:T,value:N,asGraph:t,indexKey:n,propertyIndex:r})}else if(F.includes("@id")&&o(N)){const e=F.includes("@graph");I=await L({activeCtx:U,options:S,activeProperty:T,value:N,asGraph:e,indexKey:"@id"})}else if(F.includes("@type")&&o(N))I=await L({activeCtx:U.revertToPreviousContext(),options:S,activeProperty:T,value:N,asGraph:!1,indexKey:"@type"});else{const r="@list"===D;if(r||"@set"===D){let e=t;r&&"@graph"===n&&(e=null),I=await E.expand({activeCtx:U,activeProperty:e,element:N,options:S,insideList:r})}else I="@json"===f(e,T,"@type")?{"@type":"@json","@value":N}:await E.expand({activeCtx:U,activeProperty:T,element:N,options:S,insideList:!1})}if(null!==I||"@value"===D){if("@list"!==D&&!c(I)&&F.includes("@list")&&(I={"@list":x(I)}),F.includes("@graph")&&!F.some(e=>"@id"===e||"@index"===e)){if(I=x(I),S.isFrame||(I=I.filter(e=>null!==A({value:e,count:Object.keys(e).length,options:S}))),0===I.length)continue;I=I.map(e=>({"@graph":x(e)}))}if(U.mappings.has(T)&&U.mappings.get(T).reverse){const e=w["@reverse"]=w["@reverse"]||{};I=x(I);for(let t=0;t<I.length;++t){const n=I[t];if(u(n)||c(n))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:I});_(e,D,n,{propertyIsArray:!0})}continue}_(w,D,I,{propertyIsArray:!0})}}if("@value"in w)if("@json"===w["@type"]&&v(e,1.1));else if((o(P)||i(P))&&!S.isFrame)throw new r('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:P});for(const s of M){const a=i(d[s])?d[s]:[d[s]];for(const i of a){if(!o(i)||Object.keys(i).some(t=>"@value"===p(e,t,{vocab:!0},S)))throw new r("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:i});await T({activeCtx:e,activeProperty:t,expandedActiveProperty:n,element:i,expandedParent:w,options:S,insideList:I,typeScopedContext:O,typeKey:N})}}}function I({activeCtx:e,activeProperty:t,value:n,options:r}){if(null==n)return null;const i=p(e,t,{vocab:!0},r);if("@id"===i)return p(e,n,{base:!0},r);if("@type"===i)return p(e,n,{vocab:!0,base:!0},{...r,typeExpansion:!0});const o=f(e,t,"@type");if(("@id"===o||"@graph"===i)&&a(n)){const i=p(e,n,{base:!0},r);return null===i&&n.match(w)&&r.eventHandler&&k({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:r}),{"@id":i}}if("@vocab"===o&&a(n))return{"@id":p(e,n,{vocab:!0,base:!0},r)};if(m(i))return n;const s={};if(o&&!["@id","@vocab","@none"].includes(o))s["@type"]=o;else if(a(n)){const n=f(e,t,"@language");null!==n&&(s["@language"]=n);const r=f(e,t,"@direction");null!==r&&(s["@direction"]=r)}return["boolean","number","string"].includes(typeof n)||(n=n.toString()),s["@value"]=n,s}function R(e,t,n,o){const s=[],l=Object.keys(t).sort();for(const c of l){const l=p(e,c,{vocab:!0},o);let u=t[c];i(u)||(u=[u]);for(const e of u){if(null===e)continue;if(!a(e))throw new r("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const i={"@value":e};"@none"!==l&&(c.match(b)||o.eventHandler&&k({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:c}},options:o}),i["@language"]=c.toLowerCase()),n&&(i["@direction"]=n),s.push(i)}}return s}async function L({activeCtx:e,options:t,activeProperty:n,value:o,asGraph:s,indexKey:a,propertyIndex:c}){const h=[],m=Object.keys(o).sort(),v="@type"===a;for(let y of m){if(v){const n=f(e,y,"@context");l(n)||(e=await g({activeCtx:e,localCtx:n,propagate:!1,options:t}))}let m,b=o[y];i(b)||(b=[b]),b=await E.expand({activeCtx:e,activeProperty:n,element:b,options:t,insideList:!1,insideIndex:!0}),m=c?"@none"===y?"@none":I({activeCtx:e,activeProperty:a,value:y,options:t}):p(e,y,{vocab:!0},t),"@id"===a?y=p(e,y,{base:!0},t):v&&(y=m);for(let e of b){if(s&&!d(e)&&(e={"@graph":[e]}),"@type"===a)"@none"===m||(e["@type"]?e["@type"]=[y].concat(e["@type"]):e["@type"]=[y]);else{if(u(e)&&!["@language","@type","@index"].includes(a))throw new r(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${a}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});c?"@none"!==m&&_(e,c,m,{propertyIsArray:!0,prependValue:!0}):"@none"===m||a in e||(e[a]=y)}h.push(e)}}return h}e.exports=E,E.expand=async({activeCtx:e,activeProperty:t=null,element:n,options:c={},insideList:u=!1,insideIndex:d=!1,typeScopedContext:h=null})=>{if(null==n)return null;if("@default"===t&&(c=Object.assign({},c,{isFrame:!1})),!i(n)&&!o(n))return u||null!==t&&"@graph"!==p(e,t,{vocab:!0},c)?I({activeCtx:e,activeProperty:t,value:n,options:c}):(c.eventHandler&&k({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:n}},options:c}),null);if(i(n)){let r=[];const o=f(e,t,"@container")||[];u=u||o.includes("@list");for(let o=0;o<n.length;++o){let s=await E.expand({activeCtx:e,activeProperty:t,element:n[o],options:c,insideIndex:d,typeScopedContext:h});u&&i(s)&&(s={"@list":s}),null!==s&&(i(s)?r=r.concat(s):r.push(s))}return r}const m=p(e,t,{vocab:!0},c),b=f(e,t,"@context");h=h||(e.previousContext?e:null);let w=Object.keys(n).sort(),_=!d;if(_&&h&&w.length<=2&&!w.includes("@context"))for(const t of w){const n=p(h,t,{vocab:!0},c);if("@value"===n){_=!1,e=h;break}if("@id"===n&&1===w.length){_=!1;break}}_&&(e=e.revertToPreviousContext()),l(b)||(e=await g({activeCtx:e,localCtx:b,propagate:!0,overrideProtected:!0,options:c})),"@context"in n&&(e=await g({activeCtx:e,localCtx:n["@context"],options:c})),h=e;let C=null;for(const t of w){if("@type"===p(e,t,{vocab:!0},c)){C=C||t;const r=n[t],i=Array.isArray(r)?r.length>1?r.slice().sort():r:[r];for(const t of i){const n=f(h,t,"@context");l(n)||(e=await g({activeCtx:e,localCtx:n,options:c,propagate:!1}))}}}let R={};await T({activeCtx:e,activeProperty:t,expandedActiveProperty:m,element:n,expandedParent:R,options:c,insideList:u,typeKey:C,typeScopedContext:h}),w=Object.keys(R);let L=w.length;if("@value"in R){if("@type"in R&&("@language"in R||"@direction"in R))throw new r('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:R});let t=L-1;if("@type"in R&&(t-=1),"@index"in R&&(t-=1),"@language"in R&&(t-=1),"@direction"in R&&(t-=1),0!==t)throw new r('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:R});const n=null===R["@value"]?[]:x(R["@value"]),i=S(R,"@type");if(v(e,1.1)&&i.includes("@json")&&1===i.length);else if(0===n.length)c.eventHandler&&k({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:R}},options:c}),R=null;else{if(!n.every(e=>a(e)||s(e))&&"@language"in R)throw new r("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:R});if(!i.every(e=>y(e)&&!(a(e)&&0===e.indexOf("_:"))||s(e)))throw new r('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:R})}}else if("@type"in R&&!i(R["@type"]))R["@type"]=[R["@type"]];else if("@set"in R||"@list"in R){if(L>1&&(2!==L||!("@index"in R)))throw new r('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:R});"@set"in R&&(R=R["@set"],w=Object.keys(R),L=w.length)}else 1===L&&"@language"in R&&(c.eventHandler&&k({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:R}},options:c}),R=null);return!o(R)||c.keepFreeFloatingNodes||u||null!==t&&"@graph"!==m&&!(f(e,t,"@container")||[]).includes("@graph")||(R=A({value:R,count:L,options:c})),R}},5229:(e,t,n)=>{"use strict";const{isSubjectReference:r}=n(3978),{createMergedNodeMap:i}=n(9233),o={};e.exports=o,o.flatten=e=>{const t=i(e),n=[],o=Object.keys(t).sort();for(let e=0;e<o.length;++e){const i=t[o[e]];r(i)||n.push(i)}return n}},7946:(e,t,n)=>{"use strict";const{isKeyword:r}=n(1972),i=n(3978),o=n(5001),s=n(9263),a=n(470),l=n(2207),{createNodeMap:c,mergeNodeMapGraphs:u}=n(9233),d={};function h(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function p(e,t,n){for(let r=n.length-1;r>=0;--r){const i=n[r];if(i.graph===t&&i.subject["@id"]===e["@id"])return!0}return!1}function f(e,t,n){const r="@"+n;let i=r in e?e[r][0]:t[n];if("embed"===n)if(!0===i)i="@once";else if(!1===i)i="@never";else if("@always"!==i&&"@never"!==i&&"@link"!==i&&"@first"!==i&&"@last"!==i&&"@once"!==i)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return i}function m(e){if(!o.isArray(e)||1!==e.length||!o.isObject(e[0]))throw new l("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of s.asArray(e[0]["@id"]))if(!o.isObject(t)&&!a.isAbsolute(t)||o.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of s.asArray(e[0]["@type"]))if(!o.isObject(t)&&!a.isAbsolute(t)&&"@json"!==t||o.isString(t)&&0===t.indexOf("_:"))throw new l("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function g(e,t,n,a){let l=!0,c=!1;for(const u in n){let d=!1;const h=s.getValues(t,u),p=0===s.getValues(n,u).length;if("@id"===u){if(o.isEmptyObject(n["@id"][0]||{})?d=!0:n["@id"].length>=0&&(d=n["@id"].includes(h[0])),!a.requireAll)return d}else if("@type"===u){if(l=!1,p){if(h.length>0)return!1;d=!0}else if(1===n["@type"].length&&o.isEmptyObject(n["@type"][0]))d=h.length>0;else for(const e of n["@type"])d=!(!o.isObject(e)||!("@default"in e))||(d||h.some(t=>t===e));if(!a.requireAll)return d}else{if(r(u))continue;{const t=s.getValues(n,u)[0];let r=!1;if(t&&(m([t]),r="@default"in t),l=!1,0===h.length&&r)continue;if(h.length>0&&p)return!1;if(void 0===t){if(h.length>0)return!1;d=!0}else if(i.isList(t)){const n=t["@list"][0];if(i.isList(h[0])){const t=h[0]["@list"];i.isValue(n)?d=t.some(e=>_(n,e)):(i.isSubject(n)||i.isSubjectReference(n))&&(d=t.some(t=>w(e,n,t,a)))}}else d=i.isValue(t)?h.some(e=>_(t,e)):i.isSubjectReference(t)?h.some(n=>w(e,t,n,a)):!!o.isObject(t)&&h.length>0}}if(!d&&a.requireAll)return!1;c=c||d}return l||c}function v(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],i=r.parent,a=r.property,l={"@id":t};if(o.isArray(i)){for(let e=0;e<i.length;++e)if(s.compareValues(i[e],l)){i[e]=l;break}}else{const e=o.isArray(i[a]);s.removeValue(i,a,l,{propertyIsArray:e}),s.addValue(i,a,l,{propertyIsArray:e})}const c=e=>{const t=Object.keys(n);for(const r of t)r in n&&o.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],c(r))};c(t)}function y(e,t){if(o.isArray(e))return e.map(e=>y(e,t));if(o.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(i.isValue(e))return e;if(i.isList(e))return e["@list"]=y(e["@list"],t),e;if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)"@id"===n&&t.bnodesToClear.includes(e[n])?delete e["@id"]:e[n]=y(e[n],t)}return e}function b(e,t,n){o.isObject(e)?s.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function w(e,t,n,r){if(!("@id"in n))return!1;const i=e.subjects[n["@id"]];return i&&g(e,i,t,r)}function _(e,t){const n=t["@value"],r=t["@type"],i=t["@language"],s=e["@value"]?o.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],a=e["@type"]?o.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],l=e["@language"]?o.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===s.length&&0===a.length&&0===l.length||!(!s.includes(n)&&!o.isEmptyObject(s[0]))&&(!!(!r&&0===a.length||a.includes(r)||r&&o.isEmptyObject(a[0]))&&!!(!i&&0===l.length||l.includes(i)||i&&o.isEmptyObject(l[0])))}e.exports=d,d.frameMergedOrDefault=(e,t,n)=>{const r={options:n,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},i=new s.IdentifierIssuer("_:b");c(e,r.graphMap,"@default",i),n.merged&&(r.graphMap["@merged"]=u(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const o=[];return d.frame(r,Object.keys(r.subjects).sort(),t,o),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(e=>1===r.bnodeMap[e].length)),n.link={},y(o,n)},d.frame=(e,t,n,a,c=null)=>{m(n),n=n[0];const u=e.options,y={embed:f(n,u,"embed"),explicit:f(n,u,"explicit"),requireAll:f(n,u,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const w=e.link[e.graph],x=function(e,t,n,r){const i={};for(const o of t){const t=e.graphMap[e.graph][o];g(e,t,n,r)&&(i[o]=t)}return i}(e,t,n,y),S=Object.keys(x).sort();for(const m of S){const g=x[m];if(null===c?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===y.embed&&m in w){b(a,c,w[m]);continue}const S={"@id":m};if(0===m.indexOf("_:")&&s.addValue(e.bnodeMap,m,S,{propertyIsArray:!0}),w[m]=S,("@first"===y.embed||"@last"===y.embed)&&e.is11)throw new l("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:n});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(m))if(!e.embedded||"@never"!==y.embed&&!p(g,e.graph,e.subjectStack))if(!e.embedded||"@first"!=y.embed&&"@once"!=y.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(m)){if("@last"===y.embed&&m in e.uniqueEmbeds[e.graph]&&v(e,m),e.uniqueEmbeds[e.graph][m]={parent:a,property:c},e.subjectStack.push({subject:g,graph:e.graph}),m in e.graphMap){let t=!1,r=null;"@graph"in n?(r=n["@graph"][0],t=!("@merged"===m||"@default"===m),o.isObject(r)||(r={})):(t="@merged"!==e.graph,r={}),t&&d.frame({...e,graph:m,embedded:!1},Object.keys(e.graphMap[m]).sort(),[r],S,"@graph")}"@included"in n&&d.frame({...e,embedded:!1},t,n["@included"],S,"@included");for(const t of Object.keys(g).sort())if(r(t)){if(S[t]=s.clone(g[t]),"@type"===t)for(const t of g["@type"])0===t.indexOf("_:")&&s.addValue(e.bnodeMap,t,S,{propertyIsArray:!0})}else if(!y.explicit||t in n)for(const r of g[t]){const o=t in n?n[t]:h(y);if(i.isList(r)){const o=n[t]&&n[t][0]&&n[t][0]["@list"]?n[t][0]["@list"]:h(y),a={"@list":[]};b(S,t,a);const l=r["@list"];for(const t of l)i.isSubjectReference(t)?d.frame({...e,embedded:!0},[t["@id"]],o,a,"@list"):b(a,"@list",s.clone(t))}else i.isSubjectReference(r)?d.frame({...e,embedded:!0},[r["@id"]],o,S,t):_(o[0],r)&&b(S,t,s.clone(r))}for(const e of Object.keys(n).sort()){if("@type"===e){if(!o.isObject(n[e][0])||!("@default"in n[e][0]))continue}else if(r(e))continue;const t=n[e][0]||{};if(!f(t,u,"omitDefault")&&!(e in S)){let n="@null";"@default"in t&&(n=s.clone(t["@default"])),o.isArray(n)||(n=[n]),S[e]=[{"@preserve":n}]}}for(const t of Object.keys(n["@reverse"]||{}).sort()){const r=n["@reverse"][t];for(const n of Object.keys(e.subjects)){s.getValues(e.subjects[n],t).some(e=>e["@id"]===m)&&(S["@reverse"]=S["@reverse"]||{},s.addValue(S["@reverse"],t,[],{propertyIsArray:!0}),d.frame({...e,embedded:!0},[n],r,S["@reverse"][t],c))}}b(a,c,S),e.subjectStack.pop()}else b(a,c,S);else b(a,c,S)}},d.cleanupNull=(e,t)=>{if(o.isArray(e)){return e.map(e=>d.cleanupNull(e,t)).filter(e=>e)}if("@null"===e)return null;if(o.isObject(e)){if("@id"in e){const n=e["@id"];if(t.link.hasOwnProperty(n)){const r=t.link[n].indexOf(e);if(-1!==r)return t.link[n][r];t.link[n].push(e)}else t.link[n]=[e]}for(const n in e)e[n]=d.cleanupNull(e[n],t)}return e}},3947:(e,t,n)=>{"use strict";const r=n(2207),i=n(3978),o=n(5001),{REGEX_BCP47:s,addValue:a}=n(9263),{handleEvent:l}=n(2246),{RDF_LIST:c,RDF_FIRST:u,RDF_REST:d,RDF_NIL:h,RDF_TYPE:p,RDF_JSON_LITERAL:f,XSD_BOOLEAN:m,XSD_DOUBLE:g,XSD_INTEGER:v,XSD_STRING:y}=n(9378),b={};function w(e,t,n,i){if(e.termType.endsWith("Node"))return{"@id":e.value};const a={"@value":e.value};if(e.language)e.language.match(s)||i.eventHandler&&l({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e.language}},options:i}),a["@language"]=e.language;else{let c=e.datatype.value;if(c||(c=y),c===f){c="@json";try{a["@value"]=JSON.parse(a["@value"])}catch(e){throw new r("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:a["@value"],cause:e})}}if(t){if(c===m)"true"===a["@value"]?a["@value"]=!0:"false"===a["@value"]&&(a["@value"]=!1);else if(o.isNumeric(a["@value"]))if(c===v){const e=parseInt(a["@value"],10);e.toFixed(0)===a["@value"]&&(a["@value"]=e)}else c===g&&(a["@value"]=parseFloat(a["@value"]));[m,v,g,y].includes(c)||(a["@type"]=c)}else if("i18n-datatype"===n&&c.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=c.split(/[#_]/);e.length>0&&(a["@language"]=e,e.match(s)||i.eventHandler&&l({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:i})),a["@direction"]=t}else c!==y&&(a["@type"]=c)}return a}e.exports=b,b.fromRDF=async(e,t)=>{const{useRdfType:n=!1,useNativeTypes:s=!1,rdfDirection:l=null}=t,f={},m={"@default":f},g={};if(l){if("compound-literal"===l)throw new r("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:l});if("i18n-datatype"!==l)throw new r("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:l})}for(const r of e){const e="DefaultGraph"===r.graph.termType?"@default":r.graph.value;e in m||(m[e]={}),"@default"===e||e in f||(f[e]={"@id":e});const i=m[e],o=r.subject.value,c=r.predicate.value,u=r.object;o in i||(i[o]={"@id":o});const d=i[o],v=u.termType.endsWith("Node");if(v&&!(u.value in i)&&(i[u.value]={"@id":u.value}),c===p&&!n&&v){a(d,"@type",u.value,{propertyIsArray:!0});continue}const y=w(u,s,l,t);if(a(d,c,y,{propertyIsArray:!0}),v)if(u.value===h){const e=i[u.value];"usages"in e||(e.usages=[]),e.usages.push({node:d,property:c,value:y})}else u.value in g?g[u.value]=!1:g[u.value]={node:d,property:c,value:y}}for(const e in m){const t=m[e];if(!(h in t))continue;const n=t[h];if(n.usages){for(let e of n.usages){let n=e.node,r=e.property,s=e.value;const a=[],l=[];let h=Object.keys(n).length;for(;r===d&&o.isObject(g[n["@id"]])&&o.isArray(n[u])&&1===n[u].length&&o.isArray(n[d])&&1===n[d].length&&(3===h||4===h&&o.isArray(n["@type"])&&1===n["@type"].length&&n["@type"][0]===c)&&(a.push(n[u][0]),l.push(n["@id"]),e=g[n["@id"]],n=e.node,r=e.property,s=e.value,h=Object.keys(n).length,i.isBlankNode(n)););delete s["@id"],s["@list"]=a.reverse();for(const e of l)delete t[e]}delete n.usages}}const v=[],y=Object.keys(f).sort();for(const e of y){const t=f[e];if(e in m){const n=t["@graph"]=[],r=m[e],o=Object.keys(r).sort();for(const e of o){const t=r[e];i.isSubjectReference(t)||n.push(t)}}i.isSubjectReference(t)||v.push(t)}return v}},3978:(e,t,n)=>{"use strict";const r=n(5001),i={};e.exports=i,i.isSubject=e=>{if(r.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)){return Object.keys(e).length>1||!("@id"in e)}return!1},i.isSubjectReference=e=>r.isObject(e)&&1===Object.keys(e).length&&"@id"in e,i.isValue=e=>r.isObject(e)&&"@value"in e,i.isList=e=>r.isObject(e)&&"@list"in e,i.isGraph=e=>r.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter(e=>"@id"!==e&&"@index"!==e).length,i.isSimpleGraph=e=>i.isGraph(e)&&!("@id"in e),i.isBlankNode=e=>{if(r.isObject(e)){if("@id"in e){const t=e["@id"];return!r.isString(t)||0===t.indexOf("_:")}return 0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)}return!1}},4841:(e,t,n)=>{const r=n(989),i=n(701),o=n(9263),s=n(7034),a=o.IdentifierIssuer,l=n(2207),c=n(6575),u=n(8229),{expand:d}=n(4019),{flatten:h}=n(5229),{fromRDF:p}=n(3947),{toRDF:f}=n(9180),{frameMergedOrDefault:m,cleanupNull:g}=n(7946),{isArray:v,isObject:y,isString:b}=n(5001),{isSubjectReference:w}=n(3978),{expandIri:_,getInitialContext:x,process:S,processingMode:C}=n(1972),{compact:k,compactIri:E}=n(1058),{createNodeMap:A,createMergedNodeMap:T,mergeNodeMaps:I}=n(9233),{logEventHandler:R,logWarningEventHandler:L,safeEventHandler:N,setDefaultEventHandler:O,setupEventHandler:D,strictEventHandler:M,unhandledEventHandler:P}=n(2246),j=function(e){const t={},j=new c({max:100});function U(t,{documentLoader:n=e.documentLoader,...r}){if(t&&"compactionMap"in t)throw new l('"compactionMap" not supported.',"jsonld.OptionsError");if(t&&"expansionMap"in t)throw new l('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:n},r,t,{eventHandler:D({options:t})})}return e.compact=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new l("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let i;(r=U(r,{base:b(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new a("_:b"),contextResolver:new s({sharedCache:j})})).link&&(r.skipExpansion=!0),r.compactToRelative||delete r.base,i=r.skipExpansion?t:await e.expand(t,r);const c=await e.processContext(x(r),n,r);let u=await k({activeCtx:c,element:i,options:r});r.compactArrays&&!r.graph&&v(u)?1===u.length?u=u[0]:0===u.length&&(u={}):r.graph&&y(u)&&(u=[u]),y(n)&&"@context"in n&&(n=n["@context"]),n=o.clone(n),v(n)||(n=[n]);const d=n;n=[];for(let e=0;e<d.length;++e)(!y(d[e])||Object.keys(d[e]).length>0)&&n.push(d[e]);const h=n.length>0;if(1===n.length&&(n=n[0]),v(u)){const e=E({activeCtx:c,iri:"@graph",relativeTo:{vocab:!0}}),t=u;u={},h&&(u["@context"]=n),u[e]=t}else if(y(u)&&h){const e=u;u={"@context":n};for(const t in e)u[t]=e[t]}return u},e.expand=async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const r={},i=[];if("expandContext"in(n=U(n,{keepFreeFloatingNodes:!1,contextResolver:new s({sharedCache:j})}))){const e=o.clone(n.expandContext);y(e)&&"@context"in e?r.expandContext=e:r.expandContext={"@context":e},i.push(r.expandContext)}let a;if(b(t)){const o=await e.get(t,n);a=o.documentUrl,r.input=o.document,o.contextUrl&&(r.remoteContext={"@context":o.contextUrl},i.push(r.remoteContext))}else r.input=o.clone(t);"base"in n||(n.base=a||"");let l=x(n);for(const e of i)l=await S({activeCtx:l,localCtx:e,options:n});let c=await d({activeCtx:l,element:r.input,options:n});return y(c)&&"@graph"in c&&1===Object.keys(c).length?c=c["@graph"]:null===c&&(c=[]),v(c)||(c=[c]),c},e.flatten=async function(t,n,r){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,r=U(r,{base:b(t)?t:"",contextResolver:new s({sharedCache:j})});const i=await e.expand(t,r),o=h(i);if(null===n)return o;r.graph=!0,r.skipExpansion=!0;return await e.compact(o,n,r)},e.frame=async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(r=U(r,{base:b(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new s({sharedCache:j})}),b(n)){const t=await e.get(n,r);if(n=t.document,t.contextUrl){let e=n["@context"];e?v(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}const i=n&&n["@context"]||{},o=await e.processContext(x(r),i,r);r.hasOwnProperty("omitGraph")||(r.omitGraph=C(o,1.1)),r.hasOwnProperty("pruneBlankNodeIdentifiers")||(r.pruneBlankNodeIdentifiers=C(o,1.1));const a=await e.expand(t,r),l={...r};l.isFrame=!0,l.keepFreeFloatingNodes=!0;const c=await e.expand(n,l),u=Object.keys(n).map(e=>_(o,e,{vocab:!0}));l.merged=!u.includes("@graph"),l.is11=C(o,1.1);const d=m(a,c,l);l.graph=!r.omitGraph,l.skipExpansion=!0,l.link={},l.framing=!0;let h=await e.compact(d,i,l);return l.link={},h=g(h,l),h},e.link=async function(t,n,r){const i={};return n&&(i["@context"]=n),i["@embed"]="@link",e.frame(t,i,r)},e.normalize=e.canonize=async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=U(n,{base:b(t)?t:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new s({sharedCache:j})}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new l("Unknown canonicalization input format.","jsonld.CanonizeError");const e=u.parse(t);return r.canonize(e,n)}const i={...n};delete i.format,i.produceGeneralizedRdf=!1;const o=await e.toRDF(t,i);return r.canonize(o,n)},e.fromRDF=async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=U(n,{format:b(e)?"application/n-quads":void 0});const{format:r}=n;let{rdfParser:i}=n;if(r){if(i=i||t[r],!i)throw new l("Unknown input format.","jsonld.UnknownFormat",{format:r})}else i=()=>e;const o=await i(e);return p(o,n)},e.toRDF=async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let r;r=(n=U(n,{base:b(t)?t:"",skipExpansion:!1,contextResolver:new s({sharedCache:j})})).skipExpansion?t:await e.expand(t,n);const i=f(r,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return u.serialize(i);throw new l("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return i},e.createNodeMap=async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=U(n,{base:b(t)?t:"",contextResolver:new s({sharedCache:j})});const r=await e.expand(t,n);return T(r,n)},e.merge=async function(t,n,r){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!v(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,r=U(r,{contextResolver:new s({sharedCache:j})});const i=await Promise.all(t.map(t=>{const n={...r};return e.expand(t,n)}));let l=!0;"mergeNodes"in r&&(l=r.mergeNodes);const c=r.issuer||new a("_:b"),u={"@default":{}};for(let e=0;e<i.length;++e){const t=o.relabelBlankNodes(i[e],{issuer:new a("_:b"+e+"-")}),n=l||0===e?u:{"@default":{}};if(A(t,n,"@default",c),n!==u)for(const e in n){const t=n[e];if(!(e in u)){u[e]=t;continue}const r=u[e];for(const e in t)e in r||(r[e]=t[e])}}const d=I(u),h=[],p=Object.keys(d).sort();for(let e=0;e<p.length;++e){const t=d[p[e]];w(t)||h.push(t)}if(null===n)return h;r.graph=!0,r.skipExpansion=!0;return await e.compact(h,n,r)},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new l("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,n){let r;r="function"==typeof n.documentLoader?n.documentLoader:e.documentLoader;const i=await r(t);try{if(!i.document)throw new l("No remote document found at the given URL.","jsonld.NullRemoteDocument");b(i.document)&&(i.document=JSON.parse(i.document))}catch(e){throw new l("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:i})}return i},e.processContext=async function(e,t,n){return n=U(n,{base:"",contextResolver:new s({sharedCache:j})}),null===t?x(n):(t=o.clone(t),y(t)&&"@context"in t||(t={"@context":t}),S({activeCtx:e,localCtx:t,options:n}))},e.getContextValue=n(1972).getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new l('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",u.parse),e.registerRDFParser("application/nquads",u.parse),e.url=n(470),e.logEventHandler=R,e.logWarningEventHandler=L,e.safeEventHandler=N,e.setDefaultEventHandler=O,e.strictEventHandler=M,e.unhandledEventHandler=P,e.util=o,Object.assign(e,o),e.promises=e,e.RequestQueue=n(3743),e.JsonLdProcessor=n(5445)(e),i.setupGlobals(e),i.setupDocumentLoaders(e),e},U=function(){return j(function(){return U()})};j(U),e.exports=U},9233:(e,t,n)=>{"use strict";const{isKeyword:r}=n(1972),i=n(3978),o=n(5001),s=n(9263),a=n(2207),l={};e.exports=l,l.createMergedNodeMap=(e,t)=>{const n=(t=t||{}).issuer||new s.IdentifierIssuer("_:b"),r={"@default":{}};return l.createNodeMap(e,r,"@default",n),l.mergeNodeMaps(r)},l.createNodeMap=(e,t,n,c,u,d)=>{if(o.isArray(e)){for(const r of e)l.createNodeMap(r,t,n,c,void 0,d);return}if(!o.isObject(e))return void(d&&d.push(e));if(i.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=c.getId(t))}return void(d&&d.push(e))}if(d&&i.isList(e)){const r=[];return l.createNodeMap(e["@list"],t,n,c,u,r),void d.push({"@list":r})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&c.getId(e)}o.isUndefined(u)&&(u=i.isBlankNode(e)?c.getId(e["@id"]):e["@id"]),d&&d.push({"@id":u});const h=t[n],p=h[u]=h[u]||{};p["@id"]=u;const f=Object.keys(e).sort();for(let o of f){if("@id"===o)continue;if("@reverse"===o){const r={"@id":u},o=e["@reverse"];for(const e in o){const a=o[e];for(const o of a){let a=o["@id"];i.isBlankNode(o)&&(a=c.getId(a)),l.createNodeMap(o,t,n,c,a),s.addValue(h[a],e,r,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===o){u in t||(t[u]={}),l.createNodeMap(e[o],t,u,c);continue}if("@included"===o){l.createNodeMap(e[o],t,n,c);continue}if("@type"!==o&&r(o)){if("@index"===o&&o in p&&(e[o]!==p[o]||e[o]["@id"]!==p[o]["@id"]))throw new a("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:p});p[o]=e[o];continue}const d=e[o];if(0===o.indexOf("_:")&&(o=c.getId(o)),0!==d.length)for(let e of d)if("@type"===o&&(e=0===e.indexOf("_:")?c.getId(e):e),i.isSubject(e)||i.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const r=i.isBlankNode(e)?c.getId(e["@id"]):e["@id"];s.addValue(p,o,{"@id":r},{propertyIsArray:!0,allowDuplicate:!1}),l.createNodeMap(e,t,n,c,r)}else if(i.isValue(e))s.addValue(p,o,e,{propertyIsArray:!0,allowDuplicate:!1});else if(i.isList(e)){const r=[];l.createNodeMap(e["@list"],t,n,c,u,r),e={"@list":r},s.addValue(p,o,e,{propertyIsArray:!0,allowDuplicate:!1})}else l.createNodeMap(e,t,n,c,u),s.addValue(p,o,e,{propertyIsArray:!0,allowDuplicate:!1});else s.addValue(p,o,[],{propertyIsArray:!0})}},l.mergeNodeMapGraphs=e=>{const t={};for(const n of Object.keys(e).sort())for(const i of Object.keys(e[n]).sort()){const o=e[n][i];i in t||(t[i]={"@id":i});const a=t[i];for(const e of Object.keys(o).sort())if(r(e)&&"@type"!==e)a[e]=s.clone(o[e]);else for(const t of o[e])s.addValue(a,e,s.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},l.mergeNodeMaps=e=>{const t=e["@default"],n=Object.keys(e).sort();for(const r of n){if("@default"===r)continue;const n=e[r];let o=t[r];o?"@graph"in o||(o["@graph"]=[]):t[r]=o={"@id":r,"@graph":[]};const s=o["@graph"];for(const e of Object.keys(n).sort()){const t=n[e];i.isSubjectReference(t)||s.push(t)}}return t}},701:(e,t,n)=>{"use strict";const r=n(6957),i={};e.exports=i,i.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=r,e.useDocumentLoader("xhr"))},i.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}},9180:(e,t,n)=>{"use strict";const{createNodeMap:r}=n(9233),{isKeyword:i}=n(1972),o=n(3978),s=n(2341),a=n(2207),l=n(5001),c=n(9263),{handleEvent:u}=n(2246),{RDF_FIRST:d,RDF_REST:h,RDF_NIL:p,RDF_TYPE:f,RDF_JSON_LITERAL:m,RDF_LANGSTRING:g,XSD_BOOLEAN:v,XSD_DOUBLE:y,XSD_INTEGER:b,XSD_STRING:w}=n(9378),{isAbsolute:_}=n(470),x={};function S(e,t,n,r,o){const s=Object.keys(t).sort();for(const a of s){const s=t[a],l=Object.keys(s).sort();for(let t of l){const l=s[t];if("@type"===t)t=f;else if(i(t))continue;for(const i of l){const s={termType:a.startsWith("_:")?"BlankNode":"NamedNode",value:a};if(!_(a)){o.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:a}},options:o});continue}const l={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!_(t)){o.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:t}},options:o});continue}if("BlankNode"===l.termType&&!o.produceGeneralizedRdf){o.eventHandler&&u({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:r.getOldIds().find(e=>r.getId(e)===t)}},options:o});continue}const c=C(i,r,e,n,o.rdfDirection,o);c&&e.push({subject:s,predicate:l,object:c,graph:n})}}}}function C(e,t,n,r,i,c){const f={};if(o.isValue(e)){f.termType="Literal",f.value=void 0,f.datatype={termType:"NamedNode"};let t=e["@value"];const n=e["@type"]||null;if("@json"===n)f.value=s(t),f.datatype.value=m;else if(l.isBoolean(t))f.value=t.toString(),f.datatype.value=n||v;else if(l.isDouble(t)||n===y)l.isDouble(t)||(t=parseFloat(t)),f.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),f.datatype.value=n||y;else if(l.isNumber(t))f.value=t.toFixed(0),f.datatype.value=n||b;else if("@direction"in e&&"i18n-datatype"===i){const n=`https://www.w3.org/ns/i18n#${(e["@language"]||"").toLowerCase()}_${e["@direction"]}`;f.datatype.value=n,f.value=t}else{if("@direction"in e&&"compound-literal"===i)throw new a("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:i});if("@direction"in e&&i)throw new a("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:i});"@language"in e?("@direction"in e&&!i&&c.eventHandler&&u({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:f.value}},options:c}),f.value=t,f.datatype.value=n||g,f.language=e["@language"]):("@direction"in e&&!i&&c.eventHandler&&u({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:f.value}},options:c}),f.value=t,f.datatype.value=n||w)}}else if(o.isList(e)){const o=function(e,t,n,r,i,o){const s={termType:"NamedNode",value:d},a={termType:"NamedNode",value:h},l={termType:"NamedNode",value:p},c=e.pop(),u=c?{termType:"BlankNode",value:t.getId()}:l;let f=u;for(const l of e){const e=C(l,t,n,r,i,o),c={termType:"BlankNode",value:t.getId()};n.push({subject:f,predicate:s,object:e,graph:r}),n.push({subject:f,predicate:a,object:c,graph:r}),f=c}if(c){const e=C(c,t,n,r,i,o);n.push({subject:f,predicate:s,object:e,graph:r}),n.push({subject:f,predicate:a,object:l,graph:r})}return u}(e["@list"],t,n,r,i,c);f.termType=o.termType,f.value=o.value}else{const t=l.isObject(e)?e["@id"]:e;f.termType=t.startsWith("_:")?"BlankNode":"NamedNode",f.value=t}return"NamedNode"!==f.termType||_(f.value)?f:(c.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:f.value}},options:c}),null)}e.exports=x,x.toRDF=(e,t)=>{const n=new c.IdentifierIssuer("_:b"),i={"@default":{}};r(e,i,"@default",n);const o=[],s=Object.keys(i).sort();for(const e of s){let r;if("@default"===e)r={termType:"DefaultGraph",value:""};else{if(!_(e)){t.eventHandler&&u({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:e}},options:t});continue}r=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},r.value=e}S(o,i[e],r,n,t)}return o}},5001:e=>{"use strict";const t={};e.exports=t,t.isArray=Array.isArray,t.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),t.isDouble=e=>t.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&0===Object.keys(e).length,t.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),t.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),t.isUndefined=e=>void 0===e},470:(e,t,n)=>{"use strict";const r=n(5001),i={};e.exports=i,i.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},i.parse=(e,t)=>{const n={},r=i.parsers[t||"full"],o=r.regex.exec(e);let s=r.keys.length;for(;s--;)n[r.keys[s]]=void 0===o[s]?null:o[s];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=i.removeDotSegments(n.path),n},i.prependBase=(e,t)=>{if(null===e)return t;if(i.isAbsolute(t))return t;e&&!r.isString(e)||(e=i.parse(e||""));const n=i.parse(t),o={protocol:e.protocol||""};if(null!==n.authority)o.authority=n.authority,o.path=n.path,o.query=n.query;else if(o.authority=e.authority,""===n.path)o.path=e.path,null!==n.query?o.query=n.query:o.query=e.query;else{if(0===n.path.indexOf("/"))o.path=n.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,o.path=t}o.query=n.query}""!==n.path&&(o.path=i.removeDotSegments(o.path));let s=o.protocol;return null!==o.authority&&(s+="//"+o.authority),s+=o.path,null!==o.query&&(s+="?"+o.query),null!==n.fragment&&(s+="#"+n.fragment),""===s&&(s="./"),s},i.removeBase=(e,t)=>{if(null===e)return t;e&&!r.isString(e)||(e=i.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const o=i.parse(t.substr(n.length)),s=e.normalizedPath.split("/"),a=o.normalizedPath.split("/"),l=o.fragment||o.query?0:1;for(;s.length>0&&a.length>l&&s[0]===a[0];)s.shift(),a.shift();let c="";if(s.length>0){s.pop();for(let e=0;e<s.length;++e)c+="../"}return c+=a.join("/"),null!==o.query&&(c+="?"+o.query),null!==o.fragment&&(c+="#"+o.fragment),""===c&&(c="./"),c},i.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),n=[];for(;t.length>0;){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return"/"===e[0]&&n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")};const o=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;i.isAbsolute=e=>r.isString(e)&&o.test(e),i.isRelative=e=>r.isString(e)},9263:(e,t,n)=>{"use strict";const r=n(3978),i=n(5001),o=n(989).IdentifierIssuer,s=n(2207),a=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,l=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,u={accept:"application/ld+json, application/json"},d={};function h(e,t){if(i.isArray(t))for(let n=0;n<t.length;++n)t[n]=h(e,t[n]);else if(r.isList(t))t["@list"]=h(e,t["@list"]);else if(i.isObject(t)){r.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const n=Object.keys(t).sort();for(let r=0;r<n.length;++r){const i=n[r];"@id"!==i&&(t[i]=h(e,t[i]))}}return t}e.exports=d,d.IdentifierIssuer=o,d.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,d.REGEX_KEYWORD=/^@[a-zA-Z]+$/,d.clone=function(e){if(e&&"object"==typeof e){let t;if(i.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=d.clone(e[n])}else if(e instanceof Map){t=new Map;for(const[n,r]of e)t.set(n,d.clone(r))}else if(e instanceof Set){t=new Set;for(const n of e)t.add(d.clone(n))}else if(i.isObject(e)){t={};for(const n in e)t[n]=d.clone(e[n])}else t=e.toString();return t}return e},d.asArray=function(e){return Array.isArray(e)?e:[e]},d.buildHeaders=(e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+u.accept+'" is supported.');return Object.assign({Accept:u.accept},e)},d.parseLinkHeader=e=>{const t={},n=e.match(a);for(let e=0;e<n.length;++e){let r=n[e].match(l);if(!r)continue;const i={target:r[1]},o=r[2];for(;r=c.exec(o);)i[r[1]]=void 0===r[2]?r[3]:r[2];const s=i.rel||"";Array.isArray(t[s])?t[s].push(i):t.hasOwnProperty(s)?t[s]=[t[s],i]:t[s]=i}return t},d.validateTypeValue=(e,t)=>{if(!(i.isString(e)||i.isArray(e)&&e.every(e=>i.isString(e)))){if(t&&i.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&d.asArray(e["@default"]).every(e=>i.isString(e)))return}throw new s('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},d.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const n=e[t];return!i.isArray(n)||n.length>0}return!1},d.hasValue=(e,t,n)=>{if(d.hasProperty(e,t)){let o=e[t];const s=r.isList(o);if(i.isArray(o)||s){s&&(o=o["@list"]);for(let e=0;e<o.length;++e)if(d.compareValues(n,o[e]))return!0}else if(!i.isArray(n))return d.compareValues(n,o)}return!1},d.addValue=(e,t,n,r)=>{if("propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1),"valueIsArray"in r||(r.valueIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),"prependValue"in r||(r.prependValue=!1),r.valueIsArray)e[t]=n;else if(i.isArray(n)){0===n.length&&r.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),r.prependValue&&(n=n.concat(e[t]),e[t]=[]);for(let i=0;i<n.length;++i)d.addValue(e,t,n[i],r)}else if(e.hasOwnProperty(t)){const o=!r.allowDuplicate&&d.hasValue(e,t,n);i.isArray(e[t])||o&&!r.propertyIsArray||(e[t]=[e[t]]),o||(r.prependValue?e[t].unshift(n):e[t].push(n))}else e[t]=r.propertyIsArray?[n]:n},d.getValues=(e,t)=>[].concat(e[t]||[]),d.removeProperty=(e,t)=>{delete e[t]},d.removeValue=(e,t,n,r)=>{"propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1);const i=d.getValues(e,t).filter(e=>!d.compareValues(e,n));0===i.length?d.removeProperty(e,t):1!==i.length||r.propertyIsArray?e[t]=i:e[t]=i[0]},d.relabelBlankNodes=(e,t)=>h((t=t||{}).issuer||new o("_:b"),e),d.compareValues=(e,t)=>e===t||(!(!r.isValue(e)||!r.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(i.isObject(e)&&"@id"in e&&i.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"]),d.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},4555:()=>{"use strict";var e=1e3,t=6e4,n=36e5,r=864e5,i=new L.Icon.Default,o={startIcon:i,endIcon:i,wptIcons:{"":i},wptTypeIcons:{"":i},pointMatchers:[]},s={iconSize:[33,45],iconAnchor:[16,45],clickable:!1},a={color:"blue"},l={parseElements:["track","route","waypoint"],joinTrackSegments:!0};L.GPX=L.FeatureGroup.extend({initialize:function(e,t){t.max_point_interval=t.max_point_interval||15e3,t.markers=this._merge_objs(o,t.markers||{}),t.marker_options=this._merge_objs(s,t.marker_options||{}),t.polyline_options=t.polyline_options||[],t.gpx_options=this._merge_objs(l,t.gpx_options||{}),L.Util.setOptions(this,t),L.GPXTrackIcon=L.Icon.extend({options:t.marker_options}),this._gpx=e,this._layers={},this._prepare_markers(t.markers),this._init_info(),e&&this._parse(e,t,this.options.async)},get_duration_string:function(i,o){var s="";i>=r&&(s+=Math.floor(i/r)+"d ",i%=r),i>=n&&(s+=Math.floor(i/n)+":",i%=n);var a=Math.floor(i/t);i%=t,a<10&&(s+="0"),s+=a+"'";var l=Math.floor(i/e);return i%=e,l<10&&(s+="0"),s+=l,s+=!o&&i>0?"."+Math.round(1e3*Math.floor(i))/1e3:'"'},get_duration_string_iso:function(e,t){return this.get_duration_string(e,t).replace("'",":").replace('"',"")},_toFixed_helper:function(e,t=0){return"number"==typeof e?e.toFixed(t):"?"},to_miles:function(e){return e/1.60934},to_ft:function(e){return 3.28084*e},m_to_km:function(e){return e/1e3},m_to_mi:function(e){return e/1609.34},ms_to_kmh:function(e){return 3.6*e},ms_to_mih:function(e){return e/1609.34*3600},get_name:function(){return this._info.name},get_desc:function(){return this._info.desc},get_author:function(){return this._info.author},get_copyright:function(){return this._info.copyright},get_distance:function(){return this._info.length},get_distance_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))},get_start_time:function(){return this._info.duration.start},get_end_time:function(){return this._info.duration.end},get_moving_time:function(){return this._info.duration.moving},get_total_time:function(){return this._info.duration.total},get_moving_pace:function(){return this.get_moving_time()/this.m_to_km(this.get_distance())},get_moving_pace_imp:function(){return this.get_moving_time()/this.get_distance_imp()},get_moving_speed:function(){return this.m_to_km(this.get_distance())/(this.get_moving_time()/36e5)},get_moving_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_moving_time()/36e5)},get_total_speed:function(){return this.m_to_km(this.get_distance())/(this.get_total_time()/36e5)},get_total_speed_imp:function(){return this.to_miles(this.m_to_km(this.get_distance()))/(this.get_total_time()/36e5)},get_elevation_gain:function(){return this._info.elevation.gain},get_elevation_loss:function(){return this._info.elevation.loss},get_elevation_gain_imp:function(){return this.to_ft(this.get_elevation_gain())},get_elevation_loss_imp:function(){return this.to_ft(this.get_elevation_loss())},get_elevation_data:function(){var e=this;return this._info.elevation._points.map(function(t){return e._prepare_data_point(t,e.m_to_km,null,function(t,n){return e._toFixed_helper(t,2)+" km, "+e._toFixed_helper(n,0)+" m"})})},get_elevation_data_imp:function(){var e=this;return this._info.elevation._points.map(function(t){return e._prepare_data_point(t,e.m_to_mi,e.to_ft,function(t,n){return e._toFixed_helper(t,2)+" mi, "+e._toFixed_helper(n,0)+" ft"})})},get_elevation_max:function(){return this._info.elevation.max},get_elevation_min:function(){return this._info.elevation.min},get_elevation_max_imp:function(){return this.to_ft(this.get_elevation_max())},get_elevation_min_imp:function(){return this.to_ft(this.get_elevation_min())},get_speed_data:function(){var e=this;return this._info.speed._points.map(function(t){return e._prepare_data_point(t,e.m_to_km,e.ms_to_kmh,function(t,n){return e._toFixed_helper(t,2)+" km, "+e._toFixed_helper(n,2)+" km/h"})})},get_speed_data_imp:function(){var e=this;return this._info.speed._points.map(function(t){return e._prepare_data_point(t,e.m_to_mi,e.ms_to_mih,function(t,n){return e._toFixed_helper(t,2)+" mi, "+e._toFixed_helper(n,2)+" mi/h"})})},get_speed_max:function(){return 3600*this.m_to_km(this._info.speed.max)},get_speed_max_imp:function(){return this.to_miles(this.get_speed_max())},get_average_hr:function(){return this._info.hr.avg},get_average_temp:function(){return this._info.atemp.avg},get_average_cadence:function(){return this._info.cad.avg},get_heartrate_data:function(){var e=this;return this._info.hr._points.map(function(t){return e._prepare_data_point(t,e.m_to_km,null,function(t,n){return e._toFixed_helper(t,2)+" km, "+e._toFixed_helper(n,0)+" bpm"})})},get_heartrate_data_imp:function(){var e=this;return this._info.hr._points.map(function(t){return e._prepare_data_point(t,e.m_to_mi,null,function(t,n){return e._toFixed_helper(t,2)+" mi, "+e._toFixed_helper(n,0)+" bpm"})})},get_cadence_data:function(){var e=this;return this._info.cad._points.map(function(t){return e._prepare_data_point(t,e.m_to_km,null,function(t,n){return e._toFixed_helper(t,2)+" km, "+e._toFixed_helper(n,0)+" rpm"})})},get_temp_data:function(){var e=this;return this._info.atemp._points.map(function(t){return e._prepare_data_point(t,e.m_to_km,null,function(t,n){return e._toFixed_helper(t,2)+" km, "+e._toFixed_helper(n,0)+" degrees"})})},get_cadence_data_imp:function(){var e=this;return this._info.cad._points.map(function(t){return e._prepare_data_point(t,e.m_to_mi,null,function(t,n){return e._toFixed_helper(t,2)+" mi, "+e._toFixed_helper(n,0)+" rpm"})})},get_temp_data_imp:function(){var e=this;return this._info.atemp._points.map(function(t){return e._prepare_data_point(t,e.m_to_mi,null,function(t,n){return e._toFixed_helper(t,2)+" mi, "+e._toFixed_helper(n,0)+" degrees"})})},reload:function(){this._init_info(),this.clearLayers(),this._parse(this._gpx,this.options,this.options.async)},_merge_objs:function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},_prepare_data_point:function(e,t,n,r){var i=[t&&t(e[0])||e[0],n&&n(e[1])||e[1]];return i.push(r&&r(i[0],i[1])||i[0]+": "+i[1]),i},_prepare_markers:function(e){function t(e){return new L.GPXTrackIcon({iconUrl:e})}return Object.entries(e).forEach(([n,r])=>{"wptIcons"===n||"wptTypeIcons"===n?e[n]=this._prepare_markers(r):"pointMatchers"===n?e[n]=r.map(e=>("string"==typeof e.icon&&(e.icon=t(e.icon)),e)):"string"==typeof r?e[n]=t(r):"object"==typeof r&&null!==r&&(e[n]=r)}),e},_init_info:function(){this._info={name:null,length:0,elevation:{gain:0,loss:0,max:0,min:1/0,_points:[]},speed:{max:0,_points:[]},hr:{avg:0,_total:0,_points:[]},duration:{start:null,end:null,moving:0,total:0},atemp:{avg:0,_total:0,_points:[]},cad:{avg:0,_total:0,_points:[]}}},_load_xml:function(e,t,n,r){null==r&&(r=this.options.async),null==n&&(n=this.options);var i=this,o=new window.XMLHttpRequest;o.open("GET",e,r);try{o.overrideMimeType("text/xml")}catch(e){}o.onloadend=function(){200==o.status?t(o.responseXML,n):i.fire("error",{err:"Error fetching resource: "+e})},o.send(null)},_parse:function(e,t,n){var r=this,i=function(e,t){var n=r._parse_gpx_data(e,t);n?(r.addLayer(n),r.fire("loaded",{layers:n,element:e})):r.fire("error",{err:"No parseable layers of type(s) "+JSON.stringify(t.gpx_options.parseElements)})};if("<"===e.substr(0,1)){var o=new DOMParser;n?setTimeout(function(){i(o.parseFromString(e,"text/xml"),t)}):i(o.parseFromString(e,"text/xml"),t)}else this._load_xml(e,i,t,n)},_parse_gpx_data:function(e,t){var n,r,i=[];(y=e.getElementsByTagName("name")).length>0&&(this._info.name=y[0].textContent),(w=e.getElementsByTagName("desc")).length>0&&(this._info.desc=w[0].textContent);var o=e.getElementsByTagName("author");o.length>0&&(this._info.author=o[0].textContent);var s=e.getElementsByTagName("copyright");s.length>0&&(this._info.copyright=s[0].textContent);var a=t.gpx_options.parseElements;if(a.indexOf("route")>-1){var l=e.getElementsByTagName("rte");for(n=0;n<l.length;n++){var c=l[n],u=this._extract_styling(c),d=this._get_polyline_options(t.polyline_options,n);i=i.concat(this._parse_segment(l[n],t,u,d,"rtept"))}}if(a.indexOf("track")>-1){var h=e.getElementsByTagName("trk");for(n=0;n<h.length;n++){var p=h[n];u=this._extract_styling(p),d=this._get_polyline_options(t.polyline_options,n);if(t.gpx_options.joinTrackSegments)i=i.concat(this._parse_segment(p,t,u,d,"trkpt"));else{var f=p.getElementsByTagName("trkseg");for(T=0;T<f.length;T++)i=i.concat(this._parse_segment(f[T],t,u,d,"trkpt"))}}}if(this._info.hr.avg=Math.round(this._info.hr._total/this._info.hr._points.length),this._info.cad.avg=Math.round(this._info.cad._total/this._info.cad._points.length),this._info.atemp.avg=Math.round(this._info.atemp._total/this._info.atemp._points.length),a.indexOf("waypoint")>-1)for(r=e.getElementsByTagName("wpt"),n=0;n<r.length;n++){var m,g=new L.LatLng(r[n].getAttribute("lat"),r[n].getAttribute("lon")),v=r[n].getElementsByTagName("name"),y=v.length>0?v[0].textContent:"",b=r[n].getElementsByTagName("desc"),w=b.length>0?b[0].textContent:"",_=r[n].getElementsByTagName("sym"),x=_.length>0?_[0].textContent:null,S=r[n].getElementsByTagName("type"),C=S.length>0?S[0].textContent:null,k=t.markers.wptIcons,E=t.markers.wptTypeIcons,A=t.markers.pointMatchers||[];if(k&&x&&k[x])m=k[x];else if(E&&C&&E[C])m=E[C];else if(A.length>0){for(var T=0;T<A.length;T++)if(A[T].regex.test(y)){m=A[T].icon;break}}else k&&k[""]&&(m=k[""]);if(m){var I=new L.Marker(g,{clickable:t.marker_options.clickable,title:y,icon:m,type:"waypoint"});I.bindPopup("<b>"+y+"</b>"+(w.length>0?"<br>"+w:"")).openPopup(),this.fire("addpoint",{point:I,point_type:"waypoint",element:r[n]}),i.push(I)}else console.log("No waypoint icon could be matched for symKey=%s,typeKey=%s,name=%s on waypoint %o",x,C,y,r[n])}return i.length>1?new L.FeatureGroup(i):1==i.length?i[0]:void 0},_parse_segment:function(e,t,n,r,i){var o=e.getElementsByTagName(i);if(!o.length)return[];for(var s=[],a=[],l=[],c=null,u=0;u<o.length;u++){var d,h=new L.LatLng(o[u].getAttribute("lat"),o[u].getAttribute("lon"));h.meta={time:null,ele:null,hr:null,cad:null,atemp:null,speed:null},(d=o[u].getElementsByTagName("time")).length>0?h.meta.time=new Date(Date.parse(d[0].textContent)):h.meta.time=new Date("1970-01-01T00:00:00");var p=null!=c?Math.abs(h.meta.time-c.meta.time):0;(d=o[u].getElementsByTagName("ele")).length>0?h.meta.ele=parseFloat(d[0].textContent):h.meta.ele=null!=c?c.meta.ele:null;var f=null!=c?h.meta.ele-c.meta.ele:0,m=null!=c?this._dist3d(c,h):0;if((d=o[u].getElementsByTagName("speed")).length>0?h.meta.speed=parseFloat(d[0].textContent):h.meta.speed=p>0?1e3*m/p:0,(d=o[u].getElementsByTagName("name")).length>0)for(var g=d[0].textContent,v=t.markers.pointMatchers||[],y=0;y<v.length;y++)if(v[y].regex.test(g)){a.push({label:g,coords:h,icon:v[y].icon,element:o[u]});break}this._info.length+=m,(d=o[u].getElementsByTagNameNS("*","hr")).length>0&&(h.meta.hr=parseInt(d[0].textContent),this._info.hr._points.push([this._info.length,h.meta.hr]),this._info.hr._total+=h.meta.hr),(d=o[u].getElementsByTagNameNS("*","cad")).length>0&&(h.meta.cad=parseInt(d[0].textContent),this._info.cad._points.push([this._info.length,h.meta.cad]),this._info.cad._total+=h.meta.cad),(d=o[u].getElementsByTagNameNS("*","atemp")).length>0&&(h.meta.atemp=parseInt(d[0].textContent),this._info.atemp._points.push([this._info.length,h.meta.atemp]),this._info.atemp._total+=h.meta.atemp),h.meta.ele>this._info.elevation.max&&(this._info.elevation.max=h.meta.ele),h.meta.ele<this._info.elevation.min&&(this._info.elevation.min=h.meta.ele),this._info.elevation._points.push([this._info.length,h.meta.ele]),h.meta.speed>this._info.speed.max&&(this._info.speed.max=h.meta.speed),this._info.speed._points.push([this._info.length,h.meta.speed]),null==c&&null==this._info.duration.start&&(this._info.duration.start=h.meta.time),this._info.duration.end=h.meta.time,this._info.duration.total+=p,p<t.max_point_interval&&(this._info.duration.moving+=p),f>0?this._info.elevation.gain+=f:this._info.elevation.loss+=Math.abs(f),c=h,s.push(h)}var b=new L.Polyline(s,this._extract_styling(e,n,r));if(this.fire("addline",{line:b,element:e}),l.push(b),t.markers.startIcon){var w=new L.Marker(s[0],{clickable:t.marker_options.clickable,icon:t.markers.startIcon});this.fire("addpoint",{point:w,point_type:"start",element:o[0],line:e}),l.push(w)}if(t.markers.endIcon){w=new L.Marker(s[s.length-1],{clickable:t.marker_options.clickable,icon:t.markers.endIcon});this.fire("addpoint",{point:w,point_type:"end",element:o[o.length-1],line:e}),l.push(w)}for(u=0;u<a.length;u++){w=new L.Marker(a[u].coords,{clickable:t.marker_options.clickable,title:a[u].label,icon:a[u].icon});this.fire("addpoint",{point:w,point_type:"label",element:a[u].element}),l.push(w)}return l},_get_polyline_options:function(e,t){return Array.isArray(e)?e[t]||{}:e},_extract_styling:function(e,t,n){var r,i=this._merge_objs(a,t),o=e.getElementsByTagNameNS("http://www.topografix.com/GPX/gpx_style/0/2","line");o.length>0&&((r=o[0].getElementsByTagName("color")).length>0&&(i.color="#"+r[0].textContent),(r=o[0].getElementsByTagName("opacity")).length>0&&(i.opacity=r[0].textContent),(r=o[0].getElementsByTagName("weight")).length>0&&(i.weight=r[0].textContent),(r=o[0].getElementsByTagName("linecap")).length>0&&(i.lineCap=r[0].textContent),(r=o[0].getElementsByTagName("linejoin")).length>0&&(i.lineJoin=r[0].textContent),(r=o[0].getElementsByTagName("dasharray")).length>0&&(i.dashArray=r[0].textContent),(r=o[0].getElementsByTagName("dashoffset")).length>0&&(i.dashOffset=r[0].textContent));return this._merge_objs(i,n)},_dist2d:function(e,t){var n=this._deg2rad(t.lat-e.lat),r=this._deg2rad(t.lng-e.lng),i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(this._deg2rad(e.lat))*Math.cos(this._deg2rad(t.lat))*Math.sin(r/2)*Math.sin(r/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},_dist3d:function(e,t){var n=this._dist2d(e,t),r=Math.abs(t.meta.ele-e.meta.ele);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},_deg2rad:function(e){return e*Math.PI/180}})},3481:function(e,t){!function(e){"use strict";var t="1.9.4";function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n])e[t]=i[t];return e}var r=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function s(e){return"_leaflet_id"in e||(e._leaflet_id=++o),e._leaflet_id}function a(e,t,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(s,t),r=!0)},o}function l(e,t,n){var r=t[1],i=t[0],o=r-i;return e===r&&n?e:((e-i)%o+o)%o+i}function c(){return!1}function u(e,t){if(!1===t)return e;var n=Math.pow(10,void 0===t?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function h(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function f(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(e[i]));return(t&&-1!==t.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(m,function(e,n){var r=t[n];if(void 0===r)throw new Error("No value provided for variable "+e);return"function"==typeof r&&(r=r(t)),r})}var v=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function y(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function w(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var _=0;function x(e){var t=+new Date,n=Math.max(0,16-(t-_));return _=t+n,window.setTimeout(e,n)}var S=window.requestAnimationFrame||w("RequestAnimationFrame")||x,C=window.cancelAnimationFrame||w("CancelAnimationFrame")||w("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function k(e,t,n){if(!n||S!==x)return S.call(window,i(e,t));e.call(t)}function E(e){e&&C.call(window,e)}var A={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:s,throttle:a,wrapNum:l,falseFn:c,formatNum:u,trim:d,splitWords:h,setOptions:p,getParamString:f,template:g,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:S,cancelFn:C,requestAnimFrame:k,cancelAnimFrame:E};function T(){}function I(e){if("undefined"!=typeof L&&L&&L.Mixin){e=v(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}T.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,o=r(i);for(var s in o.constructor=t,t.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(t[s]=this[s]);return e.statics&&n(t,e.statics),e.includes&&(I(e.includes),n.apply(null,[o].concat(e.includes))),n(o,e),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,e.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=o._initHooks.length;e<t;e++)o._initHooks[e].call(this)}},t},T.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},T.mergeOptions=function(e){return n(this.prototype.options,e),this},T.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n="function"==typeof e?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var R={on:function(e,t,n){if("object"==typeof e)for(var r in e)this._on(r,e[r],t);else for(var i=0,o=(e=h(e)).length;i<o;i++)this._on(e[i],t,n);return this},off:function(e,t,n){if(arguments.length)if("object"==typeof e)for(var r in e)this._off(r,e[r],t);else{e=h(e);for(var i=1===arguments.length,o=0,s=e.length;o<s;o++)i?this._off(e[o]):this._off(e[o],t,n)}else delete this._events;return this},_on:function(e,t,n,r){if("function"==typeof t){if(!1===this._listens(e,t,n)){n===this&&(n=void 0);var i={fn:t,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(i)}}else console.warn("wrong listener type: "+typeof t)},_off:function(e,t,n){var r,i,o;if(this._events&&(r=this._events[e]))if(1!==arguments.length)if("function"==typeof t){var s=this._listens(e,t,n);if(!1!==s){var a=r[s];this._firingCount&&(a.fn=c,this._events[e]=r=r.slice()),r.splice(s,1)}}else console.warn("wrong listener type: "+typeof t);else{if(this._firingCount)for(i=0,o=r.length;i<o;i++)r[i].fn=c;delete this._events[e]}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var o=this._events[e];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var l=o[s],c=l.fn;l.once&&this.off(e,c,l.ctx),c.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t,n,r){"string"!=typeof e&&console.warn('"string" type argument expected');var i=t;"function"!=typeof t&&(r=!!t,i=void 0,n=void 0);var o=this._events&&this._events[e];if(o&&o.length&&!1!==this._listens(e,i,n))return!0;if(r)for(var s in this._eventParents)if(this._eventParents[s].listens(e,t,n,r))return!0;return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var i=0,o=r.length;i<o;i++)if(r[i].fn===t&&r[i].ctx===n)return i;return!1},once:function(e,t,n){if("object"==typeof e)for(var r in e)this._on(r,e[r],t,!0);else for(var i=0,o=(e=h(e)).length;i<o;i++)this._on(e[i],t,n,!0);return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[s(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[s(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};R.addEventListener=R.on,R.removeEventListener=R.clearAllEventListeners=R.off,R.addOneTimeEventListener=R.once,R.fireEvent=R.fire,R.hasEventListeners=R.listens;var N=T.extend(R);function O(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var D=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};function M(e,t,n){return e instanceof O?e:v(e)?new O(e[0],e[1]):null==e?e:"object"==typeof e&&"x"in e&&"y"in e?new O(e.x,e.y):new O(e,t,n)}function P(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function j(e,t){return!e||e instanceof P?e:new P(e,t)}function U(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}function B(e,t){return e instanceof U?e:new U(e,t)}function F(e,t,n){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,void 0!==n&&(this.alt=+n)}function z(e,t,n){return e instanceof F?e:v(e)&&"object"!=typeof e[0]?3===e.length?new F(e[0],e[1],e[2]):2===e.length?new F(e[0],e[1]):null:null==e?e:"object"==typeof e&&"lat"in e?new F(e.lat,"lng"in e?e.lng:e.lon,e.alt):void 0===t?null:new F(e,t,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(e){return this.clone()._add(M(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(M(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new O(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new O(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(e){var t=(e=M(e)).x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return(e=M(e)).x===this.x&&e.y===this.y},contains:function(e){return e=M(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},P.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof O||"number"==typeof e[0]||"x"in e)t=n=M(e);else if(t=(e=j(e)).min,n=e.max,!t||!n)return this;return this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=t.clone(),this.max=n.clone()),this},getCenter:function(e){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return(e="number"==typeof e[0]||e instanceof O?M(e):j(e))instanceof P?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=j(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>=t.x&&r.x<=n.x,s=i.y>=t.y&&r.y<=n.y;return o&&s},overlaps:function(e){e=j(e);var t=this.min,n=this.max,r=e.min,i=e.max,o=i.x>t.x&&r.x<n.x,s=i.y>t.y&&r.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,i=Math.abs(t.y-n.y)*e;return j(M(t.x-r,t.y-i),M(n.x+r,n.y+i))},equals:function(e){return!!e&&(e=j(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight()))}},U.prototype={extend:function(e){var t,n,r=this._southWest,i=this._northEast;if(e instanceof F)t=e,n=e;else{if(!(e instanceof U))return e?this.extend(z(e)||B(e)):this;if(t=e._southWest,n=e._northEast,!t||!n)return this}return r||i?(r.lat=Math.min(t.lat,r.lat),r.lng=Math.min(t.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(t.lat,t.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new U(new F(t.lat-r,t.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e="number"==typeof e[0]||e instanceof F||"lat"in e?z(e):B(e);var t,n,r=this._southWest,i=this._northEast;return e instanceof U?(t=e.getSouthWest(),n=e.getNorthEast()):t=n=e,t.lat>=r.lat&&n.lat<=i.lat&&t.lng>=r.lng&&n.lng<=i.lng},intersects:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>=t.lat&&r.lat<=n.lat,s=i.lng>=t.lng&&r.lng<=n.lng;return o&&s},overlaps:function(e){e=B(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),o=i.lat>t.lat&&r.lat<n.lat,s=i.lng>t.lng&&r.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return!!e&&(e=B(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(e,t){return!!e&&(e=z(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(void 0===t?1e-9:t))},toString:function(e){return"LatLng("+u(this.lat,e)+", "+u(this.lng,e)+")"},distanceTo:function(e){return H.distance(this,z(e))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return B([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var q,$={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new P(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?l(e.lng,this.wrapLng,!0):e.lng;return new F(this.wrapLat?l(e.lat,this.wrapLat,!0):e.lat,t,e.alt)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(0===r&&0===i)return e;var o=e.getSouthWest(),s=e.getNorthEast();return new U(new F(o.lat-r,o.lng-i),new F(s.lat-r,s.lng-i))}},H=n({},$,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,o=Math.sin((t.lat-e.lat)*n/2),s=Math.sin((t.lng-e.lng)*n/2),a=o*o+Math.cos(r)*Math.cos(i)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),V=6378137,W={R:V,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new O(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new F((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(q=V*Math.PI,new P([-q,-q],[q,q]))};function G(e,t,n,r){if(v(e))return this._a=e[0],this._b=e[1],this._c=e[2],void(this._d=e[3]);this._a=e,this._b=t,this._c=n,this._d=r}function J(e,t,n,r){return new G(e,t,n,r)}G.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new O((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};var K=n({},H,{code:"EPSG:3857",projection:W,transformation:function(){var e=.5/(Math.PI*W.R);return J(e,.5,-e,.5)}()}),Z=n({},K,{code:"EPSG:900913"});function Q(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function X(e,t){var n,r,i,o,s,a,l="";for(n=0,i=e.length;n<i;n++){for(r=0,o=(s=e[n]).length;r<o;r++)l+=(r?"L":"M")+(a=s[r]).x+" "+a.y;l+=t?Ue.svg?"z":"x":""}return l||"M0 0"}var Y,ee=document.documentElement.style,te="ActiveXObject"in window,ne=te&&!document.addEventListener,re="msLaunchUri"in navigator&&!("documentMode"in document),ie=je("webkit"),oe=je("android"),se=je("android 2")||je("android 3"),ae=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),le=oe&&je("Google")&&ae<537&&!("AudioNode"in window),ce=!!window.opera,ue=!re&&je("chrome"),de=je("gecko")&&!ie&&!ce&&!te,he=!ue&&je("safari"),pe=je("phantom"),fe="OTransition"in ee,me=0===navigator.platform.indexOf("Win"),ge=te&&"transition"in ee,ve="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!se,ye="MozPerspective"in ee,be=!window.L_DISABLE_3D&&(ge||ve||ye)&&!fe&&!pe,we="undefined"!=typeof orientation||je("mobile"),_e=we&&ie,xe=we&&ve,Se=!window.PointerEvent&&window.MSPointerEvent,Ce=!(!window.PointerEvent&&!Se),ke="ontouchstart"in window||!!window.TouchEvent,Ee=!window.L_NO_TOUCH&&(ke||Ce),Ae=we&&ce,Te=we&&de,Ie=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Re=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",c,t),window.removeEventListener("testPassiveEventSupport",c,t)}catch(e){}return e}(),Le=!!document.createElement("canvas").getContext,Ne=!(!document.createElementNS||!Q("svg").createSVGRect),Oe=!!Ne&&((Y=document.createElement("div")).innerHTML="<svg/>","http://www.w3.org/2000/svg"===(Y.firstChild&&Y.firstChild.namespaceURI)),De=!Ne&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&"object"==typeof t.adj}catch(e){return!1}}(),Me=0===navigator.platform.indexOf("Mac"),Pe=0===navigator.platform.indexOf("Linux");function je(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var Ue={ie:te,ielt9:ne,edge:re,webkit:ie,android:oe,android23:se,androidStock:le,opera:ce,chrome:ue,gecko:de,safari:he,phantom:pe,opera12:fe,win:me,ie3d:ge,webkit3d:ve,gecko3d:ye,any3d:be,mobile:we,mobileWebkit:_e,mobileWebkit3d:xe,msPointer:Se,pointer:Ce,touch:Ee,touchNative:ke,mobileOpera:Ae,mobileGecko:Te,retina:Ie,passiveEvents:Re,canvas:Le,svg:Ne,vml:De,inlineSvg:Oe,mac:Me,linux:Pe},Be=Ue.msPointer?"MSPointerDown":"pointerdown",Fe=Ue.msPointer?"MSPointerMove":"pointermove",ze=Ue.msPointer?"MSPointerUp":"pointerup",qe=Ue.msPointer?"MSPointerCancel":"pointercancel",$e={touchstart:Be,touchmove:Fe,touchend:ze,touchcancel:qe},He={touchstart:et,touchmove:Ye,touchend:Ye,touchcancel:Ye},Ve={},We=!1;function Ge(e,t,n){return"touchstart"===t&&Xe(),He[t]?(n=He[t].bind(this,n),e.addEventListener($e[t],n,!1),n):(console.warn("wrong event specified:",t),c)}function Je(e,t,n){$e[t]?e.removeEventListener($e[t],n,!1):console.warn("wrong event specified:",t)}function Ke(e){Ve[e.pointerId]=e}function Ze(e){Ve[e.pointerId]&&(Ve[e.pointerId]=e)}function Qe(e){delete Ve[e.pointerId]}function Xe(){We||(document.addEventListener(Be,Ke,!0),document.addEventListener(Fe,Ze,!0),document.addEventListener(ze,Qe,!0),document.addEventListener(qe,Qe,!0),We=!0)}function Ye(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in t.touches=[],Ve)t.touches.push(Ve[n]);t.changedTouches=[t],e(t)}}function et(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Kt(t),Ye(e,t)}function tt(e){var t,n,r={};for(n in e)t=e[n],r[n]=t&&t.bind?t.bind(e):t;return e=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var nt=200;function rt(e,t){e.addEventListener("dblclick",t);var n,r=0;function i(e){if(1===e.detail){if("mouse"!==e.pointerType&&(!e.sourceCapabilities||e.sourceCapabilities.firesTouchEvents)){var i=Qt(e);if(!i.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})||i.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement})){var o=Date.now();o-r<=nt?2===++n&&t(tt(e)):n=1,r=o}}}else n=e.detail}return e.addEventListener("click",i),{dblclick:t,simDblclick:i}}function it(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var ot,st,at,lt,ct,ut=At(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),dt=At(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ht="webkitTransition"===dt||"OTransition"===dt?dt+"End":"transitionend";function pt(e){return"string"==typeof e?document.getElementById(e):e}function ft(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return"auto"===n?null:n}function mt(e,t,n){var r=document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function gt(e){var t=e.parentNode;t&&t.removeChild(e)}function vt(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function yt(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function bt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function wt(e,t){if(void 0!==e.classList)return e.classList.contains(t);var n=Ct(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function _t(e,t){if(void 0!==e.classList)for(var n=h(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!wt(e,t)){var o=Ct(e);St(e,(o?o+" ":"")+t)}}function xt(e,t){void 0!==e.classList?e.classList.remove(t):St(e,d((" "+Ct(e)+" ").replace(" "+t+" "," ")))}function St(e,t){void 0===e.className.baseVal?e.className=t:e.className.baseVal=t}function Ct(e){return e.correspondingElement&&(e=e.correspondingElement),void 0===e.className.baseVal?e.className:e.className.baseVal}function kt(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Et(e,t)}function Et(e,t){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=e.filters.item(r)}catch(e){if(1===t)return}t=Math.round(100*t),n?(n.Enabled=100!==t,n.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function At(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Tt(e,t,n){var r=t||new O(0,0);e.style[ut]=(Ue.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function It(e,t){e._leaflet_pos=t,Ue.any3d?Tt(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function Rt(e){return e._leaflet_pos||new O(0,0)}if("onselectstart"in document)ot=function(){Bt(window,"selectstart",Kt)},st=function(){zt(window,"selectstart",Kt)};else{var Lt=At(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ot=function(){if(Lt){var e=document.documentElement.style;at=e[Lt],e[Lt]="none"}},st=function(){Lt&&(document.documentElement.style[Lt]=at,at=void 0)}}function Nt(){Bt(window,"dragstart",Kt)}function Ot(){zt(window,"dragstart",Kt)}function Dt(e){for(;-1===e.tabIndex;)e=e.parentNode;e.style&&(Mt(),lt=e,ct=e.style.outlineStyle,e.style.outlineStyle="none",Bt(window,"keydown",Mt))}function Mt(){lt&&(lt.style.outlineStyle=ct,lt=void 0,ct=void 0,zt(window,"keydown",Mt))}function Pt(e){do{e=e.parentNode}while(!(e.offsetWidth&&e.offsetHeight||e===document.body));return e}function jt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Ut={__proto__:null,TRANSFORM:ut,TRANSITION:dt,TRANSITION_END:ht,get:pt,getStyle:ft,create:mt,remove:gt,empty:vt,toFront:yt,toBack:bt,hasClass:wt,addClass:_t,removeClass:xt,setClass:St,getClass:Ct,setOpacity:kt,testProp:At,setTransform:Tt,setPosition:It,getPosition:Rt,get disableTextSelection(){return ot},get enableTextSelection(){return st},disableImageDrag:Nt,enableImageDrag:Ot,preventOutline:Dt,restoreOutline:Mt,getSizedParentNode:Pt,getScale:jt};function Bt(e,t,n,r){if(t&&"object"==typeof t)for(var i in t)Ht(e,i,t[i],n);else for(var o=0,s=(t=h(t)).length;o<s;o++)Ht(e,t[o],n,r);return this}var Ft="_leaflet_events";function zt(e,t,n,r){if(1===arguments.length)qt(e),delete e[Ft];else if(t&&"object"==typeof t)for(var i in t)Vt(e,i,t[i],n);else if(t=h(t),2===arguments.length)qt(e,function(e){return-1!==y(t,e)});else for(var o=0,s=t.length;o<s;o++)Vt(e,t[o],n,r);return this}function qt(e,t){for(var n in e[Ft]){var r=n.split(/\d/)[0];t&&!t(r)||Vt(e,r,null,null,n)}}var $t={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ht(e,t,n,r){var i=t+s(n)+(r?"_"+s(r):"");if(e[Ft]&&e[Ft][i])return this;var o=function(t){return n.call(r||e,t||window.event)},a=o;!Ue.touchNative&&Ue.pointer&&0===t.indexOf("touch")?o=Ge(e,t,o):Ue.touch&&"dblclick"===t?o=rt(e,o):"addEventListener"in e?"touchstart"===t||"touchmove"===t||"wheel"===t||"mousewheel"===t?e.addEventListener($t[t]||t,o,!!Ue.passiveEvents&&{passive:!1}):"mouseenter"===t||"mouseleave"===t?(o=function(t){t=t||window.event,tn(e,t)&&a(t)},e.addEventListener($t[t],o,!1)):e.addEventListener(t,a,!1):e.attachEvent("on"+t,o),e[Ft]=e[Ft]||{},e[Ft][i]=o}function Vt(e,t,n,r,i){i=i||t+s(n)+(r?"_"+s(r):"");var o=e[Ft]&&e[Ft][i];if(!o)return this;!Ue.touchNative&&Ue.pointer&&0===t.indexOf("touch")?Je(e,t,o):Ue.touch&&"dblclick"===t?it(e,o):"removeEventListener"in e?e.removeEventListener($t[t]||t,o,!1):e.detachEvent("on"+t,o),e[Ft][i]=null}function Wt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Gt(e){return Ht(e,"wheel",Wt),this}function Jt(e){return Bt(e,"mousedown touchstart dblclick contextmenu",Wt),e._leaflet_disable_click=!0,this}function Kt(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function Zt(e){return Kt(e),Wt(e),this}function Qt(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function Xt(e,t){if(!t)return new O(e.clientX,e.clientY);var n=jt(t),r=n.boundingClientRect;return new O((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var Yt=Ue.linux&&Ue.chrome?window.devicePixelRatio:Ue.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function en(e){return Ue.edge?e.wheelDeltaY/2:e.deltaY&&0===e.deltaMode?-e.deltaY/Yt:e.deltaY&&1===e.deltaMode?20*-e.deltaY:e.deltaY&&2===e.deltaMode?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}function tn(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch(e){return!1}return n!==e}var nn={__proto__:null,on:Bt,off:zt,stopPropagation:Wt,disableScrollPropagation:Gt,disableClickPropagation:Jt,preventDefault:Kt,stop:Zt,getPropagationPath:Qt,getMousePosition:Xt,getWheelDelta:en,isExternalTarget:tn,addListener:Bt,removeListener:zt},rn=N.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Rt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=1e3*this._duration;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),It(this._el,n),this.fire("step")},_complete:function(){E(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),on=N.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),void 0!==t.zoom&&(this._zoom=this._limitZoom(t.zoom)),t.center&&void 0!==t.zoom&&this.setView(z(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=dt&&Ue.any3d&&!Ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Bt(this._proxy,ht,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(z(e),t,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom):this._tryAnimatedPan(e,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(Ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),o=(e instanceof O?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():B(e);var n=M(t.paddingTopLeft||t.padding||[0,0]),r=M(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if((i="number"==typeof t.maxZoom?Math.min(t.maxZoom,i):i)===1/0)return{center:e.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),s=this.project(e.getSouthWest(),i),a=this.project(e.getNorthEast(),i);return{center:this.unproject(s.add(a).divideBy(2).add(o),i),zoom:i}},fitBounds:function(e,t){if(!(e=B(e)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(t=t||{},!(e=M(e).round()).x&&!e.y)return this.fire("moveend");if(!0!==t.animate&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new rn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),!1!==t.animate){_t(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,n){if(!1===(n=n||{}).animate||!Ue.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),o=this.getSize(),s=this._zoom;e=z(e),t=void 0===t?s:t;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,t),c=i.distanceTo(r)||1,u=1.42,d=u*u;function h(e){var t=(l*l-a*a+(e?-1:1)*d*d*c*c)/(2*(e?l:a)*d*c),n=Math.sqrt(t*t+1)-t;return n<1e-9?-18:Math.log(n)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function f(e){return(Math.exp(e)+Math.exp(-e))/2}function m(e){return p(e)/f(e)}var g=h(0);function v(e){return a*(f(g)/f(g+u*e))}function y(e){return a*(f(g)*m(g+u*e)-p(g))/d}function b(e){return 1-Math.pow(1-e,1.5)}var w=Date.now(),_=(h(1)-g)/u,x=n.duration?1e3*n.duration:1e3*_*.8;function S(){var n=(Date.now()-w)/x,o=b(n)*_;n<=1?(this._flyToFrame=k(S,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(y(o)/c)),s),this.getScaleZoom(a/v(o),s),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),S.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=B(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,B(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){var n=M((t=t||{}).paddingTopLeft||t.padding||[0,0]),r=M(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),o=this.project(e),s=this.getPixelBounds(),a=j([s.min.add(n),s.max.subtract(r)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var c=o.subtract(a.getCenter()),u=a.extend(o).getSize().subtract(l);i.x+=c.x<0?-u.x:u.x,i.y+=c.y<0?-u.y:u.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},!0===e?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=t.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(e.animate&&e.pan?this.panBy(a):(e.pan&&this._rawPanBy(a),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=new F(e.coords.latitude,e.coords.longitude),n=t.toBounds(2*e.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(t,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:t,bounds:n,timestamp:e.timestamp};for(var s in e.coords)"number"==typeof e.coords[s]&&(o[s]=e.coords[s]);this.fire("locationfound",o)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var e;for(e in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),gt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(E(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[e].remove();for(e in this._panes)gt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=mt("div","leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new U(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=B(e),n=M(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),s=e.getNorthWest(),a=e.getSouthEast(),l=this.getSize().subtract(n),c=j(this.project(a,r),this.project(s,r)).getSize(),u=Ue.any3d?this.options.zoomSnap:1,d=l.x/c.x,h=l.y/c.y,p=t?Math.max(d,h):Math.min(d,h);return r=this.getScaleZoom(p,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new P(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(void 0===e?this.getZoom():e)},getPane:function(e){return"string"==typeof e?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=void 0===t?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=void 0===t?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.latLngToPoint(z(e),t)},unproject:function(e,t){return t=void 0===t?this._zoom:t,this.options.crs.pointToLatLng(M(e),t)},layerPointToLatLng:function(e){var t=M(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(z(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(z(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(B(e))},distance:function(e,t){return this.options.crs.distance(z(e),z(t))},containerPointToLayerPoint:function(e){return M(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return M(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(M(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(e)))},mouseEventToContainerPoint:function(e){return Xt(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=pt(e);if(!t)throw new Error("Map container not found.");if(t._leaflet_id)throw new Error("Map container is already initialized.");Bt(t,"scroll",this._onScroll,this),this._containerId=s(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue.any3d,_t(e,"leaflet-container"+(Ue.touch?" leaflet-touch":"")+(Ue.retina?" leaflet-retina":"")+(Ue.ielt9?" leaflet-oldie":"")+(Ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=ft(e,"position");"absolute"!==t&&"relative"!==t&&"fixed"!==t&&"sticky"!==t&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_t(e.markerPane,"leaflet-zoom-hide"),_t(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,n){It(this._mapPane,new O(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,n,r){void 0===t&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){It(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[s(this._container)]=this;var t=e?zt:Bt;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),Ue.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n,r=[],i="mouseout"===t||"mouseover"===t,o=e.target||e.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===t||"preclick"===t)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(t,!0)){if(i&&!tn(o,e))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!this.listens(t,!0)||(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||"click"===e.type&&this._isClickDisabled(t))){var n=e.type;"mousedown"===n&&Dt(t),this._fireDOMEvent(e,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,r){if("click"===e.type){var i=n({},e);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var o=this._findEventTargets(e,t);if(r){for(var s=[],a=0;a<r.length;a++)r[a].listens(t,!0)&&s.push(r[a]);o=s.concat(o)}if(o.length){"contextmenu"===t&&Kt(e);var l=o[0],c={originalEvent:e};if("keypress"!==e.type&&"keydown"!==e.type&&"keyup"!==e.type){var u=l.getLatLng&&(!l._radius||l._radius<=10);c.containerPoint=u?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(e),c.layerPoint=this.containerPointToLayerPoint(c.containerPoint),c.latlng=u?l.getLatLng():this.layerPointToLatLng(c.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(t,c,!0),c.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,t))return}},_draggableMoved:function(e){return(e=e.dragging&&e.dragging.enabled()?e:this).dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return Rt(this._mapPane)||new O(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&void 0!==t?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return j([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),o=new P(r.subtract(i),r.add(i)),s=this._getBoundsOffset(o,n,t);return Math.abs(s.x)<=1&&Math.abs(s.y)<=1?e:this.unproject(r.add(s),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new P(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=j(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),o=r.max.subtract(e.max);return new O(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=Ue.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){xt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return!(!0!==(t&&t.animate)&&!this.getSize().contains(n)||(this.panBy(n,t),0))},_createAnimProxy:function(){var e=this._proxy=mt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(e){var t=ut,n=this._proxy.style[t];Tt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Tt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i)||(k(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),0))},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,_t(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&xt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function sn(e,t){return new on(e,t)}var an=T.extend({options:{position:"topright"},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return _t(t,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),ln=function(e){return new an(e)};on.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",n=this._controlContainer=mt("div",t+"control-container",this._container);function r(r,i){var o=t+r+" "+t+i;e[r+i]=mt("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)gt(this._controlCorners[e]);gt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var cn=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return an.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(s(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){_t(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(_t(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):xt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return xt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=mt("div",e),n=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Jt(t),Gt(t);var r=this._section=mt("section",e+"-list");n&&(this._map.on("click",this.collapse,this),Bt(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=mt("a",e+"-toggle",t);i.href="#",i.title="Layers",i.setAttribute("role","button"),Bt(i,{keydown:function(e){13===e.keyCode&&this._expandSafely()},click:function(e){Kt(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=mt("div",e+"-base",r),this._separator=mt("div",e+"-separator",r),this._overlaysList=mt("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&s(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;vt(this._baseLayersList),vt(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&i>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(s(e.target)),n=t.overlay?"add"===e.type?"overlayadd":"overlayremove":"add"===e.type?"baselayerchange":null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(e){var t,n=document.createElement("label"),r=this._map.hasLayer(e.layer);e.overlay?((t=document.createElement("input")).type="checkbox",t.className="leaflet-control-layers-selector",t.defaultChecked=r):t=this._createRadioElement("leaflet-base-layers_"+s(this),r),this._layerControlInputs.push(t),t.layerId=s(e.layer),Bt(t,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+e.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(t),o.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){if(!this._preventClick){var e,t,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)e=n[o],t=this._getLayer(e.layerId).layer,e.checked?r.push(t):e.checked||i.push(t);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e,t,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)e=n[i],t=this._getLayer(e.layerId).layer,e.disabled=void 0!==t.options.minZoom&&r<t.options.minZoom||void 0!==t.options.maxZoom&&r>t.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Bt(e,"click",Kt),this.expand();var t=this;setTimeout(function(){zt(e,"click",Kt),t._preventClick=!1})}}),un=function(e,t,n){return new cn(e,t,n)},dn=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",n=mt("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",n,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var o=mt("a",n,r);return o.innerHTML=e,o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),Jt(o),Bt(o,"click",Zt),Bt(o,"click",i,this),Bt(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";xt(this._zoomInButton,t),xt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(_t(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(_t(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});on.mergeOptions({zoomControl:!0}),on.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new dn,this.addControl(this.zoomControl))});var hn=function(e){return new dn(e)},pn=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",n=mt("div",t),r=this.options;return this._addScales(r,t+"-line",n),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=mt("div",t,n)),e.imperial&&(this._iScale=mt("div",t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t,n,r,i=3.2808399*e;i>5280?(t=i/5280,n=this._getRoundNum(t),this._updateScale(this._iScale,n+" mi",n/t)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),n=e/t;return t*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),fn=function(e){return new pn(e)},mn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gn=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ue.inlineSvg?mn+" ":"")+"Leaflet</a>"},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=mt("div","leaflet-control-attribution"),Jt(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});on.mergeOptions({attributionControl:!0}),on.addInitHook(function(){this.options.attributionControl&&(new gn).addTo(this)});var vn=function(e){return new gn(e)};an.Layers=cn,an.Zoom=dn,an.Scale=pn,an.Attribution=gn,ln.layers=un,ln.zoom=hn,ln.scale=fn,ln.attribution=vn;var yn=T.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yn.addTo=function(e,t){return e.addHandler(t,this),this};var bn={Events:R},wn=Ue.touch?"touchstart mousedown":"mousedown",_n=N.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){p(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||(Bt(this._dragStartTarget,wn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),zt(this._dragStartTarget,wn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!wt(this._element,"leaflet-zoom-anim")))if(e.touches&&1!==e.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||e.shiftKey||1!==e.which&&1!==e.button&&!e.touches||(_n._dragging=this,this._preventOutline&&Dt(this._element),Nt(),ot(),this._moving))){this.fire("down");var t=e.touches?e.touches[0]:e,n=Pt(this._element);this._startPoint=new O(t.clientX,t.clientY),this._startPos=Rt(this._element),this._parentScale=jt(n);var r="mousedown"===e.type;Bt(document,r?"mousemove":"touchmove",this._onMove,this),Bt(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(e){if(this._enabled)if(e.touches&&e.touches.length>1)this._moved=!0;else{var t=e.touches&&1===e.touches.length?e.touches[0]:e,n=new O(t.clientX,t.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Kt(e),this._moved||(this.fire("dragstart"),this._moved=!0,_t(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_t(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition()))}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),It(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){xt(document.body,"leaflet-dragging"),this._lastTarget&&(xt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),zt(document,"mousemove touchmove",this._onMove,this),zt(document,"mouseup touchend touchcancel",this._onUp,this),Ot(),st();var t=this._moved&&this._moving;this._moving=!1,_n._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function xn(e,t,n){var r,i,o,s,a,l,c,u,d,h=[1,4,2,8];for(i=0,c=e.length;i<c;i++)e[i]._code=Mn(e[i],t);for(s=0;s<4;s++){for(u=h[s],r=[],i=0,o=(c=e.length)-1;i<c;o=i++)a=e[i],l=e[o],a._code&u?l._code&u||((d=Dn(l,a,u,t,n))._code=Mn(d,t),r.push(d)):(l._code&u&&((d=Dn(l,a,u,t,n))._code=Mn(d,t),r.push(d)),r.push(a));e=r}return e}function Sn(e,t){var n,r,i,o,s,a,l,c,u;if(!e||0===e.length)throw new Error("latlngs not passed");Un(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var d=z([0,0]),h=B(e);h.getNorthWest().distanceTo(h.getSouthWest())*h.getNorthEast().distanceTo(h.getNorthWest())<1700&&(d=Cn(e));var p=e.length,f=[];for(n=0;n<p;n++){var m=z(e[n]);f.push(t.project(z([m.lat-d.lat,m.lng-d.lng])))}for(a=l=c=0,n=0,r=p-1;n<p;r=n++)i=f[n],o=f[r],s=i.y*o.x-o.y*i.x,l+=(i.x+o.x)*s,c+=(i.y+o.y)*s,a+=3*s;u=0===a?f[0]:[l/a,c/a];var g=t.unproject(M(u));return z([g.lat+d.lat,g.lng+d.lng])}function Cn(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var o=z(e[i]);t+=o.lat,n+=o.lng,r++}return z([t/r,n/r])}var kn,En={__proto__:null,clipPolygon:xn,polygonCenter:Sn,centroid:Cn};function An(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Rn(e=Nn(e,n),n)}function Tn(e,t,n){return Math.sqrt(jn(e,t,n,!0))}function In(e,t,n){return jn(e,t,n)}function Rn(e,t){var n=e.length,r=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,Ln(e,r,t,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(e[i]);return o}function Ln(e,t,n,r,i){var o,s,a,l=0;for(s=r+1;s<=i-1;s++)(a=jn(e[s],e[r],e[i],!0))>l&&(o=s,l=a);l>n&&(t[o]=1,Ln(e,t,n,r,o),Ln(e,t,n,o,i))}function Nn(e,t){for(var n=[e[0]],r=1,i=0,o=e.length;r<o;r++)Pn(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<o-1&&n.push(e[o-1]),n}function On(e,t,n,r,i){var o,s,a,l=r?kn:Mn(e,n),c=Mn(t,n);for(kn=c;;){if(!(l|c))return[e,t];if(l&c)return!1;a=Mn(s=Dn(e,t,o=l||c,n,i),n),o===l?(e=s,l=a):(t=s,c=a)}}function Dn(e,t,n,r,i){var o,s,a=t.x-e.x,l=t.y-e.y,c=r.min,u=r.max;return 8&n?(o=e.x+a*(u.y-e.y)/l,s=u.y):4&n?(o=e.x+a*(c.y-e.y)/l,s=c.y):2&n?(o=u.x,s=e.y+l*(u.x-e.x)/a):1&n&&(o=c.x,s=e.y+l*(c.x-e.x)/a),new O(o,s,i)}function Mn(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Pn(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function jn(e,t,n,r){var i,o=t.x,s=t.y,a=n.x-o,l=n.y-s,c=a*a+l*l;return c>0&&((i=((e.x-o)*a+(e.y-s)*l)/c)>1?(o=n.x,s=n.y):i>0&&(o+=a*i,s+=l*i)),a=e.x-o,l=e.y-s,r?a*a+l*l:new O(o,s)}function Un(e){return!v(e[0])||"object"!=typeof e[0][0]&&void 0!==e[0][0]}function Bn(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Un(e)}function Fn(e,t){var n,r,i,o,s,a,l,c;if(!e||0===e.length)throw new Error("latlngs not passed");Un(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var u=z([0,0]),d=B(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=Cn(e));var h=e.length,p=[];for(n=0;n<h;n++){var f=z(e[n]);p.push(t.project(z([f.lat-u.lat,f.lng-u.lng])))}for(n=0,r=0;n<h-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(0===r)c=p[0];else for(n=0,o=0;n<h-1;n++)if(s=p[n],a=p[n+1],(o+=i=s.distanceTo(a))>r){l=(o-r)/i,c=[a.x-l*(a.x-s.x),a.y-l*(a.y-s.y)];break}var m=t.unproject(M(c));return z([m.lat+u.lat,m.lng+u.lng])}var zn={__proto__:null,simplify:An,pointToSegmentDistance:Tn,closestPointOnSegment:In,clipSegment:On,_getEdgeIntersection:Dn,_getBitCode:Mn,_sqClosestPointOnSegment:jn,isFlat:Un,_flat:Bn,polylineCenter:Fn},qn={project:function(e){return new O(e.lng,e.lat)},unproject:function(e){return new F(e.y,e.x)},bounds:new P([-180,-90],[180,90])},$n={R:6378137,R_MINOR:6356752.314245179,bounds:new P([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),s=o*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-s)/(1+s),o/2);return r=-n*Math.log(Math.max(a,1e-10)),new O(e.lng*t*n,r)},unproject:function(e){for(var t,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),s=Math.exp(-e.y/r),a=Math.PI/2-2*Math.atan(s),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)t=o*Math.sin(a),t=Math.pow((1-t)/(1+t),o/2),a+=c=Math.PI/2-2*Math.atan(s*t)-a;return new F(a*n,e.x*n/r)}},Hn={__proto__:null,LonLat:qn,Mercator:$n,SphericalMercator:W},Vn=n({},H,{code:"EPSG:3395",projection:$n,transformation:function(){var e=.5/(Math.PI*$n.R);return J(e,.5,-e,.5)}()}),Wn=n({},H,{code:"EPSG:4326",projection:qn,transformation:J(1/180,1,-1/180,.5)}),Gn=n({},$,{projection:qn,transformation:J(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});$.Earth=H,$.EPSG3395=Vn,$.EPSG3857=K,$.EPSG900913=Z,$.EPSG4326=Wn,$.Simple=Gn;var Jn=N.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[s(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[s(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once("remove",function(){t.off(n,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});on.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=s(e);return this._layers[t]||(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e)),this},removeLayer:function(e){var t=s(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return s(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){for(var t=0,n=(e=e?v(e)?e:[e]:[]).length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){isNaN(e.options.maxZoom)&&isNaN(e.options.minZoom)||(this._zoomBoundLayers[s(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=s(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=void 0===i.minZoom?e:Math.min(e,i.minZoom),t=void 0===i.maxZoom?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Kn=Jn.extend({initialize:function(e,t){var n,r;if(p(this,t),this._layers={},e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return("number"==typeof e?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t,n,r=Array.prototype.slice.call(arguments,1);for(t in this._layers)(n=this._layers[t])[e]&&n[e].apply(n,r);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return s(e)}}),Zn=function(e,t){return new Kn(e,t)},Qn=Kn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Kn.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Kn.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new U;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),Xn=function(e,t){return new Qn(e,t)},Yn=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if("icon"===e)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,t&&"IMG"===t.tagName?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+"Size"];"number"==typeof r&&(r=[r,r]);var i=M(r),o=M("shadow"===t&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(n.className||""),o&&(e.style.marginLeft=-o.x+"px",e.style.marginTop=-o.y+"px"),i&&(e.style.width=i.x+"px",e.style.height=i.y+"px")},_createImg:function(e,t){return(t=t||document.createElement("img")).src=e,t},_getIconUrl:function(e){return Ue.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function er(e){return new Yn(e)}var tr=Yn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return"string"!=typeof tr.imagePath&&(tr.imagePath=this._detectIconPath()),(this.options.imagePath||tr.imagePath)+Yn.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return(e=t(e,/^url\((['"])?(.+)\1\)$/,2))&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=mt("div","leaflet-default-icon-path",document.body),t=ft(e,"background-image")||ft(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t))return t;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),nr=yn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new _n(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_t(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&xt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=Rt(t._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=j(s.min._subtract(a).add(i),s.max._subtract(a).subtract(i));if(!l.contains(o)){var c=M((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),It(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=k(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=Rt(t._icon),i=t._map.layerPointToLatLng(r);n&&It(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){E(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),rr=Jn.extend({options:{icon:new tr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=z(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),"IMG"===n.tagName&&(n.alt=e.alt||"")),_t(n,t),e.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Bt(n,"focus",this._panOnFocus,this);var i=e.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(_t(i,t),i.alt=""),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&zt(this._icon,"focus",this._panOnFocus,this),gt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&It(this._icon,e),this._shadow&&It(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(_t(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nr)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nr(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&kt(this._icon,e),this._shadow&&kt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?M(t.iconSize):M(0,0),r=t.iconAnchor?M(t.iconAnchor):M(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ir(e,t){return new rr(e,t)}var or=Jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sr=or.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=z(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=z(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return or.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new P(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ar(e,t){return new sr(e,t)}var lr=sr.extend({initialize:function(e,t,r){if("number"==typeof t&&(t=n({},r,{radius:t})),p(this,t),this._latlng=z(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:or.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===H.distance){var i=Math.PI/180,o=this._mRadius/H.R/i,s=n.project([t+o,e]),a=n.project([t-o,e]),l=s.add(a).divideBy(2),c=n.unproject(l).lat,u=Math.acos((Math.cos(o*i)-Math.sin(t*i)*Math.sin(c*i))/(Math.cos(t*i)*Math.cos(c*i)))/i;(isNaN(u)||0===u)&&(u=o/Math.cos(Math.PI/180*t)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:l.x-n.project([c,e-u]).x,this._radiusY=l.y-s.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function cr(e,t,n){return new lr(e,t,n)}var ur=or.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t,n,r=1/0,i=null,o=jn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],c=1,u=l.length;c<u;c++){var d=o(e,t=l[c-1],n=l[c],!0);d<r&&(r=d,i=o(e,t,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=z(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new U,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Un(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=Un(e),r=0,i=e.length;r<i;r++)n?(t[r]=z(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new O(e,e);this._rawPxBounds&&(this._pxBounds=new P([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r,i,o=e[0]instanceof F,s=e.length;if(o){for(i=[],r=0;r<s;r++)i[r]=this._map.latLngToLayerPoint(e[r]),n.extend(i[r]);t.push(i)}else for(r=0;r<s;r++)this._projectLatlngs(e[r],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else{var t,n,r,i,o,s,a,l=this._parts;for(t=0,r=0,i=this._rings.length;t<i;t++)for(n=0,o=(a=this._rings[t]).length;n<o-1;n++)(s=On(a[n],a[n+1],e,n,!0))&&(l[r]=l[r]||[],l[r].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[r].push(s[1]),r++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=An(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(s=(a=this._parts[n]).length)-1;r<s;i=r++)if((t||0!==r)&&Tn(e,a[i],a[r])<=l)return!0;return!1}});function dr(e,t){return new ur(e,t)}ur._flat=Bn;var hr=ur.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Sn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=ur.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof F&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){ur.prototype._setLatLngs.call(this,e),Un(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Un(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new O(t,t);if(e=new P(e.min.subtract(n),e.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(e))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=xn(this._rings[i],e,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t,n,r,i,o,s,a,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,a=this._parts.length;i<a;i++)for(o=0,s=(l=(t=this._parts[i]).length)-1;o<l;s=o++)n=t[o],r=t[s],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||ur.prototype._containsPoint.call(this,e,!0)}});function pr(e,t){return new hr(e,t)}var fr=Qn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t,n,r,i=v(e)?e:e.features;if(i){for(t=0,n=i.length;t<n;t++)((r=i[t]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(e))return this;var s=mr(e,o);return s?(s.feature=xr(e),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(e,s),this.addLayer(s)):this},resetStyle:function(e){return void 0===e?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&("function"==typeof t&&(t=t(e.feature)),e.setStyle(t))}});function mr(e,t){var n,r,i,o,s="Feature"===e.type?e.geometry:e,a=s?s.coordinates:null,l=[],c=t&&t.pointToLayer,u=t&&t.coordsToLatLng||vr;if(!a&&!s)return null;switch(s.type){case"Point":return gr(c,e,n=u(a),t);case"MultiPoint":for(i=0,o=a.length;i<o;i++)n=u(a[i]),l.push(gr(c,e,n,t));return new Qn(l);case"LineString":case"MultiLineString":return r=yr(a,"LineString"===s.type?0:1,u),new ur(r,t);case"Polygon":case"MultiPolygon":return r=yr(a,"Polygon"===s.type?1:2,u),new hr(r,t);case"GeometryCollection":for(i=0,o=s.geometries.length;i<o;i++){var d=mr({geometry:s.geometries[i],type:"Feature",properties:e.properties},t);d&&l.push(d)}return new Qn(l);case"FeatureCollection":for(i=0,o=s.features.length;i<o;i++){var h=mr(s.features[i],t);h&&l.push(h)}return new Qn(l);default:throw new Error("Invalid GeoJSON object.")}}function gr(e,t,n,r){return e?e(t,n):new rr(n,r&&r.markersInheritOptions&&r)}function vr(e){return new F(e[1],e[0],e[2])}function yr(e,t,n){for(var r,i=[],o=0,s=e.length;o<s;o++)r=t?yr(e[o],t-1,n):(n||vr)(e[o]),i.push(r);return i}function br(e,t){return void 0!==(e=z(e)).alt?[u(e.lng,t),u(e.lat,t),u(e.alt,t)]:[u(e.lng,t),u(e.lat,t)]}function wr(e,t,n,r){for(var i=[],o=0,s=e.length;o<s;o++)i.push(t?wr(e[o],Un(e[o])?0:t-1,n,r):br(e[o],r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function _r(e,t){return e.feature?n({},e.feature,{geometry:t}):xr(t)}function xr(e){return"Feature"===e.type||"FeatureCollection"===e.type?e:{type:"Feature",properties:{},geometry:e}}var Sr={toGeoJSON:function(e){return _r(this,{type:"Point",coordinates:br(this.getLatLng(),e)})}};function Cr(e,t){return new fr(e,t)}rr.include(Sr),lr.include(Sr),sr.include(Sr),ur.include({toGeoJSON:function(e){var t=!Un(this._latlngs);return _r(this,{type:(t?"Multi":"")+"LineString",coordinates:wr(this._latlngs,t?1:0,!1,e)})}}),hr.include({toGeoJSON:function(e){var t=!Un(this._latlngs),n=t&&!Un(this._latlngs[0]),r=wr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),_r(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Kn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),_r(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint(e);var n="GeometryCollection"===t,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var o=xr(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}}),n?_r(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var kr=Cr,Er=Jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,n){this._url=e,this._bounds=B(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_t(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&yt(this._image),this},bringToBack:function(){return this._map&&bt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=B(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e="IMG"===this._url.tagName,t=this._image=e?this._url:mt("img");_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onload=i(this.fire,this,"load"),t.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(t.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e?this._url=t.src:(t.src=this._url,t.alt=this.options.alt)},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Tt(this._image,n,t)},_reset:function(){var e=this._image,t=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();It(e,t.min),e.style.width=n.x+"px",e.style.height=n.y+"px"},_updateOpacity:function(){kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ar=function(e,t,n){return new Er(e,t,n)},Tr=Er.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e="VIDEO"===this._url.tagName,t=this._image=e?this._url:mt("video");if(_t(t,"leaflet-image-layer"),this._zoomAnimated&&_t(t,"leaflet-zoom-animated"),this.options.className&&_t(t,this.options.className),t.onselectstart=c,t.onmousemove=c,t.onloadeddata=i(this.fire,this,"load"),e){for(var n=t.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[t.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=mt("source");a.src=this._url[s],t.appendChild(a)}}}});function Ir(e,t,n){return new Tr(e,t,n)}var Rr=Er.extend({_initImage:function(){var e=this._image=this._url;_t(e,"leaflet-image-layer"),this._zoomAnimated&&_t(e,"leaflet-zoom-animated"),this.options.className&&_t(e,this.options.className),e.onselectstart=c,e.onmousemove=c}});function Lr(e,t,n){return new Rr(e,t,n)}var Nr=Jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof F||v(e))?(this._latlng=z(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return(e=arguments.length?e:this._source._map).hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&kt(this._container,1),this.bringToFront(),this.options.interactive&&(_t(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(kt(this._container,0),this._removeTimeout=setTimeout(i(gt,void 0,this._container),200)):gt(this._container),this.options.interactive&&(xt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=z(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&yt(this._container),this},bringToBack:function(){return this._map&&bt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Qn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else{if(!t.getBounds)throw new Error("Unable to get source layer LatLng.");e=t.getBounds().getCenter()}return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof t)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=M(this.options.offset),n=this._getAnchor();this._zoomAnimated?It(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});on.include({_initOverlay:function(e,t,n,r){var i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),Jn.include({_initOverlay:function(e,t,n,r){var i=n;return i instanceof e?(p(i,r),i._source=this):(i=t&&!r?t:new e(r,this)).setContent(n),i}});var Or=Nr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return!(e=arguments.length?e:this._source._map).hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Nr.prototype.openOn.call(this,e)},onAdd:function(e){Nr.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof or||this._source.on("preclick",Wt))},onRemove:function(e){Nr.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof or||this._source.off("preclick",Wt))},getEvents:function(){var e=Nr.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=mt("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=mt("div",e+"-content-wrapper",t);if(this._contentNode=mt("div",e+"-content",n),Jt(t),Gt(this._contentNode),Bt(t,"contextmenu",Wt),this._tipContainer=mt("div",e+"-tip-container",t),this._tip=mt("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=mt("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Bt(r,"click",function(e){Kt(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(t.height=i+"px",_t(e,o)):xt(e,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();It(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan)if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)this._autopanning=!1;else{var e=this._map,t=parseInt(ft(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new O(this._containerLeft,-n-this._containerBottom);i._add(Rt(this._container));var o=e.layerPointToContainerPoint(i),s=M(this.options.autoPanPadding),a=M(this.options.autoPanPaddingTopLeft||s),l=M(this.options.autoPanPaddingBottomRight||s),c=e.getSize(),u=0,d=0;o.x+r+l.x>c.x&&(u=o.x+r-c.x+l.x),o.x-u-a.x<0&&(u=o.x-a.x),o.y+n+l.y>c.y&&(d=o.y+n-c.y+l.y),o.y-d-a.y<0&&(d=o.y-a.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([u,d]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dr=function(e,t){return new Or(e,t)};on.mergeOptions({closePopupOnClick:!0}),on.include({openPopup:function(e,t,n){return this._initOverlay(Or,e,t,n).openOn(this),this},closePopup:function(e){return(e=arguments.length?e:this._popup)&&e.close(),this}}),Jn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Or,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(this._popup&&this._map){Zt(e);var t=e.layer||e.target;this._popup._source!==t||t instanceof or?(this._popup._source=t,this.openPopup(e.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){13===e.originalEvent.keyCode&&this._openPopup(e)}});var Mr=Nr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Nr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Nr.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Nr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=mt("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),s=r.layerPointToContainerPoint(e),a=this.options.direction,l=i.offsetWidth,c=i.offsetHeight,u=M(this.options.offset),d=this._getAnchor();"top"===a?(t=l/2,n=c):"bottom"===a?(t=l/2,n=0):"center"===a?(t=l/2,n=c/2):"right"===a?(t=0,n=c/2):"left"===a?(t=l,n=c/2):s.x<o.x?(a="right",t=0,n=c/2):(a="left",t=l+2*(u.x+d.x),n=c/2),e=e.subtract(M(t,n,!0)).add(u).add(d),xt(i,"leaflet-tooltip-right"),xt(i,"leaflet-tooltip-left"),xt(i,"leaflet-tooltip-top"),xt(i,"leaflet-tooltip-bottom"),_t(i,"leaflet-tooltip-"+a),It(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&kt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pr=function(e,t){return new Mr(e,t)};on.include({openTooltip:function(e,t,n){return this._initOverlay(Mr,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Jn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(e||!this._tooltipHandlersAdded){var t=e?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t="function"==typeof e.getElement&&e.getElement();t&&(Bt(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Bt(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t="function"==typeof e.getElement&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(this._tooltip&&this._map)if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)})}else this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)},_moveTooltip:function(e){var t,n,r=e.latlng;this._tooltip.options.sticky&&e.originalEvent&&(t=this._map.mouseEventToContainerPoint(e.originalEvent),n=this._map.containerPointToLayerPoint(t),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var jr=Yn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),n=this.options;if(n.html instanceof Element?(vt(t),t.appendChild(n.html)):t.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=M(n.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function Ur(e){return new jr(e)}Yn.Default=tr;var Br=Jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),gt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(yt(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(bt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof O?e:new O(e,e)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t,n=this.getPane().children,r=-e(-1/0,1/0),i=0,o=n.length;i<o;i++)t=n[i].style.zIndex,n[i]!==this._container&&t&&(r=e(r,+t));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ue.ielt9){kt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(e-i.loaded)/200);kt(i.el,o),o<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(E(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:c,_initContainer:function(){this._container||(this._container=mt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(void 0!==e){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(gt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||((r=this._levels[e]={}).el=mt("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),c(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:c,_onRemoveLevel:c,_onCreateLevel:c,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(e in this._tiles)(t=this._tiles[e]).retain=t.current;for(e in this._tiles)if((t=this._tiles[e]).current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)gt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),o=Math.floor(t/2),s=n-1,a=new O(+i,+o);a.z=+s;var l=this._tileCoordsToKey(a),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),s>r&&this._retainParent(i,o,s,r))},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var o=2*t;o<2*t+2;o++){var s=new O(i,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return void 0!==t.minNativeZoom&&e<t.minNativeZoom?t.minNativeZoom:void 0!==t.maxNativeZoom&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=Math.round(t);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();Ue.any3d?Tt(e.el,i,r):It(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),o=t.getSize().divideBy(2*r);return new P(i.subtract(o),i.add(o))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(void 0===e&&(e=t.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),o=i.getCenter(),s=[],a=this.options.keepBuffer,l=new P(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var u=this._tiles[c].coords;u.z===this._tileZoom&&l.contains(new O(u.x,u.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(e,n);else{for(var d=i.min.y;d<=i.max.y;d++)for(var h=i.min.x;h<=i.max.x;h++){var p=new O(h,d);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:s.push(p)}}if(s.sort(function(e,t){return e.distanceTo(o)-t.distanceTo(o)}),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(h=0;h<s.length;h++)this._addTile(s[h],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return B(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new U(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),n=new O(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(gt(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){_t(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=c,e.onmousemove=c,Ue.ielt9&&this.options.opacity<1&&kt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),o=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(o),this.createTile.length<2&&k(i(this._tileReady,this,e,null,o)),It(o,n),this._tiles[r]={el:o,coords:e,current:!0},t.appendChild(o),this.fire("tileloadstart",{tile:o,coords:e})},_tileReady:function(e,t,n){t&&this.fire("tileerror",{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(kt(n.el,0),E(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(_t(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ue.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new O(this._wrapX?l(e.x,this._wrapX):e.x,this._wrapY?l(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new P(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Fr(e){return new Br(e)}var zr=Br.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,(t=p(this,t)).detectRetina&&Ue.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&void 0===t&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement("img");return Bt(n,"load",i(this._tileOnLoad,this,t,n)),Bt(n,"error",i(this._tileOnError,this,t,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:Ue.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t["-y"]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){Ue.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom;return this.options.zoomReverse&&(e=t-e),e+this.options.zoomOffset},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&((t=this._tiles[e].el).onload=c,t.onerror=c,!t.complete)){t.src=b;var n=this._tiles[e].coords;gt(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",b),Br.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(this._map&&(!n||n.getAttribute("src")!==b))return Br.prototype._tileReady.call(this,e,t,n)}});function qr(e,t){return new zr(e,t)}var $r=zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);var o=(t=p(this,t)).detectRetina&&Ue.retina?2:1,s=this.getTileSize();r.width=s.x*o,r.height=s.y*o,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,zr.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=j(n.project(t[0]),n.project(t[1])),i=r.min,o=r.max,s=(this._wmsVersion>=1.3&&this._crs===Wn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),a=zr.prototype.getTileUrl.call(this,e);return a+f(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Hr(e,t){return new $r(e,t)}zr.WMS=$r,qr.wms=Hr;var Vr=Jn.extend({options:{padding:.1},initialize:function(e){p(this,e),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),_t(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),o=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));Ue.any3d?Tt(this._container,o,n):It(this._container,o)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new P(n,n.add(t.multiplyBy(1+2*e)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Wr=Vr.extend({options:{tolerance:0},getEvents:function(){var e=Vr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Bt(e,"mousemove",this._onMouseMove,this),Bt(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Bt(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,gt(this._container),zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var e in this._redrawBounds=null,this._layers)this._layers[e]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=Ue.retina?2:1;It(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+"px",t.style.height=n.y+"px",Ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Vr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[s(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[s(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if("string"==typeof e.options.dashArray){var t,n,r=e.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(t=Number(r[n]),isNaN(t))return;i.push(t)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,o,s=e._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(r=0,i=s[n].length;r<i;r++)o=s[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);t&&l.closePath()}this._fillStroke(l,e)}}},_updateCircle:function(e){if(this._drawing&&!e._empty()){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t,n,r=this._map.mouseEventToLayerPoint(e),i=this._drawFirst;i;i=i.next)(t=i.layer).options.interactive&&t._containsPoint(r)&&("click"!==e.type&&"preclick"!==e.type||!this._map._draggableMoved(t))&&(n=t);this._fireEvent(!!n&&[n],e)},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(xt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(_t(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],e),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e))}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e))}}});function Gr(e){return Ue.canvas?new Wr(e):null}var Jr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch(e){}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Kr={_initContainer:function(){this._container=mt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vr.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Jr("shape");_t(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Jr("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;gt(t),e.removeInteractiveTarget(t),delete this._layers[s(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Jr("stroke")),i.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||(n=e._fill=Jr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+n+","+r+" 0,23592600")},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){yt(e._container)},_bringToBack:function(e){bt(e._container)}},Zr=Ue.vml?Jr:Q,Qr=Vr.extend({_initContainer:function(){this._container=Zr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gt(this._container),zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(t)||(this._svgSize=t,n.setAttribute("width",t.x),n.setAttribute("height",t.y)),It(n,e.min),n.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=Zr("path");e.options.className&&_t(t,e.options.className),e.options.interactive&&_t(t,"leaflet-interactive"),this._updateStyle(e),this._layers[s(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){gt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[s(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight),t.setAttribute("stroke-linecap",n.lineCap),t.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?t.setAttribute("stroke-dasharray",n.dashArray):t.removeAttribute("stroke-dasharray"),n.dashOffset?t.setAttribute("stroke-dashoffset",n.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity),t.setAttribute("fill-rule",n.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,X(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r="a"+n+","+(Math.max(Math.round(e._radiusY),1)||n)+" 0 1,0 ",i=e._empty()?"M0 0":"M"+(t.x-n)+","+t.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(e,i)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){yt(e._path)},_bringToBack:function(e){bt(e._path)}});function Xr(e){return Ue.svg||Ue.vml?new Qr(e):null}Ue.vml&&Qr.include(Kr),on.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if("overlayPane"===e||void 0===e)return!1;var t=this._paneRenderers[e];return void 0===t&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Gr(e)||Xr(e)}});var Yr=hr.extend({initialize:function(e,t){hr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return[(e=B(e)).getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function ei(e,t){return new Yr(e,t)}Qr.create=Zr,Qr.pointsToPath=X,fr.geometryToLayer=mr,fr.coordsToLatLng=vr,fr.coordsToLatLngs=yr,fr.latLngToCoords=br,fr.latLngsToCoords=wr,fr.getFeature=_r,fr.asFeature=xr,on.mergeOptions({boxZoom:!0});var ti=yn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Bt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||1!==e.which&&1!==e.button)return!1;this._clearDeferredResetState(),this._resetState(),ot(),Nt(),this._startPoint=this._map.mouseEventToContainerPoint(e),Bt(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=mt("div","leaflet-zoom-box",this._container),_t(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new P(this._point,this._startPoint),n=t.getSize();It(this._box,t.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(gt(this._box),xt(this._container,"leaflet-crosshair")),st(),Ot(),zt(document,{contextmenu:Zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if((1===e.which||1===e.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){27===e.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});on.addInitHook("addHandler","boxZoom",ti),on.mergeOptions({doubleClickZoom:!0});var ni=yn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;"center"===t.options.doubleClickZoom?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});on.addInitHook("addHandler","doubleClickZoom",ni),on.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ri=yn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new _n(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}_t(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){xt(this._map._container,"leaflet-grab"),xt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=B(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,o=(r+t+n)%e-t-n,s=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=i.multiplyBy(s/o),l=a.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,l),u=a.multiplyBy(c/l),d=c/(n.inertiaDeceleration*s),h=u.multiplyBy(-d/2).round();h.x||h.y?(h=t._limitOffset(h,t.options.maxBounds),k(function(){t.panBy(h,{duration:d,easeLinearity:s,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});on.addInitHook("addHandler","dragging",ri),on.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ii=yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Bt(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t,n,r=this._panKeys={},i=this.keyCodes;for(t=0,n=i.left.length;t<n;t++)r[i.left[t]]=[-1*e,0];for(t=0,n=i.right.length;t<n;t++)r[i.right[t]]=[e,0];for(t=0,n=i.down.length;t<n;t++)r[i.down[t]]=[0,e];for(t=0,n=i.up.length;t<n;t++)r[i.up[t]]=[0,-1*e]},_setZoomDelta:function(e){var t,n,r=this._zoomKeys={},i=this.keyCodes;for(t=0,n=i.zoomIn.length;t<n;t++)r[i.zoomIn[t]]=e;for(t=0,n=i.zoomOut.length;t<n;t++)r[i.zoomOut[t]]=-e},_addHooks:function(){Bt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t,n=e.keyCode,r=this._map;if(n in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(t=this._panKeys[n],e.shiftKey&&(t=M(t).multiplyBy(3)),r.options.maxBounds&&(t=r._limitOffset(M(t),r.options.maxBounds)),r.options.worldCopyJump){var i=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(t)));r.panTo(i)}else r.panBy(t)}else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Zt(e)}}});on.addInitHook("addHandler","keyboard",ii),on.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var oi=yn.extend({addHooks:function(){Bt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=en(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Zt(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,s=e._limitZoom(t+(this._delta>0?o:-o))-t;this._delta=0,this._startTime=null,s&&("center"===e.options.scrollWheelZoom?e.setZoom(t+s):e.setZoomAround(this._lastMousePos,t+s))}});on.addInitHook("addHandler","scrollWheelZoom",oi);var si=600;on.mergeOptions({tapHold:Ue.touchNative&&Ue.safari&&Ue.mobile,tapTolerance:15});var ai=yn.extend({addHooks:function(){Bt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),1===e.touches.length){var t=e.touches[0];this._startPos=this._newPos=new O(t.clientX,t.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(Bt(document,"touchend",Kt),Bt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),si),Bt(document,"touchend touchcancel contextmenu",this._cancel,this),Bt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){zt(document,"touchend",Kt),zt(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),zt(document,"touchend touchcancel contextmenu",this._cancel,this),zt(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new O(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});on.addInitHook("addHandler","tapHold",ai),on.mergeOptions({touchZoom:Ue.touch,bounceAtZoomLimits:!0});var li=yn.extend({addHooks:function(){_t(this._map._container,"leaflet-touch-zoom"),Bt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){xt(this._map._container,"leaflet-touch-zoom"),zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(e.touches&&2===e.touches.length&&!t._animatingZoom&&!this._zooming){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),"center"!==t.options.touchZoom&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Bt(document,"touchmove",this._onTouchMove,this),Bt(document,"touchend touchcancel",this._onTouchEnd,this),Kt(e)}},_onTouchMove:function(e){if(e.touches&&2===e.touches.length&&this._zooming){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(o,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&o<1||this._zoom>t.getMaxZoom()&&o>1)&&(this._zoom=t._limitZoom(this._zoom)),"center"===t.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),E(this._animRequest);var a=i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(a,this,!0),Kt(e)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,E(this._animRequest),zt(document,"touchmove",this._onTouchMove,this),zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});on.addInitHook("addHandler","touchZoom",li),on.BoxZoom=ti,on.DoubleClickZoom=ni,on.Drag=ri,on.Keyboard=ii,on.ScrollWheelZoom=oi,on.TapHold=ai,on.TouchZoom=li,e.Bounds=P,e.Browser=Ue,e.CRS=$,e.Canvas=Wr,e.Circle=lr,e.CircleMarker=sr,e.Class=T,e.Control=an,e.DivIcon=jr,e.DivOverlay=Nr,e.DomEvent=nn,e.DomUtil=Ut,e.Draggable=_n,e.Evented=N,e.FeatureGroup=Qn,e.GeoJSON=fr,e.GridLayer=Br,e.Handler=yn,e.Icon=Yn,e.ImageOverlay=Er,e.LatLng=F,e.LatLngBounds=U,e.Layer=Jn,e.LayerGroup=Kn,e.LineUtil=zn,e.Map=on,e.Marker=rr,e.Mixin=bn,e.Path=or,e.Point=O,e.PolyUtil=En,e.Polygon=hr,e.Polyline=ur,e.Popup=Or,e.PosAnimation=rn,e.Projection=Hn,e.Rectangle=Yr,e.Renderer=Vr,e.SVG=Qr,e.SVGOverlay=Rr,e.TileLayer=zr,e.Tooltip=Mr,e.Transformation=G,e.Util=A,e.VideoOverlay=Tr,e.bind=i,e.bounds=j,e.canvas=Gr,e.circle=cr,e.circleMarker=ar,e.control=ln,e.divIcon=Ur,e.extend=n,e.featureGroup=Xn,e.geoJSON=Cr,e.geoJson=kr,e.gridLayer=Fr,e.icon=er,e.imageOverlay=Ar,e.latLng=z,e.latLngBounds=B,e.layerGroup=Zn,e.map=sn,e.marker=ir,e.point=M,e.polygon=pr,e.polyline=dr,e.popup=Dr,e.rectangle=ei,e.setOptions=p,e.stamp=s,e.svg=Xr,e.svgOverlay=Lr,e.tileLayer=qr,e.tooltip=Pr,e.transformation=J,e.version=t,e.videoOverlay=Ir;var ci=window.L;e.noConflict=function(){return window.L=ci,this},window.L=e}(t)},1873:(e,t,n)=>{var r=n(9325).Symbol;e.exports=r},2552:(e,t,n)=>{var r=n(1873),i=n(659),o=n(9350),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},4128:(e,t,n)=>{var r=n(1800),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},4840:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},659:(e,t,n)=>{var r=n(1873),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9325:(e,t,n)=>{var r=n(4840),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},1800:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},2177:(e,t,n)=>{var r=n(1489);e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4394:(e,t,n)=>{var r=n(2552),i=n(346);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},8059:(e,t,n)=>{var r=n(2177);e.exports=function(e){return r(2,e)}},7400:(e,t,n)=>{var r=n(9374),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},1489:(e,t,n)=>{var r=n(7400);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},9374:(e,t,n)=>{var r=n(4128),i=n(3805),o=n(4394),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},4809:function(e,t){var n,r,i;r=[],n=function e(){var t,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:{},r=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,o={},s=0,a={};function l(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new p(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){var r=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<r){let t=this._config.newline;t||(o=this._config.quoteChar||'"',t=this._handle.guessLineEndings(e,o)),e=[...e.split(t).slice(r)].join(t)}this.isFirstChunk&&_(this._config.beforeFirstChunk)&&void 0!==(o=this._config.beforeFirstChunk(e))&&(e=o),this.isFirstChunk=!1,this._halted=!1,r=this._partialLine+e;var o=(this._partialLine="",this._handle.parse(r,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(e=o.meta.cursor,this._finished||(this._partialLine=r.substring(e-this._baseIndex),this._baseIndex=e),o&&o.data&&(this._rowCount+=o.data.length),r=this._finished||this._config.preview&&this._rowCount>=this._config.preview,i)n.postMessage({results:o,workerId:a.WORKER_ID,finished:r});else if(_(this._config.chunk)&&!t){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!r||!_(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),r||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):i&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function c(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),l.call(this,e),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),r||(t.onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var e,n=this._config.downloadRequestHeaders;for(e in n)t.setRequestHeader(e,n[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}r&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader("Content-Range"))?parseInt(e.substring(e.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(e){e=t.statusText||e,this._sendError(new Error(e))}}function u(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),l.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=w(this._chunkLoaded,this),t.onerror=w(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,i=(this._config.chunkSize&&(i=Math.min(this._start+this._config.chunkSize,this._input.size),e=n.call(e,this._start,i)),t.readAsText(e,this._config.encoding));r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;l.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){var e,n;if(!this._finished)return e=this._config.chunkSize,t=e?(n=t.substring(0,e),t.substring(e)):(n=t,""),this._finished=!t,this.parseChunk(n)}}function h(e){l.call(this,e=e||{});var t=[],n=!0,r=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=w(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=w(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=w(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=w(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(e){var t,n,r,i,o=Math.pow(2,53),s=-o,l=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,u=this,d=0,h=0,p=!1,g=!1,v=[],y={data:[],errors:[],meta:{}};function w(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function x(){if(y&&r&&(C("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines&&(y.data=y.data.filter(function(e){return!w(e)})),S()){if(y)if(Array.isArray(y.data[0])){for(var t=0;S()&&t<y.data.length;t++)y.data[t].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(t,n){_(e.transformHeader)&&(t=e.transformHeader(t,n)),v.push(t)}}function i(t,n){for(var r=e.header?{}:[],i=0;i<t.length;i++){var a=i,u=t[i];u=((t,n)=>(t=>(e.dynamicTypingFunction&&void 0===e.dynamicTyping[t]&&(e.dynamicTyping[t]=e.dynamicTypingFunction(t)),!0===(e.dynamicTyping[t]||e.dynamicTyping)))(t)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&((e=>{if(l.test(e)&&(e=parseFloat(e),s<e&&e<o))return 1})(n)?parseFloat(n):c.test(n)?new Date(n):""===n?null:n):n)(a=e.header?i>=v.length?"__parsed_extra":v[i]:a,u=e.transform?e.transform(u,a):u),"__parsed_extra"===a?(r[a]=r[a]||[],r[a].push(u)):r[a]=u}return e.header&&(i>v.length?C("FieldMismatch","TooManyFields","Too many fields: expected "+v.length+" fields but parsed "+i,h+n):i<v.length&&C("FieldMismatch","TooFewFields","Too few fields: expected "+v.length+" fields but parsed "+i,h+n)),r}var u;y&&(e.header||e.dynamicTyping||e.transform)&&(u=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(i),u=y.data.length):y.data=i(y.data,0),e.header&&y.meta&&(y.meta.fields=v),h+=u)}function S(){return e.header&&0===v.length}function C(e,t,n,r){e={type:e,code:t,message:n},void 0!==r&&(e.row=r),y.errors.push(e)}_(e.step)&&(i=e.step,e.step=function(t){y=t,S()?x():(x(),0!==y.data.length&&(d+=t.data.length,e.preview&&d>e.preview?n.abort():(y.data=y.data[0],i(y,u))))}),this.parse=function(i,o,s){var l=e.quoteChar||'"';return e.newline||(e.newline=this.guessLineEndings(i,l)),r=!1,e.delimiter?_(e.delimiter)&&(e.delimiter=e.delimiter(i),y.meta.delimiter=e.delimiter):((l=((t,n,r,i,o)=>{var s,l,c,u;o=o||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<o.length;d++){for(var h,p=o[d],f=0,g=0,v=0,y=(c=void 0,new m({comments:i,delimiter:p,newline:n,preview:10}).parse(t)),b=0;b<y.data.length;b++)r&&w(y.data[b])?v++:(g+=h=y.data[b].length,void 0===c?c=h:0<h&&(f+=Math.abs(h-c),c=h));0<y.data.length&&(g/=y.data.length-v),(void 0===l||f<=l)&&(void 0===u||u<g)&&1.99<g&&(l=f,s=p,u=g)}return{successful:!!(e.delimiter=s),bestDelimiter:s}})(i,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(r=!0,e.delimiter=a.DefaultDelimiter),y.meta.delimiter=e.delimiter),l=b(e),e.preview&&e.header&&l.preview++,t=i,n=new m(l),y=n.parse(t,o,s),x(),p?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return p},this.pause=function(){p=!0,n.abort(),t=_(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(p=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,n.abort(),y.meta.aborted=!0,_(e.complete)&&e.complete(y),t=""},this.guessLineEndings=function(e,t){e=e.substring(0,1048576),t=new RegExp(f(t)+"([^]*?)"+f(t),"gm");var n=(e=e.replace(t,"")).split("\r");if(e=1<(t=e.split("\n")).length&&t[0].length<n[0].length,1===n.length||e)return"\n";for(var r=0,i=0;i<n.length;i++)"\n"===n[i][0]&&r++;return r>=n.length/2?"\r\n":"\r"}}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,s=e.fastMode,l=null,c=!1,u=null==e.quoteChar?'"':e.quoteChar,d=u;if(void 0!==e.escapeChar&&(d=e.escapeChar),("string"!=typeof t||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),r===t)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<a.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==n&&"\r"!==n&&"\r\n"!==n&&(n="\n");var h=0,p=!1;this.parse=function(a,m,g){if("string"!=typeof a)throw new Error("Input must be a string");var v=a.length,y=t.length,b=n.length,w=r.length,x=_(i),S=[],C=[],k=[],E=h=0;if(!a)return U();if(s||!1!==s&&-1===a.indexOf(u)){for(var A=a.split(n),T=0;T<A.length;T++){if(k=A[T],h+=k.length,T!==A.length-1)h+=n.length;else if(g)return U();if(!r||k.substring(0,w)!==r){if(x){if(S=[],D(k.split(t)),B(),p)return U()}else D(k.split(t));if(o&&o<=T)return S=S.slice(0,o),U(!0)}}return U()}for(var I=a.indexOf(t,h),R=a.indexOf(n,h),L=new RegExp(f(d)+f(u),"g"),N=a.indexOf(u,h);;)if(a[h]===u)for(N=h,h++;;){if(-1===(N=a.indexOf(u,N+1)))return g||C.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:S.length,index:h}),P();if(N===v-1)return P(a.substring(h,N).replace(L,u));if(u===d&&a[N+1]===d)N++;else if(u===d||0===N||a[N-1]!==d){-1!==I&&I<N+1&&(I=a.indexOf(t,N+1));var O=M(-1===(R=-1!==R&&R<N+1?a.indexOf(n,N+1):R)?I:Math.min(I,R));if(a.substr(N+1+O,y)===t){k.push(a.substring(h,N).replace(L,u)),a[h=N+1+O+y]!==u&&(N=a.indexOf(u,h)),I=a.indexOf(t,h),R=a.indexOf(n,h);break}if(O=M(R),a.substring(N+1+O,N+1+O+b)===n){if(k.push(a.substring(h,N).replace(L,u)),j(N+1+O+b),I=a.indexOf(t,h),N=a.indexOf(u,h),x&&(B(),p))return U();if(o&&S.length>=o)return U(!0);break}C.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:S.length,index:h}),N++}}else if(r&&0===k.length&&a.substring(h,h+w)===r){if(-1===R)return U();h=R+b,R=a.indexOf(n,h),I=a.indexOf(t,h)}else if(-1!==I&&(I<R||-1===R))k.push(a.substring(h,I)),h=I+y,I=a.indexOf(t,h);else{if(-1===R)break;if(k.push(a.substring(h,R)),j(R+b),x&&(B(),p))return U();if(o&&S.length>=o)return U(!0)}return P();function D(e){S.push(e),E=h}function M(e){var t=0;return-1!==e&&(e=a.substring(N+1,e))&&""===e.trim()?e.length:t}function P(e){return g||(void 0===e&&(e=a.substring(h)),k.push(e),h=v,D(k),x&&B()),U()}function j(e){h=e,D(k),k=[],R=a.indexOf(n,h)}function U(r){if(e.header&&!m&&S.length&&!c){var i=S[0],o=Object.create(null),s=new Set(i);let t=!1;for(let n=0;n<i.length;n++){let r=i[n];if(o[r=_(e.transformHeader)?e.transformHeader(r,n):r]){let e,a=o[r];for(;e=r+"_"+a,a++,s.has(e););s.add(e),i[n]=e,o[r]++,t=!0,(l=null===l?{}:l)[e]=r}else o[r]=1,i[n]=r;s.add(r)}t&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:S,errors:C,meta:{delimiter:t,linebreak:n,aborted:p,truncated:!!r,cursor:E+(m||0),renamedHeaders:l}}}function B(){i(U()),S=[],C=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return h}}function g(e){var t=e.data,n=o[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,v(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(_(n.userStep)){for(var s=0;s<t.results.data.length&&(n.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},i),!r);s++);delete t.results}else _(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&v(t.workerId,t.results)}function v(e,t){var n=o[e];_(n.userComplete)&&n.userComplete(t),n.terminate(),delete o[e]}function y(){throw new Error("Not implemented.")}function b(e){if("object"!=typeof e||null===e)return e;var t,n=Array.isArray(e)?[]:{};for(t in e)n[t]=b(e[t]);return n}function w(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return a.parse=function(t,r){var i=(r=r||{}).dynamicTyping||!1;if(_(i)&&(r.dynamicTypingFunction=i,i={}),r.dynamicTyping=i,r.transform=!!_(r.transform)&&r.transform,!r.worker||!a.WORKERS_SUPPORTED)return i=null,a.NODE_STREAM_INPUT,"string"==typeof t?(t=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(t),i=new(r.download?c:d)(r)):!0===t.readable&&_(t.read)&&_(t.on)?i=new h(r):(n.File&&t instanceof File||t instanceof Object)&&(i=new u(r)),i.stream(t);(i=(()=>{var t;return!!a.WORKERS_SUPPORTED&&(t=(()=>{var t=n.URL||n.webkitURL||null,r=e.toString();return a.BLOB_URL||(a.BLOB_URL=t.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",r,")();"],{type:"text/javascript"})))})(),(t=new n.Worker(t)).onmessage=g,t.id=s++,o[t.id]=t)})()).userStep=r.step,i.userChunk=r.chunk,i.userComplete=r.complete,i.userError=r.error,r.step=_(r.step),r.chunk=_(r.chunk),r.complete=_(r.complete),r.error=_(r.error),delete r.worker,i.postMessage({input:t,config:r,workerId:i.id})},a.unparse=function(e,t){var n=!1,r=!0,i=",",o="\r\n",s='"',l=s+s,c=!1,u=null,d=!1,h=((()=>{if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(i=t.delimiter),"boolean"!=typeof t.quotes&&"function"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(c=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(s=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(l=t.escapeChar+s),t.escapeFormulae instanceof RegExp?d=t.escapeFormulae:"boolean"==typeof t.escapeFormulae&&t.escapeFormulae&&(d=/^[=+\-@\t\r].*$/)}})(),new RegExp(f(s),"g"));if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return p(null,e,c);if("object"==typeof e[0])return p(u||Object.keys(e[0]),e,c)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),p(e.fields||[],e.data||[],c);throw new Error("Unable to serialize unrecognized input");function p(e,t,n){var s="",a=("string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),l=!Array.isArray(t[0]);if(a&&r){for(var c=0;c<e.length;c++)0<c&&(s+=i),s+=m(e[c],c);0<t.length&&(s+=o)}for(var u=0;u<t.length;u++){var d=(a?e:t[u]).length,h=!1,p=a?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!a&&(h="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&a){for(var f=[],g=0;g<d;g++){var v=l?e[g]:g;f.push(t[u][v])}h=""===f.join("").trim()}if(!h){for(var y=0;y<d;y++){0<y&&!p&&(s+=i);var b=a&&l?e[y]:y;s+=m(t[u][b],y)}u<t.length-1&&(!n||0<d&&!p)&&(s+=o)}}return s}function m(e,t){var r,o;return null==e?"":e.constructor===Date?JSON.stringify(e).slice(1,25):(o=!1,d&&"string"==typeof e&&d.test(e)&&(e="'"+e,o=!0),r=e.toString().replace(h,l),(o=o||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1})(r,a.BAD_DELIMITERS)||-1<r.indexOf(i)||" "===r.charAt(0)||" "===r.charAt(r.length-1))?s+r+s:r)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!r&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=m,a.ParserHandle=p,a.NetworkStreamer=c,a.FileStreamer=u,a.StringStreamer=d,a.ReadableStreamStreamer=h,n.jQuery&&((t=n.jQuery).fn.parse=function(e){var r=e.config||{},i=[];return this.each(function(e){if("INPUT"!==t(this).prop("tagName").toUpperCase()||"file"!==t(this).attr("type").toLowerCase()||!n.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)i.push({file:this.files[o],inputElem:this,instanceConfig:t.extend({},r)})}),o(),this;function o(){if(0===i.length)_(e.complete)&&e.complete();else{var n,r,o,l,c=i[0];if(_(e.before)){var u=e.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return n="AbortError",r=c.file,o=c.inputElem,l=u.reason,void(_(e.error)&&e.error({name:n},r,o,l));if("skip"===u.action)return void s();"object"==typeof u.config&&(c.instanceConfig=t.extend(c.instanceConfig,u.config))}else if("skip"===u)return void s()}var d=c.instanceConfig.complete;c.instanceConfig.complete=function(e){_(d)&&d(e,c.file,c.inputElem),s()},a.parse(c.file,c.instanceConfig)}}function s(){i.splice(0,1),o()}}),i&&(n.onmessage=function(e){e=e.data,void 0===a.WORKER_ID&&e&&(a.WORKER_ID=e.workerId),"string"==typeof e.input?n.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&n.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(d.prototype=Object.create(d.prototype)).constructor=d,(h.prototype=Object.create(l.prototype)).constructor=h,a},void 0===(i="function"==typeof n?n.apply(t,r):n)||(e.exports=i)},5606:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,l=[],c=!1,u=-1;function d(){c&&a&&(c=!1,a.length?l=a.concat(l):u=-1,l.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(a=l,l=[];++u<t;)a&&a[u].run();u=-1,t=l.length}a=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},989:(e,t,n)=>{e.exports=n(4005)},2985:e=>{"use strict";e.exports=class e{constructor(e,t=new Map,n=0){this.prefix=e,this._existing=t,this.counter=n}clone(){const{prefix:t,_existing:n,counter:r}=this;return new e(t,new Map(n),r)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const n=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,n),n}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}},3751:(e,t,n)=>{"use strict";n(2791);const r=self.crypto||self.msCrypto;e.exports=class{constructor(e){if(!r||!r.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupported algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=new Uint8Array(await r.subtle.digest(this.algorithm,e));let n="";for(let e=0;e<t.length;++e)n+=t[e].toString(16).padStart(2,"0");return n}}},1227:e=>{"use strict";const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",n="http://www.w3.org/2001/XMLSchema#string",r="NamedNode",i="BlankNode",o="Literal",s="DefaultGraph",a={};function l(e,t){return e.subject.termType===t.subject.termType&&e.object.termType===t.object.termType&&(e.subject.value===t.subject.value&&e.predicate.value===t.predicate.value&&e.object.value===t.object.value&&(e.object.termType!==o||e.object.datatype.termType===t.object.datatype.termType&&e.object.language===t.object.language&&e.object.datatype.value===t.object.datatype.value))}(()=>{const e="(?:<([^:]+:[^>]*)>)",t="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",n=t+"0-9-\xb7\u0300-\u036f\u203f-\u2040",r="(_:(?:["+t+"0-9])(?:(?:["+n+".])*(?:["+n+"]))?)",i="[ \\t]+",o="[ \\t]*",s="(?:"+e+"|"+r+")"+i,l=e+i,c="(?:"+e+"|"+r+"|"+('(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:'+("(?:\\^\\^"+e+")")+"|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?)")+")"+o,u="(?:\\.|(?:(?:"+e+"|"+r+")"+o+"\\.))";a.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,a.empty=new RegExp("^"+o+"$"),a.quad=new RegExp("^"+o+s+l+c+u+o+"$")})(),e.exports=class e{static parse(e){const c=[],u={},h=e.split(a.eoln);let p=0;for(const e of h){if(p++,a.empty.test(e))continue;const h=e.match(a.quad);if(null===h)throw new Error("N-Quads parse error on line "+p+".");const f={subject:null,predicate:null,object:null,graph:null};if(void 0!==h[1]?f.subject={termType:r,value:h[1]}:f.subject={termType:i,value:h[2]},f.predicate={termType:r,value:h[3]},void 0!==h[4]?f.object={termType:r,value:h[4]}:void 0!==h[5]?f.object={termType:i,value:h[5]}:(f.object={termType:o,value:void 0,datatype:{termType:r}},void 0!==h[7]?f.object.datatype.value=h[7]:void 0!==h[8]?(f.object.datatype.value=t,f.object.language=h[8]):f.object.datatype.value=n,f.object.value=d(h[6])),void 0!==h[9]?f.graph={termType:r,value:h[9]}:void 0!==h[10]?f.graph={termType:i,value:h[10]}:f.graph={termType:s,value:""},f.graph.value in u){let e=!0;const t=u[f.graph.value];for(const n of t)if(l(n,f)){e=!1;break}e&&(t.push(f),c.push(f))}else u[f.graph.value]=[f],c.push(f)}return c}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuadComponents(e,o,s,a){let l="";return e.termType===r?l+=`<${e.value}>`:l+=`${e.value}`,l+=` <${o.value}> `,s.termType===r?l+=`<${s.value}>`:s.termType===i?l+=s.value:(l+=`"${function(e){return e.replace(c,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(s.value)}"`,s.datatype.value===t?s.language&&(l+=`@${s.language}`):s.datatype.value!==n&&(l+=`^^<${s.datatype.value}>`)),a.termType===r?l+=` <${a.value}>`:a.termType===i&&(l+=` ${a.value}`),l+=" .\n",l}static serializeQuad(t){return e.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(e){const a=[],l={"blank node":i,IRI:r,literal:o};for(const c in e){e[c].forEach(e=>{const u={};for(const i in e){const s=e[i],a={termType:l[s.type],value:s.value};a.termType===o&&(a.datatype={termType:r},"datatype"in s&&(a.datatype.value=s.datatype),"language"in s?("datatype"in s||(a.datatype.value=t),a.language=s.language):"datatype"in s||(a.datatype.value=n)),u[i]=a}u.graph="@default"===c?{termType:s,value:""}:{termType:c.startsWith("_:")?i:r,value:c},a.push(u)})}return a}};const c=/["\\\n\r]/g;const u=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g;function d(e){return e.replace(u,function(e,t,n,r){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(r)throw new Error("Unsupported U escape")})}},9925:e=>{"use strict";e.exports=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,n=e.slice();let r=null,i=0;const o=e.length;for(let n=0;n<o;++n){const s=e[n],a=t.get(s);(null===r||s>r)&&(a&&n>0&&s>e[n-1]||!a&&n<o-1&&s>e[n+1])&&(r=s,i=n)}if(null===r)this.done=!0;else{const n=t.get(r)?i-1:i+1;e[i]=e[n],e[n]=r;for(const n of e)n>r&&t.set(n,!t.get(n))}return n}}},3513:(e,t,n)=>{"use strict";const r=n(2985),i=n(3751),o=n(9925),s=n(1227);function a(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=()=>new i("sha256"),canonicalIdMap:t=new Map,maxDeepIterations:n=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("_:c14n",t),this.createMessageDigest=e,this.maxDeepIterations=n,this.quads=null,this.deepIterations=null}async main(e){this.deepIterations=new Map,this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];let i=0;for(const e of n)++i%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const o=[...t.keys()].sort(),l=[];for(const e of o){const n=t.get(e);if(n.length>1){l.push(n);continue}const r=n[0];this.canonicalIssuer.getId(r)}for(const e of l){const t=[];for(const n of e){if(this.canonicalIssuer.hasId(n))continue;const e=new r("_:b");e.getId(n);const i=await this.hashNDegreeQuads(n,e);t.push(i)}t.sort(a);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const c=[];for(const e of this.quads){const t=s.serializeQuadComponents(this._componentWithCanonicalId(e.subject),e.predicate,this._componentWithCanonicalId(e.object),this._componentWithCanonicalId(e.graph));c.push(t)}return c.sort(),c.join("")}async hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const n of r){const r={subject:null,predicate:n.predicate,object:null,graph:null};r.subject=this.modifyFirstDegreeComponent(e,n.subject,"subject"),r.object=this.modifyFirstDegreeComponent(e,n.object,"object"),r.graph=this.modifyFirstDegreeComponent(e,n.graph,"graph"),t.push(s.serializeQuad(r))}t.sort();const i=this.createMessageDigest();for(const e of t)i.update(e);return n.hash=await i.digest(),n.hash}async hashRelatedBlankNode(e,t,n,r){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const o=this.createMessageDigest();return o.update(r),"g"!==r&&o.update(this.getRelatedPredicate(t)),o.update(i),o.digest()}async hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=this.createMessageDigest(),i=await this.createHashToRelated(e,t),s=[...i.keys()].sort();for(const e of s){r.update(e);let n,s="";const a=new o(i.get(e));let l=0;for(;a.hasNext();){const e=a.next();++l%3==0&&await this._yield();let r=t.clone(),i="";const o=[];let c=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?i+=this.canonicalIssuer.getId(t):(r.hasId(t)||o.push(t),i+=r.getId(t)),0!==s.length&&i>s){c=!0;break}if(!c){for(const e of o){const t=await this.hashNDegreeQuads(e,r);if(i+=r.getId(e),i+=`<${t.hash}>`,r=t.issuer,0!==s.length&&i>s){c=!0;break}}c||(0===s.length||i<s)&&(s=i,n=r)}}r.update(s),t=n}return{hash:await r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let i=0;for(const o of r)++i%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:e,issuer:t,hashToRelated:n})]);return n}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=await this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:o}){if("BlankNode"!==t.termType||t.value===r)return;const s=t.value,a=await this.hashRelatedBlankNode(s,e,i,n),l=o.get(a);l?l.push(s):o.set(a,[s])}_componentWithCanonicalId(e){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise(e=>setImmediate(e))}}},2438:(e,t,n)=>{"use strict";const r=n(2985),i=n(3751),o=n(9925),s=n(1227);function a(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=()=>new i("sha256"),canonicalIdMap:t=new Map,maxDeepIterations:n=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new r("_:c14n",t),this.createMessageDigest=e,this.maxDeepIterations=n,this.quads=null,this.deepIterations=null}main(e){this.deepIterations=new Map,this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,n=[...this.blankNodeInfo.keys()];for(const e of n)this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const i=[...t.keys()].sort(),o=[];for(const e of i){const n=t.get(e);if(n.length>1){o.push(n);continue}const r=n[0];this.canonicalIssuer.getId(r)}for(const e of o){const t=[];for(const n of e){if(this.canonicalIssuer.hasId(n))continue;const e=new r("_:b");e.getId(n);const i=this.hashNDegreeQuads(n,e);t.push(i)}t.sort(a);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const l=[];for(const e of this.quads){const t=s.serializeQuadComponents(this._componentWithCanonicalId({component:e.subject}),e.predicate,this._componentWithCanonicalId({component:e.object}),this._componentWithCanonicalId({component:e.graph}));l.push(t)}return l.sort(),l.join("")}hashFirstDegreeQuads(e){const t=[],n=this.blankNodeInfo.get(e),r=n.quads;for(const n of r){const r={subject:null,predicate:n.predicate,object:null,graph:null};r.subject=this.modifyFirstDegreeComponent(e,n.subject,"subject"),r.object=this.modifyFirstDegreeComponent(e,n.object,"object"),r.graph=this.modifyFirstDegreeComponent(e,n.graph,"graph"),t.push(s.serializeQuad(r))}t.sort();const i=this.createMessageDigest();for(const e of t)i.update(e);return n.hash=i.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){let i;i=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):this.blankNodeInfo.get(e).hash;const o=this.createMessageDigest();return o.update(r),"g"!==r&&o.update(this.getRelatedPredicate(t)),o.update(i),o.digest()}hashNDegreeQuads(e,t){const n=this.deepIterations.get(e)||0;if(n>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,n+1);const r=this.createMessageDigest(),i=this.createHashToRelated(e,t),s=[...i.keys()].sort();for(const e of s){r.update(e);let n,s="";const a=new o(i.get(e));for(;a.hasNext();){const e=a.next();let r=t.clone(),i="";const o=[];let l=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?i+=this.canonicalIssuer.getId(t):(r.hasId(t)||o.push(t),i+=r.getId(t)),0!==s.length&&i>s){l=!0;break}if(!l){for(const e of o){const t=this.hashNDegreeQuads(e,r);if(i+=r.getId(e),i+=`<${t.hash}>`,r=t.issuer,0!==s.length&&i>s){l=!0;break}}l||(0===s.length||i<s)&&(s=i,n=r)}}r.update(s),t=n}return{hash:r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r)this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:n}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:n});return n}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const n=this.hashFirstDegreeQuads(e),r=t.get(n);r?r.push(e):t.set(n,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const n=t.value,r=this.blankNodeInfo.get(n);r?r.quads.add(e):this.blankNodeInfo.set(n,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:n,id:r,issuer:i,hashToRelated:o}){if("BlankNode"!==t.termType||t.value===r)return;const s=t.value,a=this.hashRelatedBlankNode(s,e,i,n),l=o.get(a);l?l.push(s):o.set(a,[s])}_componentWithCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}}},3845:(e,t,n)=>{"use strict";const r=n(3751),i=n(3513);e.exports=class extends i{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new r("sha1")}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;let i=0;for(const o of r){let r,s;if("BlankNode"===o.subject.termType&&o.subject.value!==e)s=o.subject.value,r="p";else{if("BlankNode"!==o.object.termType||o.object.value===e)continue;s=o.object.value,r="r"}++i%100==0&&await this._yield();const a=await this.hashRelatedBlankNode(s,o,t,r),l=n.get(a);l?l.push(s):n.set(a,[s])}return n}}},378:(e,t,n)=>{"use strict";const r=n(3751),i=n(2438);e.exports=class extends i{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new r("sha1")}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:"graph"===n?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=new Map,r=this.blankNodeInfo.get(e).quads;for(const i of r){let r,o;if("BlankNode"===i.subject.termType&&i.subject.value!==e)o=i.subject.value,r="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;o=i.object.value,r="r"}const s=this.hashRelatedBlankNode(o,i,t,r),a=n.get(s);a?a.push(o):n.set(s,[o])}return n}}},4005:(e,t,n)=>{"use strict";const r=n(3513),i=n(3845),o=n(2438),s=n(378);let a;try{a=n(7789)}catch(e){}function l(e){return Array.isArray(e)?e:t.NQuads.legacyDatasetToQuads(e)}t.NQuads=n(1227),t.IdentifierIssuer=n(2985),t._rdfCanonizeNative=function(e){return e&&(a=e),a},t.canonize=async function(e,t){const n=l(e);if(t.useNative){if(!a)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((e,r)=>a.canonize(n,t,(t,n)=>t?r(t):e(n)))}if("URDNA2015"===t.algorithm)return new r(t).main(n);if("URGNA2012"===t.algorithm){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new i(t).main(n)}if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},t._canonizeSync=function(e,t){const n=l(e);if(t.useNative){if(!a)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return a.canonizeSync(n,t)}if("URDNA2015"===t.algorithm)return new o(t).main(n);if("URGNA2012"===t.algorithm){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new s(t).main(n)}if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)}},7793:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(9931),t),i(n(8483),t),i(n(2142),t),i(n(2426),t),i(n(3988),t),i(n(6754),t),i(n(8401),t)},9931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0;t.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},8483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;const r=n(9931),i=n(2142),o=n(2426),s=n(3988),a=n(6754),l=n(8401);let c=0;t.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${c++}_`}namedNode(e){return new s.NamedNode(e)}blankNode(e){return new r.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new o.Literal(e,t)}variable(e){return new l.Variable(e)}defaultGraph(){return i.DefaultGraph.INSTANCE}quad(e,t,n,r){return new a.Quad(e,t,n,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(o.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},2142:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}t.DefaultGraph=n,n.INSTANCE=new n},2426:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;const r=n(3988);class i{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=i.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?i.RDF_DIRECTIONAL_LANGUAGE_STRING:i.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=i.XSD_STRING,this.direction="")}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&(e.direction===this.direction||!e.direction&&""===this.direction)&&this.datatype.equals(e.datatype)}}t.Literal=i,i.RDF_LANGUAGE_STRING=new r.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.RDF_DIRECTIONAL_LANGUAGE_STRING=new r.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),i.XSD_STRING=new r.NamedNode("http://www.w3.org/2001/XMLSchema#string")},3988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0;t.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}},6754:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0;t.Quad=class{constructor(e,t,n,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=n,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}},8401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0;t.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}},9749:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2710),t),i(n(972),t),i(n(9479),t),i(n(4465),t),i(n(5213),t),i(n(6429),t)},2710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4465:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RdfaParser=void 0;const r=n(8659),i=n(9198),o=n(5180),s=n(532),a=n(5213),l=n(6429);class c extends i.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],e=e||{},this.options=e,this.util=new l.Util(e.dataFactory,e.baseIRI),this.defaultGraph=e.defaultGraph||this.util.dataFactory.defaultGraph();const t=e.contentType?l.Util.contentTypeToProfile(e.contentType):e.profile||"";this.features=e.features||a.RDFA_FEATURES[t],this.htmlParseListener=e.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser("xml"===t),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:e.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},s["@context"]),this.features.xhtmlInitialContext?o["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:e.vocab})}import(e){const t=new i.PassThrough({readableObjectMode:!0});e.on("error",e=>n.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));const n=t.pipe(new c(this.options));return n}_transform(e,t,n){this.parser.write(e.toString()),n()}_flush(e){this.parser.end(),e()}onTagOpen(e,t){let n=this.activeTagStack.length-1;for(;n>0&&this.activeTagStack[n].skipElement;)n--;let r=this.activeTagStack[n];n!==this.activeTagStack.length-1&&(r=Object.assign(Object.assign({},r),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const i={collectChildTags:r.collectChildTags,collectChildTagsForCurrentTag:r.collectChildTagsForCurrentTag,incompleteTriples:[],inlist:"inlist"in t,listMapping:[],listMappingLocal:r.listMapping,localBaseIRI:r.localBaseIRI,name:e,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(i),i.collectChildTags){for(const e of Object.keys(r.prefixesCustom).sort()){const n=r.prefixesCustom[e],i=""===e?"xmlns":"xmlns:"+e;i in t||(t[i]=n)}const n=Object.keys(t).map(e=>`${e}="${t[e]}"`).join(" ");if(i.textWithTags=[`<${e}${n?" "+n:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let o,s,a,c=!0,u=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in t&&"rel"in t&&(c=!1,t.rel.indexOf(":")<0&&delete t.rel),"property"in t&&"rev"in t&&(u=!1,t.rev.indexOf(":")<0&&delete t.rev)),this.features.copyRdfaPatterns){if(r.collectedPatternTag){const n={attributes:t,children:[],name:e,referenced:!1,rootPattern:!1,text:[]};return r.collectedPatternTag.children.push(n),void(i.collectedPatternTag=n)}if("rdfa:Pattern"===t.typeof)return void(i.collectedPatternTag={attributes:t,children:[],name:e,parentTag:r,referenced:!1,rootPattern:!0,text:[]});if("rdfa:copy"===t.property){const e=t.resource||t.href||t.src;return void(this.rdfaPatterns[e]?this.emitPatternCopy(r,this.rdfaPatterns[e],e):(this.pendingRdfaPatternCopies[e]||(this.pendingRdfaPatternCopies[e]=[]),this.pendingRdfaPatternCopies[e].push(r)))}}if(this.features.baseTag&&"base"===e&&t.href&&(this.util.baseIRI=this.util.getBaseIRI(t.href)),this.features.xmlBase&&t["xml:base"]&&(i.localBaseIRI=this.util.getBaseIRI(t["xml:base"])),this.features.timeTag&&"time"===e&&!t.datatype&&(i.interpretObjectAsTime=!0),"vocab"in t?t.vocab?(i.vocab=t.vocab,this.emitTriple(this.util.getBaseIriTerm(i),this.util.dataFactory.namedNode(l.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(i.vocab))):i.vocab=this.activeTagStack[0].vocab:i.vocab=r.vocab,i.prefixesCustom=l.Util.parsePrefixes(t,r.prefixesCustom,this.features.xmlnsPrefixMappings),i.prefixesAll=Object.keys(i.prefixesCustom).length>0?Object.assign(Object.assign({},r.prefixesAll),i.prefixesCustom):r.prefixesAll,this.features.roleAttribute&&t.role){const e=t.id?this.util.createIri("#"+t.id,i,!1,!1,!1):this.util.createBlankNode(),n=i.vocab;i.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const n of this.util.createVocabIris(t.role,i,!0,!1))this.emitTriple(e,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),n);i.vocab=n}"xml:lang"in t||this.features.langAttribute&&"lang"in t?i.language=t["xml:lang"]||t.lang:i.language=r.language;const d=2===this.activeTagStack.length;if("rel"in t||"rev"in t?("about"in t?(o=this.util.createIri(t.about,i,!1,!0,!0),i.explicitNewSubject=!!o,"typeof"in t&&(a=o)):d?o=!0:r.object&&(o=r.object),"resource"in t&&(s=this.util.createIri(t.resource,i,!1,!0,!0)),s||("href"in t||"src"in t?s=this.util.createIri(t.href||t.src,i,!1,!1,!0):!("typeof"in t)||"about"in t||this.isInheritSubjectInHeadBody(e)||(s=this.util.createBlankNode())),"typeof"in t&&!("about"in t)&&(a=this.isInheritSubjectInHeadBody(e)?o:s)):!("property"in t)||"content"in t||"datatype"in t?(("about"in t||"resource"in t)&&(o=this.util.createIri(t.about||t.resource,i,!1,!0,!0),i.explicitNewSubject=!!o),o||!("href"in t)&&!("src"in t)||(o=this.util.createIri(t.href||t.src,i,!1,!1,!0),i.explicitNewSubject=!!o),o||(d?o=!0:this.isInheritSubjectInHeadBody(e)?o=r.object:"typeof"in t?(o=this.util.createBlankNode(),i.explicitNewSubject=!0):r.object&&(o=r.object,"property"in t||(i.skipElement=!0))),"typeof"in t&&(a=o)):("about"in t?(o=this.util.createIri(t.about,i,!1,!0,!0),i.explicitNewSubject=!!o):d?o=!0:r.object&&(o=r.object),"typeof"in t&&("about"in t&&(a=this.util.createIri(t.about,i,!1,!0,!0)),!a&&d&&(a=!0),!a&&"resource"in t&&(a=this.util.createIri(t.resource,i,!1,!0,!0)),a||!("href"in t)&&!("src"in t)||(a=this.util.createIri(t.href||t.src,i,!1,!1,!0)),!a&&this.isInheritSubjectInHeadBody(e)&&(a=o),a||(a=this.util.createBlankNode()),s=a)),a)for(const e of this.util.createVocabIris(t.typeof,i,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(a,i),this.util.dataFactory.namedNode(l.Util.RDF+"type"),e);if(o&&(i.listMapping={}),s){if("rel"in t&&"inlist"in t)for(const e of this.util.createVocabIris(t.rel,i,c,!1))this.addListMapping(i,o,e,s);if(!("rel"in t)||!("inlist"in t)){if("rel"in t)for(const e of this.util.createVocabIris(t.rel,i,c,!1))this.emitTriple(this.util.getResourceOrBaseIri(o,i),e,this.util.getResourceOrBaseIri(s,i));if("rev"in t)for(const e of this.util.createVocabIris(t.rev,i,u,!1))this.emitTriple(this.util.getResourceOrBaseIri(s,i),e,this.util.getResourceOrBaseIri(o,i))}}if(!s){if("rel"in t)if("inlist"in t)for(const e of this.util.createVocabIris(t.rel,i,c,!1))this.addListMapping(i,o,e,null),i.incompleteTriples.push({predicate:e,reverse:!1,list:!0});else for(const e of this.util.createVocabIris(t.rel,i,c,!1))i.incompleteTriples.push({predicate:e,reverse:!1});if("rev"in t)for(const e of this.util.createVocabIris(t.rev,i,u,!1))i.incompleteTriples.push({predicate:e,reverse:!0});i.incompleteTriples.length>0&&(s=this.util.createBlankNode())}if("property"in t){let e;if(i.predicates=this.util.createVocabIris(t.property,i,!0,!1),"datatype"in t?(i.datatype=this.util.createIri(t.datatype,i,!0,!0,!1),i.datatype&&(i.datatype.value===l.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&i.datatype.value===l.Util.RDF+"HTML")&&(i.collectChildTags=!0,i.collectChildTagsForCurrentTag=!0)):("rev"in t||"rel"in t||"content"in t||("resource"in t&&(e=this.util.createIri(t.resource,i,!1,!0,!0)),!e&&"href"in t&&(e=this.util.createIri(t.href,i,!1,!1,!0)),!e&&"src"in t&&(e=this.util.createIri(t.src,i,!1,!1,!0))),"typeof"in t&&!("about"in t)&&(e=a)),"datatype"in t&&""!==t.datatype||(i.collectChildTagsForCurrentTag=!1),"content"in t){const e=this.util.createLiteral(t.content,i);if("inlist"in t)for(const t of i.predicates)this.addListMapping(i,o,t,e);else{const t=this.util.getResourceOrBaseIri(o,i);for(const n of i.predicates)this.emitTriple(t,n,e)}i.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in t){i.interpretObjectAsTime=!0;const e=this.util.createLiteral(t.datetime,i);if("inlist"in t)for(const t of i.predicates)this.addListMapping(i,o,t,e);else{const t=this.util.getResourceOrBaseIri(o,i);for(const n of i.predicates)this.emitTriple(t,n,e)}i.predicates=null}else if(e){const n=this.util.getResourceOrBaseIri(e,i);if("inlist"in t)for(const e of i.predicates)this.addListMapping(i,o,e,n);else{const e=this.util.getResourceOrBaseIri(o,i);for(const t of i.predicates)this.emitTriple(e,t,n)}i.predicates=null}}let h=!1;if(!i.skipElement&&o&&r.incompleteTriples.length>0){h=!0;const e=this.util.getResourceOrBaseIri(r.subject,i),t=this.util.getResourceOrBaseIri(o,i);for(const n of r.incompleteTriples)if(n.reverse)this.emitTriple(t,n.predicate,e);else if(n.list){let e=null;for(let t=this.activeTagStack.length-1;t>=0;t--)if(this.activeTagStack[t].inlist){e=this.activeTagStack[t];break}this.addListMapping(e,o,n.predicate,t)}else this.emitTriple(e,n.predicate,t)}!h&&r.incompleteTriples.length>0&&(i.incompleteTriples=i.incompleteTriples.concat(r.incompleteTriples)),i.subject=o||r.subject,i.object=s||o}onText(e){const t=this.activeTagStack[this.activeTagStack.length-1];this.features.copyRdfaPatterns&&t.collectedPatternTag?t.collectedPatternTag.text.push(e):(t.textWithTags||(t.textWithTags=[]),t.textWithoutTags||(t.textWithoutTags=[]),t.textWithTags.push(e),t.textWithoutTags.push(e))}onTagClose(){const e=this.activeTagStack[this.activeTagStack.length-1],t=this.activeTagStack[this.activeTagStack.length-2];if(!(e.collectChildTags&&t.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&e.collectedPatternTag&&e.collectedPatternTag.rootPattern){const t=e.collectedPatternTag.attributes.resource;if(delete e.collectedPatternTag.attributes.resource,delete e.collectedPatternTag.attributes.typeof,this.rdfaPatterns[t]=e.collectedPatternTag,this.pendingRdfaPatternCopies[t]){for(const n of this.pendingRdfaPatternCopies[t])this.emitPatternCopy(n,e.collectedPatternTag,t);delete this.pendingRdfaPatternCopies[t]}return void this.activeTagStack.pop()}if(e.predicates){const n=this.util.getResourceOrBaseIri(e.subject,e);let r;e.collectChildTagsForCurrentTag?(r=e.textWithTags||[],e.collectChildTags&&t.collectChildTags&&(r=r.slice(1))):r=e.textWithoutTags||[];const i=this.util.createLiteral(r.join(""),e);if(e.inlist)for(const t of e.predicates)this.addListMapping(e,n,t,i);else for(const t of e.predicates)this.emitTriple(n,t,i);t.predicates||(e.textWithoutTags=null,e.textWithTags=null)}if(e.object&&Object.keys(e.listMapping).length>0){const t=this.util.getResourceOrBaseIri(e.object,e);for(const n in e.listMapping){const r=this.util.dataFactory.namedNode(n),i=e.listMapping[n];if(i.length>0){const n=i.map(()=>this.util.createBlankNode());for(let t=0;t<i.length;t++){const r=this.util.getResourceOrBaseIri(i[t],e);this.emitTriple(n[t],this.util.dataFactory.namedNode(l.Util.RDF+"first"),r),this.emitTriple(n[t],this.util.dataFactory.namedNode(l.Util.RDF+"rest"),t<i.length-1?n[t+1]:this.util.dataFactory.namedNode(l.Util.RDF+"nil"))}this.emitTriple(t,r,n[0])}else this.emitTriple(t,r,this.util.dataFactory.namedNode(l.Util.RDF+"nil"))}}}this.activeTagStack.pop(),e.collectChildTags&&e.textWithTags&&e.textWithTags.push(`</${e.name}>`),e.textWithTags&&t&&(t.textWithTags?t.textWithTags=t.textWithTags.concat(e.textWithTags):t.textWithTags=e.textWithTags),e.textWithoutTags&&t&&(t.textWithoutTags?t.textWithoutTags=t.textWithoutTags.concat(e.textWithoutTags):t.textWithoutTags=e.textWithoutTags)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const e in this.rdfaPatterns){const t=this.rdfaPatterns[e];t.referenced||(t.attributes.typeof="rdfa:Pattern",t.attributes.resource=e,this.emitPatternCopy(t.parentTag,t,e),t.referenced=!1,delete t.attributes.typeof,delete t.attributes.resource)}for(const e in this.pendingRdfaPatternCopies)for(const t of this.pendingRdfaPatternCopies[e])this.activeTagStack.push(t),this.onTagOpen("link",{property:"rdfa:copy",href:e}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(e){return this.features.inheritSubjectInHeadBody&&("head"===e||"body"===e)}addListMapping(e,t,n,r){if(e.explicitNewSubject){const i=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(t,e),n,i),this.emitTriple(i,this.util.dataFactory.namedNode(l.Util.RDF+"first"),this.util.getResourceOrBaseIri(r,e)),this.emitTriple(i,this.util.dataFactory.namedNode(l.Util.RDF+"rest"),this.util.dataFactory.namedNode(l.Util.RDF+"nil"))}else{let t=e.listMappingLocal[n.value];t||(e.listMappingLocal[n.value]=t=[]),r&&t.push(r)}}emitTriple(e,t,n){"NamedNode"===e.termType&&e.value.indexOf(":")<0||"NamedNode"===t.termType&&t.value.indexOf(":")<0||"NamedNode"===n.termType&&n.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(e,t,n,this.defaultGraph))}emitPatternCopy(e,t,n){if(this.activeTagStack.push(e),t.referenced=!0,t.constructedBlankNodes){let e=0;this.util.blankNodeFactory=()=>t.constructedBlankNodes[e++]}else t.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const e=this.util.dataFactory.blankNode();return t.constructedBlankNodes.push(e),e};this.emitPatternCopyAbsolute(t,!0,n),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(e,t,n){if(t||"rdfa:copy"!==e.attributes.property||e.attributes.href!==n){this.onTagOpen(e.name,e.attributes);for(const t of e.text)this.onText(t);for(const t of e.children)this.emitPatternCopyAbsolute(t,!1,n);this.onTagClose()}}initializeParser(e){return new r.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(e){this.emit("error",e)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(e){this.emit("error",e)}},onopentag:(e,t)=>{try{this.onTagOpen(e,t),this.htmlParseListener&&this.htmlParseListener.onTagOpen(e,t)}catch(e){this.emit("error",e)}},ontext:e=>{try{this.onText(e),this.htmlParseListener&&this.htmlParseListener.onText(e)}catch(e){this.emit("error",e)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:e})}}t.RdfaParser=c},5213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RDFA_CONTENTTYPES=t.RDFA_FEATURES=void 0,t.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},t.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}},6429:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;const r=n(742),i=n(5213),o=n(7793);class s{constructor(e,t){this.dataFactory=e||new o.DataFactory,this.baseIRI=this.dataFactory.namedNode(t||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(e,t,n){const r={};if(n)for(const t in e)t.startsWith("xmlns")&&(r[t.substr(6)]=e[t]);if(e.prefix||Object.keys(r).length>0){const n=Object.assign(Object.assign({},t),r);if(e.prefix){let t;for(;t=s.PREFIX_REGEX.exec(e.prefix);)n[t[1]]=t[2]}return n}return t}static expandPrefixedTerm(e,t){const n=e.indexOf(":");let r,i;if(n>=0&&(r=e.substr(0,n),i=e.substr(n+1)),""===r)return"http://www.w3.org/1999/xhtml/vocab#"+i;if(r){const e=t.prefixesAll[r];if(e)return e+i}if(e){const n=t.prefixesAll[e.toLocaleLowerCase()];if(n)return n}return e}static isValidIri(e){return s.IRI_REGEX.test(e)}static contentTypeToProfile(e){return i.RDFA_CONTENTTYPES[e]||""}getBaseIRI(e){let t=e;const n=t.indexOf("#");return n>=0&&(t=t.substr(0,n)),this.dataFactory.namedNode((0,r.resolve)(t,this.baseIRI.value))}getResourceOrBaseIri(e,t){return!0===e?this.getBaseIriTerm(t):e}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI}createVocabIris(e,t,n,r){return e.split(/\s+/).filter(e=>e&&(n||e.indexOf(":")>=0)).map(e=>this.createIri(e,t,!0,!0,r)).filter(e=>null!=e)}createLiteral(e,t){var n;if(t.interpretObjectAsTime&&!t.datatype)for(const n of s.TIME_REGEXES)if(e.match(n.regex)){t.datatype=this.dataFactory.namedNode(s.XSD+n.type);break}return this.dataFactory.literal(e,t.datatype||(null===(n=t.language)||void 0===n?void 0:n.toLowerCase()))}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(e,t,n,i,o){if(e=e||"",!i)return n||(e=(0,r.resolve)(e,this.getBaseIriTerm(t).value)),s.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&"["===e[0]&&"]"===e[e.length-1]&&(e=e.substr(1,e.length-2)).indexOf(":")<0)return null;if(e.startsWith("_:"))return o?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(n&&t.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(t.vocab+e);let a=s.expandPrefixedTerm(e,t);return n?e!==a&&(a=(0,r.resolve)(a,this.baseIRIDocument.value)):a=(0,r.resolve)(a,this.getBaseIriTerm(t).value),s.isValidIri(a)?this.dataFactory.namedNode(a):null}}t.Util=s,s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.XSD="http://www.w3.org/2001/XMLSchema#",s.RDFA="http://www.w3.org/ns/rdfa#",s.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,s.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],s.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/},5611:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(8225),t)},5916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseError=void 0;class n extends Error{constructor(e,t){const n=e.saxParser;super(e.trackPosition?`Line ${n.line} column ${n.column+1}: ${t}`:t)}}t.ParseError=n},8225:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseType=t.RdfXmlParser=void 0;const r=n(742),i=n(5201),o=n(9198),s=n(5916),a=n(7793),l=n(7024);class c extends o.Transform{constructor(e){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},e&&(Object.assign(this,e),this.options=e),this.dataFactory||(this.dataFactory=new a.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),!1!==this.validateUri&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?l.IriValidationStrategy.Pragmatic:l.IriValidationStrategy.None),this.saxParser=new i.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(e){const t=new o.PassThrough({readableObjectMode:!0});e.on("error",e=>n.emit("error",e)),e.on("data",e=>t.push(e)),e.on("end",()=>t.push(null));const n=t.pipe(new c(this.options));return n}_transform(e,t,n){try{this.saxParser.write(e)}catch(e){return n(e)}n()}newParseError(e){return new s.ParseError(this,e)}valueToUri(e,t){return this.uriToNamedNode((0,r.resolve)(e,t.baseIRI))}uriToNamedNode(e){const t=(0,l.validateIri)(e,this.iriValidationStrategy);if(t instanceof Error)throw this.newParseError(t.message);return this.dataFactory.namedNode(e)}validateNcname(e){if(!c.NCNAME_MATCHER.test(e))throw this.newParseError(`Not a valid NCName: ${e}`)}createLiteral(e,t){return this.dataFactory.literal(e,t.datatype?t.datatype:t.language?{language:t.language,direction:t.rdfVersion?t.direction:void 0}:void 0)}attachSaxListeners(){this.saxParser.on("error",e=>this.emit("error",e)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(e){const t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let n=u.RESOURCE;if(t&&(t.hadChildren=!0,n=t.childrenParseType),t&&t.childrenStringTags){const n=e.name;let r="";for(const{key:e,value:n}of t.namespaces||[])r+=` ${e}="${n}"`;for(const t in e.attributes)r+=` ${t}="${e.attributes[t].value}"`;const i=`<${`${n}${r}`}>`;t.childrenStringTags.push(i);const o={childrenStringTags:t.childrenStringTags};return o.childrenStringEmitClosingTag=`</${n}>`,void this.activeTagStack.push(o)}const r={};t?(r.language=t.language,r.direction=t.direction,r.baseIRI=t.baseIRI,r.childrenTripleTerms=t.childrenTripleTerms,r.rdfVersion=t.rdfVersion):r.baseIRI=this.baseIRI,this.activeTagStack.push(r),n===u.RESOURCE?this.onTagResource(e,r,t,!t):this.onTagProperty(e,r,t);for(const t in e.attributes){const n=e.attributes[t];"xmlns"===n.prefix&&(r.namespaces||(r.namespaces=[]),r.namespaces.push({key:`${n.prefix}:${n.local}`,value:n.value}))}t&&t.namespaces&&(r.namespaces=[...r.namespaces||[],...t.namespaces])}onTagResource(e,t,n,i){t.childrenParseType=u.PROPERTY;let o=!0;if(e.uri===c.RDF){if(!i&&c.FORBIDDEN_NODE_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal node element name: ${e.local}`);switch(e.local){case"RDF":t.childrenParseType=u.RESOURCE;case"Description":o=!1}}const s=[],a=[];let l=null,d=!1,h=!1,p=null;for(const i in e.attributes){const o=e.attributes[i];if(o.uri!==c.RDF||"version"!==o.local){if(n&&o.uri===c.RDF)switch(o.local){case"about":if(l)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${o.value} and ${l} where found.`);l=o.value;continue;case"ID":if(l)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${o.value} and ${l} where found.`);this.validateNcname(o.value),l="#"+o.value,d=!0;continue;case"nodeID":if(l)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${o.value} and ${l} where found.`);this.validateNcname(o.value),l=o.value,h=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":p=o.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(o.uri===c.XML){if("lang"===o.local){t.language=""===o.value?null:o.value.toLowerCase();continue}if("base"===o.local){t.baseIRI=(0,r.resolve)(o.value,t.baseIRI);continue}}else if(o.uri===c.ITS&&"dir"===o.local){this.setDirection(t,o.value);continue}"xml"===o.prefix||"xmlns"===o.prefix||""===o.prefix&&"xmlns"===o.local||!o.uri||(s.push(this.uriToNamedNode(o.uri+o.local)),a.push(o.value))}else this.setVersion(t,o.value)}if(null!==l&&(t.subject=h?this.dataFactory.blankNode(l):this.valueToUri(l,t),d&&this.claimNodeId(t.subject)),t.subject||(t.subject=this.dataFactory.blankNode()),o){const r=this.uriToNamedNode(e.uri+e.local);this.emitTriple(t.subject,this.dataFactory.namedNode(c.RDF+"type"),r,n?n.reifiedStatementId:null,t.childrenTripleTerms,t.reifier)}if(n){if(n.predicate)if(n.childrenCollectionSubject){const e=this.dataFactory.blankNode(),r=this.dataFactory.namedNode(c.RDF+"rest"),i=n.childrenCollectionPredicate.equals(r);this.emitTriple(n.childrenCollectionSubject,n.childrenCollectionPredicate,e,i?null:n.reifiedStatementId,n.childrenTripleTerms,i?null:n.reifier),this.emitTriple(e,this.dataFactory.namedNode(c.RDF+"first"),t.subject,null,t.childrenTripleTerms),n.childrenCollectionSubject=e,n.childrenCollectionPredicate=r}else{n.childrenTagsToTripleTerms||(this.emitTriple(n.subject,n.predicate,t.subject,n.reifiedStatementId,n.childrenTripleTerms,n.reifier),n.predicateEmitted=!0);for(let e=0;e<n.predicateSubPredicates.length;e++)this.emitTriple(t.subject,n.predicateSubPredicates[e],n.predicateSubObjects[e],null,n.childrenTripleTerms,n.reifier);n.predicateSubPredicates=[],n.predicateSubObjects=[]}for(let e=0;e<s.length;e++){const r=this.createLiteral(a[e],t);this.emitTriple(t.subject,s[e],r,n.reifiedStatementId,n.childrenTripleTerms,n.reifier)}p&&this.emitTriple(t.subject,this.dataFactory.namedNode(c.RDF+"type"),this.uriToNamedNode(p),null,t.childrenTripleTerms,t.reifier)}}onTagProperty(e,t,n){if(t.childrenParseType=u.RESOURCE,t.subject=n.subject,e.uri===c.RDF&&"li"===e.local?(n.listItemCounter||(n.listItemCounter=1),t.predicate=this.uriToNamedNode(e.uri+"_"+n.listItemCounter++)):t.predicate=this.uriToNamedNode(e.uri+e.local),e.uri===c.RDF&&c.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(e.local)>=0)throw this.newParseError(`Illegal property element name: ${e.local}`);t.predicateSubPredicates=[],t.predicateSubObjects=[];let r=!1,i=!1,o=null,s=!0;const a=[],l=[];for(const n in e.attributes){const d=e.attributes[n];if(d.uri!==c.RDF||"version"!==d.local){if(d.uri===c.RDF)switch(d.local){case"resource":if(o)throw this.newParseError(`Found both rdf:resource (${d.value}) and rdf:nodeID (${o}).`);if(r)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${d.value})`);t.hadChildren=!0,o=d.value,s=!1;continue;case"datatype":if(i)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${d.value}).`);if(r)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${d.value})`);t.datatype=this.valueToUri(d.value,t);continue;case"nodeID":if(i)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${d.value}).`);if(t.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${d.value}).`);if(r)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${d.value})`);this.validateNcname(d.value),t.hadChildren=!0,o=d.value,s=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(i)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(t.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${t.datatype.value})`);if(o)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${o})`);if("Resource"===d.value){r=!0,t.childrenParseType=u.PROPERTY;const e=this.dataFactory.blankNode();this.emitTriple(t.subject,t.predicate,e,t.reifiedStatementId,t.childrenTripleTerms,t.reifier),t.subject=e,t.predicate=null}else"Collection"===d.value?(r=!0,t.hadChildren=!0,t.childrenCollectionSubject=t.subject,t.childrenCollectionPredicate=t.predicate,s=!1):"Literal"===d.value?(r=!0,t.childrenTagsToString=!0,t.childrenStringTags=[]):"Triple"===d.value&&(r=!0,t.childrenTagsToTripleTerms=!0,t.childrenTripleTerms=[]);continue;case"ID":this.validateNcname(d.value),t.reifiedStatementId=this.valueToUri("#"+d.value,t),this.claimNodeId(t.reifiedStatementId);continue;case"annotation":t.reifier=this.dataFactory.namedNode(d.value);continue;case"annotationNodeID":t.reifier=this.dataFactory.blankNode(d.value);continue}else{if(d.uri===c.XML&&"lang"===d.local){t.language=""===d.value?null:d.value.toLowerCase();continue}if(d.uri===c.ITS&&"dir"===d.local){this.setDirection(t,d.value);continue}if(d.uri===c.ITS&&"version"===d.local)continue}if("xml"!==d.prefix&&"xmlns"!==d.prefix&&(""!==d.prefix||"xmlns"!==d.local)&&d.uri){if(r||t.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${d.value}`);t.hadChildren=!0,i=!0,a.push(this.uriToNamedNode(d.uri+d.local)),l.push(this.createLiteral(d.value,t))}}else this.setVersion(t,d.value)}if(null!==o){const e=t.subject;t.subject=s?this.dataFactory.blankNode(o):this.valueToUri(o,t),this.emitTriple(e,t.predicate,t.subject,t.reifiedStatementId,t.childrenTripleTerms,t.reifier);for(let e=0;e<a.length;e++)this.emitTriple(t.subject,a[e],l[e],null,t.childrenTripleTerms,t.reifier);t.predicateEmitted=!0}else s&&(t.predicateSubPredicates=a,t.predicateSubObjects=l,t.predicateEmitted=!1)}emitTriple(e,t,n,r,i,o){const s=this.dataFactory.quad(e,t,n,this.defaultGraph);i?i.push(s):this.push(s),o&&this.push(this.dataFactory.quad(o,this.dataFactory.namedNode(c.RDF+"reifies"),s)),r&&(this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(c.RDF+"type"),this.dataFactory.namedNode(c.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(c.RDF+"subject"),e,this.defaultGraph)),this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(c.RDF+"predicate"),t,this.defaultGraph)),this.push(this.dataFactory.quad(r,this.dataFactory.namedNode(c.RDF+"object"),n,this.defaultGraph)))}claimNodeId(e){if(!this.allowDuplicateRdfIds){if(this.nodeIds[e.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${e.value}'.`);this.nodeIds[e.value]=!0}}onText(e){const t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;t&&(t.childrenStringTags?t.childrenStringTags.push(e):t.predicate&&(t.text=e))}onCloseTag(){const e=this.activeTagStack.pop(),t=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;if(e.childrenStringEmitClosingTag&&e.childrenStringTags.push(e.childrenStringEmitClosingTag),e.childrenTagsToString&&(e.datatype=this.dataFactory.namedNode(c.RDF+"XMLLiteral"),e.text=e.childrenStringTags.join(""),e.hadChildren=!1),e.childrenTagsToTripleTerms&&e.predicate&&e.rdfVersion){if(1!==e.childrenTripleTerms.length)throw this.newParseError(`Expected exactly one triple term in rdf:parseType="Triple" but got ${e.childrenTripleTerms.length}`);for(const n of e.childrenTripleTerms)this.emitTriple(e.subject,e.predicate,n,null,t.childrenTripleTerms,t.reifier);e.predicateEmitted=!0}if(e.childrenCollectionSubject)this.emitTriple(e.childrenCollectionSubject,e.childrenCollectionPredicate,this.dataFactory.namedNode(c.RDF+"nil"),null,e.childrenTripleTerms);else if(e.predicate)if(e.hadChildren||e.childrenParseType===u.PROPERTY){if(!e.predicateEmitted){const t=this.dataFactory.blankNode();this.emitTriple(e.subject,e.predicate,t,e.reifiedStatementId,e.childrenTripleTerms,e.reifier);for(let n=0;n<e.predicateSubPredicates.length;n++)this.emitTriple(t,e.predicateSubPredicates[n],e.predicateSubObjects[n],null,e.childrenTripleTerms)}}else this.emitTriple(e.subject,e.predicate,this.createLiteral(e.text||"",e),e.reifiedStatementId,e.childrenTripleTerms,e.reifier)}onDoctype(e){e.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(e,t,n)=>(this.saxParser.ENTITIES[t]=n,""))}setDirection(e,t){if(t){if("ltr"!==t&&"rtl"!==t)throw this.newParseError(`Base directions must either be 'ltr' or 'rtl', while '${t}' was found.`);e.direction=t}else delete e.direction}setVersion(e,t){e.rdfVersion=t,this.emit("version",t)}}var u;t.RdfXmlParser=c,c.MIME_TYPE="application/rdf+xml",c.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",c.XML="http://www.w3.org/XML/1998/namespace",c.ITS="http://www.w3.org/2005/11/its",c.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],c.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],c.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u,function(e){e[e.RESOURCE=0]="RESOURCE",e[e.PROPERTY=1]="PROPERTY"}(u||(t.ParseType=u={}))},4147:(e,t,n)=>{"use strict";const{SymbolDispose:r}=n(4134),{AbortError:i,codes:o}=n(6371),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:l}=n(6115),c=n(6238),{ERR_INVALID_ARG_TYPE:u}=o;let d;e.exports.addAbortSignal=function(t,n){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new u(t,"AbortSignal",e)})(t,"signal"),!s(n)&&!a(n))throw new u("stream",["ReadableStream","WritableStream","Stream"],n);return e.exports.addAbortSignalNoValidate(t,n)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;const o=s(t)?()=>{t.destroy(new i(void 0,{cause:e.reason}))}:()=>{t[l](new i(void 0,{cause:e.reason}))};if(e.aborted)o();else{d=d||n(7760).addAbortListener;const i=d(e,o);c(t,i[r])}return t}},345:(e,t,n)=>{"use strict";const{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:o,Uint8Array:s}=n(4134),{Buffer:a}=n(8287),{inspect:l}=n(7760);e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,n=""+t.data;for(;null!==(t=t.next);)n+=e+t.data;return n}concat(e){if(0===this.length)return a.alloc(0);const t=a.allocUnsafe(e>>>0);let n=this.head,r=0;for(;n;)o(t,n.data,r),r+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const t=n.slice(0,e);return this.head.data=n.slice(e),t}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,i=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(t+=o,++i,n.next?this.head=n.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=n,n.data=r(o,e));break}t+=o,e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}_getBuffer(e){const t=a.allocUnsafe(e),n=e;let r=this.head,i=0;do{const a=r.data;if(!(e>a.length)){e===a.length?(o(t,a,n-e),++i,r.next?this.head=r.next:this.head=this.tail=null):(o(t,new s(a.buffer,a.byteOffset,e),n-e),this.head=r,r.data=a.slice(e));break}o(t,a,n-e),e-=a.length,++i}while(null!==(r=r.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},7830:(e,t,n)=>{"use strict";const{pipeline:r}=n(7758),i=n(3370),{destroyer:o}=n(5896),{isNodeStream:s,isReadable:a,isWritable:l,isWebStream:c,isTransformStream:u,isWritableStream:d,isReadableStream:h}=n(6115),{AbortError:p,codes:{ERR_INVALID_ARG_VALUE:f,ERR_MISSING_ARGS:m}}=n(6371),g=n(6238);e.exports=function(...e){if(0===e.length)throw new m("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let n=0;n<e.length;++n)if(s(e[n])||c(e[n])){if(n<e.length-1&&!(a(e[n])||h(e[n])||u(e[n])))throw new f(`streams[${n}]`,t[n],"must be readable");if(n>0&&!(l(e[n])||d(e[n])||u(e[n])))throw new f(`streams[${n}]`,t[n],"must be writable")}let n,v,y,b,w;const _=e[0],x=r(e,function(e){const t=b;b=null,t?t(e):e?w.destroy(e):C||S||w.destroy()}),S=!!(l(_)||d(_)||u(_)),C=!!(a(x)||h(x)||u(x));if(w=new i({writableObjectMode:!(null==_||!_.writableObjectMode),readableObjectMode:!(null==x||!x.readableObjectMode),writable:S,readable:C}),S){if(s(_))w._write=function(e,t,r){_.write(e,t)?r():n=r},w._final=function(e){_.end(),v=e},_.on("drain",function(){if(n){const e=n;n=null,e()}});else if(c(_)){const e=(u(_)?_.writable:_).getWriter();w._write=async function(t,n,r){try{await e.ready,e.write(t).catch(()=>{}),r()}catch(e){r(e)}},w._final=async function(t){try{await e.ready,e.close().catch(()=>{}),v=t}catch(e){t(e)}}}const e=u(x)?x.readable:x;g(e,()=>{if(v){const e=v;v=null,e()}})}if(C)if(s(x))x.on("readable",function(){if(y){const e=y;y=null,e()}}),x.on("end",function(){w.push(null)}),w._read=function(){for(;;){const e=x.read();if(null===e)return void(y=w._read);if(!w.push(e))return}};else if(c(x)){const e=(u(x)?x.readable:x).getReader();w._read=async function(){for(;;)try{const{value:t,done:n}=await e.read();if(!w.push(t))return;if(n)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===b||(e=new p),y=null,n=null,v=null,null===b?t(e):(b=t,s(x)&&o(x,e))},w}},5896:(e,t,n)=>{"use strict";const r=n(5606),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:s}=n(6371),{Symbol:a}=n(4134),{kIsDestroyed:l,isDestroyed:c,isFinished:u,isServerRequest:d}=n(6115),h=a("kDestroy"),p=a("kConstruct");function f(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function m(e,t,n){let i=!1;function o(t){if(i)return;i=!0;const o=e._readableState,s=e._writableState;f(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof n&&n(t),t?r.nextTick(g,e,t):r.nextTick(v,e)}try{e._destroy(t||null,o)}catch(t){o(t)}}function g(e,t){y(e,t),v(e)}function v(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=n&&n.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){const n=e._readableState,r=e._writableState;null!=r&&r.errorEmitted||null!=n&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function b(e,t,n){const i=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),i&&!i.errored&&(i.errored=t),n?r.nextTick(y,e,t):y(e,t))}function w(e){let t=!1;function n(n){if(t)return void b(e,null!=n?n:new o);t=!0;const i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(h,n):n?b(e,n,!0):r.nextTick(_,e)}try{e._construct(e=>{r.nextTick(n,e)})}catch(e){r.nextTick(n,e)}}function _(e){e.emit(p)}function x(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function S(e){e.emit("close")}function C(e,t){e.emit("error",t),r.nextTick(S,e)}e.exports={construct:function(e,t){if("function"!=typeof e._construct)return;const n=e._readableState,i=e._writableState;n&&(n.constructed=!1),i&&(i.constructed=!1),e.once(p,t),e.listenerCount(p)>1||r.nextTick(w,e)},destroyer:function(e,t){e&&!c(e)&&(t||u(e)||(t=new s),d(e)?(e.socket=null,e.destroy(t)):x(e)?e.abort():x(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(C,e,t):r.nextTick(S,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){const n=this._readableState,r=this._writableState,o=r||n;return null!=r&&r.destroyed||null!=n&&n.destroyed?("function"==typeof t&&t(),this):(f(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),o.constructed?m(this,e,t):this.once(h,function(n){m(this,i(n,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:b}},3370:(e,t,n)=>{"use strict";const{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:o,ObjectSetPrototypeOf:s}=n(4134);e.exports=c;const a=n(7576),l=n(8584);s(c.prototype,a.prototype),s(c,a);{const e=o(l.prototype);for(let t=0;t<e.length;t++){const n=e[t];c.prototype[n]||(c.prototype[n]=l.prototype[n])}}function c(e){if(!(this instanceof c))return new c(e);a.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let u,d;function h(){return void 0===u&&(u={}),u}r(c.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),c.fromWeb=function(e,t){return h().newStreamDuplexFromReadableWritablePair(e,t)},c.toWeb=function(e){return h().newReadableWritablePairFromDuplex(e)},c.from=function(e){return d||(d=n(6706)),d(e,"body")}},6706:(e,t,n)=>{const r=n(5606),i=n(8287),{isReadable:o,isWritable:s,isIterable:a,isNodeStream:l,isReadableNodeStream:c,isWritableNodeStream:u,isDuplexNodeStream:d,isReadableStream:h,isWritableStream:p}=n(6115),f=n(6238),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=n(6371),{destroyer:y}=n(5896),b=n(3370),w=n(7576),_=n(8584),{createDeferredPromise:x}=n(7760),S=n(6532),C=globalThis.Blob||i.Blob,k=void 0!==C?function(e){return e instanceof C}:function(e){return!1},E=globalThis.AbortController||n(5568).AbortController,{FunctionPrototypeCall:A}=n(4134);class T extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function I(e){const t=e.readable&&"function"!=typeof e.readable.read?w.wrap(e.readable):e.readable,n=e.writable;let r,i,a,l,c,u=!!o(t),d=!!s(n);function h(e){const t=l;l=null,t?t(e):e&&c.destroy(e)}return c=new T({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==n||!n.writableObjectMode),readable:u,writable:d}),d&&(f(n,e=>{d=!1,e&&y(t,e),h(e)}),c._write=function(e,t,i){n.write(e,t)?i():r=i},c._final=function(e){n.end(),i=e},n.on("drain",function(){if(r){const e=r;r=null,e()}}),n.on("finish",function(){if(i){const e=i;i=null,e()}})),u&&(f(t,e=>{u=!1,e&&y(t,e),h(e)}),t.on("readable",function(){if(a){const e=a;a=null,e()}}),t.on("end",function(){c.push(null)}),c._read=function(){for(;;){const e=t.read();if(null===e)return void(a=c._read);if(!c.push(e))return}}),c._destroy=function(e,o){e||null===l||(e=new m),a=null,r=null,i=null,null===l?o(e):(l=o,y(n,e),y(t,e))},c}e.exports=function e(t,n){if(d(t))return t;if(c(t))return I({readable:t});if(u(t))return I({writable:t});if(l(t))return I({writable:!1,readable:!1});if(h(t))return I({readable:w.fromWeb(t)});if(p(t))return I({writable:_.fromWeb(t)});if("function"==typeof t){const{value:e,write:i,final:o,destroy:s}=function(e){let{promise:t,resolve:n}=x();const i=new E,o=i.signal,s=e(async function*(){for(;;){const e=t;t=null;const{chunk:i,done:s,cb:a}=await e;if(r.nextTick(a),s)return;if(o.aborted)throw new m(void 0,{cause:o.reason});({promise:t,resolve:n}=x()),yield i}}(),{signal:o});return{value:s,write(e,t,r){const i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(a(e))return S(T,e,{objectMode:!0,write:i,final:o,destroy:s});const l=null==e?void 0:e.then;if("function"==typeof l){let t;const n=A(l,e,e=>{if(null!=e)throw new v("nully","body",e)},e=>{y(t,e)});return t=new T({objectMode:!0,readable:!1,write:i,final(e){o(async()=>{try{await n,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}})},destroy:s})}throw new v("Iterable, AsyncIterable or AsyncFunction",n,e)}if(k(t))return e(t.arrayBuffer());if(a(t))return S(T,t,{objectMode:!0,writable:!1});if(h(null==t?void 0:t.readable)&&p(null==t?void 0:t.writable))return T.fromWeb(t);if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable)){return I({readable:null!=t&&t.readable?c(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?u(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0})}const i=null==t?void 0:t.then;if("function"==typeof i){let e;return A(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{y(e,t)}),e=new T({objectMode:!0,writable:!1,read(){}})}throw new g(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}},6238:(e,t,n)=>{"use strict";const r=n(5606),{AbortError:i,codes:o}=n(6371),{ERR_INVALID_ARG_TYPE:s,ERR_STREAM_PREMATURE_CLOSE:a}=o,{kEmptyObject:l,once:c}=n(7760),{validateAbortSignal:u,validateFunction:d,validateObject:h,validateBoolean:p}=n(277),{Promise:f,PromisePrototypeThen:m,SymbolDispose:g}=n(4134),{isClosed:v,isReadable:y,isReadableNodeStream:b,isReadableStream:w,isReadableFinished:_,isReadableErrored:x,isWritable:S,isWritableNodeStream:C,isWritableStream:k,isWritableFinished:E,isWritableErrored:A,isNodeStream:T,willEmitClose:I,kIsClosedPromise:R}=n(6115);let L;const N=()=>{};function O(e,t,o){var p,f;if(2===arguments.length?(o=t,t=l):null==t?t=l:h(t,"options"),d(o,"callback"),u(t.signal,"options.signal"),o=c(o),w(e)||k(e))return function(e,t,o){let s=!1,a=N;if(t.signal)if(a=()=>{s=!0,o.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(a);else{L=L||n(7760).addAbortListener;const r=L(t.signal,a),i=o;o=c((...t)=>{r[g](),i.apply(e,t)})}const l=(...t)=>{s||r.nextTick(()=>o.apply(e,t))};return m(e[R].promise,l,l),N}(e,t,o);if(!T(e))throw new s("stream",["ReadableStream","WritableStream","Stream"],e);const O=null!==(p=t.readable)&&void 0!==p?p:b(e),D=null!==(f=t.writable)&&void 0!==f?f:C(e),M=e._writableState,P=e._readableState,j=()=>{e.writable||F()};let U=I(e)&&b(e)===O&&C(e)===D,B=E(e,!1);const F=()=>{B=!0,e.destroyed&&(U=!1),(!U||e.readable&&!O)&&(O&&!z||o.call(e))};let z=_(e,!1);const q=()=>{z=!0,e.destroyed&&(U=!1),(!U||e.writable&&!D)&&(D&&!B||o.call(e))},$=t=>{o.call(e,t)};let H=v(e);const V=()=>{H=!0;const t=A(e)||x(e);return t&&"boolean"!=typeof t?o.call(e,t):O&&!z&&b(e,!0)&&!_(e,!1)?o.call(e,new a):!D||B||E(e,!1)?void o.call(e):o.call(e,new a)},W=()=>{H=!0;const t=A(e)||x(e);if(t&&"boolean"!=typeof t)return o.call(e,t);o.call(e)},G=()=>{e.req.on("finish",F)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?D&&!M&&(e.on("end",j),e.on("close",j)):(e.on("complete",F),U||e.on("abort",V),e.req?G():e.on("request",G)),U||"boolean"!=typeof e.aborted||e.on("aborted",V),e.on("end",q),e.on("finish",F),!1!==t.error&&e.on("error",$),e.on("close",V),H?r.nextTick(V):null!=M&&M.errorEmitted||null!=P&&P.errorEmitted?U||r.nextTick(W):(O||U&&!y(e)||!B&&!1!==S(e))&&(D||U&&!S(e)||!z&&!1!==y(e))?P&&e.req&&e.aborted&&r.nextTick(W):r.nextTick(W);const J=()=>{o=N,e.removeListener("aborted",V),e.removeListener("complete",F),e.removeListener("abort",V),e.removeListener("request",G),e.req&&e.req.removeListener("finish",F),e.removeListener("end",j),e.removeListener("close",j),e.removeListener("finish",F),e.removeListener("end",q),e.removeListener("error",$),e.removeListener("close",V)};if(t.signal&&!H){const s=()=>{const n=o;J(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(s);else{L=L||n(7760).addAbortListener;const r=L(t.signal,s),i=o;o=c((...t)=>{r[g](),i.apply(e,t)})}}return J}e.exports=O,e.exports.finished=function(e,t){var n;let r=!1;return null===t&&(t=l),null!==(n=t)&&void 0!==n&&n.cleanup&&(p(t.cleanup,"cleanup"),r=t.cleanup),new f((n,i)=>{const o=O(e,t,e=>{r&&o(),e?i(e):n()})})}},6532:(e,t,n)=>{"use strict";const r=n(5606),{PromisePrototypeThen:i,SymbolAsyncIterator:o,SymbolIterator:s}=n(4134),{Buffer:a}=n(8287),{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:c}=n(6371).codes;e.exports=function(e,t,n){let u,d;if("string"==typeof t||t instanceof a)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});if(t&&t[o])d=!0,u=t[o]();else{if(!t||!t[s])throw new l("iterable",["Iterable"],t);d=!1,u=t[s]()}const h=new e({objectMode:!0,highWaterMark:1,...n});let p=!1;return h._read=function(){p||(p=!0,async function(){for(;;){try{const{value:e,done:t}=d?await u.next():u.next();if(t)h.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw p=!1,new c;if(h.push(t))continue;p=!1}}catch(e){h.destroy(e)}break}}())},h._destroy=function(e,t){i(async function(e){const t=null!=e,n="function"==typeof u.throw;if(t&&n){const{value:t,done:n}=await u.throw(e);if(await t,n)return}if("function"==typeof u.return){const{value:e}=await u.return();await e}}(e),()=>r.nextTick(t,e),n=>r.nextTick(t,n||e))},h}},4259:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ObjectSetPrototypeOf:i}=n(4134),{EventEmitter:o}=n(7007);function s(e){o.call(this,e)}function a(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}i(s.prototype,o.prototype),i(s,o),s.prototype.pipe=function(e,t){const n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",l),n.on("close",c));let s=!1;function l(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){d(),0===o.listenerCount(this,"error")&&this.emit("error",e)}function d(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",l),n.removeListener("close",c),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return a(n,"error",u),a(e,"error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e},e.exports={Stream:s,prependListener:a}},823:(e,t,n)=>{"use strict";const r=globalThis.AbortController||n(5568).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:s,ERR_OUT_OF_RANGE:a},AbortError:l}=n(6371),{validateAbortSignal:c,validateInteger:u,validateObject:d}=n(277),h=n(4134).Symbol("kWeak"),p=n(4134).Symbol("kResistStopPropagation"),{finished:f}=n(6238),m=n(7830),{addAbortSignalNoValidate:g}=n(4147),{isWritable:v,isNodeStream:y}=n(6115),{deprecate:b}=n(7760),{ArrayPrototypePush:w,Boolean:_,MathFloor:x,Number:S,NumberIsNaN:C,Promise:k,PromiseReject:E,PromiseResolve:A,PromisePrototypeThen:T,Symbol:I}=n(4134),R=I("kEmpty"),L=I("kEof");function N(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=x(t.concurrency));let i=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(i=x(t.highWaterMark)),u(r,"options.concurrency",1),u(i,"options.highWaterMark",0),i+=r,async function*(){const o=n(7760).AbortSignalAny([null==t?void 0:t.signal].filter(_)),s=this,a=[],c={signal:o};let u,d,h=!1,p=0;function f(){h=!0,m()}function m(){p-=1,g()}function g(){d&&!h&&p<r&&a.length<i&&(d(),d=null)}!async function(){try{for await(let t of s){if(h)return;if(o.aborted)throw new l;try{if(t=e(t,c),t===R)continue;t=A(t)}catch(e){t=E(e)}p+=1,T(t,m,f),a.push(t),u&&(u(),u=null),!h&&(a.length>=i||p>=r)&&await new k(e=>{d=e})}a.push(L)}catch(e){const t=E(e);T(t,m,f),a.push(t)}finally{h=!0,u&&(u(),u=null)}}();try{for(;;){for(;a.length>0;){const e=await a[0];if(e===L)return;if(o.aborted)throw new l;e!==R&&(yield e),a.shift(),g()}await new k(e=>{u=e})}}finally{h=!0,d&&(d(),d=null)}}.call(this)}async function O(e,t=void 0){for await(const n of D.call(this,e,t))return!0;return!1}function D(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return N.call(this,async function(t,n){return await e(t,n)?t:R},t)}class M extends s{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function P(e){if(e=S(e),C(e))return 0;if(e<0)throw new a("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:b(function(e=void 0){return null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&c(e.signal,"options.signal"),async function*(){let t=0;for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l({cause:e.signal.reason});yield[t++,r]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal"),e=P(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;e--<=0&&(yield n)}}.call(this)},filter:D,flatMap:function(e,t){const n=N.call(this,e,t);return async function*(){for await(const e of n)yield*e}.call(this)},map:N,take:function(e,t=void 0){return null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal"),e=P(e),async function*(){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new l;for await(const n of this){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new l;if(e-- >0&&(yield n),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&d(t,"options"),null!=(null==t?void 0:t.signal)&&c(t.signal,"options.signal"),y(e)&&!v(e))throw new i("stream",e,"must be writable");const n=m(this,e);return null!=t&&t.signal&&g(t.signal,n),n}},e.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);return!await O.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new o("fn",["Function","AsyncFunction"],e);for await(const n of N.call(this,async function(t,n){return await e(t,n),R},t));},reduce:async function(e,t,n){var i;if("function"!=typeof e)throw new o("reducer",["Function","AsyncFunction"],e);null!=n&&d(n,"options"),null!=(null==n?void 0:n.signal)&&c(n.signal,"options.signal");let s=arguments.length>1;if(null!=n&&null!==(i=n.signal)&&void 0!==i&&i.aborted){const e=new l(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await f(this.destroy(e)),e}const a=new r,u=a.signal;if(null!=n&&n.signal){const e={once:!0,[h]:this,[p]:!0};n.signal.addEventListener("abort",()=>a.abort(),e)}let m=!1;try{for await(const r of this){var g;if(m=!0,null!=n&&null!==(g=n.signal)&&void 0!==g&&g.aborted)throw new l;s?t=await e(t,r,{signal:u}):(t=r,s=!0)}if(!m&&!s)throw new M}finally{a.abort()}return t},toArray:async function(e){null!=e&&d(e,"options"),null!=(null==e?void 0:e.signal)&&c(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(null!=e&&null!==(n=e.signal)&&void 0!==n&&n.aborted)throw new l(void 0,{cause:e.signal.reason});w(t,r)}return t},some:O,find:async function(e,t){for await(const n of D.call(this,e,t))return n}}},6524:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r}=n(4134);e.exports=o;const i=n(7382);function o(e){if(!(this instanceof o))return new o(e);i.call(this,e)}r(o.prototype,i.prototype),r(o,i),o.prototype._transform=function(e,t,n){n(null,e)}},7758:(e,t,n)=>{const r=n(5606),{ArrayIsArray:i,Promise:o,SymbolAsyncIterator:s,SymbolDispose:a}=n(4134),l=n(6238),{once:c}=n(7760),u=n(5896),d=n(3370),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:f,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:y}=n(6371),{validateFunction:b,validateAbortSignal:w}=n(277),{isIterable:_,isReadable:x,isReadableNodeStream:S,isNodeStream:C,isTransformStream:k,isWebStream:E,isReadableStream:A,isReadableFinished:T}=n(6115),I=globalThis.AbortController||n(5568).AbortController;let R,L,N;function O(e,t,n){let r=!1;e.on("close",()=>{r=!0});return{destroy:t=>{r||(r=!0,u.destroyer(e,t||new g("pipe")))},cleanup:l(e,{readable:t,writable:n},e=>{r=!e})}}function D(e){if(_(e))return e;if(S(e))return async function*(e){L||(L=n(7576));yield*L.prototype[s].call(e)}(e);throw new p("val",["Readable","Iterable","AsyncIterable"],e)}async function M(e,t,n,{end:r}){let i,s=null;const a=e=>{if(e&&(i=e),s){const e=s;s=null,e()}},c=()=>new o((e,t)=>{i?t(i):s=()=>{i?t(i):e()}});t.on("drain",a);const u=l(t,{readable:!1},a);try{t.writableNeedDrain&&await c();for await(const n of e)t.write(n)||await c();r&&(t.end(),await c()),n()}catch(e){n(i!==e?h(i,e):e)}finally{u(),t.off("drain",a)}}async function P(e,t,n,{end:r}){k(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(e){try{await i.abort(e),n(e)}catch(e){n(e)}}}function j(e,t,o){if(1===e.length&&i(e[0])&&(e=e[0]),e.length<2)throw new m("streams");const s=new I,l=s.signal,c=null==o?void 0:o.signal,u=[];function h(){F(new y)}let g,v,b;w(c,"options.signal"),N=N||n(7760).addAbortListener,c&&(g=N(c,h));const T=[];let L,j=0;function B(e){F(e,0===--j)}function F(e,n){var i;if(!e||v&&"ERR_STREAM_PREMATURE_CLOSE"!==v.code||(v=e),v||n){for(;T.length;)T.shift()(v);null===(i=g)||void 0===i||i[a](),s.abort(),n&&(v||u.forEach(e=>e()),r.nextTick(t,v,b))}}for(let H=0;H<e.length;H++){const V=e[H],W=H<e.length-1,G=H>0,J=W||!1!==(null==o?void 0:o.end),K=H===e.length-1;if(C(V)){if(J){const{destroy:Z,cleanup:Q}=O(V,W,G);T.push(Z),x(V)&&K&&u.push(Q)}function z(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&B(e)}V.on("error",z),x(V)&&K&&u.push(()=>{V.removeListener("error",z)})}if(0===H)if("function"==typeof V){if(L=V({signal:l}),!_(L))throw new f("Iterable, AsyncIterable or Stream","source",L)}else L=_(V)||S(V)||k(V)?V:d.from(V);else if("function"==typeof V){var q;if(k(L))L=D(null===(q=L)||void 0===q?void 0:q.readable);else L=D(L);if(L=V(L,{signal:l}),W){if(!_(L,!0))throw new f("AsyncIterable",`transform[${H-1}]`,L)}else{var $;R||(R=n(6524));const X=new R({objectMode:!0}),Y=null===($=L)||void 0===$?void 0:$.then;if("function"==typeof Y)j++,Y.call(L,e=>{b=e,null!=e&&X.write(e),J&&X.end(),r.nextTick(B)},e=>{X.destroy(e),r.nextTick(B,e)});else if(_(L,!0))j++,M(L,X,B,{end:J});else{if(!A(L)&&!k(L))throw new f("AsyncIterable or Promise","destination",L);{const ne=L.readable||L;j++,M(ne,X,B,{end:J})}}L=X;const{destroy:ee,cleanup:te}=O(L,!1,!0);T.push(ee),K&&u.push(te)}}else if(C(V)){if(S(L)){j+=2;const re=U(L,V,B,{end:J});x(V)&&K&&u.push(re)}else if(k(L)||A(L)){const ie=L.readable||L;j++,M(ie,V,B,{end:J})}else{if(!_(L))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],L);j++,M(L,V,B,{end:J})}L=V}else if(E(V)){if(S(L))j++,P(D(L),V,B,{end:J});else if(A(L)||_(L))j++,P(L,V,B,{end:J});else{if(!k(L))throw new p("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],L);j++,P(L.readable,V,B,{end:J})}L=V}else L=d.from(V)}return(null!=l&&l.aborted||null!=c&&c.aborted)&&r.nextTick(h),L}function U(e,t,n,{end:i}){let o=!1;if(t.on("close",()=>{o||n(new v)}),e.pipe(t,{end:!1}),i){function s(){o=!0,t.end()}T(e)?r.nextTick(s):e.once("end",s)}else n();return l(e,{readable:!0,writable:!1},t=>{const r=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&r&&r.ended&&!r.errored&&!r.errorEmitted?e.once("end",n).once("error",n):n(t)}),l(t,{readable:!1,writable:!0},n)}e.exports={pipelineImpl:j,pipeline:function(...e){return j(e,c(function(e){return b(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}},7576:(e,t,n)=>{"use strict";const r=n(5606),{ArrayPrototypeIndexOf:i,NumberIsInteger:o,NumberIsNaN:s,NumberParseInt:a,ObjectDefineProperties:l,ObjectKeys:c,ObjectSetPrototypeOf:u,Promise:d,SafeSet:h,SymbolAsyncDispose:p,SymbolAsyncIterator:f,Symbol:m}=n(4134);e.exports=G,G.ReadableState=W;const{EventEmitter:g}=n(7007),{Stream:v,prependListener:y}=n(4259),{Buffer:b}=n(8287),{addAbortSignal:w}=n(4147),_=n(6238);let x=n(7760).debuglog("stream",e=>{x=e});const S=n(345),C=n(5896),{getHighWaterMark:k,getDefaultHighWaterMark:E}=n(5291),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_OUT_OF_RANGE:R,ERR_STREAM_PUSH_AFTER_EOF:L,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:N},AbortError:O}=n(6371),{validateObject:D}=n(277),M=m("kPaused"),{StringDecoder:P}=n(3141),j=n(6532);u(G.prototype,v.prototype),u(G,v);const U=()=>{},{errorOrDestroy:B}=C,F=1,z=16,q=32,$=2048,H=4096;function V(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function W(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(3370)),this.state=$|H|z|q,e&&e.objectMode&&(this.state|=F),r&&e&&e.readableObjectMode&&(this.state|=F),this.highWaterMark=e?k(this,e,"readableHighWaterMark",r):E(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[M]=null,e&&!1===e.emitClose&&(this.state&=~$),e&&!1===e.autoDestroy&&(this.state&=~H),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new P(e.encoding),this.encoding=e.encoding)}function G(e){if(!(this instanceof G))return new G(e);const t=this instanceof n(3370);this._readableState=new W(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&w(e.signal,this)),v.call(this,e),C.construct(this,()=>{this._readableState.needReadable&&Y(this,this._readableState)})}function J(e,t,n,r){x("readableAddChunk",t);const i=e._readableState;let o;if(0===(i.state&F)&&("string"==typeof t?(n=n||i.defaultEncoding,i.encoding!==n&&(r&&i.encoding?t=b.from(t,n).toString(i.encoding):(t=b.from(t,n),n=""))):t instanceof b?n="":v._isUint8Array(t)?(t=v._uint8ArrayToBuffer(t),n=""):null!=t&&(o=new T("chunk",["string","Buffer","Uint8Array"],t))),o)B(e,o);else if(null===t)i.state&=-9,function(e,t){if(x("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?Q(e):(t.needReadable=!1,t.emittedReadable=!0,X(e))}(e,i);else if(0!==(i.state&F)||t&&t.length>0)if(r)if(4&i.state)B(e,new N);else{if(i.destroyed||i.errored)return!1;K(e,i,t,!0)}else if(i.ended)B(e,new L);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!n?(t=i.decoder.write(t),i.objectMode||0!==t.length?K(e,i,t,!1):Y(e,i)):K(e,i,t,!1)}else r||(i.state&=-9,Y(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function K(e,t,n,r){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),64&t.state&&Q(e)),Y(e,t)}l(W.prototype,{objectMode:V(F),ended:V(2),endEmitted:V(4),reading:V(8),constructed:V(z),sync:V(q),needReadable:V(64),emittedReadable:V(128),readableListening:V(256),resumeScheduled:V(512),errorEmitted:V(1024),emitClose:V($),autoDestroy:V(H),destroyed:V(8192),closed:V(16384),closeEmitted:V(32768),multiAwaitDrain:V(65536),readingMore:V(1<<17),dataEmitted:V(1<<18)}),G.prototype.destroy=C.destroy,G.prototype._undestroy=C.undestroy,G.prototype._destroy=function(e,t){t(e)},G.prototype[g.captureRejectionSymbol]=function(e){this.destroy(e)},G.prototype[p]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new O,this.destroy(e)),new d((t,n)=>_(this,r=>r&&r!==e?n(r):t(null)))},G.prototype.push=function(e,t){return J(this,e,t,!1)},G.prototype.unshift=function(e,t){return J(this,e,t,!0)},G.prototype.isPaused=function(){const e=this._readableState;return!0===e[M]||!1===e.flowing},G.prototype.setEncoding=function(e){const t=new P(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const n=this._readableState.buffer;let r="";for(const e of n)r+=t.write(e);return n.clear(),""!==r&&n.push(r),this._readableState.length=r.length,this};function Z(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&F)?1:s(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function Q(e){const t=e._readableState;x("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(x("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(X,e))}function X(e){const t=e._readableState;x("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ie(e)}function Y(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(ee,e,t))}function ee(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const n=t.length;if(x("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function te(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[M]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function ne(e){x("readable nexttick read 0"),e.read(0)}function re(e,t){x("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ie(e),t.flowing&&!t.reading&&e.read(0)}function ie(e){const t=e._readableState;for(x("flow",t.flowing);t.flowing&&null!==e.read(););}function oe(e,t){"function"!=typeof e.read&&(e=G.wrap(e,{objectMode:!0}));const n=async function*(e,t){let n,r=U;function i(t){this===e?(r(),r=U):r=t}e.on("readable",i);const o=_(e,{writable:!1},e=>{n=e?A(n,e):null,r(),r=U});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new d(i)}}}catch(e){throw n=A(n,e),n}finally{!n&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",i),o()):C.destroyer(e,null)}}(e,t);return n.stream=e,n}function se(e,t){if(0===t.length)return null;let n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n}function ae(e){const t=e._readableState;x("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(le,t,e))}function le(e,t){if(x("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(ce,t);else if(e.autoDestroy){const e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function ce(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let ue;function de(){return void 0===ue&&(ue={}),ue}G.prototype.read=function(e){x("read",e),void 0===e?e=NaN:o(e)||(e=a(e,10));const t=this._readableState,n=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new R("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return x("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ae(this):Q(this),null;if(0===(e=Z(e,t))&&t.ended)return 0===t.length&&ae(this),null;let r,i=!!(64&t.state);if(x("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,x("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,x("reading, ended or constructing",i);else if(i){x("do read"),t.state|=8|q,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(e){B(this,e)}t.state&=~q,t.reading||(e=Z(n,t))}return r=e>0?se(e,t):null,null===r?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&ae(this)),null===r||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",r)),r},G.prototype._read=function(e){throw new I("_read()")},G.prototype.pipe=function(e,t){const n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new h(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(e),x("pipe count=%d opts=%j",i.pipes.length,t);const o=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?a:g;function s(t,r){x("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){x("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),l&&e.removeListener("drain",l);e.removeListener("error",p),e.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",g),n.removeListener("data",d),c=!0,l&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l()}())}function a(){x("onend"),e.end()}let l;i.endEmitted?r.nextTick(o):n.once("end",o),e.on("unpipe",s);let c=!1;function u(){c||(1===i.pipes.length&&i.pipes[0]===e?(x("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(e)&&(x("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),n.pause()),l||(l=function(e,t){return function(){const n=e._readableState;n.awaitDrainWriters===t?(x("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(x("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),n.awaitDrainWriters&&0!==n.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,e),e.on("drain",l))}function d(t){x("ondata");const n=e.write(t);x("dest.write",n),!1===n&&u()}function p(t){if(x("onerror",t),g(),e.removeListener("error",p),0===e.listenerCount("error")){const n=e._writableState||e._readableState;n&&!n.errorEmitted?B(e,t):e.emit("error",t)}}function f(){e.removeListener("finish",m),g()}function m(){x("onfinish"),e.removeListener("close",f),g()}function g(){x("unpipe"),n.unpipe(e)}return n.on("data",d),y(e,"error",p),e.once("close",f),e.once("finish",m),e.emit("pipe",n),!0===e.writableNeedDrain?u():i.flowing||(x("pipe resume"),n.resume()),e},G.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const n=i(t.pipes,e);return-1===n||(t.pipes.splice(n,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},G.prototype.on=function(e,t){const n=v.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,x("on readable",i.length,i.reading),i.length?Q(this):i.reading||r.nextTick(ne,this))),n},G.prototype.addListener=G.prototype.on,G.prototype.removeListener=function(e,t){const n=v.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(te,this),n},G.prototype.off=G.prototype.removeListener,G.prototype.removeAllListeners=function(e){const t=v.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(te,this),t},G.prototype.resume=function(){const e=this._readableState;return e.flowing||(x("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(re,e,t))}(this,e)),e[M]=!1,this},G.prototype.pause=function(){return x("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(x("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[M]=!0,this},G.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{B(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const n=c(e);for(let t=1;t<n.length;t++){const r=n[t];void 0===this[r]&&"function"==typeof e[r]&&(this[r]=e[r].bind(e))}return this},G.prototype[f]=function(){return oe(this)},G.prototype.iterator=function(e){return void 0!==e&&D(e,"options"),oe(this,e)},l(G.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(W.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[M]},set(e){this[M]=!!e}}}),G._fromList=se,G.from=function(e,t){return j(G,e,t)},G.fromWeb=function(e,t){return de().newStreamReadableFromReadableStream(e,t)},G.toWeb=function(e,t){return de().newReadableStreamFromStreamReadable(e,t)},G.wrap=function(e,t){var n,r;return new G({objectMode:null===(n=null!==(r=e.readableObjectMode)&&void 0!==r?r:e.objectMode)||void 0===n||n,...t,destroy(t,n){C.destroyer(e,t),n(t)}}).wrap(e)}},5291:(e,t,n)=>{"use strict";const{MathFloor:r,NumberIsInteger:i}=n(4134),{validateInteger:o}=n(277),{ERR_INVALID_ARG_VALUE:s}=n(6371).codes;let a=16384,l=16;function c(e){return e?l:a}e.exports={getHighWaterMark:function(e,t,n,o){const a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,o,n);if(null!=a){if(!i(a)||a<0){throw new s(o?`options.${n}`:"options.highWaterMark",a)}return r(a)}return c(e.objectMode)},getDefaultHighWaterMark:c,setDefaultHighWaterMark:function(e,t){o(t,"value",0),e?l=t:a=t}}},7382:(e,t,n)=>{"use strict";const{ObjectSetPrototypeOf:r,Symbol:i}=n(4134);e.exports=c;const{ERR_METHOD_NOT_IMPLEMENTED:o}=n(6371).codes,s=n(3370),{getHighWaterMark:a}=n(5291);r(c.prototype,s.prototype),r(c,s);const l=i("kCallback");function c(e){if(!(this instanceof c))return new c(e);const t=e?a(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),s.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function u(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,n)=>{t?e?e(t):this.destroy(t):(null!=n&&this.push(n),this.push(null),e&&e())})}function d(){this._final!==u&&u.call(this)}c.prototype._final=u,c.prototype._transform=function(e,t,n){throw new o("_transform()")},c.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,o=r.length;this._transform(e,t,(e,t)=>{e?n(e):(null!=t&&this.push(t),i.ended||o===r.length||r.length<r.highWaterMark?n():this[l]=n)})},c.prototype._read=function(){if(this[l]){const e=this[l];this[l]=null,e()}}},6115:(e,t,n)=>{"use strict";const{SymbolAsyncIterator:r,SymbolIterator:i,SymbolFor:o}=n(4134),s=o("nodejs.stream.destroyed"),a=o("nodejs.stream.errored"),l=o("nodejs.stream.readable"),c=o("nodejs.stream.writable"),u=o("nodejs.stream.disturbed"),d=o("nodejs.webstream.isClosedPromise"),h=o("nodejs.webstream.controllerErrorFunction");function p(e,t=!1){var n;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(n=e._readableState)||void 0===n?void 0:n.readable)||e._writableState&&!e._readableState)}function f(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function m(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||m(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function v(e){return!(!e||m(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||m(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function b(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[s]||null!=r&&r.destroyed)}function w(e){if(!f(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}function _(e,t){if(!p(e))return null;const n=e._readableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.endEmitted)?null:!!(n.endEmitted||!1===t&&!0===n.ended&&0===n.length))}function x(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!b(e)&&(p(e)&&e.readable&&!_(e))}function S(e){return e&&null!=e[c]?e[c]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!b(e)&&(f(e)&&e.writable&&!w(e))}function C(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function k(e){return"boolean"==typeof e._sent100&&C(e)}e.exports={isDestroyed:b,kIsDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[u])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:u,isErrored:function(e){var t,n,r,i,o,s,l,c,u,d;return!(!e||!(null!==(t=null!==(n=null!==(r=null!==(i=null!==(o=null!==(s=e[a])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(c=e._writableState)||void 0===c?void 0:c.errorEmitted)&&void 0!==n?n:null===(u=e._readableState)||void 0===u?void 0:u.errored)&&void 0!==t?t:null===(d=e._writableState)||void 0===d?void 0:d.errored))},kIsErrored:a,isReadable:x,kIsReadable:l,kIsClosedPromise:d,kControllerErrorFunction:h,kIsWritable:c,isClosed:function(e){if(!m(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,n=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==n?void 0:n.closed)?(null==t?void 0:t.closed)||(null==n?void 0:n.closed):"boolean"==typeof e._closed&&C(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return m(e)?!!b(e)||(!1===(null==t?void 0:t.readable)||!x(e))&&(!1===(null==t?void 0:t.writable)||!S(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[r]:!1===t?"function"==typeof e[i]:"function"==typeof e[r]||"function"==typeof e[i])},isReadableNodeStream:p,isReadableStream:g,isReadableEnded:function(e){if(!p(e))return null;if(!0===e.readableEnded)return!0;const t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)},isReadableFinished:_,isReadableErrored:function(e){var t,n;return m(e)?e.readableErrored?e.readableErrored:null!==(t=null===(n=e._readableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isNodeStream:m,isWebStream:function(e){return g(e)||v(e)||y(e)},isWritable:S,isWritableNodeStream:f,isWritableStream:v,isWritableEnded:w,isWritableFinished:function(e,t){if(!f(e))return null;if(!0===e.writableFinished)return!0;const n=e._writableState;return(null==n||!n.errored)&&("boolean"!=typeof(null==n?void 0:n.finished)?null:!!(n.finished||!1===t&&!0===n.ended&&0===n.length))},isWritableErrored:function(e){var t,n;return m(e)?e.writableErrored?e.writableErrored:null!==(t=null===(n=e._writableState)||void 0===n?void 0:n.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:k,willEmitClose:function(e){if(!m(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&k(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)},isTransformStream:y}},8584:(e,t,n)=>{"use strict";const r=n(5606),{ArrayPrototypeSlice:i,Error:o,FunctionPrototypeSymbolHasInstance:s,ObjectDefineProperty:a,ObjectDefineProperties:l,ObjectSetPrototypeOf:c,StringPrototypeToLowerCase:u,Symbol:d,SymbolHasInstance:h}=n(4134);e.exports=D,D.WritableState=N;const{EventEmitter:p}=n(7007),f=n(4259).Stream,{Buffer:m}=n(8287),g=n(5896),{addAbortSignal:v}=n(4147),{getHighWaterMark:y,getDefaultHighWaterMark:b}=n(5291),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:x,ERR_STREAM_CANNOT_PIPE:S,ERR_STREAM_DESTROYED:C,ERR_STREAM_ALREADY_FINISHED:k,ERR_STREAM_NULL_VALUES:E,ERR_STREAM_WRITE_AFTER_END:A,ERR_UNKNOWN_ENCODING:T}=n(6371).codes,{errorOrDestroy:I}=g;function R(){}c(D.prototype,f.prototype),c(D,f);const L=d("kOnFinished");function N(e,t,r){"boolean"!=typeof r&&(r=t instanceof n(3370)),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",r):b(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,O(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[L]=[]}function O(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function D(e){const t=this instanceof n(3370);if(!t&&!s(D,this))return new D(e);this._writableState=new N(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&v(e.signal,this)),f.call(this,e),g.construct(this,()=>{const e=this._writableState;e.writing||q(this,e),V(this,e)})}function M(e,t,n,i){const o=e._writableState;if("function"==typeof n)i=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!m.isEncoding(n))throw new T(n)}else n=o.defaultEncoding;"function"!=typeof i&&(i=R)}if(null===t)throw new E;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=m.from(t,n),n="buffer");else if(t instanceof m)n="buffer";else{if(!f._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=f._uint8ArrayToBuffer(t),n="buffer"}let s;return o.ending?s=new A:o.destroyed&&(s=new C("write")),s?(r.nextTick(i,s),I(e,s,!0),s):(o.pendingcb++,function(e,t,n,r,i){const o=t.objectMode?1:n.length;t.length+=o;const s=t.length<t.highWaterMark;s||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:n,encoding:r,callback:i}),t.allBuffers&&"buffer"!==r&&(t.allBuffers=!1),t.allNoop&&i!==R&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(n,r,t.onwrite),t.sync=!1);return s&&!t.errored&&!t.destroyed}(e,o,t,n,i))}function P(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new C("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function j(e,t,n,r){--t.pendingcb,r(n),z(t),I(e,n)}function U(e,t){const n=e._writableState,i=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t?(t.stack,n.errored||(n.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?r.nextTick(j,e,n,t,o):j(e,n,t,o)):(n.buffered.length>n.bufferedIndex&&q(e,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:e,state:n},r.nextTick(B,n.afterWriteTickInfo)):F(e,n,1,o))):I(e,new x)}function B({stream:e,state:t,count:n,cb:r}){return t.afterWriteTickInfo=null,F(e,t,n,r)}function F(e,t,n,r){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));n-- >0;)t.pendingcb--,r();t.destroyed&&z(t),V(e,t)}function z(e){if(e.writing)return;for(let n=e.bufferedIndex;n<e.buffered.length;++n){var t;const{chunk:r,callback:i}=e.buffered[n],o=e.objectMode?1:r.length;e.length-=o,i(null!==(t=e.errored)&&void 0!==t?t:new C("write"))}const n=e[L].splice(0);for(let t=0;t<n.length;t++){var r;n[t](null!==(r=e.errored)&&void 0!==r?r:new C("end"))}O(e)}function q(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:n,bufferedIndex:r,objectMode:o}=t,s=n.length-r;if(!s)return;let a=r;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;const r=t.allNoop?R:e=>{for(let t=a;t<n.length;++t)n[t].callback(e)},o=t.allNoop&&0===a?n:i(n,a);o.allBuffers=t.allBuffers,P(e,t,!0,t.length,o,"",r),O(t)}else{do{const{chunk:r,encoding:i,callback:s}=n[a];n[a++]=null;P(e,t,!1,o?1:r.length,r,i,s)}while(a<n.length&&!t.writing);a===n.length?O(t):a>256?(n.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function H(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let n=!1;function i(i){if(n)I(e,null!=i?i:x());else if(n=!0,t.pendingcb--,i){const n=t[L].splice(0);for(let e=0;e<n.length;e++)n[e](i);I(e,i,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(W,e,t))}t.sync=!0,t.pendingcb++;try{e._final(i)}catch(e){i(e)}t.sync=!1}(e,t)))}function V(e,t,n){$(t)&&(H(e,t),0===t.pendingcb&&(n?(t.pendingcb++,r.nextTick((e,t)=>{$(t)?W(e,t):t.pendingcb--},e,t)):$(t)&&(t.pendingcb++,W(e,t))))}function W(e,t){t.pendingcb--,t.finished=!0;const n=t[L].splice(0);for(let e=0;e<n.length;e++)n[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}N.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},a(N.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),a(D,h,{__proto__:null,value:function(e){return!!s(this,e)||this===D&&(e&&e._writableState instanceof N)}}),D.prototype.pipe=function(){I(this,new S)},D.prototype.write=function(e,t,n){return!0===M(this,e,t,n)},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||q(this,e))},D.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=u(e)),!m.isEncoding(e))throw new T(e);return this._writableState.defaultEncoding=e,this},D.prototype._write=function(e,t,n){if(!this._writev)throw new _("_write()");this._writev([{chunk:e,encoding:t}],n)},D.prototype._writev=null,D.prototype.end=function(e,t,n){const i=this._writableState;let s;if("function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e){const n=M(this,e,t);n instanceof o&&(s=n)}return i.corked&&(i.corked=1,this.uncork()),s||(i.errored||i.ending?i.finished?s=new k("end"):i.destroyed&&(s=new C("end")):(i.ending=!0,V(this,i,!0),i.ended=!0)),"function"==typeof n&&(s||i.finished?r.nextTick(n,s):i[L].push(n)),this},l(D.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const G=g.destroy;let J;function K(){return void 0===J&&(J={}),J}D.prototype.destroy=function(e,t){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[L].length)&&r.nextTick(z,n),G.call(this,e,t),this},D.prototype._undestroy=g.undestroy,D.prototype._destroy=function(e,t){t(e)},D.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},D.fromWeb=function(e,t){return K().newStreamWritableFromWritableStream(e,t)},D.toWeb=function(e){return K().newWritableStreamFromStreamWritable(e)}},277:(e,t,n)=>{"use strict";const{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:o,ArrayPrototypeMap:s,NumberIsInteger:a,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:c,NumberMIN_SAFE_INTEGER:u,NumberParseInt:d,ObjectPrototypeHasOwnProperty:h,RegExpPrototypeExec:p,String:f,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=n(4134),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:b,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:x}}=n(6371),{normalizeEncoding:S}=n(7760),{isAsyncFunction:C,isArrayBufferView:k}=n(7760).types,E={};const A=/^[0-7]+$/;const T=v((e,t,n=u,r=c)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new _(t,"an integer",e);if(e<n||e>r)throw new _(t,`>= ${n} && <= ${r}`,e)}),I=v((e,t,n=-2147483648,r=2147483647)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new _(t,"an integer",e);if(e<n||e>r)throw new _(t,`>= ${n} && <= ${r}`,e)}),R=v((e,t,n=!1)=>{if("number"!=typeof e)throw new b(t,"number",e);if(!a(e))throw new _(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new _(t,`>= ${r} && <= ${i}`,e)});function L(e,t){if("string"!=typeof e)throw new b(t,"string",e)}const N=v((e,t,n)=>{if(!i(n,e)){const r=o(s(n,e=>"string"==typeof e?`'${e}'`:f(e)),", ");throw new w(t,e,"must be one of: "+r)}});function O(e,t){if("boolean"!=typeof e)throw new b(t,"boolean",e)}function D(e,t,n){return null!=e&&h(e,t)?e[t]:n}const M=v((e,t,n=null)=>{const i=D(n,"allowArray",!1),o=D(n,"allowFunction",!1);if(!D(n,"nullable",!1)&&null===e||!i&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new b(t,"Object",e)}),P=v((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new b(t,"a dictionary",e)}),j=v((e,t,n=0)=>{if(!r(e))throw new b(t,"Array",e);if(e.length<n){throw new w(t,e,`must be longer than ${n}`)}});const U=v((e,t="buffer")=>{if(!k(e))throw new b(t,["Buffer","TypedArray","DataView"],e)});const B=v((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new b(t,"AbortSignal",e)}),F=v((e,t)=>{if("function"!=typeof e)throw new b(t,"Function",e)}),z=v((e,t)=>{if("function"!=typeof e||C(e))throw new b(t,"Function",e)}),q=v((e,t)=>{if(void 0!==e)throw new b(t,"undefined",e)});const $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(e,t){if(void 0===e||!p($,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,n){if(void 0===e&&(e=n),"string"==typeof e){if(null===p(A,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=d(e,8)}return R(e,t),e},validateArray:j,validateStringArray:function(e,t){j(e,t);for(let n=0;n<e.length;n++)L(e[n],`${t}[${n}]`)},validateBooleanArray:function(e,t){j(e,t);for(let n=0;n<e.length;n++)O(e[n],`${t}[${n}]`)},validateAbortSignalArray:function(e,t){j(e,t);for(let n=0;n<e.length;n++){const r=e[n],i=`${t}[${n}]`;if(null==r)throw new b(i,"AbortSignal",r);B(r,i)}},validateBoolean:O,validateBuffer:U,validateDictionary:P,validateEncoding:function(e,t){const n=S(t),r=e.length;if("hex"===n&&r%2!=0)throw new w("encoding",t,`is invalid for data of length ${r}`)},validateFunction:F,validateInt32:I,validateInteger:T,validateNumber:function(e,t,n=void 0,r){if("number"!=typeof e)throw new b(t,"number",e);if(null!=n&&e<n||null!=r&&e>r||(null!=n||null!=r)&&l(e))throw new _(t,`${null!=n?`>= ${n}`:""}${null!=n&&null!=r?" && ":""}${null!=r?`<= ${r}`:""}`,e)},validateObject:M,validateOneOf:N,validatePlainFunction:z,validatePort:function(e,t="Port",n=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!==+e>>>0||e>65535||0===e&&!n)throw new y(t,e,n);return 0|e},validateSignalName:function(e,t="signal"){if(L(e,t),void 0===E[e]){if(void 0!==E[m(e)])throw new x(e+" (signals must use all capital letters)");throw new x(e)}},validateString:L,validateUint32:R,validateUndefined:q,validateUnion:function(e,t,n){if(!i(n,e))throw new b(t,`('${o(n,"|")}')`,e)},validateAbortSignal:B,validateLinkHeaderValue:function(e){if("string"==typeof e)return H(e,"hints"),e;if(r(e)){const t=e.length;let n="";if(0===t)return n;for(let r=0;r<t;r++){const i=e[r];H(i,"hints"),n+=i,r!==t-1&&(n+=", ")}return n}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},9198:(e,t,n)=>{"use strict";const r=n(5506),i=n(3095),o=r.Readable.destroy;e.exports=r.Readable,e.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,e.exports._isUint8Array=r._isUint8Array,e.exports.isDisturbed=r.isDisturbed,e.exports.isErrored=r.isErrored,e.exports.isReadable=r.isReadable,e.exports.Readable=r.Readable,e.exports.Writable=r.Writable,e.exports.Duplex=r.Duplex,e.exports.Transform=r.Transform,e.exports.PassThrough=r.PassThrough,e.exports.addAbortSignal=r.addAbortSignal,e.exports.finished=r.finished,e.exports.destroy=r.destroy,e.exports.destroy=o,e.exports.pipeline=r.pipeline,e.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>i}),e.exports.Stream=r.Stream,e.exports.default=e.exports},6371:(e,t,n)=>{"use strict";const{format:r,inspect:i}=n(9231),{AggregateError:o}=n(4134),s=globalThis.AggregateError||o,a=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c=/^([A-Z][a-z0-9]*)+$/,u={};function d(e,t){if(!e)throw new u.ERR_INTERNAL_ASSERTION(t)}function h(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function p(e,t,n){n||(n=Error);class i extends n{constructor(...n){super(function(e,t,n){if("function"==typeof t)return d(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const i=(t.match(/%[dfijoOs]/g)||[]).length;return d(i===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${i}).`),0===n.length?t:r(t,...n)}(e,t,n))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[a]=!0,u[e]=i}function f(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class m extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new u.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(e,t,n)=>{d("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const o=[],s=[],a=[];for(const e of t)d("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?o.push(e.toLowerCase()):c.test(e)?s.push(e):(d("object"!==e,'The value "object" should be written as "Object"'),a.push(e));if(s.length>0){const e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:r+=`of type ${o[0]}`;break;case 2:r+=`one of type ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();r+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||a.length>0)&&(r+=" or ")}if(s.length>0){switch(s.length){case 1:r+=`an instance of ${s[0]}`;break;case 2:r+=`an instance of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();r+=`an instance of ${s.join(", ")}, or ${e}`}}a.length>0&&(r+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(r+="an "),r+=`${a[0]}`;break;case 2:r+=`one of ${a[0]} or ${a[1]}`;break;default:{const e=a.pop();r+=`one of ${a.join(", ")}, or ${e}`}}if(null==n)r+=`. Received ${n}`;else if("function"==typeof n&&n.name)r+=`. Received function ${n.name}`;else if("object"==typeof n){var u;if(null!==(u=n.constructor)&&void 0!==u&&u.name)r+=`. Received an instance of ${n.constructor.name}`;else{r+=`. Received ${i(n,{depth:-1})}`}}else{let e=i(n,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),r+=`. Received type ${typeof n} (${e})`}return r},TypeError),p("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=i(t);r.length>128&&(r=r.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;return`Expected ${e} to be returned from the "${t}" function but got ${null!=n&&null!==(r=n.constructor)&&void 0!==r&&r.name?`instance of ${n.constructor.name}`:"type "+typeof n}.`},TypeError),p("ERR_MISSING_ARGS",(...e)=>{let t;d(e.length>0,"At least one arg needs to be specified");const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}}return`${t} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(e,t,n)=>{let r;if(d(t,'Missing "range" argument'),Number.isInteger(n)&&Math.abs(n)>2**32)r=h(String(n));else if("bigint"==typeof n){r=String(n);const e=BigInt(2)**BigInt(32);(n>e||n<-e)&&(r=h(r)),r+="n"}else r=i(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:m,aggregateTwoErrors:f(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new s([t,e],t.message);return n.code=t.code,n}return e||t}),hideStackFrames:f,codes:u}},4134:e=>{"use strict";class t extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let n=0;n<e.length;n++)t+=`    ${e[n].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:t,ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,n)=>e.slice(t,n),Error,FunctionPrototypeCall:(e,t,...n)=>e.call(t,...n),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,n)=>Object.defineProperty(e,t,n),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,n)=>e.then(t,n),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,n)=>e.slice(t,n),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,n)=>e.set(t,n),Boolean,Uint8Array}},7760:(e,t,n)=>{"use strict";const r=n(8287),{format:i,inspect:o}=n(9231),{codes:{ERR_INVALID_ARG_TYPE:s}}=n(6371),{kResistStopPropagation:a,AggregateError:l,SymbolDispose:c}=n(4134),u=globalThis.AbortSignal||n(5568).AbortSignal,d=globalThis.AbortController||n(5568).AbortController,h=Object.getPrototypeOf(async function(){}).constructor,p=globalThis.Blob||r.Blob,f=void 0!==p?function(e){return e instanceof p}:function(e){return!1},m=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new s(t,"AbortSignal",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...n){t||(t=!0,e.apply(this,n))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}},promisify:e=>new Promise((t,n)=>{e((e,...r)=>e?n(e):t(...r))}),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof h,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:f,deprecate:(e,t)=>e,addAbortListener:n(7007).addAbortListener||function(e,t){if(void 0===e)throw new s("signal","AbortSignal",e);let n;return m(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new s(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),n=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[c](){var e;null===(e=n)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new d,n=()=>t.abort();return e.forEach(e=>{m(e,"signals"),e.addEventListener("abort",n,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",n))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},9231:e=>{"use strict";e.exports={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,n]){const r=t.shift();if("f"===n)return r.toFixed(6);if("j"===n)return JSON.stringify(r);if("s"===n&&"object"==typeof r){return`${r.constructor!==Object?r.constructor.name:""} {}`.trim()}return r.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}},5506:(e,t,n)=>{"use strict";const{Buffer:r}=n(8287),{ObjectDefineProperty:i,ObjectKeys:o,ReflectApply:s}=n(4134),{promisify:{custom:a}}=n(7760),{streamReturningOperators:l,promiseReturningOperators:c}=n(823),{codes:{ERR_ILLEGAL_CONSTRUCTOR:u}}=n(6371),d=n(7830),{setDefaultHighWaterMark:h,getDefaultHighWaterMark:p}=n(5291),{pipeline:f}=n(7758),{destroyer:m}=n(5896),g=n(6238),v=n(3095),y=n(6115),b=e.exports=n(4259).Stream;b.isDestroyed=y.isDestroyed,b.isDisturbed=y.isDisturbed,b.isErrored=y.isErrored,b.isReadable=y.isReadable,b.isWritable=y.isWritable,b.Readable=n(7576);for(const _ of o(l)){const x=l[_];function S(...e){if(new.target)throw u();return b.Readable.from(s(x,this,e))}i(S,"name",{__proto__:null,value:x.name}),i(S,"length",{__proto__:null,value:x.length}),i(b.Readable.prototype,_,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const C of o(c)){const k=c[C];function E(...e){if(new.target)throw u();return s(k,this,e)}i(E,"name",{__proto__:null,value:k.name}),i(E,"length",{__proto__:null,value:k.length}),i(b.Readable.prototype,C,{__proto__:null,value:E,enumerable:!1,configurable:!0,writable:!0})}b.Writable=n(8584),b.Duplex=n(3370),b.Transform=n(7382),b.PassThrough=n(6524),b.pipeline=f;const{addAbortSignal:w}=n(4147);b.addAbortSignal=w,b.finished=g,b.destroy=m,b.compose=d,b.setDefaultHighWaterMark=h,b.getDefaultHighWaterMark=p,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>v}),i(f,a,{__proto__:null,enumerable:!0,get:()=>v.pipeline}),i(g,a,{__proto__:null,enumerable:!0,get:()=>v.finished}),b.Stream=b,b._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}},3095:(e,t,n)=>{"use strict";const{ArrayPrototypePop:r,Promise:i}=n(4134),{isIterable:o,isNodeStream:s,isWebStream:a}=n(6115),{pipelineImpl:l}=n(7758),{finished:c}=n(6238);n(5506),e.exports={finished:c,pipeline:function(...e){return new i((t,n)=>{let i,c;const u=e[e.length-1];if(u&&"object"==typeof u&&!s(u)&&!o(u)&&!a(u)){const t=r(e);i=t.signal,c=t.end}l(e,(e,r)=>{e?n(e):t(r)},{signal:i,end:c})})}}},742:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4806),t)},4806:(e,t)=>{"use strict";function n(e){const t=[];let n=0;for(;n<e.length;)switch(e[n]){case"/":if("."===e[n+1])if("."===e[n+2]){if(!i(e[n+3])){t.push([]),n++;break}t.pop(),e[n+3]||t.push([]),n+=3}else{if(!i(e[n+2])){t.push([]),n++;break}e[n+2]||t.push([]),n+=2}else t.push([]),n++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(e.substr(n)),n=e.length;break;default:t.length||t.push([]),t[t.length-1].push(e[n]),n++}return"/"+t.map(e=>e.join("")).join("/")}function r(e,t){let r=t+1;t>=0?"/"===e[t+1]&&"/"===e[t+2]&&(r=t+3):"/"===e[0]&&"/"===e[1]&&(r=2);const i=e.indexOf("/",r);if(i<0)return e;return e.substr(0,i)+n(e.substr(i))}function i(e){return!e||"#"===e||"?"===e||"/"===e}Object.defineProperty(t,"__esModule",{value:!0}),t.removeDotSegmentsOfPath=t.removeDotSegments=t.resolve=void 0,t.resolve=function(e,t){const i=(t=t||"").indexOf("#");if(i>0&&(t=t.substr(0,i)),!e.length){if(t.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);return t}if(e.startsWith("?")){const n=t.indexOf("?");return n>0&&(t=t.substr(0,n)),t+e}if(e.startsWith("#"))return t+e;if(!t.length){const t=e.indexOf(":");if(t<0)throw new Error(`Found invalid relative IRI '${e}' for a missing baseIRI`);return r(e,t)}const o=e.indexOf(":");if(o>=0)return r(e,o);const s=t.indexOf(":");if(s<0)throw new Error(`Found invalid baseIRI '${t}' for value '${e}'`);const a=t.substr(0,s+1);if(0===e.indexOf("//"))return a+r(e,o);let l;if(t.indexOf("//",s)===s+1){if(l=t.indexOf("/",s+3),l<0)return t.length>s+3?t+"/"+r(e,o):a+r(e,o)}else if(l=t.indexOf("/",s+1),l<0)return a+r(e,o);if(0===e.indexOf("/"))return t.substr(0,l)+n(e);let c=t.substr(l);const u=c.lastIndexOf("/");return u>=0&&u<c.length-1&&(c=c.substr(0,u+1),"."===e[0]&&"."!==e[1]&&"/"!==e[1]&&e[2]&&(e=e.substr(1))),e=n(e=c+e),t.substr(0,l)+e},t.removeDotSegments=n,t.removeDotSegmentsOfPath=r},2861:(e,t,n)=>{var r=n(8287),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},2791:function(e,t,n){!function(e){"use strict";if(!e.setImmediate){var t,n,r,i,o,s=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?t=function(e){process.nextTick(function(){h(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){h(e.data)},t=function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,t=function(e){var t=c.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):t=function(e){setTimeout(h,0,e)}:(i="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),t=function(t){e.postMessage(i+t,"*")}),u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var i={callback:e,args:n};return a[s]=i,t(s),s++},u.clearImmediate=d}function d(e){delete a[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=a[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),l=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)},3141:(e,t,n)=>{"use strict";var r=n(2861).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=s(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=s(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},6827:function(e,t){var n,r,i;r=[],void 0===(i="function"==typeof(n=function(){var e={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},t={"*":!0};function n(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function r(e){return e=e.replace(/%../g,""),encodeURIComponent(e)===e}function i(i){var o="";e[i.charAt(0)]&&(o=i.charAt(0),i=i.substring(1));var s="",a="",l=!0,c=!1,u=!1;"+"==o?l=!1:"."==o?(a=".",s="."):"/"==o?(a="/",s="/"):"#"==o?(a="#",l=!1):";"==o?(a=";",s=";",c=!0,u=!0):"?"==o?(a="?",s="&",c=!0):"&"==o&&(a="&",s="&",c=!0);for(var d=[],h=i.split(","),p=[],f={},m=0;m<h.length;m++){var g=h[m],v=null;if(-1!=g.indexOf(":")){var y=g.split(":");g=y[0],v=parseInt(y[1])}for(var b={};t[g.charAt(g.length-1)];)b[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var w={truncate:v,name:g,suffices:b};p.push(w),f[g]=w,d.push(g)}var _=function(e){for(var t="",r=0,i=0;i<p.length;i++){var o=p[i],d=e(o.name);if(null==d||Array.isArray(d)&&0==d.length||"object"==typeof d&&0==Object.keys(d).length)r++;else if(t+=i==r?a:s||",",Array.isArray(d)){c&&(t+=o.name+"=");for(var h=0;h<d.length;h++)h>0&&(t+=o.suffices["*"]&&s||",",o.suffices["*"]&&c&&(t+=o.name+"=")),t+=l?encodeURIComponent(d[h]).replace(/!/g,"%21"):n(d[h])}else if("object"==typeof d){c&&!o.suffices["*"]&&(t+=o.name+"=");var f=!0;for(var m in d)f||(t+=o.suffices["*"]&&s||","),f=!1,t+=l?encodeURIComponent(m).replace(/!/g,"%21"):n(m),t+=o.suffices["*"]?"=":",",t+=l?encodeURIComponent(d[m]).replace(/!/g,"%21"):n(d[m])}else c&&(t+=o.name,u&&""==d||(t+="=")),null!=o.truncate&&(d=d.substring(0,o.truncate)),t+=l?encodeURIComponent(d).replace(/!/g,"%21"):n(d)}return t},x=function(e,t,n){if(a&&(e=e.substring(a.length)),1==p.length&&p[0].suffices["*"]){for(var i=(S=p[0]).name,o=S.suffices["*"]?e.split(s||","):[e],u=l&&-1!=e.indexOf("="),d=1;d<o.length;d++)e=o[d],u&&-1==e.indexOf("=")&&(o[d-1]+=(s||",")+e,o.splice(d,1),d--);for(d=0;d<o.length;d++)e=o[d],l&&-1!=e.indexOf("=")&&(u=!0),1==(y=e.split(",")).length?o[d]=y[0]:o[d]=y;if(c||u){for(var h=t[i]||{},m=0;m<o.length;m++){var g=e;if(!c||g){if("string"==typeof o[m]){var v=(e=o[m]).split("=",1)[0];if(e=e.substring(v.length+1),l){if(n&&!r(e))return;e=decodeURIComponent(e)}g=e}else{if(v=(e=o[m][0]).split("=",1)[0],e=e.substring(v.length+1),l){if(n&&!r(e))return;e=decodeURIComponent(e)}o[m][0]=e,g=o[m]}if(l){if(n&&!r(v))return;v=decodeURIComponent(v)}void 0!==h[v]?Array.isArray(h[v])?h[v].push(g):h[v]=[h[v],g]:h[v]=g}}1==Object.keys(h).length&&void 0!==h[i]?t[i]=h[i]:t[i]=h}else{if(l)for(m=0;m<o.length;m++){var y=o[m];if(Array.isArray(y))for(var b=0;b<y.length;b++){if(n&&!r(y[b]))return;y[b]=decodeURIComponent(y[b])}else{if(n&&!r(y))return;o[m]=decodeURIComponent(y)}}void 0!==t[i]?Array.isArray(t[i])?t[i]=t[i].concat(o):t[i]=[t[i]].concat(o):1!=o.length||S.suffices["*"]?t[i]=o:t[i]=o[0]}}else{o=1==p.length?[e]:e.split(s||",");var w={};for(d=0;d<o.length;d++){for(var _=0;_<p.length-1&&_<d&&!p[_].suffices["*"];_++);if(_!=d){for(var x=p.length-1;x>0&&p.length-x<o.length-d&&!p[x].suffices["*"];x--);p.length-x!=o.length-d?w[d]=_:w[d]=x}else w[d]=d}for(d=0;d<o.length;d++)if((e=o[d])||!c){if(y=e.split(","),u=!1,c){i=(e=y[0]).split("=",1)[0],e=e.substring(i.length+1),y[0]=e;var S=f[i]||p[0]}else i=(S=p[w[d]]).name;for(m=0;m<y.length;m++)if(l){if(n&&!r(y[m]))return;y[m]=decodeURIComponent(y[m])}(c||S.suffices["*"])&&void 0!==t[i]?Array.isArray(t[i])?t[i]=t[i].concat(y):t[i]=[t[i]].concat(y):1!=y.length||S.suffices["*"]?t[i]=y:t[i]=y[0]}}return 1};return{varNames:d,prefix:a,substitution:_,unSubstitution:x}}function o(e){if(!(this instanceof o))return new o(e);for(var t=e.split("{"),n=[t.shift()],r=[],s=[],a=[],l=[];t.length>0;){var c=t.shift(),u=c.split("}")[0],d=c.substring(u.length+1),h=i(u);s.push(h.substitution),a.push(h.unSubstitution),r.push(h.prefix),n.push(d),l=l.concat(h.varNames)}this.fill=function(e){if(e&&"function"!=typeof e){var t=e;e=function(e){return t[e]}}for(var r=n[0],i=0;i<s.length;i++)r+=(0,s[i])(e),r+=n[i+1];return r},this.fromUri=function(e,t){t=t||{};for(var i={},o=0;o<n.length;o++){var s=n[o];if(e.substring(0,s.length)!==s)return;if(e=e.substring(s.length),o>=n.length-1){if(""==e)break;return}var l=r[o];if(!l||e.substring(0,l.length)===l){for(var c=n[o+1],u=o;;){if(u==n.length-2){var d=e.substring(e.length-c.length);if(d!==c)return;var h=e.substring(0,e.length-c.length);e=d}else if(c){var p=e.indexOf(c);h=e.substring(0,p),e=e.substring(p)}else if(r[u+1])-1===(p=e.indexOf(r[u+1]))&&(p=e.length),h=e.substring(0,p),e=e.substring(p);else{if(n.length>u+2){u++,c=n[u+1];continue}h=e,e=""}break}if(!a[o](h,i,t.strict))return}}return i},this.varNames=l,this.template=e}return o.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(e)},test:function(e,t){return!!this.fromUri(e,t)}},o})?n.apply(t,r):n)||(e.exports=i)},7024:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2300),t)},2300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateIri=t.IriValidationStrategy=void 0;const n=function(){const e="[!$&'()*+,;=]",t="%[a-fA-F0-9]{2}",n="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",r=`${n}\\.${n}\\.${n}\\.${n}`,i="[a-fA-F0-9]{1,4}",o=`(${i}:${i}|${r})`,s="[a-zA-Z0-9\\-._~\xa0-\ud7ff\uf900-\ufdcf\ufdf0-\uffef\u{10000}-\u{1fffd}\u{20000}-\u{2fffd}\u{30000}-\u{3fffd}\u{40000}-\u{4fffd}\u{50000}-\u{5fffd}\u{60000}-\u{6fffd}\u{70000}-\u{7fffd}\u{80000}-\u{8fffd}\u{90000}-\u{9fffd}\u{a0000}-\u{afffd}\u{b0000}-\u{bfffd}\u{c0000}-\u{cfffd}\u{d0000}-\u{dfffd}\u{e1000}-\u{efffd}]",a=`(${s}|${t}|${e}|[:@])*`,l=`(${a})+`,c=`(${a})*`;return new RegExp(`^[a-zA-Z][a-zA-Z0-9+\\-.]*:${`(\\/\\/${`(${`(${s}|${t}|${e}|:)*`}@)?${`(${`\\[(${`((${i}:){6}${o}|::(${i}:){5}${o}|(${i})?::(${i}:){4}${o}|((${i}:){0,1}${i})?::(${i}:){3}${o}|((${i}:){0,2}${i})?::(${i}:){2}${o}|((${i}:){0,3}${i})?::${i}:${o}|((${i}:){0,4}${i})?::${o}|((${i}:){0,5}${i})?::${i}|((${i}:){0,6}${i})?::)`}|${`v[a-fA-F0-9]+\\.(${e}|${e}|":)+`})\\]`}|${r}|${`(${s}|${t}|${e})*`})`}(:[0-9]*)?`}${`(\\/${c})*`}|${`\\/(${l}(\\/${c})*)?`}|${`${l}(\\/${c})*`}|)`}(\\?${`(${a}|[\ue000-\uf8ff\u{f0000}-\u{ffffd}\u{100000}-\u{10fffd}]|[\\/?])*`})?(#${`(${a}|[\\/?])*`})?$`,"u")}(),r=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var i;!function(e){e.Strict="strict",e.Pragmatic="pragmatic",e.None="none"}(i=t.IriValidationStrategy||(t.IriValidationStrategy={})),t.validateIri=function(e,t=i.Strict){switch(t){case i.Strict:return n.test(e)?void 0:new Error(`Invalid IRI according to RFC 3987: '${e}'`);case i.Pragmatic:return r.test(e)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${e}'`);case i.None:return;default:return new Error(`Not supported validation strategy "${t}"`)}}},1487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="\t\n\r -\ud7ff\ue000-\ufffd\u{10000}-\u{10ffff}",t.S=" \t\r\n",t.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u{10000}-\u{effff}",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");function n(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}t.S_LIST=[32,10,13,9],t.isChar=function(e){return e>=32&&e<=55295||10===e||13===e||9===e||e>=57344&&e<=65533||e>=65536&&e<=1114111},t.isS=function(e){return 32===e||10===e||13===e||9===e},t.isNameStartChar=n,t.isNameChar=function(e){return n(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},4797:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHAR="\x01-\ud7ff\ue000-\ufffd\u{10000}-\u{10ffff}",t.RESTRICTED_CHAR="\x01-\b\v\f\x0e-\x1f\x7f-\x84\x86-\x9f",t.S=" \t\r\n",t.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u{10000}-\u{effff}",t.NAME_CHAR="-"+t.NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",t.CHAR_RE=new RegExp("^["+t.CHAR+"]$","u"),t.RESTRICTED_CHAR_RE=new RegExp("^["+t.RESTRICTED_CHAR+"]$","u"),t.S_RE=new RegExp("^["+t.S+"]+$","u"),t.NAME_START_CHAR_RE=new RegExp("^["+t.NAME_START_CHAR+"]$","u"),t.NAME_CHAR_RE=new RegExp("^["+t.NAME_CHAR+"]$","u"),t.NAME_RE=new RegExp("^["+t.NAME_START_CHAR+"]["+t.NAME_CHAR+"]*$","u"),t.NMTOKEN_RE=new RegExp("^["+t.NAME_CHAR+"]+$","u");function n(e){return e>=65&&e<=90||e>=97&&e<=122||58===e||95===e||8204===e||8205===e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}t.S_LIST=[32,10,13,9],t.isChar=function(e){return e>=1&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111},t.isRestrictedChar=function(e){return e>=1&&e<=8||11===e||12===e||e>=14&&e<=31||e>=127&&e<=132||e>=134&&e<=159},t.isCharAndNotRestricted=function(e){return 9===e||10===e||13===e||e>31&&e<127||133===e||e>159&&e<=55295||e>=57344&&e<=65533||e>=65536&&e<=1114111},t.isS=function(e){return 32===e||10===e||13===e||9===e},t.isNameStartChar=n,t.isNameChar=function(e){return n(e)||e>=48&&e<=57||45===e||46===e||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},446:(e,t)=>{"use strict";function n(e){return e>=65&&e<=90||95===e||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}Object.defineProperty(t,"__esModule",{value:!0}),t.NC_NAME_START_CHAR="A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u{10000}-\u{effff}",t.NC_NAME_CHAR="-"+t.NC_NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",t.NC_NAME_START_CHAR_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]$","u"),t.NC_NAME_CHAR_RE=new RegExp("^["+t.NC_NAME_CHAR+"]$","u"),t.NC_NAME_RE=new RegExp("^["+t.NC_NAME_START_CHAR+"]["+t.NC_NAME_CHAR+"]*$","u"),t.isNCNameStartChar=n,t.isNCNameChar=function(e){return n(e)||45===e||46===e||e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}},7789:()=>{},6575:function(e,t,n){"use strict";const r=(this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(n(7248));e.exports=Object.assign(r.default,{default:r.default,LRUCache:r.default})},7248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;const n="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=new Set,i=(Symbol("type"),e=>e&&e===Math.floor(e)&&e>0&&isFinite(e)),o=e=>i(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(e){super(e),this.fill(0)}}class a{heap;length;static#e=!1;static create(e){const t=o(e);if(!t)return[];a.#e=!0;const n=new a(e,t);return a.#e=!1,n}constructor(e,t){if(!a.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class l{#t;#n;#r;#i;#o;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#s;#a;#l;#c;#u;#d;#h;#p;#f;#m;#g;#v;#y;#b;#w;#_;#x;static unsafeExposeInternals(e){return{starts:e.#y,ttls:e.#b,sizes:e.#v,keyMap:e.#l,keyList:e.#c,valList:e.#u,next:e.#d,prev:e.#h,get head(){return e.#p},get tail(){return e.#f},free:e.#m,isBackgroundFetch:t=>e.#S(t),backgroundFetch:(t,n,r,i)=>e.#C(t,n,r,i),moveToTail:t=>e.#k(t),indexes:t=>e.#E(t),rindexes:t=>e.#A(t),isStale:t=>e.#T(t)}}get max(){return this.#t}get maxSize(){return this.#n}get calculatedSize(){return this.#a}get size(){return this.#s}get fetchMethod(){return this.#o}get dispose(){return this.#r}get disposeAfter(){return this.#i}constructor(e){const{max:t=0,ttl:n,ttlResolution:s=1,ttlAutopurge:c,updateAgeOnGet:u,updateAgeOnHas:d,allowStale:h,dispose:p,disposeAfter:f,noDisposeOnSet:m,noUpdateTTL:g,maxSize:v=0,maxEntrySize:y=0,sizeCalculation:b,fetchMethod:w,noDeleteOnFetchRejection:_,noDeleteOnStaleGet:x,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:C,ignoreFetchAbort:k}=e;if(0!==t&&!i(t))throw new TypeError("max option must be a nonnegative integer");const E=t?o(t):Array;if(!E)throw new Error("invalid max value: "+t);if(this.#t=t,this.#n=v,this.maxEntrySize=y||this.#n,this.sizeCalculation=b,this.sizeCalculation){if(!this.#n&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==w&&"function"!=typeof w)throw new TypeError("fetchMethod must be a function if specified");if(this.#o=w,this.#_=!!w,this.#l=new Map,this.#c=new Array(t).fill(void 0),this.#u=new Array(t).fill(void 0),this.#d=new E(t),this.#h=new E(t),this.#p=0,this.#f=0,this.#m=a.create(t),this.#s=0,this.#a=0,"function"==typeof p&&(this.#r=p),"function"==typeof f?(this.#i=f,this.#g=[]):(this.#i=void 0,this.#g=void 0),this.#w=!!this.#r,this.#x=!!this.#i,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!_,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!C,this.ignoreFetchAbort=!!k,0!==this.maxEntrySize){if(0!==this.#n&&!i(this.#n))throw new TypeError("maxSize must be a positive integer if specified");if(!i(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#I()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!x,this.updateAgeOnGet=!!u,this.updateAgeOnHas=!!d,this.ttlResolution=i(s)||0===s?s:1,this.ttlAutopurge=!!c,this.ttl=n||0,this.ttl){if(!i(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#R()}if(0===this.#t&&0===this.ttl&&0===this.#n)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#n){const e="LRU_CACHE_UNBOUNDED";if((e=>!r.has(e))(e)){r.add(e);((e,t,n,r)=>{"object"==typeof process&&process&&"function"==typeof process.emitWarning?process.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)})("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,l)}}}getRemainingTTL(e){return this.#l.has(e)?1/0:0}#R(){const e=new s(this.#t),t=new s(this.#t);this.#b=e,this.#y=t,this.#L=(r,i,o=n.now())=>{if(t[r]=0!==i?o:0,e[r]=i,0!==i&&this.ttlAutopurge){const e=setTimeout(()=>{this.#T(r)&&this.delete(this.#c[r])},i+1);e.unref&&e.unref()}},this.#N=r=>{t[r]=0!==e[r]?n.now():0},this.#O=(n,o)=>{if(e[o]){const s=e[o],a=t[o];n.ttl=s,n.start=a,n.now=r||i(),n.remainingTTL=n.now+s-a}};let r=0;const i=()=>{const e=n.now();if(this.ttlResolution>0){r=e;const t=setTimeout(()=>r=0,this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=n=>{const o=this.#l.get(n);return void 0===o?0:0===e[o]||0===t[o]?1/0:t[o]+e[o]-(r||i())},this.#T=n=>0!==e[n]&&0!==t[n]&&(r||i())-t[n]>e[n]}#N=()=>{};#O=()=>{};#L=()=>{};#T=()=>!1;#I(){const e=new s(this.#t);this.#a=0,this.#v=e,this.#D=t=>{this.#a-=e[t],e[t]=0},this.#M=(e,t,n,r)=>{if(this.#S(t))return 0;if(!i(n)){if(!r)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof r)throw new TypeError("sizeCalculation must be a function");if(n=r(t,e),!i(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return n},this.#P=(t,n,r)=>{if(e[t]=n,this.#n){const n=this.#n-e[t];for(;this.#a>n;)this.#j(!0)}this.#a+=e[t],r&&(r.entrySize=n,r.totalCalculatedSize=this.#a)}}#D=e=>{};#P=(e,t,n)=>{};#M=(e,t,n,r)=>{if(n||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#f;this.#U(t)&&(!e&&this.#T(t)||(yield t),t!==this.#p);)t=this.#h[t]}*#A({allowStale:e=this.allowStale}={}){if(this.#s)for(let t=this.#p;this.#U(t)&&(!e&&this.#T(t)||(yield t),t!==this.#f);)t=this.#d[t]}#U(e){return void 0!==e&&this.#l.get(this.#c[e])===e}*entries(){for(const e of this.#E())void 0===this.#u[e]||void 0===this.#c[e]||this.#S(this.#u[e])||(yield[this.#c[e],this.#u[e]])}*rentries(){for(const e of this.#A())void 0===this.#u[e]||void 0===this.#c[e]||this.#S(this.#u[e])||(yield[this.#c[e],this.#u[e]])}*keys(){for(const e of this.#E()){const t=this.#c[e];void 0===t||this.#S(this.#u[e])||(yield t)}}*rkeys(){for(const e of this.#A()){const t=this.#c[e];void 0===t||this.#S(this.#u[e])||(yield t)}}*values(){for(const e of this.#E()){void 0===this.#u[e]||this.#S(this.#u[e])||(yield this.#u[e])}}*rvalues(){for(const e of this.#A()){void 0===this.#u[e]||this.#S(this.#u[e])||(yield this.#u[e])}}[Symbol.iterator](){return this.entries()}find(e,t={}){for(const n of this.#E()){const r=this.#u[n],i=this.#S(r)?r.__staleWhileFetching:r;if(void 0!==i&&e(i,this.#c[n],this))return this.get(this.#c[n],t)}}forEach(e,t=this){for(const n of this.#E()){const r=this.#u[n],i=this.#S(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#c[n],this)}}rforEach(e,t=this){for(const n of this.#A()){const r=this.#u[n],i=this.#S(r)?r.__staleWhileFetching:r;void 0!==i&&e.call(t,i,this.#c[n],this)}}purgeStale(){let e=!1;for(const t of this.#A({allowStale:!0}))this.#T(t)&&(this.delete(this.#c[t]),e=!0);return e}dump(){const e=[];for(const t of this.#E({allowStale:!0})){const r=this.#c[t],i=this.#u[t],o=this.#S(i)?i.__staleWhileFetching:i;if(void 0===o||void 0===r)continue;const s={value:o};if(this.#b&&this.#y){s.ttl=this.#b[t];const e=n.now()-this.#y[t];s.start=Math.floor(Date.now()-e)}this.#v&&(s.size=this.#v[t]),e.unshift([r,s])}return e}load(e){this.clear();for(const[t,r]of e){if(r.start){const e=Date.now()-r.start;r.start=n.now()-e}this.set(t,r.value,r)}}set(e,t,n={}){const{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=n;let{noUpdateTTL:l=this.noUpdateTTL}=n;const c=this.#M(e,t,n.size||0,s);if(this.maxEntrySize&&c>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(e),this;let u=0===this.#s?void 0:this.#l.get(e);if(void 0===u)u=0===this.#s?this.#f:0!==this.#m.length?this.#m.pop():this.#s===this.#t?this.#j(!1):this.#s,this.#c[u]=e,this.#u[u]=t,this.#l.set(e,u),this.#d[this.#f]=u,this.#h[u]=this.#f,this.#f=u,this.#s++,this.#P(u,c,a),a&&(a.set="add"),l=!1;else{this.#k(u);const n=this.#u[u];if(t!==n){if(this.#_&&this.#S(n)?n.__abortController.abort(new Error("replaced")):o||(this.#w&&this.#r?.(n,e,"set"),this.#x&&this.#g?.push([n,e,"set"])),this.#D(u),this.#P(u,c,a),this.#u[u]=t,a){a.set="replace";const e=n&&this.#S(n)?n.__staleWhileFetching:n;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0===r||this.#b||this.#R(),this.#b&&(l||this.#L(u,r,i),a&&this.#O(a,u)),!o&&this.#x&&this.#g){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}return this}pop(){try{for(;this.#s;){const e=this.#u[this.#p];if(this.#j(!0),this.#S(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#x&&this.#g){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}}}#j(e){const t=this.#p,n=this.#c[t],r=this.#u[t];return this.#_&&this.#S(r)?r.__abortController.abort(new Error("evicted")):(this.#w||this.#x)&&(this.#w&&this.#r?.(r,n,"evict"),this.#x&&this.#g?.push([r,n,"evict"])),this.#D(t),e&&(this.#c[t]=void 0,this.#u[t]=void 0,this.#m.push(t)),1===this.#s?(this.#p=this.#f=0,this.#m.length=0):this.#p=this.#d[t],this.#l.delete(n),this.#s--,t}has(e,t={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:r}=t,i=this.#l.get(e);if(void 0!==i){const e=this.#u[i];if(this.#S(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#T(i))return n&&this.#N(i),r&&(r.has="hit",this.#O(r,i)),!0;r&&(r.has="stale",this.#O(r,i))}else r&&(r.has="miss");return!1}peek(e,t={}){const{allowStale:n=this.allowStale}=t,r=this.#l.get(e);if(void 0!==r&&(n||!this.#T(r))){const e=this.#u[r];return this.#S(e)?e.__staleWhileFetching:e}}#C(e,t,n,r){const i=void 0===t?void 0:this.#u[t];if(this.#S(i))return i;const o=new AbortController,{signal:s}=n;s?.addEventListener("abort",()=>o.abort(s.reason),{signal:o.signal});const a={signal:o.signal,options:n,context:r},l=(r,i=!1)=>{const{aborted:s}=o.signal,l=n.ignoreFetchAbort&&void 0!==r;if(n.status&&(s&&!i?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,l&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),s&&!l&&!i)return c(o.signal.reason);const d=u;return this.#u[t]===u&&(void 0===r?d.__staleWhileFetching?this.#u[t]=d.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,r,a.options))),r},c=r=>{const{aborted:i}=o.signal,s=i&&n.allowStaleOnFetchAbort,a=s||n.allowStaleOnFetchRejection,l=a||n.noDeleteOnFetchRejection,c=u;if(this.#u[t]===u){!l||void 0===c.__staleWhileFetching?this.delete(e):s||(this.#u[t]=c.__staleWhileFetching)}if(a)return n.status&&void 0!==c.__staleWhileFetching&&(n.status.returnedStale=!0),c.__staleWhileFetching;if(c.__returned===c)throw r};n.status&&(n.status.fetchDispatched=!0);const u=new Promise((t,r)=>{const s=this.#o?.(e,i,a);s&&s instanceof Promise&&s.then(e=>t(e),r),o.signal.addEventListener("abort",()=>{n.ignoreFetchAbort&&!n.allowStaleOnFetchAbort||(t(),n.allowStaleOnFetchAbort&&(t=e=>l(e,!0)))})}).then(l,e=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=e),c(e))),d=Object.assign(u,{__abortController:o,__staleWhileFetching:i,__returned:void 0});return void 0===t?(this.set(e,d,{...a.options,status:void 0}),t=this.#l.get(e)):this.#u[t]=d,d}#S(e){if(!this.#_)return!1;const t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof AbortController}async fetch(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL,noDeleteOnFetchRejection:u=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:d=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:f,forceRefresh:m=!1,status:g,signal:v}=t;if(!this.#_)return g&&(g.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,status:g});const y={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:l,noUpdateTTL:c,noDeleteOnFetchRejection:u,allowStaleOnFetchRejection:d,allowStaleOnFetchAbort:p,ignoreFetchAbort:h,status:g,signal:v};let b=this.#l.get(e);if(void 0===b){g&&(g.fetch="miss");const t=this.#C(e,b,y,f);return t.__returned=t}{const t=this.#u[b];if(this.#S(t)){const e=n&&void 0!==t.__staleWhileFetching;return g&&(g.fetch="inflight",e&&(g.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}const i=this.#T(b);if(!m&&!i)return g&&(g.fetch="hit"),this.#k(b),r&&this.#N(b),g&&this.#O(g,b),t;const o=this.#C(e,b,y,f),s=void 0!==o.__staleWhileFetching&&n;return g&&(g.fetch=i?"stale":"refresh",s&&i&&(g.returnedStale=!0)),s?o.__staleWhileFetching:o.__returned=o}}get(e,t={}){const{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:o}=t,s=this.#l.get(e);if(void 0!==s){const t=this.#u[s],a=this.#S(t);return o&&this.#O(o,s),this.#T(s)?(o&&(o.get="stale"),a?(o&&n&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),n?t.__staleWhileFetching:void 0):(i||this.delete(e),o&&n&&(o.returnedStale=!0),n?t:void 0)):(o&&(o.get="hit"),a?t.__staleWhileFetching:(this.#k(s),r&&this.#N(s),t))}o&&(o.get="miss")}#B(e,t){this.#h[t]=e,this.#d[e]=t}#k(e){e!==this.#f&&(e===this.#p?this.#p=this.#d[e]:this.#B(this.#h[e],this.#d[e]),this.#B(this.#f,e),this.#f=e)}delete(e){let t=!1;if(0!==this.#s){const n=this.#l.get(e);if(void 0!==n)if(t=!0,1===this.#s)this.clear();else{this.#D(n);const t=this.#u[n];this.#S(t)?t.__abortController.abort(new Error("deleted")):(this.#w||this.#x)&&(this.#w&&this.#r?.(t,e,"delete"),this.#x&&this.#g?.push([t,e,"delete"])),this.#l.delete(e),this.#c[n]=void 0,this.#u[n]=void 0,n===this.#f?this.#f=this.#h[n]:n===this.#p?this.#p=this.#d[n]:(this.#d[this.#h[n]]=this.#d[n],this.#h[this.#d[n]]=this.#h[n]),this.#s--,this.#m.push(n)}}if(this.#x&&this.#g?.length){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}return t}clear(){for(const e of this.#A({allowStale:!0})){const t=this.#u[e];if(this.#S(t))t.__abortController.abort(new Error("deleted"));else{const n=this.#c[e];this.#w&&this.#r?.(t,n,"delete"),this.#x&&this.#g?.push([t,n,"delete"])}}if(this.#l.clear(),this.#u.fill(void 0),this.#c.fill(void 0),this.#b&&this.#y&&(this.#b.fill(0),this.#y.fill(0)),this.#v&&this.#v.fill(0),this.#p=0,this.#f=0,this.#m.length=0,this.#a=0,this.#s=0,this.#x&&this.#g){const e=this.#g;let t;for(;t=e?.shift();)this.#i?.(...t)}}}t.LRUCache=l,t.default=l},5180:e=>{"use strict";e.exports=JSON.parse('{"@context":{"alternate":"http://www.w3.org/1999/xhtml/vocab#alternate","appendix":"http://www.w3.org/1999/xhtml/vocab#appendix","cite":"http://www.w3.org/1999/xhtml/vocab#cite","bookmark":"http://www.w3.org/1999/xhtml/vocab#bookmark","contents":"http://www.w3.org/1999/xhtml/vocab#contents","chapter":"http://www.w3.org/1999/xhtml/vocab#chapter","copyright":"http://www.w3.org/1999/xhtml/vocab#copyright","first":"http://www.w3.org/1999/xhtml/vocab#first","glossary":"http://www.w3.org/1999/xhtml/vocab#glossary","help":"http://www.w3.org/1999/xhtml/vocab#help","icon":"http://www.w3.org/1999/xhtml/vocab#icon","index":"http://www.w3.org/1999/xhtml/vocab#index","last":"http://www.w3.org/1999/xhtml/vocab#last","license":"http://www.w3.org/1999/xhtml/vocab#license","meta":"http://www.w3.org/1999/xhtml/vocab#meta","next":"http://www.w3.org/1999/xhtml/vocab#next","prev":"http://www.w3.org/1999/xhtml/vocab#prev","previous":"http://www.w3.org/1999/xhtml/vocab#previous","section":"http://www.w3.org/1999/xhtml/vocab#section","start":"http://www.w3.org/1999/xhtml/vocab#start","stylesheet":"http://www.w3.org/1999/xhtml/vocab#stylesheet","subsection":"http://www.w3.org/1999/xhtml/vocab#subsection","top":"http://www.w3.org/1999/xhtml/vocab#top","up":"http://www.w3.org/1999/xhtml/vocab#up","p3pv1":"http://www.w3.org/1999/xhtml/vocab#p3pv1"}}')},532:e=>{"use strict";e.exports=JSON.parse('{"@context":{"as":"https://www.w3.org/ns/activitystreams#","cat":"http://www.w3.org/ns/dcat#","cc":"http://creativecommons.org/ns#","cnt":"http://www.w3.org/2008/content#","csvw":"http://www.w3.org/ns/csvw#","ctag":"http://commontag.org/ns#","dc":"http://purl.org/dc/terms/","dc11":"http://purl.org/dc/elements/1.1/","dcat":"http://www.w3.org/ns/dcat#","dcterms":"http://purl.org/dc/terms/","dqv":"http://www.w3.org/ns/dqv#","duv":"https://www.w3.org/TR/vocab-duv#","earl":"http://www.w3.org/ns/earl#","foaf":"http://xmlns.com/foaf/0.1/","gldp":"http://www.w3.org/ns/people#","gr":"http://purl.org/goodrelations/v1#","grddl":"http://www.w3.org/2003/g/data-view#","ht":"http://www.w3.org/2006/http#","ical":"http://www.w3.org/2002/12/cal/icaltzd#","ldp":"http://www.w3.org/ns/ldp#","ma":"http://www.w3.org/ns/ma-ont#","oa":"http://www.w3.org/ns/oa#","odrl":"http://www.w3.org/ns/odrl/2/","og":"http://ogp.me/ns#","org":"http://www.w3.org/ns/org#","owl":"http://www.w3.org/2002/07/owl#","prov":"http://www.w3.org/ns/prov#","ptr":"http://www.w3.org/2009/pointers#","qb":"http://purl.org/linked-data/cube#","rev":"http://purl.org/stuff/rev#","rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","rdfa":"http://www.w3.org/ns/rdfa#","rdfs":"http://www.w3.org/2000/01/rdf-schema#","rif":"http://www.w3.org/2007/rif#","rr":"http://www.w3.org/ns/r2rml#","schema":"http://schema.org/","sd":"http://www.w3.org/ns/sparql-service-description#","sioc":"http://rdfs.org/sioc/ns#","skos":"http://www.w3.org/2004/02/skos/core#","skosxl":"http://www.w3.org/2008/05/skos-xl#","ssn":"http://www.w3.org/ns/ssn/","sosa":"http://www.w3.org/ns/sosa/","time":"http://www.w3.org/2006/time#","v":"http://rdf.data-vocabulary.org/#","vcard":"http://www.w3.org/2006/vcard/ns#","void":"http://rdfs.org/ns/void#","wdr":"http://www.w3.org/2007/05/powder#","wdrs":"http://www.w3.org/2007/05/powder-s#","xhv":"http://www.w3.org/1999/xhtml/vocab#","xml":"http://www.w3.org/XML/1998/namespace","xsd":"http://www.w3.org/2001/XMLSchema#","describedby":"http://www.w3.org/2007/05/powder-s#describedby","license":"http://www.w3.org/1999/xhtml/vocab#license","role":"http://www.w3.org/1999/xhtml/vocab#role"}}')}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var o=r[e]={exports:{}};return n[e].call(o.exports,o,o.exports,i),o.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);i.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>n[e]);return s.default=()=>n,i.d(o,s),o},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";i.d(o,{A:()=>ES});var e={};i.r(e),i.d(e,{attentionMarkers:()=>il,contentInitial:()=>Xa,disable:()=>ol,document:()=>Qa,flow:()=>el,flowInitial:()=>Ya,insideSpan:()=>rl,string:()=>tl,text:()=>nl});var t={};i.r(t),i.d(t,{create:()=>$p,creator:()=>Dh,local:()=>Vp,matcher:()=>Fh,namespace:()=>Lh,namespaces:()=>Rh,pointer:()=>Jp,pointers:()=>Kp,select:()=>qp,selectAll:()=>Zp,selection:()=>zp,selector:()=>Ph,selectorAll:()=>Bh,style:()=>cp,window:()=>op});var n={};i.r(n),i.d(n,{forceCenter:()=>Qp,forceCollide:()=>df,forceLink:()=>ff,forceManyBody:()=>Wf,forceRadial:()=>Gf,forceSimulation:()=>Vf,forceX:()=>Jf,forceY:()=>Kf});class r{constructor(e,{bind:t=!1}={}){this._factories=e.slice();for(const e of this._factories){"function"==typeof e.prototype.init&&e.prototype.init.call(this);for(const n of e.exports||[])this[n]=t?e.prototype[n].bind(this):e.prototype[n]}}clone(){const e=new r(this._factories);for(const t of e._factories)"function"==typeof t.prototype.clone&&t.prototype.clone.call(e,this);return e}}const s=r;var a=i(9198),l=i(3141);const c=async function(e,t){const n=new l.StringDecoder(t);let r="";for await(const t of e)r+=n.write(t);return r+=n.end(),r};const u=async function(e,t,n){const r="PUT"===t.method?"write":"read",i="read"===r?"from":"to";if(!n.ok)throw new Error(`can't ${r} data ${i} <${e.toString()}>[${n.status}]: ${await n.text()}`)},d=new Map([["json","application/ld+json"],["n3","text/n3"],["nq","application/n-quads"],["nt","application/n-triples"],["rdf","application/rdf+xml"],["trig","application/trig"],["ttl","text/turtle"]]);const h=function(e,t){const n=new Headers,r=e.toString().match(/\.([a-z]+)$/),i=d.get(r&&r[1]);return i&&n.set("content-type",i),{method:"PUT",headers:n,body:t}};const p=new Set(["_write","_writableState","writable"]);const f=function(e){return new Proxy(e,{has(e,t){return!p.has(t)&&Reflect.has(...arguments)},get(e,t){if(p.has(t))return;const n=Reflect.get(...arguments);return n&&"function"==typeof n.bind?n.bind(e):n},set(e,t,n){if(!p.has(t))return Reflect.set(...arguments)}})};const m=class{init(){this.io={dataset:{fromText:(e,t,n)=>async function(e,t,{factory:n,...r}){const i=n.formats.parsers.get(e);if(!i)throw new Error(`unknown media type: ${e}`);const o=n.dataset(),s=i.import(a.Readable.from([t]),r);for await(const e of s)o.add(e);return o}(e,t,{...n,factory:this}),fromURL:(e,t)=>async function(e,{factory:t,mediaType:n,...r}){const i=await t.fetch(e,{...r,method:"GET"});return await u(e,{},i),n&&i.headers.set("content-type",n),i.dataset()}(e,{...t,factory:this}),toText:(e,t,n)=>async function(e,t,{factory:n,prefixes:r,...i}){const o=n.formats.serializers.get(e);if(!o)throw new Error(`unknown media type: ${e}`);const s=o.import(a.Readable.from(t),{...i,prefixes:r});return c(s,"utf-8")}(e,t,{...n,factory:this}),toURL:(e,t,n)=>async function(e,t,{factory:n,prefixes:r,...i}){const o=h(e,a.Readable.from(t)),s=await n.fetch(e,{...i,...o,prefixes:r});await u(e,o,s)}(e,t,{...n,factory:this})},stream:{fromText:(e,t,n)=>function(e,t,{factory:n,...r}){const i=n.formats.parsers.get(e);return i?i.import(a.Readable.from([t]),r):new a.Readable({read(){this.destroy(new Error(`unknown media type: ${e}`))}})}(e,t,{...n,factory:this}),fromURL:(e,t)=>function(e,{factory:t,mediaType:n,...r}){const i=new a.PassThrough({objectMode:!0});return setTimeout(async()=>{try{const o=await t.fetch(e,{...r,method:"GET"});await u(e,{},o),n&&o.headers.set("content-type",n),(await o.quadStream()).on("error",e=>i.destroy(e)).pipe(i)}catch(e){i.destroy(e)}},0),f(i)}(e,{...t,factory:this}),toText:(e,t,n)=>async function(e,t,{factory:n,prefixes:r,...i}){const o=n.formats.serializers.get(e);if(!o)throw new Error(`unknown media type: ${e}`);const s=o.import(t,{...i,prefixes:r});return c(s,"utf-8")}(e,t,{...n,factory:this}),toURL:(e,t,n)=>async function(e,t,{factory:n,prefixes:r,...i}){const o=h(e,t),s=await n.fetch(e,{...i,...o,prefixes:r});await u(e,o,s)}(e,{...n,factory:this})}}}};class g{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}g.prototype.termType="BlankNode";const v=g;class y{equals(e){return!!e&&e.termType===this.termType}}y.prototype.termType="DefaultGraph",y.prototype.value="";const b=y;const w=function(e,t){if(!t)return null;if("BlankNode"===t.termType)return e.blankNode(t.value);if("DefaultGraph"===t.termType)return e.defaultGraph();if("Literal"===t.termType)return e.literal(t.value,t.language||e.namedNode(t.datatype.value));if("NamedNode"===t.termType)return e.namedNode(t.value);if("Quad"===t.termType){const n=e.fromTerm(t.subject),r=e.fromTerm(t.predicate),i=e.fromTerm(t.object),o=e.fromTerm(t.graph);return e.quad(n,r,i,o)}if("Variable"===t.termType)return e.variable(t.value);throw new Error(`unknown termType ${t.termType}`)};class _{constructor(e,t,n,r=""){this.value=e,this.language=t,this.datatype=n,this.direction=r}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)&&(e.direction||"")===this.direction}}_.prototype.termType="Literal";const x=_;class S{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}S.prototype.termType="NamedNode";const C=S;class k{constructor(e,t,n,r){this.subject=e,this.predicate=t,this.object=n,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}}k.prototype.termType="Quad",k.prototype.value="";const E=k;class A{constructor(e){this.value=e}equals(e){return!!e&&e.termType===this.termType&&e.value===this.value}}A.prototype.termType="Variable";const T=A,I=new C("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),R=new C("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),L=new C("http://www.w3.org/2001/XMLSchema#string");class N{constructor(){this.init()}init(){this._data={blankNodeCounter:0,defaultGraph:new b}}namedNode(e){return new C(e)}blankNode(e){return e=e||"b"+ ++this._data.blankNodeCounter,new v(e)}literal(e,t){return"string"==typeof t?new x(e,t,R):"string"==typeof t?.language?new x(e,t.language,t.direction?I:R,t.direction):new x(e,"",t||L)}variable(e){return new T(e)}defaultGraph(){return this._data.defaultGraph}quad(e,t,n,r=this.defaultGraph()){return new E(e,t,n,r)}fromTerm(e){return w(this,e)}fromQuad(e){return w(this,e)}}N.exports=["blankNode","defaultGraph","fromQuad","fromTerm","literal","namedNode","quad","variable"];const O=new N,D={apply:(e,t,n)=>e(n[0]),get:(e,t)=>e(t)};const M=function(e,{factory:t=O}={}){const n=(n="")=>t.namedNode(`${e}${n.raw||n}`);return"undefined"==typeof Proxy?n:new Proxy(n,D)};class P{namespace(e){return M(e,{factory:this})}}P.exports=["namespace"];const j=P;class U extends Map{constructor(e=[],{factory:t}){super(e),this.factory=t}resolve(e){if(e.value.includes("://"))return null;const[t,n]=e.value.split(":",2);return void 0===n?null:this.has(t)?this.factory.namedNode(`${this.get(t).value}${n}`):null}shrink(e){if(!e)return null;const[t]=[...this].filter(([,t])=>e.value.startsWith(t.value)).sort((e,t)=>t[1].value.length-e[1].value.length);return void 0===t?null:this.factory.namedNode(`${t[0]}:${e.value.slice(t[1].value.length)}`)}import(e){return e.on("prefix",(e,t)=>{this.set(e,t)}),new Promise((t,n)=>{(0,a.finished)(e,e=>{e?n(e):t(this)})})}export(e){for(const[t,n]of this)e.emit("prefix",t,n);return this}}const B=U;class F{init(){this.prefixes=new B([],{factory:this})}clone(e){if(e.prefixes)for(const[t,n]of e.prefixes)this.prefixes.set(t,n)}prefixMap(e){return new B(e,{factory:this})}}F.exports=["prefixMap"];const z=F;const q=function({factor:e,score:t}){return({dataset:n,graph:r,terms:i=[]})=>t({dataset:n,graph:r,terms:i}).map(t=>(t.score*=e,t))};const $=function(e){return"_:"+e.value};const H=function(e,t){return[...e].map(e=>t(e)).join("\n")+"\n"};const V=function(){return""};const W=function(e){return"<"+e.value+">"},G=/["\\\\\n\r]/,J=/["\\\\\n\r]/g,K={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r"};function Z(e){return K[e]}const Q=function(e){const t=(n=e.value,G.test(n)?n.replace(J,Z):n);var n;return"http://www.w3.org/2001/XMLSchema#string"===e.datatype.value?'"'+t+'"':"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"===e.datatype.value?'"'+t+'"@'+e.language:'"'+t+'"^^'+W(e.datatype)};const X=function(e,t){const n=t(e.subject),r=t(e.predicate),i=t(e.object),o=t(e.graph);return`${n} ${r} ${i} ${o?o+" ":""}.`};const Y=function(e){return"?"+e.value};const ee=function e(t){if(!t)return null;if("BlankNode"===t.termType)return $(t);if("DefaultGraph"===t.termType)return V();if("Literal"===t.termType)return Q(t);if("NamedNode"===t.termType)return W(t);if("Quad"===t.termType||t.subject&&t.predicate&&t.object&&t.graph)return X(t,e);if("Variable"===t.termType)return Y(t);if(t[Symbol.iterator])return H(t,e);throw new Error(`unknown termType ${t.termType}`)};class te extends Set{constructor(e=[]){super(),this._index=new Map;for(const t of e)this.add(t)}add(e){return this._index.set(te.key(e),e),super.add(e)}delete(e){const t=this._index.get(te.key(e));return super.delete(t)}has(e){return this._index.has(te.key(e))}static key(e){return e.map(e=>e&&ee(e)||"undefined").join(" ")}}const ne=te;class re extends Map{constructor(e=[]){super(),this._keys=new Map;for(const[t,n]of e)this.set(t,n)}delete(e){const t=re.key(e);return this._keys.delete(t),super.delete(t)}get(e){return super.get(re.key(e))}has(e){return super.has(re.key(e))}keys(){return new ne(this._keys.values())}set(e,t){const n=re.key(e);return this._keys.set(n,e),super.set(n,t)}static key(e){return e.map(e=>e&&ee(e)||"undefined").join(" ")}}const ie=re;const oe=function(e){return({dataset:t,graph:n,terms:r=[]})=>{const i=new ie;for(let o=0;o<e.length;o++){const s=(0,e[o])({dataset:t,graph:n,terms:r});for(const e of s){const t=i.get([e.term,n]);t?t.score+=e.score:i.set([e.term,n],e)}}return[...i.values()]}};function se(e){const t=1/e.length;return oe(e.map(e=>q({factor:t,score:e})))}se.prioritized=function(e){const t=2/(e.length*(e.length+1)),n=e.map((n,r)=>{const i=(e.length-r)*t;return q({factor:i,score:n})});return oe(n)};const ae=se;const le=function(e){return({dataset:t,graph:n,terms:r=[]})=>e.flatMap(e=>e({dataset:t,graph:n,terms:r}))};class ce{constructor(e){if(this.index=new Map,e)for(const[t,n]of e)this.set(t,n)}get size(){return this.index.size}clear(){this.index.clear()}delete(e){return this.index.delete(ee(e))}*entries(){for(const[,{term:e,value:t}]of this.index)yield[e,t]}forEach(e,t){for(const n of this.entries())e.call(t,n[1],n[0],this)}get(e){const t=this.index.get(ee(e));return t&&t.value}has(e){return this.index.has(ee(e))}*keys(){for(const[,{term:e}]of this.index)yield e}set(e,t){const n=ee(e);return this.index.set(n,{term:e,value:t}),this}*values(){for(const[,{value:e}]of this.index)yield e}[Symbol.iterator](){return this.entries()[Symbol.iterator]()}}const ue=ce;const de=function({graph:e,object:t,predicate:n,subject:r=!0}={}){const i={subject:r,predicate:n,object:t,graph:e};return({dataset:e,graph:t,terms:n=[]})=>{const r=new ue;let o=0;const s=i=>{for(const s of n){const n=["subject"===i&&s,"predicate"===i&&s,"object"===i&&s,t||"graph"===i&&s],a=e.match(...n);for(const e of a){const t=e[i],n=r.get(t)||{count:0};r.has(t)||r.set(t,n),n.count++,o++}}};for(const e of["subject","predicate","object","graph"])i[e]&&s(e);const a=[];for(const[n,i]of r)a.push({dataset:e,graph:t,term:n,score:i.count/o});return a}};const he=function(e){const t=new ie;for(const n of e){const e=t.get([n.term,n.graph]);e?e.score<n.score&&(t.delete([n.term,n.graph]),t.set([n.term,n.graph],n)):t.set([n.term,n.graph],n)}return[...t.values()]};const pe=function({graph:e,object:t,predicate:n,subject:r}){const i={subject:r,predicate:n,object:t,graph:e};return({dataset:e,graph:t,terms:n=[]})=>{for(const r of n){const n=[{dataset:e,graph:t,term:r,score:1}];if(i.subject&&i.subject.equals(r)&&e.match(r,null,null,t).size>0)return n;if(i.predicate&&i.predicate.equals(r)&&e.match(null,r,null,t).size>0)return n;if(i.object&&i.object.equals(r)&&e.match(null,null,r,t).size>0)return n;if(i.graph&&i.graph.equals(r)&&(!t||i.graph.equals(t))&&e.match(null,null,null,t).size>0)return n}return[]}};const fe=function(e){return({dataset:t,graph:n,terms:r=[]})=>{for(const i of e){const e=i({dataset:t,graph:n,terms:r});if(e.length>0)return e}return[]}};const me=function(e){const t=e;return({dataset:e,graph:n,terms:r=[]})=>{for(const i of r)if(i.equals(t))return[{dataset:e,graph:n,term:i,score:1}];return[]}};const ge=function(e){const t=new Map;let n;for(const[r,i]of Object.entries(e)){const o=1-r/e.length;"*"===i?n=o:t.set(i,o)}return({dataset:e,graph:r,terms:i=[]})=>{const o=[];for(const s of i){let i=t.get(s.language);void 0===i&&"string"==typeof s.language&&n&&(i=n),void 0!==i&&o.push({dataset:e,graph:r,term:s,score:i})}return o}};function ve(e){try{return ee(e)}catch(e){return null}}class ye{constructor(e){if(this.index=new Map,e)for(const t of e)this.add(t)}get size(){return this.index.size}add(e){const t=ee(e);return this.index.has(t)||this.index.set(t,e),this}clear(){this.index.clear()}delete(e){return!!e&&this.index.delete(ve(e))}entries(){return this.values().entries()}forEach(e,t){return this.values().forEach(e,t)}has(e){return!!e&&this.index.has(ve(e))}values(){return new Set(this.index.values())}keys(){return this.values()}[Symbol.iterator](){return this.index.values()}}const be=ye;const we=function({alpha:e=.85,epsilon:t=1e-6}={}){return({dataset:n,graph:r,terms:i})=>{i=new be(i);const o=new ue,s=1/i.size;let a=1;for(const e of i){const t=n.match(null,null,e,r);o.set(e,{weight:s,outbound:t.size,subjects:[...t].map(e=>e.subject).filter(e=>i.has(e))})}for(;a>t;){const t=new ue;let n=0;for(const[e,r]of o)t.set(e,r.weight),0===r.outbound&&(n+=r.weight),r.weight=0;n*=e;for(const[r,i]of o){for(const n of i.subjects)o.get(n).weight+=e*t.get(r)/i.outbound;i.weight+=(1-e)*s+n*s}a=0;for(const[e,n]of o)a+=Math.abs(n.weight-t.get(e))}const l=[];for(const[e,t]of o)l.push({dataset:n,graph:r,term:e,score:t.weight});return l}};const _e=function(){return({dataset:e,graph:t,terms:n=[]})=>{const r=[];for(const i of n){let n=Number.EPSILON;if("NamedNode"===i.termType){let e=new URL(i.value).pathname;e.endsWith("/")&&(e=e.slice(0,-1));n=1/e.split("/").length}r.push({dataset:e,graph:t,term:i,score:n})}return r}};const xe=function(e){return({dataset:t,graph:n,terms:r=[]})=>{const i=[],o=2/(e.length*(e.length+1));for(let s=0;s<e.length;s++){const a=(e.length-s)*o,l=q({factor:a,score:e[s]});for(const e of l({dataset:t,graph:n,terms:r}))i.push(e)}return i}};const Se=function(e){return({dataset:t,graph:n,terms:r=[]})=>{if(0===e.length)return[];const i=e[0]({dataset:t,graph:n,terms:r}),o=new ie(i.map(e=>[[e.term,n],e]));for(let i=1;i<e.length;i++){const s=e[i],a=o.keys(),l=s({dataset:t,graph:n,terms:r});for(const e of l){const t=o.get([e.term,n]);t&&(t.score*=e.score),a.delete([e.term,n])}for(const e of a)o.delete(e)}return[...o.values()]}};const Ce=function(e){return e.slice().sort((e,t)=>{const n=t.score-e.score;return 0!==n?n:e.term.value.localeCompare(t.term.value)})};const ke=function({dataset:e,objects:t,score:n,termCallback:r=e=>e.term}={}){const i=new ue(t.map(e=>[r(e),e])),o=t.map(e=>r(e));return Ce(he(n({dataset:e,terms:o}))).map(({term:e})=>i.get(e))};const Ee=function(e){const t={rdf:{type:O.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")}};return({dataset:n,graph:r,terms:i=[]})=>{const o=[];for(const s of i)for(const i of n.match(s,t.rdf.type,e,r))o.push({dataset:n,graph:i.graph,term:s,score:1});return o}};const Ae=class{init(){this.score={combine:ae,concat:le,count:de,distinct:he,exists:pe,fallback:fe,fixed:me,language:ge,pageRank:we,pathDepth:_e,prioritized:xe,product:Se,scale:q,sort:Ce,sortObjects:ke,sum:oe,type:Ee}}};class Te{termMap(e){return new ue(e)}}Te.exports=["termMap"];const Ie=Te;class Re{termSet(e){return new be(e)}}Re.exports=["termSet"];const Le=Re;class Ne{constructor(){this.quadLevel=new Map}add(e,t){this.quadLevel.set(ee(e),t)}has(e,t){const n=this.quadLevel.get(ee(e));return void 0!==n&&n<=t}}function Oe({backward:e,callback:t,dataset:n,filter:r,forward:i,term:o,visited:s=new Ne}){const a=(o,l)=>{const c=o=>{for(const c of o){if(s.has(c,l))continue;s.add(c,l);const o={dataset:n,level:l,quad:c};r(o)&&(t(o),i&&a(c.object,l+1),e&&a(c.subject,l+1))}};i&&c(n.match(o)),e&&c(n.match(null,null,o))};a(o,0)}const De=class{constructor(e,{backward:t=!1,factory:n,forward:r=!0}){this.backward=t,this.factory=n,this.filter=e,this.forward=r}forEach({term:e,dataset:t},n){Oe({backward:this.backward,callback:n,dataset:t,filter:this.filter,forward:this.forward,term:e})}match({term:e,dataset:t}){const n=this.factory.dataset();return Oe({backward:this.backward,callback:({quad:e})=>n.add(e),dataset:t,filter:this.filter,forward:this.forward,term:e}),n}reduce({term:e,dataset:t},n,r){let i=r;return Oe({backward:this.backward,callback:e=>{i=n(e,i)},dataset:t,filter:this.filter,forward:this.forward,term:e}),i}};class Me{traverser(e,{backward:t=!1,forward:n=!0}={}){return new De(e,{backward:t,factory:this,forward:n})}}Me.exports=["traverser"];const Pe=Me;function je(e,{factory:t}){const n=function(e,{factory:t}){const n=Ue(e,{factory:t});return e=>{const r=n(e.subject),i=n(e.predicate),o=n(e.object);return r===e.subject&&i===e.predicate&&o===e.object?e:t.quad(r,i,o,e.graph)}}(e,{factory:t});return e=>{for(const t of[...e]){const r=n(t);r!==t&&(e.delete(t),e.add(r))}}}function Ue(e,{factory:t}){return n=>"NamedNode"!==n.termType||/^[a-z]+:\/\//.test(n.value)?n:t.namedNode(new URL(n.value,e.value).toString())}const Be=/^[a-z][a-z0-9+.-]*:/;function Fe(e,t,{factory:n}){const r=function(e,t,{factory:n}){const r=function(e,t,{factory:n}){return r=>"NamedNode"!==r.termType?r:r.value.startsWith(e.value)?Be.test(r.value)!==Be.test(e.value)?r:n.namedNode(t.value+r.value.slice(e.value.length)):r}(e,t,{factory:n});return e=>{const t=r(e.subject),i=r(e.predicate),o=r(e.object);return t===e.subject&&i===e.predicate&&o===e.object?e:n.quad(t,i,o,e.graph)}}(e,t,{factory:n});return e=>{for(const t of[...e]){const n=r(t);n!==t&&(e.delete(t),e.add(n))}}}function ze(e,t,{factory:n}){const r=function(e,t,{factory:n}){const r=function(e,t){return n=>n.equals(e)?t:n}(e,t);return e=>{const t=r(e.subject),i=r(e.predicate),o=r(e.object);return t===e.subject&&i===e.predicate&&o===e.object?e:n.quad(t,i,o,e.graph)}}(e,t,{factory:n});return t=>{const n=[...t.match(e),...t.match(null,e),...t.match(null,null,e)];for(const e of n){const n=r(e);n!==e&&(t.delete(e),t.add(n))}}}const qe=function(e){return e.slice().sort((e,t)=>{const n=t.score-e.score;return 0!==n?n:e.term.value.localeCompare(t.term.value)})};const $e=class{constructor({dataset:e,end:t,quad:n,start:r}){this.dataset=e,this.end=t,this.quad=n,this.start=r}get term(){return this.quad[this.end]}get graph(){return this.quad.graph}get startTerm(){return this.quad[this.start]}},He=(M("http://www.w3.org/2001/XMLSchema#"),M("http://www.w3.org/1999/02/22-rdf-syntax-ns#"));M("http://www.w3.org/2000/01/rdf-schema#");class Ve{static add({ptr:e,start:t,end:n,subjects:r=[null],predicates:i=[null],objects:o=[null],graphs:s,callback:a}={}){if(!e.factory)throw new Error("add operation requires a factory");let l=()=>{};a&&(l=r=>{a(new $e({dataset:e.dataset,start:t,end:n,quad:r}))});for(const n of r)for(const r of i)for(const i of o)for(const o of s){const s={subject:n,predicate:r,object:i,graph:o};s[t]=e.term;const a=e.factory.quad(s.subject,s.predicate,s.object,s.graph);e.dataset.add(a),l(a)}return e}static addList({ptr:e,predicates:t,items:n,graphs:r}){if(e.isAny())throw new Error("can't attach a list to an any ptr");for(const i of t)for(const t of r){const r=n.map(()=>e.factory.blankNode());e.dataset.add(e.factory.quad(e.term,i,r[0]||He.nil,t));for(let i=0;i<r.length;i++)e.dataset.add(e.factory.quad(r[i],He.first,n[i],t)),e.dataset.add(e.factory.quad(r[i],He.rest,r[i+1]||He.nil,t))}return e}static delete({ptr:e,start:t,subjects:n=[null],predicates:r=[null],objects:i=[null]}){for(const o of n)for(const n of r)for(const r of i){const i={subject:o,predicate:n,object:r};i[t]=e.term;const s=e.dataset.match(i.subject,i.predicate,i.object);for(const t of s)e.dataset.delete(t)}return e}static deleteList({ptr:e,predicates:t}){const n=[];for(const r of t)for(const t of e.dataset.match(e.term,r)){let r=t.object;for(n.push(t);!He.nil.equals(r);){r=n[n.length-1].object;const t=e.dataset.match(r);if(0===t.size)break;for(const e of t)n.push(e)}}for(const t of n)e.dataset.delete(t);return e}static execute({ptr:e,operation:t="traverse",quantifier:n,start:r,end:i,subjects:o,predicates:s,objects:a,graphs:l,items:c,callback:u}={}){if("add"===t)return Ve.add({ptr:e,start:r,end:i,subjects:o,predicates:s,objects:a,graphs:l,callback:u});if("addList"===t)return Ve.addList({ptr:e,predicates:s,items:c,graphs:l});if("delete"===t)return Ve.delete({ptr:e,start:r,subjects:o,predicates:s,objects:a});if("deleteList"===t)return Ve.deleteList({ptr:e,predicates:s});if("isList"===t)return Ve.isList({ptr:e});if("list"===t)return Ve.list({ptr:e});if("traverse"===t)return Ve.traverse({ptr:e,quantifier:n,start:r,end:i,subjects:o,predicates:s,objects:a,graphs:l});throw new Error(`unknown operation ${t}`)}static isList({ptr:e}){if(e.isAny())return!1;if(He.nil.equals(e.term))return!0;return 1===Ve.traverse({ptr:e,predicates:[He.first]}).length}static list({ptr:e}){if(e.isList())return{*[Symbol.iterator](){for(;e&&!e.term.equals(He.nil);){const t=e.out([He.first]);if(1!==t.length)throw new Error(`Invalid list: rdf:first count not equals one on ${e.value}`);const n=e.out([He.rest]);if(1!==n.length)throw new Error(`Invalid list: rdf:rest count not equals one on ${e.value}`);yield t[0],e=n[0]}}}}static traverse({ptr:e,quantifier:t="one",start:n="subject",end:r="object",subjects:i=[null],predicates:o=[null],objects:s=[null],graphs:a=[null],callback:l}){if("one"===t)return Ve.traverseOne({ptr:e,start:n,end:r,subjects:i,predicates:o,objects:s,graphs:a,callback:l});if("oneOrMore"===t){const t=Ve.traverse({ptr:e,end:r,start:n,subjects:i,predicates:o,objects:s,graphs:a,callback:l});return Ve.traverseMore({ptrs:t,end:r,start:n,subjects:i,predicates:o,objects:s,graphs:a,callback:l})}if("zeroOrMore"===t)return Ve.traverseMore({ptrs:[e],end:r,start:n,subjects:i,predicates:o,objects:s,graphs:a,callback:l});if("zeroOrOne"===t)return[e,...Ve.traverse({ptr:e,end:r,start:n,subjects:i,predicates:o,objects:s,graphs:a,callback:l})];throw new Error(`unknown quantifier ${t}`)}static traverseMore({ptrs:e,end:t,start:n,subjects:r,predicates:i,objects:o,graphs:s,callback:a}={}){let l,c,u=[...e];do{l=[];for(const c of e)l=[...l,...Ve.traverseOne({ptr:c,end:t,start:n,subjects:r,predicates:i,objects:o,graphs:s,callback:a})];c&&(l=l.filter(e=>!c.has(e.term))),e=l,u=[...u,...l],c=new be(u.map(e=>e.term))}while(l.length>0);return u}static traverseOne({ptr:e,start:t,end:n,subjects:r,predicates:i,objects:o,graphs:s,callback:a=(e,t)=>t.extend(e)}={}){const l=[];for(const c of r)for(const r of i)for(const i of o)for(const o of s){const s={subject:c,predicate:r,object:i,graph:o};s[t]=e.term;for(const r of e.dataset.match(s.subject,s.predicate,s.object,s.graph))l.push(a(new $e({dataset:e.dataset,end:n,quad:r,start:t}),e))}return l}}const We=Ve;function Ge(e,t){return t?n=>t(e.extend(n)):()=>{}}const Je=class{constructor({dataset:e,edges:t=[],factory:n,graph:r,term:i}){if(!e&&0===t.length)throw new Error("dataset or edges is required");if(0===t.length&&void 0===i)throw new Error("edges or term must be given");if(t.length>0&&i)throw new Error("edges or term must be given");this.dataset=e||t[t.length-1].dataset,this.edges=t,this.factory=n,this._graph=r,0===t.length&&(this._term=i)}get edge(){return this.edges[this.edges.length-1]}get graph(){return"object"==typeof this._graph?this._graph:this.edge&&this.edge.graph}get length(){return void 0!==this._term?1:this.edges.length+1}get startTerm(){return this._term||this.edges[0].startTerm}get term(){return void 0!==this._term?this._term:this.edge.term}get value(){const e=this.term;return null===e?void 0:e.value}addIn(e,t,n){return We.add({ptr:this,start:"object",end:"subject",subjects:t,predicates:e,graphs:[this.graph||this.factory.defaultGraph()],callback:Ge(this,n)})}addList(e,t){return We.addList({ptr:this,predicates:e,graphs:[this.graph||this.factory.defaultGraph()],items:t})}addOut(e,t,n){return We.add({ptr:this,start:"subject",end:"object",predicates:e,objects:t,graphs:[this.graph||this.factory.defaultGraph()],callback:Ge(this,n)})}deleteIn(e,t){return We.delete({ptr:this,start:"object",subjects:t,predicates:e})}deleteList(e){return We.deleteList({ptr:this,predicates:e})}deleteOut(e,t){return We.delete({ptr:this,start:"subject",predicates:e,objects:t})}execute({operation:e,quantifier:t,start:n,end:r,subjects:i,predicates:o,objects:s,graphs:a,items:l,callback:c}){return We.execute({ptr:this,operation:e,quantifier:t,start:n,end:r,subjects:i,predicates:o,objects:s,graphs:a,items:l,callback:c})}extend(e){return new this.constructor({dataset:this.dataset,edges:[...this.edges,e],factory:this.factory,graph:this._graph})}hasIn(e,t){return We.traverse({ptr:this,start:"object",end:"object",subjects:t,predicates:e,graphs:[this.graph]})}hasOut(e,t){return We.traverse({ptr:this,start:"subject",end:"subject",predicates:e,objects:t,graphs:[this.graph]})}in(e,t){return We.traverse({ptr:this,start:"object",end:"subject",subjects:t,predicates:e,graphs:[this.graph]})}isAny(){return!this.term}isList(){return We.isList({ptr:this})}list(){return We.list({ptr:this})}*nodes(){for(let e=0;e<this.length;e++)void 0!==this._term?yield{dataset:this.dataset,term:this._term}:this.edges.length>e?yield{dataset:this.edges[e].dataset,term:this.edges[e].startTerm}:this.edges.length===e&&(yield{dataset:this.edges[e-1].dataset,term:this.edges[e-1].term})}out(e,t){return We.traverse({ptr:this,predicates:e,objects:t,graphs:[this.graph]})}*quads(){for(const{quad:e}of this.edges)yield e}trim(){return new this.constructor({dataset:this.dataset,factory:this.factory,graph:this.graph,term:this.term})}};const Ke=function(e,{factory:t}){if(null===e)return null;if(void 0===e)return;if("string"==typeof e)return t.literal(e);if("URL"===e.constructor.name)return t.namedNode(e.toString());if(e.termType)return e;const n=e.term;if(void 0!==n)return n;throw new Error(`can't convert ${e.toString()} to a Term object`)};const Ze=function(e,{dataset:t,factory:n,graph:r}){return null===e?null:void 0!==e?function(e){return e instanceof Je}(e)?e:function(e){return"object"==typeof e.term&&"object"==typeof e.dataset}(e)?new Je({dataset:e.dataset,graph:e.graph,term:e.term,factory:e.factory||n}):new Je({dataset:t,graph:r,term:Ke(e,{factory:n}),factory:n}):void 0};const Qe=function(e,{factory:t}){try{e=[Ke(e,{factory:t})]}catch(e){}return e[Symbol.iterator]&&(e=[...e]),e=e.map(e=>Ke(e,{factory:t}))};const Xe=function(e,{dataset:t,factory:n,graph:r}){try{e=[Ze(e,{dataset:t,factory:n,graph:r})]}catch(e){}return e[Symbol.iterator]&&(e=[...e]),e.flatMap(e=>Qe(r,{factory:n}).flatMap(r=>Ze(e,{dataset:t,factory:n,graph:r})))};const Ye=function(e,t){return e?e.equals(t):e===t};const et=function(e,t){return e.dataset===t.dataset&&(!!Ye(e.graph,t.graph)&&!!Ye(e.term,t.term))};function tt(e,t){return t?n=>t(new e.constructor({factory:e.factory,ptrs:[n]})):()=>{}}class nt{constructor({dataset:e,factory:t,ptrs:n,terms:r,graphs:i}){if(this.factory=t,n)this.ptrs=[...n];else{this.ptrs=[];for(const n of r||[null])for(const r of i||[null])this.ptrs.push(new Je({dataset:e,factory:t,graph:r,term:n}))}}get dataset(){const e=new Set(this.datasets);return 1!==e.size?null:e[Symbol.iterator]().next().value}get datasets(){return this.ptrs.map(e=>e.dataset)}get term(){const e=new be(this.terms);if(1===e.size)return e[Symbol.iterator]().next().value}get terms(){return this.ptrs.map(e=>e.term)}get value(){const e=this.term;return null==e?void 0:e.value}get values(){return this.ptrs.map(e=>e.value)}addIn(e,t,n){const r=tt(this,n);for(const n of this.ptrs)n.addIn(e,t,r);return this}addList(e,t){if(this.isAny())throw new Error("can't attach a list to an any ptr");for(const n of this.ptrs)n.addList(e,t);return this}addOut(e,t,n){const r=tt(this,n);for(const n of this.ptrs)n.addOut(e,t,r);return this}clone(e){return new this.constructor({factory:this.factory,ptrs:this.ptrs,...e})}deleteIn(e,t){for(const n of this.ptrs)n.deleteIn(e,t);return this}deleteList(e){for(const t of this.ptrs)t.deleteList(e);return this}deleteOut(e,t){for(const n of this.ptrs)n.deleteOut(e,t);return this}distinct(){const e=this.ptrs.reduce((e,t)=>(e.some(e=>et(e,t))||e.push(t.trim()),e),[]);return this.clone({ptrs:e})}execute(e){return this.clone({ptrs:this.ptrs.flatMap(t=>t.execute(e))})}executeAll(e){let t=this;for(const n of e)t=t.execute(n);return t}filter(e){return this.clone({ptrs:[...this].filter(e).map(e=>e.ptrs[0])})}hasIn(e,t){return this.clone({ptrs:this.ptrs.flatMap(n=>n.hasIn(e,t))})}hasOut(e,t){return this.clone({ptrs:this.ptrs.flatMap(n=>n.hasOut(e,t))})}in(e,t){return this.clone({ptrs:this.ptrs.flatMap(n=>n.in(e,t))})}isAny(){return this.ptrs.length>0&&this.ptrs.some(e=>e.isAny())}isList(){return 1===this.ptrs.length&&this.ptrs[0].isList()}list(){if(!this.isList())return;const e=this.ptrs[0].list(),t=this;return function*(){for(const n of e)yield t.clone({ptrs:[n]})}()}map(e){return[...this].map(e)}node(e){const t=this.dataset,n=[...e].map(e=>new Je({dataset:t,factory:this.factory,term:e}));return this.clone({ptrs:n})}out(e,t){return this.clone({ptrs:this.ptrs.flatMap(n=>n.out(e,t))})}*quads(){for(const{edges:e}of this.ptrs)for(const{quad:t}of e)yield t}trim(){return this.clone({ptrs:this.ptrs.map(e=>e.trim())})}*[Symbol.iterator](){for(const e of this.ptrs)yield this.clone({ptrs:[e]})}}const rt=nt;const it=class extends rt{constructor({dataset:e,factory:t,ptrs:n,term:r,terms:i,graph:o,graphs:s}){(r||i)&&(i=i||r),(o||s)&&(s=s||o),!n&&i&&(n=Xe(i,{dataset:e,factory:t,graph:s})),super({dataset:e,factory:t,ptrs:n,graphs:s})}_toTerm(e){return Ke(e,{factory:this.factory})}_toTermArray(e){return Qe(e,{factory:this.factory})}addIn(e,t,n){return"function"==typeof t&&(n=t,t=null),t||(t=[this.factory.blankNode()]),super.addIn(this._toTermArray(e),this._toTermArray(t),n)}addList(e,t){return super.addList(this._toTermArray(e),this._toTermArray(t))}addOut(e,t,n){return"function"==typeof t&&(n=t,t=null),t||(t=[this.factory.blankNode()]),super.addOut(this._toTermArray(e),this._toTermArray(t),n)}base(e){if(!e)throw new Error("base parameter is required");e=this._toTerm(e);for(const t of this.ptrs)je(e,{factory:this.factory})(t.dataset);return this.node(Ue(e,{factory:this.factory})(this.term))}best(e){return this.score(e,{limit:1})}deleteIn(e,t){return super.deleteIn(this._toTermArray(e),this._toTermArray(t))}deleteList(e){return super.deleteList(this._toTermArray(e))}deleteOut(e,t){return super.deleteOut(this._toTermArray(e),this._toTermArray(t))}hasIn(e,t){return super.hasIn(this._toTermArray(e),this._toTermArray(t))}hasOut(e,t){return super.hasOut(this._toTermArray(e),this._toTermArray(t))}in(e,t){return super.in(this._toTermArray(e),this._toTermArray(t))}out(e,t){return super.out(this._toTermArray(e),this._toTermArray(t))}node(e=null){return super.node(this._toTermArray(e))}rebase(e){if(!e)throw new Error("base parameter is required");e=this._toTerm(e);for(const t of this.ptrs)Fe(t.term,e,{factory:this.factory})(t.dataset);return this.node(e)}replace(e){if(!e)throw new Error("replacement parameter is required");e=this._toTerm(e);for(const t of this.ptrs)ze(t.term,e,{factory:this.factory})(t.dataset);return this.node(e)}score(e,{limit:t=1/0,offset:n=0}={}){const r=qe(e(this)).slice(n,n+t).map(e=>new Je({...e,factory:this.factory}));return this.clone({ptrs:r})}};class ot{grapoi({...e}={}){return e.dataset||"function"!=typeof this.dataset||(e.dataset=this.dataset()),function(e){return new it(e)}({...e,factory:this})}}ot.exports=["grapoi"];const st=ot;const at=class extends v{toCanonical(){return ee(this)}toString(){return this.toCanonical()}};const lt=class extends b{toCanonical(){return ee(this)}toString(){return this.toCanonical()}};const ct=class extends x{toCanonical(){return ee(this)}toString(){return this.value}};const ut=class extends C{toCanonical(){return ee(this)}toString(){return this.value}toURL(){return new URL(this.value)}};const dt=class extends E{toCanonical(){return ee(this)}toString(){return this.toCanonical()}};const ht=class extends T{toCanonical(){return ee(this)}toString(){return this.toCanonical()}},pt=new ut("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),ft=new ut("http://www.w3.org/2001/XMLSchema#string");class mt{init(){this._data={blankNodeCounter:0,defaultGraph:new lt}}namedNode(e){return"string"!=typeof e&&(e=e.toString()),new ut(e)}blankNode(e){return e=e||"b"+ ++this._data.blankNodeCounter,new at(e)}literal(e,t){return"string"==typeof t?new ct(e,t,pt):new ct(e,"",t||ft)}variable(e){return new ht(e)}defaultGraph(){return this._data.defaultGraph}quad(e,t,n,r=this.defaultGraph()){return new dt(e,t,n,r)}fromTerm(e){return w(this,e)}fromQuad(e){return w(this,e)}}mt.exports=["namedNode","blankNode","literal","variable","defaultGraph","quad","fromTerm","fromQuad"];const gt=mt;function vt(e){return"string"==typeof e||e instanceof String}function yt(e){if("string"==typeof e)return e;if(!e)return"";if(void 0!==e.id&&"Quad"!==e.termType)return e.id;let t,n,r,i;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return e.language?`"${e.value}"@${e.language}`:`"${e.value}"${e.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==e.datatype.value?`^^${e.datatype.value}`:""}`;case"Quad":return t=wt(yt(e.subject)),n=wt(yt(e.predicate)),r=wt(yt(e.object)),i="DefaultGraph"===e.graph.termType?"":` ${yt(e.graph)}`,`<<${t} ${n} ${r}${i}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}const bt=/^"(.*".*)(?="[^"]*$)/;function wt(e){return e.replace(bt,(e,t)=>`"${t.replace(/"/g,'""')}`)}class _t{constructor(e){if(this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._quads=new Map,e)for(const t of e)this.add(t)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let n,r;for(const i in t)for(const o in n=t[i].subjects)for(const t in r=n[o])e+=Object.keys(r[t]).length;return this._size=e,this._size}add(e){let t=yt(e.subject),n=yt(e.predicate),r=yt(e.object);const i=yt(e.graph);let o=this._graphs[i];o||(o=this._graphs[i]={subjects:{},predicates:{},objects:{}},Object.freeze(o));const s=this._ids,a=this._entities;return t=s[t]||(s[a[++this._id]=t]=this._id),n=s[n]||(s[a[++this._id]=n]=this._id),r=s[r]||(s[a[++this._id]=r]=this._id),this._addToIndex(o.subjects,t,n,r),this._addToIndex(o.predicates,n,r,t),this._addToIndex(o.objects,r,t,n),this._setQuad(t,n,r,i,e),this._size=null,this}delete(e){let t=yt(e.subject),n=yt(e.predicate),r=yt(e.object);const i=yt(e.graph),o=this._ids,s=this._graphs;let a,l,c;if(!((t=o[t])&&(n=o[n])&&(r=o[r])&&(a=s[i])&&(l=a.subjects[t])&&(c=l[n])&&r in c))return this;for(t in this._removeFromIndex(a.subjects,t,n,r),this._removeFromIndex(a.predicates,n,r,t),this._removeFromIndex(a.objects,r,t,n),null!==this._size&&this._size--,this._deleteQuad(t,n,r,i),a.subjects)return this;return delete s[i],this}has(e){const t=yt(e.subject),n=yt(e.predicate),r=yt(e.object),i=yt(e.graph),o=this._graphs[i];if(!o)return!1;const s=this._ids;let a,l,c;return!(vt(t)&&!(a=s[t])||vt(n)&&!(l=s[n])||vt(r)&&!(c=s[r]))&&1===this._countInIndex(o.objects,c,a,l)}match(e,t,n,r){return this._createDataset(this._match(e,t,n,r))}[Symbol.iterator](){return this._match()[Symbol.iterator]()}_addToIndex(e,t,n,r){const i=e[t]||(e[t]={}),o=i[n]||(i[n]={}),s=r in o;return s||(o[r]=null),!s}_removeFromIndex(e,t,n,r){const i=e[t],o=i[n];delete o[r];for(const e in o)return;delete i[n];for(const e in i)return;delete e[t]}_findInIndex(e,t,n,r,i,o,s,a,l,c){let u,d,h;t&&((u=e,e={})[t]=u[t]);for(const t in e)if(d=e[t],d){n&&((u=d,d={})[n]=u[n]);for(const e in d)if(h=d[e],h){const n=r?r in h?[r]:[]:Object.keys(h);for(let r=0;r<n.length;r++){const u={[i]:t,[o]:e,[s]:n[r]},d=this._getQuad(u.subject,u.predicate,u.object,a);if(c)c.push(d);else if(l(d))return!0}}}return c}_countInIndex(e,t,n,r){let i,o,s,a=0;t&&((i=e,e={})[t]=i[t]);for(const t in e)if(o=e[t],o){n&&((i=o,o={})[n]=i[n]);for(const e in o)s=o[e],s&&(r?r in s&&a++:a+=Object.keys(s).length)}return a}_getGraphs(e){return vt(e)?{[e]:this._graphs[e]}:this._graphs}_match(e,t,n,r){e=e&&yt(e),t=t&&yt(t),n=n&&yt(n),r=r&&yt(r);const i=[],o=this._getGraphs(r),s=this._ids;let a,l,c,u;if(vt(e)&&!(l=s[e])||vt(t)&&!(c=s[t])||vt(n)&&!(u=s[n]))return i;for(const e in o)a=o[e],a&&(l?u?this._findInIndex(a.objects,u,l,c,"object","subject","predicate",e,null,i):this._findInIndex(a.subjects,l,c,null,"subject","predicate","object",e,null,i):c?this._findInIndex(a.predicates,c,u,null,"predicate","object","subject",e,null,i):u?this._findInIndex(a.objects,u,null,null,"object","subject","predicate",e,null,i):this._findInIndex(a.subjects,null,null,null,"subject","predicate","object",e,null,i));return i}_getQuad(e,t,n,r){return this._quads.get(this._toId(e,t,n,r))}_setQuad(e,t,n,r,i){this._quads.set(this._toId(e,t,n,r),i)}_deleteQuad(e,t,n,r){this._quads.delete(this._toId(e,t,n,r))}_createDataset(e){return new this.constructor(e)}_toId(e,t,n,r){return`${e}:${t}:${n}:${r}`}}const xt=_t;var St=i(4099);function Ct(e){return"BlankNode"===e.termType?{termType:"BlankNode",value:`_:${e.value}`}:e}function kt(e){return[...e].map(e=>function(e){return{subject:Ct(e.subject),predicate:Ct(e.predicate),object:Ct(e.object),graph:Ct(e.graph)}}(e))}const Et=function(e){return new St({maxDeepIterations:500}).main(kt(e))};function At(e,t){return new e.constructor(t)}const Tt=class extends xt{addAll(e){for(const t of e)this.add(t);return this}clone(){return At(this,this)}deleteMatches(e,t,n,r){for(const i of this.match(e,t,n,r))this.delete(i);return this}difference(e){return this.filter(t=>!e.has(t))}equals(e){return this.toCanonical()===e.toCanonical()}every(e){return Array.from(this).every(t=>e(t,this))}filter(e){return At(this,Array.from(this).filter(t=>e(t,this)))}forEach(e){Array.from(this).forEach(t=>e(t,this))}import(e){return e.on("data",e=>this.add(e)),new Promise((t,n)=>{(0,a.finished)(e,e=>{e?n(e):t(this)})})}intersection(e){return this.filter(t=>e.has(t))}map(e){return At(this,Array.from(this).map(t=>e(t,this)))}merge(e){return this.clone().addAll(e)}reduce(e,t){return Array.from(this).reduce((t,n,r)=>e(t,n,r,this),t)}some(e){return Array.from(this).some(t=>e(t,this))}toCanonical(){return Et(this)}toStream(){return a.Readable.from(this)}toString(){return ee(this)}};class It{dataset(e,t){const n=new Tt;if(e)if(t)for(const r of e)n.add(this.quad(r.subject,r.predicate,r.object,t));else n.addAll(e);return n}}It.exports=["dataset"];const Rt=It;const Lt=async function(e){const t=[];for await(const n of e)t.push(n);return t};const Nt=function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n};const Ot=async function(e={}){if(!e.body||!e.body.readable)return e;const t=await Lt(e.body);return t.length>0?1===t[0].BYTES_PER_ELEMENT?e.body=Nt(t):e.body=t.join(""):e.body="",e};var Dt=i(8059);const Mt=function(e){return new a.Readable({read:Dt(async function(){try{this.push(new Uint8Array(await e())),this.push(null)}catch(e){this.destroy(e)}})})};class Pt{constructor(e,t){this.obj=e;for(const[e,n]of Object.entries(t))this[e]=n;for(const t of Pt.properties(e))t in this||("function"==typeof this.obj[t]?this[t]=(...n)=>this.obj[t].call(e,n):Object.defineProperty(this,t,{get:()=>this.obj[t],set:e=>{this.obj[t]=e},enumerable:!0,configurable:!0}))}static properties(e){return Object.getOwnPropertyNames(Object.getPrototypeOf(e))}}const jt=Pt;const Ut=function(e){return new a.Readable({read:async function(){try{let t,n;do{t=await e.read(),t.done?this.push(null):n=!this.push(t.value)}while(!t.done&&!n)}catch(e){this.destroy(e)}}})};const Bt=function(e){if(e.bodyUsed){const t=new a.Readable({read:()=>t.destroy(new Error("body already in use"))});return e.body=t,e}return e.body&&e.body.readable?e:e.body&&"function"==typeof e.body.getReader?new jt(e,{body:Ut(e.body.getReader())}):(e.body=Mt(()=>e.arrayBuffer()),e)},Ft=window.Headers;function zt(e,t){return Ot(t).then(t=>fetch(e,t).then(e=>Bt(e)))}function qt(e,{checkOpen:t=!0}={}){return null!==e&&"object"==typeof e&&(e.writable||e.readable||!t||void 0===e.writable&&void 0===e.readable)&&"function"==typeof e.pipe}function $t(e,{checkOpen:t=!0}={}){return qt(e,{checkOpen:t})&&(e.readable||!t)&&"function"==typeof e.read&&"boolean"==typeof e.readable&&"boolean"==typeof e.readableObjectMode&&"function"==typeof e.destroy&&"boolean"==typeof e.destroyed}const Ht=function(e,t){if(e.headers=new Ft(e.headers),e.headers.has("accept")||e.headers.set("accept",[...t.parsers.keys()].join(", ")),!e.body)return e;if("string"==typeof e.body)return e;let n=e.headers.get("content-type");if(n&&!t.serializers.has(n))throw new Error(`no serializer found for media type: ${e.headers.get("content-type")}`);return n||(n=t.serializers.keys().next().value,e.headers.set("content-type",n)),!$t(e.body)&&e.body[Symbol.iterator]&&(e.body=a.Readable.from(e.body)),e.body=t.serializers.import(n,e.body,{prefixes:e.prefixes}),e};const Vt=async function(e,t){for await(const n of t)e.add(n);return e};const Wt=function(e,t){e.dataset=async()=>{const n=await e.quadStream();return Vt(t.dataset(),n)}},Gt=/<(.*)>/;const Jt=function(e,t){if("application/json"!==t)return null;if(!e.headers.has("link"))return null;const n=e.headers.get("link").split(",").map(e=>e.trim()).find(e=>e.includes('rel="http://www.w3.org/ns/json-ld#context"'));if(!n)return null;const r=(Gt.exec(n)||[]).slice(-1)[0];return r?new URL(r,e.url).toString():null};const Kt=function(e,t,n){e.quadStream=async()=>{if(!e.headers.get("content-type"))throw new Error("Content-Type header missing: couldn't determine parser");let r=e.headers.get("content-type").split(";")[0];const i=Jt(e,r);if(i&&(r="application/ld+json"),!n.has(r))return Promise.reject(new Error(`unknown content type: ${r}`));let o;return i&&(o=await t(i).then(e=>e.json())),n.import(r,e.body,{baseIRI:e.url,context:o})}};const Zt=function(e,t,n,r){const i=[...e.headers.keys()].some(e=>e.startsWith("content-")),o="chunked"===e.headers.get("transfer-encoding");return(i||o)&&(Kt(e,n,r),t&&Wt(e,t)),e};function Qt(e){const t=function(t,n={}){const r="function"==typeof e.dataset?e:null;return async function(e,t={}){const n=t.factory,r=t.fetch||zt,i=t.formats;if(!i)throw new Error("no formats given");t=Ht(t,i);const o=await r(e,t);return Zt(o,n,r,i.parsers)}(t,{fetch:e._fetch.fetch,formats:e.formats,...n,factory:r})};return t.config=function(t,n){e._fetch[t]=n},t.Headers=Ft,t}const Xt=class{init(){this._fetch={fetch:null},this.fetch=Qt(this)}clone(e){for(const[t,n]of Object.entries(e._fetch))this._fetch[t]=n}},Yt=zt;const en=class extends Xt{init(){super.init(),this.fetch.config("fetch",Yt)}};const tn=class{constructor(e,t){this.Impl=e,this.options=t}import(e,t){const n=new this.Impl(e,{...this.options,...t});return e.on("end",()=>{n.readable||n.emit("end")}),e.on("error",e=>{n.emit("error",e)}),n}};var nn=i(8690);const rn="null:";function on(e){const t=function(e){return t=>"NamedNode"!==t.termType?null:t.value.startsWith(rn)?e.namedNode(t.value.slice(5)):null}(e);return n=>{const r=t(n.subject),i=t(n.predicate),o=t(n.object),s=t(n.graph);return r||i||o||s?e.quad(r||n.subject,i||n.predicate,o||n.object,s||n.graph):n}}const sn=class{constructor(e,{baseIRI:t=rn,context:n=null,documentLoader:r,factory:i=O}={}){const o=new nn.JsonLdParser({baseIRI:t,context:n,dataFactory:i,documentLoader:r,streamingProfile:!1});e.pipe(o);const s=on(i),l=new a.Transform({objectMode:!0,transform:(e,t,n)=>{n(null,s(e))}});return o.on("context",e=>{Object.entries(e).forEach(([e,t])=>{l.emit("prefix",e,i.namedNode(t))})}),o.on("error",e=>l.destroy(e)),o.pipe(l),f(l)}};const an=class extends tn{constructor(e){super(sn,e)}};var ln=i(8287);const cn="http://www.w3.org/1999/02/22-rdf-syntax-ns#",un="http://www.w3.org/2001/XMLSchema#",dn="http://www.w3.org/2000/10/swap/",hn={xsd:{decimal:`${un}decimal`,boolean:`${un}boolean`,double:`${un}double`,integer:`${un}integer`,string:`${un}string`},rdf:{type:`${cn}type`,nil:`${cn}nil`,first:`${cn}first`,rest:`${cn}rest`,langString:`${cn}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${dn}reify#forSome`,forAll:`${dn}reify#forAll`},log:{implies:`${dn}log#implies`,isImpliedBy:`${dn}log#isImpliedBy`}},{xsd:pn}=hn,fn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,mn={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},gn=/[\x00-\x20<>\\"\{\}\|\^\`]/,vn={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},yn=/$0^/;class bn{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const e in this)!(e in vn)&&this[e]instanceof RegExp&&(this[e]=yn)}else this._n3Mode=!1!==e.n3;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let n=this._input,r=n.length;for(;;){let e,s;for(;e=this._newline.exec(n);)this.comments&&(s=this._comment.exec(e[0]))&&i("comment",s[1],"",this._line,e[0].length),n=n.substr(e[0].length,n.length),r=n.length,this._line++;if(!e&&(e=this._whitespace.exec(n))&&(n=n.substr(e[0].length,n.length)),this._endOfFile.test(n))return t&&(this.comments&&(s=this._comment.exec(n))&&i("comment",s[1],"",this._line,n.length),n=null,i("eof","","",this._line,0)),this._input=n;const a=this._line,l=n[0];let c="",u="",d="",h=null,p=0,f=!1;switch(l){case"^":if(n.length<3)break;if("^"!==n[1]){this._n3Mode&&(p=1,c="^");break}if(this._previousMarker="^^",n=n.substr(2),"<"!==n[0]){f=!0;break}case"<":if(h=this._unescapedIri.exec(n))c="IRI",u=h[1];else if(h=this._iri.exec(n)){if(u=this._unescape(h[1]),null===u||gn.test(u))return o(this);c="IRI"}else n.length>1&&"<"===n[1]?(c="<<",p=2):this._n3Mode&&n.length>1&&"="===n[1]&&(p=2,this._isImpliedBy?(c="abbreviation",u="<"):(c="inverse",u=">"));break;case">":n.length>1&&">"===n[1]&&(c=">>",p=2);break;case"_":((h=this._blank.exec(n))||t&&(h=this._blank.exec(`${n} `)))&&(c="blank",d="_",u=h[1]);break;case'"':if(h=this._simpleQuotedString.exec(n))u=h[1];else if(({value:u,matchLength:p}=this._parseLiteral(n)),null===u)return o(this);null===h&&0===p||(c="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(h=this._simpleApostropheString.exec(n))u=h[1];else if(({value:u,matchLength:p}=this._parseLiteral(n)),null===u)return o(this);null===h&&0===p||(c="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(h=this._variable.exec(n))&&(c="var",u=h[0]);break;case"@":"literal"===this._previousMarker&&(h=this._langcode.exec(n))?(c="langcode",u=h[1]):(h=this._keyword.exec(n))&&(c=h[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){c=".",p=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(n)||t&&(h=this._number.exec(`${n} `)))&&(c="literal",u=h[0],d="string"==typeof h[1]?pn.double:"string"==typeof h[2]?pn.decimal:pn.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(n))?c=h[0].toUpperCase():f=!0;break;case"f":case"t":(h=this._boolean.exec(n))?(c="literal",u=h[0],d=pn.boolean):f=!0;break;case"a":(h=this._shortPredicates.exec(n))?(c="abbreviation",u="a"):f=!0;break;case"=":this._n3Mode&&n.length>1&&(c="abbreviation",">"!==n[1]?(p=1,u="="):(p=2,u=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(p=1,c=l);break;case"{":!this._lineMode&&n.length>=2&&("|"===n[1]?(c="{|",p=2):(c=l,p=1));break;case"|":n.length>=2&&"}"===n[1]&&(c="|}",p=2);break;default:f=!0}if(f&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(h=this._prefix.exec(n))?((h=this._prefixed.exec(n))||t&&(h=this._prefixed.exec(`${n} `)))&&(c="prefixed",d=h[1]||"",u=this._unescape(h[2])):(c="prefix",u=h[1]||"")),"^^"===this._previousMarker)switch(c){case"prefixed":c="type";break;case"IRI":c="typeIRI";break;default:c=""}if(!c)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?o(this):this._input=n;const m=p||h[0].length,g=i(c,u,d,a,m);this.previousToken=g,this._previousMarker=c,n=n.substr(m,n.length)}function i(t,i,o,s,a){const l=n?r-n.length:r,c={type:t,value:i,prefix:o,line:s,start:l,end:l+a};return e(null,c),c}function o(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let t=!1;const n=e.replace(fn,(e,n,r,i)=>{if("string"==typeof n)return String.fromCharCode(Number.parseInt(n,16));if("string"==typeof r){let e=Number.parseInt(r,16);return e<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return i in mn?mn[i]:(t=!0,"")});return t?null:n}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],n=t.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(t,r))>0;){let t=0;for(;"\\"===e[r-t-1];)t++;if(t%2==0){const t=e.substring(n,r),i=t.split(/\r\n|\r|\n/).length-1,o=r+n;if(1===n&&0!==i||3===n&&this._lineMode)break;return this._line+=i,{value:this._unescape(t),matchLength:o}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof t){const e=[];let t;if(this._tokenizeToEnd((n,r)=>n?t=n:e.push(r),!0),t)throw t;return e}queueMicrotask(()=>this._tokenizeToEnd(t,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=ln.Buffer.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:(void 0===this._input?this._input=this._readStartingBom("string"==typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(t,!0)}),e.on("error",t)}}const{rdf:wn,xsd:_n}=hn;let xn,Sn=0;const Cn={namedNode:Nn,blankNode:On,variable:Mn,literal:Dn,defaultGraph:function(){return xn},quad:Pn,triple:Pn,fromTerm:jn,fromQuad:Un},kn=Cn;class En{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof En?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class An extends En{get termType(){return"NamedNode"}}class Tn extends En{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new An(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,n=t<e.length?e[t]:"";return"^"===n?e.substr(t+2):"@"!==n?_n.string:wn.langString}equals(e){return e instanceof Tn?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class In extends En{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Rn extends En{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}xn=new class extends En{constructor(){return super(""),xn||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class Ln extends En{constructor(e,t,n,r){super(""),this._subject=e,this._predicate=t,this._object=n,this._graph=r||xn}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Nn(e){return new An(e)}function On(e){return new In(e||"n3-"+Sn++)}function Dn(e,t){if("string"==typeof t)return new Tn(`"${e}"@${t.toLowerCase()}`);let n=t?t.value:"";return""===n&&("boolean"==typeof e?n=_n.boolean:"number"==typeof e&&(Number.isFinite(e)?n=Number.isInteger(e)?_n.integer:_n.double:(n=_n.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),""===n||n===_n.string?new Tn(`"${e}"`):new Tn(`"${e}"^^${n}`)}function Mn(e){return new Rn(e)}function Pn(e,t,n,r){return new Ln(e,t,n,r)}function jn(e){if(e instanceof En)return e;switch(e.termType){case"NamedNode":return Nn(e.value);case"BlankNode":return On(e.value);case"Variable":return Mn(e.value);case"DefaultGraph":return xn;case"Literal":return Dn(e.value,e.language||e.datatype);case"Quad":return Un(e);default:throw new Error(`Unexpected termType: ${e.termType}`)}}function Un(e){if(e instanceof Ln)return e;if("Quad"!==e.termType)throw new Error(`Unexpected termType: ${e.termType}`);return Pn(jn(e.subject),jn(e.predicate),jn(e.object),jn(e.graph))}let Bn=0;class Fn{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&qn(this,e.factory);const t="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(t),r=/trig/.test(t),i=/triple/.test(t),o=/quad/.test(t),s=this._n3Mode=/n3/.test(t),a=i||o;(this._supportsNamedGraphs=!(n||s))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||i||s),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=""===t||/star|\*$/.test(t),a&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new bn({lineMode:a,n3:s,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Bn=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,n,r,i){const o=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:r,object:i,graph:t,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,t){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${t.type}`,t);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let n;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);n=this._factory.namedNode(t);break;case"type":case"prefixed":const r=this._prefixes[e.prefix];if(void 0===r)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(r+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,n=null,r=this._readListItem;const i=this._subject,o=this._contextStack,s=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=t=this._factory.blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(t=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===n&&(this._subject=n=this._factory.blankNode()),null===i?null===s.predicate?s.subject=n:s.object=n:this._emit(i,this.RDF_REST,n,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,n,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,t,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(void 0===n)return;t=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":t=this._factory.literal(this._literalValue,e.value),e=null}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const n=this._completeLiteral(e);if(n)return this._object=n.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===n.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,n=this._graph;const r=this._subject,i=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,i&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const o=this._predicate,s=this._object;this._subject=this._factory.quad(r,o,s,this.DEFAULTGRAPH),t=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,t=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(n=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const e=this._predicate,t=this._object;i?this._emit(t,e,r,n):this._emit(r,e,t,n)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,n=t.length&&t[t.length-1];if(n&&"item"===n.type){const t=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,n;const r=this._factory.blankNode();if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=r):(t=this._object,this._object=r),this._emit(t,n,r,this._graph),this._readPath}_readBackwardPath(e){const t=this._factory.blankNode();let n,r;if(void 0!==(n=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=t):(r=this._object,this._object=t),this._emit(t,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,n,r){this._callback(null,this._factory.quad(e,t,n,r||this.DEFAULTGRAPH))}_error(e,t){const n=new Error(`${e} on line ${t.line}.`);n.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=zn}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let n="",r=-1,i=-1,o=0,s="/";for(;r<t;){switch(s){case":":if(i<0&&"/"===e[++r]&&"/"===e[++r])for(;(i=r+1)<t&&"/"!==e[i];)r=i;break;case"?":case"#":r=t;break;case"/":if("."===e[r+1])switch(s=e[1+ ++r],s){case"/":n+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return n+e.substring(o,r)+e.substr(r+1);case".":if(s=e[1+ ++r],void 0===s||"/"===s||"?"===s||"#"===s){if(n+=e.substring(o,r-2),(o=n.lastIndexOf("/"))>=i&&(n=n.substr(0,o)),"/"!==s)return`${n}/${e.substr(r+1)}`;o=r+1}}}s=e[++r]}return n+e.substring(o)}parse(e,t,n){let r,i,o;if(t&&(t.onQuad||t.onPrefix||t.onComment)?(r=t.onQuad,i=t.onPrefix,o=t.onComment):(r=t,i=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Bn++}_`,this._prefixCallback=i||zn,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const t=[];let n;if(this._callback=(e,r)=>{e?n=e:r&&t.push(r)},this._lexer.tokenize(e).every(e=>this._readCallback=this._readCallback(e)),n)throw n;return t}let s=(e,t)=>{null!==e?(this._callback(e),this._callback=zn):this._readCallback&&(this._readCallback=this._readCallback(t))};o&&(this._lexer.comments=!0,s=(e,t)=>{null!==e?(this._callback(e),this._callback=zn):this._readCallback&&("comment"===t.type?o(t.value):this._readCallback=this._readCallback(t))}),this._callback=r,this._lexer.tokenize(e,s)}}function zn(){}function qn(e,t){e._factory=t,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=t.namedNode(hn.rdf.first),e.RDF_REST=t.namedNode(hn.rdf.rest),e.RDF_NIL=t.namedNode(hn.rdf.nil),e.N3_FORALL=t.namedNode(hn.r.forAll),e.N3_FORSOME=t.namedNode(hn.r.forSome),e.ABBREVIATIONS={a:t.namedNode(hn.rdf.type),"=":t.namedNode(hn.owl.sameAs),">":t.namedNode(hn.log.implies),"<":t.namedNode(hn.log.isImpliedBy)},e.QUANTIFIERS_GRAPH=t.namedNode("urn:n3:quantifiers")}qn(Fn.prototype,kn);class $n extends a.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const t=new Fn(e);let n,r;const i={onQuad:(e,t)=>{e&&this.emit("error",e)||t&&this.push(t)},onPrefix:(e,t)=>{this.emit("prefix",e,t)}};e&&e.comments&&(i.onComment=e=>{this.emit("comment",e)}),t.parse({on:(e,t)=>{switch(e){case"data":n=t;break;case"end":r=t}}},i),this._transform=(e,t,r)=>{n(e),r()},this._flush=e=>{r(),e()}}import(e){return e.on("data",e=>{this.write(e)}),e.on("end",()=>{this.end()}),e.on("error",e=>{this.emit("error",e)}),this}}const Hn=class{constructor(e,{baseIRI:t="",factory:n=O,...r}={}){const i={blankNode:n.blankNode.bind(n),defaultGraph:n.defaultGraph.bind(n),literal:n.literal.bind(n),namedNode:n.namedNode.bind(n),quad:n.quad.bind(n),variable:n.variable.bind(n)},o=new $n({baseIRI:t,factory:i,...r});return e.pipe(o),f(o)}};const Vn=class extends tn{constructor(e){super(Hn,e)}};const Wn=class{constructor(e){const t=new a.Transform({objectMode:!0,transform:(e,t,n)=>{n(null,`${ee(e)}\n`)}});return e.pipe(t),f(t)}};const Gn=class extends tn{constructor(){super(Wn)}};M("http://www.w3.org/1999/02/22-rdf-syntax-ns#");M("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),M("http://www.w3.org/2001/XMLSchema#");a.Readable;class Jn extends Map{import(e,t,n){const r=this.get(e);return r?r.import(t,n):null}}const Kn=Jn;const Zn=class{constructor(e){this.stream=e,this.array=[]}push(e){this.array.push(e)}end(){this.stream.push(this.array),this.stream.push(null)}};const Qn=class{constructor(e){this.stream=e,this.first=!0,this.stream.push("[")}push(e){this.first?this.first=!1:this.stream.push(","),this.stream.push(JSON.stringify(e))}end(){this.stream.push("]"),this.stream.push(null)}};class Xn extends a.Readable{constructor(e,{encoding:t="object"}={}){if(super({objectMode:!0,read:()=>{}}),"object"===t&&(this.encoder=new Zn(this)),"string"===t&&(this.encoder=new Qn(this)),!this.encoder)throw new Error(`unknown encoding: ${t}`);e.on("data",e=>{const t={};let n=t;"DefaultGraph"!==e.graph.termType&&(t["@id"]=e.graph.value,t["@graph"]={},n=t["@graph"]),n["@id"]=Xn.subjectValue(e.subject),"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e.predicate.value?n["@type"]=Xn.subjectValue(e.object):n[e.predicate.value]=Xn.objectValue(e.object),this.encoder.push(t)}),e.on("end",()=>this.encoder.end()),e.on("error",e=>this.emit("error",e))}static subjectValue(e){return"BlankNode"===e.termType?"_:"+e.value:e.value}static objectValue(e){return"NamedNode"===e.termType?{"@id":e.value}:"BlankNode"===e.termType?{"@id":"_:"+e.value}:e.language?{"@language":e.language,"@value":e.value}:e.datatype&&"http://www.w3.org/2001/XMLSchema#string"!==e.datatype.value?{"@type":e.datatype.value,"@value":e.value}:e.value}}const Yn=Xn;const er=class extends tn{constructor(e){super(Yn,e)}};const tr=class extends er{constructor({...e}={}){super({...e,encoding:"string"})}};i(4841);a.Readable;var nr=i(5611);class rr extends nr.RdfXmlParser{constructor({factory:e,...t}={}){super({...t,dataFactory:e})}}const ir=rr,or={parsers:new Kn([["application/ld+json",new an],["application/trig",new Vn],["application/n-quads",new Vn],["application/n-triples",new Vn],["text/n3",new Vn],["text/turtle",new Vn],["application/rdf+xml",new ir]]),serializers:new Kn([["application/ld+json",new tr],["application/n-quads",new Gn],["application/n-triples",new Gn],["text/n3",new Gn],["text/turtle",new Gn]])};const sr=class{constructor({factory:e}){this.factory=e,this.parsers=new Kn,this.serializers=new Kn}import(e){if(e.parsers)for(const[t,n]of e.parsers)this.parsers.set(t,new n.constructor({factory:this.factory}));if(e.serializers)for(const[t,n]of e.serializers)this.serializers.set(t,new n.constructor({factory:this.factory}));return this}};const ar=class{init(){this.formats=new sr({factory:this})}clone(e){this.formats.import(e.formats)}};const lr=new s([gt,Rt,en,class extends ar{init(){super.init(),this.formats.import(or)}},st,m,j,z,Ae,Ie,Le,Pe],{bind:!0}),cr={init:function(e){ES.U.initServiceWorker();var t=ES.U?.getContentNode(document);t&&(ES.U.initButtons(),ES.U.setDocumentURL(e),ES.U.setWebExtensionURL(),ES.U.setDocumentString(),ES.U.initUser(),ES.U.initLocalStorage(),ES.U.initCurrentStylesheet(),ES.U.setDocRefType(),ES.U.showRefs(),ES.U.highlightItems(),ES.U.showAsTabs(),ES.U.initDocumentActions(),ES.U.showDocumentInfo(),ES.U.setDocumentMode(),ES.U.showFragment(),ES.U.initCopyToClipboard(),ES.U.initEditor(),ES.U.initMath(),ES.U.initSlideshow(),ES.U.monitorNetworkStatus())},DocumentAction:"",Button:{},DocumentURL:"",DocumentString:"",Resource:{},Inbox:{},Notification:{},Subscription:{},Activity:{},Lang:document.documentElement.lang,DocRefType:"",RefType:{LNCS:{InlineOpen:"[",InlineClose:"]"},ACM:{InlineOpen:"[",InlineClose:"]"}},VerifyCitation:!0,Stylesheets:[],User:{IRI:null,Role:null,UI:{},WebIdDelegate:null},ContributorRoles:["author","editor"],LocalDocument:"file:"==document.location.protocol,UseLocalStorage:!1,HttpTimeout:5e3,AutoSave:{Methods:["localStorage","http"],Timer:3e3,Items:{}},RequestCheck:{Timer:6e4},ActionMessage:{Timer:5e3},MessageLog:[],AvatarSize:48,CDATAStart:"//<![CDATA[",CDATAEnd:"//]]>",SortableList:!1,GraphViewerAvailable:!0,MathAvailable:"undefined"!=typeof MathJax,EditorEnabled:!1,ContentEditable:!1,WebExtensionEnabled:window.chrome&&chrome.runtime&&chrome.runtime.id||"undefined"!=typeof browser&&browser.runtime&&browser.runtime.id,WebExtension:"undefined"!=typeof browser?browser:window.chrome,Editor:{headings:["h1","h2","h3","h4","h5","h6"],regexEmptyHTMLTags:/<[^\/>][^>]*><\/[^>]+>/gim,mode:"social",Placeholder:{h1:"Title",h2:"Section title",h3:"Sub-section title",h4:"Sub-sub-section title",p:"Cogito, ergo sum."}},DOMNormalisation:{rdfaAttributes:["about","content","datatype","href","inlist","prefix","property","rel","resource","rev","src","typeof","vocab"],inlineElements:["span","progress","del","ins","data","datalist","mark","code","cite","sup","sub","a","time","em","strong","b","i","dfn","abbr","q","var","samp","kbd","bdi","math","mrow","mi","mo"],voidElements:["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"],selfClosing:["circle","ellipse","line","path","polygon","polyline","rect","stop","use"],skipAttributes:["aria-multiline","contenteditable","data-placeholder","draggable","role","spellcheck","style"],sortAttributes:!0,skipNodeWithClass:"do",skipNodeComment:!0,skipNodeWithId:["toc-nav"],classWithChildText:{class:".do.ref",element:"mark"},replaceClassItemWith:{source:["on-document-menu"],target:""},skipClassWithValue:"",skipEscapingDataBlockTypes:["text/turtle","application/ld+json","application/activity+json","application/n-triples","application/trig","text/n3"],removeWrapperSelector:".ProseMirror"},BeautifyOptions:{indent_size:2,end_with_newline:!0},ArticleNodeSelectors:["main > article","main","body"],SelectorSign:{"*":"\u{1f517}",aside:"|",audio:"\u{1f50a}",code:"#",dl:"\u261d","dl#document-annotation-service":"\u203b","dl#document-cited-by":"\u203b","dl#document-created":"\u{1f4c5}","dl#document-in-reply-to":"\u2baa","dl#document-identifier":"\u{1f6a9}","dl#document-inbox":"\u{1f4e5}","dl#document-latest-version":"\u223c","dl#document-language":"\u{1f5fa}","dl#document-license":"\u{1f33b}","dl#document-memento":"\u26f0","dl#document-modified":"\u{1f4c5}","dl#document-original":"\u2641","dl#document-predecessor-version":"\u227a","dl#document-published":"\u{1f4c5}","dl#document-rights":"\u{1f4dc}","dl#document-resource-state":"\u{1f64a}","dl#document-see-also":"\u{1f648}","dl#document-status":"\u{1f386}","dl#document-timemap":"\u231a","dl#document-type":"\u{1f331}",dfn:"\u{1f4c7}",figure:"\u2766",footer:"\u2e19",img:"\u{1f5bc}",nav:"\u261b",p:"\xb6",pre:"\u{1f5a9}",section:"\xa7","section#acknowledgements":"\u263a","section#conclusions":"\u2234","section#keywords":"\u{1f3f7}","section#references":"\u203b","section#related-work":"\u2318","section#results":"\u221e",table:"\u{1d11c}",video:"\u{1f39e}"},MotivationSign:{"oa:assessing":"\u272a","oa:bookmarking":"\u{1f516}","oa:commenting":"\u{1f5e8}","oa:describing":"\u203b","oa:highlighting":"#","oa:linking":"\u203b","oa:questioning":"?","oa:replying":"\u{1f4ac}","bookmark:Bookmark":"\u{1f516}"},ActionToMotivation:{approve:"oa:assessing",disapprove:"oa:assessing",specificity:"oa:questioning",bookmark:"oa:bookmarking",comment:"oa:replying",note:"oa:commenting",citation:"oa:linking",footnote:"oa:describing",reference:"oa:linking",semantics:"oa:classifying"},DocumentDoItems:["create-new-document","document-items","embed-data-entry","generate-feed","graph-view","memento-document","message-log","open-document","reply-to-resource","resource-browser","robustify-links","save-as-document","share-resource","source-view","user-identity-input"],DocumentItems:["authors","document-identifier","document-created","document-modified","document-published","document-repository","document-test-suite","document-original","document-memento","document-latest-version","document-latest-published-version","document-predecessor-version","document-timegate","document-timemap","document-derived-from","document-derived-on","document-editors","document-authors","document-language","document-license","document-rights","document-inbox","document-annotation-service","document-in-reply-to","document-type","document-resource-state","document-status","document-see-also","document-cited-by","document-policy","table-of-contents","list-of-figures","list-of-tables","list-of-abbreviations","list-of-concepts","list-of-quotations","table-of-requirements","table-of-advisements","abstract","categories-and-subject-descriptors","keywords","general-terms","list-of-additional-concepts","introduction"],ListOfStuff:{"table-of-contents":{label:"Contents",selector:"content",titleSelector:"h1"},"list-of-figures":{label:"Figures",selector:"figure",titleSelector:"figcaption"},"list-of-tables":{label:"Tables",selector:"table",titleSelector:"caption"},"list-of-abbreviations":{label:"Abbreviations",selector:"abbr",titleSelector:"title"},"list-of-quotations":{label:"Quotations",selector:"q",titleSelector:"cite"},"list-of-concepts":{label:"Concepts",selector:'[typeof~="skos:Concept"]',titleSelector:'[property~="skos:prefLabel"]'},"table-of-requirements":{label:"Requirements",selector:'[rel~="spec:requirement"]',titleSelector:'[property~="spec:statement"]'},"table-of-advisements":{label:"Advisements",selector:'[rel~="spec:advisement"]',titleSelector:'[property~="spec:statement"]'},references:{label:"References",selector:"cite a",titleSelector:"h2"}},CollectionItemsLimit:50,ContextLength:32,NotificationLicense:"https://creativecommons.org/publicdomain/zero/1.0/",License:{"https://creativecommons.org/publicdomain/zero/1.0/":{name:"CC0 1.0",description:"Creative Commons CC0 1.0 Universal"},"https://creativecommons.org/licenses/by/4.0/":{name:"CC BY 4.0",description:"Creative Commons Attribution 4.0 International"},"https://creativecommons.org/licenses/by-sa/4.0/":{name:"CC BY-SA 4.0",description:"Creative Commons Attribution-ShareAlike 4.0 International"},"https://creativecommons.org/licenses/by-nc/4.0/":{name:"CC BY-NC 4.0",description:"Creative Commons Attribution-NonCommercial 4.0 International"},"https://creativecommons.org/licenses/by-nd/4.0/":{name:"CC BY-ND 4.0",description:"Creative Commons Attribution-NoDerivatives 4.0 International"},"https://creativecommons.org/licenses/by-nc-sa/4.0/":{name:"CC BY-NC-SA 4.0",description:"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International"},"https://creativecommons.org/licenses/by-nc-nd/4.0/":{name:"CC BY-NC-ND 4.0",description:"Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International"}},ResourceType:{"http://schema.org/Article":{name:"Article",description:"An article, such as a news article or piece of investigative report."},"http://schema.org/BlogPosting":{name:"BlogPosting",description:"A blog post."},"http://schema.org/Course":{name:"Course",description:"A description of an educational course."},"http://schema.org/Guide":{name:"Guide",description:"Guide is a page or article that recommends specific products or services, or aspects of a thing for a user to consider."},"http://schema.org/NewsArticle":{name:"NewsArticle",description:"A NewsArticle is an article whose content reports news, or provides background context and supporting materials for understanding the news."},"http://schema.org/Recipe":{name:"Recipe",description:"A recipe."},"http://schema.org/Review":{name:"Review",description:"A review of an item - for example, of a restaurant, movie, or store."},"http://schema.org/ScholarlyArticle":{name:"ScholarlyArticle",description:"A scholarly article."},"http://purl.org/ontology/bibo/Slideshow":{name:"Slideshow",description:"A presentation of a series of slides, usually presented in front of an audience with written text and images."},"http://usefulinc.com/ns/doap#Specification":{name:"Specification",description:"A specification of a system's aspects, technical or otherwise."},"http://schema.org/TechArticle":{name:"TechArticle",description:"A technical article - Example: How-to (task) topics, step-by-step, procedural troubleshooting, specifications, etc."},"http://schema.org/Thesis":{name:"Thesis",description:"A thesis or dissertation document submitted in support of candidature for an academic degree or professional qualification."},"http://schema.org/Trip":{name:"Trip",description:"A trip or journey. An itinerary of visits to one or more places."}},PublicationStatus:{"http://purl.org/spar/pso/draft":{name:"Draft",description:"The status of a work (for example a document or a dataset) prior to completion and publication."},"http://purl.org/spar/pso/published":{name:"Published",description:"The status of material (for example a document or a dataset) that has been published, i.e. made available for people to access, read or use, either freely or for a purchase price or an access fee."}},Citation:{"http://purl.org/spar/cito/agreesWith":"agrees with","http://purl.org/spar/cito/cites":"cites","http://purl.org/spar/cito/citesAsAuthority":"cites as authority","http://purl.org/spar/cito/citesAsDataSource":"cites as data source","http://purl.org/spar/cito/citesAsEvidence":"cites as evidence","http://purl.org/spar/cito/citesAsMetadataDocument":"cites as metadata document","http://purl.org/spar/cito/citesAsPotentialSolution":"cites as potential solution","http://purl.org/spar/cito/citesAsRecommendedReading":"cites as potential reading","http://purl.org/spar/cito/citesAsRelated":"cites as related","http://purl.org/spar/cito/citesAsSourceDocument":"cites as source document","http://purl.org/spar/cito/citesForInformation":"cites for information","http://purl.org/spar/cito/compiles":"compiles","http://purl.org/spar/cito/confirms":"confirms","http://purl.org/spar/cito/containsAssertionFrom":"contains assertion from","http://purl.org/spar/cito/corrects":"corrects","http://purl.org/spar/cito/credits":"credits","http://purl.org/spar/cito/critiques":"critiques","http://purl.org/spar/cito/derides":"derides","http://purl.org/spar/cito/describes":"describes","http://purl.org/spar/cito/disagreesWith":"disagrees with","http://purl.org/spar/cito/discusses":"discusses","http://purl.org/spar/cito/disputes":"disputes","http://purl.org/spar/cito/documents":"documents","http://purl.org/spar/cito/extends":"extends","http://purl.org/spar/cito/includesExcerptFrom":"includes excerpt from","http://purl.org/spar/cito/includesQuotationFrom":"includes quotation from","http://purl.org/spar/cito/linksTo":"links to","http://purl.org/spar/cito/obtainsBackgroundFrom":"obtains background from","http://purl.org/spar/cito/obtainsSupportFrom":"obtains support from","http://purl.org/spar/cito/parodies":"parodies","http://purl.org/spar/cito/plagiarizes":"plagiarizes","http://purl.org/spar/cito/qualifies":"qualifies","http://purl.org/spar/cito/refutes":"refutes","http://purl.org/spar/cito/repliesTo":"replies to","http://purl.org/spar/cito/retracts":"retracts","http://purl.org/spar/cito/reviews":"reviews","http://purl.org/spar/cito/ridicules":"ridicules","http://purl.org/spar/cito/speculatesOn":"speculates on","http://purl.org/spar/cito/supports":"supports","http://purl.org/spar/cito/updates":"updates","http://purl.org/spar/cito/usesConclusionsFrom":"uses conclusions from","http://purl.org/spar/cito/usesDataFrom":"uses data from","http://purl.org/spar/cito/usesMethodIn":"uses method in"},SKOSClasses:{"http://www.w3.org/2004/02/skos/core#ConceptScheme":"Concept Scheme","http://www.w3.org/2004/02/skos/core#Collection":"Collection","http://www.w3.org/2004/02/skos/core#OrderedCollection":"Ordered Collection","http://www.w3.org/2004/02/skos/core#Concept":"Concept"},TestDescriptionReviewStatus:{"http://www.w3.org/2006/03/test-description#accepted":"the item has gone through a first review, which shows it as valid for further processing","http://www.w3.org/2006/03/test-description#approved":"the item has gone through the review process and was approved","http://www.w3.org/2006/03/test-description#assigned":"a more specific review of the item has been assigned to someone","http://www.w3.org/2006/03/test-description#onhold":"the item had already gone through the review process, but the results of the review need to be re-assessed due to new input","http://www.w3.org/2006/03/test-description#rejected":"the item has gone through the review process and was rejected","http://www.w3.org/2006/03/test-description#unreviewed":"the item has been proposed, but hasn't been reviewed (e.g. for completeness) yet"},Actor:{Type:{"http://purl.org/dc/terms/Agent":"Agent","http://schema.org/Person":"Person","http://www.w3.org/2006/vcard/ns#Group":"Group","http://www.w3.org/2006/vcard/ns#Individual":"Individual","http://www.w3.org/2006/vcard/ns#Organization":"Organization","http://www.w3.org/2006/vcard/ns#VCard":"VCard","http://xmlns.com/foaf/0.1/Agent":"Agent","http://xmlns.com/foaf/0.1/Group":"Group","http://xmlns.com/foaf/0.1/Organization":"Organization","http://xmlns.com/foaf/0.1/Person":"Person","https://www.w3.org/ns/activitystreams#Application":"Application","https://www.w3.org/ns/activitystreams#Group":"Group","https://www.w3.org/ns/activitystreams#Organization":"Organization","https://www.w3.org/ns/activitystreams#Person":"Person","https://www.w3.org/ns/activitystreams#Service":"Service","https://d-nb.info/standards/elementset/gnd#DifferentiatedPerson":"Person"},Property:{"http://purl.org/dc/terms/creator":"creator","http://purl.org/dc/terms/publisher":"publisher","http://schema.org/author":"author","http://schema.org/contributor":"contributor","http://schema.org/creator":"creator","http://schema.org/editor":"editor","http://schema.org/performer":"performer","http://schema.org/publisher":"publisher","http://xmlns.com/foaf/0.1/knows":"knows","http://xmlns.com/foaf/0.1/maker":"maker","https://www.w3.org/ns/activitystreams#actor":"actor"}},Event:{Property:{"http://schema.org/subEvent":"sub event","http://schema.org/superEvent":"super event","http://schema.org/startDate":"start date","http://schema.org/endDate":"end date","http://schema.org/performer":"performer"}},AccessContext:{Share:{"http://www.w3.org/ns/auth/acl#Read":"Viewer","http://www.w3.org/ns/auth/acl#Write":"Editor","http://www.w3.org/ns/auth/acl#Control":"Owner"}},ActivitiesObjectTypes:["https://www.w3.org/ns/activitystreams#Activity","https://www.w3.org/ns/activitystreams#Like","https://www.w3.org/ns/activitystreams#Dislike","https://www.w3.org/ns/activitystreams#Article","https://www.w3.org/ns/activitystreams#Note","https://www.w3.org/ns/activitystreams#Document","http://www.w3.org/ns/oa#Annotation","http://www.w3.org/2002/01/bookmark#Bookmark"],ActionActivityIndex:{comment:["http://www.w3.org/ns/oa#Annotation","https://www.w3.org/ns/activitystreams#Note","https://www.w3.org/ns/activitystreams#Article","https://www.w3.org/ns/activitystreams#Document","http://schema.org/CreativeWork"],approve:["http://www.w3.org/ns/oa#Annotation","https://www.w3.org/ns/activitystreams#Like","https://www.w3.org/ns/activitystreams#Activity","http://schema.org/CreativeWork"],disapprove:["http://www.w3.org/ns/oa#Annotation","https://www.w3.org/ns/activitystreams#Dislike","https://www.w3.org/ns/activitystreams#Activity","http://schema.org/CreativeWork"],specificity:["http://www.w3.org/ns/oa#Annotation","https://www.w3.org/ns/activitystreams#Note","https://www.w3.org/ns/activitystreams#Article","https://www.w3.org/ns/activitystreams#Document","http://schema.org/CreativeWork"],bookmark:["http://www.w3.org/ns/oa#Annotation","http://www.w3.org/2002/01/bookmark#Bookmark","https://www.w3.org/ns/activitystreams#Activity","http://schema.org/CreativeWork"]},CollectionTypes:["https://www.w3.org/ns/activitystreams#Collection","https://www.w3.org/ns/activitystreams#OrderedCollection","http://www.w3.org/ns/ldp#Container"],STRIDEThreatTypes:{S:{uri:"http://www.wikidata.org/entity/Q11081100",name:"Spoofing",related:["http://www.grsu.by/net/SecurityPatternCatalogNaiveSchema#STRIDE_Spoofing","https://w3id.org/dpv/risk#Spoofing","https://w3id.org/dpv/risk#IdentityFraud","https://w3id.org/dpv/risk#IdentityTheft","https://w3id.org/dpv/risk#PhishingScam"]},T:{uri:"http://www.wikidata.org/entity/Q7681776",name:"Tampering",related:["http://www.grsu.by/net/SecurityPatternCatalogNaiveSchema#STRIDE_Tampering","https://w3id.org/dpv/risk#UnauthorisedDataModification","https://w3id.org/dpv/risk#UnauthorisedCodeModification","https://w3id.org/dpv/risk#DataCorruption","https://w3id.org/dpv/risk#IntegrityBreach"]},R:{uri:"http://www.wikidata.org/entity/Q1327773",name:"Repudiation",related:["http://www.grsu.by/net/SecurityPatternCatalogNaiveSchema#STRIDE_Repudiation","https://w3id.org/dpv/risk#AuthorisationFailure","https://w3id.org/dpv/risk#LackOfSystemTransparency","https://w3id.org/dpv/risk#LoseTrust","https://w3id.org/dpv/risk#LoggingControl"]},I:{uri:"http://www.wikidata.org/entity/Q2775060",name:"Information disclosure",related:["http://www.grsu.by/net/SecurityPatternCatalogNaiveSchema#STRIDE_Information_Disclosure","https://w3id.org/dpv/risk#UnauthorisedInformationDisclosure","https://w3id.org/dpv/risk#UnauthorisedDataDisclosure","https://w3id.org/dpv/risk#UnwantedDisclosureData","https://w3id.org/dpv/risk#ConfidentialityBreach"]},D:{uri:"http://www.wikidata.org/entity/Q131406",name:"Denial of service",related:["http://www.grsu.by/net/SecurityPatternCatalogNaiveSchema#STRIDE_Denial_of_Service","https://w3id.org/dpv/risk#DenialServiceAttack","https://w3id.org/dpv/risk#AvailabilityBreach"]},E:{uri:"http://www.wikidata.org/entity/Q1856893",name:"Elevation of privilege",related:["http://www.grsu.by/net/SecurityPatternCatalogNaiveSchema#STRIDE_Elevation_of_Privilege","https://w3id.org/dpv/risk#UnauthorisedDataAccess","https://w3id.org/dpv/risk#UnauthorisedSystemAccess","https://w3id.org/dpv/risk#UnauthorisedCodeAccess"]}},MediaTypes:{RDF:["text/turtle","application/ld+json","application/activity+json","text/html","image/svg+xml","application/rdf+xml"],Binary:["image/png","image/jpeg","image/gif","image/x-icon"],Feed:["application/atom+xml","application/rss+xml"],Markup:["text/html","image/svg+xml","text/markdown"],MultiMediaType:["audio","image","video"],Geo:["application/gpx+xml"]},Prefixes:{xsd:"http://www.w3.org/2001/XMLSchema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",as:"https://www.w3.org/ns/activitystreams#",oa:"http://www.w3.org/ns/oa#",schema:"http://schema.org/",cito:"http://purl.org/spar/cito/","qudt-unit":"http://qudt.org/vocab/unit#",ex:"http://example.org/"},ns:{"sdmx-dimension":lr.namespace("http://purl.org/linked-data/sdmx/2009/dimension"),"sdmx-measure":lr.namespace("http://purl.org/linked-data/sdmx/2009/measure"),"test-description":lr.namespace("http://www.w3.org/2006/03/test-description#"),acl:lr.namespace("http://www.w3.org/ns/auth/acl#"),as:lr.namespace("https://www.w3.org/ns/activitystreams#"),bibo:lr.namespace("http://purl.org/ontology/bibo/"),bookmark:lr.namespace("http://www.w3.org/2002/01/bookmark#"),cc:lr.namespace("http://creativecommons.org/ns#"),cert:lr.namespace("http://www.w3.org/ns/auth/cert#"),cito:lr.namespace("http://purl.org/spar/cito/"),dbr:lr.namespace("http://dbpedia.org/resource/"),dbp:lr.namespace("http://dbpedia.org/property/"),dcat:lr.namespace("http://www.w3.org/ns/dcat#"),dcelements:lr.namespace("http://purl.org/dc/elements/"),dcterms:lr.namespace("http://purl.org/dc/terms/"),dctypes:lr.namespace("http://purl.org/dc/dcmitype/"),deo:lr.namespace("http://purl.org/spar/deo/"),dio:lr.namespace("https://w3id.org/dio#"),doap:lr.namespace("http://usefulinc.com/ns/doap#"),doc:lr.namespace("http://www.w3.org/2000/10/swap/pim/doc#"),doco:lr.namespace("http://purl.org/spar/doco/"),dpv:lr.namespace("https://w3id.org/dpv#"),fabio:lr.namespace("http://purl.org/spar/fabio/"),foaf:lr.namespace("http://xmlns.com/foaf/0.1/"),ldp:lr.namespace("http://www.w3.org/ns/ldp#"),mem:lr.namespace("http://mementoweb.org/ns#"),notify:lr.namespace("http://www.w3.org/ns/solid/notifications#"),oa:lr.namespace("http://www.w3.org/ns/oa#"),odrl:lr.namespace("http://www.w3.org/ns/odrl/2/"),opmw:lr.namespace("http://www.opmw.org/ontology/"),owl:lr.namespace("http://www.w3.org/2002/07/owl#"),pim:lr.namespace("http://www.w3.org/ns/pim/space#"),prov:lr.namespace("http://www.w3.org/ns/prov#"),pso:lr.namespace("http://purl.org/spar/pso/"),qb:lr.namespace("http://purl.org/linked-data/cube#"),qudt:lr.namespace("http://qudt.org/vocab/unit#"),rdf:lr.namespace("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rdfa:lr.namespace(" http://www.w3.org/ns/rdfa#"),rdfs:lr.namespace("http://www.w3.org/2000/01/rdf-schema#"),rel:lr.namespace("https://www.w3.org/ns/iana/link-relations/relation#"),risk:lr.namespace("https://w3id.org/dpv/risk#"),rsa:lr.namespace("http://www.w3.org/ns/auth/rsa#"),schema:lr.namespace("http://schema.org/"),sio:lr.namespace("http://semanticscience.org/resource/"),sioc:lr.namespace("http://rdfs.org/sioc/ns#"),skos:lr.namespace("http://www.w3.org/2004/02/skos/core#"),skosxl:lr.namespace("http://www.w3.org/2008/05/skos-xl#"),solid:lr.namespace("http://www.w3.org/ns/solid/terms#"),spec:lr.namespace("http://www.w3.org/ns/spec#"),tech:lr.namespace("https://w3id.org/dpv/tech"),vcard:lr.namespace("http://www.w3.org/2006/vcard/ns#"),void:lr.namespace("http://rdfs.org/ns/void#"),wgs:lr.namespace("http://www.w3.org/2003/01/geo/wgs84_pos#"),xhv:lr.namespace("http://www.w3.org/1999/xhtml/vocab#"),xsd:lr.namespace("http://www.w3.org/2001/XMLSchema#")},ChangeClasses:{"http://www.w3.org/ns/spec#ChangeClass1":"1","http://www.w3.org/ns/spec#ChangeClass2":"2","http://www.w3.org/ns/spec#ChangeClass3":"3","http://www.w3.org/ns/spec#ChangeClass4":"4","http://www.w3.org/ns/spec#ChangeClass5":"5"},SecretAgentNames:["Abraham Lincoln","Admiral Awesome","Anonymous Coward","Believe it or not","Creative Monkey","Senegoid","Dog from the Web","Ekrub","Elegant Banana","Foo Bar","Lbmit","Lunatic Scholar","NahuLcm","Noslen","Okie Dokie","Samurai Cat","Vegan Superstar"],RefAreas:{AF:"Afghanistan",A9:"Africa",AL:"Albania",DZ:"Algeria",AS:"American Samoa",L5:"Andean Region",AD:"Andorra",AO:"Angola",AG:"Antigua and Barbuda","1A":"Arab World",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas, The",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cabo Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",S3:"Caribbean small states",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",JG:"Channel Islands",CL:"Chile",CN:"China",CO:"Colombia",KM:"Comoros",CD:"Congo, Dem. Rep.",CG:"Congo, Rep.",CR:"Costa Rica",CI:"Cote d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curacao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",Z4:"East Asia & Pacific (all income levels)","4E":"East Asia & Pacific (developing only)",C4:"East Asia and the Pacific (IFC classification)",EC:"Ecuador",EG:"Egypt, Arab Rep.",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",XC:"Euro area",Z7:"Europe & Central Asia (all income levels)","7E":"Europe & Central Asia (developing only)",C5:"Europe and Central Asia (IFC classification)",EU:"European Union",FO:"Faeroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",PF:"French Polynesia",GA:"Gabon",GM:"Gambia, The",GE:"Georgia",DE:"Germany",GH:"Ghana",GR:"Greece",GL:"Greenland",GD:"Grenada",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",XE:"Heavily indebted poor countries (HIPC)",XD:"High income",XS:"High income: OECD",XR:"High income: nonOECD",HN:"Honduras",HK:"Hong Kong SAR, China",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Rep.",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Dem. Rep.",KR:"Korea, Rep.",KV:"Kosovo",KW:"Kuwait",KG:"Kyrgyz Republic",LA:"Lao PDR",ZJ:"Latin America & Caribbean (all income levels)",XJ:"Latin America & Caribbean (developing only)",L4:"Latin America and the Caribbean",C6:"Latin America and the Caribbean (IFC classification)",LV:"Latvia",XL:"Least developed countries: UN classification",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",XO:"Low & middle income",XM:"Low income",XN:"Lower middle income",LU:"Luxembourg",MO:"Macao SAR, China",MK:"Macedonia, FYR",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MR:"Mauritania",MU:"Mauritius",MX:"Mexico",L6:"Mexico and Central America",FM:"Micronesia, Fed. Sts.",ZQ:"Middle East & North Africa (all income levels)",XQ:"Middle East & North Africa (developing only)",C7:"Middle East and North Africa (IFC classification)",XP:"Middle income",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",M2:"North Africa",XU:"North America",MP:"Northern Mariana Islands",NO:"Norway",XY:"Not classified",OE:"OECD members",OM:"Oman",S4:"Other small states",S2:"Pacific island small states",PK:"Pakistan",PW:"Palau",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovak Republic",SI:"Slovenia",S1:"Small states",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa","8S":"South Asia",C8:"South Asia (IFC classification)",SS:"South Sudan",L7:"Southern Cone Extended",ES:"Spain",LK:"Sri Lanka",KN:"St. Kitts and Nevis",LC:"St. Lucia",MF:"St. Martin (French part)",VC:"St. Vincent and the Grenadines",C9:"Sub-Saharan Africa (IFC classification)",ZG:"Sub-Saharan Africa (all income levels)",ZF:"Sub-Saharan Africa (developing only)",A4:"Sub-Saharan Africa excluding South Africa",A5:"Sub-Saharan Africa excluding South Africa and Nigeria",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",XT:"Upper middle income",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, RB",VN:"Vietnam",VI:"Virgin Islands (U.S.)",PS:"West Bank and Gaza","1W":"World",YE:"Yemen, Rep.",ZM:"Zambia",ZW:"Zimbabwe"},Languages:{ab:"\u0430\u04a7\u0441\u0443\u0430",aa:"Afaraf",af:"Afrikaans",ak:"Akan",sq:"Shqip",am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",an:"Aragon\xe9s",hy:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",as:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",av:"A\u0432\u0430\u0440",ae:"Avesta",ay:"Aymar",az:"Az\u0259rbaycanca",bm:"Bamanankan",ba:"\u0431\u0430\u0448\u04a1\u043e\u0440\u0442",eu:"Euskara",be:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",bn:"\u09ac\u09be\u0982\u09b2\u09be",bh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",bi:"Bislama",bs:"Bosanski",br:"Brezhoneg",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",my:"\u1017\u1019\u102c\u1005\u102c",ca:"Catal\xe0",ch:"Chamoru",ce:"\u043d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442",ny:"chiChe\u0175a",zh:"\u4e2d\u6587",cv:"\u0447\u04d1\u0432\u0430\u0448 \u0447\u04d7\u043b\u0445\u0438",kw:"Kernewek",co:"Corsu",cr:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",hr:"Hrvatski",cs:"\u010ce\u0161tina",da:"Dansk",dv:"\u078b\u07a8\u0788\u07ac\u0780\u07a8",nl:"Nederlands",en:"English",eo:"Esperanto",et:"Eesti",ee:"E\u028begbe",fo:"F\xf8royskt",fj:"Vosa Vakaviti",fi:"Suomi",fr:"Fran\xe7ais",ff:"Fulfulde",gl:"Galego",ka:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",gn:"Ava\xf1e\u1ebd",gu:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",ht:"Krey\xf2l ayisyen",ha:"Hausa, \u0647\u064e\u0648\u064f\u0633\u064e",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hz:"Otjiherero",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",ho:"Hiri Motu",hu:"Magyar",ia:"Interlingua",id:"Bahasa Indonesia",ie:"Interlingue",ga:"Gaeilge",ig:"As\u1ee5s\u1ee5 Igbo",ik:"I\xf1upiaq",io:"Ido",is:"\xcdslenska",it:"Italiano",iu:"\u1403\u14c4\u1483\u144e\u1450\u1466",ja:"\u65e5\u672c\u8a9e",jv:"Basa Jawa",kl:"Kalaallisut",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",kr:"Kanuri",ks:"\u0915\u0936\u094d\u092e\u0940\u0930\u0940",kk:"\u049a\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456",km:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",ki:"G\u0129k\u0169y\u0169",rw:"Ikinyarwanda",ky:"\u043a\u044b\u0440\u0433\u044b\u0437",kv:"\u043a\u043e\u043c\u0438 \u043a\u044b\u0432",kg:"KiKongo",ko:"\ud55c\uad6d\uc5b4",ku:"Kurd\xee",kj:"Kuanyama",la:"Latina",lb:"L\xebtzebuergesch",lg:"Luganda",li:"Limburgs",ln:"Ling\xe1la",lo:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",lt:"Lietuvi\u0173",lu:"Luba-Katanga",lv:"Latvie\u0161u",gv:"Gaelg",mk:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",mg:"Malagasy",ms:"Bahasa Melayu",ml:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",mt:"Malti",mi:"te reo M\u0101ori",mr:"\u092e\u0930\u093e\u0920\u0940",mh:"Kajin M\u0327aje\u013c",mn:"\u043c\u043e\u043d\u0433\u043e\u043b",na:"Naoero",nv:"Din\xe9 bizaad",nb:"Norsk bokm\xe5l",nd:"isiNdebele",ne:"\u0928\u0947\u092a\u093e\u0932\u0940",ng:"Owambo",nn:"Nynorsk",no:"Norsk",ii:"Sichuan Yi",nr:"isiNdebele",oc:"Occitan",oj:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",cu:"\u0421\u043b\u043e\u0432\u0463\u043d\u044c\u0441\u043a\u044a",om:"Afaan Oromoo",or:"\u0b13\u0b21\u0b3c\u0b3f\u0b06",os:"\u0438\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",pa:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",pi:"\u092a\u093e\u0934\u093f",fa:"\u0641\u0627\u0631\u0633\u06cc",pl:"Polski",ps:"\u067e\u069a\u062a\u0648",pt:"Portugu\xeas",qu:"Runa Simi",rm:"Rumantsch",rn:"kiRundi",ro:"Rom\xe2n\u0103",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",sa:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",sc:"sardu",sd:"\u0938\u093f\u0928\u094d\u0927\u0940",se:"Davvis\xe1megiella",sm:"Gagana Samoa",sg:"S\xe4ng\xf6",sr:"\u0441\u0440\u043f\u0441\u043a\u0438",gd:"G\xe0idhlig",sn:"chiShona",si:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",sk:"sloven\u010dina",sl:"sloven\u0161\u010dina",so:"Soomaaliga",st:"Sesotho",es:"Espa\xf1ol",su:"Basa Sunda",sw:"Kiswahili",ss:"SiSwati",sv:"Svenska",ta:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",te:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",tg:"\u0442\u043e\u04b7\u0438\u043a\u04e3",th:"\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",bo:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",tk:"T\xfcrkmen",tl:"Tagalog",tn:"Setswana",to:"faka Tonga",tr:"T\xfcrk\xe7e",ts:"Xitsonga",tt:"\u0442\u0430\u0442\u0430\u0440\u0447\u0430",tw:"Twi",ty:"Reo Tahiti",ug:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5\u200e",uk:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",ur:"\u0627\u0631\u062f\u0648",uz:"O\u2018zbek",ve:"Tshiven\u1e13a",vi:"Ti\u1ebfng Vi\u1ec7t",vo:"Volap\xfck",wa:"Walon",cy:"Cymraeg",wo:"Wollof",fy:"Frysk",xh:"IsiXhosa",yi:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",yo:"Yor\xf9b\xe1",za:"Sa\u026f cue\u014b\u0185"}},{entries:ur,setPrototypeOf:dr,isFrozen:hr,getPrototypeOf:pr,getOwnPropertyDescriptor:fr}=Object;let{freeze:mr,seal:gr,create:vr}=Object,{apply:yr,construct:br}="undefined"!=typeof Reflect&&Reflect;mr||(mr=function(e){return e}),gr||(gr=function(e){return e}),yr||(yr=function(e,t,n){return e.apply(t,n)}),br||(br=function(e,t){return new e(...t)});const wr=Mr(Array.prototype.forEach),_r=Mr(Array.prototype.lastIndexOf),xr=Mr(Array.prototype.pop),Sr=Mr(Array.prototype.push),Cr=Mr(Array.prototype.splice),kr=Mr(String.prototype.toLowerCase),Er=Mr(String.prototype.toString),Ar=Mr(String.prototype.match),Tr=Mr(String.prototype.replace),Ir=Mr(String.prototype.indexOf),Rr=Mr(String.prototype.trim),Lr=Mr(Object.prototype.hasOwnProperty),Nr=Mr(RegExp.prototype.test),Or=(Dr=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return br(Dr,t)});var Dr;function Mr(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return yr(e,t,r)}}function Pr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kr;dr&&dr(e,null);let r=t.length;for(;r--;){let i=t[r];if("string"==typeof i){const e=n(i);e!==i&&(hr(t)||(t[r]=e),i=e)}e[i]=!0}return e}function jr(e){for(let t=0;t<e.length;t++){Lr(e,t)||(e[t]=null)}return e}function Ur(e){const t=vr(null);for(const[n,r]of ur(e)){Lr(e,n)&&(Array.isArray(r)?t[n]=jr(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=Ur(r):t[n]=r)}return t}function Br(e,t){for(;null!==e;){const n=fr(e,t);if(n){if(n.get)return Mr(n.get);if("function"==typeof n.value)return Mr(n.value)}e=pr(e)}return function(){return null}}const Fr=mr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zr=mr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qr=mr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),$r=mr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hr=mr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Vr=mr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Wr=mr(["#text"]),Gr=mr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jr=mr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Kr=mr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zr=mr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Qr=gr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xr=gr(/<%[\w\W]*|[\w\W]*%>/gm),Yr=gr(/\$\{[\w\W]*/gm),ei=gr(/^data-[\-\w.\u00B7-\uFFFF]+$/),ti=gr(/^aria-[\-\w]+$/),ni=gr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ri=gr(/^(?:\w+script|data):/i),ii=gr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),oi=gr(/^html$/i),si=gr(/^[a-z][.\w]*(-[.\w]+)+$/i);var ai=Object.freeze({__proto__:null,ARIA_ATTR:ti,ATTR_WHITESPACE:ii,CUSTOM_ELEMENT:si,DATA_ATTR:ei,DOCTYPE_NAME:oi,ERB_EXPR:Xr,IS_ALLOWED_URI:ni,IS_SCRIPT_OR_DATA:ri,MUSTACHE_EXPR:Qr,TMPLIT_EXPR:Yr});const li=1,ci=3,ui=7,di=8,hi=9,pi=function(){return"undefined"==typeof window?null:window};var fi=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi();const n=t=>e(t);if(n.version="3.2.6",n.removed=[],!t||!t.document||t.document.nodeType!==hi||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const i=r,o=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:f}=t,m=c.prototype,g=Br(m,"cloneNode"),v=Br(m,"remove"),y=Br(m,"nextSibling"),b=Br(m,"childNodes"),w=Br(m,"parentNode");if("function"==typeof a){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let _,x="";const{implementation:S,createNodeIterator:C,createDocumentFragment:k,getElementsByTagName:E}=r,{importNode:A}=i;let T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof ur&&"function"==typeof w&&S&&void 0!==S.createHTMLDocument;const{MUSTACHE_EXPR:I,ERB_EXPR:R,TMPLIT_EXPR:L,DATA_ATTR:N,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:P}=ai;let{IS_ALLOWED_URI:j}=ai,U=null;const B=Pr({},[...Fr,...zr,...qr,...Hr,...Wr]);let F=null;const z=Pr({},[...Gr,...Jr,...Kr,...Zr]);let q=Object.seal(vr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$=null,H=null,V=!0,W=!0,G=!1,J=!0,K=!1,Z=!0,Q=!1,X=!1,Y=!1,ee=!1,te=!1,ne=!1,re=!0,ie=!1,oe=!0,se=!1,ae={},le=null;const ce=Pr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const de=Pr({},["audio","video","img","source","image","track"]);let he=null;const pe=Pr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",me="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let ve=ge,ye=!1,be=null;const we=Pr({},[fe,me,ge],Er);let _e=Pr({},["mi","mo","mn","ms","mtext"]),xe=Pr({},["annotation-xml"]);const Se=Pr({},["title","style","font","a","script"]);let Ce=null;const ke=["application/xhtml+xml","text/html"];let Ee=null,Ae=null;const Te=r.createElement("form"),Ie=function(e){return e instanceof RegExp||e instanceof Function},Re=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ae||Ae!==e){if(e&&"object"==typeof e||(e={}),e=Ur(e),Ce=-1===ke.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Ee="application/xhtml+xml"===Ce?Er:kr,U=Lr(e,"ALLOWED_TAGS")?Pr({},e.ALLOWED_TAGS,Ee):B,F=Lr(e,"ALLOWED_ATTR")?Pr({},e.ALLOWED_ATTR,Ee):z,be=Lr(e,"ALLOWED_NAMESPACES")?Pr({},e.ALLOWED_NAMESPACES,Er):we,he=Lr(e,"ADD_URI_SAFE_ATTR")?Pr(Ur(pe),e.ADD_URI_SAFE_ATTR,Ee):pe,ue=Lr(e,"ADD_DATA_URI_TAGS")?Pr(Ur(de),e.ADD_DATA_URI_TAGS,Ee):de,le=Lr(e,"FORBID_CONTENTS")?Pr({},e.FORBID_CONTENTS,Ee):ce,$=Lr(e,"FORBID_TAGS")?Pr({},e.FORBID_TAGS,Ee):Ur({}),H=Lr(e,"FORBID_ATTR")?Pr({},e.FORBID_ATTR,Ee):Ur({}),ae=!!Lr(e,"USE_PROFILES")&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,G=e.ALLOW_UNKNOWN_PROTOCOLS||!1,J=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,Z=!1!==e.SAFE_FOR_XML,Q=e.WHOLE_DOCUMENT||!1,ee=e.RETURN_DOM||!1,te=e.RETURN_DOM_FRAGMENT||!1,ne=e.RETURN_TRUSTED_TYPE||!1,Y=e.FORCE_BODY||!1,re=!1!==e.SANITIZE_DOM,ie=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,j=e.ALLOWED_URI_REGEXP||ni,ve=e.NAMESPACE||ge,_e=e.MATHML_TEXT_INTEGRATION_POINTS||_e,xe=e.HTML_INTEGRATION_POINTS||xe,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Ie(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Ie(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(W=!1),te&&(ee=!0),ae&&(U=Pr({},Wr),F=[],!0===ae.html&&(Pr(U,Fr),Pr(F,Gr)),!0===ae.svg&&(Pr(U,zr),Pr(F,Jr),Pr(F,Zr)),!0===ae.svgFilters&&(Pr(U,qr),Pr(F,Jr),Pr(F,Zr)),!0===ae.mathMl&&(Pr(U,Hr),Pr(F,Kr),Pr(F,Zr))),e.ADD_TAGS&&(U===B&&(U=Ur(U)),Pr(U,e.ADD_TAGS,Ee)),e.ADD_ATTR&&(F===z&&(F=Ur(F)),Pr(F,e.ADD_ATTR,Ee)),e.ADD_URI_SAFE_ATTR&&Pr(he,e.ADD_URI_SAFE_ATTR,Ee),e.FORBID_CONTENTS&&(le===ce&&(le=Ur(le)),Pr(le,e.FORBID_CONTENTS,Ee)),oe&&(U["#text"]=!0),Q&&Pr(U,["html","head","body"]),U.table&&(Pr(U,["tbody"]),delete $.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Or('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Or('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=e.TRUSTED_TYPES_POLICY,x=_.createHTML("")}else void 0===_&&(_=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(f,o)),null!==_&&"string"==typeof x&&(x=_.createHTML(""));mr&&mr(e),Ae=e}},Le=Pr({},[...zr,...qr,...$r]),Ne=Pr({},[...Hr,...Vr]),Oe=function(e){Sr(n.removed,{element:e});try{w(e).removeChild(e)}catch(t){v(e)}},De=function(e,t){try{Sr(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){Sr(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ee||te)try{Oe(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},Me=function(e){let t=null,n=null;if(Y)e="<remove></remove>"+e;else{const t=Ar(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ce&&ve===ge&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=_?_.createHTML(e):e;if(ve===ge)try{t=(new p).parseFromString(i,Ce)}catch(e){}if(!t||!t.documentElement){t=S.createDocument(ve,"template",null);try{t.documentElement.innerHTML=ye?x:i}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),ve===ge?E.call(t,Q?"html":"body")[0]:Q?t.documentElement:o},Pe=function(e){return C.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},je=function(e){return e instanceof h&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Ue=function(e){return"function"==typeof l&&e instanceof l};function Be(e,t,r){wr(e,e=>{e.call(n,t,r,Ae)})}const Fe=function(e){let t=null;if(Be(T.beforeSanitizeElements,e,null),je(e))return Oe(e),!0;const r=Ee(e.nodeName);if(Be(T.uponSanitizeElement,e,{tagName:r,allowedTags:U}),Z&&e.hasChildNodes()&&!Ue(e.firstElementChild)&&Nr(/<[/\w!]/g,e.innerHTML)&&Nr(/<[/\w!]/g,e.textContent))return Oe(e),!0;if(e.nodeType===ui)return Oe(e),!0;if(Z&&e.nodeType===di&&Nr(/<[/\w]/g,e.data))return Oe(e),!0;if(!U[r]||$[r]){if(!$[r]&&qe(r)){if(q.tagNameCheck instanceof RegExp&&Nr(q.tagNameCheck,r))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(r))return!1}if(oe&&!le[r]){const t=w(e)||e.parentNode,n=b(e)||e.childNodes;if(n&&t){for(let r=n.length-1;r>=0;--r){const i=g(n[r],!0);i.__removalCount=(e.__removalCount||0)+1,t.insertBefore(i,y(e))}}}return Oe(e),!0}return e instanceof c&&!function(e){let t=w(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=kr(e.tagName),r=kr(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===me?t.namespaceURI===ge?"svg"===n:t.namespaceURI===fe?"svg"===n&&("annotation-xml"===r||_e[r]):Boolean(Le[n]):e.namespaceURI===fe?t.namespaceURI===ge?"math"===n:t.namespaceURI===me?"math"===n&&xe[r]:Boolean(Ne[n]):e.namespaceURI===ge?!(t.namespaceURI===me&&!xe[r])&&!(t.namespaceURI===fe&&!_e[r])&&!Ne[n]&&(Se[n]||!Le[n]):!("application/xhtml+xml"!==Ce||!be[e.namespaceURI]))}(e)?(Oe(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!Nr(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&e.nodeType===ci&&(t=e.textContent,wr([I,R,L],e=>{t=Tr(t,e," ")}),e.textContent!==t&&(Sr(n.removed,{element:e.cloneNode()}),e.textContent=t)),Be(T.afterSanitizeElements,e,null),!1):(Oe(e),!0)},ze=function(e,t,n){if(re&&("id"===t||"name"===t)&&(n in r||n in Te))return!1;if(W&&!H[t]&&Nr(N,t));else if(V&&Nr(O,t));else if(!F[t]||H[t]){if(!(qe(e)&&(q.tagNameCheck instanceof RegExp&&Nr(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&Nr(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Nr(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(he[t]);else if(Nr(j,Tr(n,M,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Ir(n,"data:")||!ue[e]){if(G&&!Nr(D,Tr(n,M,"")));else if(n)return!1}else;return!0},qe=function(e){return"annotation-xml"!==e&&Ar(e,P)},$e=function(e){Be(T.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||je(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F,forceKeepAttr:void 0};let i=t.length;for(;i--;){const o=t[i],{name:s,namespaceURI:a,value:l}=o,c=Ee(s),u=l;let d="value"===s?u:Rr(u);if(r.attrName=c,r.attrValue=d,r.keepAttr=!0,r.forceKeepAttr=void 0,Be(T.uponSanitizeAttribute,e,r),d=r.attrValue,!ie||"id"!==c&&"name"!==c||(De(s,e),d="user-content-"+d),Z&&Nr(/((--!?|])>)|<\/(style|title)/i,d)){De(s,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){De(s,e);continue}if(!J&&Nr(/\/>/i,d)){De(s,e);continue}K&&wr([I,R,L],e=>{d=Tr(d,e," ")});const h=Ee(e.nodeName);if(ze(h,c,d)){if(_&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(a);else switch(f.getAttributeType(h,c)){case"TrustedHTML":d=_.createHTML(d);break;case"TrustedScriptURL":d=_.createScriptURL(d)}if(d!==u)try{a?e.setAttributeNS(a,s,d):e.setAttribute(s,d),je(e)?Oe(e):xr(n.removed)}catch(t){De(s,e)}}else De(s,e)}Be(T.afterSanitizeAttributes,e,null)},He=function e(t){let n=null;const r=Pe(t);for(Be(T.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)Be(T.uponSanitizeShadowNode,n,null),Fe(n),$e(n),n.content instanceof s&&e(n.content);Be(T.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,a=null,c=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Ue(e)){if("function"!=typeof e.toString)throw Or("toString is not a function");if("string"!=typeof(e=e.toString()))throw Or("dirty is not a string, aborting")}if(!n.isSupported)return e;if(X||Re(t),n.removed=[],"string"==typeof e&&(se=!1),se){if(e.nodeName){const t=Ee(e.nodeName);if(!U[t]||$[t])throw Or("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)r=Me("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),o.nodeType===li&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!ee&&!K&&!Q&&-1===e.indexOf("<"))return _&&ne?_.createHTML(e):e;if(r=Me(e),!r)return ee?null:ne?x:""}r&&Y&&Oe(r.firstChild);const u=Pe(se?e:r);for(;a=u.nextNode();)Fe(a),$e(a),a.content instanceof s&&He(a.content);if(se)return e;if(ee){if(te)for(c=k.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(F.shadowroot||F.shadowrootmode)&&(c=A.call(i,c,!0)),c}let d=Q?r.outerHTML:r.innerHTML;return Q&&U["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Nr(oi,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),K&&wr([I,R,L],e=>{d=Tr(d,e," ")}),_&&ne?_.createHTML(d):d},n.setConfig=function(){Re(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),X=!0},n.clearConfig=function(){Ae=null,X=!1},n.isValidAttribute=function(e,t,n){Ae||Re({});const r=Ee(e),i=Ee(t);return ze(r,i,n)},n.addHook=function(e,t){"function"==typeof t&&Sr(T[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=_r(T[e],t);return-1===n?void 0:Cr(T[e],n,1)[0]}return xr(T[e])},n.removeHooks=function(e){T[e]=[]},n.removeAllHooks=function(){T={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();function mi(e){return encodeURIComponent(e).replace(/'/g,"%27").replace(/"/g,"%22")}function gi(e,t){var n=t;if(!t.toLowerCase().startsWith("http:")&&!t.toLowerCase().startsWith("https:")){var r=e.toLowerCase().trim().split("/");n=t.startsWith("/")?r[0]+"//"+r[2]+t:e.endsWith("/")?e+t:r[2].contains("/")?e.substr(0,e.lastIndexOf("/")+1)+t:e+"/"+t}return n}function vi(e,t={}){var n=yi(e);try{if(n=new URL(n).href,"undefined"!=typeof document&&"https:"===document.location.protocol&&"http:"===n.slice(0,5).toLowerCase()||"forceProxy"in t){var r=function(e){return void 0!==e&&"proxyURL"in e?e.proxyURL:cr.User.ProxyURL?cr.User.ProxyURL:void 0}(t);n=r?r+encodeURIComponent(n):n}}catch(e){throw new Error("Invalid URL provided: "+e)}return n}function yi(e){if("string"==typeof e){let t=e.indexOf("#");t>=0&&(e=e.substring(0,t))}return e}function bi(e){if("string"==typeof e){let t=e.split("#")[1];e=t||""}return e}function wi(e){const t=window.location.hash.startsWith("#")?window.location.hash.slice(1):window.location.search.slice(1);return new URLSearchParams(t).getAll(e)}function _i(){const e=window.location.href.split("?")[0].split("#")[0];window.history.replaceState({},"",e)}function xi(e){return"string"==typeof e&&(e=e.substr(0,e.lastIndexOf("/")+1)),e}function Si(e){if("string"==typeof e){const t=new URL(e);return t.origin+t.pathname}return e}function Ci(e){return"string"==typeof e&&(e=(e=Si(e)).substr(e.lastIndexOf("/")+1)),e}function ki(e){if("string"==typeof e){var t=new URL(e),n=t.pathname;if("/"==n)return;var r=n.split("/");r.splice(-2);var i=Ei(r.join("/"));e=t.origin+i}return e}function Ei(e){return"/"==e.slice(-1)?e:e+"/"}function Ai(e){var t=bi(e);return 0==t.length&&(t=Ci(e)),t}function Ti(e,t,n){var r="text/plain;charset=US-ASCII",i=encodeURIComponent(n);return e&&(r=e,"base64"===t&&(r=e+";base64",i=btoa(n))),`data:${r},${i}`}function Ii(e){try{const t=new URL(e);if("localhost"===t.hostname||t.hostname.endsWith(".localhost")||"128.0.0.1"===t.hostname)return!0}catch{return!1}}const Ri={".fab.fa-creative-commons-by":'<svg class="fab fa-creative-commons-by" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3 3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7 3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2 0 202.8-81.1 202.8-202.8 .1-113.8-90.2-203.3-202.8-203.3z"/></svg>',".fab.fa-creative-commons":'<svg class="fab fa-creative-commons" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M245.8 214.9l-33.2 17.3c-9.4-19.6-25.2-19.9-27.5-19.9-22.1 0-33.2 14.6-33.2 43.8 0 23.6 9.2 43.8 33.2 43.8 14.5 0 24.7-7.1 30.6-21.3l30.6 15.5c-6.2 11.5-25.7 39-65.1 39-22.6 0-74-10.3-74-77.1 0-58.7 43-77.1 72.6-77.1 30.7 0 52.7 12 66 35.9zm143.1 0l-32.8 17.3c-9.5-19.8-25.7-19.9-27.9-19.9-22.1 0-33.2 14.6-33.2 43.8 0 23.6 9.2 43.8 33.2 43.8 14.5 0 24.7-7.1 30.5-21.3l31 15.5c-2.1 3.8-21.4 39-65.1 39-22.7 0-74-9.9-74-77.1 0-58.7 43-77.1 72.6-77.1 30.7 0 52.6 12 65.6 35.9zM247.6 8.1C104.7 8.1 0 123.1 0 256.1c0 138.5 113.6 248 247.6 248 129.9 0 248.4-100.9 248.4-248 0-137.9-106.6-248-248.4-248zm.9 450.8c-112.5 0-203.7-93-203.7-202.8 0-105.4 85.4-203.3 203.7-203.3 112.5 0 202.8 89.5 202.8 203.3 0 121.7-99.7 202.8-202.8 202.8z"/></svg>',".fab.fa-html5":'<svg class="fab fa-html5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M0 32l34.9 395.8L191.5 480l157.6-52.2L384 32H0zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1l-4.4 47.7z"/></svg>',".fab.fa-osi":'<svg class="fab fa-osi" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 495.8 512"><path d="M0 259.2C2.3 123.4 97.4 26.8 213.8 11.1c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7-17.8-46.3-35.6-92.7-53.4-139-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8 6.4-42.4-24.5-78.7-64.5-82.2-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4-17.9 46.6-35.8 93.2-53.7 139.9-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119C1.9 318.7 1.6 280.2 0 259.2zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3 14.9-39.1 29.9-78.2 45-117.3 1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6 31.9 18.4 49.5 53.8 45.2 90.4-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6 15.2 39.2 30.2 78.4 45.2 117.7 1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161C459.8 112 354.1 14.7 218 31.5 111.9 44.5 22.7 134 20.9 257.3z"/></svg>',".far.fa-address-book":'<svg class="far fa-address-book" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-68 304H48V48h320v416zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z"/></svg>',".far.fa-clock":'<svg class="far fa-clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>',".far.fa-lightbulb":'<svg class="far fa-lightbulb" viewBox="0 0 352 512"><path d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"/></svg>',".far.fa-paper-plane":'<svg class="far fa-paper-plane" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1 111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6 8.2 0 16.3-2.1 23.6-6.2 12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6 48 288 464 48l-59.4 387.3z"/></svg>',".far.fa-snowflake":'<svg class="far fa-snowflake" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M440.1 355.2l-39.2-23 34.1-9.3c8.4-2.3 13.4-11.1 11.1-19.6l-4.1-15.5c-2.2-8.5-10.9-13.6-19.3-11.3L343 298.2 271.2 256l71.9-42.2 79.7 21.7c8.4 2.3 17-2.8 19.3-11.3l4.1-15.5c2.2-8.5-2.7-17.3-11.1-19.6l-34.1-9.3 39.2-23c7.5-4.4 10.1-14.2 5.8-21.9l-7.9-13.9c-4.3-7.7-14-10.3-21.5-5.9l-39.2 23 9.1-34.7c2.2-8.5-2.7-17.3-11.1-19.6l-15.2-4.1c-8.4-2.3-17 2.8-19.3 11.3l-21.3 81-71.9 42.2v-84.5L306 70.4c6.1-6.2 6.1-16.4 0-22.6l-11.1-11.3c-6.1-6.2-16.1-6.2-22.2 0l-24.9 25.4V16c0-8.8-7-16-15.7-16h-15.7c-8.7 0-15.7 7.2-15.7 16v46.1l-24.9-25.4c-6.1-6.2-16.1-6.2-22.2 0L142.1 48c-6.1 6.2-6.1 16.4 0 22.6l58.3 59.3v84.5l-71.9-42.2-21.3-81c-2.2-8.5-10.9-13.6-19.3-11.3L72.7 84c-8.4 2.3-13.4 11.1-11.1 19.6l9.1 34.7-39.2-23c-7.5-4.4-17.1-1.8-21.5 5.9l-7.9 13.9c-4.3 7.7-1.8 17.4 5.8 21.9l39.2 23-34.1 9.1c-8.4 2.3-13.4 11.1-11.1 19.6L6 224.2c2.2 8.5 10.9 13.6 19.3 11.3l79.7-21.7 71.9 42.2-71.9 42.2-79.7-21.7c-8.4-2.3-17 2.8-19.3 11.3l-4.1 15.5c-2.2 8.5 2.7 17.3 11.1 19.6l34.1 9.3-39.2 23c-7.5 4.4-10.1 14.2-5.8 21.9L10 391c4.3 7.7 14 10.3 21.5 5.9l39.2-23-9.1 34.7c-2.2 8.5 2.7 17.3 11.1 19.6l15.2 4.1c8.4 2.3 17-2.8 19.3-11.3l21.3-81 71.9-42.2v84.5l-58.3 59.3c-6.1 6.2-6.1 16.4 0 22.6l11.1 11.3c6.1 6.2 16.1 6.2 22.2 0l24.9-25.4V496c0 8.8 7 16 15.7 16h15.7c8.7 0 15.7-7.2 15.7-16v-46.1l24.9 25.4c6.1 6.2 16.1 6.2 22.2 0l11.1-11.3c6.1-6.2 6.1-16.4 0-22.6l-58.3-59.3v-84.5l71.9 42.2 21.3 81c2.2 8.5 10.9 13.6 19.3 11.3L375 428c8.4-2.3 13.4-11.1 11.1-19.6l-9.1-34.7 39.2 23c7.5 4.4 17.1 1.8 21.5-5.9l7.9-13.9c4.6-7.5 2.1-17.3-5.5-21.7z"/></svg>',".far.fa-spock-hand":'<svg class="fas fa-hand-spock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M170.2 80.8C161 47 180.8 12 214.6 2.4c34-9.6 69.4 10.2 79 44.2l30.3 107.1L337.1 84c6.6-34.7 40.1-57.5 74.8-50.9c31.4 6 53 33.9 52 64.9c10-2.6 20.8-2.8 31.5-.1c34.3 8.6 55.1 43.3 46.6 77.6L486.7 397.2C469.8 464.7 409.2 512 339.6 512c-11.2 0-22.5 0-33.7 0c-56.9 0-112.2-19-157.2-53.9l-92-71.6c-27.9-21.7-32.9-61.9-11.2-89.8s61.9-32.9 89.8-11.2l17 13.2L100.5 167.5c-13-32.9 3.2-70.1 36-83c11.1-4.4 22.7-5.4 33.7-3.7zm77.1-21.2c-2.4-8.5-11.2-13.4-19.7-11s-13.4 11.2-11 19.7l54.8 182.4c3.5 12.3-3.3 25.2-15.4 29.3s-25.3-2-30-13.9L174.9 138.1c-3.2-8.2-12.5-12.3-20.8-9s-12.3 12.5-9 20.8l73.3 185.6c12 30.3-23.7 57-49.4 37l-63.1-49.1c-7-5.4-17-4.2-22.5 2.8s-4.2 17 2.8 22.5l92 71.6c36.5 28.4 81.4 43.8 127.7 43.8c11.2 0 22.5 0 33.7 0c47.5 0 89-32.4 100.5-78.5l55.4-221.6c2.1-8.6-3.1-17.3-11.6-19.4s-17.3 3.1-19.4 11.6l-26 104C435.6 271.8 425 280 413 280c-16.5 0-28.9-15-25.8-31.2L415.7 99c1.7-8.7-4-17.1-12.7-18.7s-17.1 4-18.7 12.7L352.5 260c-2.2 11.6-12.4 20-24.2 20c-11 0-20.7-7.3-23.7-17.9L247.4 59.6z"/></svg>',".fas.fa-anchor":'<svg class="fas fa-anchor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/></svg>',".fas.fa-angle-right":'<svg class="fas fa-angle-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg>',".fas.fa-archive":'<svg class="fas fa-archive" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg>',".fas.fa-archive":'<svg class="fas fa-archive" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg>',".fas.fa-bars-staggered":'<svg class="fas fa-bars-staggered" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM64 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L96 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"/></svg>',".fas.fa-bars":'<svg class="fas fa-bars" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>',".fas.fa-bold":'<svg class="fas fa-bold" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z"/></svg>',".fas.fa-bolt":'<svg class="fas fa-bolt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"/></svg>',".fas.fa-book-atlas":'<svg class="Fas fa-book-atlas" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 96C0 43 43 0 96 0L384 0l32 0c17.7 0 32 14.3 32 32l0 320c0 17.7-14.3 32-32 32l0 64c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0L96 512c-53 0-96-43-96-96L0 96zM64 416c0 17.7 14.3 32 32 32l256 0 0-64L96 384c-17.7 0-32 14.3-32 32zM247.4 283.8c-3.7 3.7-6.2 4.2-7.4 4.2s-3.7-.5-7.4-4.2c-3.8-3.7-8-10-11.8-18.9c-6.2-14.5-10.8-34.3-12.2-56.9l63 0c-1.5 22.6-6 42.4-12.2 56.9c-3.8 8.9-8 15.2-11.8 18.9zm42.7-9.9c7.3-18.3 12-41.1 13.4-65.9l31.1 0c-4.7 27.9-21.4 51.7-44.5 65.9zm0-163.8c23.2 14.2 39.9 38 44.5 65.9l-31.1 0c-1.4-24.7-6.1-47.5-13.4-65.9zM368 192a128 128 0 1 0 -256 0 128 128 0 1 0 256 0zM145.3 208l31.1 0c1.4 24.7 6.1 47.5 13.4 65.9c-23.2-14.2-39.9-38-44.5-65.9zm31.1-32l-31.1 0c4.7-27.9 21.4-51.7 44.5-65.9c-7.3 18.3-12 41.1-13.4 65.9zm56.1-75.8c3.7-3.7 6.2-4.2 7.4-4.2s3.7 .5 7.4 4.2c3.8 3.7 8 10 11.8 18.9c6.2 14.5 10.8 34.3 12.2 56.9l-63 0c1.5-22.6 6-42.4 12.2-56.9c3.8-8.9 8-15.2 11.8-18.9z"/></svg>',".fas.fa-bookmark":'<svg class="fas fa-bookmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"/></svg>',".fas.fa-bullhorn":'<svg class="fas fa-bullhorn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"/></svg>',".fas.fa-bullhorn":'<svg class="fas fa-bullhorn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"/></svg>',".fas.fa-calculator":'<svg class="fas fa-calculator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"/></svg>',".fas.fa-certificate":'<svg class="fas fa-certificate" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M211 7.3C205 1 196-1.4 187.6 .8s-14.9 8.9-17.1 17.3L154.7 80.6l-62-17.5c-8.4-2.4-17.4 0-23.5 6.1s-8.5 15.1-6.1 23.5l17.5 62L18.1 170.6c-8.4 2.1-15 8.7-17.3 17.1S1 205 7.3 211l46.2 45L7.3 301C1 307-1.4 316 .8 324.4s8.9 14.9 17.3 17.1l62.5 15.8-17.5 62c-2.4 8.4 0 17.4 6.1 23.5s15.1 8.5 23.5 6.1l62-17.5 15.8 62.5c2.1 8.4 8.7 15 17.1 17.3s17.3-.2 23.4-6.4l45-46.2 45 46.2c6.1 6.2 15 8.7 23.4 6.4s14.9-8.9 17.1-17.3l15.8-62.5 62 17.5c8.4 2.4 17.4 0 23.5-6.1s8.5-15.1 6.1-23.5l-17.5-62 62.5-15.8c8.4-2.1 15-8.7 17.3-17.1s-.2-17.4-6.4-23.4l-46.2-45 46.2-45c6.2-6.1 8.7-15 6.4-23.4s-8.9-14.9-17.3-17.1l-62.5-15.8 17.5-62c2.4-8.4 0-17.4-6.1-23.5s-15.1-8.5-23.5-6.1l-62 17.5L341.4 18.1c-2.1-8.4-8.7-15-17.1-17.3S307 1 301 7.3L256 53.5 211 7.3z"/></svg>',".fas.fa-chart-line":'<svg class="fas fa-chart-line" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"/></svg>',".fas.fa-check-circle.fa-fw":'<svg class="fas fa-check-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg>',".fas.fa-check":'<svg class="fas fa-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg>',".fas.fa-circle-exclamation":'<svg class="fas fa-circle-exclamation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"/></svg>',".fas.fa-circle-info":'<svg class="fas fa-circle-info" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',".fas.fa-circle-nodes":'<svg class="fas fa-circle-nodes" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M418.4 157.9c35.3-8.3 61.6-40 61.6-77.9c0-44.2-35.8-80-80-80c-43.4 0-78.7 34.5-80 77.5L136.2 151.1C121.7 136.8 101.9 128 80 128c-44.2 0-80 35.8-80 80s35.8 80 80 80c12.2 0 23.8-2.7 34.1-7.6L259.7 407.8c-2.4 7.6-3.7 15.8-3.7 24.2c0 44.2 35.8 80 80 80s80-35.8 80-80c0-27.7-14-52.1-35.4-66.4l37.8-207.7zM156.3 232.2c2.2-6.9 3.5-14.2 3.7-21.7l183.8-73.5c3.6 3.5 7.4 6.7 11.6 9.5L317.6 354.1c-5.5 1.3-10.8 3.1-15.8 5.5L156.3 232.2z"/></svg>',".fas.fa-circle-notch.fa-spin.fa-fw":'<svg class="fas fa-circle-notch fa-spin fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"/></svg>',".fas.fa-circle":'<svg class="fas fa-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"/></svg>',".fas.fa-code-branch":'<svg class="fas fa-code-branch" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',".fas.fa-code":'<svg class="fas fa-code" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg>',".fas.fa-code":'<svg class="fas fa-code" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg>',".fas.fa-coffee":'<svg class="fas fa-coffee" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M192 384h192c53 0 96-43 96-96h32c70.6 0 128-57.4 128-128S582.6 32 512 32H120c-13.3 0-24 10.7-24 24v232c0 53 43 96 96 96zM512 96c35.3 0 64 28.7 64 64s-28.7 64-64 64h-32V96h32zm47.7 384H48.3c-47.6 0-61-64-36-64h583.3c25 0 11.8 64-35.9 64z"/></svg>',".fas.fa-comment":'<svg class="fas fa-comment" viewBox="0 0 512 512"><path d="M512 240c0 114.9-114.6 208-256 208c-37.1 0-72.3-6.4-104.1-17.9c-11.9 8.7-31.3 20.6-54.3 30.6C73.6 471.1 44.7 480 16 480c-6.5 0-12.3-3.9-14.8-9.9c-2.5-6-1.1-12.8 3.4-17.4c0 0 0 0 0 0s0 0 0 0s0 0 0 0c0 0 0 0 0 0l.3-.3c.3-.3 .7-.7 1.3-1.4c1.1-1.2 2.8-3.1 4.9-5.7c4.1-5 9.6-12.4 15.2-21.6c10-16.6 19.5-38.4 21.4-62.9C17.7 326.8 0 285.1 0 240C0 125.1 114.6 32 256 32s256 93.1 256 208z"/></svg>',".fas.fa-comments":'<svg class="fas fa-comments" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"/></svg>',".fas.fa-copy":'<svg class="fas fa-copy" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"/></svg>',".fas.fa-crosshairs":'<svg class="fas fa-crosshairs" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"/></svg>',".fas.fa-database":'<svg class="fas fa-database" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"/></svg>',".fas.fa-external-link-alt":'<svg class="fas fa-external-link-alt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M576 24v127.984c0 21.461-25.96 31.98-40.971 16.971l-35.707-35.709-243.523 243.523c-9.373 9.373-24.568 9.373-33.941 0l-22.627-22.627c-9.373-9.373-9.373-24.569 0-33.941L442.756 76.676l-35.703-35.705C391.982 25.9 402.656 0 424.024 0H552c13.255 0 24 10.745 24 24zM407.029 270.794l-16 16A23.999 23.999 0 0 0 384 303.765V448H64V128h264a24.003 24.003 0 0 0 16.97-7.029l16-16C376.089 89.851 365.381 64 344 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V287.764c0-21.382-25.852-32.09-40.971-16.97z"/></svg>',".fas.fa-fist-raised":'<svg class="fas fa-fist-raised" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M255.98 160V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v146.93c5.02-1.78 10.34-2.93 15.97-2.93h48.03zm128 95.99c-.01-35.34-28.66-63.99-63.99-63.99H207.85c-8.78 0-15.9 7.07-15.9 15.85v.56c0 26.27 21.3 47.59 47.57 47.59h35.26c9.68 0 13.2 3.58 13.2 8v16.2c0 4.29-3.59 7.78-7.88 8-44.52 2.28-64.16 24.71-96.05 72.55l-6.31 9.47a7.994 7.994 0 0 1-11.09 2.22l-13.31-8.88a7.994 7.994 0 0 1-2.22-11.09l6.31-9.47c15.73-23.6 30.2-43.26 47.31-58.08-17.27-5.51-31.4-18.12-38.87-34.45-6.59 3.41-13.96 5.52-21.87 5.52h-32c-12.34 0-23.49-4.81-32-12.48C71.48 251.19 60.33 256 48 256H16c-5.64 0-10.97-1.15-16-2.95v77.93c0 33.95 13.48 66.5 37.49 90.51L63.99 448v64h255.98v-63.96l35.91-35.92A96.035 96.035 0 0 0 384 344.21l-.02-88.22zm-32.01-90.09V48c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v112h32c11.28 0 21.94 2.31 32 5.9zM16 224h32c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v128c0 8.84 7.16 16 16 16zm95.99 0h32c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v160c0 8.84 7.16 16 16 16z"/></svg>',".fas.fa-flask":'<svg class="fas fa-flask" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"/></svg>',".fas.fa-folder-tree":'<svg class="fas fa-folder-tree" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32l0 96L0 384c0 35.3 28.7 64 64 64l192 0 0-64L64 384l0-224 192 0 0-64L64 96l0-64zM288 192c0 17.7 14.3 32 32 32l224 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32l-98.7 0c-8.5 0-16.6-3.4-22.6-9.4L409.4 9.4c-6-6-14.1-9.4-22.6-9.4L320 0c-17.7 0-32 14.3-32 32l0 160zm0 288c0 17.7 14.3 32 32 32l224 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32l-98.7 0c-8.5 0-16.6-3.4-22.6-9.4l-13.3-13.3c-6-6-14.1-9.4-22.6-9.4L320 288c-17.7 0-32 14.3-32 32l0 160z"/></svg>',".fas.fa-font":'<svg class="fas fa-font" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M254 52.8C249.3 40.3 237.3 32 224 32s-25.3 8.3-30 20.8L57.8 416 32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-1.8 0 18-48 159.6 0 18 48-1.8 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-25.8 0L254 52.8zM279.8 304l-111.6 0L224 155.1 279.8 304z"/></svg>',".fas.fa-hand-pointer":'<svg class="fas fa-hander" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M128 40c0-22.1 17.9-40 40-40s40 17.9 40 40l0 148.2c8.5-7.6 19.7-12.2 32-12.2c20.6 0 38.2 13 45 31.2c8.8-9.3 21.2-15.2 35-15.2c25.3 0 46 19.5 47.9 44.3c8.5-7.7 19.8-12.3 32.1-12.3c26.5 0 48 21.5 48 48l0 48 0 16 0 48c0 70.7-57.3 128-128 128l-16 0-64 0-.1 0-5.2 0c-5 0-9.9-.3-14.7-1c-55.3-5.6-106.2-34-140-79L8 336c-13.3-17.7-9.7-42.7 8-56s42.7-9.7 56 8l56 74.7L128 40zM240 304c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 96c0 8.8 7.2 16 16 16s16-7.2 16-16l0-96zm48-16c-8.8 0-16 7.2-16 16l0 96c0 8.8 7.2 16 16 16s16-7.2 16-16l0-96c0-8.8-7.2-16-16-16zm80 16c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 96c0 8.8 7.2 16 16 16s16-7.2 16-16l0-96z"/></svg>',".fas.fa-hashtag":'<svg class="fas fa-hashtag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg>',".fas.fa-hat-wizard":'<svg class="fa fa-hat-wizard" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64 416L168.6 180.7c15.3-34.4 40.3-63.5 72-83.7l146.9-94c3-1.9 6.5-2.9 10-2.9C407.7 0 416 8.3 416 18.6l0 1.6c0 2.6-.5 5.1-1.4 7.5L354.8 176.9c-1.9 4.7-2.8 9.7-2.8 14.7c0 5.5 1.2 11 3.4 16.1L448 416l-207.1 0 11.8-35.4 40.4-13.5c6.5-2.2 10.9-8.3 10.9-15.2s-4.4-13-10.9-15.2l-40.4-13.5-13.5-40.4C237 276.4 230.9 272 224 272s-13 4.4-15.2 10.9l-13.5 40.4-40.4 13.5C148.4 339 144 345.1 144 352s4.4 13 10.9 15.2l40.4 13.5L207.1 416 64 416zM279.6 141.5c-1.1-3.3-4.1-5.5-7.6-5.5s-6.5 2.2-7.6 5.5l-6.7 20.2-20.2 6.7c-3.3 1.1-5.5 4.1-5.5 7.6s2.2 6.5 5.5 7.6l20.2 6.7 6.7 20.2c1.1 3.3 4.1 5.5 7.6 5.5s6.5-2.2 7.6-5.5l6.7-20.2 20.2-6.7c3.3-1.1 5.5-4.1 5.5-7.6s-2.2-6.5-5.5-7.6l-20.2-6.7-6.7-20.2zM32 448l448 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>',".fas.fa-header":'<svg class="fas fa-header" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M496 80V48c0-8.837-7.163-16-16-16H320c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h37.621v128H154.379V96H192c8.837 0 16-7.163 16-16V48c0-8.837-7.163-16-16-16H32c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h37.275v320H32c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h160c8.837 0 16-7.163 16-16v-32c0-8.837-7.163-16-16-16h-37.621V288H357.62v128H320c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h160c8.837 0 16-7.163 16-16v-32c0-8.837-7.163-16-16-16h-37.275V96H480c8.837 0 16-7.163 16-16z"/></svg>',".fas.fa-highlighter":'<svg class="fas fa-highlighter" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M315 315l158.4-215L444.1 70.6 229 229 315 315zm-187 5s0 0 0 0l0-71.7c0-15.3 7.2-29.6 19.5-38.6L420.6 8.4C428 2.9 437 0 446.2 0c11.4 0 22.4 4.5 30.5 12.6l54.8 54.8c8.1 8.1 12.6 19 12.6 30.5c0 9.2-2.9 18.2-8.4 25.6L334.4 396.5c-9 12.3-23.4 19.5-38.6 19.5L224 416l-25.4 25.4c-12.5 12.5-32.8 12.5-45.3 0l-50.7-50.7c-12.5-12.5-12.5-32.8 0-45.3L128 320zM7 466.3l63-63 70.6 70.6-31 31c-4.5 4.5-10.6 7-17 7L24 512c-13.3 0-24-10.7-24-24l0-4.7c0-6.4 2.5-12.5 7-17z"/></svg>',".fas.fa-i-cursor":'<svg class="fas fa-i-cursor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path d="M256 52.048V12.065C256 5.496 250.726.148 244.158.066 211.621-.344 166.469.011 128 37.959 90.266.736 46.979-.114 11.913.114 5.318.157 0 5.519 0 12.114v39.645c0 6.687 5.458 12.078 12.145 11.998C38.111 63.447 96 67.243 96 112.182V224H60c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h36v112c0 44.932-56.075 48.031-83.95 47.959C5.404 447.942 0 453.306 0 459.952v39.983c0 6.569 5.274 11.917 11.842 11.999 32.537.409 77.689.054 116.158-37.894 37.734 37.223 81.021 38.073 116.087 37.845 6.595-.043 11.913-5.405 11.913-12V460.24c0-6.687-5.458-12.078-12.145-11.998C217.889 448.553 160 444.939 160 400V288h36c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-36V112.182c0-44.932 56.075-48.213 83.95-48.142 6.646.018 12.05-5.346 12.05-11.992z"/></svg>',".fas.fa-igloo":'<svg class="fas fa-igloo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M320 33.8L320 160 48.5 160C100.2 82.8 188.1 32 288 32c10.8 0 21.5 .6 32 1.8zM352 160l0-120.9C424.9 55.7 487.2 99.8 527.5 160L352 160zM29.9 192L96 192l0 128L0 320c0-46 10.8-89.4 29.9-128zM192 320l-64 0 0-128 320 0 0 128-64 0 0 32 192 0 0 80c0 26.5-21.5 48-48 48l-176 0 0-128c0-35.3-28.7-64-64-64s-64 28.7-64 64l0 128L48 480c-26.5 0-48-21.5-48-48l0-80 192 0 0-32zm288 0l0-128 66.1 0c19.2 38.6 29.9 82 29.9 128l-96 0z"/></svg>',".fas.fa-image":'<svg class="fas fa-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"/></svg>',".fas.fa-inbox":'<svg class="fas fa-inbox" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M567.938 243.908L462.25 85.374A48.003 48.003 0 0 0 422.311 64H153.689a48 48 0 0 0-39.938 21.374L8.062 243.908A47.994 47.994 0 0 0 0 270.533V400c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V270.533a47.994 47.994 0 0 0-8.062-26.625zM162.252 128h251.497l85.333 128H376l-32 64H232l-32-64H76.918l85.334-128z"/></svg>',".fas.fa-italic":'<svg class="fas fa-italic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z"/></svg>',".fas.fa-jar-wheat":'<svg class="fas far-jar-wheat" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M32 32C32 14.3 46.3 0 64 0L256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L64 64C46.3 64 32 49.7 32 32zM0 160c0-35.3 28.7-64 64-64l192 0c35.3 0 64 28.7 64 64l0 288c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 160zm112 0l-42.2 0c-3.2 0-5.8 2.6-5.8 5.8C64 198 90 224 122.2 224l21.8 0 32 0 21.8 0c32.1 0 58.2-26 58.2-58.2c0-3.2-2.6-5.8-5.8-5.8L208 160c-19.1 0-36.3 8.4-48 21.7c-11.7-13.3-28.9-21.7-48-21.7zm48 117.7c-11.7-13.3-28.9-21.7-48-21.7l-42.2 0c-3.2 0-5.8 2.6-5.8 5.8C64 294 90 320 122.2 320l21.8 0 32 0 21.8 0c32.1 0 58.2-26 58.2-58.2c0-3.2-2.6-5.8-5.8-5.8L208 256c-19.1 0-36.3 8.4-48 21.7zM112 352l-42.2 0c-3.2 0-5.8 2.6-5.8 5.8C64 390 90 416 122.2 416l21.8 0 0 32c0 8.8 7.2 16 16 16s16-7.2 16-16l0-32 21.8 0c32.1 0 58.2-26 58.2-58.2c0-3.2-2.6-5.8-5.8-5.8L208 352c-19.1 0-36.3 8.4-48 21.7c-11.7-13.3-28.9-21.7-48-21.7z"/></svg>',".fas.fa-language":'<svg class="fas fa-language" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M0 128C0 92.7 28.7 64 64 64l192 0 48 0 16 0 256 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64l-256 0-16 0-48 0L64 448c-35.3 0-64-28.7-64-64L0 128zm320 0l0 256 256 0 0-256-256 0zM178.3 175.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1 .1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1 73.6 0 8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4l-64-144zM160 233.2L179 276l-38 0 19-42.8zM448 164c11 0 20 9 20 20l0 4 44 0 16 0c11 0 20 9 20 20s-9 20-20 20l-2 0-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4c.9 .6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9l-18.9-11.3c-4.5-2.7-8.8-5.5-13.1-8.5c-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8l-12.2-12.2c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6 .5 .5c12.4-13.1 22.5-28.3 29.8-45L448 228l-72 0c-11 0-20-9-20-20s9-20 20-20l52 0 0-4c0-11 9-20 20-20z"/></svg>',".fas.fa-leaf":'<svg class="fas fa-leaf" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M272 96c-78.6 0-145.1 51.5-167.7 122.5c33.6-17 71.5-26.5 111.7-26.5l88 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0-72 0s0 0 0 0c-16.6 0-32.7 1.9-48.3 5.4c-25.9 5.9-49.9 16.4-71.4 30.7c0 0 0 0 0 0C38.3 298.8 0 364.9 0 440l0 16c0 13.3 10.7 24 24 24s24-10.7 24-24l0-16c0-48.7 20.7-92.5 53.8-123.2C121.6 392.3 190.3 448 272 448l1 0c132.1-.7 239-130.9 239-291.4c0-42.6-7.5-83.1-21.1-119.6c-2.6-6.9-12.7-6.6-16.2-.1C455.9 72.1 418.7 96 376 96L272 96z"/></svg>',".fas.fa-life-ring":'<svg class="fas fa-life-ring" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 504c136.967 0 248-111.033 248-248S392.967 8 256 8 8 119.033 8 256s111.033 248 248 248zm-103.398-76.72l53.411-53.411c31.806 13.506 68.128 13.522 99.974 0l53.411 53.411c-63.217 38.319-143.579 38.319-206.796 0zM336 256c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zm91.28 103.398l-53.411-53.411c13.505-31.806 13.522-68.128 0-99.974l53.411-53.411c38.319 63.217 38.319 143.579 0 206.796zM359.397 84.72l-53.411 53.411c-31.806-13.505-68.128-13.522-99.973 0L152.602 84.72c63.217-38.319 143.579-38.319 206.795 0zM84.72 152.602l53.411 53.411c-13.506 31.806-13.522 68.128 0 99.974L84.72 359.398c-38.319-63.217-38.319-143.579 0-206.796z"/></svg>',".fas.fa-link-ol":'<svg class="fas fa-link-ol" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>',".fas.fa-link-ul":'<svg class="fas fa-link-ul" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>',".fas.fa-link":'<svg class="fas fa-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg>',".fas.fa-link":'<svg class="fas fa-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>',".fas.fa-list-check":'<svg class="fas fa-list-check xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H256c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H192c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"/></svg>',".fas.fa-magic":'<svg class="fas fa-magic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg>',".fas.fa-map":'<svg class="fas fa-map" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M384 476.1L192 421.2l0-385.3L384 90.8l0 385.3zm32-1.2l0-386.5L543.1 37.5c15.8-6.3 32.9 5.3 32.9 22.3l0 334.8c0 9.8-6 18.6-15.1 22.3L416 474.8zM15.1 95.1L160 37.2l0 386.5L32.9 474.5C17.1 480.8 0 469.2 0 452.2L0 117.4c0-9.8 6-18.6 15.1-22.3z"/></svg>',".fas.fa-minus":'<svg class="fas fa-minus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>',".fas.fa-microscope":'<svg class="fas fa-microscope" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M160 32c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32c-17.7 0-32-14.3-32-32l0-224c0-17.7 14.3-32 32-32zM32 448l288 0c70.7 0 128-57.3 128-128s-57.3-128-128-128l0-64c106 0 192 86 192 192c0 49.2-18.5 94-48.9 128l16.9 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-160 0L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32zm80-64l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>',".fas.fa-paragraph":'<svg class="fas fa-paragraph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M192 32l64 0 160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0 0 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-352-32 0 0 352c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-96-32 0c-88.4 0-160-71.6-160-160s71.6-160 160-160z"/></svg>',".fas.fa-piggy-bank":'<svg class="fas fa-piggy-bank" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M400 96l0 .7c-5.3-.4-10.6-.7-16-.7L256 96c-16.5 0-32.5 2.1-47.8 6c-.1-2-.2-4-.2-6c0-53 43-96 96-96s96 43 96 96zm-16 32c3.5 0 7 .1 10.4 .3c4.2 .3 8.4 .7 12.6 1.3C424.6 109.1 450.8 96 480 96l11.5 0c10.4 0 18 9.8 15.5 19.9l-13.8 55.2c15.8 14.8 28.7 32.8 37.5 52.9l13.3 0c17.7 0 32 14.3 32 32l0 96c0 17.7-14.3 32-32 32l-32 0c-9.1 12.1-19.9 22.9-32 32l0 64c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-32-128 0 0 32c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-64c-34.9-26.2-58.7-66.3-63.2-112L68 304c-37.6 0-68-30.4-68-68s30.4-68 68-68l4 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-4 0c-11 0-20 9-20 20s9 20 20 20l31.2 0c12.1-59.8 57.7-107.5 116.3-122.8c12.9-3.4 26.5-5.2 40.5-5.2l128 0zm64 136a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z"/></svg>',".fas.fa-plus-minus":'<svg class="fas fa-plus-minus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 32c0-17.7-14.3-32-32-32s-32 14.3-32 32V144H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H160V320c0 17.7 14.3 32 32 32s32-14.3 32-32V208H336c17.7 0 32-14.3 32-32s-14.3-32-32-32H224V32zM0 480c0 17.7 14.3 32 32 32H352c17.7 0 32-14.3 32-32s-14.3-32-32-32H32c-17.7 0-32 14.3-32 32z"/></svg>',".fas.fa-plus":'<svg class="fas fa-plus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>',".fas.fa-print":'<svg class="fas fa-print" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg>',".fas.fa-quote-right":'<svg class="fas fa-quote-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"/></svg>',".fas.fa-recycle":'<svg class="fas fa-recycle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M184.561 261.903c3.232 13.997-12.123 24.635-24.068 17.168l-40.736-25.455-50.867 81.402C55.606 356.273 70.96 384 96.012 384H148c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12H96.115c-75.334 0-121.302-83.048-81.408-146.88l50.822-81.388-40.725-25.448c-12.081-7.547-8.966-25.961 4.879-29.158l110.237-25.45c8.611-1.988 17.201 3.381 19.189 11.99l25.452 110.237zm98.561-182.915l41.289 66.076-40.74 25.457c-12.051 7.528-9 25.953 4.879 29.158l110.237 25.45c8.672 1.999 17.215-3.438 19.189-11.99l25.45-110.237c3.197-13.844-11.99-24.719-24.068-17.168l-40.687 25.424-41.263-66.082c-37.521-60.033-125.209-60.171-162.816 0l-17.963 28.766c-3.51 5.62-1.8 13.021 3.82 16.533l33.919 21.195c5.62 3.512 13.024 1.803 16.536-3.817l17.961-28.743c12.712-20.341 41.973-19.676 54.257-.022zM497.288 301.12l-27.515-44.065c-3.511-5.623-10.916-7.334-16.538-3.821l-33.861 21.159c-5.62 3.512-7.33 10.915-3.818 16.536l27.564 44.112c13.257 21.211-2.057 48.96-27.136 48.96H320V336.02c0-14.213-17.242-21.383-27.313-11.313l-80 79.981c-6.249 6.248-6.249 16.379 0 22.627l80 79.989C302.689 517.308 320 510.3 320 495.989V448h95.88c75.274 0 121.335-82.997 81.408-146.88z"/></svg>',".fas.fa-reply":'<svg class="fas fa-reply" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M205 34.8c11.5 5.1 19 16.6 19 29.2l0 64 112 0c97.2 0 176 78.8 176 176c0 113.3-81.5 163.9-100.2 174.1c-2.5 1.4-5.3 1.9-8.1 1.9c-10.9 0-19.7-8.9-19.7-19.7c0-7.5 4.3-14.4 9.8-19.5c9.4-8.8 22.2-26.4 22.2-56.7c0-53-43-96-96-96l-96 0 0 64c0 12.6-7.4 24.1-19 29.2s-25 3-34.4-5.4l-160-144C3.9 225.7 0 217.1 0 208s3.9-17.7 10.6-23.8l160-144c9.4-8.5 22.9-10.6 34.4-5.4z"/></svg>',".fas.fa-rocket":'<svg class="fas fa-rocket" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505.1 19.1C503.8 13 499 8.2 492.9 6.9 460.7 0 435.5 0 410.4 0 307.2 0 245.3 55.2 199.1 128H94.9c-18.2 0-34.8 10.3-42.9 26.5L2.6 253.3c-8 16 3.6 34.7 21.5 34.7h95.1c-5.9 12.8-11.9 25.5-18 37.7-3.1 6.2-1.9 13.6 3 18.5l63.6 63.6c4.9 4.9 12.3 6.1 18.5 3 12.2-6.1 24.9-12 37.7-17.9V488c0 17.8 18.8 29.4 34.7 21.5l98.7-49.4c16.3-8.1 26.5-24.8 26.5-42.9V312.8c72.6-46.3 128-108.4 128-211.1.1-25.2.1-50.4-6.8-82.6zM400 160c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"/></svg>',".fas.fa-rotate":'<svg class="fas fa-rotate" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"/></svg>',".fas.fa-rss":'<svg class="fas fa-rss" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32c229.8 0 416 186.2 416 416c0 17.7-14.3 32-32 32s-32-14.3-32-32C384 253.6 226.4 96 32 96C14.3 96 0 81.7 0 64zM0 416a64 64 0 1 1 128 0A64 64 0 1 1 0 416zM32 160c159.1 0 288 128.9 288 288c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-123.7-100.3-224-224-224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>',".fas.fa-scroll":'<svg class="fas fa-scroll" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M0 80v48c0 17.7 14.3 32 32 32H48 96V80c0-26.5-21.5-48-48-48S0 53.5 0 80zM112 32c10 13.4 16 30 16 48V384c0 35.3 28.7 64 64 64s64-28.7 64-64v-5.3c0-32.4 26.3-58.7 58.7-58.7H480V128c0-53-43-96-96-96H112zM464 480c61.9 0 112-50.1 112-112c0-8.8-7.2-16-16-16H314.7c-14.7 0-26.7 11.9-26.7 26.7V384c0 53-43 96-96 96H368h96z"/></svg>',".fas.fa-shape":'<svg class="fas fa-shape" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M315.4 15.5C309.7 5.9 299.2 0 288 0s-21.7 5.9-27.4 15.5l-96 160c-5.9 9.9-6.1 22.2-.4 32.2s16.3 16.2 27.8 16.2l192 0c11.5 0 22.2-6.2 27.8-16.2s5.5-22.3-.4-32.2l-96-160zM288 312l0 144c0 22.1 17.9 40 40 40l144 0c22.1 0 40-17.9 40-40l0-144c0-22.1-17.9-40-40-40l-144 0c-22.1 0-40 17.9-40 40zM128 512a128 128 0 1 0 0-256 128 128 0 1 0 0 256z"/></svg>',".fas.fa-sticky-note":'<svg class="fas fa-sticky-note" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M312 320h136V56c0-13.3-10.7-24-24-24H24C10.7 32 0 42.7 0 56v400c0 13.3 10.7 24 24 24h264V344c0-13.2 10.8-24 24-24zm129 55l-98 98c-4.5 4.5-10.6 7-17 7h-6V352h128v6.1c0 6.3-2.5 12.4-7 16.9z"/></svg>',".fas.fa-table":'<svg class="fas fa-table" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"/></svg>',".fas.fa-tag":'<svg class="fas fa-tag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>',".fas.fa-terminal":'<svg class="fas fa-terminal" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M9.4 86.6C-3.1 74.1-3.1 53.9 9.4 41.4s32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L178.7 256 9.4 86.6zM256 416l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"/></svg>',".fas.fa-thumbs-down":'<svg class="fas fa-thumbs-down" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"/></svg>',".fas.fa-thumbs-up":'<svg class="fas fa-thumbs-up" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"/></svg>',".fas.fa-timeline":'<svg class="fas fa-timeline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M128 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm32 97.3c28.3-12.3 48-40.5 48-73.3c0-44.2-35.8-80-80-80S48 51.8 48 96c0 32.8 19.7 61 48 73.3L96 224l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0 0 54.7c-28.3 12.3-48 40.5-48 73.3c0 44.2 35.8 80 80 80s80-35.8 80-80c0-32.8-19.7-61-48-73.3l0-54.7 256 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-54.7c28.3-12.3 48-40.5 48-73.3c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 32.8 19.7 61 48 73.3l0 54.7-320 0 0-54.7zM488 96a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM320 392a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/></svg>',".fas.fa-times-circle.fa-fw":'<svg class="fas fa-times-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',".fas.fa-times-circle":'<svg class="fas fa-times-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',".fas.fa-times":'<svg class="fas fa-times" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',".fas.fa-times":'<svg class="fas fa-times" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',".fas.fa-trash-alt":'<svg class="fas fa-trash-alt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 84V56c0-13.3 10.7-24 24-24h112l9.4-18.7c4-8.2 12.3-13.3 21.4-13.3h114.3c9.1 0 17.4 5.1 21.5 13.3L312 32h112c13.3 0 24 10.7 24 24v28c0 6.6-5.4 12-12 12H12C5.4 96 0 90.6 0 84zm416 56v324c0 26.5-21.5 48-48 48H80c-26.5 0-48-21.5-48-48V140c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12zm-272 68c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208z"/></svg>',".fas.fa-triangle-exclamation":'<svg class="fas fa-triangle-exclamation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"/></svg>',".fas.fa-upright-from-square":'<svg class="fas fa-upright-from-square" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-128c0-17.7-14.3-32-32-32L352 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z"/></svg>',".fas.fa-user-astronaut":'<svg class="fas fa-user-astronaut" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M370.7 96.1C346.1 39.5 289.7 0 224 0S101.9 39.5 77.3 96.1C60.9 97.5 48 111.2 48 128v64c0 16.8 12.9 30.5 29.3 31.9C101.9 280.5 158.3 320 224 320s122.1-39.5 146.7-96.1c16.4-1.4 29.3-15.1 29.3-31.9V128c0-16.8-12.9-30.5-29.3-31.9zM336 144v16c0 53-43 96-96 96H208c-53 0-96-43-96-96V144c0-26.5 21.5-48 48-48H288c26.5 0 48 21.5 48 48zM189.3 162.7l-6-21.2c-.9-3.3-3.9-5.5-7.3-5.5s-6.4 2.2-7.3 5.5l-6 21.2-21.2 6c-3.3 .9-5.5 3.9-5.5 7.3s2.2 6.4 5.5 7.3l21.2 6 6 21.2c.9 3.3 3.9 5.5 7.3 5.5s6.4-2.2 7.3-5.5l6-21.2 21.2-6c3.3-.9 5.5-3.9 5.5-7.3s-2.2-6.4-5.5-7.3l-21.2-6zM112.7 316.5C46.7 342.6 0 407 0 482.3C0 498.7 13.3 512 29.7 512H128V448c0-17.7 14.3-32 32-32H288c17.7 0 32 14.3 32 32v64l98.3 0c16.4 0 29.7-13.3 29.7-29.7c0-75.3-46.7-139.7-112.7-165.8C303.9 338.8 265.5 352 224 352s-79.9-13.2-111.3-35.5zM176 448c-8.8 0-16 7.2-16 16v48h32V464c0-8.8-7.2-16-16-16zm96 32a16 16 0 1 0 0-32 16 16 0 1 0 0 32z"/></svg>',".fas.fa-user-plus":'<svg class="fas fa-user-plus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3zM504 312V248H440c-13.3 0-24-10.7-24-24s10.7-24 24-24h64V136c0-13.3 10.7-24 24-24s24 10.7 24 24v64h64c13.3 0 24 10.7 24 24s-10.7 24-24 24H552v64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"/></svg>',".fas.fa-user-secret":'<svg class="fas fa-user-secret" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224 16c-6.7 0-10.8-2.8-15.5-6.1C201.9 5.4 194 0 176 0c-30.5 0-52 43.7-66 89.4C62.7 98.1 32 112.2 32 128c0 14.3 25 27.1 64.6 35.9c-.4 4-.6 8-.6 12.1c0 17 3.3 33.2 9.3 48H45.4C38 224 32 230 32 237.4c0 1.7 .3 3.4 1 5l38.8 96.9C28.2 371.8 0 423.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7c0-58.5-28.2-110.4-71.7-143L415 242.4c.6-1.6 1-3.3 1-5c0-7.4-6-13.4-13.4-13.4H342.7c6-14.8 9.3-31 9.3-48c0-4.1-.2-8.1-.6-12.1C391 155.1 416 142.3 416 128c0-15.8-30.7-29.9-78-38.6C324 43.7 302.5 0 272 0c-18 0-25.9 5.4-32.5 9.9c-4.8 3.3-8.8 6.1-15.5 6.1zm56 208H267.6c-16.5 0-31.1-10.6-36.3-26.2c-2.3-7-12.2-7-14.5 0c-5.2 15.6-19.9 26.2-36.3 26.2H168c-22.1 0-40-17.9-40-40V169.6c28.2 4.1 61 6.4 96 6.4s67.8-2.3 96-6.4V184c0 22.1-17.9 40-40 40zm-88 96l16 32L176 480 128 288l64 32zm128-32L272 480 240 352l16-32 64-32z"/></svg>',".fas.fa-vial-circle-check":'<svg class="fas fa-vial-circle-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 64C0 46.3 14.3 32 32 32l64 0 64 0 64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l0 170.8c-20.2 28.6-32 63.5-32 101.2c0 25.2 5.3 49.1 14.8 70.8C189.5 463.7 160.6 480 128 480c-53 0-96-43-96-96L32 96C14.3 96 0 81.7 0 64zM96 96l0 96 64 0 0-96L96 96zM224 368a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm211.3-43.3c-6.2-6.2-16.4-6.2-22.6 0L352 385.4l-28.7-28.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6l40 40c6.2 6.2 16.4 6.2 22.6 0l72-72c6.2-6.2 6.2-16.4 0-22.6z"/></svg>'};function Li(e){return Array.from(new Set(e))}function Ni(){return(new Date).toISOString()}function Oi(e){if(e)return new Date(e).toISOString()}function Di(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Mi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pi(e){return document.createRange().createContextualFragment(zi(e))}function ji(e){function t(e,t=2166136261){let n=t;for(let t=0;t<e.length;t++)n^=e.charCodeAt(t),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>0}if(e){const n=t(e,2166136261),r=t(e,1605444394),i=t(e,1273112443),o=t(e,179400136),s=n.toString(16).padStart(8,"0")+r.toString(16).padStart(8,"0")+i.toString(16).padStart(8,"0")+o.toString(16).padStart(8,"0");let a=s.substring(0,8)+"-"+s.substring(8,12)+"-4"+s.substring(13,16)+"-"+(63&parseInt(s[16],16)|128).toString(16)+s.substring(17,20)+"-"+s.substring(20,32);return a="a"+a.slice(1),a}{const e=crypto.randomUUID(),t=new Uint8Array(1);crypto.getRandomValues(t);return String.fromCharCode(97+t[0]%6)+e.slice(1)}}function Ui(e,t,n){const r=function(e,t,n){if(e=e||"",t){var r=(t=(t=t.trim()).replace(/\W/g,"-")).substr(0,1);return t=""===e&&r==parseInt(r)?"x-"+t:e+t,document.getElementById(t)?t+"-"+(n||ji()):t}return ji()}(e,t,n);return/^\d/.test(r)?Ui(e,t,n):r}function Bi(e){const t=new FormData(e);return Object.fromEntries([...t.entries()].map(([e,t])=>[e,"string"==typeof t?zi(t.trim()):t]))}async function Fi(e,t="SHA-512"){if(!["SHA-256","SHA-384","SHA-512"].includes(t))throw new Error("Unsupported SRI algorithm");const n=(new TextEncoder).encode(e),r=await crypto.subtle.digest(t,n),i=btoa(String.fromCharCode(...new Uint8Array(r)));return`${t.replace("-","").toLowerCase()}-${i}`}function zi(e,t={}){return fi.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!1!==t.ALLOW_UNKNOWN_PROTOCOLS,ADD_ATTR:[...cr.DOMNormalisation.rdfaAttributes,"alttext","xml:lang","xmlns:ev","target"],...t})}function qi(e){if("object"!=typeof e||null===e)return{};const t={};for(const n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("__proto__"===n||"constructor"===n||"prototype"===n)continue;const r=e[n];"string"==typeof r||"number"==typeof r||"boolean"==typeof r||null===r?t[n]=r:Array.isArray(r)?t[n]=r.map(e=>"object"==typeof e&&null!==e?qi(e):e):"object"==typeof r&&(t[n]=qi(r))}return t}function $i(e,t){return e.sort(function(e,n){return t&&(e=e[t],n=n[t]),e.toLowerCase().localeCompare(n.toLowerCase())})}function Hi(e,t){const n=[];if(!t.global){t=new RegExp(t.source,`${t.flags}g`)}for(const r of e.matchAll(t)){const e=[...r];e.index=r.index,e.input=r.input,n.push(e)}return n.length?n:null}function Vi(e){return new RegExp(/^(?=(?:[^0-9]*[0-9]){10}(?:(?:[^0-9]*[0-9]){3})?$)[\d-]+$/).test(e)}const Wi="text/html; charset=utf-8",Gi='<http://www.w3.org/ns/ldp#Resource>; rel="type"';function Ji(e,t){const n=new Request(e,t);return cr.Session.authFetch(n)}function Ki(e={}){const t=e.excludeMarkup||!1;return cr.MediaTypes.RDF.filter(e=>!t||-1===cr.MediaTypes.Markup.indexOf(e)).map(e=>cr.MediaTypes.Markup.indexOf(e)>-1?`${e};q=0.9`:e).join(",")}function Zi(e,t,n={}){let r;return e&&t?Yi(e,{Accept:"*/*"},n).then(e=>(r=e.headers.get("Content-Type"),cr.MediaTypes.Binary.indexOf(r)?e.arrayBuffer():e.text())).then(e=>oo(t,e,r,null,n).catch(i=>{if(0===i.status)return n.noCredentials=!0,oo(t,e,r,null,n);throw i})):Promise.reject(new Error("Missing fromURL or toURL in copyResource"))}function Qi(e={}){const t=new URL(window.location);return(e.removeParams||["author","social","graph","open","style"]).forEach(e=>{t.searchParams.delete(e)}),t.origin+t.pathname+(t.searchParams.toString()?"?"+t.searchParams.toString():"")}function Xi(e,t={}){const n=cr.Session.isActive?Ji:fetch;return e?(t.noCredentials||(t.credentials="include"),t.method="DELETE",n(e,t).then(e=>{if(!e.ok){let t=new Error("Error deleting resource: "+e.status+" "+e.statusText);throw t.status=e.status,t.response=e,t}return e})):Promise.reject(new Error("Cannot DELETE resource - missing url"))}function Yi(e,t={},n={}){const r=cr.Session.isActive?Ji:fetch;if((e=e||Qi()).startsWith("file:"))return;n.method="method"in n&&"HEAD"==n.method?"HEAD":"GET",t.Accept||"HEAD"===n.method||(t.Accept="text/turtle"),n.noCache&&(n.cache="no-cache",t["Cache-Control"]="no-cache"),n.noStore&&(n.cache="no-store",t["Cache-Control"]="no-store"),n.noCredentials||(n.credentials="include"),n.headers=Object.assign({},t);const i=new AbortController,o=n.timeout||cr.HttpTimeout,s=setTimeout(()=>i.abort(),o);return n.signal=i.signal,r(e,n).finally(()=>clearTimeout(s)).catch(r=>{if("AbortError"===r.name)throw new Error(`Request timed out after ${o}ms`,{cause:r});if(405==r?.status)throw r;if(401==r?.status){if(n.hasRetriedWithCredentials)throw new Error("401 retries failed",{cause:r});return n.hasRetriedWithCredentials=!0,n.noCredentials=!1,n.credentials="include",Yi(e,t,n)}if(n.noCredentials||"omit"===n.credentials){if(n.proxyForced)throw new Error("Cannot fetch proxied URL: "+e);var i=vi(e,{forceProxy:!0});if(i!==e)return n.proxyForced=!0,n.noCredentials=!0,n.credentials="omit",Yi(i,t,n);throw new Error("Error fetching resource",{cause:r})}return n.noCredentials=!0,n.credentials="omit",Yi(e,t,n)}).then(e=>{if(!e.ok){let t=new Error("Error fetching resource: "+e.status+" "+e.statusText);throw t.status=e.status,t.response=e,t}return e})}function eo(e,t={},n={}){return n.method="HEAD",Yi(e,t,n)}function to(e,t={}){const n=cr.Session.isActive?Ji:fetch;return e=e||Qi(),t.method="OPTIONS",t.noCredentials||(t.credentials="include"),n(e,t).then(e=>{if(!e.ok){let t=new Error("Error fetching resource OPTIONS: "+e.status+" "+e.statusText);throw t.status=e.status,t.response=e,t}if(t.header&&!e.headers.get(t.header)){let n=new Error("OPTIONS without "+t.header+" header: "+e.status+" "+e.statusText);throw n.status=e.status,n.response=e,n}return t.header?{headers:e.headers.get(t.header)}:{headers:e.headers}})}function no(e){const t="A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD_",n=`(?:[${t}]|[0-9])(?:[${t}]|[0-9]|\\u00B7|[\\u0300-\\u036F]|[\\u203F-\\u2040])*`;return new RegExp(`(${`\\?[${t}](${n})`}|${`\\$[${t}](${n})`})`,"u").test(e)}function ro(e,t,n={}){var r;if(n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"text/n3",t=Array.isArray(t)?t:[t],n.prefixes=n.prefixes||{},n.prefixes.solid="http://www.w3.org/ns/solid/terms#",n.prefixes.acl="http://www.w3.org/ns/auth/acl#","application/sparql-update"===n.headers["Content-Type"])r=function(e){return Object.keys(e).map(t=>"PREFIX "+t+": <"+e[t]+">").join("\n")}(n.prefixes);else r=function(e){return Object.keys(e).map(t=>"@prefix "+t+": <"+e[t]+"> .").join("\n")}(n.prefixes);var i,o=r+"\n";if("application/sparql-update"===n.headers["Content-Type"])t[0].delete&&(i=no(t[0].delete)?"DELETE":"DELETE DATA",o+=`${i} {\n${t[0].delete}\n}\n`),t[0].insert&&(i=no(t[0].insert)?"INSERT":"INSERT DATA",o+=`${i} {\n${t[0].insert}\n}\n`),t[0].where&&(o+=`WHERE {\n${t[0].where}\n}\n`);else{var s="_:"+ji();o+=`${s} a solid:InsertDeletePatch .\n`;var a="";t.forEach(e=>{e.delete&&(a.length||(a+=`${s} solid:deletes {`),a+=`${e.delete}\n`),e.insert&&(o+=`${s} solid:inserts {\n${e.insert}\n} .\n`),e.where&&(o+=`${s} solid:where {\n${e.where}\n} .\n`)}),a.length&&(o+=a+"} .")}return function(e,t,n={}){const r=cr.Session.isActive?Ji:fetch;n.headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||"text/n3",n.body=t,n.method="PATCH",n.noCredentials||(n.credentials="include");return r(e,n).then(e=>{if(!e.ok){let t=new Error("Error patching resource: "+e.status+" "+e.statusText);throw t.status=e.status,t.response=e,t}return e})}(e,o,n)}function io(e,t,n,r,i,o={}){const s=cr.Session.isActive?Ji:fetch;return e?(o.method="POST",o.body=n,o.noCredentials||(o.credentials="include"),o.headers=o.headers||{},o.headers["Content-Type"]=r||Wi,i="string"==typeof i&&i.trim()?Gi+", "+i:Gi,o.headers.Link=i,t&&(o.headers.Slug=t),s(e,o).catch(i=>{if(0===i.status&&!o.noCredentials)return o.noCredentials=!0,io(e,t,n,r,o);throw i}).then(e=>{if(!e.ok){let t=new Error("Error creating resource: "+e.status+" "+e.statusText);throw t.status=e.status,t.response=e,t}return e})):Promise.reject(new Error("Cannot POST resource - missing url"))}function oo(e,t,n,r,i={}){const o=cr.Session.isActive?Ji:fetch;return e?(i.method="PUT",i.body=t,i.noCredentials||(i.credentials="include"),i.headers=i.headers||{},i.headers["Content-Type"]=n||Wi,r="string"==typeof r&&r.trim()?Gi+", "+r:Gi,i.headers.Link=r,o(e,i).then(e=>{if(!e.ok){let t=new Error("Error writing resource: "+e.status+" "+e.statusText);throw t.status=e.status,t.response=e,t}return e})):Promise.reject(new Error("Cannot PUT resource - missing url"))}function so(e,t,n,r){return r=r||{},(t?io(e,t,n):oo(e,n)).then(t=>{var n={content:"Saved document to <code>"+(t.headers.get("Location")||e)+"</code>",type:"success"};return Promise.resolve({response:t,message:n})}).catch(e=>{let t;switch(console.log(e),e.status){case 401:t="Need to authenticate before saving";break;case 403:t="You are not authorized to save";break;default:t="Server doesn't allow this resource to be rewritten"}return t={content:t,type:"error"},Promise.reject({error:e,message:t})})}function ao(e,t,n){return function(e){return to(e||vi(e),{header:"Accept-Patch"}).catch(e=>({headers:"text/n3"})).then(e=>{let t=e.headers.trim().split(/\s*,\s*/);return t.indexOf("text/html")>-1||t.indexOf("application/xhtml+xml")>-1?"text/html":t.indexOf("text/n3")>-1||t.indexOf("*/*")>-1?"text/n3":t.indexOf("application/sparql-update")>-1?"application/sparql-update":(console.log("Accept-Patch contains unrecognised media-range; "+e.headers),e.headers)})}(e).then(r=>((n=n||{}).headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||r,ro(e,t,n)))}function lo(e,t,n){return function(e){return to(e||vi(e),{header:"Accept-Put"}).catch(e=>({headers:"text/html"})).then(e=>{let t=e.headers.trim().split(/\s*,\s*/);return t.indexOf("text/html")>-1||t.indexOf("application/xhtml+xml")>-1?"text/html":t.indexOf("text/turtle")>-1||t.indexOf("*/*")>-1?"text/turtle":t.indexOf("application/ld+json")>-1||t.indexOf("application/json")>-1?"application/ld+json":(console.log("Accept-Patch contains unrecognised media-range; "+e.headers),e.headers)})}(e).then(r=>((n=n||{}).headers=n.headers||{},n.headers["Content-Type"]=n.headers["Content-Type"]||r,oo(e,t,null,null,n)))}var co=i(9749),uo=i(2384),ho=i(8287).Buffer;const po=cr.ns,fo="http://localhost/d79351f4-cdb8-4228-b24f-3e9ac74a840d";function mo(e,t={}){t.contentType=t.contentType||"text/turtle","subjectURI"in t||(t.subjectURI=fo);var n=t.subjectURI;switch(n=yi(n),t.contentType){case"application/activity+json":case"application/json":t.contentType="application/ld+json";break;case"text/plain":case"text/markdown":t.contentType="text/html"}const r=function(e,t){var n=["text/html","application/xhtml+xml","image/svg+xml","application/xml","text/xml"],r="";switch(t){case"text/html":r="html";break;case"application/xhtml+xml":r="xhtml";break;case"image/svg+xml":case"application/xml":case"text/xml":r="xml"}return n.includes(t)?new co.RdfaParser({baseIRI:e,contentType:t,profile:r}):lr.formats.parsers.get(t)}(n,t.contentType),i=a.Readable.from([e]),o=r.import(i,{baseIRI:n});return lr.dataset().import(o).then(e=>lr.grapoi({dataset:e}))}function go(e,t,n,r={}){return t!==n||r.sanitize?(r.contentType=t,mo(e,r).then(e=>(r.contentType=n,r.sanitize&&(e=function(e){var t=e.out().quads();const n=[];Array.from(t).forEach(e=>{"Literal"==e.object.termType&&(e.object.value=zi(e.object.value)),n.push(e)});const r=lr.dataset(n);return e=lr.grapoi({dataset:r}),e}(e)),vo(e,r)))):Promise.resolve(e)}function vo(e,t={}){"contentType"in t||(t.contentType="text/turtle");try{var n=e.out().quads();"application/trig"===t.contentType&&(t.contentType="text/n3");const r=lr.formats.serializers.get(t.contentType,{compact:!0,prettyPrint:!0});if(!r)throw new Error(`No serializer found for contentType: ${t.contentType}`);return function(e){const t=[];return new Promise((n,r)=>{e.on("data",e=>t.push(ho.from(e))),e.on("error",e=>r(e)),e.on("end",()=>n(ho.concat(t).toString("utf8")))})}(r.import(a.Readable.from(n),{compact:!0,prettyPrint:!0})).then(e=>e.replace(new RegExp(Mi(fo),"g"),""))}catch(e){console.log(e)}}function yo(e){return"string"==typeof e["@context"]&&(e["@context"]=e["@context"].replace(/^http:/,"https:")),e}function bo(e,t){var n=e.node(lr.namedNode(t)),r=[];return n.out(po.rdf.first).values.length&&r.push(n.out(po.rdf.first).values[0]),n.out(po.rdf.rest).values.length&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"!==n.out(po.rdf.rest).values[0]&&(r=r.concat(bo(e,n.out(po.rdf.rest).values[0]))),r}function wo(e,t,n={}){let r=n.excludeMarkup?"":",*/*;q=0.1",i={Accept:Ki(n)+r};"Accept"in(t=t||i)||Object.assign(t,i);const o=!!cr.WebExtensionBaseURL&&e.startsWith(cr.WebExtensionBaseURL);return Yi(e,t,n).then(t=>{let r=t.headers.get("Content-Type");return r=!o||r&&"application/x-unknown-content-type"!==r?r:"text/html",n.contentType=r?r.split(";")[0].trim():"text/turtle",n.subjectURI=e,["text/markdown","text/plain"].includes(n.contentType)?(n.contentType="text/html",t.text().then(e=>hh(e,{createDocument:!0}))):"application/json"==n.contentType?t.json().then(r=>r["@context"]?(r=yo(r),JSON.stringify(r)):Promise.reject({resource:e,response:t,message:"Unsupported media type for RDF parsing (without @context): "+n.contentType})):cr.MediaTypes.RDF.includes(n.contentType)?t.text():Promise.reject({resource:e,response:t,message:"Unsupported media type for RDF parsing: "+n.contentType})}).then(e=>mo(e,n)).then(t=>lr.grapoi({dataset:t.dataset,term:lr.namedNode(yi(e))})).catch(e=>{if("resource"in e||"cause"in e||e.status?.toString().startsWith("5"))return e})}function _o(e,t,n){if(t)return xo(e,t).catch(()=>{if(!n)return function(e,t){if(!t)return Promise.reject({message:"Missing url paramater"});return wo(t).then(n=>{var r=(n=n.node(lr.namedNode(t))).out(lr.namedNode(e)).values;return r.length?r:Promise.reject({message:e+" endpoint was not found in message body"})})}(e,t)});if(n){var r=Qi();return mo(n,{contentType:"text/html",subjectURI:r}).then(t=>{var n=(t=t.node(lr.namedNode(r))).out(lr.namedNode(e)).values;return n?.length?n:xo(e,r)})}}function xo(e,t){var n=Array.isArray(e)?e:[e];return eo(t).then(function(e){var t=e.headers.get("Link");if(t&&t.length){var r=uo.parse(t),i=[];return n.forEach(e=>{r.has("rel",e)&&i.push(r.rel(e)[0].uri)}),i.length?i:Promise.reject({message:n.join(", ")+" endpoint(s) was not found in 'Link' header"})}return Promise.reject({message:n.join(", ")+" endpoint(s) was not found in 'Link' header"})},function(e){return Promise.reject({message:"'Link' header not found"})})}function So(e){return cr.Actor.Type.hasOwnProperty(e)}function Co(e){cr.User.PreferredPolicy=Lo(e);var t=e.node(lr.namedNode(cr.User.PreferredPolicy));cr.User.PreferredPolicyRule=function(e){var t={},n=e.out(po.odrl.prohibition).values;if(n.length){var r=e.node(lr.namedNode(n[0]));r.out(po.odrl.action).values.length&&(t.Prohibition={},t.Prohibition.Actions=r.out(po.odrl.action).values)}var i=e.out(po.odrl.permissions).values;if(i.length){var o=e.node(lr.namedNode(i[0]));o.out(po.odrl.action).values.length&&(t.Permission={},t.Permission.Actions=o.out(po.odrl.action).values)}return t}(t)}function ko(e){return e==cr.User.IRI?Io(cr.User.Graph,ko):wo(e).then(t=>{if(!Array.from(t.out().quads()).length)return Promise.resolve([]);var n=t.node(lr.namedNode(e));cr.User.Name=cr.User.Name||Oo(n),cr.User.Image=cr.User.Image||Jo(n);var r=Mo(n)||[],i=Po(n)||[],o=Bo(n)||[],s=Ho(n)||[],a=Vo(n)||[],l=Wo(n)||[],c=Go(n)||[];return r.length>0&&(cr.User.Storage=cr.User.Storage?Li(cr.User.Storage.concat(r)):r),i.length>0&&(cr.User.Outbox=cr.User.Outbox?Li(cr.User.Outbox.concat(i)):i),o.length>0&&(cr.User.Knows=cr.User.Knows?Li(cr.User.Knows.concat(o)):o),s.length>0&&(cr.User.Liked=cr.User.Liked?Li(cr.User.Liked.concat(s)):s),a.length>0&&(cr.User.Occupations=cr.User.Occupations?Li(cr.User.Occupations.concat(a)):a),l.length>0&&(cr.User.Publications=cr.User.Publications?Li(cr.User.Publications.concat(l)):a),c.length>0&&(cr.User.Made=cr.User.Made?Li(cr.User.Made.concat(c)):c),Io(n,ko).then(()=>Eo(n))},function(e){return Promise.resolve([])})}function Eo(e,t){if(!e)return Promise.resolve([]);var n=yi(t=t||e.term.value),r=e.out(po.rdfs.seeAlso).values;if(r.length){var i=[],o=[];return r.forEach(e=>{cr.User.SeeAlso.includes(e)||yi(e)==n||i.push(e)}),i.forEach(e=>{cr.User.SeeAlso=Li(cr.User.SeeAlso.concat(e)),o.push(wo(e))}),Promise.allSettled(o).then(e=>{var n=[];return e.forEach(e=>{var r=e.value;if(r){var i=r.node(lr.namedNode(t)),o=Bo(i)||[],s=Ho(i)||[],a=Vo(i)||[],l=Wo(i)||[],c=Go(i)||[];o.length&&(cr.User.Knows=cr.User.Knows?Li(cr.User.Knows.concat(o)):o),s.length&&(cr.User.Liked=cr.User.Liked?Li(cr.User.Liked.concat(s)):s),a.length&&(cr.User.Occupations=cr.User.Occupations?Li(cr.User.Occupations.concat(a)):a),l.length&&(cr.User.Publications=cr.User.Publications?Li(cr.User.Publications.concat(l)):l),c.length&&(cr.User.Made=cr.User.Made?Li(cr.User.Made.concat(c)):c),n.push(Eo(r,t))}}),Promise.allSettled(n).then(e=>Promise.resolve([]))}).catch(e=>Promise.resolve([]))}return Promise.resolve([])}function Ao(e){return function(e){return e==cr.User.IRI&&cr.User.Graph?Io(cr.User.Graph,Ao):wo(e).then(t=>{if(void 0===t)return Promise.resolve([]);var n=t.node(lr.namedNode(e)),r=Bo(n)||[];return r.length>0&&(cr.User.Knows=cr.User.Knows?Li(cr.User.Knows.concat(r)):r),Io(n,Ao)}).catch(e=>Promise.resolve([]))}(e).then(e=>cr.User.Knows||[])}function To(e){var t=function(e,t){return wo(e).then(e=>{if(!e)return{};e=lr.grapoi({dataset:e.dataset});var n=Array.from(e.out().quads());if(n.length){var r={};return r[t]={},n.forEach(e=>{var n=e.subject.value,i=e.predicate.value,o=e.object.value;i==po.solid.forClass.value&&(r[t][n]={},r[t][n][i]=o)}),n.forEach(e=>{var n=e.subject.value,i=e.predicate.value,o=e.object.value;r[t][n]&&(i!=po.solid.instance.value&&i!=po.solid.instanceContainer.value||(r[t][n][i]=o))}),r}})},n=[],r=zo(e),i=qo(e);return r?.length&&n.push(t(r[0],po.solid.publicTypeIndex.value)),i?.length&&DO.C.Session?.isActive&&n.push(t(i[0],po.solid.privateTypeIndex.value)),Promise.allSettled(n).then(e=>{e.filter(e=>!(e instanceof Error));var t={};return e.forEach(e=>{Object.assign(t,e.value)}),t})}function Io(e,t){var n=e.out(po.owl.sameAs).values;if(n.length){var r=[];return n.forEach(e=>{e==cr.User.IRI||cr.User.SameAs.includes(e)||(cr.User.SameAs=Li(cr.User.SameAs.concat(e)),void 0!==t?r.push(t(e)):r.push(Promise.resolve(cr.User.SameAs)))}),Promise.all(r).then(e=>Promise.resolve([])).catch(e=>Promise.resolve([]))}return Promise.resolve([])}function Ro(e){return e.out(po.solid.preferredProxy).values[0]||void 0}function Lo(e){return e.out(po.solid.preferredPolicy).values[0]||void 0}function No(e){return e.out(po.solid.oidcIssuer)?.values[0]||void 0}function Oo(e){var t=e.out(po.foaf.name).values[0]||e.out(po.schema.name).values[0]||e.out(po.vcard.fn).values[0]||e.out(po.as.name).values[0]||e.out(po.rdfs.label).values[0]||void 0;return void 0===t&&(e.out(po.schema.familyName).values.length&&e.out(po.schema.givenName).values.length?t=e.out(po.schema.givenName).values[0]+" "+e.out(po.schema.familyName).values[0]:e.out(po.foaf.familyName).values.length&&e.out(po.foaf.givenName).values.length?t=e.out(po.foaf.givenName).values[0]+" "+e.out(po.foaf.familyName).values[0]:e.out(po.vcard["family-name"]).values.length&&e.out(po.vcard["given-name"]).values.length?t=e.out(po.vcard["given-name"]).values[0]+" "+e.out(po.vcard["family-name"]).values[0]:e.out(po.foaf.nick).values.length?t=e.out(po.foaf.nick).values:e.out(po.vcard.nickname).values.length&&(t=e.out(po.vcard.nickname).values)),void 0===t?void 0:zi(t)}function Do(e){var t=e.out(po.acl.delegates).values;return t.length?t:void 0}function Mo(e){var t=e.out(po.pim.storage).values;return t.length?t:void 0}function Po(e){var t=e.out(po.as.outbox).values;return t.length?t:void 0}function jo(e){return Uo(e)}function Uo(e){var t=e.out(po.ldp.inbox).values,n=e.out(po.as.inbox).values;return t.length>0?t:n.length>0?n:void 0}function Bo(e){let t=[...e.out(po.foaf.knows).values||[],...e.out(po.schema.knows).values||[]];if(Array.isArray(cr.User.SameAs))for(const n of cr.User.SameAs){const r=e.node(lr.namedNode(n));t.push(...r.out(po.foaf.knows).values||[],...r.out(po.schema.knows).values||[])}const n=Li(t);return n.length?n:void 0}function Fo(e){var t=e.out(po.as.following).values;if(t.length){return DO.U.getItemsList(t[0],{headers:{Accept:'application/ld+json; profile="https://www.w3.org/ns/activitystreams", application/activity+json, text/turtle'},noCredentials:!0}).then(e=>e.length?e:void 0)}}function zo(e){var t=e.out(po.solid.publicTypeIndex).values;return t.length?t:void 0}function qo(e){var t=e.out(po.solid.privateTypeIndex).values;return t.length?t:void 0}function $o(e){var t=e.out(po.pim.preferencesFile).values;return t.length?t:void 0}function Ho(e){var t=e.out(po.as.liked).values;return t.length?t:void 0}function Vo(e){var t=e.out(po.schema.hasOccupation).values;return t.length?t:void 0}function Wo(e){var t=e.out(po.foaf.publications).values;return t.length?t:void 0}function Go(e){var t=e.out(po.foaf.made).values;return t.length?t:void 0}function Jo(e){const t=e.out(po.as.icon).terms,n=e.out(po.as.image).terms;let r;if(n.length||t.length){const i=[...n,...t];for(const t of i){if("NamedNode"===t.termType){r=t.value;break}if("BlankNode"===t.termType){const n=Array.from(e.out().quads()).find(e=>{const n=e.predicate.value,r=e.subject.value;return!(n!==po.as.url.value&&n!==po.as.href.value||r!==t.value&&"_:"+r!==t.value)});if(n){r=n.object.value;break}}}}else{const t=[po.foaf.img,po.schema.image,po.vcard.photo,po.vcard.hasPhoto,po.sioc.avatar,po.foaf.depiction];r=t.flatMap(t=>e.out(t).terms).find(e=>"NamedNode"===e?.termType)?.value}if(r)try{return new URL(r).href}catch{return}}function Ko(e){var t=e.out(po.schema.contributor).values;return t.length?t:void 0}function Zo(e){var t=e.out(po.schema.editor).values;return t.length?t:void 0}function Qo(e){const t=[po.schema.author,po.schema.creator,po.as.author,po.dcterms.creator];for(const n of t){const t=e.out(n).values;if(t.length>0)return t}}function Xo(e){var t=e.out(po.schema.performer).values;return t.length?t:void 0}function Yo(e){return ts(e)||es(e)||function(e){var t=e.out(po.schema.dateCreated).values[0]||e.out(po.dcterms.created).values[0]||e.out(po.dcterms.date).values[0]||e.out(po.prov.generatedAtTime).values[0]||void 0;return void 0===t?void 0:zi(t)}(e)}function es(e){var t=e.out(po.schema.datePublished).values[0]||e.out(po.as.published).values[0]||e.out(po.dcterms.issued).values[0]||e.out(po.dcterms.date).values[0]||e.out(po.prov.generatedAtTime).values[0]||void 0;return void 0===t?void 0:zi(t)}function ts(e){var t=e.out(po.schema.dateModified).values[0]||e.out(po.as.updated).values[0]||e.out(po.dcterms.modified).values[0]||e.out(po.dcterms.date).values[0]||e.out(po.prov.generatedAtTime).values[0]||void 0;return void 0===t?void 0:zi(t)}function rs(e){return e.out(po.dcterms.language).values[0]||e.out(po.dcelements.language).values[0]||e.out(po.schema.inLanguage).values[0]||void 0}function is(e){return e.out(po.dcterms.license).values[0]||e.out(po.schema.license).values[0]||e.out(po.cc.license).values[0]||e.out(po.xhv.license).values[0]||void 0}function ss(e){return e.out(po.dcterms.rights).values[0]||is(e)||void 0}function ls(e){var t=e.out(po.schema.name).values[0]||e.out(po.dcterms.title).values[0]||e.out(po.dcelements.title).values[0]||Oo(e)||e.out(po.as.summary).values[0]||void 0;return void 0===t?void 0:zi(t)}function cs(e){var t=e.out(po.schema.name).values[0]||e.out(po.dcterms.title).values[0]||e.out(po.dcelements.title).values[0]||e.out(po.as.name).values[0]||e.out(po.skos.prefLabel).values[0]||void 0;return void 0===t?void 0:zi(t)}function us(e){return ls(e)||e.term.value}function ds(e){let t=e;return cr.User.Name&&(e==cr.User.IRI||cr.User?.SameAs.includes(e))?t=cr.User.Name:cr.User.Contacts&&cr.User.Contacts[e]&&cr.User.Contacts[e].Name&&(t=cr.User.Contacts[e].Name),t}function hs(e,t){var n={prefLabel:[],xlprefLabel:[],altLabel:[],xlaltLabel:[],notation:[]};(t=t||{}).subjectURI=t.subjectURI||e.term.value,t.lang=t.lang||"en";var r=cr.DocumentURL;Array.from(e.out().quads()).forEach(e=>{var i=e.subject.value,o=e.predicate.value,s=e.object.value;if(i==t.subjectURI)if(o==po.skos.prefLabel.value&&e.object.language&&(""==e.object.language||e.object.language.toLowerCase().startsWith(t.lang)))n.prefLabel.push(s);else if(o==po.skosxl.prefLabel.value){cr.Resource[r].graph.node(lr.namedNode(s)).out().quads().forEach(e=>{var r=e.subject.value,i=e.predicate.value,o=e.object.value;r==s&&i==po.skosxl.literalForm.value&&e.object.language&&(""==e.object.language||e.object.language.toLowerCase().startsWith(t.lang))&&n.xlprefLabel.push(o)})}else if(o==po.skos.altLabel.value&&e.object.language&&(""==e.object.language||e.object.language.toLowerCase().startsWith(t.lang)))n.altLabel.push(s);else if(o==po.skosxl.altLabel.value){cr.Resource[r].graph.node(lr.namedNode(s)).out().quads().forEach(e=>{var r=e.subject.value,i=e.predicate.value,o=e.object.value;r==s&&i==po.skosxl.literalForm.value&&e.object.language&&(""==e.object.language||e.object.language.toLowerCase().startsWith(t.lang))&&n.xlaltLabel.push(o)})}else o==po.skos.notation.value&&n.notation.push(s)});var i=[];for(var o in n)n.hasOwnProperty(o)&&(i=i.concat(n[o].sort().map(e=>zi(e))));return n=Li(i)}function ps(e){var t=e.out(po.schema.description).value||e.out(po.dcterms.description).value||e.out(po.dcelements.description).value||e.out(po.schema.name).value||e.out(po.as.name).value||e.out(po.skos.definition).value||void 0;return void 0===t?void 0:zi(t)}function fs(e){return e.out(po.rdf.type).values}function ms(e,t,n={}){t=t||e,cr.Resource[t]=cr.Resource[t]||{},cr.Resource[t].acl={};var r=xi(t),i=Si(t);return xo("acl",t).then(n=>{if(n.length){var o=n[0],s=gi(r,o);return cr.Resource[t].acl.defaultACLResource=cr.Resource[t].acl.defaultACLResource||s,wo(s).then(t=>{if(void 0===t){var n=i.endsWith("/")?ki(i):r;return void 0!==n?(cr.Resource[e].acl.effectiveContainer=n,ms(e,n)):Promise.reject(new Error("effectiveACLResource not determined. https://solidproject.org/TR/2024/wac-20240512#effective-acl-resource-algorithm"))}return cr.Resource[e].acl.effectiveACLResource=s,cr.Resource[s]={},cr.Resource[s].graph=t,t},function(e){console.log(e)})}return Promise.reject(new Error("defaultACLResource or effectiveACLResource not determined. https://solidproject.org/TR/2024/wac-20240512#effective-acl-resource-algorithm"))},function(e){return console.log(e),Promise.reject(new Error("effectiveACLResource not determined. https://solidproject.org/TR/2024/wac-20240512#effective-acl-resource-algorithm"))})}function gs(e,t){var n={},r=[];return(e=lr.grapoi({dataset:e.dataset})).out().quads().forEach(e=>{r.push(e.subject.value)}),(r=Li(r)).forEach(r=>{var i=e.node(lr.namedNode(r));if(i.out(po.rdf.type).values.includes(po.acl.Authorization.value)){var o=i.term.value,s={};if(Object.keys(t).forEach(e=>{i.out(po.acl[e]).values.includes(t[e])&&(s[e]=t[e])}),Object.keys(t).every(e=>Object.keys(s).includes(e))){var a={};["agent","agentClass","agentGroup","accessTo","default","mode","origin"].forEach(e=>{a[e]=i.out(po.acl[e]).values}),n[o]=a}}}),n}const vs=document.createElement("i");function ys(e){const t="&"+e+";";vs.innerHTML=t;const n=vs.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function bs(e,t,n,r){const i=e.length;let o,s=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function ws(e,t){return e.length>0?(bs(e,e.length,0,t),e):t}const _s={}.hasOwnProperty;function xs(e){const t={};let n=-1;for(;++n<e.length;)Ss(t,e[n]);return t}function Ss(e,t){let n;for(n in t){const r=(_s.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){_s.call(r,o)||(r[o]=[]);const e=i[o];Cs(r[o],Array.isArray(e)?e:e?[e]:[])}}}function Cs(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);bs(e,0,0,r)}function ks(e){const t={};let n=-1;for(;++n<e.length;)Es(t,e[n]);return t}function Es(e,t){let n;for(n in t){const r=(_s.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i)r[o]=i[o]}}const As={'"':"quot","&":"amp","<":"lt",">":"gt"};function Ts(e){return e.replace(/["&<>]/g,function(e){return"&"+As[e]+";"})}function Is(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rs=qs(/[A-Za-z]/),Ls=qs(/[\dA-Za-z]/),Ns=qs(/[#-'*+\--9=?A-Z^-~]/);function Os(e){return null!==e&&(e<32||127===e)}const Ds=qs(/\d/),Ms=qs(/[\dA-Fa-f]/),Ps=qs(/[!-/:-@[-`{-~]/);function js(e){return null!==e&&e<-2}function Us(e){return null!==e&&(e<0||32===e)}function Bs(e){return-2===e||-1===e||32===e}const Fs=qs(/\p{P}|\p{S}/u),zs=qs(/\s/);function qs(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function $s(e,t){const n=Ts(function(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(37===o&&Ls(e.charCodeAt(n+1))&&Ls(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(s=String.fromCharCode(o,t),i=1):s="\ufffd"}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}(e||""));if(!t)return n;const r=n.indexOf(":"),i=n.indexOf("?"),o=n.indexOf("#"),s=n.indexOf("/");return r<0||s>-1&&r>s||i>-1&&r>i||o>-1&&r>o||t.test(n.slice(0,r))?n:""}const Hs={}.hasOwnProperty,Vs=/^(https?|ircs?|mailto|xmpp)$/i,Ws=/^https?$/i;function Gs(e){const t=e||{};let n=!0;const r={},i=[[]],o=[],s=[],a=ks([{enter:{blockQuote:function(){s.push(!1),b(),g("<blockquote>")},codeFenced:function(){b(),g("<pre><code"),h("fencesCount",0)},codeFencedFenceInfo:f,codeFencedFenceMeta:f,codeIndented:function(){b(),g("<pre><code>")},codeText:function(){h("inCodeText",!0),g("<code>")},content:function(){h("slurpAllLineEndings",!0)},definition:function(){f(),o.push({})},definitionDestinationString:function(){f(),h("ignoreEncode",!0)},definitionLabelString:f,definitionTitleString:f,emphasis:function(){g("<em>")},htmlFlow:function(){b(),T()},htmlText:T,image:function(){o.push({image:!0}),n=void 0},label:f,link:function(){o.push({})},listItemMarker:function(){p("expectFirstItem")?g(">"):x();b(),g("<li>"),h("expectFirstItem"),h("lastWasTag")},listItemValue:function(e){if(p("expectFirstItem")){const t=Number.parseInt(this.sliceSerialize(e),10);1!==t&&g(' start="'+w(String(t))+'"')}},listOrdered:function(e){s.push(!e._loose),b(),g("<ol"),h("expectFirstItem",!0)},listUnordered:function(e){s.push(!e._loose),b(),g("<ul"),h("expectFirstItem",!0)},paragraph:function(){s[s.length-1]||(b(),g("<p>"));h("slurpAllLineEndings")},reference:f,resource:function(){f(),o[o.length-1].destination=""},resourceDestinationString:function(){f(),h("ignoreEncode",!0)},resourceTitleString:f,setextHeading:function(){f(),h("slurpAllLineEndings")},strong:function(){g("<strong>")}},exit:{atxHeading:function(){g("</h"+p("headingRank")+">"),h("headingRank")},atxHeadingSequence:function(e){if(p("headingRank"))return;h("headingRank",this.sliceSerialize(e).length),b(),g("<h"+p("headingRank")+">")},autolinkEmail:function(e){const t=this.sliceSerialize(e);g('<a href="'+$s("mailto:"+t)+'">'),v(w(t)),g("</a>")},autolinkProtocol:function(e){const n=this.sliceSerialize(e);g('<a href="'+$s(n,t.allowDangerousProtocol?void 0:Vs)+'">'),v(w(n)),g("</a>")},blockQuote:function(){s.pop(),b(),g("</blockquote>"),h("slurpAllLineEndings")},characterEscapeValue:k,characterReferenceMarkerHexadecimal:I,characterReferenceMarkerNumeric:I,characterReferenceValue:function(e){const t=this.sliceSerialize(e);v(w(p("characterReferenceType")?function(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}(t,"characterReferenceMarkerNumeric"===p("characterReferenceType")?10:16):ys(t))),h("characterReferenceType")},codeFenced:S,codeFencedFence:function(){const e=p("fencesCount")||0;e||(g(">"),h("slurpOneLineEnding",!0));h("fencesCount",e+1)},codeFencedFenceInfo:function(){g(' class="language-'+m()+'"')},codeFencedFenceMeta:_,codeFlowValue:function(e){v(w(this.sliceSerialize(e))),h("flowCodeSeenData",!0)},codeIndented:S,codeText:function(){h("inCodeText"),g("</code>")},codeTextData:k,data:k,definition:function(){const e=Is(o[o.length-1].labelId);m(),Hs.call(r,e)||(r[e]=o[o.length-1]);o.pop()},definitionDestinationString:function(){o[o.length-1].destination=m(),h("ignoreEncode")},definitionLabelString:function(e){m(),o[o.length-1].labelId=this.sliceSerialize(e)},definitionTitleString:function(){o[o.length-1].title=m()},emphasis:function(){g("</em>")},hardBreakEscape:E,hardBreakTrailing:E,htmlFlow:A,htmlFlowData:k,htmlText:A,htmlTextData:k,image:C,label:function(){o[o.length-1].label=m()},labelText:function(e){o[o.length-1].labelId=this.sliceSerialize(e)},lineEnding:function(e){if(p("slurpAllLineEndings"))return;if(p("slurpOneLineEnding"))return void h("slurpOneLineEnding");if(p("inCodeText"))return void v(" ");v(w(this.sliceSerialize(e)))},link:C,listOrdered:function(){x(),s.pop(),y(),g("</ol>")},listUnordered:function(){x(),s.pop(),y(),g("</ul>")},paragraph:function(){s[s.length-1]?h("slurpAllLineEndings",!0):g("</p>")},reference:_,referenceString:function(e){o[o.length-1].referenceId=this.sliceSerialize(e)},resource:_,resourceDestinationString:function(){o[o.length-1].destination=m(),h("ignoreEncode")},resourceTitleString:function(){o[o.length-1].title=m()},setextHeading:function(){const e=m();b(),g("<h"+p("headingRank")+">"),v(e),g("</h"+p("headingRank")+">"),h("slurpAllLineEndings"),h("headingRank")},setextHeadingLineSequence:function(e){h("headingRank",61===this.sliceSerialize(e).charCodeAt(0)?1:2)},setextHeadingText:function(){h("slurpAllLineEndings",!0)},strong:function(){g("</strong>")},thematicBreak:function(){b(),g("<hr />")}}},...t.htmlExtensions||[]]),l={definitions:r,tightStack:s},c={buffer:f,encode:w,getData:p,lineEndingIfNeeded:b,options:t,raw:v,resume:m,setData:h,tag:g};let u=t.defaultLineEnding;return function(e){let t=-1,n=0;const r=[];let o=[],s=[];for(;++t<e.length;)u||"lineEnding"!==e[t][1].type&&"lineEndingBlank"!==e[t][1].type||(u=e[t][2].sliceSerialize(e[t][1])),"listOrdered"!==e[t][1].type&&"listUnordered"!==e[t][1].type||("enter"===e[t][0]?r.push(t):d(e.slice(r.pop(),t))),"definition"===e[t][1].type&&("enter"===e[t][0]?(s=ws(s,e.slice(n,t)),n=t):(o=ws(o,e.slice(n,t+1)),n=t+1));o=ws(o,s),o=ws(o,e.slice(n)),t=-1;const l=o;a.enter.null&&a.enter.null.call(c);for(;++t<e.length;){const e=a[l[t][0]],n=l[t][1].type,r=e[n];Hs.call(e,n)&&r&&r.call({sliceSerialize:l[t][2].sliceSerialize,...c},l[t][1])}a.exit.null&&a.exit.null.call(c);return i[0].join("")};function d(e){const t=e.length;let n,r=0,i=0,o=!1;for(;++r<t;){const t=e[r];if(t[1]._container)n=void 0,"enter"===t[0]?i++:i--;else switch(t[1].type){case"listItemPrefix":"exit"===t[0]&&(n=!0);break;case"linePrefix":break;case"lineEndingBlank":"enter"!==t[0]||i||(n?n=void 0:o=!0);break;default:n=void 0}}e[0][1]._loose=o}function h(e,t){l[e]=t}function p(e){return l[e]}function f(){i.push([])}function m(){return i.pop().join("")}function g(e){n&&(h("lastWasTag",!0),i[i.length-1].push(e))}function v(e){h("lastWasTag"),i[i.length-1].push(e)}function y(){v(u||"\n")}function b(){const e=i[i.length-1],t=e[e.length-1],n=t?t.charCodeAt(t.length-1):null;10!==n&&13!==n&&null!==n&&y()}function w(e){return p("ignoreEncode")?e:Ts(e)}function _(){m()}function x(){p("lastWasTag")&&!p("slurpAllLineEndings")&&b(),g("</li>"),h("slurpAllLineEndings")}function S(){const e=p("fencesCount");void 0!==e&&e<2&&l.tightStack.length>0&&!p("lastWasTag")&&y(),p("flowCodeSeenData")&&b(),g("</code></pre>"),void 0!==e&&e<2&&b(),h("flowCodeSeenData"),h("fencesCount"),h("slurpOneLineEnding")}function C(){let e=o.length-1;const i=o[e],s=i.referenceId||i.labelId,a=void 0===i.destination?r[Is(s)]:i;for(n=!0;e--;)if(o[e].image){n=void 0;break}i.image?(g('<img src="'+$s(a.destination,t.allowDangerousProtocol?void 0:Ws)+'" alt="'),v(i.label),g('"')):g('<a href="'+$s(a.destination,t.allowDangerousProtocol?void 0:Vs)+'"'),g(a.title?' title="'+a.title+'"':""),i.image?g(" />"):(g(">"),v(i.label),g("</a>")),o.pop()}function k(e){v(w(this.sliceSerialize(e)))}function E(){g("<br />")}function A(){h("ignoreEncode")}function T(){t.allowDangerousHtml&&h("ignoreEncode",!0)}function I(e){h("characterReferenceType",e.type)}}function Js(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(Bs(r))return e.enter(n),s(r);return t(r)};function s(r){return Bs(r)&&o++<i?(e.consume(r),s):(e.exit(n),t(r))}}const Ks={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Js(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):js(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const Zs={tokenize:function(e){const t=this,n=[];let r,i,o,s=0;return a;function a(r){if(s<n.length){const i=n[s];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&y();const n=t.events.length;let i,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){i=t.events[o][1].end;break}v(s);let a=n;for(;a<t.events.length;)t.events[a][1].end={...i},a++;return bs(t.events,o+1,0,t.events.slice(n)),t.events.length=a,c(e)}return a(e)}function c(i){if(s===n.length){if(!r)return h(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Qs,u,d)(i)}function u(e){return r&&y(),v(s),h(e)}function d(e){return t.parser.lazy[t.now().line]=s!==n.length,o=t.now().offset,f(e)}function h(n){return t.containerState={},e.attempt(Qs,p,f)(n)}function p(e){return s++,n.push([t.currentConstruct,t.containerState]),h(e)}function f(n){return null===n?(r&&y(),v(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),v(0),void e.consume(n)):js(n)?(e.consume(n),g(e.exit("chunkFlow")),s=0,t.interrupt=void 0,a):(e.consume(n),m)}function g(e,n){const a=t.sliceStream(e);if(n&&a.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(a),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let i,a,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){a=t.events[l][1].end;break}i=!0}for(v(s),e=n;e<t.events.length;)t.events[e][1].end={...a},e++;bs(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function v(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function y(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Qs={tokenize:function(e,t,n){return Js(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const Xs={partial:!0,tokenize:function(e,t,n){return function(t){return Bs(t)?Js(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||js(e)?t(e):n(e)}}};class Ys{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&ea(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ea(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ea(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);ea(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ea(this.left,t.reverse())}}}function ea(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function ta(e){const t={};let n,r,i,o,s,a,l,c=-1;const u=new Ys(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(a=n[1]._tokenizer.events,i=0,i<a.length&&"lineEndingBlank"===a[i][1].type&&(i+=2),i<a.length&&"content"===a[i][1].type))for(;++i<a.length&&"content"!==a[i][1].type;)"chunkText"===a[i][1].type&&(a[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,na(u,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--;)if(o=u.get(i),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(r&&(u.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);else if("linePrefix"!==o[1].type&&"listItemIndent"!==o[1].type)break;r&&(n[1].end={...u.get(r)[1].start},s=u.slice(r,c),s.unshift(n),u.splice(r,c-r+1,s))}}return bs(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function na(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const a=s.events,l=[],c={};let u,d,h=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&s.defineSkip(p.start),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<a.length;)"exit"===a[h][0]&&"enter"===a[h-1][0]&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(s.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=a.slice(g[h],g[h+1]),n=o.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return c}const ra={resolve:function(e){return ta(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):js(t)?e.check(ia,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},ia={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Js(e,i,"linePrefix")};function i(i){if(null===i||js(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}};const oa={tokenize:function(e){const t=this,n=e.attempt(Xs,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,Js(e,e.attempt(this.parser.constructs.flow,r,e.attempt(ra,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const sa={resolveAll:ua()},aa=ca("string"),la=ca("text");function ca(e){return{resolveAll:ua("text"===e?da:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,o,s);return o;function o(e){return l(e)?i(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),a)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function ua(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function da(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let o,s=i.length,a=-1,l=0;for(;s--;){const e=i[s];if("string"==typeof e){for(a=e.length;32===e.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===e)o=!0,l++;else if(-1!==e){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const i={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...i.start},r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}const ha={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),s(o)):i>=3&&(null===o||js(o))?(e.exit("thematicBreak"),t(o)):n(o)}function s(t){return t===r?(e.consume(t),i++,s):(e.exit("thematicBreakSequence"),Bs(t)?Js(e,o,"whitespace")(t):o(t))}}};const pa={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Xs,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Js(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){if(r.containerState.furtherBlankLines||!Bs(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(ma,t,i)(n)});function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Js(e,e.attempt(pa,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,s=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Ds(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(ha,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return n(t)};function a(t){return Ds(t)&&++s<10?(e.consume(t),a):(!r.interrupt||s<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Xs,r.interrupt?n:c,e.attempt(fa,d,u))}function c(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function u(t){return Bs(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},fa={partial:!0,tokenize:function(e,t,n){const r=this;return Js(e,function(e){const i=r.events[r.events.length-1];return!Bs(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},ma={partial:!0,tokenize:function(e,t,n){const r=this;return Js(e,function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const ga={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Bs(t))return Js(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(ga,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Bs(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};function va(e,t,n,r,i,o,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||Os(t))return n(t);return e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(a),d(t)):null===t||60===t||js(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(i){return u||null!==i&&41!==i&&!Us(i)?u<c&&40===i?(e.consume(i),u++,f):41===i?(e.consume(i),u--,f):null===i||32===i||40===i||Os(i)?n(i):(e.consume(i),92===i?m:f):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(i))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function ya(e,t,n,r,i,o){const s=this;let a,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),c};function c(d){return l>999||null===d||91===d||93===d&&!a||94===d&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):js(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||js(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a||(a=!Bs(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function ba(e,t,n,r,i,o){let s;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),s=40===t?41:t,a;return n(t)};function a(n){return n===s?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===s?(e.exit(o),a(s)):null===t?n(t):js(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Js(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===s||null===t||js(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===s||92===t?(e.consume(t),c):c(t)}}function wa(e,t){let n;return function r(i){if(js(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Bs(i))return Js(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}const _a={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return ya.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return i=Is(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):n(t)}function s(t){return Us(t)?wa(e,a)(t):a(t)}function a(t){return va(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(xa,c,c)(t)}function c(t){return Bs(t)?Js(e,u,"whitespace")(t):u(t)}function u(o){return null===o||js(o)?(e.exit("definition"),r.parser.defined.push(i),t(o)):n(o)}}},xa={partial:!0,tokenize:function(e,t,n){return function(t){return Us(t)?wa(e,r)(t):n(t)};function r(t){return ba(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Bs(t)?Js(e,o,"whitespace")(t):o(t)}function o(e){return null===e||js(e)?t(e):n(e)}}};const Sa={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),Js(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?a(t):js(t)?e.attempt(Ca,o,a)(t):(e.enter("codeFlowValue"),s(t))}function s(t){return null===t||js(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),s)}function a(n){return e.exit("codeIndented"),t(n)}}},Ca={partial:!0,tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):js(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Js(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):js(e)?i(e):n(e)}}};const ka={name:"headingAtx",resolve:function(e,t){let n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},bs(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||Us(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||js(n)?(e.exit("atxHeading"),t(n)):Bs(n)?Js(e,o,"whitespace")(n):(e.enter("atxHeadingText"),a(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function a(t){return null===t||35===t||Us(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),a)}}};const Ea={name:"setextUnderline",resolveTo:function(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);const s={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",s,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=s;return e.push(["exit",s,t]),e},tokenize:function(e,t,n){const r=this;let i;return function(t){let s,a=r.events.length;for(;a--;)if("lineEnding"!==r.events[a][1].type&&"linePrefix"!==r.events[a][1].type&&"content"!==r.events[a][1].type){s="paragraph"===r.events[a][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||s))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===i?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Bs(t)?Js(e,s,"lineSuffix")(t):s(t))}function s(r){return null===r||js(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const Aa=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ta=["pre","script","style","textarea"],Ia={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let i,o,s,a,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(a){return 33===a?(e.consume(a),u):47===a?(e.consume(a),o=!0,p):63===a?(e.consume(a),i=3,r.interrupt?t:D):Rs(a)?(e.consume(a),s=String.fromCharCode(a),f):n(a)}function u(o){return 45===o?(e.consume(o),i=2,d):91===o?(e.consume(o),i=5,a=0,h):Rs(o)?(e.consume(o),i=4,r.interrupt?t:D):n(o)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:D):n(i)}function h(i){const o="CDATA[";return i===o.charCodeAt(a++)?(e.consume(i),6===a?r.interrupt?t:E:h):n(i)}function p(t){return Rs(t)?(e.consume(t),s=String.fromCharCode(t),f):n(t)}function f(a){if(null===a||47===a||62===a||Us(a)){const l=47===a,c=s.toLowerCase();return l||o||!Ta.includes(c)?Aa.includes(s.toLowerCase())?(i=6,l?(e.consume(a),m):r.interrupt?t(a):E(a)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(a):o?g(a):v(a)):(i=1,r.interrupt?t(a):E(a))}return 45===a||Ls(a)?(e.consume(a),s+=String.fromCharCode(a),f):n(a)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:E):n(i)}function g(t){return Bs(t)?(e.consume(t),g):C(t)}function v(t){return 47===t?(e.consume(t),C):58===t||95===t||Rs(t)?(e.consume(t),y):Bs(t)?(e.consume(t),v):C(t)}function y(t){return 45===t||46===t||58===t||95===t||Ls(t)?(e.consume(t),y):b(t)}function b(t){return 61===t?(e.consume(t),w):Bs(t)?(e.consume(t),b):v(t)}function w(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,_):Bs(t)?(e.consume(t),w):x(t)}function _(t){return t===l?(e.consume(t),l=null,S):null===t||js(t)?n(t):(e.consume(t),_)}function x(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Us(t)?b(t):(e.consume(t),x)}function S(e){return 47===e||62===e||Bs(e)?v(e):n(e)}function C(t){return 62===t?(e.consume(t),k):n(t)}function k(t){return null===t||js(t)?E(t):Bs(t)?(e.consume(t),k):n(t)}function E(t){return 45===t&&2===i?(e.consume(t),R):60===t&&1===i?(e.consume(t),L):62===t&&4===i?(e.consume(t),M):63===t&&3===i?(e.consume(t),D):93===t&&5===i?(e.consume(t),O):!js(t)||6!==i&&7!==i?null===t||js(t)?(e.exit("htmlFlowData"),A(t)):(e.consume(t),E):(e.exit("htmlFlowData"),e.check(Ra,P,A)(t))}function A(t){return e.check(La,T,P)(t)}function T(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||js(t)?A(t):(e.enter("htmlFlowData"),E(t))}function R(t){return 45===t?(e.consume(t),D):E(t)}function L(t){return 47===t?(e.consume(t),s="",N):E(t)}function N(t){if(62===t){const n=s.toLowerCase();return Ta.includes(n)?(e.consume(t),M):E(t)}return Rs(t)&&s.length<8?(e.consume(t),s+=String.fromCharCode(t),N):E(t)}function O(t){return 93===t?(e.consume(t),D):E(t)}function D(t){return 62===t?(e.consume(t),M):45===t&&2===i?(e.consume(t),D):E(t)}function M(t){return null===t||js(t)?(e.exit("htmlFlowData"),P(t)):(e.consume(t),M)}function P(n){return e.exit("htmlFlow"),t(n)}}},Ra={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Xs,t,n)}}},La={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(js(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const Na={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},Oa={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,i={partial:!0,tokenize:function(e,t,n){let i=0;return s;function s(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Bs(t)?Js(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===o?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===o?(i++,e.consume(t),u):i>=a?(e.exit("codeFencedFenceSequence"),Bs(t)?Js(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||js(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let o,s=0,a=0;return function(t){return function(t){const n=r.events[r.events.length-1];return s=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(a++,e.consume(t),l):a<3?n(t):(e.exit("codeFencedFenceSequence"),Bs(t)?Js(e,c,"whitespace")(t):c(t))}function c(n){return null===n||js(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(Na,p,y)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||js(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Bs(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Js(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),u)}function d(t){return null===t||js(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||js(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===o?n(t):(e.consume(t),h)}function p(t){return e.attempt(i,y,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return s>0&&Bs(t)?Js(e,g,"linePrefix",s+1)(t):g(t)}function g(t){return null===t||js(t)?e.check(Na,p,y)(t):(e.enter("codeFlowValue"),v(t))}function v(t){return null===t||js(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),v)}function y(n){return e.exit("codeFenced"),t(n)}}};const Da={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,o,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=Ls,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=Ms,c):(e.enter("characterReferenceValue"),i=7,o=Ds,c(t))}function c(a){if(59===a&&s){const i=e.exit("characterReferenceValue");return o!==Ls||ys(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)}return o(a)&&s++<i?(e.consume(a),c):n(a)}}};const Ma={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Ps(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Pa={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Js(e,t,"linePrefix")}}};function ja(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Ua={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&bs(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,i,o,s=e.length,a=0;for(;s--;)if(n=e[s][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[s][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[s][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=s,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(i=s);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[r][1].start},end:{...e[i][1].end}},u={type:"labelText",start:{...e[r+a+2][1].end},end:{...e[i-2][1].start}};return o=[["enter",l,t],["enter",c,t]],o=ws(o,e.slice(r+1,r+a+3)),o=ws(o,[["enter",u,t]]),o=ws(o,ja(t.parser.constructs.insideSpan.null,e.slice(r+a+4,i-3),t)),o=ws(o,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),o=ws(o,e.slice(i+1)),o=ws(o,[["exit",l,t]]),bs(e,r,e.length,o),e},tokenize:function(e,t,n){const r=this;let i,o,s=r.events.length;for(;s--;)if(("labelImage"===r.events[s][1].type||"labelLink"===r.events[s][1].type)&&!r.events[s][1]._balanced){i=r.events[s][1];break}return function(t){if(!i)return n(t);if(i._inactive)return u(t);return o=r.parser.defined.includes(Is(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a};function a(t){return 40===t?e.attempt(Ba,c,o?c:u)(t):91===t?e.attempt(Fa,c,o?l:u)(t):o?c(t):u(t)}function l(t){return e.attempt(za,c,u)(t)}function c(e){return t(e)}function u(e){return i._balanced=!0,n(e)}}},Ba={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Us(t)?wa(e,i)(t):i(t)}function i(t){return 41===t?c(t):va(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return Us(t)?wa(e,a)(t):c(t)}function s(e){return n(e)}function a(t){return 34===t||39===t||40===t?ba(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Us(t)?wa(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},Fa={tokenize:function(e,t,n){const r=this;return function(t){return ya.call(r,e,i,o,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(Is(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},za={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const qa={name:"labelStartImage",resolveAll:Ua.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};function $a(e){return null===e||Us(e)||zs(e)?1:Fs(e)?2:void 0}const Ha={name:"attention",resolveAll:function(e,t){let n,r,i,o,s,a,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;a=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d={...e[n][1].end},h={...e[u][1].start};Va(d,-a),Va(h,a),o={type:a>1?"strongSequence":"emphasisSequence",start:d,end:{...e[n][1].end}},s={type:a>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:h},i={type:a>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[u][1].start}},r={type:a>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},e[n][1].end={...o.start},e[u][1].start={...s.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=ws(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=ws(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=ws(l,ja(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=ws(l,[["exit",i,t],["enter",s,t],["exit",s,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=ws(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,bs(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=$a(r);let o;return function(t){return o=t,e.enter("attentionSequence"),s(t)};function s(a){if(a===o)return e.consume(a),s;const l=e.exit("attentionSequence"),c=$a(a),u=!c||2===c&&i||n.includes(a),d=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===o?u:u&&(i||!d)),l._close=Boolean(42===o?d:d&&(c||!u)),t(a)}}};function Va(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Wa={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Rs(t)?(e.consume(t),o):64===t?n(t):l(t)}function o(e){return 43===e||45===e||46===e||Ls(e)?(r=1,s(e)):l(e)}function s(t){return 58===t?(e.consume(t),r=0,a):(43===t||45===t||46===t||Ls(t))&&r++<32?(e.consume(t),s):(r=0,l(t))}function a(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Os(r)?n(r):(e.consume(r),a)}function l(t){return 64===t?(e.consume(t),c):Ns(t)?(e.consume(t),l):n(t)}function c(e){return Ls(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Ls(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const Ga={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),a};function a(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),w):63===t?(e.consume(t),y):Rs(t)?(e.consume(t),S):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),o=0,p):Rs(t)?(e.consume(t),v):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):js(t)?(s=u,N(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?L(e):45===e?d(e):u(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):js(t)?(s=f,N(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?L(t):93===t?(e.consume(t),g):f(t)}function v(t){return null===t||62===t?L(t):js(t)?(s=v,N(t)):(e.consume(t),v)}function y(t){return null===t?n(t):63===t?(e.consume(t),b):js(t)?(s=y,N(t)):(e.consume(t),y)}function b(e){return 62===e?L(e):y(e)}function w(t){return Rs(t)?(e.consume(t),_):n(t)}function _(t){return 45===t||Ls(t)?(e.consume(t),_):x(t)}function x(t){return js(t)?(s=x,N(t)):Bs(t)?(e.consume(t),x):L(t)}function S(t){return 45===t||Ls(t)?(e.consume(t),S):47===t||62===t||Us(t)?C(t):n(t)}function C(t){return 47===t?(e.consume(t),L):58===t||95===t||Rs(t)?(e.consume(t),k):js(t)?(s=C,N(t)):Bs(t)?(e.consume(t),C):L(t)}function k(t){return 45===t||46===t||58===t||95===t||Ls(t)?(e.consume(t),k):E(t)}function E(t){return 61===t?(e.consume(t),A):js(t)?(s=E,N(t)):Bs(t)?(e.consume(t),E):C(t)}function A(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,T):js(t)?(s=A,N(t)):Bs(t)?(e.consume(t),A):(e.consume(t),I)}function T(t){return t===i?(e.consume(t),i=void 0,R):null===t?n(t):js(t)?(s=T,N(t)):(e.consume(t),T)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Us(t)?C(t):(e.consume(t),I)}function R(e){return 47===e||62===e||Us(e)?C(e):n(e)}function L(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function N(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return Bs(t)?Js(e,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):D(t)}function D(t){return e.enter("htmlTextData"),s(t)}}};const Ja={name:"labelStartLink",resolveAll:Ua.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const Ka={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return js(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const Za={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),s(t)};function s(t){return 96===t?(e.consume(t),o++,s):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):js(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||js(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}}};const Qa={42:pa,43:pa,45:pa,48:pa,49:pa,50:pa,51:pa,52:pa,53:pa,54:pa,55:pa,56:pa,57:pa,62:ga},Xa={91:_a},Ya={[-2]:Sa,[-1]:Sa,32:Sa},el={35:ka,42:ha,45:[Ea,ha],60:Ia,61:Ea,95:ha,96:Oa,126:Oa},tl={38:Da,92:Ma},nl={[-5]:Pa,[-4]:Pa,[-3]:Pa,33:qa,38:Da,42:Ha,60:[Wa,Ga],91:Ja,92:[Ka,Ma],93:Ua,95:Ha,96:Za},rl={null:[Ha,sa]},il={null:[42,95]},ol={null:[]};function sl(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let s=[],a=[],l=!0;const c={attempt:y(function(e,t){b(e,t.from)}),check:y(v),consume:function(e){js(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,w()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),a.push(n),n},exit:function(e){const t=a.pop();return t.end=f(),u.events.push(["exit",t,u]),t},interrupt:y(v,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){i[e.line]=e.column,w()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if("string"==typeof o)s=o;else switch(o){case-5:s="\r";break;case-4:s="\n";break;case-3:s="\r\n";break;case-2:s=t?" ":"\t";break;case-1:if(!t&&i)continue;s=" ";break;default:s=String.fromCharCode(o)}i=-2===o,r.push(s)}return r.join("")}(p(e),t)},sliceStream:p,write:function(e){if(s=ws(s,e),m(),null!==s[s.length-1])return[];return b(t,0),u.events=ja(o,u.events,u),u.events}};let d,h=t.tokenize.call(u,c);return t.resolveAll&&o.push(t),u;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const e=s[0];"string"==typeof e?s[0]=e.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}(s,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:i,offset:o}=r;return{_bufferIndex:e,_index:t,line:n,column:i,offset:o}}function m(){let e;for(;r._index<s.length;){const t=s[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,h=h(e)}function v(e,t){t.restore()}function y(e,t){return function(n,i,o){let s,d,h,p;return Array.isArray(n)?m(n):"tokenize"in n?m([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return m([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function m(e){return s=e,d=0,0===e.length?o:g(e[d])}function g(e){return function(n){p=function(){const e=f(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(a);return{from:i,restore:s};function s(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,a=o,w()}}(),h=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return y(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,v,y)(n)}}function v(t){return l=!0,e(h,p),i}function y(e){return l=!0,p.restore(),++d<s.length?g(s[d]):o}}}function b(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&bs(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function w(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const al=/[\0\t\n\r]/g;function ll(t,n,r){return"string"!=typeof n&&(r=n,n=void 0),Gs(r)(function(e){for(;!ta(e););return e}(function(t){const n={constructs:xs([e,...(t||{}).extensions||[]]),content:r(Ks),defined:[],document:r(Zs),flow:r(oa),lazy:{},string:r(aa),text:r(la)};return n;function r(e){return function(t){return sl(n,e,t)}}}(r).document().write(function(){let e,t=1,n="",r=!0;return function(i,o,s){const a=[];let l,c,u,d,h;for(i=n+("string"==typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(al.lastIndex=u,l=al.exec(i),d=l&&void 0!==l.index?l.index:i.length,h=i.charCodeAt(d),!l){n=i.slice(u);break}if(10===h&&u===d&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),u<d&&(a.push(i.slice(u,d)),t+=d-u),h){case 0:a.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),a.push(-2);t++<c;)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return s&&(e&&a.push(-5),n&&a.push(n),a.push(null)),a}}()(t,n,!0))))}const cl={tokenize:function(e,t,n){let r=0;return function t(o){if((87===o||119===o)&&r<3)return r++,e.consume(o),t;if(46===o&&3===r)return e.consume(o),i;return n(o)};function i(e){return null===e?n(e):t(e)}},partial:!0},ul={tokenize:function(e,t,n){let r,i,o;return s;function s(t){return 46===t||95===t?e.check(hl,l,a)(t):null===t||Us(t)||zs(t)||45!==t&&Fs(t)?l(t):(o=!0,e.consume(t),s)}function a(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),s}function l(e){return i||r||!o?n(e):t(e)}},partial:!0},dl={tokenize:function(e,t){let n=0,r=0;return i;function i(s){return 40===s?(n++,e.consume(s),i):41===s&&r<n?o(s):33===s||34===s||38===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||60===s||63===s||93===s||95===s||126===s?e.check(hl,t,o)(s):null===s||Us(s)||zs(s)?t(s):(e.consume(s),i)}function o(t){return 41===t&&r++,e.consume(t),i}},partial:!0},hl={tokenize:function(e,t,n){return r;function r(s){return 33===s||34===s||39===s||41===s||42===s||44===s||46===s||58===s||59===s||63===s||95===s||126===s?(e.consume(s),r):38===s?(e.consume(s),o):93===s?(e.consume(s),i):60===s||null===s||Us(s)||zs(s)?t(s):n(s)}function i(e){return null===e||40===e||91===e||Us(e)||zs(e)?t(e):r(e)}function o(e){return Rs(e)?s(e):n(e)}function s(t){return 59===t?(e.consume(t),r):Rs(t)?(e.consume(t),s):n(t)}},partial:!0},pl={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return Ls(e)?n(e):t(e)}},partial:!0},fl={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!bl.call(r,r.previous)||Sl(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(cl,e.attempt(ul,e.attempt(dl,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:bl},ml={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let i="",o=!1;return function(t){if((72===t||104===t)&&wl.call(r,r.previous)&&!Sl(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),s;return n(t)};function s(t){if(Rs(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),s;if(58===t){const n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),a}return n(t)}function a(t){return 47===t?(e.consume(t),o?l:(o=!0,a)):n(t)}function l(t){return null===t||Os(t)||Us(t)||zs(t)||Fs(t)?n(t):e.attempt(ul,e.attempt(dl,c),n)(t)}function c(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:wl},gl={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let i,o;return function(t){if(!xl(t)||!_l.call(r,r.previous)||Sl(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),s(t)};function s(t){return xl(t)?(e.consume(t),s):64===t?(e.consume(t),a):n(t)}function a(t){return 46===t?e.check(pl,c,l)(t):45===t||95===t||Ls(t)?(o=!0,e.consume(t),a):c(t)}function l(t){return e.consume(t),i=!0,a}function c(s){return o&&i&&Rs(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(s)):n(s)}},previous:_l},vl={};let yl=48;for(;yl<123;)vl[yl]=gl,yl++,58===yl?yl=65:91===yl&&(yl=97);function bl(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||Us(e)}function wl(e){return!Rs(e)}function _l(e){return!(47===e||xl(e))}function xl(e){return 43===e||45===e||46===e||95===e||Ls(e)}function Sl(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}function Cl(e){Al.call(this,e,"http://")}function kl(e){Al.call(this,e,"mailto:")}function El(e){Al.call(this,e)}function Al(e,t){const n=this.sliceSerialize(e);this.tag('<a href="'+$s((t||"")+n)+'">'),this.raw(this.encode(n)),this.tag("</a>")}vl[43]=gl,vl[45]=gl,vl[46]=gl,vl[95]=gl,vl[72]=[gl,ml],vl[104]=[gl,ml],vl[87]=[gl,fl],vl[119]=[gl,fl];const Tl={tokenize:function(e,t,n){const r=this;return Js(e,function(e){const i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function Il(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;i--;){const e=r.events[i][1];if("labelImage"===e.type){s=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(i){if(!s||!s._balanced)return n(i);const a=Is(r.sliceSerialize({start:s.end,end:r.now()}));if(94!==a.codePointAt(0)||!o.includes(a.slice(1)))return n(i);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(i),e.exit("gfmFootnoteCallLabelMarker"),t(i)}}function Rl(e,t){let n,r=e.length;for(;r--;)if("labelImage"===e[r][1].type&&"enter"===e[r][0]){n=e[r][1];break}e[r+1][1].type="data",e[r+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},e[r+3][1].start),end:Object.assign({},e[e.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},e[r+3][1].end),end:Object.assign({},e[r+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[e[r+1],e[r+2],["enter",i,t],e[r+3],e[r+4],["enter",o,t],["exit",o,t],["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",i,t]];return e.splice(r,e.length-r+1,...l),e}function Ll(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,s=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),a};function a(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(a){if(s>999||93===a&&!o||null===a||91===a||Us(a))return n(a);if(93===a){e.exit("chunkString");const o=e.exit("gfmFootnoteCallString");return i.includes(Is(r.sliceSerialize(o)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(a),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(a)}return Us(a)||(o=!0),s++,e.consume(a),92===a?c:l}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,l):l(t)}}function Nl(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,s,a=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(t)}function c(t){if(a>999||93===t&&!s||null===t||91===t||Us(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return o=Is(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return Us(t)||(s=!0),a++,e.consume(t),92===t?u:c}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,c):c(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i.includes(o)||i.push(o),Js(e,h,"gfmFootnoteDefinitionWhitespace")):n(t)}function h(e){return t(e)}}function Ol(e,t,n){return e.check(Xs,t,e.attempt(Tl,t,n))}function Dl(e){e.exit("gfmFootnoteDefinition")}const Ml={}.hasOwnProperty,Pl={};function jl(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Ul(e){const t=e||Pl,n=t.label||"Footnotes",r=t.labelTagName||"h2",i=null===t.labelAttributes||void 0===t.labelAttributes?'class="sr-only"':t.labelAttributes,o=t.backLabel||jl,s=null===t.clobberPrefix||void 0===t.clobberPrefix?"user-content-":t.clobberPrefix;return{enter:{gfmFootnoteDefinition(){this.getData("tightStack").push(!1)},gfmFootnoteDefinitionLabelString(){this.buffer()},gfmFootnoteCallString(){this.buffer()}},exit:{gfmFootnoteDefinition(){let e=this.getData("gfmFootnoteDefinitions");const t=this.getData("gfmFootnoteDefinitionStack"),n=this.getData("tightStack"),r=t.pop(),i=this.resume();e||this.setData("gfmFootnoteDefinitions",e={}),Ml.call(e,r)||(e[r]=i),n.pop(),this.setData("slurpOneLineEnding",!0),this.setData("lastWasTag")},gfmFootnoteDefinitionLabelString(e){let t=this.getData("gfmFootnoteDefinitionStack");t||this.setData("gfmFootnoteDefinitionStack",t=[]),t.push(Is(this.sliceSerialize(e))),this.resume(),this.buffer()},gfmFootnoteCallString(e){let t=this.getData("gfmFootnoteCallOrder"),n=this.getData("gfmFootnoteCallCounts");const r=Is(this.sliceSerialize(e));let i;this.resume(),t||this.setData("gfmFootnoteCallOrder",t=[]),n||this.setData("gfmFootnoteCallCounts",n={});const o=t.indexOf(r),a=$s(r.toLowerCase());-1===o?(t.push(r),n[r]=1,i=t.length):(n[r]++,i=o+1);const l=n[r];this.tag('<sup><a href="#'+s+"fn-"+a+'" id="'+s+"fnref-"+a+(l>1?"-"+l:"")+'" data-footnote-ref="" aria-describedby="footnote-label">'+String(i)+"</a></sup>")},null(){const e=this.getData("gfmFootnoteCallOrder")||[],t=this.getData("gfmFootnoteCallCounts")||{},a=this.getData("gfmFootnoteDefinitions")||{};let l=-1;for(e.length>0&&(this.lineEndingIfNeeded(),this.tag('<section data-footnotes="" class="footnotes"><'+r+' id="footnote-label"'+(i?" "+i:"")+">"),this.raw(this.encode(n)),this.tag("</"+r+">"),this.lineEndingIfNeeded(),this.tag("<ol>"));++l<e.length;){const n=e[l],r=$s(n.toLowerCase());let i=0;const c=[];for(;++i<=t[n];)c.push('<a href="#'+s+"fnref-"+r+(i>1?"-"+i:"")+'" data-footnote-backref="" aria-label="'+this.encode("string"==typeof o?o:o(l,i))+'" class="data-footnote-backref">\u21a9'+(i>1?"<sup>"+i+"</sup>":"")+"</a>");const u=c.join(" ");let d=!1;this.lineEndingIfNeeded(),this.tag('<li id="'+s+"fn-"+r+'">'),this.lineEndingIfNeeded(),this.tag(a[n].replace(/<\/p>(?:\r?\n|\r)?$/,function(e){return d=!0," "+u+e})),d||(this.lineEndingIfNeeded(),this.tag(u)),this.lineEndingIfNeeded(),this.tag("</li>")}e.length>0&&(this.lineEndingIfNeeded(),this.tag("</ol>"),this.lineEndingIfNeeded(),this.tag("</section>"))}}}}function Bl(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const i=this.previous,o=this.events;let s=0;return function(t){if(126===i&&"characterEscape"!==o[o.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),a(t)};function a(o){const l=$a(i);if(126===o)return s>1?r(o):(e.consume(o),s++,a);if(s<2&&!t)return r(o);const c=e.exit("strikethroughSequenceTemporary"),u=$a(o);return c._open=!u||2===u&&Boolean(l),c._close=!l||2===l&&Boolean(u),n(o)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",o,t]],a=t.parser.constructs.insideSpan.null;a&&bs(s,s.length,0,ja(a,e.slice(r+1,n),t)),bs(s,s.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),bs(e,r-1,n-r+3,s),n=r+s.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class Fl{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let i=0;if(0===n&&0===r.length)return;for(;i<e.map.length;){if(e.map[i][0]===t)return e.map[i][1]+=n,void e.map[i][2].push(...r);i+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function zl(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}function ql(e,t,n){const r=this;let i,o=0,s=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const i=t>-1?r.events[t][1].type:null,o="tableHead"===i||"tableRow"===i?w:a;if(o===w&&r.parser.lazy[r.now().line])return n(e);return o(e)};function a(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return i=!0,s+=1,l(e)}(t)}function l(t){return null===t?n(t):js(t)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):Bs(t)?Js(e,l,"whitespace")(t):(s+=1,i&&(i=!1,o+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),i=!0,l):(e.enter("data"),c(t)))}function c(t){return null===t||124===t||Us(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return 92===t||124===t?(e.consume(t),c):c(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),i=!1,Bs(t)?Js(e,h,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):h(t))}function h(t){return 45===t||58===t?f(t):124===t?(i=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):b(t)}function p(t){return Bs(t)?Js(e,f,"whitespace")(t):f(t)}function f(t){return 58===t?(s+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(s+=1,m(t)):null===t||js(t)?y(t):b(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):b(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),v):(e.exit("tableDelimiterFiller"),v(t))}function v(t){return Bs(t)?Js(e,y,"whitespace")(t):y(t)}function y(n){return 124===n?h(n):(null===n||js(n))&&i&&o===s?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):b(n)}function b(e){return n(e)}function w(t){return e.enter("tableRow"),_(t)}function _(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),_):null===n||js(n)?(e.exit("tableRow"),t(n)):Bs(n)?Js(e,_,"whitespace")(n):(e.enter("data"),x(n))}function x(t){return null===t||124===t||Us(t)?(e.exit("data"),_(t)):(e.consume(t),92===t?S:x)}function S(t){return 92===t||124===t?(e.consume(t),x):x(t)}}function $l(e,t){let n,r,i,o=-1,s=!0,a=0,l=[0,0,0,0],c=[0,0,0,0],u=!1,d=0;const h=new Fl;for(;++o<e.length;){const p=e[o],f=p[1];"enter"===p[0]?"tableHead"===f.type?(u=!1,0!==d&&(Vl(h,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(o,0,[["enter",n,t]])):"tableRow"===f.type||"tableDelimiterRow"===f.type?(s=!0,i=void 0,l=[0,0,0,0],c=[0,o+1,0,0],u&&(u=!1,r={type:"tableBody",start:Object.assign({},f.start),end:Object.assign({},f.end)},h.add(o,0,[["enter",r,t]])),a="tableDelimiterRow"===f.type?2:r?3:1):!a||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type?"tableCellDivider"===f.type&&(s?s=!1:(0!==l[1]&&(c[0]=c[1],i=Hl(h,t,l,a,void 0,i)),l=c,c=[l[1],o,0,0])):(s=!1,0===c[2]&&(0!==l[1]&&(c[0]=c[1],i=Hl(h,t,l,a,void 0,i),l=[0,0,0,0]),c[2]=o)):"tableHead"===f.type?(u=!0,d=o):"tableRow"===f.type||"tableDelimiterRow"===f.type?(d=o,0!==l[1]?(c[0]=c[1],i=Hl(h,t,l,a,o,i)):0!==c[1]&&(i=Hl(h,t,c,a,o,i)),a=0):!a||"data"!==f.type&&"tableDelimiterMarker"!==f.type&&"tableDelimiterFiller"!==f.type||(c[3]=o)}for(0!==d&&Vl(h,t,d,n,r),h.consume(t.events),o=-1;++o<t.events.length;){const e=t.events[o];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=zl(t.events,o))}return e}function Hl(e,t,n,r,i,o){const s=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(o.end=Object.assign({},Wl(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const a=Wl(t.events,n[1]);if(o={type:s,start:Object.assign({},a),end:Object.assign({},a)},e.add(n[1],0,[["enter",o,t]]),0!==n[2]){const i=Wl(t.events,n[2]),o=Wl(t.events,n[3]),s={type:"tableContent",start:Object.assign({},i),end:Object.assign({},o)};if(e.add(n[2],0,[["enter",s,t]]),2!==r){const r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",s,t]])}return void 0!==i&&(o.end=Object.assign({},Wl(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function Vl(e,t,n,r,i){const o=[],s=Wl(t.events,n);i&&(i.end=Object.assign({},s),o.push(["exit",i,t])),r.end=Object.assign({},s),o.push(["exit",r,t]),e.add(n+1,0,o)}function Wl(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const Gl={none:"",left:' align="left"',right:' align="right"',center:' align="center"'};function Jl(e,t){return"|"===t?t:e}const Kl=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|title|textarea|xmp)(?=[\t\n\f\r />])/gi,Zl=new RegExp("^"+Kl.source,"i");function Ql(){return{exit:{htmlFlowData(e){Xl.call(this,e,Kl)},htmlTextData(e){Xl.call(this,e,Zl)}}}}function Xl(e,t){let n=this.sliceSerialize(e);this.options.allowDangerousHtml&&(n=n.replace(t,"&lt;$1$2")),this.raw(this.encode(n))}const Yl={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return Us(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),s):n(t)}function s(r){return js(r)?t(r):Bs(r)?e.check({tokenize:ec},t,n)(r):n(r)}}};function ec(e,t,n){return Js(e,function(e){return null===e?n(e):t(e)},"whitespace")}function tc(e){return xs([{text:vl},{document:{91:{name:"gfmFootnoteDefinition",tokenize:Nl,continuation:{tokenize:Ol},exit:Dl}},text:{91:{name:"gfmFootnoteCall",tokenize:Ll},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Il,resolveTo:Rl}}},Bl(e),{flow:{null:{name:"table",tokenize:ql,resolveAll:$l}}},{text:{91:Yl}}])}function nc(e){return ks([{exit:{literalAutolinkEmail:kl,literalAutolinkHttp:El,literalAutolinkWww:Cl}},Ul(e),{enter:{strikethrough(){this.tag("<del>")}},exit:{strikethrough(){this.tag("</del>")}}},{enter:{table(e){const t=e._align;this.lineEndingIfNeeded(),this.tag("<table>"),this.setData("tableAlign",t)},tableBody(){this.tag("<tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=Gl[e[t]];void 0===n?this.buffer():(this.lineEndingIfNeeded(),this.tag("<td"+n+">"))},tableHead(){this.lineEndingIfNeeded(),this.tag("<thead>")},tableHeader(){const e=this.getData("tableAlign"),t=this.getData("tableColumn"),n=Gl[e[t]];this.lineEndingIfNeeded(),this.tag("<th"+n+">")},tableRow(){this.setData("tableColumn",0),this.lineEndingIfNeeded(),this.tag("<tr>")}},exit:{codeTextData(e){let t=this.sliceSerialize(e);this.getData("tableAlign")&&(t=t.replace(/\\([\\|])/g,Jl)),this.raw(this.encode(t))},table(){this.setData("tableAlign"),this.setData("slurpAllLineEndings"),this.lineEndingIfNeeded(),this.tag("</table>")},tableBody(){this.lineEndingIfNeeded(),this.tag("</tbody>")},tableData(){const e=this.getData("tableAlign"),t=this.getData("tableColumn");t in e?(this.tag("</td>"),this.setData("tableColumn",t+1)):this.resume()},tableHead(){this.lineEndingIfNeeded(),this.tag("</thead>")},tableHeader(){const e=this.getData("tableColumn");this.tag("</th>"),this.setData("tableColumn",e+1)},tableRow(){const e=this.getData("tableAlign");let t=this.getData("tableColumn");for(;t<e.length;)this.lineEndingIfNeeded(),this.tag("<td"+Gl[e[t]]+"></td>"),t++;this.setData("tableColumn",t),this.lineEndingIfNeeded(),this.tag("</tr>")}}},Ql(),{enter:{taskListCheck(){this.tag('<input type="checkbox" disabled="" ')}},exit:{taskListCheck(){this.tag("/>")},taskListCheckValueChecked(){this.tag('checked="" ')}}}])}async function rc(e,t,n={}){e||Promise.resolve(),t=t||fd();var r=await dc(e),i=`${e}#${ji()}`,o=Ni();n.datetime=n.datetime||o,r||(r={"@context":["https://www.w3.org/ns/activitystreams",{digestSRI:"https://www.w3.org/2018/credentials#digestSRI"}],id:e,type:"OrderedCollection",items:[],autoSave:!0},n.init=!0),r.updated=n.datetime,r.autoSave=void 0!==n.autoSave?n.autoSave:r.autoSave,r.items.unshift(i),n.collectionKey=e,localStorage.setItem(e,JSON.stringify(r)),cr.AutoSave.Items[n.collectionKey]||={},cr.AutoSave.Items[n.collectionKey].localStorage||={},console.log(o+`: ${e} saved.`),function(e,t,n={}){t=t||fd();var r=n.datetime||Ni(),i={"@context":["https://www.w3.org/ns/activitystreams",{digestSRI:"https://www.w3.org/2018/credentials#digestSRI"}],id:e,type:"Document",updated:r,mediaType:"text/html",content:t,digestSRI:n.digestSRI,partOf:n.collectionKey};(n.init||n.published)&&(i.published=n.published||r);DO.C.User&&(i.actor=DO.C.User.IRI);localStorage.setItem(e,JSON.stringify(i)),cr.AutoSave.Items[n.collectionKey].localStorage.updated=i.updated,console.log(r+`: ${e} saved.`)}(i,t,n)}async function ic(e,t){let n=await dc(e);n&&(n={...n,...t},localStorage.setItem(e,JSON.stringify(n)))}function oc(e,t,n={}){if(e||t)switch(n.method="localStorage",n.method){default:case"localStorage":rc(e,t,n);break;case"http":!function(e,t){t=t||fd();var n=Ni();Kd(e),console.log(n+": Document saved.")}(e,t,n)}}async function sc(e,t){if(!e)return;const n=fd(),r=await Fi(n),i=cr.AutoSave.Items[e]?.[t.method];if(!(i?.digestSRI===r)){t.digestSRI=r;try{await oc(e,n,t),cr.AutoSave.Items[e]||={},cr.AutoSave.Items[e][t.method]||={},cr.AutoSave.Items[e][t.method].digestSRI=r}catch(e){console.error(Ni()+": Error saving document: ",e)}}}async function ac(e,t={}){if(!e)return;let n;t.method="method"in t?t.method:"localStorage",cr.AutoSave.Items[e]||={},cr.AutoSave.Items[e][t.method]||={},console.log(Ni()+": "+e+" "+t.method+" autosave enabled."),await sc(e,t);const r=r=>{r.target.closest(".ProseMirror[contenteditable]")&&(n&&clearTimeout(n),n=setTimeout(async()=>await(async(e,t)=>{await sc(e,t);const n=await dc(DO.C.DocumentURL);(!n||void 0===n.autoSave||n.autoSave)&&DO.U.syncLocalRemoteResource()})(e,t),cr.AutoSave.Timer))};document.addEventListener("input",r),document.addEventListener("paste",r)}async function lc(e,t={}){if(!cr.AutoSave.Items[e])return;t.method="method"in t?t.method:"localStorage";let n=Array.isArray(t.method)?t.method:[t.method];for(const r of n)cr.AutoSave.Items[e][r]&&(console.log(Ni()+": "+e+" "+t.method+" autosave disabled."),t.saveSnapshot&&await sc(e,t),clearInterval(cr.AutoSave.Items[e][r].id),cr.AutoSave.Items[e][r]=void 0,await ic(e,{autoSave:!1}))}function cc(e){if(e||Promise.resolve(),console.log(Ni()+": "+e+" removed from local storage."),cr.WebExtensionEnabled){var t=void 0!==t?t:chrome;return t.storage.sync.remove(e)}return window.localStorage?Promise.resolve(localStorage.removeItem(e)):Promise.reject({message:"storage is unavailable"})}async function uc(){!async function(e){if(!e)return Promise.resolve();const t=await dc(e);if(t){if(t.items)for(const e of t.items)await cc(e);await cc(e)}}(DO.C.DocumentURL),cc("DO.C.User")}function dc(e){if(e||Promise.resolve(),cr.WebExtensionEnabled){if("undefined"!=typeof browser)return browser.storage.sync.get(e).then(t=>t[e]);var t={};return chrome.storage.sync.get(e,n=>{t=n[e]}),new Promise((e,n)=>{window.setTimeout(()=>e(t),50)})}if(window.localStorage){var n=localStorage.getItem(e);let t=null;try{t=JSON.parse(n)}catch(e){t=null}return Promise.resolve(t)}return Promise.reject({message:"storage is unavailable"})}function hc(e){if(!e.IRI)return Promise.resolve({message:"User.IRI is not set"});var t={...e},n="DO.C.User",r=ji(),i=Ni();t.Graph&&delete t.Graph,t.Preferences?.graph&&delete t.Preferences.graph,Object.entries(t.Contacts).forEach(([e,t])=>{t.Graph&&delete t.Graph,t.Preferences?.graph&&delete t.Preferences.graph});var o={"@context":"https://www.w3.org/ns/activitystreams",id:r,type:"Update",object:{id:n,type:"Profile",describes:t},datetime:i,actor:t.IRI};return cr.WebExtensionEnabled?"undefined"!=typeof browser?browser.storage.sync.set({[n]:o}):Promise.resolve(chrome.storage.sync.set({[n]:o})):window.localStorage?Promise.resolve(localStorage.setItem(n,JSON.stringify(o))):Promise.reject({message:"storage is unavailable"})}const pc=cr.ns,fc=cr.WebExtensionEnabled?cr.WebExtension.runtime.getURL("docs"):"https://dokie.li/docs";function mc({button:e,buttonClass:t,buttonLabel:n,buttonDisabled:r,buttonRel:i,buttonResource:o,buttonTitle:s,buttonTextContent:a,buttonType:l,iconSize:c}){if(!e)throw new Error("`button` identifier is required.");const u=s||gc[e]?.title||e,d=` title="${u}"`,h=a||gc[e]?.textContent,p=n||u,f=p&&!h?` aria-label="${p}"`:"",m=t?` class="${t}"`:"",g=r?' disabled=""':"";let v=gc[e]?.icon;const y=i?` rel="${i}"`:"",b=o?` resource="${o}"`:"",w=l?` type="${l}"`:"";if(v){let e=(new DOMParser).parseFromString(v,"image/svg+xml").querySelector("svg");e.setAttribute("aria-hidden","true"),c&&e.classList.add(c),v=(new XMLSerializer).serializeToString(e)}return`<button${f}${m}${g}${y}${b}${d}${w}>${v||h?`${v||""} ${h?`<span>${h}</span>`:""}`:e}</button>`}const gc={p:{title:"paragraph",icon:Ri[".fas.fa-paragraph"]},em:{title:"emphasise",icon:Ri[".fas.fa-italic"]},strong:{title:"strongly emphasise",icon:Ri[".fas.fa-bold"]},ol:{title:"ordered list",icon:Ri[".fas.fa-link-ol"]},ul:{title:"unordered list",icon:Ri[".fas.fa-link-ul"]},...["h1","h2","h3","h4","h5","h6"].reduce((e,t)=>(e[t]={title:`heading level ${t[1]}`,icon:`${Ri[".fas.fa-header"]}`,textContent:t[1]},e),{}),a:{title:"link",icon:Ri[".fas.fa-link"]},citation:{title:"citation",icon:Ri[".fas.fa-hashtag"]},comment:{title:"comment",icon:Ri[".fas.fa-comment"]},note:{title:"note (internal)",icon:Ri[".fas.fa-sticky-note"]},semantics:{title:"semantics",icon:Ri[".fas.fa-rocket"]},sparkline:{title:"sparkline",icon:Ri[".fas.fa-chart-line"]},img:{title:"image",icon:Ri[".fas.fa-image"]},pre:{title:"code (block)",icon:Ri[".fas.fa-terminal"]},code:{title:"code (inline)",icon:Ri[".fas.fa-code"]},blockquote:{title:"blockquote (with source)",icon:Ri[".fas.fa-angle-right"]},q:{title:"quote (with source)",icon:Ri[".fas.fa-quote-right"]},math:{title:"math",icon:Ri[".fas.fa-calculator"]},highlight:{title:"highlight",icon:Ri[".fas.fa-anchor"]},bookmark:{title:"bookmark",icon:Ri[".fas.fa-bookmark"]},share:{title:"share",icon:Ri[".fas.fa-bullhorn"]},approve:{title:"approve",icon:Ri[".fas.fa-thumbs-up"]},disapprove:{title:"disapprove",icon:Ri[".fas.fa-thumbs-down"]},specificity:{title:"specificity",icon:Ri[".fas.fa-crosshairs"]},close:{title:"Close",icon:Ri[".fas.fa-times"]},submit:{title:"Submit",icon:Ri[".fas.fa-check"]},cancel:{title:"Cancel",icon:Ri[".fas.fa-times"]},delete:{title:"Delete",icon:Ri[".fas.fa-trash-alt"]},toggle:{title:"Show/Hide",icon:Ri[".fas.fa-angle-right"]},more:{title:"Show more",icon:Ri[".fas.fa-rotate"]},cursor:{title:"Cursor",icon:Ri[".fas.fa-i-cursor"]},signout:{title:"Live long and prosper",icon:Ri[".far.fa-spock-hand"]},signin:{title:"Sign in",icon:Ri[".fas.fa-user-astronaut"]},license:{title:"License",icon:Ri[".fas.fa-certificate"]},language:{title:"Language",icon:Ri[".fas.fa-language"]},"resource-type":{title:"Resource type",icon:Ri[".fas.fa-shape"]},inbox:{title:"Inbox",icon:Ri[".fas.fa-inbox"]},"in-reply-to":{title:"In reply to",icon:Ri[".fas.fa-reply"]},"publication-status":{title:"Publication status",icon:Ri[".fas.fa-timeline"]},activities:{title:"Activities",icon:Ri[".fas.fa-bolt"]},new:{title:"New",icon:Ri[".far.fa-lightbulb"]},open:{title:"Open",icon:Ri[".fas.fa-coffee"]},save:{title:"Save",icon:Ri[".fas.fa-life-ring"]},"save-as":{title:"Save As",icon:Ri[".far.fa-paper-plane"]},messages:{title:"Messages",icon:Ri[".fas.fa-scroll"]},print:{title:"Print document",icon:Ri[".fas.fa-print"]},"data-meta":{title:"Embed structured data",icon:Ri[".fas.fa-table"]},table:{title:"table",icon:Ri[".fas.fa-table"]},source:{title:"Edit article source code",icon:Ri[".fas.fa-code"]},memento:{title:"Memento article",icon:Ri[".far.fa-clock"]},version:{title:"Create version",icon:Ri[".fas.fa-code-branch"]},immutable:{title:"Make immutable",icon:Ri[".far.fa-snowflake"]},"robustify-links":{title:"Robustify Links",icon:Ri[".fas.fa-link"]},archive:{title:"Archive",icon:Ri[".fas.fa-archive"]},feed:{title:"Generate Web feed",icon:Ri[".fas.fa-rss"]},export:{title:"export",icon:Ri[".fas.fa-external-link-alt"]},cursor:{title:"cursor",icon:Ri[".fas.fa-i-cursor"]},"local-storage":{title:"",icon:Ri[".fas.fa-database"]},info:{title:"info",icon:Ri[".fas.fa-circle-info"]},success:{title:"success",icon:Ri[".fas.fa-check"]},error:{title:"error",icon:Ri[".fas.fa-triangle-exclamation"]},warning:{title:"warning",icon:Ri[".fas.fa-circle-exclamation"]},"test-suite":{title:"Test suite",icon:Ri[".fas.fa-vial-circle-check"]},clipboard:{title:"Copy to clipboard",icon:Ri[".fas.fa-copy"]},bars:{title:"Show",icon:Ri[".fas.fa-bars"]},minus:{title:"Hide",icon:Ri[".fas.fa-minus"]},"review-changes":{title:"Review changes",icon:Ri[".fas.fa-microscope"]}},vc={"#document-do .resource-save":({info:e,online:t,localhost:n})=>!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.modify.value))),"#document-do .create-version":({info:e,online:t,localhost:n})=>!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))),"#document-do .create-immutable":({info:e,online:t,localhost:n})=>!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))),"#document-do .resource-delete":({info:e,online:t,localhost:n})=>!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.delete.value))),"#document-do .resource-memento":({info:e,online:t,localhost:n})=>!!e.timemap&&(!(!t&&!n)&&!(!t&&!Ii(e.timemap))),"#document-do .snapshot-internet-archive":({info:e,online:t,localhost:n})=>(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.archive.value)&&!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))&&!(!t||n),"#document-do .resource-save-as":({info:e,online:t,localhost:n})=>(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.derive.value)&&!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))&&!(!t&&!n),"#document-do .resource-print":({info:e})=>!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.print.value),"#document-do .export-as-html":({info:e})=>!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.transform.value)&&!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value),"#document-do .generate-feed":({info:e,online:t,localhost:n})=>(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))&&!(!t&&!n),"#document-do .robustify-links":({info:e,online:t,editorMode:n})=>"author"===n&&((!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))&&!!t),"#document-do .embed-data-meta":({info:e,editorMode:t})=>"author"===t&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.modify.value)),"#review-changes .review-changes-save-local":({info:e,online:t,localhost:n})=>!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.modify.value))),"#review-changes .review-changes-submit":({info:e,online:t,localhost:n})=>!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.modify.value))),"#document-autosave #autosave-remote":({info:e,online:t,localhost:n,documentAction:r})=>"new"!=r&&"open"!=r&&(!(!t&&!n)&&(!!Jd(null,"write")&&(!e.odrl?.prohibitionActions||e.odrl.prohibitionAssignee!==cr.User.IRI||!e.odrl.prohibitionActions.includes(pc.odrl.derive.value)&&!e.odrl.prohibitionActions.includes(pc.odrl.reproduce.value))))};function yc(e){e=e||Object.keys(vc);const t={info:cr.Resource[cr.DocumentURL],authenticated:cr.Session.isActive,online:navigator.onLine,localhost:Ii(cr.DocumentURL),editorMode:DO.Editor.mode,documentAction:cr.DocumentAction};e.forEach(e=>{const n=document.querySelector(e);if(!n)return void console.warn(`Button with selector "${e}" not found.`);const r=function(e,t){const n=vc[e];return!n||n(t)}(e,t);n.disabled=!r})}var bc=crypto;const wc=e=>e instanceof CryptoKey;var _c=async(e,t)=>{const n=`SHA-${e.slice(-3)}`;return new Uint8Array(await bc.subtle.digest(n,t))};const xc=new TextEncoder,Sc=new TextDecoder;function Cc(...e){const t=e.reduce((e,{length:t})=>e+t,0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}const kc=e=>(e=>{let t=e;"string"==typeof t&&(t=xc.encode(t));const n=[];for(let e=0;e<t.length;e+=32768)n.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(n.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),Ec=e=>{let t=e;t instanceof Uint8Array&&(t=Sc.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return(e=>{const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n})(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class Ac extends Error{constructor(e,t){super(e,t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Ac.code="ERR_JOSE_GENERIC";class Tc extends Ac{constructor(e,t,n="unspecified",r="unspecified"){super(e,{cause:{claim:n,reason:r,payload:t}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=r,this.payload=t}}Tc.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class Ic extends Ac{constructor(e,t,n="unspecified",r="unspecified"){super(e,{cause:{claim:n,reason:r,payload:t}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=r,this.payload=t}}Ic.code="ERR_JWT_EXPIRED";class Rc extends Ac{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}Rc.code="ERR_JOSE_ALG_NOT_ALLOWED";class Lc extends Ac{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}Lc.code="ERR_JOSE_NOT_SUPPORTED";(class extends Ac{constructor(e="decryption operation failed",t){super(e,t),this.code="ERR_JWE_DECRYPTION_FAILED"}}).code="ERR_JWE_DECRYPTION_FAILED";(class extends Ac{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}).code="ERR_JWE_INVALID";class Nc extends Ac{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}Nc.code="ERR_JWS_INVALID";class Oc extends Ac{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}Oc.code="ERR_JWT_INVALID";class Dc extends Ac{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}Dc.code="ERR_JWK_INVALID";class Mc extends Ac{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}Mc.code="ERR_JWKS_INVALID";class Pc extends Ac{constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_NO_MATCHING_KEY"}}Pc.code="ERR_JWKS_NO_MATCHING_KEY";class jc extends Ac{constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}jc.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class Uc extends Ac{constructor(e="request timed out",t){super(e,t),this.code="ERR_JWKS_TIMEOUT"}}Uc.code="ERR_JWKS_TIMEOUT";class Bc extends Ac{constructor(e="signature verification failed",t){super(e,t),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}function Fc(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function zc(e,t){return e.name===t}function qc(e){return parseInt(e.name.slice(4),10)}function $c(e,t,...n){switch(t){case"HS256":case"HS384":case"HS512":{if(!zc(e.algorithm,"HMAC"))throw Fc("HMAC");const n=parseInt(t.slice(2),10);if(qc(e.algorithm.hash)!==n)throw Fc(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!zc(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Fc("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(qc(e.algorithm.hash)!==n)throw Fc(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!zc(e.algorithm,"RSA-PSS"))throw Fc("RSA-PSS");const n=parseInt(t.slice(2),10);if(qc(e.algorithm.hash)!==n)throw Fc(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw Fc("Ed25519 or Ed448");break;case"Ed25519":if(!zc(e.algorithm,"Ed25519"))throw Fc("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!zc(e.algorithm,"ECDSA"))throw Fc("ECDSA");const n=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==n)throw Fc(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();e+=`one of ${t.join(", ")}, or ${n}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}(e,n)}function Hc(e,t,...n){if((n=n.filter(Boolean)).length>2){const t=n.pop();e+=`one of type ${n.join(", ")}, or ${t}.`}else 2===n.length?e+=`one of type ${n[0]} or ${n[1]}.`:e+=`of type ${n[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}Bc.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";var Vc=(e,...t)=>Hc("Key must be ",e,...t);function Wc(e,t,...n){return Hc(`Key for the ${e} algorithm must be `,t,...n)}var Gc=e=>!!wc(e)||"KeyObject"===e?.[Symbol.toStringTag];const Jc=["CryptoKey"];var Kc=(...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let n;for(const e of t){const t=Object.keys(e);if(n&&0!==n.size)for(const e of t){if(n.has(e))return!1;n.add(e)}else n=new Set(t)}return!0};function Zc(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}var Qc=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:n}=t.algorithm;if("number"!=typeof n||n<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}};function Xc(e){return Zc(e)&&"string"==typeof e.kty}var Yc=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:n}=function(e){let t,n;switch(e.kty){case"RSA":switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},n=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},n=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Lc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},n=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},n=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new Lc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(e.alg){case"Ed25519":t={name:"Ed25519"},n=e.d?["sign"]:["verify"];break;case"EdDSA":t={name:e.crv},n=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},n=e.d?["deriveBits"]:[];break;default:throw new Lc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new Lc('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:n}}(e),r=[t,e.ext??!1,e.key_ops??n],i={...e};return delete i.alg,delete i.use,bc.subtle.importKey("jwk",i,...r)};const eu=e=>Ec(e);let tu,nu;const ru=e=>"KeyObject"===e?.[Symbol.toStringTag],iu=async(e,t,n,r,i=!1)=>{let o=e.get(t);if(o?.[r])return o[r];const s=await Yc({...n,alg:r});return i&&Object.freeze(t),o?o[r]=s:e.set(t,{[r]:s}),s};var ou=(e,t)=>{if(ru(e)){let n=e.export({format:"jwk"});return delete n.d,delete n.dp,delete n.dq,delete n.p,delete n.q,delete n.qi,n.k?eu(n.k):(nu||(nu=new WeakMap),iu(nu,e,n,t))}if(Xc(e)){if(e.k)return Ec(e.k);nu||(nu=new WeakMap);return iu(nu,e,e,t,!0)}return e},su=(e,t)=>{if(ru(e)){let n=e.export({format:"jwk"});return n.k?eu(n.k):(tu||(tu=new WeakMap),iu(tu,e,n,t))}if(Xc(e)){if(e.k)return Ec(e.k);tu||(tu=new WeakMap);return iu(tu,e,e,t,!0)}return e};async function au(e,t){if(!Zc(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return Ec(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new Lc('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return Yc({...e,alg:t});default:throw new Lc('Unsupported "kty" (Key Type) Parameter value')}}const lu=e=>e?.[Symbol.toStringTag],cu=(e,t,n)=>{if(void 0!==t.use&&"sig"!==t.use)throw new TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&!0!==t.key_ops.includes?.(n))throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${n}`);if(void 0!==t.alg&&t.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},uu=(e,t,n,r)=>{if(!(t instanceof Uint8Array)){if(r&&Xc(t)){if(function(e){return Xc(e)&&"oct"===e.kty&&"string"==typeof e.k}(t)&&cu(e,t,n))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Gc(t))throw new TypeError(Wc(e,t,...Jc,"Uint8Array",r?"JSON Web Key":null));if("secret"!==t.type)throw new TypeError(`${lu(t)} instances for symmetric algorithms must be of type "secret"`)}};function du(e,t,n,r){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?uu(t,n,r,e):((e,t,n,r)=>{if(r&&Xc(t))switch(n){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&cu(e,t,n))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&cu(e,t,n))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Gc(t))throw new TypeError(Wc(e,t,...Jc,r?"JSON Web Key":null));if("secret"===t.type)throw new TypeError(`${lu(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===n&&"public"===t.type)throw new TypeError(`${lu(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===n&&"public"===t.type)throw new TypeError(`${lu(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===n&&"private"===t.type)throw new TypeError(`${lu(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===n&&"private"===t.type)throw new TypeError(`${lu(t)} instances for asymmetric algorithm encryption must be of type "public"`)})(t,n,r,e)}du.bind(void 0,!1);const hu=du.bind(void 0,!0);function pu(e,t,n,r,i){if(void 0!==i.crit&&void 0===r?.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!r||void 0===r.crit)return new Set;if(!Array.isArray(r.crit)||0===r.crit.length||r.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let o;o=void 0!==n?new Map([...Object.entries(n),...t.entries()]):t;for(const t of r.crit){if(!o.has(t))throw new Lc(`Extension Header Parameter "${t}" is not recognized`);if(void 0===i[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(o.get(t)&&void 0===r[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(r.crit)}var fu=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};var mu=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:kc(e)};if(!wc(e))throw new TypeError(Vc(e,...Jc,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:n,alg:r,use:i,...o}=await bc.subtle.exportKey("jwk",e);return o};async function gu(e){return mu(e)}function vu(e,t){const n=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:n,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:n,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:n,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:n,name:"ECDSA",namedCurve:t.namedCurve};case"Ed25519":return{name:"Ed25519"};case"EdDSA":return{name:t.name};default:throw new Lc(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}async function yu(e,t,n){if("sign"===n&&(t=await su(t,e)),"verify"===n&&(t=await ou(t,e)),wc(t))return $c(t,e,n),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Vc(t,...Jc));return bc.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[n])}throw new TypeError(Vc(t,...Jc,"Uint8Array","JSON Web Key"))}var bu=async(e,t,n,r)=>{const i=await yu(e,t,"verify");Qc(e,i);const o=vu(e,i.algorithm);try{return await bc.subtle.verify(o,i,n,r)}catch{return!1}};async function wu(e,t,n){if(e instanceof Uint8Array&&(e=Sc.decode(e)),"string"!=typeof e)throw new Nc("Compact JWS must be a string or Uint8Array");const{0:r,1:i,2:o,length:s}=e.split(".");if(3!==s)throw new Nc("Invalid Compact JWS");const a=await async function(e,t,n){if(!Zc(e))throw new Nc("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new Nc('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new Nc("JWS Protected Header incorrect type");if(void 0===e.payload)throw new Nc("JWS Payload missing");if("string"!=typeof e.signature)throw new Nc("JWS Signature missing or incorrect type");if(void 0!==e.header&&!Zc(e.header))throw new Nc("JWS Unprotected Header incorrect type");let r={};if(e.protected)try{const t=Ec(e.protected);r=JSON.parse(Sc.decode(t))}catch{throw new Nc("JWS Protected Header is invalid")}if(!Kc(r,e.header))throw new Nc("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const i={...r,...e.header};let o=!0;if(pu(Nc,new Map([["b64",!0]]),n?.crit,r,i).has("b64")&&(o=r.b64,"boolean"!=typeof o))throw new Nc('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:s}=i;if("string"!=typeof s||!s)throw new Nc('JWS "alg" (Algorithm) Header Parameter missing or invalid');const a=n&&fu("algorithms",n.algorithms);if(a&&!a.has(s))throw new Rc('"alg" (Algorithm) Header Parameter value not allowed');if(o){if("string"!=typeof e.payload)throw new Nc("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new Nc("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof t?(t=await t(r,e),l=!0,hu(s,t,"verify"),Xc(t)&&(t=await au(t,s))):hu(s,t,"verify");const c=Cc(xc.encode(e.protected??""),xc.encode("."),"string"==typeof e.payload?xc.encode(e.payload):e.payload);let u,d;try{u=Ec(e.signature)}catch{throw new Nc("Failed to base64url decode the signature")}if(!await bu(s,t,u,c))throw new Bc;if(o)try{d=Ec(e.payload)}catch{throw new Nc("Failed to base64url decode the payload")}else d="string"==typeof e.payload?xc.encode(e.payload):e.payload;const h={payload:d};return void 0!==e.protected&&(h.protectedHeader=r),void 0!==e.header&&(h.unprotectedHeader=e.header),l?{...h,key:t}:h}({payload:i,protected:r,signature:o},t,n),l={payload:a.payload,protectedHeader:a.protectedHeader};return"function"==typeof t?{...l,key:a.key}:l}var _u=e=>Math.floor(e.getTime()/1e3);const xu=86400,Su=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;var Cu=e=>{const t=Su.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const n=parseFloat(t[2]);let r;switch(t[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":r=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":r=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":r=Math.round(3600*n);break;case"day":case"days":case"d":r=Math.round(n*xu);break;case"week":case"weeks":case"w":r=Math.round(604800*n);break;default:r=Math.round(31557600*n)}return"-"===t[1]||"ago"===t[4]?-r:r};const ku=e=>e.toLowerCase().replace(/^application\//,"");var Eu=(e,t,n={})=>{let r;try{r=JSON.parse(Sc.decode(t))}catch{}if(!Zc(r))throw new Oc("JWT Claims Set must be a top-level JSON object");const{typ:i}=n;if(i&&("string"!=typeof e.typ||ku(e.typ)!==ku(i)))throw new Tc('unexpected "typ" JWT header value',r,"typ","check_failed");const{requiredClaims:o=[],issuer:s,subject:a,audience:l,maxTokenAge:c}=n,u=[...o];void 0!==c&&u.push("iat"),void 0!==l&&u.push("aud"),void 0!==a&&u.push("sub"),void 0!==s&&u.push("iss");for(const e of new Set(u.reverse()))if(!(e in r))throw new Tc(`missing required "${e}" claim`,r,e,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(r.iss))throw new Tc('unexpected "iss" claim value',r,"iss","check_failed");if(a&&r.sub!==a)throw new Tc('unexpected "sub" claim value',r,"sub","check_failed");if(l&&(d=r.aud,h="string"==typeof l?[l]:l,!("string"==typeof d?h.includes(d):Array.isArray(d)&&h.some(Set.prototype.has.bind(new Set(d))))))throw new Tc('unexpected "aud" claim value',r,"aud","check_failed");var d,h;let p;switch(typeof n.clockTolerance){case"string":p=Cu(n.clockTolerance);break;case"number":p=n.clockTolerance;break;case"undefined":p=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=n,m=_u(f||new Date);if((void 0!==r.iat||c)&&"number"!=typeof r.iat)throw new Tc('"iat" claim must be a number',r,"iat","invalid");if(void 0!==r.nbf){if("number"!=typeof r.nbf)throw new Tc('"nbf" claim must be a number',r,"nbf","invalid");if(r.nbf>m+p)throw new Tc('"nbf" claim timestamp check failed',r,"nbf","check_failed")}if(void 0!==r.exp){if("number"!=typeof r.exp)throw new Tc('"exp" claim must be a number',r,"exp","invalid");if(r.exp<=m-p)throw new Ic('"exp" claim timestamp check failed',r,"exp","check_failed")}if(c){const e=m-r.iat;if(e-p>("number"==typeof c?c:Cu(c)))throw new Ic('"iat" claim timestamp check failed (too far in the past)',r,"iat","check_failed");if(e<0-p)throw new Tc('"iat" claim timestamp check failed (it should be in the past)',r,"iat","check_failed")}return r};async function Au(e,t,n){const r=await wu(e,t,n);if(r.protectedHeader.crit?.includes("b64")&&!1===r.protectedHeader.b64)throw new Oc("JWTs MUST NOT use unencoded payload");const i={payload:Eu(r.protectedHeader,r.payload,n),protectedHeader:r.protectedHeader};return"function"==typeof t?{...i,key:r.key}:i}var Tu=async(e,t,n)=>{const r=await yu(e,t,"sign");Qc(e,r);const i=await bc.subtle.sign(vu(e,r.algorithm),r,n);return new Uint8Array(i)};class Iu{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Nc("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Kc(this._protectedHeader,this._unprotectedHeader))throw new Nc("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader};let r=!0;if(pu(Nc,new Map([["b64",!0]]),t?.crit,this._protectedHeader,n).has("b64")&&(r=this._protectedHeader.b64,"boolean"!=typeof r))throw new Nc('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=n;if("string"!=typeof i||!i)throw new Nc('JWS "alg" (Algorithm) Header Parameter missing or invalid');hu(i,e,"sign");let o,s=this._payload;r&&(s=xc.encode(kc(s))),o=this._protectedHeader?xc.encode(kc(JSON.stringify(this._protectedHeader))):xc.encode("");const a=Cc(o,xc.encode("."),s),l=await Tu(i,e,a),c={signature:kc(l),payload:""};return r&&(c.payload=Sc.decode(s)),this._unprotectedHeader&&(c.header=this._unprotectedHeader),this._protectedHeader&&(c.protected=Sc.decode(o)),c}}class Ru{constructor(e){this._flattened=new Iu(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const n=await this._flattened.sign(e,t);if(void 0===n.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}function Lu(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class Nu{constructor(e={}){if(!Zc(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:Lu("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:Lu("setNotBefore",_u(e))}:this._payload={...this._payload,nbf:_u(new Date)+Cu(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:Lu("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:Lu("setExpirationTime",_u(e))}:this._payload={...this._payload,exp:_u(new Date)+Cu(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:_u(new Date)}:e instanceof Date?this._payload={...this._payload,iat:Lu("setIssuedAt",_u(e))}:this._payload="string"==typeof e?{...this._payload,iat:Lu("setIssuedAt",_u(new Date)+Cu(e))}:{...this._payload,iat:Lu("setIssuedAt",e)},this}}class Ou extends Nu{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){const n=new Ru(xc.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new Oc("JWTs MUST NOT use unencoded payload");return n.sign(e,t)}}const Du=(e,t)=>{if("string"!=typeof e||!e)throw new Dc(`${t} missing or invalid`)};async function Mu(e,t){if(!Zc(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),"sha256"!==t&&"sha384"!==t&&"sha512"!==t)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let n;switch(e.kty){case"EC":Du(e.crv,'"crv" (Curve) Parameter'),Du(e.x,'"x" (X Coordinate) Parameter'),Du(e.y,'"y" (Y Coordinate) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":Du(e.crv,'"crv" (Subtype of Key Pair) Parameter'),Du(e.x,'"x" (Public Key) Parameter'),n={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":Du(e.e,'"e" (Exponent) Parameter'),Du(e.n,'"n" (Modulus) Parameter'),n={e:e.e,kty:e.kty,n:e.n};break;case"oct":Du(e.k,'"k" (Key Value) Parameter'),n={k:e.k,kty:e.kty};break;default:throw new Lc('"kty" (Key Type) Parameter missing or unsupported')}const r=xc.encode(JSON.stringify(n));return kc(await _c(t,r))}function Pu(e){return Zc(e)}function ju(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class Uu{constructor(e){if(this._cached=new WeakMap,!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(Pu)}(e))throw new Mc("JSON Web Key Set malformed");this._jwks=ju(e)}async getKey(e,t){const{alg:n,kid:r}={...e,...t?.header},i=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Lc('Unsupported "alg" value for a JSON Web Key Set')}}(n),o=this._jwks.keys.filter(e=>{let t=i===e.kty;if(t&&"string"==typeof r&&(t=r===e.kid),t&&"string"==typeof e.alg&&(t=n===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(n){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:s,length:a}=o;if(0===a)throw new Pc;if(1!==a){const e=new jc,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(const e of o)try{yield await Bu(t,e,n)}catch{}},e}return Bu(this._cached,s,n)}}async function Bu(e,t,n){const r=e.get(t)||e.set(t,{}).get(t);if(void 0===r[n]){const e=await au({...t,ext:!0},n);if(e instanceof Uint8Array||"public"!==e.type)throw new Mc("JSON Web Key Set members must be public keys");r[n]=e}return r[n]}function Fu(e){const t=new Uu(e),n=async(e,n)=>t.getKey(e,n);return Object.defineProperties(n,{jwks:{value:()=>ju(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),n}var zu=async(e,t,n)=>{let r,i,o=!1;"function"==typeof AbortController&&(r=new AbortController,i=setTimeout(()=>{o=!0,r.abort()},t));const s=await fetch(e.href,{signal:r?r.signal:void 0,redirect:"manual",headers:n.headers}).catch(e=>{if(o)throw new Uc;throw e});if(void 0!==i&&clearTimeout(i),200!==s.status)throw new Ac("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await s.json()}catch{throw new Ac("Failed to parse the JSON Web Key Set HTTP response as JSON")}};let qu;if("undefined"==typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 ")){qu=`${"jose"}/${"v5.10.0"}`}const $u=Symbol();class Hu{constructor(e,t){if(!(e instanceof URL))throw new TypeError("url must be an instance of URL");var n,r;this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,void 0!==t?.[$u]&&(this._cache=t?.[$u],n=t?.[$u],r=this._cacheMaxAge,"object"==typeof n&&null!==n&&"uat"in n&&"number"==typeof n.uat&&!(Date.now()-n.uat>=r)&&"jwks"in n&&Zc(n.jwks)&&Array.isArray(n.jwks.keys)&&Array.prototype.every.call(n.jwks.keys,Zc)&&(this._jwksTimestamp=this._cache.uat,this._local=Fu(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(n){if(n instanceof Pc&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw n}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);const e=new Headers(this._options.headers);qu&&!e.has("User-Agent")&&(e.set("User-Agent",qu),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||(this._pendingFetch=zu(this._url,this._timeoutDuration,this._options).then(e=>{this._local=Fu(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function Vu(e,t){const n=new Hu(e,t),r=async(e,t)=>n.getKey(e,t);return Object.defineProperties(r,{coolingDown:{get:()=>n.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>n.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>n.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!n._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>n._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),r}const Wu=Ec;function Gu(e){const t=e?.modulusLength??2048;if("number"!=typeof t||t<2048)throw new Lc("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function Ju(e,t){return async function(e,t){let n,r;switch(e){case"PS256":case"PS384":case"PS512":n={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Gu(t)},r=["sign","verify"];break;case"RS256":case"RS384":case"RS512":n={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Gu(t)},r=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":n={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:Gu(t)},r=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":n={name:"ECDSA",namedCurve:"P-256"},r=["sign","verify"];break;case"ES384":n={name:"ECDSA",namedCurve:"P-384"},r=["sign","verify"];break;case"ES512":n={name:"ECDSA",namedCurve:"P-521"},r=["sign","verify"];break;case"Ed25519":n={name:"Ed25519"},r=["sign","verify"];break;case"EdDSA":{r=["sign","verify"];const e=t?.crv??"Ed25519";switch(e){case"Ed25519":case"Ed448":n={name:e};break;default:throw new Lc("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{r=["deriveKey","deriveBits"];const e=t?.crv??"P-256";switch(e){case"P-256":case"P-384":case"P-521":n={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":n={name:e};break;default:throw new Lc("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Lc('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return bc.subtle.generateKey(n,t?.extractable??!1,r)}(e,t)}class Ku{dbName;storeName;dbVersion;db=null;constructor(e="soidc",t="session",n=1){this.dbName=e,this.storeName=t,this.dbVersion=n}async init(){return new Promise((e,t)=>{const n=indexedDB.open(this.dbName,this.dbVersion);n.onerror=e=>{t(new Error(`Database error: ${e.target.error}`))},n.onsuccess=t=>{this.db=t.target.result,e(this)},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName)}})}async setItem(e,t){return this.db||await this.init(),new Promise((n,r)=>{const i=this.db.transaction(this.storeName,"readwrite");i.oncomplete=()=>{n()},i.onerror=t=>{r(new Error(`Transaction error for setItem(${e},...): ${t.target.error}`))},i.onabort=t=>{r(new Error(`Transaction aborted for setItem(${e},...): ${t.target.error}`))};i.objectStore(this.storeName).put(t,e)})}async getItem(e){return this.db||await this.init(),new Promise((t,n)=>{const r=this.db.transaction(this.storeName,"readonly");r.onerror=t=>{n(new Error(`Transaction error for getItem(${e}): ${t.target.error}`))},r.onabort=t=>{n(new Error(`Transaction aborted for getItem(${e}): ${t.target.error}`))};const i=r.objectStore(this.storeName).get(e);i.onsuccess=()=>{t(i.result||null)}})}async deleteItem(e){return this.db||await this.init(),new Promise((t,n)=>{const r=this.db.transaction(this.storeName,"readwrite");r.oncomplete=()=>{t()},r.onerror=t=>{n(new Error(`Transaction error for deleteItem(${e}): ${t.target.error}`))},r.onabort=t=>{n(new Error(`Transaction aborted for deleteItem(${e}): ${t.target.error}`))};r.objectStore(this.storeName).delete(e)})}async clear(){return this.db||await this.init(),new Promise((e,t)=>{const n=this.db.transaction(this.storeName,"readwrite");n.oncomplete=()=>{e()},n.onerror=e=>{t(new Error(`Transaction error for clear(): ${e.target.error}`))},n.onabort=e=>{t(new Error(`Transaction aborted for clear(): ${e.target.error}`))};n.objectStore(this.storeName).clear()})}close(){this.db&&(this.db.close(),this.db=null)}}const Zu=async(e,t,n)=>{const r=new URL(t),i=r.origin+r.pathname+r.search;sessionStorage.setItem("idp",e);const o=new URL(e).origin,s=await fetch(`${o}/.well-known/openid-configuration`).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()});sessionStorage.setItem("token_endpoint",s.token_endpoint),sessionStorage.setItem("jwks_uri",s.jwks_uri);let a=n?.client_id;if(!a){const e=s.registration_endpoint,t=await(async(e,t)=>{const n={...t,grant_types:["authorization_code","refresh_token"],id_token_signed_response_alg:"ES256",token_endpoint_auth_method:"none",application_type:"web",subject_type:"public"};return fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})})(e,n??{redirect_uris:[i]}).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()});a=t.client_id,sessionStorage.setItem("client_id",a)}const{pkce_code_verifier:l,pkce_code_challenge:c}=await Qu();sessionStorage.setItem("pkce_code_verifier",l);const u=window.crypto.randomUUID();sessionStorage.setItem("csrf_token",u);const d=s.authorization_endpoint+"?response_type=code"+`&redirect_uri=${encodeURIComponent(i)}&scope=openid offline_access webid`+`&client_id=${a}&code_challenge_method=S256`+`&code_challenge=${c}`+`&state=${u}&prompt=consent`;window.location.href=d},Qu=async()=>{const e=window.crypto.randomUUID()+"-"+window.crypto.randomUUID(),t=new Uint8Array(await window.crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)));return{pkce_code_verifier:e,pkce_code_challenge:btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}},Xu=async(e,t,n,r,i,o)=>{const s=await gu(o.publicKey);s.alg="ES256";const a=await new Ou({htu:i,htm:"POST"}).setIssuedAt().setJti(window.crypto.randomUUID()).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:s}).sign(o.privateKey);return fetch(i,{method:"POST",headers:{dpop:a,"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:n,client_id:r})})},Yu=async(e,t,n,r)=>{const i=await gu(r.publicKey);i.alg="ES256";const o=await new Ou({htu:n,htm:"POST"}).setIssuedAt().setJti(window.crypto.randomUUID()).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:i}).sign(r.privateKey);return fetch(n,{method:"POST",headers:{dpop:o,"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:t})})};cr.ns;async function ed(e){var t=cr.Session.isActive?cr.Session.webId:null;if(!t||t==cr.User.IRI&&cr.User.IRI||await rd(t).then(()=>{od()}),e.hasChildNodes())return;let n;n=cr.User.IRI?Yd()+cr.Button.Menu.SignOut:cr.Button.Menu.SignIn,e.insertAdjacentHTML("afterbegin",n)}function td(){if(!document.getElementById("user-identity-input")){var e=document.querySelector("#document-menu button.signin-user");e&&(e.disabled=!0);var t=cr.User.WebIdDelegate?cr.User.WebIdDelegate:"",n=`<aside id="user-identity-input" class="do on">${cr.Button.Close}<h2>Sign in ${cr.Button.Info.SignIn}</h2><div class="info"></div><p id="user-identity-input-webid"><label>WebID</label> <input id="webid" type="text" placeholder="https://csarven.ca/#i" value="${t}" name="webid"/> <button class="signin">Sign in</button></p></aside>`;document.body.appendChild(Pi(n));var r=document.querySelector("#user-identity-input button.signin");cr.User.WebIdDelegate||r.setAttribute("disabled","disabled"),document.querySelector("#user-identity-input").addEventListener("click",t=>{t.target.closest("button.close")&&e&&(e.disabled=!1)});var i=document.querySelector("#user-identity-input input#webid");if(i){r.addEventListener("click",nd),["keyup","cut","paste","input"].forEach(e=>{i.addEventListener(e,e=>{!function(e,t){var n,r="cut"===e.type||"paste"===e.type?250:0;window.setTimeout(function(){(n=e.target.value).length>10&&n.match(/^https?:\/\//g)?void 0!==e.which&&13===e.which?t.getAttribute("disabled")||(t.setAttribute("disabled","disabled"),e.preventDefault(),e.stopPropagation(),nd()):t.removeAttribute("disabled"):t.getAttribute("disabled")||t.setAttribute("disabled","disabled")},r)}(e,r)})})}i.focus()}}function nd(e){var t=document.getElementById("user-identity-input");return"string"!=typeof e&&(t&&t.querySelector("#user-identity-input-webid").insertAdjacentHTML("beforeend",Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]),e=t.querySelector("input#webid").value.trim()),e?rd(e).then(()=>{var e=document.getElementById("user-info");if(e&&(Di(e),e.insertAdjacentHTML("beforeend",Yd()+cr.Button.Menu.SignOut)),t&&t.parentNode.removeChild(t),cr.User.IRI&&!cr.User.OIDCIssuer){const e={content:"Cannot sign in. Using information from profile to personalise the UI.",type:"info",timer:null};Sd(e,cr.MessageLog),kd(document.body,e),od()}else cr.User.IRI&&async function(){const e=cr.User.OIDCIssuer,t=window.location.href.split("#")[0];cr.Session.login(e,t).catch(e=>{const t={content:"Cannot sign in. Using information from profile to personalise the UI.",type:"info",timer:null};kd(document.body,t),od()})}().catch(e=>{const t={content:"Cannot sign in. Using information from profile to personalise the UI.",type:"info",timer:null};Sd(t,cr.MessageLog),kd(document.body,t),od()})}):Promise.resolve()}function rd(e,t={}){return t.ui=cr.User.UI,t.fetchIndexes=t.fetchIndexes??!0,id(e,t).then(e=>{Object.keys(e).forEach(t=>{cr.User[t]=e[t]}),hc(e)})}function id(e,t={}){if(!e)return Promise.reject(new Error("Could not set subject info - no subjectIRI"));if(!e.toLowerCase().startsWith("http:")&&!e.toLowerCase().startsWith("https:"))return Promise.reject(new Error("Could not set subject info - subjectIRI is not `http(s):`"));return t.noCredentials=!!t.noCredentials,t.noStore=!!t.noStore,wo(e,{},t).then(n=>{return function(e){return!(!e||e.resource||e.cause||e.status?.toString().startsWith("4")||e.status?.toString().startsWith("5")||"function"!=typeof e.out||!Array.from(e.out().quads()).length)}(n)?{Graph:n=n.node(lr.namedNode(e)),IRI:e,Name:Oo(n),Image:Jo(n),URL:(r=n,r.out(po.foaf.homepage).values[0]||r.out(po.foaf.weblog).values[0]||r.out(po.schema.url).values[0]||r.out(po.vcard.url).values[0]||void 0),Role:t.role,UI:t.ui,OIDCIssuer:No(n),ProxyURL:Ro(n),PreferredPolicy:Lo(n),Delegates:Do(n),Contacts:{},Knows:Bo(n),Following:Fo(n),SameAs:[],SeeAlso:[],Storage:Mo(n),Outbox:Po(n),Inbox:jo(n),TypeIndex:{},Preferences:{},PreferencesFile:$o(n),PublicTypeIndex:zo(n),PrivateTypeIndex:qo(n),Liked:Ho(n),Occupations:Vo(n),Publications:Wo(n),Made:Go(n)}:{};var r}).then(e=>e.Graph&&t.fetchIndexes?To(e.Graph).then(t=>(Object.keys(t).forEach(n=>{e.TypeIndex[n]=t[n]}),e)):e)}function od(){$d(cr.DocumentURL).then(e=>{yc()});var e=[];cr.User.Graph&&(e.push(To(cr.User.Graph).then(e=>{Object.keys(e).forEach(t=>{cr.User.TypeIndex[t]=e[t]})})),e.push(function(e){if(e){var t=$o(e)||cr.User.PreferencesFile;return t?.length?wo(t[0]):Promise.reject({})}}(cr.User.Graph).then(e=>(cr.User.Preferences={graph:e},e.node(lr.namedNode(cr.User.IRI)))).then(e=>{Co(e)}).catch(e=>{Co(cr.User.Graph.node(lr.namedNode(cr.User.IRI)))})),e.push(ko(cr.User.IRI)),e.push(Eo(cr.User.Graph))),Promise.allSettled(e).then(e=>(document.getElementById("user-info")&&!cr.Session?.isActive&&(Di(node),ed(node)),function(){if(cr.User.Occupations&&cr.User.Occupations.length>0){var e=[];cr.Resource[cr.DocumentURL].audience.forEach(t=>{cr.User.Occupations.includes(t)&&e.push(wo(t).then(e=>(cr.Resource[t]={graph:e},e?e.node(lr.namedNode(t)):e)))}),Promise.allSettled(e).then(e=>{var t=[];if(e.forEach(e=>{var n=e.value;if(n){var r=n.term.value,i=hs(n),o=r;i.length&&(o=i[0],cr.Resource[r].labels=i),t.push(`<li><a href="${r}" rel="noopener" target="_blank">${o}</a></li>`)}}),t.length>0){var n="<span>This document's audience matches your profile:</span>"+(t=`<ul>${t.join("")}</ul>`);Sd(n={content:n,type:"info",timer:5e3},cr.MessageLog),kd(document.body,n)}})}}(),hc(cr.User))).catch(e=>Promise.resolve());var t=document.querySelectorAll('aside.do article *[rel~="dcterms:creator"] > *[about="'+cr.User.IRI+'"]');for(let e=0;e<t.length;e++){t[e].closest("article").insertAdjacentHTML("afterbegin",'<button class="delete">'+Ri[".fas.fa-trash-alt"]+"</button>")}var n=document.querySelectorAll("aside.do blockquote[cite] article button.delete");for(let e=0;e<n.length;e++)n[e].addEventListener("click",function(e){Md(e.target.closest("button.delete"))})}cr.Session=new class{sessionInformation;isActive_=!1;webId_=void 0;constructor(e){this.sessionInformation={clientDetails:e}}async login(e,t){await Zu(e,t,this.sessionInformation.clientDetails)}async logout(){if(this.sessionInformation.idpDetails=void 0,this.sessionInformation.tokenDetails=void 0,this.isActive_=!1,this.webId_=void 0,this.sessionInformation.clientDetails?.client_id)try{new URL(this.sessionInformation.clientDetails.client_id)}catch(e){this.sessionInformation.clientDetails.client_id=void 0}const e=await(new Ku).init();await e.clear(),e.close()}async handleRedirectFromLogin(){const e=await(async e=>{const t=new URL(window.location.href),n=t.searchParams.get("code");if(null===n)return{clientDetails:e};const r=sessionStorage.getItem("idp");if(null===r||t.searchParams.get("iss")!=r)throw new Error("RFC 9207 - iss != idp - "+t.searchParams.get("iss")+" != "+r);if(t.searchParams.get("state")!=sessionStorage.getItem("csrf_token"))throw new Error("RFC 6749 - state != csrf_token - "+t.searchParams.get("state")+" != "+sessionStorage.getItem("csrf_token"));t.searchParams.delete("iss"),t.searchParams.delete("state"),t.searchParams.delete("code"),window.history.pushState({},document.title,t.toString());const i=sessionStorage.getItem("pkce_code_verifier");if(null===i)throw new Error("Access Token Request preparation - Could not find in sessionStorage: pkce_code_verifier");const o=e?.client_id||sessionStorage.getItem("client_id");if(!o)throw new Error("Access Token Request preparation - Could not find in sessionStorage: client_id (dynamic registration)");const s=sessionStorage.getItem("token_endpoint");if(null===s)throw new Error("Access Token Request preparation - Could not find in sessionStorage: token_endpoint");const a=await Ju("ES256"),l=await Xu(n,i,t.toString(),o,s,a).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}),c=l.access_token,u=sessionStorage.getItem("jwks_uri");if(null===u)throw new Error("Access Token validation preparation - Could not find in sessionStorage: jwks_uri");const d=Vu(new URL(u)),{payload:h}=await Au(c,d,{issuer:r,audience:"solid"}),p=await Mu(await gu(a.publicKey));if(h.cnf.jkt!=p)throw new Error("Access Token validation failed on `jkt`: jkt != DPoP thumbprint - "+h.cnf.jkt+" != "+p);if(h.client_id!=o)throw new Error("Access Token validation failed on `client_id`: JWT payload != client_id - "+h.client_id+" != "+o);const f={...l,dpop_key_pair:a},m={idp:r,jwks_uri:u,token_endpoint:s};e||(e={redirect_uris:[window.location.href]}),e.client_id=o;const g=await(new Ku).init();return await Promise.all([g.setItem("idp",r),g.setItem("jwks_uri",u),g.setItem("token_endpoint",s),g.setItem("client_id",o),g.setItem("dpop_keypair",a),g.setItem("refresh_token",l.refresh_token)]),g.close(),sessionStorage.removeItem("csrf_token"),sessionStorage.removeItem("pkce_code_verifier"),sessionStorage.removeItem("idp"),sessionStorage.removeItem("jwks_uri"),sessionStorage.removeItem("token_endpoint"),sessionStorage.removeItem("client_id"),{clientDetails:e,idpDetails:m,tokenDetails:f}})(this.sessionInformation.clientDetails);e.tokenDetails||(e.tokenDetails=await(async()=>{const e=await(new Ku).init(),t=await e.getItem("client_id"),n=await e.getItem("token_endpoint"),r=await e.getItem("dpop_keypair"),i=await e.getItem("refresh_token");if(null===t||null===n||null===r||null===i)throw new Error("Cannot renew tokens");const o=await Yu(i,t,n,r).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}),s=o.access_token,a=await e.getItem("idp");if(null===a)throw new Error("Access Token validation preparation - Could not find in sessionDatabase: idp");const l=await e.getItem("jwks_uri");if(null===l)throw new Error("Access Token validation preparation - Could not find in sessionDatabase: jwks_uri");const c=Vu(new URL(l)),{payload:u}=await Au(s,c,{issuer:a,audience:"solid"}),d=await Mu(await gu(r.publicKey));if(u.cnf.jkt!=d)throw new Error("Access Token validation failed on `jkt`: jkt != DPoP thumbprint - "+u.cnf.jkt+" != "+d);if(u.client_id!=t)throw new Error("Access Token validation failed on `client_id`: JWT payload != client_id - "+u.client_id+" != "+t);return await e.setItem("refresh_token",o.refresh_token),e.close(),{...o,dpop_key_pair:r}})().catch(e=>{this.logout()})),e.tokenDetails&&(this.sessionInformation=e,this.isActive_=!0,this.webId_=function(e){if("string"!=typeof e)throw new Oc("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:n}=e.split(".");if(5===n)throw new Oc("Only JWTs using Compact JWS serialization can be decoded");if(3!==n)throw new Oc("Invalid JWT");if(!t)throw new Oc("JWTs must contain a payload");let r,i;try{r=Wu(t)}catch{throw new Oc("Failed to base64url decode the payload")}try{i=JSON.parse(Sc.decode(r))}catch{throw new Oc("Failed to parse the decoded payload as JSON")}if(!Zc(i))throw new Oc("Invalid JWT Claims Set");return i}(this.sessionInformation.tokenDetails.access_token).webid)}async createSignedDPoPToken(e){if(null==this.sessionInformation.tokenDetails)throw new Error("Session not established.");const t=await gu(this.sessionInformation.tokenDetails.dpop_key_pair.publicKey);return new Ou(e).setIssuedAt().setJti(window.crypto.randomUUID()).setProtectedHeader({alg:"ES256",typ:"dpop+jwt",jwk:t}).sign(this.sessionInformation.tokenDetails.dpop_key_pair.privateKey)}async authFetch(e,t,n){let r,i,o;if(e instanceof Request?(r=new URL(e.url),i=t?.method||e?.method||"GET",o=new Headers(e.headers)):(t=t||{},r=new URL(e.toString()),i=t.method||"GET",o=t.headers?new Headers(t.headers):new Headers),this.sessionInformation.tokenDetails){n=n??{htu:`${r.origin}${r.pathname}`,htm:i.toUpperCase()};const e=await this.createSignedDPoPToken(n);o.set("dpop",e),o.set("authorization",`DPoP ${this.sessionInformation.tokenDetails.access_token}`)}return e instanceof Request?fetch(new Request(e,{...t,headers:o})):fetch(r,{...t,headers:o})}get isActive(){return this.isActive_}get webId(){return this.webId_}};const sd=cr.ns;function ad(e){return String(e).replace(/[&<>"']/g,function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";default:return e}})}function ld(e){var t=cr.DOMNormalisation.voidElements.concat(cr.DOMNormalisation.selfClosing),n=new RegExp("<("+t.join("|")+")([^<>]*?)?></\\1>","g");return e.replace(n,"<$1$2 />")}function cd(e,t){return ld(ud(e,t=t||cr.DOMNormalisation,[!1]))}function ud(e,t,n,r=0){t=t||cr.DOMNormalisation;var i="";if(void 0===e.nodeType)return i;if(1===e.nodeType){if(t.skipNodeWithId&&e.hasAttribute("id")&&t.skipNodeWithId.includes(e.id))return i;if(e.hasAttribute("class")&&"classWithChildText"in t&&e.matches(t.classWithChildText.class))i+=e.querySelector(t.classWithChildText.element).textContent;else if(!t.skipNodeWithClass||!e.matches("."+t.skipNodeWithClass)){var o=e.nodeName.toLowerCase();const c=e.childNodes[e.childNodes.length-1],u=c&&1===c.nodeType&&!t.inlineElements.includes(c.nodeName.toLowerCase());"html"===o||t.inlineElements.includes(o)||(i+="\n"+"  ".repeat(r)),i+="<"+o;var s=[];for(let n=e.attributes.length-1;n>=0;n--){var a=e.attributes[n];t.skipAttributes.includes(a.name)||(/^\d+$/.test(a.name)||("class"===a.name&&"replaceClassItemWith"in t&&a.value.split(" ").forEach(function(e){if(t.replaceClassItemWith.source.includes(e)){var n=new RegExp(e,"g");a.value=a.value.replace(n,t.replaceClassItemWith.target).trim()}}),"class"===a.name&&"skipClassWithValue"in t&&t.skipClassWithValue===a.value||s.push(a.name+'="'+a.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')))}if(s.length>0&&("sortAttributes"in t&&t.sortAttributes&&s.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),i+=" "+s.join(" ")),t.voidElements.includes(o))i+=" />";else{i+=">",n.push("style"===o||"script"===o||"pre"===o||"code"===o||"samp"===o);for(var l=0;l<e.childNodes.length;l++)i+=ud(e.childNodes[l],t,n,r+1);n.pop(),!t.inlineElements.includes(o)&&u&&(i+="\n"+"  ".repeat(r)),i+="</"+o+">",i+="html"==o?"\n":""}}}else if(8===e.nodeType&&"skipNodeComment"in t&&!t.skipNodeComment)i+="\n\x3c!--"+e.nodeValue+"--\x3e";else if(3===e.nodeType||4===e.nodeType){let r=e.nodeValue;r=r.replace(/&/g,"&amp;"),n.includes(!0)&&(e.parentNode&&"style"===e.parentNode.nodeName.toLowerCase()||e.parentNode&&"script"===e.parentNode.nodeName.toLowerCase()&&e.parentNode.getAttribute("type")&&t.skipEscapingDataBlockTypes.includes(e.parentNode.getAttribute("type").trim()))||(r=r.replace(/</g,"&lt;").replace(/>/g,"&gt;")),r=r.replace(/&amp;(lt|gt|apos|quot|amp);/g,"&$1;"),i+=r}else console.warn("Warning; Cannot handle serialising nodes of type: "+e.nodeType);return i}function dd(){var e=document.doctype,t="";return null!==e&&(t="<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">"),t}function hd(e){const t=document.createDocumentFragment();return[...e.childNodes].forEach(e=>t.appendChild(e)),t}function pd(e){let t=e,n=document.createElement("div");t instanceof Document?n=t.documentElement:n.appendChild(t.cloneNode(!0));["li","dd","figcaption","td","th","video","audio","button","select","textarea"].forEach(e=>{n.querySelectorAll(e).forEach(e=>{if(1===e.children.length&&"p"===e.firstElementChild.tagName.toLowerCase()){const t=e.firstElementChild;for(;t.firstChild;)e.insertBefore(t.firstChild,t);t.remove()}})});let r=n.querySelector(".ProseMirror");return r&&r.parentNode&&r.parentNode.replaceChild(hd(r),r),n.querySelectorAll("a").forEach(e=>{const t=e.nextElementSibling;if(t&&"span"===t.tagName.toLowerCase()&&1===t.childElementCount&&"a"===t.firstElementChild.tagName.toLowerCase()){const n=t.firstElementChild,r=e.getAttribute("href")===n.getAttribute("href"),i=e.getAttribute("title")===n.getAttribute("title");if(r&&i){const r=document.createElement("span");for(;n.firstChild;)r.appendChild(n.firstChild);e.appendChild(r),t.remove()}}}),hd(n)}function fd(e,t){let n=e||document.documentElement;e instanceof Document&&(n=e.documentElement),n=n.cloneNode(!0),t=t||cr.DOMNormalisation,n=pd(n);const r=document.createElement("div");r.appendChild(n);let i=r.getHTML();const o=function(e){const t=md(e),n=t.body.getHTML(),r=zi(n);return t.body.setHTMLUnsafe(r),t}(i);i=cd(o.documentElement,t);let s="SVGSVGElement"===o.constructor.name?'<?xml version="1.0" encoding="utf-8"?>':dd();return s=s.length>0?s+"\n":"",i=s+i,i}function md(e,t={}){t.contentType=t.contentType||"text/html","text/xml"===t.contentType&&(e=e.replace(/<!DOCTYPE[^>]*>/i,""));const n=(new DOMParser).parseFromString(e,t.contentType),r=document.createTreeWalker(n,NodeFilter.SHOW_TEXT,{acceptNode:e=>{const t=e.parentNode?.nodeName?.toLowerCase();return["pre","code","textarea"].includes(t)?NodeFilter.FILTER_REJECT:/^\s*$/.test(e.nodeValue)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i=[];for(;r.nextNode();)i.push(r.currentNode);return i.forEach(e=>e.remove()),n}function gd(e){return e instanceof Document?e.body||void 0:e instanceof XMLDocument?e.documentElement||void 0:e instanceof DocumentFragment?e.firstChild||void 0:e instanceof ShadowRoot?gd(e.host):void 0}function vd(e,t,n){e=zi(e)||"",t=zi(t);var r,i="prefixes"in(n=n||{})&&Object.keys(n.prefixes).length>0?' prefix="'+(r=n.prefixes,Object.keys(r).map(e=>e+": "+r[e]).join(" ")+'"'):"",o=n.lang||"en";return o=' lang="'+o+'" xml:lang="'+o+'"',"<!DOCTYPE html>\n<html"+(o=zi(o="omitLang"in n?"":o))+' xmlns="http://www.w3.org/1999/xhtml">\n  <head>\n    <meta charset="utf-8" />\n    <title>'+e+"</title>\n  </head>\n  <body"+i+">\n    <main>\n"+t+"\n    </main>\n  </body>\n</html>\n"}function yd(e){var t="<dt>Types</dt>";e.type.forEach(function(e){t+='<dd><a about="" href="'+cr.Prefixes[e.split(":")[0]]+e.split(":")[1]+'" typeof="'+e+'">'+e.split(":")[1]+"</a></dd>"});var n="";"object"in e&&"objectTypes"in e&&e.objectTypes.length>0&&(n="<dl><dt>Types</dt>",e.objectTypes.forEach(t=>{n+='<dd><a about="'+e.object+'" href="'+t+'" typeof="'+t+'">'+t+"</a></dd>"}),n+="</dl>");var r="";"object"in e&&"objectLicense"in e&&e.objectLicense.length>0&&(r='<dl><dt>License</dt><dd><a about="'+e.object+'" href="'+e.objectLicense+'" property="schema:license">'+e.objectLicense+"</a></dd></dl>");var i="inReplyTo"in e?'<dl><dt>In reply to</dt><dd><a about="'+e.object+'" href="'+e.inReplyTo+'" property="as:inReplyTo">'+e.inReplyTo+"</a></dd></dl>":"",o="object"in e?'<dt>Object</dt><dd><a href="'+e.object+'" property="as:object">'+e.object+"</a>"+n+r+i+"</dd>":"",s="context"in e&&e.context.length>0?'<dt>Context</dt><dd><a href="'+e.context+'" property="as:context">'+e.context+"</a></dd>":"",a="target"in e&&e.target.length>0?'<dt>Target</dt><dd><a href="'+e.target+'" property="as:target">'+e.target+"</a></dd>":"",l=Ni(),c='<dt>Updated</dt><dd><time datetime="'+l+'" datatype="xsd:dateTime" property="as:updated" content="'+l+'">'+l.substr(0,19).replace("T"," ")+"</time></dd>",u="summary"in e&&e.summary.length>0?'<dt>Summary</dt><dd property="as:summary" datatype="rdf:HTML">'+e.summary+"</dd>":"",d="content"in e&&e.content.length>0?'<dt>Content</dt><dd property="as:content" datatype="rdf:HTML">'+e.content+"</dd>":"",h=cr.User.IRI?'<dt>Actor</dt><dd><a href="'+cr.User.IRI+'" property="as:actor">'+cr.User.IRI+"</a></dd>":"",p='<dt>License</dt><dd><a href="'+cr.NotificationLicense+'" property="schema:license">'+cr.NotificationLicense+"</a></dd>",f="to"in e&&e.to.length>0&&!e.to.match(/\s/g)&&e.to.match(/^https?:\/\//gi)?'<dt>To</dt><dd><a href="'+e.to+'" property="as:to">'+e.to+"</a></dd>":"",m="statements"in e?e.statements:"",g=[t,o,s,a,c,u,d,h,p,f].map(function(e){if(""!==e)return"      "+e+"\n"}).join(""),v="Notification";return t.indexOf("as:Announce")>-1?v+=": Announced":t.indexOf("as:Create")>-1?v+=": Created":t.indexOf("as:Like")>-1?v+=": Liked":t.indexOf("as:Dislike")>-1?v+=": Disliked":t.indexOf("as:Add")>-1&&(v+=": Added"),'<article prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# schema: http://schema.org/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams#">\n  <h1>'+v+'</h1>\n  <section>\n    <dl about="">\n'+g+"    </dl>\n  </section>\n  <section>\n"+m+"\n  </section>\n</article>"}function bd(e){var t,n,r="",i="",o="",s="",a="",l="",c="",u="",d="",h="",p="",f="",m="",g="",v="",y="",b="",w="",_="",x="",S=' prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# schema: http://schema.org/ dcterms: http://purl.org/dc/terms/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp#"',C=e.canonical||"urn:uuid:"+ji(),k=e.motivatedByIRI||"",E="";switch(k=function(e){const t=e.lastIndexOf("#"),n=e.lastIndexOf("/"),r=Math.max(t,n);if(-1===r)return e;const i=e.slice(0,r+1),o=e.slice(r+1),s=Object.keys(cr.Prefixes).find(e=>cr.Prefixes[e]===i);return s?`${s}:${o}`:e}(k)){case"oa:replying":default:k="oa:replying",E="replies",w="In reply to",_="Replied",m="mode"in e&&"object"==e.mode?"#"+e.id:"",g=S;break;case"oa:assessing":E="reviews",w="Review of",_="Reviewed",m="mode"in e&&"object"==e.mode?"#"+e.id:"",g=S;break;case"oa:questioning":E="questions",w="Questions",_="Questioned",m="mode"in e&&"object"==e.mode?"#"+e.id:"",g=S;break;case"oa:describing":E="describes",w="Describes",_="Described",m="#"+e.id;break;case"oa:commenting":E="comments",w="Comments on",_="Commented",m="#"+e.id;break;case"oa:bookmarking":case"bookmark:Bookmark":E="bookmarks",w="Bookmarked",_="Bookmarked",m="mode"in e&&"object"==e.mode?"#"+e.id:"",g=S;break;case"as:Like":E="Liked",w="Like of",_="Liked",m="mode"in e&&"object"==e.mode?"#"+e.id:"",g=S;break;case"as:Dislike":E="Disliked",w="Dislike of",_="Disliked",m="mode"in e&&"object"==e.mode?"#"+e.id:"",g=S}switch(e.mode){default:case"read":n=3,"creator"in e&&"iri"in e.creator&&e.creator.iri==cr.User.IRI&&(y='<button aria-label="Delete item" class="delete do" title="Delete item">'+Ri[".fas.fa-trash-alt"]+"</button>"),x="oa:commenting"==k?"":' class="do"',m="iri"in e?e.iri:m;break;case"write":n=1;break;case"object":n=2}var A="",T="#"+Ui();if("creator"in e){"iri"in e.creator&&(T=e.creator.iri),A=T,u="name"in e.creator?'<span about="'+T+'" property="schema:name">'+(A=e.creator.name)+"</span>":(A=ds(T))==T?A:'<span about="'+T+'" property="schema:name">'+A+"</span>";var I=Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"]);c='<dl class="author-name"><dt>Authors</dt><dd><span rel="dcterms:creator">'+('<span about="'+T+'" typeof="schema:Person">'+('<img alt="" height="48" rel="schema:image" src="'+(I="image"in e.creator?"read"==e.mode?vi(e.creator.image):e.creator.image:cr.User.Image&&(T==cr.User.IRI||cr.User.SameAs.includes(T))?"read"==e.mode?vi(cr.User.Image):cr.User.Image:cr.User.Contacts&&cr.User.Contacts[T]&&cr.User.Contacts[T].Image?cr.User.Contacts[T].Image:I)+'" width="48" /> ')+("url"in e.creator?'<a href="'+e.creator.url+'" rel="schema:url">'+u+"</a>":'<a href="'+T+'">'+u+"</a>")+"</span>")+"</span></dd></dl>"}if(t="<h"+n+' property="schema:name">'+A+' <span rel="oa:motivatedBy" resource="'+k+'">'+E+"</span></h"+n+">","inbox"in e&&void 0!==e.inbox&&(f='<dl class="inbox"><dt>Notifications Inbox</dt><dd><a href="'+e.inbox+'" rel="ldp:inbox">'+e.inbox+"</a></dd></dl>"),"datetime"in e&&void 0!==e.datetime){var R='<time datetime="'+e.datetime+'" datatype="xsd:dateTime" property="dcterms:created" content="'+e.datetime+'">'+e.datetime.substr(0,19).replace("T"," ")+"</time>";r='<dl class="created"><dt>Created</dt><dd>'+("iri"in e?'<a href="'+e.iri+'">'+R+"</a>":R)+"</dd></dl>"}switch(e.language&&(s=oh(e.language,{property:"dcterms:language",label:"Language"}),i=' lang="'+e.language+'"',o=' xml:lang="'+e.language+'"'),e.license&&(a=th(e.license,{rel:"schema:license",label:"License"})),e.rights&&(l=nh(e.rights,{rel:"dcterms:rights",label:"Rights"})),e.type){case"comment":case"note":case"bookmark":case"approve":case"disapprove":case"specificity":if(void 0!==e.target||void 0!==e.inReplyTo){if(void 0!==e.body){var L=[];if(e.body=Array.isArray(e.body)?e.body:[e.body],e.body.forEach(t=>{var r=oh(t.language,{property:"dcterms:language",label:"Language"})||s,c=th(t.license,{rel:"schema:license",label:"License"})||a,u=nh(t.rights,{rel:"dcterms:rights",label:"Rights"})||l,d=t.value||_;t.purpose?("describing"!=t.purpose&&t.purpose!=sd.oa.describing.value||(v+='<section id="note-'+e.id+'" rel="oa:hasBody" resource="#note-'+e.id+'"><h'+(n+1)+' property="schema:name" rel="oa:hasPurpose" resource="oa:describing">Note</h'+(n+1)+">"+r+c+u+'<div datatype="rdf:HTML"'+i+' property="rdf:value schema:description" resource="#note-'+e.id+'" typeof="oa:TextualBody"'+o+">"+d+"</div></section>"),"tagging"!=t.purpose&&t.purpose!=sd.oa.tagging.value||L.push(d)):v+='<section id="note-'+e.id+'" rel="oa:hasBody" resource="#note-'+e.id+'"><h'+(n+1)+' property="schema:name">Note</h'+(n+1)+">"+r+c+u+'<div datatype="rdf:HTML"'+i+' property="rdf:value schema:description" resource="#note-'+e.id+'" typeof="oa:TextualBody"'+o+">"+d+"</div></section>"}),L.length){var N=(L=Li((L=L.map(e=>ad(e.trim())).filter(e=>e.length)).sort())).map(t=>'<li about="#tag-'+e.id+"-"+Ui(null,t)+'" typeof="oa:TextualBody" property="rdf:value" rel="oa:hasPurpose" resource="oa:tagging">'+t+"</li>").join("");v+='<dl id="tags-'+e.id+'" class="tags"><dt>Tags</dt><dd><ul rel="oa:hasBody">'+N+"</ul></dd></dl>"}}else"undefined"!==e.bodyValue&&(v+='<p property="oa:bodyValue">'+e.bodyValue+"</p>");var O="",D="oa:hasTarget";if(void 0!==e.target&&"iri"in e.target){O=e.target.iri;var M=bi(e.target.iri);if(void 0!==e.target.selector){var P="language"in e.target.selector&&e.target.selector.language?e.target.selector.language:"";h='<div rel="oa:hasSelector" resource="#fragment-selector" typeof="oa:FragmentSelector"><dl class="conformsto"><dt>Fragment selector conforms to</dt><dd><a content="'+M+'" lang="" property="rdf:value" rel="dcterms:conformsTo" href="https://tools.ietf.org/html/rfc3987" xml:lang="">RFC 3987</a></dd></dl><dl rel="oa:refinedBy" resource="#text-quote-selector" typeof="oa:TextQuoteSelector"><dt>Refined by</dt><dd><span lang="'+P+'" property="oa:prefix" xml:lang="'+P+'">'+e.target.selector.prefix+'</span><mark lang="'+P+'" property="oa:exact" xml:lang="'+P+'">'+e.target.selector.exact+'</mark><span lang="'+P+'" property="oa:suffix" xml:lang="'+P+'">'+e.target.selector.suffix+"</span></dd></dl></div>"}}else void 0!==e.inReplyTo&&"iri"in e.inReplyTo&&(O=e.inReplyTo.iri,D="rel"in e.inReplyTo?e.inReplyTo.rel:"as:inReplyTo");d='<a href="'+O+'" rel="'+D+'">'+w+"</a>",void 0!==e.target&&void 0!==e.target.source&&(d+=' (<a about="'+e.target.iri+'" href="'+e.target.source+'" rel="oa:hasSource" typeof="oa:SpecificResource">part of</a>)');var j=void 0!==e.target&&"language"in e.target&&e.target.language.length?'<dl><dt>Language</dt><dd><span lang="" property="dcterms:language" xml:lang="">'+e.target.language+"</span></dd></dl>":"";p='<dl class="target"><dt>'+d+"</dt>",void 0!==e.target&&void 0!==e.target.selector&&(p+='<dd><blockquote about="'+O+'" cite="'+O+'">'+j+h+"</blockquote></dd>"),p+="</dl>",p+='<dl class="renderedvia"><dt>Rendered via</dt><dd><a about="'+O+'" href="https://dokie.li/" rel="oa:renderedVia">dokieli</a></dd></dl>';var U='<dl class="canonical"><dt>Canonical</dt><dd rel="oa:canonical" resource="'+C+'">'+C+"</dd></dl>";b='<article about="'+m+'" id="'+e.id+'" typeof="oa:Annotation"'+g+x+">"+y+"\n"+t+"\n"+c+"\n"+r+"\n"+s+"\n"+a+"\n"+l+"\n"+f+"\n"+U+"\n"+p+"\n"+v+"\n</article>"}break;case"ref-footnote":var B=void 0!==e.citationURL&&""!=e.citationURL?'<a href="'+e.citationURL+'" rel="rdfs:seeAlso">'+e.citationURL+"</a>":"",F=e.body&&e.body.length?e.body[0].value:"";v=F?B?", "+F:F:"",b='\n<dl about="#'+e.id+'" id="'+e.id+'" typeof="oa:Annotation">\n<dt><a href="#'+e.refId+'" rel="oa:hasTarget">'+e.refLabel+'</a><span rel="oa:motivation" resource="'+k+'"></span></dt>\n<dd rel="oa:hasBody" resource="#n-'+e.id+'"><div datatype="rdf:HTML" property="rdf:value" resource="#n-'+e.id+'" typeof="oa:TextualBody">'+B+v+"</div></dd>\n</dl>\n";break;case"ref-citation":t="<h"+n+">Citation</h"+n+">";var z="citingEntityLabel"in e.citation?e.citation.citingEntityLabel:e.citation.citingEntity,q=cr.Citation[e.citation.citationCharacterization]||e.citation.citationCharacterization,$="citedEntityLabel"in e.citation?e.citation.citedEntityLabel:e.citation.citedEntity,H='\n<dl about="'+e.citation.citingEntity+'">\n<dt>Cited by</dt><dd><a href="'+e.citation.citingEntity+'">'+z+'</a></dd>\n<dt>Citation type</dt><dd><a href="'+e.citation.citationCharacterization+'">'+q+'</a></dd>\n<dt>Cites</dt><dd><a href="'+e.citation.citedEntity+'" rel="'+e.citation.citationCharacterization+'">'+$+"</a></dd>\n</dl>\n";b='<article about="'+m+'" id="'+e.id+'" prefixes="cito: http://purl.org/spart/cito/"'+x+">\n"+t+"\n"+H+"\n</article>";break;default:console.log(`XXX: noteData ${e} with "${e.type}" type not implemented yet`)}return b}function wd(e){var t=[];let n=e.split(",").map(e=>ad(e.trim())).filter(e=>e.length);return n=Li(n.sort()),n.forEach(e=>{t.push({purpose:"tagging",value:e})}),t}function _d(e,t){var n=e.cloneNode(!0);return n.querySelectorAll(t).forEach(e=>{e.parentNode.removeChild(e)}),n}function xd(e){const t=(e=e??gd(document)).closest("[lang], [xml\\:lang]");return t?.getAttribute("lang")||t?.getAttributeNS("","xml:lang")||""}function Sd(e,t,n={}){const r=Object.assign({},e);r.dateTime=Ni(),t.unshift(r)}function Cd(e,t){if(e){const{response:t,message:n}=e;kd(document.body,n)}else if(t){const{error:e,message:n}=t;kd(document.body,n)}}function kd(e,t,n={}){if(!e||!t)return;n.clearId&&document.getElementById(n.clearId)?.remove(),t.timer="timer"in t?t.timer:cr.ActionMessage.Timer,t.type="type"in t?t.type:"info";const r=Ui(),i=zi('<li id="'+r+'" class="'+t.type+'">'+gc[t.type].icon+" "+t.content+"</li>");let o=e.querySelector("#document-action-message");o||(e.appendChild(Pi('<aside id="document-action-message" class="do on" role="status" tabindex="0">'+cr.Button.Close+'<h2>Messages</h2><ul role="log"></ul></aside>')),o=e.querySelector("#document-action-message")),o.querySelector("h2 + ul").insertAdjacentHTML("afterbegin",i);let s=null;function a(){null!==t.timer&&(s=window.setTimeout(()=>{const t=e.querySelector("#document-action-message");if(t){const n=t.querySelector("#"+r);n&&n.parentNode.removeChild(n);t.querySelector("h2 + ul > li")||e.removeChild(t)}},t.timer))}function l(){null!==s&&(clearTimeout(s),s=null)}if(null!==t.timer){a();const e=["mouseleave","focusout"];["mouseenter","focusin"].forEach(e=>o.addEventListener(e,l)),e.forEach(e=>o.addEventListener(e,a))}return r}function Ed(e){return!!e.textContent.trim()}function Ad(e){var t=e.querySelectorAll(cr.ArticleNodeSelectors.join(","));return t&&t.length>0?t[t.length-1]:gd(document)}function Td(e,t,n){e=e||document,n=n||{},t=zi(t),n.id="id"in n?n.id:cr.DocumentItems[cr.DocumentItems.length-1];var r=cr.DocumentItems.indexOf(n.id),i=Ad(e),o=["article","aside","nav","section"],s=["h1","h2","h3","h4","h5","h6"];if(t="\n"+t,r>-1)for(var a=r;a>=0;a--){var l=e.querySelector("#"+cr.DocumentItems[a]);if(l){s.indexOf(l.nodeName.toLowerCase())>-1&&(l=l.closest(o.join(","))||i),l.insertAdjacentHTML("afterend",t);break}if(0==a){var c=i.querySelector("h1");c?c.insertAdjacentHTML("afterend",t):i.insertAdjacentHTML("afterbegin",t);break}}else i.insertAdjacentHTML("afterbegin",t);return e}function Id(e,t){e=e||document;var n="title"in(t=t||{})?t.title:"Created",r=t.id?t.id:"document-"+n.toLowerCase().replace(/\W/g,"-"),i="property"in t?e.querySelector("#"+r+' [property="'+t.property+'"]'):e.querySelector("#"+r+" time");if(i){var o="datetime"in t?t.datetime.toISOString():Ni();i.getAttribute("datetime")&&i.setAttribute("datetime",o),i.getAttribute("content")&&i.setAttribute("content",o),i.textContent=o.substr(0,o.indexOf("T"))}else e=Td(e,Rd(t),{id:r});return e}function Rd(e){var t="title"in(e=e||{})?e.title:"Created",n="id"in e&&e.id.length>0?' id="'+e.id+'"':"",r="class"in e&&e.class.length>0?' class="'+e.class+'"':"",i="datetime"in e?e.datetime.toISOString():Ni(),o=i.substr(0,i.indexOf("T"));return"        <dl"+r+n+">\n      <dt>"+t+"</dt>\n      <dd>"+("property"in e?'<time content="'+i+'" datatype="xsd:dateTime" datetime="'+i+'" property="'+e.property+'">'+o+"</time>":'<time datetime="'+i+'">'+o+"</time>")+"</dd>\n    </dl>\n"}function Ld(e){"datetime"in(e=e||{})||(e.datetime=new Date),cr.ContributorRoles.forEach(e=>{var t="document-"+e+"s",n=document.getElementById(t);if(n){n.classList.contains("do")&&n.removeAttribute("class"),n.removeAttribute("contenteditable"),document.querySelectorAll("#"+t+" .do.selected").forEach(e=>{e.removeAttribute("class"),e.removeAttribute("contenteditable")}),document.querySelectorAll("#"+t+" .do").forEach(e=>{e.parentNode.removeChild(e)});var r=document.querySelectorAll("#"+t+" dd");n&&0==r.length&&(n=document.getElementById(t)).parentNode.removeChild(n)}});var t="document-language",n=document.querySelector("#"+t+" option:checked");if(n){var r=n.value,i=n.closest("#"+t);if(i.removeAttribute("contenteditable"),""==r)i.parentNode.removeChild(i);else{i.removeAttribute("class");var o=n.closest("dd");o.parentNode.removeChild(o),o='<dd><span content="'+r+'" lang="" property="dcterms:language" xml:lang="">'+cr.Languages[r]+"</span></dd>",i.insertAdjacentHTML("beforeend",o)}}var s="document-license",a=document.querySelector("#"+s+" option:checked");if(a){var l=a.value;(i=a.closest("#"+s)).removeAttribute("contenteditable"),""==l?i.parentNode.removeChild(i):(i.removeAttribute("class"),(o=a.closest("dd")).parentNode.removeChild(o),o='<dd><a href="'+l+'" rel="schema:license" title="'+cr.License[l].description+'">'+cr.License[l].name+"</a></dd>",i.insertAdjacentHTML("beforeend",o))}var c="document-type",u=document.querySelector("#"+c+" option:checked");if(u){var d=u.value;(i=u.closest("#"+c)).removeAttribute("contenteditable"),""==d?i.parentNode.removeChild(i):(i.removeAttribute("class"),(o=u.closest("dd")).parentNode.removeChild(o),o='<dd><a href="'+d+'" rel="rdf:type">'+cr.ResourceType[d].name+"</a></dd>",i.insertAdjacentHTML("beforeend",o))}var h="document-status",p=document.querySelector("#"+h+" option:checked");if(p){var f=p.value;(i=p.closest("#"+h)).removeAttribute("contenteditable"),""==f?i.parentNode.removeChild(i):(i.removeAttribute("class"),(o=p.closest("dd")).parentNode.removeChild(o),o='<dd prefix="pso: http://purl.org/spar/pso/" rel="pso:holdsStatusInTime" resource="#'+Ui()+'"><span rel="pso:withStatus" resource="'+f+'" typeof="pso:PublicationStatus">'+cr.PublicationStatus[f].name+"</span></dd>",i.insertAdjacentHTML("beforeend",o),"http://purl.org/spar/pso/published"==f&&Id(document,{id:"document-published",property:"schema:datePublished",title:"Published",datetime:e.datetime}))}var m="document-test-suite",g=document.querySelector("#"+m+" input");if(g){var v=g.value;(i=g.closest("#"+m)).removeAttribute("contenteditable"),""==v?i.parentNode.removeChild(i):(i.removeAttribute("class"),(o=g.closest("dd")).parentNode.removeChild(o),o='<dd><a href="'+v+'" rel="spec:testSuite">'+v+"</a></dd>",i.insertAdjacentHTML("beforeend",o))}var y="document-inbox",b=document.querySelector("#"+y+" input");if(b){var w=b.value;(i=b.closest("#"+y)).removeAttribute("contenteditable"),""==w?i.parentNode.removeChild(i):(i.removeAttribute("class"),(o=b.closest("dd")).parentNode.removeChild(o),o='<dd><a href="'+w+'" rel="ldp:inbox">'+w+"</a></dd>",i.insertAdjacentHTML("beforeend",o))}var _="document-in-reply-to",x=document.querySelector("#"+_+" input");if(x){var S=x.value;(i=x.closest("#"+_)).removeAttribute("contenteditable"),""==S?i.parentNode.removeChild(i):(i.removeAttribute("class"),(o=x.closest("dd")).parentNode.removeChild(o),o='<dd><a href="'+S+'" rel="as:inReplyTo">'+S+"</a></dd>",i.insertAdjacentHTML("beforeend",o))}Fd()}function Nd(e,t,n){if(e=e||document,t&&n){var r,i=[],o=e.querySelector("#"+n.id);if(t.forEach(e=>{var t=zi("<dd>"+fh(e)+"</dd>");if(o){if(cr.DocumentItems.indexOf(n.id)>-1)r=o.querySelector("dd"),o.removeChild(r);else{var s=o.querySelector('[rel="'+e.rel+'"][href="'+e.href+'"]');s&&(r=s.closest("dd"))&&o.removeChild(r)}o.insertAdjacentHTML("beforeend",t)}else i.push(t)}),i.length)e=Td(e,'<dl id="'+n.id+'"><dt>'+n.title+"</dt>"+i.join("")+"</dl>",{id:n.id});return e}}function Od(e,t){if(t=t||cr.OriginalResourceInfo.timemap){var n="memento-document";wo(t).then(r=>{e||(e=document.getElementById(n))||(document.body.appendChild(Pi('<aside id="'+n+'" class="do on"><h2>Memento</h2>'+cr.Button.Close+'<dl><dt>TimeMap</dt><dd><a href="'+t+'">'+t+"</a></dd></dl></aside>")),e=document.getElementById(n));var i=e.querySelector(".memento");i&&e.removeChild(i);var o=[],s=function(e,t){"sortBy"in(t=t||{})||(t.sortBy="object"),e=lr.grapoi({dataset:e.dataset});var n=Array.from(e.out().quads());return n.sort(function(e,n){return e[t.sortBy].value.toLowerCase().localeCompare(n[t.sortBy].value.toLowerCase())}),n}(r,{sortBy:"object"});s.forEach(e=>{var t=e.subject.value,n=e.predicate.value,r=e.object.value;n===sd.mem.mementoDateTime.value&&o.push('<li><a href="'+t+'" rel="noopener" target="_blank">'+r+"</a></li>")});var a='<dl class="memento"><dt>Memento</dt><dd><ul>'+o.join("")+"</ul></dd></dl>";e.insertAdjacentHTML("beforeend",a),(e=document.getElementById(n)).addEventListener("click",e=>{e.target.closest("button.close")&&(document.querySelector("#document-do .resource-memento").disabled=!1)})}).catch(e=>{})}}function Dd(e,t){var n=function(e,t){e=e||document,t=t||{},t.mode="mode"in t?t.mode:"",t.id="id"in t?t.id:"document-status";var n,r="subjectURI"in t?' about="'+t.subjectURI+'"':"",i="",o="";if("mem:Memento"===t.type)n="Resource State",i="Memento",o=' typeof="'+t.type+'"';else n="Document Status";var s=' id="'+t.id+'"',a="class"in t&&t.class.length>0?' class="'+t.class+'"':"",l="<dd><span"+r+o+">"+i+"</span></dd>",c="",u=e.querySelector("#"+t.id);switch(t.mode){case"create":default:c="<dl"+a+s+"><dt>"+n+"</dt>"+l+"</dl>";break;case"update":if(u){var d=u.cloneNode(!0);u.parentNode.removeChild(u),d.insertAdjacentHTML("beforeend",l),c=d.outerHTML}else c="<dl"+a+s+"><dt>"+n+"</dt>"+l+"</dl>";break;case"delete":if(u){d=u.cloneNode(!0),u.parentNode.removeChild(u);var h=d.querySelector('[typeof="'+t.type+'"]');h&&h.closest("dl").removeChild(h.parentNode),d.querySelectorAll("#"+t.id+" dd").length>0&&(c=d.outerHTML)}}return c}(e=e||document,t=t||{});return e=Td(e,n,t)}function Md(e){e.setAttribute("disabled","disabled");var t=e.closest("article"),n="r-"+t.id,r=t.closest("li:has(blockquote[cite])"),i=r.querySelector("blockquote[cite]").getAttribute("cite"),o=new URL(i);(o=o.href.replace(o.hash,""))&&Xi(o).catch(e=>{console.log(e),r.classList.add("error")}).then(()=>{r.parentNode.removeChild(r);var e=document.querySelector('span[resource="#'+n+'"]');e.outerHTML=e.querySelector("mark").textContent,window.history.replaceState({},null,cr.DocumentURL)})}function Pd(){document.addEventListener("click",e=>{const t=e.target.closest('button.info[rel="rel:help"][resource][title]:not([disabled])');if(t){t.disabled=!0,t.closest(".do")?.querySelector("div.info .error")?.remove();const n=t.getAttribute("resource"),r=yi(n);if(!r&&!i)return;let i="",o="",s="",a="",l="",c="",u="";(cr.Resource[r]?Promise.resolve(cr.Resource[r].graph):wo(r).then(e=>(cr.Resource[r]={graph:e},e))).then(e=>{var t=e.node(lr.namedNode(n));i=cs(t),o=ps(t);let r=Jo(t),d=t.out(sd.rdfs.seeAlso).values,h=t.out(sd.dcterms.subject).values,p=t.out(sd.schema.video).value;if(i&&o){let t,f,m,g,v;if(r&&(r=new URL(r).href,s=`\n                <figure>\n                  <img alt="" rel="schema:image" src="${r}" />\n                </figure>\n              `),p){let n=e.node(lr.namedNode(p));n&&(t=n.out(sd.schema.contentUrl).value,f=n.out(sd.schema.encodingFormat).value,m=n.out(sd.schema.thumbnailUrl).value,g=n.out(sd.schema.duration).value,g&&(v=function(e){if(!/^P(?:\d+[YMD])*(?:T(?:\d+[HMS])*)?$/.test(e))throw new Error("Invalid ISO 8601 duration format");const t=e.match(/P(?:([\d.]+)Y)?(?:([\d.]+)M)?(?:([\d.]+)D)?(?:T(?:([\d.]+)H)?(?:([\d.]+)M)?(?:([\d.]+)S)?)?/),[,n,r,i,o,s,a]=t.map(e=>e?parseFloat(e):0),l=[];return n&&l.push(`${n}y`),r&&l.push(`${r}m`),i&&l.push(`${i}d`),o&&l.push(`${o}h`),s&&l.push(`${s}m`),a&&l.push(`${a}s`),l.length?l.join(", "):"0s"}(g)))}if(t){let e="",n="",r="",i="",o="";(g||f)&&(g&&(n=`<time datatype="xsd:duration" datetime="${g}" property="schema:duration">${v}</time>`),f&&(r=`<span lang="" property="schema:encodingFormat" xml:lang="">${f}</span>`),m&&(i=` (<a href="${m}">poster</a>)`,o=` poster="${m}"`),e=`\n                  <figcaption><a href="${t}">Video</a>${i} of in dokieli [${n}${g&&f?", ":""}${r}]</figcaption>\n                `),a=`\n                <figure about="${p}" id="figure-dokieli-notifications" rel="schema:video" resource="#figure-dokieli-notifications">\n                  <video controls="controls" crossorigin="anonymous"${o} preload="none" resource="${p}" typeof="schema:VideoObject" width="800">\n                    <source rel="schema:contentUrl" src="${t}" />\n                  </video>\n                  ${e}\n                </figure>\n                `}if(d&&(d=Li(d).sort(),d.length&&(c=`\n                  <dt>See also</dt><dd><ul>\n                  ${d.map(t=>`<li><a href="${t}" rel="rdfs:seeAlso noopener" target="_blank">${cs(e.node(lr.namedNode(t)))||t}</a></li>`).join("")}\n                  </ul></dd>\n                `)),h){h=Li(h).sort();const t=[];h.forEach(n=>{const r=e.node(lr.namedNode(n)),i=cs(r),o=ps(r);i.length&&o.length&&t.push(`\n                    <dt about="${n}" property="skos:prefLabel">${i}</dt>\n                    <dd about="${n}" property="skos:definition">${o}</dd>\n                  `)}),t.length&&(u=`\n                  <dt>Subjects</dt><dd><dl>\n                  ${t.join("")}\n                  </dl></dd>\n                `)}l=`\n              <details about="${n}" open="">\n                <summary property="schema:name">About ${i}</summary>\n                ${s}\n                <div datatype="rdf:HTML" property="schema:description">\n                ${o}\n                </div>\n                ${a}\n                <dl>\n                  <dt>Source</dt>\n                  <dd><a href="${n}" rel="dcterms:source noopener" target="_blank">${n}</a></dd>\n                  ${u}\n                  ${c}\n                </dl>\n              </details>\n            `}return l}).then(t=>{e.target.closest(".do").querySelector("div.info").prepend(Pi(t))}).catch(n=>{t.disabled=!1,e.target.closest(".do").querySelector("div.info").prepend(Pi('<p class="error">Can\'t find the documentation. Try later.</p>'))})}})}function jd(){document.addEventListener("click",async e=>{var t=e.target.closest("button.signout-user");t&&(t.disabled=!0,await async function(){cr.Session?.isActive&&await cr.Session.logout(),uc(),cr.User={IRI:null,Role:"social",UI:{}},yc()}())})}function Ud(e,t){var n,r,i,o;switch((t=t||{}).sort=t.sort||!1,t.role=t.role||"contributor",t.role){case"contributor":default:n=Ko(e);break;case"author":n=Qo(e);break;case"editor":n=Zo(e);break;case"performer":n=Xo(e);break;case"publisher":i=(r=e).out(po.schema.publisher).values,o=r.out(po.dcterms.publisher).values,n=i.length>0?i:o.length>0?o:void 0}if(n&&0!==n.length){var s=[];return n.forEach(t=>{var n={};n.uri=t;var r=e.node(lr.namedNode(t)),i=ls(r);i&&(n.name=i);var o=function(e){const t=[po.schema.email,po.foaf.mbox];for(const n of t){const t=e.out(n).terms;for(const e of t){if("NamedNode"===e.termType)return e.value;if("Literal"===e.termType)return zi(e.value)}}}(r);o&&(n.email=o.startsWith("mailto:")?o.slice(7):o),s.push(n)}),t.sort&&s.sort(function(e,t){return e.name?t.name?e.name.localeCompare(t.name):-1:t.name?1:e.uri.localeCompare(t.uri)}),s}}function Bd(e,t){var n=t.subjectURI,r={state:sd.ldp.RDFSource.value,profile:sd.ldp.RDFSource.value};r.graph=e,r.rdftype=fs(e),r.title=cs(e),r.published=es(e),r.updated=ts(e),r.description=ps(e),r.license=is(e),r.rights=ss(e),r.language=rs(e),r.contributors=Ud(e,{role:"contributor"}),r.authors=Ud(e,{role:"author"}),r.editors=Ud(e,{role:"editor"}),r.performers=Ud(e,{role:"performer"}),r.publishers=Ud(e,{role:"publisher"}),r.audience=function(e){var t=e.out(po.schema.audience).values;return t.length?t:void 0}(e),r.profile=sd.ldp.RDFSource.value,e.out(sd.rdf.type).values.forEach(e=>{e==sd.mem.Memento.value&&(r.state=sd.mem.Memento.value)});var i=e.out(sd.mem.original).values;i.length&&(r.state=sd.mem.Memento.value,r.original=i[0],r.original==t.subjectURI?r.profile=sd.mem.OriginalResource.value:r.profile=sd.mem.Memento.value);var o=e.out(sd.mem.memento).values;o.length&&(r.profile=sd.mem.OriginalResource.value,r.memento=o[0]),i=e.out(sd.mem.original).values,o=e.out(sd.mem.memento).values,i.length&&o.length&&i[0]!=o[0]&&(r.profile=sd.mem.Memento.value,r.original=i[0],r.memento=o[0]);var s=e.out(sd.rel["latest-version"]).values;s.length&&(r["latest-version"]=s[0]);var a=e.out(sd.rel["predecessor-version"]).values;a.length&&(r["predecessor-version"]=a[0]);var l=e.out(sd.mem.timemap).values;l.length?r.timemap=l[0]:r.timemap=null;var c=e.out(sd.mem.timegate).values;c.length&&(r.timegate=c[0]),(!cr.OriginalResourceInfo||"mode"in t&&"update"==t.mode)&&(cr.OriginalResourceInfo=r),r.inbox=Uo(e),r.annotationService=e.out(sd.oa.annotationService).values,e.out(sd.odrl.hasPolicy).values.length&&e.term.value==n&&(r.odrl=function(e){var t={odrl:{}},n=e.out(sd.odrl.hasPolicy);return n.values.forEach(n=>{t.odrl[n]={};var r=e.node(lr.namedNode(n)),i=r.out(sd.rdf.type).values;t.odrl[n].rdftype=i,i.forEach(i=>{i==sd.odrl.Offer.value&&r.out(sd.odrl.permission).values.forEach(r=>{t.odrl[n].permission={},t.odrl[n].permission[r]={};var i=e.node(lr.namedNode(r)),o=i.out(sd.odrl.assigner).values;t.odrl[n].permission[r].action=t.odrl.permissionAssigner=o;var s=i.out(sd.odrl.action).values;t.odrl[n].permission[r].action=t.odrl.permissionActions=s});i==sd.odrl.Agreement.value&&r.out(sd.odrl.prohibition).values.forEach(r=>{t.odrl[n].prohibition={},t.odrl[n].prohibition[r]={};var i=e.node(lr.namedNode(r)),o=i.out(sd.odrl.assigner).values;t.odrl[n].prohibition[r].action=t.odrl.prohibitionAssigner=o;var s=i.out(sd.odrl.assignee).values;t.odrl[n].prohibition[r].action=t.odrl.prohibitionAssignee=s;var a=i.out(sd.odrl.action).values;t.odrl[n].prohibition[r].action=t.odrl.prohibitionActions=a})})}),t.odrl}(e)),r.spec={},e.out(sd.spec.requirement).values.length&&e.term.value==n&&(r.spec.requirement=Vd(e));var u=e.out(sd.spec.changelog);return u.values.length&&e.term.value==n&&u.out(sd.spec.change).values.length&&(r.spec.change=function(e){var t={change:{}},n=e.out(sd.spec.change);return n.values.forEach(n=>{var r=e.node(lr.namedNode(n));t.change[n]={},t.change[n][sd.spec.statement.value]=r.out(sd.spec.statement).values[0],t.change[n][sd.spec.changeSubject.value]=r.out(sd.spec.changeSubject).values[0],t.change[n][sd.spec.changeClass.value]=r.out(sd.spec.changeClass).values[0]}),t.change}(u)),e.out(sd.spec.advisement).values.length&&e.term.value==n&&(r.spec.advisement=function(e){var t={spec:{}};return t.spec.advisement={},e.out(sd.spec.advisement).values.forEach(n=>{t.spec.advisement[n]={};var r=e.node(lr.namedNode(n));t.spec.advisement[n][sd.spec.statement.value]=r.out(sd.spec.statement).values[0],t.spec.advisement[n][sd.spec.advisementLevel.value]=r.out(sd.spec.advisementLevel).values[0];var i=r.out(lr.namedNode(n)).values;Object.keys(cr.Citation).forEach(e=>{i.length&&(t.spec.advisement[n][e]=i)});var o=r.out(sd.rdfs.seeAlso).values;o.length&&(t.spec.advisement[n][sd.rdfs.seeAlso.value]=o)}),t.spec.advisement}(e)),r.skos=Wd(e),r.citations=function(e){var t=cr.DocumentURL,n=Object.keys(cr.Citation).concat([sd.dcterms.references.value,sd.schema.citation.value]).map(e=>lr.namedNode(e)),r=e.out(n).distinct().values,i=[];return r.forEach(e=>{var n=yi(e);n!==t&&i.push(n)}),r=Li(i).sort()}(e),r.video=e.out(sd.schema.video).values,r.audio=e.out(sd.schema.audio).values,r}async function Fd(e,t){e=e||fd(),(t=t||{}).contentType="contentType"in t?t.contentType:"text/html",t.subjectURI="subjectURI"in t?t.subjectURI:cr.DocumentURL;var n=t.subjectURI;cr.Resource=cr.Resource||{},cr.Resource[n]=cr.Resource[n]||{},cr.Resource[n].data=e,t.storeHash&&(cr.Resource[n].digestSRI=await Fi(e)),cr.Resource[n].contentType=t.contentType;var r=[];return r.push(function(e,t){var n=t.subjectURI;if(cr.MediaTypes.Markup.includes(t.contentType)){var r=md(e,t),i=cr.MediaTypes.RDF.filter(e=>!cr.MediaTypes.Markup.includes(e)).map(e=>'script[type="'+e+'"]'),o=[];return r.querySelectorAll(i.join(", ")).forEach(e=>{var t=e.getAttribute("type").trim(),r=e.textContent,i=Array.from(r.matchAll(/<!\[CDATA\[(.*?)\]\]>/gs));i.length>0&&(r=i.map(e=>e[1].trim()).join("\n"));var s=r.split(/\r\n|\r|\n/);r=(s=s.filter((e,t)=>0!==t&&t!==s.length-1||!(e=e.trim()).startsWith("#")&&!e.startsWith("//"))).join("\n");var a={subjectURI:n,contentType:t};o.push(mo(r,a))}),Promise.allSettled(o).then(e=>{const t=lr.dataset();return e.forEach(e=>{e.value&&t.addAll(e.value.dataset)}),lr.grapoi({dataset:t})})}return Promise.resolve()}(e,t)),r.push(mo(e,t)),Promise.allSettled(r).then(e=>{const t=lr.dataset();return e.forEach(e=>{e.value&&t.addAll(e.value.dataset)}),lr.grapoi({dataset:t})}).then(e=>{var r=Bd(e=e.node(lr.namedNode(n)),t);for(var i in r)Object.hasOwn(r,i)&&"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(cr.Resource[n][i]=r[i]);return r})}async function zd(e=DO.C.DocumentURL,t,n,r={}){t=t||fd();const i=!1!==r.storeHash;await Fd(t,{storeHash:i}).then(t=>{DO.C.Resource[e]={...DO.C.Resource[e],...t}}),n?qd(n,r):await $d(e,r),yc()}function qd(e,t){var n=t?.checkHeaders??["wac-allow","link","last-modified","etag","expires","date","allow"],r=e.headers,i=cr.DocumentURL;const o={};if(t?.preserveHeaders?.length)for(const e of t.preserveHeaders){const t=cr.Resource[i]?.headers?.[e];void 0!==t&&(o[e]=t)}cr.Resource[i].response=e,cr.Resource[i].headers={...o},cr.Resource[i].headers.response=r,n.forEach(t=>{var n=e.headers.get(t);if(n)if(cr.Resource[i].headers[t]={"field-value":n},"wac-allow"==t){var r=Hi(cr.Resource[i].headers["wac-allow"]["field-value"],new RegExp(/(\w+)\s*=\s*"?\s*((?:\s*[^",\s]+)*)\s*"?/,"ig"));cr.Resource[i].headers["wac-allow"].permissionGroup={},r.forEach(e=>{var t=Li((e[2]||"").toLowerCase().split(/\s+/));cr.Resource[i].headers["wac-allow"].permissionGroup[e[1]]=t})}else if("link"==t){var o=uo.parse(n);cr.Resource[i].headers.linkHeaders=o,cr.Resource[i].headers.linkHeaders.refs.forEach(t=>{t.rel=t.rel.toLowerCase();var n=t.uri;n.startsWith("http:")||n.startsWith("https:")||(n=t.uri=gi(xi(e.url),n))})}else"allow"==t&&(cr.Resource[i].headers.allow=n.toLowerCase().split(",").map(e=>e.trim()))})}function $d(e,t){if((t=t||{}).reuse=!0===t.reuse,t.followLinkRelationTypes=t.followLinkRelationTypes||[],t.reuse){const n=new Date,r=cr.Resource[e].headers?.response,i=r?.get("date"),o=i?new Date(i):null;(!r||!i||o&&n.getTime()-o.getTime()>cr.RequestCheck.Timer)&&(t.reuse=!1)}if(t.reuse)return Promise.resolve(cr.Resource[e]);return eo(e,{"Cache-Control":"no-cache"},{noCache:!0}).then(n=>{qd(n),Hd(e,t)})}function Hd(e,t={}){var n=[],r=cr.Resource[e].headers?.linkHeaders;return r&&r.refs.forEach(e=>{var r=e.rel,i=e.uri;"followLinkRelationTypes"in t&&t.followLinkRelationTypes.includes(r)&&n.push(wo(i))}),Promise.allSettled(n).then(t=>(t.forEach(e=>{var t=e.value;if(t){var n=t.term.value;cr.Resource[n]={},cr.Resource[n].graph=t}}),cr.Resource[e]))}function Vd(e){var t={spec:{}};return t.spec.requirement={},e.out(sd.spec.requirement).values.forEach(n=>{t.spec.requirement[n]={};var r=e.node(lr.namedNode(n));t.spec.requirement[n][sd.spec.statement.value]=r.out(sd.spec.statement).values[0],t.spec.requirement[n][sd.spec.requirementSubject.value]=r.out(sd.spec.requirementSubject).values[0],t.spec.requirement[n][sd.spec.requirementLevel.value]=r.out(sd.spec.requirementLevel).values[0],Object.keys(cr.Citation).forEach(e=>{var i=r.out(lr.namedNode(e)).values;i.length&&(t.spec.requirement[n][e]=i)});var i=r.out(sd.rdfs.seeAlso).values;i.length&&(t.spec.requirement[n][sd.rdfs.seeAlso.value]=i)}),t.spec.requirement}function Wd(e){var t={skos:{data:{},type:{}}};const n=[];e.out().quads().forEach(e=>{var r=e.subject.value,i=e.predicate.value,o=e.object.value,s=i==sd.rdf.type.value,a=i.startsWith("http://www.w3.org/2004/02/skos/core#"),l=o.startsWith("http://www.w3.org/2004/02/skos/core#");s&&l&&(t.skos.type[o]=t.skos.type[o]||[],t.skos.type[o].push(r)),(a||s&&l)&&(t.skos.data[r]=t.skos.data[r]||{},t.skos.data[r][i]=t.skos.data[r][i]||[],t.skos.data[r][i].push(o),n.push(e))});const r=lr.dataset(n);return t.skos.graph=lr.grapoi({dataset:r}),t.skos}function Gd(e,t){e=e||cr.DocumentURL;const n=cr.Resource?.[e]?.headers?.["wac-allow"]?.permissionGroup;return!!n&&(n.user&&n.user.includes(t)||n.public&&n.public.includes(t))}function Jd(e,t){e=e||cr.DocumentURL;const n=cr.Resource?.[e]?.headers?.["wac-allow"]?.permissionGroup;return!n||Gd(e,t)}function Kd(e,t,n){if(e){n=n||{};var r=t?Pi(t).cloneNode(!0):document;"datetime"in n||(n.datetime=new Date),Id(r,{id:"document-modified",property:"schema:dateModified",title:"Modified",datetime:n.datetime}),Ld(n),so(e,null,t=fd(),n).then(e=>Cd(e)).catch(e=>Cd(null,e)).finally(()=>{Fd(t,{mode:"update"})})}}function Zd(e,t,n){var r="";switch(e.nodeName.toLowerCase()){case"ol":case"ul":default:r='<li id="'+t+'">'+n+"</li>";break;case"dl":r='<dt id="'+t+'"></dt><dd>'+n+"</dd>"}return r}function Qd(e,t,n){if(!e){Ad(document).insertAdjacentHTML("beforeend",'<section id="references"><h2>References</h2><div><ol></ol></div></section>')}if(function(e,t){(t=t||{}).external=t.external||!0,t.internal=t.internal||!1;var n=document.querySelectorAll('body *:not([id="references"]) cite > a'),r={},i=document.location.origin+document.location.pathname,o=function(e,t,n,r){var i='<span class="ref"> <span class="ref-reference" id="'+t+'">'+cr.RefType[cr.DocRefType].InlineOpen+'<a href="#'+n+'">'+r+"</a>"+cr.RefType[cr.DocRefType].InlineClose+"</span></span>";e.insertAdjacentHTML("afterend",i)};n.forEach(n=>{var s,a,l,c,u=n.parentNode;if(t.external&&!n.href.startsWith(i+"#")||t.internal&&n.href.startsWith(i+"#"))if(s=r[n.outerHTML],l="r-"+Ui(),s){if(a=s,s="ref-"+s,c=document.querySelector("#"+s+" .jumplink")){var d=c.querySelectorAll("sup a"),h=[];d.forEach((e,t)=>{h.push(' <sup><a href="#'+bi(e.href)+'">'+String.fromCharCode(t+97)+"</a></sup>")}),h.push(' <sup><a href="#'+l+'">'+String.fromCharCode(d.length+97)+"</a></sup>"),h=Pi('<span class="jumplink"><sup>^</sup>'+h.join(" ")+"</span>"),c.parentNode.replaceChild(h,c),o(u,l,s,a)}}else{var p=Object.keys(r).length;r[n.outerHTML]=p+1,a=p+1,s="ref-"+(p+1);n.getAttribute("rel");var f=n.getAttribute("data-versiondate")||"",m=n.getAttribute("data-versionurl")||"",g=n.getAttribute("title");g=g?' title="'+g+'"':"",f&&m&&(f=' data-versiondate="'+f+'"',m=' data-versionurl="'+m+'"');var v="<a "+f+m+' href="'+n.href+'"'+g+">"+n.href+"</a>";c='<span class="jumplink"><sup><a href="#'+l+'">^</a></sup></span>';var y="";switch(e.nodeName.toLowerCase()){case"ol":case"ul":default:y=c+" <cite>"+n.textContent+"</cite>, <cite>"+v+"</cite>";break;case"dl":y="<cite>"+n.textContent+"</cite>, <cite>"+v+"</cite>"}var b=Zd(e,s,y);e.insertAdjacentHTML("beforeend",b),o(u,l,s,a)}})}(e=document.querySelector("#references").querySelector("dl, ol, ul")),n){var r=Zd(e,t,n);e.insertAdjacentHTML("beforeend",r)}}function Xd(e){(e=e||document).querySelectorAll("[data-versionurl], [data-originalurl]").forEach(e=>{if(!(e.nextElementSibling&&e.nextElementSibling.classList.contains("do")&&e.nextElementSibling.classList.contains("robustlinks"))){var t=e.getAttribute("href"),n=e.getAttribute("data-originalurl");n=(n=n?n.trim():void 0)?'<span>Original</span><span><a href="'+n+'" rel="noopener" target="_blank">'+n+"</a></span>":"";var r=e.getAttribute("data-versionurl");r=r?r.trim():void 0;var i=e.getAttribute("data-versiondate"),o="";i?o='<span>Near Link Date</span><span><a href="'+(o="http://timetravel.mementoweb.org/memento/"+(i=i.trim()).replace(/\D/g,"")+"/"+t)+'" rel="noopener" target="_blank">'+i+"</a></span>":r&&(i=r),r=r?'<span>Version</span><span><a href="'+r+'" rel="noopener" target="_blank">'+i+"</a></span>":"";var s="",a=[],l=e.getAttribute("rel");l&&(a=function(e,t){t=t||Object.keys(cr.Citation);var n=[];return e.split(" ").forEach(e=>{if(cr.Citation[e])n.push(cr.Citation[e]);else{var r=e.split(":");2==r.length&&t.forEach(e=>{r[1]!=bi(e)&&r[1]!=Ci(e)||n.push(cr.Citation[e])})}}),n}(l),a.length>0&&(s="<span>Citation Reason</span><span>"+a.join(", ")+"</span>")),e.insertAdjacentHTML("afterend",'<span class="do robustlinks"><button title="Show Robust Links">\u{1f517}</button><span>'+s+n+r+o+"</span></span>")}}),document.querySelectorAll(".do.robustlinks").forEach(e=>{e.addEventListener("click",e=>{if(e.target.closest("button")){var t=e.target.parentNode;t.classList.contains("on")?t.classList.remove("on"):t.classList.add("on")}})})}function Yd(e={}){let t=cr.SecretAgentNames[function(e){const t=new Uint32Array(1);return crypto.getRandomValues(t),t[0]%e}(cr.SecretAgentNames.length)];cr.User.Name&&(t=`<span about="${cr.User.IRI}" property="schema:name">${cr.User.Name}</span>`);let n="";(!("omitImage"in e)||!e.omitImage)&&"Image"in cr.User&&void 0!==cr.User.Image&&cr.User.Image.length>0&&(n=eh(cr.User.Image,e)+" ");let r=`<span typeof="schema:Person">${t}</span>`;return"IRI"in cr.User&&null!==cr.User.IRI&&cr.User.IRI.length>0&&(r=`<span about="${cr.User.IRI}" typeof="schema:Person">${n}<a rel="schema:url" href="${cr.User.IRI}">${t}</a></span>`),r}function eh(e,t={}){var n="avatarSize"in t?t.avatarSize:cr.AvatarSize;return`<img alt="" height="${n}" rel="schema:image" src="${e}" width="${n}" />`}function th(e,t={}){return t.rel=t.rel?t.rel:"schema:license",t.label=t.label?t.label:"License",rh(e,t)}function nh(e,t={}){return t.rel=t.rel?t.rel:"dcterms:rights",t.label=t.label?t.label:"Rights",rh(e,t)}function rh(e,t={}){if(!e)return"";var n="",r="",i=e;return n='<dl class="'+t.label.toLowerCase()+'"><dt>'+t.label+"</dt><dd>","name"in t?(i=t.name,r="description"in t?' title="'+t.description+'"':""):cr.License[e]&&(i=cr.License[e].name,r=' title="'+cr.License[e].description+'"'),n+='<a href="'+e+'" rel="'+t.rel+'"'+r+">"+i+"</a>",n+="</dd></dl>"}function ih(e,t={}){if(e&&t){var n=t.id?` id="${t.id}"`:"",r=t.title||t.id,i=t.class?` class="${t.class}"`:` class="${r.toLowerCase()}"`,o=[];return e.forEach(e=>{var t=e.prefix?` prefix="${e.prefix}"`:"",n=void 0!==e.lang?` lang="${e.lang}"`:"",r=void 0!==e.xmlLang?` xml:lang="${e.xmlLang}"`:"",i=e.resource?` resource="${e.resource}"`:"",s=e.content?` content="${e.content}"`:"",a=e.datatype?` datatype="${e.datatype}"`:"",l=e.typeOf?` typeof="${e.typeOf}"`:"";if(e.child){var c=e.child.typeOf?` typeof="${e.child.typeOf}"`:"",u=e.child.resource?` resource="${e.child.resource}"`:"";o.push(`\n        <dd>\n          <span${s}${a}${n}${t} rel="${e.rel}"${i}${l}${r}>\n            <span rel="${e.child.rel}"${u}${c}>${e.child.textContent}</span>\n          </span>\n        </dd>\n      `)}else e.rel&&e.property?o.push(`<dd><a href="${e.href}"${s}"${n} property="${e.property}" rel="${e.rel}${i}${r}>${e.textContent||e.href}</a></dd>`):e.rel?o.push(`<dd><a href="${e.href}"${t} rel="${e.rel}"${i}>${e.textContent||e.href}</a></dd>`):e.property&&o.push(`<dd><span${s}${a}${n}${t} property="${e.property}"${r}>${e.textContent}</span></dd>`)}),`\n    <dl${i}${n}>\n      <dt>${r}</dt>\n      ${o.join("\n")}\n    </dl>`}}function oh(e,t={}){if(!e)return"";var n=t.property||"dcterms:language",r=e,i=cr.Languages[e]||e;return t.title=t.label||"Language",ih([{property:n,content:r,textContent:i,lang:"",xmlLang:""}],t)}function sh(e){var t="",n="";return cr.User.TypeIndex&&cr.User.TypeIndex[sd.as.Announce.value]&&(cr.User.UI&&cr.User.UI.annotationInboxLocation&&cr.User.UI.annotationInboxLocation.checked&&(n=' checked="checked"'),t=`<input type="checkbox" id="${e}-annotation-inbox" name="${e}-annotation-inbox"${n} /><label for="annotation-inbox">Inbox</label>`),t}function ah(e){var t=[],n="";return void 0!==cr.AnnotationService&&(cr.User.Storage&&cr.User.Storage.length>0||cr.User.Outbox&&cr.User.Outbox.length>0?cr.User.UI&&cr.User.UI.annotationLocationService&&cr.User.UI.annotationLocationService.checked&&(n=' checked="checked"'):n=' checked="checked" disabled="disabled"',t.push(`<input type="checkbox" id="${e}-annotation-location-service" name="${e}-annotation-location-service"${n} /><label for="annotation-location-service">Annotation service</label>`)),n=' checked="checked"',(cr.User.Storage&&cr.User.Storage.length>0||cr.User.Outbox&&cr.User.Outbox.length>0)&&(cr.User.UI&&cr.User.UI.annotationLocationPersonalStorage&&!cr.User.UI.annotationLocationPersonalStorage.checked&&(n=""),t.push(`<input type="checkbox" id="${e}-annotation-location-personal-storage" name="${e}-annotation-location-personal-storage"${n} /><label for="annotation-location-personal-storage">Personal storage</label>`)),"Store at: "+t.join("")}function lh(e){var t="",n="";return"selected"in(e=e||{})?""==(n=e.selected)&&(t+='<option selected="selected" value="">Choose a language</option>'):n=void 0!==cr.User.UI.Language?cr.User.UI.Language:"en",Object.keys(cr.Languages).forEach(e=>{t+="<option"+(e==n?' selected="selected"':"")+' value="'+e+'">'+cr.Languages[e]+"</option>"}),t}function ch(e){var t="",n="";return"selected"in(e=e||{})?""==(n=e.selected)&&(t+='<option selected="selected" value="">Choose a license</option>'):n=void 0!==cr.User.UI.License?cr.User.UI.License:"https://creativecommons.org/licenses/by/4.0/",Object.keys(cr.License).forEach(e=>{if("NoLicense"!=e){var r=e==n?' selected="selected"':"";t+='<option value="'+e+'" title="'+cr.License[e].description+'"'+r+">"+cr.License[e].name+"</option>"}}),t}function uh(e,t,n={}){t.addEventListener("click",t=>{if(t.target.closest("button.copy-to-clipboard")){var n;switch(e.nodeName.toLowerCase()){default:case"pre":n=e.textContent;break;case"input":case"textarea":n=e.value;break;case"table":i=(r=e).querySelector("thead"),o=r.querySelectorAll("tbody"),s=dh(i),a=[],o.forEach(e=>{a.push(dh(e))}),a=a.join("\n"),n=s+"\n"+a}navigator.clipboard.writeText(n).then(()=>{var e="Copied to clipboard.";Sd(e={content:e,type:"info",timer:3e3},cr.MessageLog),kd(document.body,e)}).catch(e=>{var t="Failed to copy text to clipboard.";Sd(t={content:t,type:"error",timer:3e3},cr.MessageLog),kd(document.body,t)})}var r,i,o,s,a})}function dh(e){var t,n=[];switch(e.nodeName.toLowerCase()){case"thead":t=e.querySelectorAll("tr:last-child");break;case"tbody":t=e.querySelectorAll("tr")}return t.forEach(t=>{var r;switch(e.nodeName.toLowerCase()){case"thead":r=t.querySelectorAll("th, td");break;case"tbody":r=t.querySelectorAll("td")}var i=[];r.forEach(e=>{var t=zi(e.textContent.trim()).replace(/"/g,'""');i.push(t)}),n.push(i.join('","'))}),n.map(e=>'"'+e+'"').join("\n")}function hh(e,t){t=t||{};var n=ll(e,{extensions:[tc()],allowDangerousHtml:!0,htmlExtensions:[nc(),Ql()]});return t.createDocument&&(n=vd("","<article>"+n+"</article>")),n}function ph(e){return e=(e=e||"").length&&"http"==e.slice(0,4)&&e.indexOf("#")>-1?"oa:"+e.substr(e.lastIndexOf("#")+1):e,cr.MotivationSign[e]||"#"}function fh(e,t){var n="",r="",i="",o="",s="",a="",l="",c="",u="",d="";"rel"in e&&""!=e.rel&&(i=' rel="'+e.rel+'"'),"href"in e&&""!=e.href&&(s=' href="'+e.href+'"'),"expanded"==t&&(d=' id="'+(u=Ui())+'"',n="about"in e&&""!=e.about?' about="'+e.about+'"':' about="#'+u+'"',r="property"in e&&""!=e.property?' property="'+e.property+'"':' property="rdfs:label"',"resource"in e&&""!=e.resource&&(o=' resource="'+e.resource+'"'),"content"in e&&""!=e.content&&(a=' content="'+e.content+'"'),"lang"in e&&""!=e.lang?l=' lang="'+e.lang+'" xml:lang="'+e.lang+'"':"datatype"in e&&""!=e.datatype&&(l=' datatype="'+e.datatype+'"'),"typeOf"in e&&""!=e.typeOf&&(c=' typeof="'+e.typeOf+'"'));var h="datatype"in e&&"xsd:dateTime"==e.datatype?"time":""==s?"span":"a";return"<"+h+n+a+s+d+l+r+i+o+c+">"+(e.textContent||e.href||"")+"</"+h+">"}const mh=cr.ns;function gh(e,t,n,r){return new Promise((i,o)=>{var s={type:["as:Announce"],object:n,summary:t,license:"https://creativecommons.org/licenses/by/4.0/"};if(cr.Resource[n]||cr.Resource[Si(n)])cr.Resource[n].rdftype.length&&(s.objectTypes=cr.Resource[n].rdftype),cr.Resource[n].license&&(s.objectLicense=cr.Resource[n].license);else{var a=cr.Resource[n].graph.node(rdf.namedNode(n)),l=fs(a);l.length&&(s.objectTypes=l);var c=is(a);c&&(s.objectLicense=c)}e.forEach(e=>{s.to=e;var t=r.querySelector('[value="'+e+'"]')||r.querySelector("#share-resource-to");t.parentNode.insertAdjacentHTML("beforeend",'<span class="progress" data-to="'+e+'">'+Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]+"</span>"),function(e,t){return _o(mh.ldp.inbox.value,e).then(e=>(console.log(e),e[0])).catch(n=>{t.parentNode.querySelector('.progress[data-to="'+e+'"]').setHTMLUnsafe(zi(Ri[".fas.fa-times-circle.fa-fw"]+" Inbox not responding. Try later."))})}(e,t).then(n=>{s.inbox=n,vh(s).then(r=>{var i=r.headers.get("Location");i&&(i=gi(n,i),t.parentNode.querySelector('.progress[data-to="'+e+'"]').setHTMLUnsafe(zi('<a href="'+i+'" rel="noopener" target="_blank">'+Ri[".fas.fa-check-circle.fa-fw"]+"</a>")))}).catch(n=>{t.parentNode.querySelector('.progress[data-to="'+e+'"]').setHTMLUnsafe(zi(Ri[".fas.fa-times-circle.fa-fw"]+" Unable to notify. Try later."))})})})})}function vh(e){var t,n;if("slug"in e&&(t=e.slug),"inbox"in e&&(n=e.inbox),!n)return Promise.reject(new Error("No inbox to send notification to"));var r=yd(e);return yh(n,t,r=vd("",r,{prefixes:cr.Prefixes}),{contentType:"text/html",profile:"https://www.w3.org/ns/activitystreams"})}function yh(e,t,n,r){return function(e){return to(vi(e),{header:"Accept-Post"}).catch(e=>({headers:"application/ld+json"})).then(e=>{let t=e.headers.trim().split(/\s*,\s*/);return t.includes("text/html")||t.includes("application/xhtml+xml")?"text/html":t.includes("application/ld+json")||t.includes("application/json")||t.includes("application/activity+json")||t.includes("*/*")?"application/ld+json":t.includes("text/turtle")?"text/turtle":t.includes("application/n-triples")?"application/n-triples":t.includes("application/n-quads")?"application/n-quads":t.includes("text/n3")?"text/n3":(console.log("Accept-Post contains unrecognised media-range; "+e.headers),e.headers)})}(e).then(i=>((r=r||{}).preferredContentType=i,function(e,t){switch(t.preferredContentType){case"text/html":case"application/xhtml+xml":return Promise.resolve(e);case"text/turtle":case"application/n-triples":case"application/n-quads":case"text/n3":case"application/trig":return go(e,t.contentType,t.preferredContentType,t);default:return go(e,t.contentType,"application/ld+json",t)}}(n,r).then(n=>{var i="profile"in r?'; profile="'+r.profile+'"':"",o=r.preferredContentType+i+"; charset=utf-8";return io(e,t,n,o)})))}var bh=i(3481),wh=i(4555);const _h={...bh,...i.t(wh,2)};var xh;const Sh={atemp:{label:"Air temperature",unitLabel:"degrees Celsius",property:"ex:FIXME-atemp",datatype:"xsd:double",xpathResultType:"NUMBER_TYPE"},wtemp:{label:"Water temperature",unitLabel:"degrees Celsius",property:"ex:FIXME-wtemp",datatype:"xsd:double",xpathResultType:"NUMBER_TYPE"},depth:{label:"Depth",unitLabel:"meters",property:"qudt-unit:Meter",datatype:"xsd:double",xpathResultType:"NUMBER_TYPE"},hr:{label:"Heart rate",unitLabel:"beats per minute",property:"qudt-unit:HeartBeatsPerMinute",datatype:"xsd:unsignedByte",xpathResultType:"NUMBER_TYPE"},cad:{label:"Cadence",unitLabel:"revolutions per minute",property:"ex:FIXME-cadence",datatype:"xsd:unsignedByte",xpathResultType:"NUMBER_TYPE"},speed:{label:"Speed",unitLabel:"meters per second",property:"schema:speed",datatype:"xsd:double",xpathResultType:"NUMBER_TYPE"},course:{label:"Course",unitLabel:"degrees",property:"ex:FIXME-course",datatype:"xsd:decimal",xpathResultType:"NUMBER_TYPE"},bearing:{label:"Bearing",unitLabel:"degrees",property:"ex:FIXME-bearing",datatype:"xsd:decimal",xpathResultType:"NUMBER_TYPE"}};function Ch(e){var t=document.implementation.createHTMLDocument("template"),n=new DOMParser;e=e.replace(/<!DOCTYPE[^>]*>/i,"");var r=n.parseFromString(e,"text/xml"),i=r;if(cr.Map){cr.Map.off(),cr.Map.remove();var o=document.querySelector('[typeof="schema:Map"]');o.parentNode.parentNode.removeChild(o.parentNode)}var s=function(e,t,n){n=n||{};var r="",i={};i.minLat=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt/@lat[not(. > ../../gpx:trkpt/@lat)][1]",t,null,"NUMBER_TYPE"),i.minLon=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt/@lon[not(. > ../../gpx:trkpt/@lon)][1]",t,null,"NUMBER_TYPE"),i.maxLat=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt/@lat[not(. < ../../gpx:trkpt/@lat)][1]",t,null,"NUMBER_TYPE"),i.maxLon=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt/@lon[not(. < ../../gpx:trkpt/@lon)][1]",t,null,"NUMBER_TYPE"),i.minEle=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt/gpx:ele[not(. > ../../gpx:trkpt/gpx:ele)][1]",t,null,"NUMBER_TYPE"),i.maxEle=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt/gpx:ele[not(. < ../../gpx:trkpt/gpx:ele)][1]",t,null,"NUMBER_TYPE"),i.startDate=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt[1]/gpx:time",t,null,"STRING_TYPE"),i.endDate=kh(e,"/gpx:gpx/gpx:trk/gpx:trkseg/gpx:trkpt[last()]/gpx:time",t,null,"STRING_TYPE"),i.metadataBounds=i.minLon+","+i.minLat+","+i.maxLon+","+i.maxLat,i.dataset=i.startDate+","+i.endDate+","+i.metadataBounds,i.centreLat=(i.minLat+i.maxLat)/2,i.centreLon=(i.minLon+i.maxLon)/2,i.metadataBoundsURL=`https://www.openstreetmap.org/?minlon=${i.minLon}&amp;minlat=${i.minLat}&amp;maxlon=${i.maxLon}&amp;maxlat=${i.maxLat}`,async function(e,t){const n=`https://nominatim.openstreetmap.org/reverse?format=geojson&zoom=10&lat=${e}&lon=${t}`,r={Accept:"application/json"},i={noCredentials:!0};try{const e=await Yi(n,r,i),t=await e.json(),o=t.features[0].properties.osm_id,s=`https://nominatim.openstreetmap.org/details.php?format=json&osmtype=${t.features[0].properties.osm_type.charAt(0).toUpperCase()}&osmid=${o}`,a=await Yi(s,r,i);return{reverse:t,details:await a.json()}}catch(e){throw console.error("Error fetching or processing data:",e),e}}(i.centreLat,i.centreLon).then(e=>{setTimeout(()=>{document.querySelector('[typeof="schema:ExerciseAction"]').appendChild(Pi(`\n                    <dt>Place</dt>\n                    <dd><a href="https://www.wikidata.org/entity/${e.details.extratags.wikidata}" rel="schema:exerciseCourse">${e.reverse.features[0].properties.name}</a> (<a about="https://www.wikidata.org/entity/${e.details.extratags.wikidata}" rel="schema:hasMap" href="${i.metadataBoundsURL}">map</a>)</dd>\n                  `))},3e3)});var o=new Date(i.startDate).getTime(),s=new Date(i.endDate).getTime(),a=Math.floor((s-o)/1e3),l=new Date(null);l.setSeconds(a);var c=l.toUTCString();i.duration=c.substr(c.indexOf(":")-2,8);var u=t.querySelector("gpx trk trkseg");n.gpxtpx={},Object.keys(Sh).forEach(t=>{n.gpxtpx[t]=kh(e,`gpx:trkpt[1]/gpx:extensions/gpxtpx:TrackPointExtension/gpxtpx:${t}`,u,null,"BOOLEAN_TYPE")});var d="";i.datasetPublisher=cr.User.IRI?cr.User.IRI:null,i.datasetPublisher&&(d=`\n          <dl>\n            <dt>Publisher</dt>\n            <dd rel="dcterms:publisher">${Yd({omitImage:!0})}</dd>\n          </dl>`);var h=Rd({id:"dataset-published",property:"schema:datePublished",title:"Published"}),p="";cr.User.IRI&&(p=`\n          <dl rel="schema:hasPart" resource="#activity" typeof="as:Travel">\n            <dt>Actor</dt>\n            <dd rel="as:actor">${Yd()}</dd>\n          </dl>`);var f=4,m=[],g=[];Object.keys(Sh).forEach(e=>{if(n.gpxtpx[e]){f++,m.push(`<th rel="qb:component" resource="#component/${i.dataset}/measure/${e}" typeof="qb:ComponentSpecification"><span rel="qb:componentProperty" resource="${Sh[e].property}" typeof="qb:MeasureProperty"><span property="skos:prefLabel" rel="rdfs:subPropertyOf" resource="sdmx-measure:obsValue">${Sh[e].label}</span></span></th>`);var t=Sh[e].property,r=cr.Prefixes[t.split(":")[0]]+t.split(":")[1];g.push(`<li><a href="${r}">${Sh[e].label}</a> (${Sh[e].unitLabel})</li>`)}}),m=m.join(""),g=g.join("");var v=Ui();return r=`\n    <figure id="geo" rel="schema:hasPart" resource="#geo">\n      <figcaption>Activity at <a href="${i.metadataBoundsURL}">${i.metadataBounds}</a> .</figcaption>\n      <div class="do" id="${v}" typeof="schema:Map"></div>\n      <details>\n        <summary>More details about GPS and extension data</summary>\n        <table id="cube/${i.dataset}">\n          <caption>Activity data at <a href="${i.metadataBoundsURL}">${i.metadataBounds}</a> .</caption>\n          <thead id="structure/${i.dataset}" rel="schema:hasPart" resource="#structure/${i.dataset}" typeof="qb:DataStructureDefinition">\n            <tr>\n              <th rel="qb:component" resource="#component/${i.dataset}/dimension/time" typeof="qb:ComponentSpecification"><span rel="qb:componentProperty" resource="sdmx-dimension:timePeriod" typeof="qb:DimensionProperty"><span property="skos:prefLabel">Time Period</span></span></th>\n              <th rel="qb:component" resource="#component/${i.dataset}/measure/latitude" typeof="qb:ComponentSpecification"><span rel="qb:componentProperty" resource="wgs:lat" typeof="qb:MeasureProperty"><span property="skos:prefLabel" rel="rdfs:subPropertyOf" resource="sdmx-measure:obsValue">Latitude</span></span></th>\n              <th rel="qb:component" resource="#component/${i.dataset}/measure/longitude" typeof="qb:ComponentSpecification"><span rel="qb:componentProperty" resource="wgs:lon" typeof="qb:MeasureProperty"><span property="skos:prefLabel" rel="rdfs:subPropertyOf" resource="sdmx-measure:obsValue">Longitude</span></span></th>\n              <th rel="qb:component" resource="#component/${i.dataset}/measure/altitude" typeof="qb:ComponentSpecification"><span rel="qb:componentProperty" resource="wgs:alt" typeof="qb:MeasureProperty"><span property="skos:prefLabel" rel="rdfs:subPropertyOf" resource="sdmx-measure:obsValue">Altitude</span></span></th>\n${m}\n            </tr>\n          </thead>\n          <tbody id="dataset/${i.dataset}" rel="schema:hasPart" resource="#dataset/${i.dataset}" typeof="qb:DataSet">`+function(e,t,n,r){var i="",o=kh(e,"gpx:trkpt",t,null,"ORDERED_NODE_ITERATOR_TYPE");try{var s,a,l=o.iterateNext();for(xh=0;l;)n.lat=kh(e,"@lat",l,null,"NUMBER_TYPE"),n.lon=kh(e,"@lon",l,null,"NUMBER_TYPE"),n.time=kh(e,"gpx:time",l,null,"STRING_TYPE"),n.ele=kh(e,"gpx:ele",l,null,"NUMBER_TYPE"),n.timePeriod=n.time.replace(/Z/,""),i+=`\n            <tr about="#dataset/${n.dataset}/${n.time};${n.lat},${n.lon};${n.ele}" typeof="qb:Observation">\n              <td rel="sdmx-dimension:timePeriod" resource="gi:${n.timePeriod}">${n.time}</td>\n              <td datatype="xsd:decimal" property="wgs:lat">${n.lat}</td>\n              <td datatype="xsd:decimal" property="wgs:lon">${n.lon}</td>\n              <td datatype="xsd:decimal" property="wgs:alt">${n.ele}</td>`+Eh(e,l,n,r)+`\n              <td rel="qb:dataSet" resource="#dataset/${n.dataset}"></td>\n            </tr>`,void 0!==s&&void 0!==a&&(xh+=Th(s,a,n.lat,n.lon)),s=n.lat,a=n.lon,l=o.iterateNext();xh+=Th(s,a,n.lat,n.lon)}catch(e){console.log("Error: Document tree modified during iteration "+e)}return i}(e,u,i,n)+`\n          </tbody>\n          <tfoot>\n            <tr>\n              <td about="#dataset/${i.dataset}" colspan="2">\n                <p><a href="#dataset/${i.dataset}">Dataset</a> <a href="#structure/${i.dataset}">structure</a>:</p>\n\n                <dl>\n                  <dt>Dimensions</dt>\n                  <dd><a href="http://purl.org/linked-data/sdmx/2009/dimension#timePeriod">Time</a> (ISO 8601)</dd>\n                  <dt>Measures</dt>\n                  <dd>\n                    <ul>\n                      <li><a href="http://www.w3.org/2003/01/geo/wgs84_pos#lat">Latitude</a> (decimal degrees)</li>\n                      <li><a href="http://www.w3.org/2003/01/geo/wgs84_pos#lon">Longitude</a> (decimal degrees)</li>\n                      <li><a href="http://www.w3.org/2003/01/geo/wgs84_pos#alt">Altitude</a> (meters)</li>\n${g}\n                    </ul>\n                  </dd>\n                </dl>\n              `+h+d+p+`\n              </td>\n              <td colspan="${f-2}">\n                <dl about="#activity/${i.dataset}" typeof="schema:ExerciseAction">\n                  <dt>Distance</dt>\n                  <dd property="schema:distance">${function(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}(xh,2)} km</dd>\n                  <dt>Time</dt>\n                  <dd><time datatype="xsd:duration" datetime="${function(e){const[t,n,r]=e.split(":").map(Number);return`PT${t}H${n}M${r}S`}(i.duration)}" property="schema:activityDuration">${i.duration}</time></dd>\n                </dl>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </details>\n    </figure>\n`,r}(r,i),a=document.body.getAttribute("prefix")+" wgs: http://www.w3.org/2003/01/geo/wgs84_pos# sdmx-dimension: http://purl.org/linked-data/sdmx/2009/dimension# sdmx-measure: http://purl.org/linked-data/sdmx/2009/measure# gi: http://reference.data.gov.uk/id/gregorian-instant/ qudt-unit: http://qudt.org/vocab/unit#";document.body.setAttribute("prefix",a);var l=Ad(document);l.appendChild(Pi(s));var c=l.querySelector("#geo table");c.insertAdjacentHTML("afterend",cr.Button.Clipboard),uh(c,c.nextElementSibling);const u=document.querySelector("head title");u&&(u.textContent=""),t.documentElement.setHTMLUnsafe(document.documentElement.getHTML()),o=document.querySelector('[typeof="schema:Map"]');var d=_h.map(o,{preferCanvas:!0});cr.Map=d,_h.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{subdomains:"abc",attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'}).addTo(d);new _h.GPX(e,{async:!0,joinTrackSegments:!1,polyline_options:{color:"#f00",opacity:.75,weight:3,lineCap:"round"},markers:{startIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAtCAMAAAAX+PImAAABC1BMVEUAAAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAD///8AlAAAkgAAgQAAgwAAhgAAjQAAkAAAhwAElQQAigD7/fv3/PcfoR8LmQsAjABRtlFGskY8rTw0qjQAkQDx+fHp9unX7te+5L6W05ZjvmMUnRTi8+Lc8NzP68+q26qc1px0xXRAr0DM6szI6Mi04LSIzYhyxHJpwGkupy4spyzxfiXGAAAALXRSTlMA/QL59OffBr60qG9iDuzPujoJ746Ff3l0TUhAMycjGxJd18WunJhZLRgMZVI0U6/AAAACQklEQVQ4y32U53baQBBGR6L33k1zjZ0sLJJA9GoDjmt63v9JMrNarELs+4ODVvd8MxrtCmzU62opmg6no6VqU4VjQieFVI4JFH8qnwl5hUY+wJwkL+vgRK2kmJfTL6pDiMuAnqbrutaTMbGQLVgNaMM+J9YzXUj+8kGpioTekHcPcENjSK4NguaZCDDELUL8GTAkeAJEUQh9WjYny8XrxORvynmCnvOUSoiE1e5uMxo/PC9NUqiQ7wqNGLkDXDL3XzsWt7+meG1Qu5EbyEYogmrsN50D4xdT1glkoBG0IvjKSpApr9wKUWJQ8aNhYI3njpMnU3YShbgiivDJg8u4/YMhVCYMMTQ03uWLscsYzdEYonEGZWnMRx0Xv8mwM46N0V4aEYhLY7lxGeOFNPL0LKLT++8u426Cho5DbUOd5jHDR3txlfkp5x78BIk0GjrHkK1D+EYRBrWRBSjKqfPVo11jiQLHIiwGAJkcjZ1W/j6NrS5/rLh8c0Hazzfi1c2o7nSx2z5ud/MpCWua+YUKSNv3tkF4d3o/xV8SqEayBkQrzGSKJQn6JLBoFgRXfoWUQd/eyTONyQhB4pyhQo6x5kh/SPdx7TIEkkyAKYo8UvJE4QJN64BaVAhmQ5e+Mthch5nihaVb4KAWYF4hUHMf/rLPY/hKKrhIRJk7ItICD/WUU6ETe0Ql6VD8cThGLTlayctxv9cKCzfhvzRSTDaRAS/2x8jVxDHqZz9NohCCdwkVsduLBHxAtuBLN+FDWgXvqP4Bkoed0xIT03MAAAAASUVORK5CYII=",endIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAtCAMAAAAX+PImAAABAlBMVEUAAADGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkLGQkL///+3LCy4Li62KSnFQEDDPT3COzu7MjK9NDT9+Pi6MDC/NzfARUXBOTn+/PzUf3/Ob2/GV1e6NTX57e303t7iqKjYjIzLZGTJX1/78/P35+f14uLx19fx1NTtysrrxMTkrq7MaGjIXFzEUVG8PDznubnnuLjdnJy+Pz/5SaUvAAAALHRSTlMA/AL5Cgb08ObdurSoGg3sz75zbmM6joV/eVpNSEAzJyMSX+jh18SunJgtUvqwWL0AAAJBSURBVDjLfZN3e6JAEIcHsAXF3kssudRbAQFBjSWx5NLLle//VW5nWaUYff/hYZ+X3wyzu+AhKs1aSpblVK2piLBP9LSSjROGEM+WS9Gw0CkniJ/MdRv8iI0sCXP+U/QJxTPCGBimaRoDHlOI7oSe24AxsjRN1TRnaDIplt8qzQT7fqSpWzTLwKV4HRjKBRMsFdEpzDFx8eQUkOpO0LXxZr0Za/pOuUzjf56jMFQp8+W9bduPbx8sBQtJWKeA7gSXpr/6LncrTLSw3WQEIkmMcOjK9KG/xV5hCtY5K0HnxI3Q524CT1nrNAR3IA+NGH0OaY23vp8/Fu8kBUWBFdHHjwHj7pOGTKiRgwI1DE3V13bAuJ1RY0SNC8hzY3bbDzBFg2ccN5JQ5MbHQ0Cw37lRxn9h4/h6Dhj3Y50NROpBG+eBM18FyvzFIdOh/riBtEwNk77/e/EJzxhhuVOHKt9Zff7k1djofHcLAFCKY4hGlc/fttvl61ylDLFIGwC3jneiL96Xr08vy9kCD4iDM78SgVKXdgdEVxdfC9U7ZJkWIN0c4YoPBwWSigCjHhNQmTjeScYeeASSviRUQcdyNIo1whbo2nUUOKUEEQR+pQxjgN/jwsmNd+eqAkI88FXKg4eSI0IYInfBRytBwkKiBX7EvBQypJoIAdIpEoxIdiFEO+tX8Mbu0cj4lFgR9hFrvlbKfNyHWiE5Bb6lkyW8iRIcoOlOJdaDQ4jFOE6iEoWDRKu026s0HCFSkWQFjtKthEf1H+4TmsxXLEfyAAAAAElFTkSuQmCC",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAQAAAC0NkA6AAAELklEQVR4AWIYBaNgFIyCUTAKRsEoADRLF2uSFEEcwCMjpaRlfb9vcXeHK+5whjP+GuzzMFfuzBl3d4fx6ZK0iGC2exenC4d/tHdV/NL+bNTf2kf+ODLUFEF9X4sIMMip+tPIouX16FWLEROKYiXzAlh80FxQyWfQ6gL8w4gCvB53cJ/2OMZOJ8xIyEjYLeYiyGM2VOVp5rxLl9GKAP8RBEFdrqe60EaLAYM66KiTbjWjR1CMAEqQKprkKpWhjhTLDLQyn436nUukz9Ejc451dmLRZkOms9F0xuuwVwlPQ4Av2VGR98ex399N+txvxQP5NAIGMMdhWY6fBFozsUedcVOHBRbksh3Z7DbsV0Y0acKvEECxpiPxaBi11iBMOfNnvMUAAOaNJcSKAgR9mtmxh1xdmBJLXx2uUvlcEV2y4cSMNCMhICiAzMzrcdZPzU2s0nbyaZzX1BxZG9jq00xb7C/rkutcQ/1J/VxFZXbZRkNzAhQrWJwuFsoGoEkvuwvsTAfcVhOYI78trCrAM8ysmNR6lEcXTF4eh5pLLnORjGjWCQF5TgAszhYAI++B6+os+EZa2IUXABTIso3HC+xmMRnh1E7Hk0+mapQqKcixBUx4cg7zoIAgIUlErxrcOXPTb/KO7sB/nICWzgSUx8PO1WdNPtr3yZQmeUQFWdCsfzJ+QUYG0hmSCtxhc6T5phVPqcprDLJ8udQtCjSYfcWn9bcjGu8RVXKMgKcAFGBkJEuaIKnEUXpoj862d2SWuzY0CWgIgZm6BMFku1GYMhfiyLL5MWBIE5LNOpnMUYL41J3drM2kyW3bQwQCHkSuhwNqot7W1rCJBjQj4wJARtJksk4um2iiRB1Cf2nP3Uetabu+9ZAgL4hBJEiCs+BFyDDvrkAQgM0ccEnHItpog/Xkr+t3+22/04Nv/Sg2+RQxgAisyq4EtnQRvSpOohgGQNH5BOBOAL7wyl/fH+sb33rrdaBYpgPpYwJeEIOIkmdgKkl62S9aNGvmrBBzuQeYUPqyt/29fdUpzz2FFEOC1OY5IPOCQWSRo7Ah1V5ZimQTihKdquB83evu/u5wZzrnfQixSZyYZvzxL4Eh5BZ4E2owotmQSbWiBFSGsnPd/e2xbtzZ3gUKmD7Mn9Mar/Iv2w8iokAdVZ8pB4pcYp8zAEbX39uc1h7oRp3zOu7GNmf6nC+X478BDCCLsCCnbAOyKKRrwg1t0Rzs9nv0IULeogP8MAOsLAEGkBdgDB1s88fR9jrUfG9y/aSbdpWHAHmSP+QnGERgOGbZReuwxbOUPeQ7ZJSLtM8f6DFMUpXfoAf4+uH+gzNRAC0jfRDOkmtUSzVVCQLElGf0ND8pIPC7o+Q3/1nVL9novLU6SkEVTQlTpK/ojwEDyIN4ud7RQY9VI5lPY+A36Cn+/cAwMpz/G/IdAqGyx1q2VHAAAAAASUVORK5CYII=",wptIcons:{"":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAzCAMAAAAuJJHNAAAAkFBMVEUAAAAAru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru8Aru9ovJP8AAAAL3RSTlMA+AT68Fr0FA8H3MSXQDkL6+bg1o6CUkcxwbitbV8sJyQZz76neH1yTB6yolWHaUf8FCEAAAGESURBVDjLfdTnloIwEAXgmyxVKUoTxLWsvezO+7/dqkgGDPH7B2dOuJkwQVe8Dgv7Fq48DIqjfJtYQggrGWczvcifXSxiTmXH6DkHFvWJeomOcky6dNYp+KEhiSrZbGlY+vqQzMikbuKGEzIRNu7klcwqD8BySmbiEXbRi18Hu/SLWAbIHSlOtpaQm30n2NjFhnvxtZd4srnB0xIlx5h7aMiAgxSYOdT6RivklwvYQqWI+CATVZHjWyW3uGIzUhW/uAkV1EYr4qgHRLy1nY+XvNt3l3frtFHDKe92CQTEj38egLhISZnHQNFpsqjyxWHuENs/cqdkNilxl5FZ7fPWdNwAvyaTHxdPhSCDIxqe6V8frfHCZ9OXo+WOh5dYAZ8XycHcypCC2YI0B3R5c31oz+g5Oe/tXKDPV2PDg/ImmmgzzYbuiEsMzWpEbBJiwJFYIMG03nO/NYXDpz7Mv1KjcmFQJvRgnWC0b2L6YENhR0t8cLLUgRjIgG8ig9U2xGdy/R7zH4uopdSUohgfAAAAAElFTkSuQmCC"}}}).on("loaded",e=>{var t=e.target;d.fitBounds(t.getBounds());var n=[],r=t.get_moving_pace();if(r){var i=Math.floor(r/1e3),o=new Date(null);o.setSeconds(i);var s=o.toUTCString();r=s.substr(s.indexOf(":")-2,8),n.push("<dt>Average pace</dt><dd>"+r+" per km</dd>")}var a=t.get_average_hr();a&&n.push("<dt>Average heart rate</dt><dd>"+a+" bpm</dd>");var l=t.get_elevation_gain();l&&n.push("<dt>Elevation gain</dt><dd>"+parseFloat(l.toFixed(2))+" m</dd>");var c=t.get_elevation_loss();c&&n.push("<dt>Elevation lost</dt><dd>"+parseFloat(c.toFixed(2))+" m</dd>"),document.querySelector('tfoot > tr > td [typeof="schema:ExerciseAction"]').insertAdjacentHTML("beforeend","                  "+n.join("\n                  "))}).addTo(d);return _h.control.scale({imperial:!1}).addTo(d),Promise.resolve(t)}function kh(e,t,n,r,i){var o=function(e,t,n,r,i){return e=e||document,n=n||document,r="function"==typeof r?r:Ah,i=XPathResult[i]||XPathResult.ANY_TYPE,e.evaluate(t,n,r,i)}(e,t,n,r,i);switch(o.resultType){case 0:default:return o;case 1:return o.numberValue;case 2:return o.stringValue;case 3:return o.booleanValue}}function Eh(e,t,n,r){var i=t.querySelector("extensions"),o=[];return Object.keys(Sh).forEach(t=>{if(r.gpxtpx[t]){var n=kh(e,"gpxtpx:TrackPointExtension/gpxtpx:"+t,i,null,Sh[t].xpathResultType);o.push(`<td datatype="${Sh[t].datatype}" property="${Sh[t].property}">${n}</td>`)}}),o.join("\n              ")}function Ah(e){return{xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",gpx:"http://www.topografix.com/GPX/1/1",gpxx:"http://www.garmin.com/xmlschemas/GpxExtensions/v3",gpxtpx:"http://www.garmin.com/xmlschemas/TrackPointExtension/v1"}[e]||"http://www.topografix.com/GPX/1/1"}function Th(e,t,n,r){var i=.017453292519943295,o=Math.cos,s=.5-o((n-e)*i)/2+o(e*i)*o(n*i)*(1-o((r-t)*i))/2;return 12742*Math.asin(Math.sqrt(s))}var Ih="http://www.w3.org/1999/xhtml";const Rh={svg:"http://www.w3.org/2000/svg",xhtml:Ih,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lh(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Rh.hasOwnProperty(t)?{space:Rh[t],local:e}:e}function Nh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ih&&t.documentElement.namespaceURI===Ih?t.createElement(e):t.createElementNS(n,e)}}function Oh(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Dh(e){var t=Lh(e);return(t.local?Oh:Nh)(t)}function Mh(){}function Ph(e){return null==e?Mh:function(){return this.querySelector(e)}}function jh(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Uh(){return[]}function Bh(e){return null==e?Uh:function(){return this.querySelectorAll(e)}}function Fh(e){return function(){return this.matches(e)}}function zh(e){return function(t){return t.matches(e)}}var qh=Array.prototype.find;function $h(){return this.firstElementChild}var Hh=Array.prototype.filter;function Vh(){return Array.from(this.children)}function Wh(e){return new Array(e.length)}function Gh(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Jh(e,t,n,r,i,o){for(var s,a=0,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Gh(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Kh(e,t,n,r,i,o,s){var a,l,c,u=new Map,d=t.length,h=o.length,p=new Array(d);for(a=0;a<d;++a)(l=t[a])&&(p[a]=c=s.call(l,l.__data__,a,t)+"",u.has(c)?i[a]=l:u.set(c,l));for(a=0;a<h;++a)c=s.call(e,o[a],a,o)+"",(l=u.get(c))?(r[a]=l,l.__data__=o[a],u.delete(c)):n[a]=new Gh(e,o[a]);for(a=0;a<d;++a)(l=t[a])&&u.get(p[a])===l&&(i[a]=l)}function Zh(e){return e.__data__}function Qh(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Xh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yh(e){return function(){this.removeAttribute(e)}}function ep(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tp(e,t){return function(){this.setAttribute(e,t)}}function np(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rp(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ip(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function op(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sp(e){return function(){this.style.removeProperty(e)}}function ap(e,t,n){return function(){this.style.setProperty(e,t,n)}}function lp(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function cp(e,t){return e.style.getPropertyValue(t)||op(e).getComputedStyle(e,null).getPropertyValue(t)}function up(e){return function(){delete this[e]}}function dp(e,t){return function(){this[e]=t}}function hp(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function pp(e){return e.trim().split(/^|\s+/)}function fp(e){return e.classList||new mp(e)}function mp(e){this._node=e,this._names=pp(e.getAttribute("class")||"")}function gp(e,t){for(var n=fp(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function vp(e,t){for(var n=fp(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function yp(e){return function(){gp(this,e)}}function bp(e){return function(){vp(this,e)}}function wp(e,t){return function(){(t.apply(this,arguments)?gp:vp)(this,e)}}function _p(){this.textContent=""}function xp(e){return function(){this.textContent=e}}function Sp(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Cp(){this.innerHTML=""}function kp(e){return function(){this.innerHTML=e}}function Ep(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Ap(){this.nextSibling&&this.parentNode.appendChild(this)}function Tp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ip(){return null}function Rp(){var e=this.parentNode;e&&e.removeChild(this)}function Lp(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Np(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Op(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Dp(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Mp(e,t,n){var r=op(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pp(e,t){return function(){return Mp(this,e,t)}}function jp(e,t){return function(){return Mp(this,e,t.apply(this,arguments))}}Gh.prototype={constructor:Gh,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},mp.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Up=[null];function Bp(e,t){this._groups=e,this._parents=t}function Fp(){return new Bp([[document.documentElement]],Up)}Bp.prototype=Fp.prototype={constructor:Bp,select:function(e){"function"!=typeof e&&(e=Ph(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=t[i],l=a.length,c=r[i]=new Array(l),u=0;u<l;++u)(o=a[u])&&(s=e.call(o,o.__data__,u,a))&&("__data__"in o&&(s.__data__=o.__data__),c[u]=s);return new Bp(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return jh(e.apply(this,arguments))}}(e):Bh(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s,a=t[o],l=a.length,c=0;c<l;++c)(s=a[c])&&(r.push(e.call(s,s.__data__,c,a)),i.push(s));return new Bp(r,i)},selectChild:function(e){return this.select(null==e?$h:function(e){return function(){return qh.call(this.children,e)}}("function"==typeof e?e:zh(e)))},selectChildren:function(e){return this.selectAll(null==e?Vh:function(e){return function(){return Hh.call(this.children,e)}}("function"==typeof e?e:zh(e)))},filter:function(e){"function"!=typeof e&&(e=Fh(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],a=s.length,l=r[i]=[],c=0;c<a;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&l.push(o);return new Bp(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Zh);var n,r=t?Kh:Jh,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var s=o.length,a=new Array(s),l=new Array(s),c=new Array(s),u=0;u<s;++u){var d=i[u],h=o[u],p=h.length,f=Qh(e.call(d,d&&d.__data__,u,i)),m=f.length,g=l[u]=new Array(m),v=a[u]=new Array(m);r(d,h,g,v,c[u]=new Array(p),f,t);for(var y,b,w=0,_=0;w<m;++w)if(y=g[w]){for(w>=_&&(_=w+1);!(b=v[_])&&++_<m;);y._next=b||null}}return(a=new Bp(a,i))._enter=l,a._exit=c,a},enter:function(){return new Bp(this._enter||this._groups.map(Wh),this._parents)},exit:function(){return new Bp(this._exit||this._groups.map(Wh),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c,u=n[l],d=r[l],h=u.length,p=a[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;l<i;++l)a[l]=n[l];return new Bp(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Xh);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,c=i[o]=new Array(l),u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new Bp(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],s=0,a=o.length;s<a;++s)(i=o[s])&&e.call(i,i.__data__,s,o);return this},attr:function(e,t){var n=Lh(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?ep:Yh:"function"==typeof t?n.local?ip:rp:n.local?np:tp)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?sp:"function"==typeof t?lp:ap)(e,t,null==n?"":n)):cp(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?up:"function"==typeof t?hp:dp)(e,t)):this.node()[e]},classed:function(e,t){var n=pp(e+"");if(arguments.length<2){for(var r=fp(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?wp:t?yp:bp)(n,t))},text:function(e){return arguments.length?this.each(null==e?_p:("function"==typeof e?Sp:xp)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Cp:("function"==typeof e?Ep:kp)(e)):this.node().innerHTML},raise:function(){return this.each(Ap)},lower:function(){return this.each(Tp)},append:function(e){var t="function"==typeof e?e:Dh(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Dh(e),r=null==t?Ip:"function"==typeof t?t:Ph(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Rp)},clone:function(e){return this.select(e?Np:Lp)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),s=o.length;if(!(arguments.length<2)){for(a=t?Dp:Op,r=0;r<s;++r)this.each(a(o[r],t,n));return this}var a=this.node().__on;if(a)for(var l,c=0,u=a.length;c<u;++c)for(r=0,l=a[c];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?jp:Pp)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const zp=Fp;function qp(e){return"string"==typeof e?new Bp([[document.querySelector(e)]],[document.documentElement]):new Bp([[e]],Up)}function $p(e){return qp(Dh(e).call(document.documentElement))}var Hp=0;function Vp(){return new Wp}function Wp(){this._="@"+(++Hp).toString(36)}function Gp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jp(e,t){if(e=Gp(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Kp(e,t){return e.target&&(e=Gp(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,e=>Jp(e,t))}function Zp(e){return"string"==typeof e?new Bp([document.querySelectorAll(e)],[document.documentElement]):new Bp([jh(e)],Up)}function Qp(e,t){var n,r=1;function i(){var i,o,s=n.length,a=0,l=0;for(i=0;i<s;++i)a+=(o=n[i]).x,l+=o.y;for(a=(a/s-e)*r,l=(l/s-t)*r,i=0;i<s;++i)(o=n[i]).x-=a,o.y-=l}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}function Xp(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,s,a,l,c,u,d,h,p=e._root,f={data:r},m=e._x0,g=e._y0,v=e._x1,y=e._y1;if(!p)return e._root=f,e;for(;p.length;)if((c=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+y)/2))?g=s:y=s,i=p,!(p=p[d=u<<1|c]))return i[d]=f,e;if(a=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===a&&n===l)return f.next=p,i?i[d]=f:e._root=f,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(c=t>=(o=(m+v)/2))?m=o:v=o,(u=n>=(s=(g+y)/2))?g=s:y=s}while((d=u<<1|c)==(h=(l>=s)<<1|a>=o));return i[h]=p,i[d]=f,e}function Yp(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function ef(e){return e[0]}function tf(e){return e[1]}function nf(e,t,n){var r=new rf(null==t?ef:t,null==n?tf:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function rf(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function of(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}Wp.prototype=Vp.prototype={constructor:Wp,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var sf=nf.prototype=rf.prototype;function af(e){return function(){return e}}function lf(e){return 1e-6*(e()-.5)}function cf(e){return e.x+e.vx}function uf(e){return e.y+e.vy}function df(e){var t,n,r,i=1,o=1;function s(){for(var e,s,l,c,u,d,h,p=t.length,f=0;f<o;++f)for(s=nf(t,cf,uf).visitAfter(a),e=0;e<p;++e)l=t[e],d=n[l.index],h=d*d,c=l.x+l.vx,u=l.y+l.vy,s.visit(m);function m(e,t,n,o,s){var a=e.data,p=e.r,f=d+p;if(!a)return t>c+f||o<c-f||n>u+f||s<u-f;if(a.index>l.index){var m=c-a.x-a.vx,g=u-a.y-a.vy,v=m*m+g*g;v<f*f&&(0===m&&(v+=(m=lf(r))*m),0===g&&(v+=(g=lf(r))*g),v=(f-(v=Math.sqrt(v)))/v*i,l.vx+=(m*=v)*(f=(p*=p)/(h+p)),l.vy+=(g*=v)*f,a.vx-=m*(f=1-f),a.vy-=g*f)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=af(null==e?1:+e)),s.initialize=function(e,n){t=e,r=n,l()},s.iterations=function(e){return arguments.length?(o=+e,s):o},s.strength=function(e){return arguments.length?(i=+e,s):i},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:af(+t),l(),s):e},s}function hf(e){return e.index}function pf(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function ff(e){var t,n,r,i,o,s,a=hf,l=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},c=af(30),u=1;function d(r){for(var i=0,a=e.length;i<u;++i)for(var l,c,d,h,p,f,m,g=0;g<a;++g)c=(l=e[g]).source,h=(d=l.target).x+d.vx-c.x-c.vx||lf(s),p=d.y+d.vy-c.y-c.vy||lf(s),h*=f=((f=Math.sqrt(h*h+p*p))-n[g])/f*r*t[g],p*=f,d.vx-=h*(m=o[g]),d.vy-=p*m,c.vx+=h*(m=1-m),c.vy+=p*m}function h(){if(r){var s,l,c=r.length,u=e.length,d=new Map(r.map((e,t)=>[a(e,t,r),e]));for(s=0,i=new Array(c);s<u;++s)(l=e[s]).index=s,"object"!=typeof l.source&&(l.source=pf(d,l.source)),"object"!=typeof l.target&&(l.target=pf(d,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(s=0,o=new Array(u);s<u;++s)l=e[s],o[s]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);t=new Array(u),p(),n=new Array(u),f()}}function p(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+l(e[n],n,e)}function f(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e,t){r=e,s=t,h()},d.links=function(t){return arguments.length?(e=t,h(),d):e},d.id=function(e){return arguments.length?(a=e,d):a},d.iterations=function(e){return arguments.length?(u=+e,d):u},d.strength=function(e){return arguments.length?(l="function"==typeof e?e:af(+e),p(),d):l},d.distance=function(e){return arguments.length?(c="function"==typeof e?e:af(+e),f(),d):c},d}sf.copy=function(){var e,t,n=new rf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=of(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=of(t));return n},sf.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Xp(this.cover(t,n),t,n,e)},sf.addAll=function(e){var t,n,r,i,o=e.length,s=new Array(o),a=new Array(o),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(s[n]=r,a[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>d&&(d=i));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<o;++n)Xp(this,s[n],a[n],e[n]);return this},sf.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s,a,l=i-n||1,c=this._root;n>e||e>=i||r>t||t>=o;)switch(a=(t<r)<<1|e<n,(s=new Array(4))[a]=c,c=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},sf.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},sf.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},sf.find=function(e,t,n){var r,i,o,s,a,l,c,u=this._x0,d=this._y0,h=this._x1,p=this._y1,f=[],m=this._root;for(m&&f.push(new Yp(m,u,d,h,p)),null==n?n=1/0:(u=e-n,d=t-n,h=e+n,p=t+n,n*=n);l=f.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(o=l.y0)>p||(s=l.x1)<u||(a=l.y1)<d))if(m.length){var g=(i+s)/2,v=(o+a)/2;f.push(new Yp(m[3],g,v,s,a),new Yp(m[2],i,v,g,a),new Yp(m[1],g,o,s,v),new Yp(m[0],i,o,g,v)),(c=(t>=v)<<1|e>=g)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-c],f[f.length-1-c]=l)}else{var y=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),w=y*y+b*b;if(w<n){var _=Math.sqrt(n=w);u=e-_,d=t-_,h=e+_,p=t+_,r=m.data}}return r},sf.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var t,n,r,i,o,s,a,l,c,u,d,h,p=this._root,f=this._x0,m=this._y0,g=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(a=(f+g)/2))?f=a:g=a,(u=s>=(l=(m+v)/2))?m=l:v=l,t=p,!(p=p[d=u<<1|c]))return this;if(!p.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,h=d)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=i,this)},sf.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},sf.root=function(){return this._root},sf.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},sf.visit=function(e){var t,n,r,i,o,s,a=[],l=this._root;for(l&&a.push(new Yp(l,this._x0,this._y0,this._x1,this._y1));t=a.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,s=t.y1)&&l.length){var c=(r+o)/2,u=(i+s)/2;(n=l[3])&&a.push(new Yp(n,c,u,o,s)),(n=l[2])&&a.push(new Yp(n,r,u,c,s)),(n=l[1])&&a.push(new Yp(n,c,i,o,u)),(n=l[0])&&a.push(new Yp(n,r,i,c,u))}return this},sf.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new Yp(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,s=t.x0,a=t.y0,l=t.x1,c=t.y1,u=(s+l)/2,d=(a+c)/2;(o=i[0])&&n.push(new Yp(o,s,a,u,d)),(o=i[1])&&n.push(new Yp(o,u,a,l,d)),(o=i[2])&&n.push(new Yp(o,s,d,u,c)),(o=i[3])&&n.push(new Yp(o,u,d,l,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},sf.x=function(e){return arguments.length?(this._x=e,this):this._x},sf.y=function(e){return arguments.length?(this._y=e,this):this._y};var mf={value:()=>{}};function gf(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new vf(r)}function vf(e){this._=e}function yf(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function bf(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=mf,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}vf.prototype=gf.prototype={constructor:vf,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=o[s]).type)i[n]=bf(i[n],e.name,t);else if(null==t)for(n in i)i[n]=bf(i[n],e.name,null);return this}for(;++s<a;)if((n=(e=o[s]).type)&&(n=yf(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vf(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const wf=gf;var _f,xf,Sf=0,Cf=0,kf=0,Ef=0,Af=0,Tf=0,If="object"==typeof performance&&performance.now?performance:Date,Rf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Lf(){return Af||(Rf(Nf),Af=If.now()+Tf)}function Nf(){Af=0}function Of(){this._call=this._time=this._next=null}function Df(e,t,n){var r=new Of;return r.restart(e,t,n),r}function Mf(){Af=(Ef=If.now())+Tf,Sf=Cf=0;try{!function(){Lf(),++Sf;for(var e,t=_f;t;)(e=Af-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Sf}()}finally{Sf=0,function(){var e,t,n=_f,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:_f=t);xf=e,jf(r)}(),Af=0}}function Pf(){var e=If.now(),t=e-Ef;t>1e3&&(Tf-=t,Ef=e)}function jf(e){Sf||(Cf&&(Cf=clearTimeout(Cf)),e-Af>24?(e<1/0&&(Cf=setTimeout(Mf,e-If.now()-Tf)),kf&&(kf=clearInterval(kf))):(kf||(Ef=If.now(),kf=setInterval(Pf,1e3)),Sf=1,Rf(Mf)))}Of.prototype=Df.prototype={constructor:Of,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Lf():+n)+(null==t?0:+t),this._next||xf===this||(xf?xf._next=this:_f=this,xf=this),this._call=e,this._time=n,jf()},stop:function(){this._call&&(this._call=null,this._time=1/0,jf())}};const Uf=1664525,Bf=1013904223,Ff=4294967296;function zf(e){return e.x}function qf(e){return e.y}var $f=10,Hf=Math.PI*(3-Math.sqrt(5));function Vf(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Df(d),c=wf("tick","end"),u=function(){let e=1;return()=>(e=(Uf*e+Bf)%Ff)/Ff}();function d(){h(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function h(r){var l,c,u=e.length;void 0===r&&(r=1);for(var d=0;d<r;++d)for(n+=(o-n)*i,a.forEach(function(e){e(n)}),l=0;l<u;++l)null==(c=e[l]).fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return t}function p(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=$f*Math.sqrt(.5+n),o=n*Hf;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function f(t){return t.initialize&&t.initialize(e,u),t}return null==e&&(e=[]),p(),t={tick:h,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,p(),a.forEach(f),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(s=1-e,t):1-s},randomSource:function(e){return arguments.length?(u=e,a.forEach(f),t):u},force:function(e,n){return arguments.length>1?(null==n?a.delete(e):a.set(e,f(n)),t):a.get(e)},find:function(t,n,r){var i,o,s,a,l,c=0,u=e.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(s=(i=t-(a=e[c]).x)*i+(o=n-a.y)*o)<r&&(l=a,r=s);return l},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function Wf(){var e,t,n,r,i,o=af(-30),s=1,a=1/0,l=.81;function c(n){var i,o=e.length,s=nf(e,zf,qf).visitAfter(d);for(r=n,i=0;i<o;++i)t=e[i],s.visit(h)}function u(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function d(e){var t,n,r,o,s,a=0,l=0;if(e.length){for(r=o=s=0;s<4;++s)(t=e[s])&&(n=Math.abs(t.value))&&(a+=t.value,l+=n,r+=n*t.x,o+=n*t.y);e.x=r/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=i[t.data.index]}while(t=t.next)}e.value=a}function h(e,o,c,u){if(!e.value)return!0;var d=e.x-t.x,h=e.y-t.y,p=u-o,f=d*d+h*h;if(p*p/l<f)return f<a&&(0===d&&(f+=(d=lf(n))*d),0===h&&(f+=(h=lf(n))*h),f<s&&(f=Math.sqrt(s*f)),t.vx+=d*e.value*r/f,t.vy+=h*e.value*r/f),!0;if(!(e.length||f>=a)){(e.data!==t||e.next)&&(0===d&&(f+=(d=lf(n))*d),0===h&&(f+=(h=lf(n))*h),f<s&&(f=Math.sqrt(s*f)));do{e.data!==t&&(p=i[e.data.index]*r/f,t.vx+=d*p,t.vy+=h*p)}while(e=e.next)}}return c.initialize=function(t,r){e=t,n=r,u()},c.strength=function(e){return arguments.length?(o="function"==typeof e?e:af(+e),u(),c):o},c.distanceMin=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c.distanceMax=function(e){return arguments.length?(a=e*e,c):Math.sqrt(a)},c.theta=function(e){return arguments.length?(l=e*e,c):Math.sqrt(l)},c}function Gf(e,t,n){var r,i,o,s=af(.1);function a(e){for(var s=0,a=r.length;s<a;++s){var l=r[s],c=l.x-t||1e-6,u=l.y-n||1e-6,d=Math.sqrt(c*c+u*u),h=(o[s]-d)*i[s]*e/d;l.vx+=c*h,l.vy+=u*h}}function l(){if(r){var t,n=r.length;for(i=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),i[t]=isNaN(o[t])?0:+s(r[t],t,r)}}return"function"!=typeof e&&(e=af(+e)),null==t&&(t=0),null==n&&(n=0),a.initialize=function(e){r=e,l()},a.strength=function(e){return arguments.length?(s="function"==typeof e?e:af(+e),l(),a):s},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:af(+t),l(),a):e},a.x=function(e){return arguments.length?(t=+e,a):t},a.y=function(e){return arguments.length?(n=+e,a):n},a}function Jf(e){var t,n,r,i=af(.1);function o(e){for(var i,o=0,s=t.length;o<s;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function s(){if(t){var o,s=t.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=af(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:af(+e),s(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:af(+t),s(),o):e},o}function Kf(e){var t,n,r,i=af(.1);function o(e){for(var i,o=0,s=t.length;o<s;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function s(){if(t){var o,s=t.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=af(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:af(+e),s(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:af(+t),s(),o):e},o}const Zf={containerSelector:".shower",progressSelector:".progress",stepSelector:".next",fullModeClass:"full",listModeClass:"list",mouseHiddenClass:"pointless",mouseInactivityTimeout:5e3,slideSelector:".slide",slideTitleSelector:"h2",activeSlideClass:"active",visitedSlideClass:"visited"},Qf=(e,t)=>{for(const[n,r]of Object.entries(t))Object.defineProperty(e,n,{value:r,writable:!1,enumerable:!0,configurable:!0})};class Xf extends Error{}class Yf extends EventTarget{constructor(e,t){super(),Qf(this,{shower:e,element:t,state:{visitCount:0,innerStepCount:0}}),this._isActive=!1,this._options=this.shower.options,this.element.addEventListener("click",e=>{e.defaultPrevented||(this.activate(),this.shower.enterFullMode())})}get isActive(){return this._isActive}get isVisited(){return this.state.visitCount>0}get id(){return this.element.id}get title(){const e=this.element.querySelector(this._options.slideTitleSelector);return e?e.innerText:""}activate(){if(this._isActive)return;const e=this.shower.activeSlide;e&&e._deactivate(),this.state.visitCount++,this.element.classList.add(this._options.activeSlideClass),this._isActive=!0,this.dispatchEvent(new Event("activate")),this.shower.dispatchEvent(new CustomEvent("slidechange",{detail:{prev:e}}))}deactivate(){if(this.shower.isFullMode)throw new Xf("In full mode, another slide should be activated instead.");this._isActive&&this._deactivate()}_deactivate(){this.element.classList.replace(this._options.activeSlideClass,this._options.visitedSlideClass),this._isActive=!1,this.dispatchEvent(new Event("deactivate"))}}const em=Yf,tm=e=>{const{container:t}=e,n=(()=>{const e=document.createElement("section");return e.className="region",e.setAttribute("role","region"),e.setAttribute("aria-live","assertive"),e.setAttribute("aria-relevant","all"),e.setAttribute("aria-label","Slide Content: Auto-updating"),e})();t.appendChild(n);const r=()=>{e.isFullMode?t.setAttribute("role","application"):t.removeAttribute("role")},i=()=>{const t=e.activeSlide;t&&(n.innerHTML=t.element.innerHTML)};e.addEventListener("start",()=>{r(),i()}),e.addEventListener("modechange",r),e.addEventListener("slidechange",i)},nm=e=>{e.container.addEventListener("keydown",t=>{t.defaultPrevented||-1===t.target.tabIndex&&((t=>{const n=!(t.ctrlKey||t.altKey||t.metaKey);switch(t.key.toUpperCase()){case"ENTER":if(t.metaKey&&e.isListMode){t.shiftKey&&(t.preventDefault(),e.first());break}t.preventDefault(),t.shiftKey?e.prev():e.next();break;case"BACKSPACE":case"PAGEUP":case"ARROWUP":case"ARROWLEFT":case"H":case"K":case"P":n&&(t.preventDefault(),e.prev(t.shiftKey));break;case"PAGEDOWN":case"ARROWDOWN":case"ARROWRIGHT":case"L":case"J":case"N":n&&(t.preventDefault(),e.next(t.shiftKey));break;case" ":n&&e.isFullMode&&(t.preventDefault(),t.shiftKey?e.prev():e.next());break;case"HOME":t.preventDefault(),e.first();break;case"END":t.preventDefault(),e.last()}})(t),(t=>{switch(t.key.toUpperCase()){case"ESCAPE":e.isFullMode&&(t.preventDefault(),e.exitFullMode());break;case"ENTER":t.metaKey&&e.isListMode&&(t.preventDefault(),e.enterFullMode());break;case"P":t.metaKey&&t.altKey&&e.isListMode&&(t.preventDefault(),e.enterFullMode());break;case"F5":t.shiftKey&&e.isListMode&&(t.preventDefault(),e.enterFullMode())}})(t))})},rm=e=>{const t=()=>{const t=e.isFullMode?"?full":"",n=e.activeSlide,r=n?`#${n.id}`:"";return location.pathname+t+r},n=()=>{new URLSearchParams(location.search).has("full")?e.enterFullMode():e.exitFullMode(),(()=>{const t=location.hash.slice(1);if(!t)return;const n=e.slides.find(e=>e.id===t);n?n.activate():e.activeSlide||e.first()})()};n(),window.addEventListener("popstate",n),e.addEventListener("start",()=>{history.replaceState(null,document.title,t())}),e.addEventListener("modechange",()=>{history.replaceState(null,document.title,t())}),e.addEventListener("slidechange",()=>{const e=t();location.href.endsWith(e)||history.pushState(null,document.title,e)})},im=["s","m","h"],om=e=>{if(!e)return 0;const t=(e=>im.some(t=>e.includes(t)))(e)?(e=>im.map(t=>e.match(`(\\S+)${t}`)).map(e=>e&&e[1]))(e):(e=>`::${e}`.split(":").reverse())(e);let[n,r,i]=t.map(Number);return n+=60*r,n+=3600*i,Math.max(1e3*n,0)},sm=e=>{const{mouseHiddenClass:t,mouseInactivityTimeout:n}=e.options;let r=null;const i=()=>{e.container.classList.remove(t),clearTimeout(r),r=null},o=()=>{null!==r&&i(),r=setTimeout(()=>{e.container.classList.add(t)},n)},s=()=>{e.isFullMode?e.container.addEventListener("mousemove",o):(e.container.removeEventListener("mousemove",o),i())};e.addEventListener("start",s),e.addEventListener("modechange",s)},am=e=>{tm(e),(e=>{const{progressSelector:t}=e.options,n=e.container.querySelector(t);if(!n)return;n.setAttribute("role","progressbar"),n.setAttribute("aria-valuemin",0),n.setAttribute("aria-valuemax",100);const r=()=>{const t=e.activeSlideIndex,{length:r}=e.slides,i=t/(r-1)*100;n.style.width=`${i}%`,n.setAttribute("aria-valuenow",i),n.setAttribute("aria-valuetext",`Slideshow progress: ${i}%`)};e.addEventListener("start",r),e.addEventListener("slidechange",r)})(e),nm(e),(e=>{const{stepSelector:t,activeSlideClass:n,visitedSlideClass:r}=e.options;let i,o;const s=e=>e.classList.contains(n),a=e=>e.classList.contains(r),l=()=>{if(e.isListMode)return;const n=e.activeSlide;i=[...n.element.querySelectorAll(t)],o=i.length&&i.every(a)?i.length:i.filter(s).length-1,n.state.innerStepCount=i.length};e.addEventListener("start",l),e.addEventListener("modechange",l),e.addEventListener("slidechange",l),e.addEventListener("next",t=>{e.isListMode||t.defaultPrevented||!t.cancelable||(o++,i.forEach((e,t)=>{e.classList.toggle(r,t<o),e.classList.toggle(n,t===o)}),o<i.length&&t.preventDefault())}),e.addEventListener("prev",t=>{e.isListMode||t.defaultPrevented||!t.cancelable||-1!==o&&o!==i.length&&(o--,i.forEach((e,t)=>{e.classList.toggle(r,t<o+1),e.classList.toggle(n,t===o)}),t.preventDefault())})})(e),(e=>{let t;const n=()=>{if(clearTimeout(t),e.isListMode)return;const n=e.activeSlide,{visitCount:r,innerStepCount:i}=n.state;if(r>1)return;const o=om(n.element.dataset.timing);o&&(t=i?setInterval(()=>e.next(),o/(i+1)):setTimeout(()=>e.next(),o))};e.addEventListener("start",n),e.addEventListener("modechange",n),e.addEventListener("slidechange",n),e.container.addEventListener("keydown",e=>{e.defaultPrevented||clearTimeout(t)})})(e),(e=>{const{title:t}=document,n=()=>{if(e.isFullMode){const n=e.activeSlide.title;if(n)return void(document.title=`${n} \u2014 ${t}`)}document.title=t};e.addEventListener("start",n),e.addEventListener("modechange",n),e.addEventListener("slidechange",n)})(e),rm(e),(e=>{const{container:t}=e,{fullModeClass:n,listModeClass:r}=e.options;t.classList.contains(n)?e.enterFullMode():t.classList.add(r);const i=()=>{const n=e.slides[0];if(!n)return;const{innerWidth:r,innerHeight:i}=window,{offsetWidth:o,offsetHeight:s}=n.element,a=1/(o/r),l=1/Math.max(o/r,s/i);t.style.setProperty("--shower-list-scale",a),t.style.setProperty("--shower-full-scale",l)},o=()=>{if(e.isFullMode?(t.classList.remove(r),t.classList.add(n)):(t.classList.remove(n),t.classList.add(r)),i(),e.isFullMode)return;const o=e.activeSlide;o&&o.element.scrollIntoView({block:"center"})};e.addEventListener("start",o),e.addEventListener("modechange",o),e.addEventListener("slidechange",()=>{e.isFullMode||e.activeSlide.element.scrollIntoView({block:"nearest"})}),window.addEventListener("resize",i)})(e),(e=>{let t=!1,n=!1;document.addEventListener("touchstart",r=>{if(1===r.touches.length){const t=r.touches[0],i=t.clientX,{target:o}=t;n=-1!==o.tabIndex,n||e.isFullMode&&(r.cancelable&&r.preventDefault(),window.innerWidth/2<i?e.next():e.prev())}else 3===r.touches.length&&(t=!0)}),e.container.addEventListener("touchend",r=>{t?(r.preventDefault(),t=!1,e.exitFullMode()):1===r.touches.length&&!n&&e.isFullMode&&r.preventDefault()})})(e),sm(e),e.isFullMode&&!e.activeSlide&&e.first()};class lm extends EventTarget{constructor(e){super(),Qf(this,{options:{...Zf,...e}}),this._mode="list",this._isStarted=!1,this._container=null}configure(e){if(this._isStarted)throw new Xf("Shower should be configured before it is started.");Object.assign(this.options,e)}start(){if(this._isStarted)return;const{containerSelector:e}=this.options;if(this._container=document.querySelector(e),!this._container)throw new Xf(`Shower container with selector '${e}' was not found.`);this._initSlides(),am(this),this._isStarted=!0,this.dispatchEvent(new Event("start"))}_initSlides(){const e=`${this.options.slideSelector}:not([hidden])`,t=this._container.querySelectorAll(e);this.slides=Array.from(t,(e,t)=>(e.id||(e.id=t+1),new em(this,e)))}_setMode(e){e!==this._mode&&(this._mode=e,this.dispatchEvent(new Event("modechange")))}dispatchEvent(e){return!!this._isStarted&&super.dispatchEvent(e)}get container(){return this._container}get isFullMode(){return"full"===this._mode}get isListMode(){return"list"===this._mode}get activeSlide(){return this.slides.find(e=>e.isActive)}get activeSlideIndex(){return this.slides.findIndex(e=>e.isActive)}enterFullMode(){this._setMode("full")}exitFullMode(){this._setMode("list")}goTo(e){const t=this.slides[e];t&&t.activate()}goBy(e){this.goTo(this.activeSlideIndex+e)}prev(e){const t=new Event("prev",{cancelable:!e});this.dispatchEvent(t)&&this.goBy(-1)}next(e){const t=new Event("next",{cancelable:!e});this.dispatchEvent(t)&&this.goBy(1)}first(){this.goTo(0)}last(){this.goTo(this.slides.length-1)}}const cm=lm;function um(){}function dm(e,t,n,r,i){for(var o,s=[];t;)s.push(t),o=t.previousComponent,delete t.previousComponent,t=o;s.reverse();for(var a=0,l=s.length,c=0,u=0;a<l;a++){var d=s[a];if(d.removed)d.value=e.join(r.slice(u,u+d.count)),u+=d.count;else{if(!d.added&&i){var h=n.slice(c,c+d.count);h=h.map(function(e,t){var n=r[u+t];return n.length>e.length?n:e}),d.value=e.join(h)}else d.value=e.join(n.slice(c,c+d.count));c+=d.count,d.added||(u+=d.count)}}return s}um.prototype={diff:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.callback;"function"==typeof r&&(i=r,r={});var o=this;function s(e){return e=o.postProcess(e,r),i?(setTimeout(function(){i(e)},0),!0):e}e=this.castInput(e,r),t=this.castInput(t,r),e=this.removeEmpty(this.tokenize(e,r));var a=(t=this.removeEmpty(this.tokenize(t,r))).length,l=e.length,c=1,u=a+l;null!=r.maxEditLength&&(u=Math.min(u,r.maxEditLength));var d=null!==(n=r.timeout)&&void 0!==n?n:1/0,h=Date.now()+d,p=[{oldPos:-1,lastComponent:void 0}],f=this.extractCommon(p[0],t,e,0,r);if(p[0].oldPos+1>=l&&f+1>=a)return s(dm(o,p[0].lastComponent,t,e,o.useLongestToken));var m=-1/0,g=1/0;function v(){for(var n=Math.max(m,-c);n<=Math.min(g,c);n+=2){var i=void 0,u=p[n-1],d=p[n+1];u&&(p[n-1]=void 0);var h=!1;if(d){var v=d.oldPos-n;h=d&&0<=v&&v<a}var y=u&&u.oldPos+1<l;if(h||y){if(i=!y||h&&u.oldPos<d.oldPos?o.addToPath(d,!0,!1,0,r):o.addToPath(u,!1,!0,1,r),f=o.extractCommon(i,t,e,n,r),i.oldPos+1>=l&&f+1>=a)return s(dm(o,i.lastComponent,t,e,o.useLongestToken));p[n]=i,i.oldPos+1>=l&&(g=Math.min(g,n-1)),f+1>=a&&(m=Math.max(m,n+1))}else p[n]=void 0}c++}if(i)!function e(){setTimeout(function(){if(c>u||Date.now()>h)return i();v()||e()},0)}();else for(;c<=u&&Date.now()<=h;){var y=v();if(y)return y}},addToPath:function(e,t,n,r,i){var o=e.lastComponent;return o&&!i.oneChangePerToken&&o.added===t&&o.removed===n?{oldPos:e.oldPos+r,lastComponent:{count:o.count+1,added:t,removed:n,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+r,lastComponent:{count:1,added:t,removed:n,previousComponent:o}}},extractCommon:function(e,t,n,r,i){for(var o=t.length,s=n.length,a=e.oldPos,l=a-r,c=0;l+1<o&&a+1<s&&this.equals(n[a+1],t[l+1],i);)l++,a++,c++,i.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return c&&!i.oneChangePerToken&&(e.lastComponent={count:c,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,l},equals:function(e,t,n){return n.comparator?n.comparator(e,t):e===t||n.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function(e){return e},tokenize:function(e){return Array.from(e)},join:function(e){return e.join("")},postProcess:function(e){return e}};var hm=new um;function pm(e,t,n){return hm.diff(e,t,n)}function fm(e,t){var n;for(n=0;n<e.length&&n<t.length;n++)if(e[n]!=t[n])return e.slice(0,n);return e.slice(0,n)}function mm(e,t){var n;if(!e||!t||e[e.length-1]!=t[t.length-1])return"";for(n=0;n<e.length&&n<t.length;n++)if(e[e.length-(n+1)]!=t[t.length-(n+1)])return e.slice(-n);return e.slice(-n)}function gm(e,t,n){if(e.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return n+e.slice(t.length)}function vm(e,t,n){if(!t)return e+n;if(e.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(e)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return e.slice(0,-t.length)+n}function ym(e,t){return gm(e,t,"")}function bm(e,t){return vm(e,t,"")}function wm(e,t){return t.slice(0,function(e,t){var n=0;e.length>t.length&&(n=e.length-t.length);var r=t.length;e.length<t.length&&(r=e.length);var i=Array(r),o=0;i[0]=0;for(var s=1;s<r;s++){for(t[s]==t[o]?i[s]=i[o]:i[s]=o;o>0&&t[s]!=t[o];)o=i[o];t[s]==t[o]&&o++}o=0;for(var a=n;a<e.length;a++){for(;o>0&&e[a]!=t[o];)o=i[o];e[a]==t[o]&&o++}return o}(e,t))}var _m="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",xm=new RegExp("[".concat(_m,"]+|\\s+|[^").concat(_m,"]"),"ug"),Sm=new um;function Cm(e,t,n,r){if(t&&n){var i=t.value.match(/^\s*/)[0],o=t.value.match(/\s*$/)[0],s=n.value.match(/^\s*/)[0],a=n.value.match(/\s*$/)[0];if(e){var l=fm(i,s);e.value=vm(e.value,s,l),t.value=ym(t.value,l),n.value=ym(n.value,l)}if(r){var c=mm(o,a);r.value=gm(r.value,a,c),t.value=bm(t.value,c),n.value=bm(n.value,c)}}else if(n)e&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(e&&r){var u=r.value.match(/^\s*/)[0],d=t.value.match(/^\s*/)[0],h=t.value.match(/\s*$/)[0],p=fm(u,d);t.value=ym(t.value,p);var f=mm(ym(u,p),h);t.value=bm(t.value,f),r.value=gm(r.value,u,f),e.value=vm(e.value,u,u.slice(0,u.length-f.length))}else if(r){var m=r.value.match(/^\s*/)[0],g=wm(t.value.match(/\s*$/)[0],m);t.value=bm(t.value,g)}else if(e){var v=wm(e.value.match(/\s*$/)[0],t.value.match(/^\s*/)[0]);t.value=ym(t.value,v)}}Sm.equals=function(e,t,n){return n.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e.trim()===t.trim()},Sm.tokenize=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.intlSegmenter){if("word"!=n.intlSegmenter.resolvedOptions().granularity)throw new Error('The segmenter passed must have a granularity of "word"');t=Array.from(n.intlSegmenter.segment(e),function(e){return e.segment})}else t=e.match(xm)||[];var r=[],i=null;return t.forEach(function(e){/\s/.test(e)?null==i?r.push(e):r.push(r.pop()+e):/\s/.test(i)?r[r.length-1]==i?r.push(r.pop()+e):r.push(i+e):r.push(e),i=e}),r},Sm.join=function(e){return e.map(function(e,t){return 0==t?e:e.replace(/^\s+/,"")}).join("")},Sm.postProcess=function(e,t){if(!e||t.oneChangePerToken)return e;var n=null,r=null,i=null;return e.forEach(function(e){e.added?r=e:e.removed?i=e:((r||i)&&Cm(n,i,r,e),n=e,r=null,i=null)}),(r||i)&&Cm(n,i,r,null),e};var km=new um;km.tokenize=function(e){var t=new RegExp("(\\r?\\n)|[".concat(_m,"]+|[^\\S\\n\\r]+|[^").concat(_m,"]"),"ug");return e.match(t)||[]};var Em=new um;Em.tokenize=function(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));var n=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var i=0;i<r.length;i++){var o=r[i];i%2&&!t.newlineIsToken?n[n.length-1]+=o:n.push(o)}return n},Em.equals=function(e,t,n){return n.ignoreWhitespace?(n.newlineIsToken&&e.includes("\n")||(e=e.trim()),n.newlineIsToken&&t.includes("\n")||(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),t.endsWith("\n")&&(t=t.slice(0,-1))),um.prototype.equals.call(this,e,t,n)};var Am=new um;Am.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};var Tm=new um;function Im(e){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(e)}Tm.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var Rm=new um;function Lm(e,t,n,r,i){var o,s;for(t=t||[],n=n||[],r&&(e=r(i,e)),o=0;o<t.length;o+=1)if(t[o]===e)return n[o];if("[object Array]"===Object.prototype.toString.call(e)){for(t.push(e),s=new Array(e.length),n.push(s),o=0;o<e.length;o+=1)s[o]=Lm(e[o],t,n,r,i);return t.pop(),n.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),"object"===Im(e)&&null!==e){t.push(e),s={},n.push(s);var a,l=[];for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&l.push(a);for(l.sort(),o=0;o<l.length;o+=1)s[a=l[o]]=Lm(e[a],t,n,r,a);t.pop(),n.pop()}else s=e;return s}Rm.useLongestToken=!0,Rm.tokenize=Em.tokenize,Rm.castInput=function(e,t){var n=t.undefinedReplacement,r=t.stringifyReplacer,i=void 0===r?function(e,t){return void 0===t?n:t}:r;return"string"==typeof e?e:JSON.stringify(Lm(e,null,null,i),i,"  ")},Rm.equals=function(e,t,n){return um.prototype.equals.call(Rm,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),n)};var Nm=new um;function Om(e){this.content=e}Nm.tokenize=function(e){return e.slice()},Nm.join=Nm.removeEmpty=function(e){return e},Om.prototype={constructor:Om,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return-1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new Om(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Om(n)},addToStart:function(e,t){return new Om([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Om(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new Om(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Om.from(e)).size?new Om(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Om.from(e)).size?new Om(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Om.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},Om.from=function(e){if(e instanceof Om)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Om(t)};const Dm=Om;function Mm(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let e=0;i.text[e]==o.text[e];e++)n++;return n}if(i.content.size||o.content.size){let e=Mm(i.content,o.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function Pm(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let e=Pm(s.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}class jm{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,r=0,i){for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"==typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new jm(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new jm(n,r)}cutByIndex(e,t){return e==t?jm.empty:0==e&&t==this.content.length?this:new jm(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new jm(r,i)}addToStart(e){return new jm([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new jm(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return Mm(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return Pm(this,e,t,n)}findIndex(e){if(0==e)return Bm(0,e);if(e==this.size)return Bm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let r=n+this.child(t).nodeSize;if(r>=e)return r==e?Bm(t+1,r):Bm(t,n);n=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return jm.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new jm(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return jm.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new jm(t||e,n)}static from(e){if(!e)return jm.empty;if(e instanceof jm)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new jm([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}jm.empty=new jm([],0);const Um={index:0,offset:0};function Bm(e,t){return Um.index=e,Um.offset=t,Um}function Fm(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!Fm(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!Fm(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class zm{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Fm(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return zm.none;if(e instanceof zm)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}zm.none=[];class qm extends Error{}class $m{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=Vm(this.content,e+this.openStart,t);return n&&new $m(n,this.openStart,this.openEnd)}removeBetween(e,t){return new $m(Hm(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return $m.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new $m(jm.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)r++;return new $m(e,n,r)}}function Hm(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(i==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(Hm(o.content,t-i-1,n-i-1)))}function Vm(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=Vm(s.content,t-o-1,n);return a&&e.replaceChild(i,s.copy(a))}function Wm(e,t,n){if(n.openStart>e.depth)throw new qm("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new qm("Inconsistent open depths");return Gm(e,t,n,0)}function Gm(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=Gm(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)r=t.node(e).copy(jm.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return Xm(o,Ym(e,i,s,t,r))}{let r=e.parent,i=r.content;return Xm(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return Xm(o,eg(e,t,r))}function Jm(e,t){if(!t.type.compatibleContent(e.type))throw new qm("Cannot join "+t.type.name+" onto "+e.type.name)}function Km(e,t,n){let r=e.node(n);return Jm(r,t.node(n)),r}function Zm(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Qm(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(Zm(e.nodeAfter,r),o++));for(let e=o;e<s;e++)Zm(i.child(e),r);t&&t.depth==n&&t.textOffset&&Zm(t.nodeBefore,r)}function Xm(e,t){return e.type.checkContent(t),e.copy(t)}function Ym(e,t,n,r,i){let o=e.depth>i&&Km(e,t,i+1),s=r.depth>i&&Km(n,r,i+1),a=[];return Qm(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(Jm(o,s),Zm(Xm(o,Ym(e,t,n,r,i+1)),a)):(o&&Zm(Xm(o,eg(e,t,i+1)),a),Qm(t,n,i,a),s&&Zm(Xm(s,eg(n,r,i+1)),a)),Qm(r,null,i,a),new jm(a)}function eg(e,t,n){let r=[];if(Qm(null,e,n,r),e.depth>n){Zm(Xm(Km(e,t,n+1),eg(e,t,n+1)),r)}return Qm(t,null,n,r),new jm(r)}$m.empty=new $m(jm.empty,0,0);class tg{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)r+=n.child(t).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return zm.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new og(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let t=e;;){let{index:e,offset:o}=t.content.findIndex(i),s=i-o;if(n.push(t,e,r+o),!s)break;if(t=t.child(e),t.isText)break;i=s-1,r+=o+1}return new tg(t,n,i)}static resolveCached(e,t){let n=ig.get(e);if(n)for(let e=0;e<n.elts.length;e++){let r=n.elts[e];if(r.pos==t)return r}else ig.set(e,n=new ng);let r=n.elts[n.i]=tg.resolve(e,t);return n.i=(n.i+1)%rg,r}}class ng{constructor(){this.elts=[],this.i=0}}const rg=12,ig=new WeakMap;class og{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const sg=Object.create(null);class ag{constructor(e,t,n,r=zm.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||jm.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&Fm(this.attrs,t||e.defaultAttrs||sg)&&zm.sameSet(this.marks,n||zm.none)}copy(e=null){return e==this.content?this:new ag(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ag(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return $m.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new $m(a,r.depth-o,i.depth-o)}replace(e,t,n){return Wm(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return tg.resolveCached(this,e)}resolveNoCache(e){return tg.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),cg(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=jm.empty,r=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=r;e<i;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=zm.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!zm.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=jm.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}}ag.prototype.text=void 0;class lg extends ag{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cg(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new lg(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new lg(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function cg(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class ug{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new dg(e,t);if(null==n.next)return ug.empty;let r=hg(n);n.next&&n.err("Unexpected trailing text");let i=function(e){let t=Object.create(null);return n(yg(e,0));function n(r){let i=[];r.forEach(t=>{e[t].forEach(({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<i.length;e++)i[e][0]==t&&(r=i[e][1]);yg(e,n).forEach(e=>{r||i.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)})})});let o=t[r.join(",")]=new ug(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(vg);o.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return o}}(function(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach(e=>e.to=t)}function o(e,t){if("choice"==e.type)return e.exprs.reduce((e,n)=>e.concat(o(n,t)),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),i(o(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return i(o(e.expr,t),s),i(o(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();i(o(e.expr,s),t),s=t}if(-1==e.max)i(o(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),i(o(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(e.exprs[r],t);if(r==e.exprs.length-1)return s;i(s,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];return function i(o,s){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return jm.from(s.map(e=>e.createAndFill()));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)r+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return r}).join("\n")}}ug.empty=new ug(!0);class dg{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function hg(e){let t=[];do{t.push(pg(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function pg(e){let t=[];do{t.push(fg(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function fg(e){let t=function(e){if(e.eat("(")){let t=hg(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let e in n){let r=n[e];r.isInGroup(t)&&i.push(r)}0==i.length&&e.err("No node type or group '"+t+"' found");return i}(e,e.next).map(t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=gg(e,t)}return t}function mg(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function gg(e,t){let n=mg(e),r=n;return e.eat(",")&&(r="}"!=e.next?mg(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function vg(e,t){return t-e}function yg(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(vg)}function bg(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function wg(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}function _g(e,t,n,r){for(let r in t)if(!(r in e))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let n in e){let r=e[n];r.validate&&r.validate(t[n])}}function xg(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Cg(e,r,t[r]);return n}class Sg{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=xg(e,n.attrs),this.defaultAttrs=bg(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ug.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:wg(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ag(this,this.computeAttrs(e),jm.from(t),zm.setFrom(n))}createChecked(e=null,t,n){return t=jm.from(t),this.checkContent(t),new ag(this,this.computeAttrs(e),t,zm.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=jm.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(jm.empty,!0);return i?new ag(this,e,t.append(i),zm.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){_g(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:zm.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,r)=>n[e]=new Sg(e,t,r));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Cg{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class kg{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=xg(e,r.attrs),this.excluded=null;let i=bg(this.attrs);this.instance=i?new zm(this,i):null}create(e=null){return!e&&this.instance?this.instance:new zm(this,wg(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach((e,i)=>n[e]=new kg(e,r++,t,i)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){_g(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}function Eg(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class Ag{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new Og(this,t,!1);return n.addAll(e,zm.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Og(this,t,!0);return n.addAll(e,zm.none,t.from,t.to),$m.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Dg(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(e)||r.context&&!n.matchesContext(r.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let t in e.marks){let r=e.marks[t].spec.parseDOM;r&&r.forEach(e=>{n(e=Mg(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let r=e.nodes[t].spec.parseDOM;r&&r.forEach(e=>{n(e=Mg(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ag(e,Ag.schemaRules(e)))}}const Tg={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ig={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Rg={ol:!0,ul:!0};function Lg(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Ng{constructor(e,t,n,r,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=zm.none,this.match=i||(4&o?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(jm.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=jm.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(jm.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Tg.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Og{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let r,i=t.topNode,o=Lg(null,t.preserveWhitespace,0)|(n?4:0);r=i?new Ng(i.type,i.attrs,zm.none,!0,t.topMatch||i.type.contentMatch,o):new Ng(n?null:e.schema.topNodeType,null,zm.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top,i=2&r.options?"full":this.localPreserveWS||(1&r.options)>0;if("full"===i||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)n="full"!==i?n.replace(/\r?\n|\r/g," "):n.replace(/\r\n?/g,"\n");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r=this.localPreserveWS,i=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o,s=e.nodeName.toLowerCase();Rg.hasOwnProperty(s)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&Rg.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,n));e:if(a?a.ignore:Ig.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,r=this.needsBlock;if(Tg.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),n=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let o=a&&a.skip?t:this.readStyles(e,t);o&&this.addAll(e,o),n&&this.sync(i),this.needsBlock=r}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?o:void 0)}this.localPreserveWS=r}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let r=this.parser.matchedStyles[e],i=n.getPropertyValue(r);if(i)for(let e;;){let n=this.parser.matchStyle(r,i,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1!==n.consuming)break;e=n}}return t}addElementByRule(e,t,n,r){let i,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(o,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n),this.findAround(e,r,!1)}i&&this.sync(s)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t,n){let r,i;for(let t=this.open,o=0;t>=0;t--){let s=this.nodes[t],a=s.findWrapping(e);if(a&&(!r||r.length>a.length+o)&&(r=a,i=s,!a.length))break;if(s.solid){if(n)break;o+=2}}if(!r)return null;this.sync(i);for(let e=0;e<r.length;e++)t=this.enterInner(r[e],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let r=this.findPlace(e,t,n);if(r){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=zm.none;for(let i of r.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):Pg(i.type,e.type))&&(n=i.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n,!1);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n,r=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=Lg(e,i,o.options);4&o.options&&0==o.content.length&&(s|=4);let a=zm.none;return n=n.filter(t=>!(o.type?o.type.allowsMarkType(t.type):Pg(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new Ng(e,t,a,r,null,s)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!(!this.isOpen&&!this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function Dg(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Mg(e){let t={};for(let n in e)t[n]=e[n];return t}function Pg(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}class jg{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Bg(t).createDocumentFragment());let r=n,i=[];return e.forEach(e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=qg(Bg(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&qg(Bg(n),r(e,t),null,e.attrs)}static renderSpec(e,t,n=null,r){return qg(e,t,n,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new jg(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Ug(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return Ug(e.marks)}}function Ug(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function Bg(e){return e.document||window.document}const Fg=new WeakMap;function zg(e){let t=Fg.get(e);return void 0===t&&Fg.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function qg(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,o=t[0];if("string"!=typeof o)throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=zg(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=o.indexOf(" ");a>0&&(n=o.slice(0,a),o=o.slice(a+1));let l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):"style"==e&&l.style?l.style.cssText=c[e]:l.setAttribute(e,c[e])}}for(let i=u;i<t.length;i++){let o=t[i];if(0===o){if(i<t.length-1||i>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:i}=qg(e,o,n,r);if(l.appendChild(t),i){if(s)throw new RangeError("Multiple content holes");s=i}}}return{dom:l,contentDOM:s}}const $g=Math.pow(2,16);function Hg(e,t){return e+t*$g}function Vg(e){return 65535&e}class Wg{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class Gg{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&Gg.empty)return Gg.empty}recover(e){let t=0,n=Vg(e);if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/$g}(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+i],c=this.ranges[s+o],u=a+l;if(e<=u){let i=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return i;let o=e==(t<0?a:u)?null:Hg(s/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new Wg(i,d,o)}r+=c-l}return n?e+r:new Wg(e+r,0,null)}touches(e,t){let n=0,r=Vg(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let s=this.ranges[t]-(this.inverted?n:0);if(s>e)break;let a=this.ranges[t+i];if(e<=s+a&&t==3*r)return!0;n+=this.ranges[t+o]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),i+=c-l}}invert(){return new Gg(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?Gg.empty:new Gg(e<0?[0,-e,0]:[0,0,e])}}Gg.empty=new Gg([]);class Jg{constructor(e,t,n=0,r=(e?e.length:0)){this.mirror=t,this.from=n,this.to=r,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Jg(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let r=e.getMirror(t);this.appendMap(e._maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new Jg;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this._maps[n].mapResult(e,t);if(null!=i.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new Wg(e,r,null)}}const Kg=Object.create(null);class Zg{getMap(){return Gg.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Kg[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Kg)throw new RangeError("Duplicate use of step JSON ID "+e);return Kg[e]=t,t.prototype.jsonID=e,t}}class Qg{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Qg(e,null)}static fail(e){return new Qg(null,e)}static fromReplace(e,t,n,r){try{return Qg.ok(e.replace(t,n,r))}catch(e){if(e instanceof qm)return Qg.fail(e.message);throw e}}}function Xg(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(Xg(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return jm.fromArray(r)}class Yg extends Zg{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new $m(Xg(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,r),t.openStart,t.openEnd);return Qg.fromReplace(e,this.from,this.to,i)}invert(){return new ev(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Yg(t.pos,n.pos,this.mark)}merge(e){return e instanceof Yg&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yg(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Yg(t.from,t.to,e.markFromJSON(t.mark))}}Zg.jsonID("addMark",Yg);class ev extends Zg{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new $m(Xg(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return Qg.fromReplace(e,this.from,this.to,n)}invert(){return new Yg(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new ev(t.pos,n.pos,this.mark)}merge(e){return e instanceof ev&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ev(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ev(t.from,t.to,e.markFromJSON(t.mark))}}Zg.jsonID("removeMark",ev);class tv extends Zg{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qg.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Qg.fromReplace(e,this.pos,this.pos+1,new $m(jm.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new tv(this.pos,t.marks[n]);return new tv(this.pos,this.mark)}}return new nv(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new tv(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new tv(t.pos,e.markFromJSON(t.mark))}}Zg.jsonID("addNodeMark",tv);class nv extends Zg{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qg.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Qg.fromReplace(e,this.pos,this.pos+1,new $m(jm.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new tv(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new nv(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new nv(t.pos,e.markFromJSON(t.mark))}}Zg.jsonID("removeNodeMark",nv);class rv extends Zg{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&ov(e,this.from,this.to)?Qg.fail("Structure replace would overwrite content"):Qg.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Gg([this.from,this.to-this.from,this.slice.size])}invert(e){return new rv(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new rv(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof rv)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?$m.empty:new $m(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new rv(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?$m.empty:new $m(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new rv(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new rv(t.from,t.to,$m.fromJSON(e,t.slice),!!t.structure)}}Zg.jsonID("replace",rv);class iv extends Zg{constructor(e,t,n,r,i,o,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(ov(e,this.from,this.gapFrom)||ov(e,this.gapTo,this.to)))return Qg.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Qg.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Qg.fromReplace(e,this.from,this.to,n):Qg.fail("Content does not fit in gap")}getMap(){return new Gg([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new iv(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new iv(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new iv(t.from,t.to,t.gapFrom,t.gapTo,$m.fromJSON(e,t.slice),t.insert,!!t.structure)}}function ov(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function sv(e,t,n,r=n.contentMatch,i=!0){let o=e.doc.nodeAt(t),s=[],a=t+1;for(let t=0;t<o.childCount;t++){let l=o.child(t),c=a+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new ev(a,c,l.marks[t]));if(i&&l.isText&&"pre"!=n.whitespace){let e,t,r=/\r?\n|\r/g;for(;e=r.exec(l.text);)t||(t=new $m(jm.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new rv(a+e.index,a+e.index+e[0].length,t))}}else s.push(new rv(a,c,$m.empty));a=c}if(!r.validEnd){let t=r.fillBefore(jm.empty,!0);e.replace(a,a,new $m(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function av(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function lv(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!av(r,i,o))break}return null}function cv(e,t,n=null,r=e){let i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let e=r;a&&e<i;e++)a=a.matchType(n.child(e).type);return a&&a.validEnd?s:null}(r,t);return o?i.map(uv).concat({type:t,attrs:n}).concat(o.map(uv)):null}function uv(e){return{type:e,attrs:null}}function dv(e,t,n,r){t.forEach((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let i=e.mapping.slice(r).map(n+1+o+s.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}})}function hv(e,t,n,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}})}function pv(e,t,n=1,r){let i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let e=i.depth-1,t=n-2;e>o;e--,t--){let n=i.node(e),o=i.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(o,n.childCount),a=r&&r[t+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=r&&r[t]||n;if(!n.canReplace(o+1,n.childCount)||!l.type.validContent(s))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function fv(e,t){let n=e.resolve(t),r=n.index();return mv(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function mv(e,t){return!(!e||!t||e.isLeaf||!function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),s=o.type==r?e.type.schema.nodes.text:o.type;if(n=n.matchType(s),!n)return!1;if(!e.type.allowsMarks(o.marks))return!1}return n.validEnd}(e,t))}function gv(e,t,n=t,r=$m.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return vv(i,o,r)?new rv(t,n,r):new yv(i,o,r).fit()}function vv(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Zg.jsonID("replaceAround",iv);class yv{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=jm.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=jm.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,s=r.depth;for(;o&&s&&1==i.childCount;)i=i.firstChild.content,o--,s--;let a=new $m(i,o,s);return e>-1?new iv(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new rv(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=_v(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let e=this.depth;e>=0;e--){let o,{type:s,match:a}=this.frontier[e],l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(jm.from(i),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:e,parent:r,inject:l};if(2==t&&i&&(o=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:e,parent:r,wrap:o};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=_v(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new $m(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=_v(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new $m(bv(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new $m(bv(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let e=0;e<i.length;e++)this.openFrontierNode(i[e]);let o=this.unplaced,s=n?n.content:o.content,a=o.openStart-e,l=0,c=[],{match:u,type:d}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)c.push(r.child(e));u=u.matchFragment(r)}let h=s.size+e-(o.content.size-o.openEnd);for(;l<s.childCount;){let e=s.child(l),t=u.matchType(e.type);if(!t)break;l++,(l>1||0==a||e.content.size)&&(u=t,c.push(xv(e.mark(d.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?h:-1)))}let p=l==s.childCount;p||(h=-1),this.placed=wv(this.placed,t,jm.from(c)),this.frontier[t].match=u,p&&h<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<h;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=p?0==e?$m.empty:new $m(bv(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new $m(bv(o.content,e,l),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Sv(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Sv(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=Sv(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=wv(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=wv(this.placed,this.depth,jm.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(jm.empty,!0);e.childCount&&(this.placed=wv(this.placed,this.frontier.length,e))}}function bv(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(bv(e.firstChild.content,t-1,n)))}function wv(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(wv(e.lastChild.content,t-1,n)))}function _v(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function xv(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,xv(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(jm.empty,!0)))),e.copy(r)}function Sv(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function Cv(e){return e.spec.defining||e.spec.definingForContent}function kv(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(kv(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(jm.empty,!0))}return e}function Ev(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(i==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==i-1)&&n.push(r)}return n}class Av extends Zg{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Qg.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return Qg.fromReplace(e,this.pos,this.pos+1,new $m(jm.from(r),0,t.isLeaf?0:1))}getMap(){return Gg.empty}invert(e){return new Av(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Av(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Av(t.pos,t.attr,t.value)}}Zg.jsonID("attr",Av);class Tv extends Zg{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Qg.ok(n)}getMap(){return Gg.empty}invert(e){return new Tv(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tv(t.attr,t.value)}}Zg.jsonID("docAttr",Tv);let Iv=class extends Error{};Iv=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(Iv.prototype=Object.create(Error.prototype)).constructor=Iv,Iv.prototype.name="TransformError";class Rv{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Jg}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Iv(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=$m.empty){let r=gv(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new $m(jm.from(n),0,0))}delete(e,t){return this.replace(e,t,$m.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if(vv(i,o,r))return e.step(new rv(t,n,r));let s=Ev(i,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let e=i.depth,t=i.pos-1;e>0;e--,t--){let n=i.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(e)>-1?a=e:i.before(e)==t&&s.splice(1,0,-e)}let l=s.indexOf(a),c=[],u=r.openStart;for(let e=r.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==r.openStart)break;e=n.content}for(let e=u-1;e>=0;e--){let t=c[e],n=Cv(t.type);if(n&&!t.sameMarkup(i.node(Math.abs(a)-1)))u=e;else if(n||!t.type.isTextblock)break}for(let t=r.openStart;t>=0;t--){let a=(t+u+1)%(r.openStart+1),d=c[a];if(d)for(let t=0;t<s.length;t++){let c=s[(t+l)%s.length],u=!0;c<0&&(u=!1,c=-c);let h=i.node(c-1),p=i.index(c-1);if(h.canReplaceWith(p,p,d.type,d.marks))return e.replace(i.before(c),u?o.after(c):n,new $m(kv(r.content,0,r.openStart,a),a,r.openEnd))}}let d=e.steps.length;for(let a=s.length-1;a>=0&&(e.replace(t,n,r),!(e.steps.length>d));a--){let e=s[a];e<0||(t=i.before(e),n=o.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let e=r.depth-1;e>=0;e--){let t=r.index(e);if(r.node(e).canReplaceWith(t,t,n))return r.before(e+1);if(t>0)return null}if(r.parentOffset==r.parent.content.size)for(let e=r.depth-1;e>=0;e--){let t=r.indexAfter(e);if(r.node(e).canReplaceWith(t,t,n))return r.after(e+1);if(t<r.node(e).childCount)return null}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new $m(jm.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=Ev(r,i);for(let t=0;t<o.length;t++){let n=o[t],s=t==o.length-1;if(s&&0==n||r.node(n).type.contentMatch.validEnd)return e.delete(r.start(n),i.end(n));if(n>0&&(s||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return e.delete(r.before(n),i.after(n))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=jm.empty,d=0;for(let e=o,t=!1;e>n;e--)t||r.index(e)>0?(t=!0,u=jm.from(r.node(e).copy(u)),d++):l--;let h=jm.empty,p=0;for(let e=o,t=!1;e>n;e--)t||i.after(e+1)<i.end(e)?(t=!0,h=jm.from(i.node(e).copy(h)),p++):c++;e.step(new iv(l,c,s,a,new $m(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,o=e.doc.resolve(t-n),s=o.node().type;if(i&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(i);e&&!t?r=!1:!e&&t&&(r=!0)}let a=e.steps.length;if(!1===r){let r=e.doc.resolve(t+n);hv(e,r.node(),r.before(),a)}s.inlineContent&&sv(e,t+n-1,s,o.node().contentMatchAt(o.index()),null==r);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new rv(c,l.map(t+n,-1),$m.empty,!0)),!0===r){let t=e.doc.resolve(c);dv(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let r=jm.empty;for(let e=n.length-1;e>=0;e--){if(r.size){let t=n[e].type.contentMatch.matchFragment(r);if(!t||!t.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=jm.from(n[e].type.create(n[e].attrs,r))}let i=t.start,o=t.end;e.step(new iv(i,o,i,o,new $m(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,r=null){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{let s="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,s)&&function(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(e.doc,e.mapping.slice(o).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&hv(e,t,n,o),sv(e,e.mapping.slice(o).map(n,1),r,void 0,null===i);let a=e.mapping.slice(o),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new iv(l,c,l+1,c-1,new $m(jm.from(r.create(s,null,t.marks)),0,0),1,!0)),!0===i&&dv(e,t,n,o),!1}})}(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return function(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new iv(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new $m(jm.from(s),0,0),1,!0))}(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new Av(e,t,n)),this}setDocAttribute(e,t){return this.step(new Tv(e,t)),this}addNodeMark(e,t){return this.step(new tv(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof zm)t.isInSet(n.marks)&&this.step(new nv(e,t));else{let r,i=n.marks,o=[];for(;r=t.isInSet(i);)o.push(new nv(e,r)),i=r.removeFromSet(i);for(let e=o.length-1;e>=0;e--)this.step(o[e])}return this}split(e,t=1,n){return function(e,t,n=1,r){let i=e.doc.resolve(t),o=jm.empty,s=jm.empty;for(let e=i.depth,t=i.depth-n,a=n-1;e>t;e--,a--){o=jm.from(i.node(e).copy(o));let t=r&&r[a];s=jm.from(t?t.type.create(t.attrs,s):i.node(e).copy(s))}e.step(new rv(t,t,new $m(o.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){return function(e,t,n,r){let i,o,s=[],a=[];e.doc.nodesBetween(t,n,(e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:s.push(i=new ev(c,d,u[e])));o&&o.to==c?o.to=d:a.push(o=new Yg(c,d,r))}}),s.forEach(t=>e.step(t)),a.forEach(t=>e.step(t))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,(e,s)=>{if(!e.isInline)return;o++;let a=null;if(r instanceof kg){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&l.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=o):i.push({style:l,from:Math.max(s,t),to:r,step:o})}}}),i.forEach(t=>e.step(new ev(t.from,t.to,t.style)))}(this,e,t,n),this}clearIncompatible(e,t,n){return sv(this,e,t,n),this}}const Lv=Object.create(null);class Nv{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Ov(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=$m.empty){let n=t.content.lastChild,r=null;for(let e=0;e<t.openEnd;e++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),s?$m.empty:t),0==s&&$v(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),$v(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new Pv(e):qv(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let r=e.depth-1;r>=0;r--){let i=t<0?qv(e.node(0),e.node(r),e.before(r+1),e.index(r),t,n):qv(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,n);if(i)return i}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Fv(e.node(0))}static atStart(e){return qv(e,e,0,0,1)||new Fv(e)}static atEnd(e){return qv(e,e,e.content.size,e.childCount,-1)||new Fv(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Lv[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Lv)throw new RangeError("Duplicate use of selection JSON ID "+e);return Lv[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Pv.between(this.$anchor,this.$head).getBookmark()}}Nv.prototype.visible=!0;class Ov{constructor(e,t){this.$from=e,this.$to=t}}let Dv=!1;function Mv(e){Dv||e.parent.inlineContent||(Dv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Pv extends Nv{constructor(e,t=e){Mv(e),Mv(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Nv.near(n);let r=e.resolve(t.map(this.anchor));return new Pv(r.parent.inlineContent?r:n,n)}replace(e,t=$m.empty){if(super.replace(e,t),t==$m.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof Pv&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new jv(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new Pv(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=Nv.findFrom(t,n,!0)||Nv.findFrom(t,-n,!0);if(!e)return Nv.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(Nv.findFrom(e,-n,!0)||Nv.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new Pv(e,t)}}Nv.jsonID("text",Pv);class jv{constructor(e,t){this.anchor=e,this.head=t}map(e){return new jv(e.map(this.anchor),e.map(this.head))}resolve(e){return Pv.between(e.resolve(this.anchor),e.resolve(this.head))}}class Uv extends Nv{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?Nv.near(i):new Uv(i)}content(){return new $m(jm.from(this.node),0,0)}eq(e){return e instanceof Uv&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Bv(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Uv(e.resolve(t.anchor))}static create(e,t){return new Uv(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}Uv.prototype.visible=!1,Nv.jsonID("node",Uv);class Bv{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new jv(n,n):new Bv(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Uv.isSelectable(n)?new Uv(t):Nv.near(t)}}class Fv extends Nv{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=$m.empty){if(t==$m.empty){e.delete(0,e.doc.content.size);let t=Nv.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Fv(e)}map(e){return new Fv(e)}eq(e){return e instanceof Fv}getBookmark(){return zv}}Nv.jsonID("all",Fv);const zv={map(){return this},resolve:e=>new Fv(e)};function qv(e,t,n,r,i,o=!1){if(t.inlineContent)return Pv.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&Uv.isSelectable(r))return Uv.create(e,n-(i<0?r.nodeSize:0))}else{let t=qv(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function $v(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,o=e.steps[r];(o instanceof rv||o instanceof iv)&&(e.mapping.maps[r].forEach((e,t,n,r)=>{null==i&&(i=r)}),e.setSelection(Nv.near(e.doc.resolve(i),n)))}class Hv extends Rv{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return zm.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||zm.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(Nv.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function Vv(e,t){return t&&e?e.bind(t):e}class Wv{constructor(e,t,n){this.name=e,this.init=Vv(t.init,n),this.apply=Vv(t.apply,n)}}const Gv=[new Wv("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new Wv("selection",{init:(e,t)=>e.selection||Nv.atStart(t.doc),apply:e=>e.selection}),new Wv("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new Wv("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class Jv{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Gv.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Wv(e.key,e.spec.state,e))})}}class Kv{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Kv(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new Hv(this)}static create(e){let t=new Jv(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Kv(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new Jv(this.schema,e.plugins),n=t.fields,r=new Kv(t);for(let t=0;t<n.length;t++){let i=n[t].name;r[i]=this.hasOwnProperty(i)?this[i]:n[t].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Jv(e.schema,e.plugins),i=new Kv(r);return r.fields.forEach(r=>{if("doc"==r.name)i.doc=ag.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=Nv.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[r.name]=a.fromJSON.call(s,e,t[o],i))}i[r.name]=r.init(e,i)}}),i}}function Zv(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=Zv(i,t,{})),n[r]=i}return n}class Qv{constructor(e){this.spec=e,this.props={},e.props&&Zv(e.props,this,this.props),this.key=e.key?e.key.key:Yv("plugin")}getState(e){return e[this.key]}}const Xv=Object.create(null);function Yv(e){return e in Xv?e+"$"+ ++Xv[e]:(Xv[e]=0,e+"$")}class ey{constructor(e="key"){this.key=Yv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ty=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},ny=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let ry=null;const iy=function(e,t,n){let r=ry||(ry=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},oy=function(e,t,n,r){return n&&(ay(e,t,n,r,-1)||ay(e,t,n,r,1))},sy=/^(img|br|input|textarea|hr)$/i;function ay(e,t,n,r,i){for(var o;;){if(e==n&&t==r)return!0;if(t==(i<0?0:ly(e))){let n=e.parentNode;if(!n||1!=n.nodeType||cy(e)||sy.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ty(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;{let n=e.childNodes[t+(i<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(!(null===(o=n.pmViewDesc)||void 0===o?void 0:o.ignoreForSelection))return!1;t+=i}else e=n,t=i<0?ly(e):0}}}}function ly(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function cy(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const uy=function(e){return e.focusNode&&oy(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function dy(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const hy="undefined"!=typeof navigator?navigator:null,py="undefined"!=typeof document?document:null,fy=hy&&hy.userAgent||"",my=/Edge\/(\d+)/.exec(fy),gy=/MSIE \d/.exec(fy),vy=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fy),yy=!!(gy||vy||my),by=gy?document.documentMode:vy?+vy[1]:my?+my[1]:0,wy=!yy&&/gecko\/(\d+)/i.test(fy);wy&&(/Firefox\/(\d+)/.exec(fy)||[0,0])[1];const _y=!yy&&/Chrome\/(\d+)/.exec(fy),xy=!!_y,Sy=_y?+_y[1]:0,Cy=!yy&&!!hy&&/Apple Computer/.test(hy.vendor),ky=Cy&&(/Mobile\/\w+/.test(fy)||!!hy&&hy.maxTouchPoints>2),Ey=ky||!!hy&&/Mac/.test(hy.platform),Ay=!!hy&&/Win/.test(hy.platform),Ty=/Android \d/.test(fy),Iy=!!py&&"webkitFontSmoothing"in py.documentElement.style,Ry=Iy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Ly(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ny(e,t){return"number"==typeof e?e:e[t]}function Oy(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Dy(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(1!=s.nodeType){s=ny(s);continue}let e=s,n=e==o.body,a=n?Ly(o):Oy(e),l=0,c=0;if(t.top<a.top+Ny(r,"top")?c=-(a.top-t.top+Ny(i,"top")):t.bottom>a.bottom-Ny(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+Ny(i,"top")-a.top:t.bottom-a.bottom+Ny(i,"bottom")),t.left<a.left+Ny(r,"left")?l=-(a.left-t.left+Ny(i,"left")):t.right>a.right-Ny(r,"right")&&(l=t.right-a.right+Ny(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}let u=n?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(u))break;s="absolute"==u?s.offsetParent:ny(s)}}function My(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=ny(r));return t}function Py(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let jy=null;function Uy(e,t){let n,r,i,o,s=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=iy(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=u,s=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!i&&p.left<=t.left&&p.right>=t.left&&(i=u,o={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=d+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=$y(r,1);if(n.top!=n.bottom&&By(t,n))return{node:e,offset:i+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:Uy(n,r)}function By(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Fy(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(By(t,i))return Fy(n,t,i)}}if((o=(o+1)%r)==i)break}return e}function zy(e,t){let n,r=e.dom.ownerDocument,i=0,o=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ly(r.offsetNode),r.offset)}}catch(e){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(ly(r.startContainer),r.startOffset)}}}(r,t.left,t.top);o&&({node:n,offset:i}=o);let s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!By(t,n))return null;if(a=Fy(e.dom,t,n),!a)return null}if(Cy)for(let e=a;n&&e;e=ny(e))e.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(wy&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let e,r=n.childNodes[i];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}let r;Iy&&i&&1==n.nodeType&&1==(r=n.childNodes[i-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=function(e,t,n,r){let i=-1;for(let n=t,o=!1;n!=e.dom;){let t,s=e.docView.nearestDesc(n,!0);if(!s)return null;if(1==s.dom.nodeType&&(s.node.isBlock&&s.parent||!s.contentDOM)&&((t=s.dom.getBoundingClientRect()).width||t.height)&&(s.node.isBlock&&s.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(s.dom.nodeName)&&(!o&&t.left>r.left||t.top>r.top?i=s.posBefore:(!o&&t.right<r.left||t.bottom<r.top)&&(i=s.posAfter),o=!0),!s.contentDOM&&i<0&&!s.node.isText))return(s.node.isBlock?r.top<(t.top+t.bottom)/2:r.left<(t.left+t.right)/2)?s.posBefore:s.posAfter;n=s.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,n,i,t))}null==s&&(s=function(e,t,n){let{node:r,offset:i}=Uy(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function qy(e){return e.top<e.bottom||e.left<e.right}function $y(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(qy(e))return e}return Array.prototype.find.call(n,qy)||e.getBoundingClientRect()}const Hy=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Vy(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=Iy||wy;if(3==r.nodeType){if(!s||!Hy.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,Wy($y(iy(r,e,t),o),o<0)}{let e=$y(iy(r,i,i),n);if(wy&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=$y(iy(r,i-1,i-1),-1);if(t.top==e.top){let n=$y(iy(r,i,i+1),-1);if(n.top!=e.top)return Wy(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==ly(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return Gy(e.getBoundingClientRect(),!1)}if(null==o&&i<ly(r)){let e=r.childNodes[i];if(1==e.nodeType)return Gy(e.getBoundingClientRect(),!0)}return Gy(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==ly(r))){let e=r.childNodes[i-1],t=3==e.nodeType?iy(e,ly(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return Wy($y(t,1),!1)}if(null==o&&i<ly(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?iy(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return Wy($y(t,-1),!0)}return Wy($y(3==r.nodeType?iy(r):r,-n),n>=0)}function Wy(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Gy(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function Jy(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}const Ky=/[\u0590-\u08ac]/;let Zy=null,Qy=null,Xy=!1;function Yy(e,t,n){return Zy==t&&Qy==n?Xy:(Zy=t,Qy=n,Xy="up"==n||"down"==n?function(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return Jy(e,t,()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=Vy(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=iy(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0})}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=e.domSelection();return a?Ky.test(r.parent.textContent)&&a.modify?Jy(e,t,()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{a.collapse(o,s),t&&(t!=o||i!=s)&&a.extend&&a.extend(t,i)}catch(e){}return null!=l&&(a.caretBidiLevel=l),h}):"left"==n||"backward"==n?o:s:r.pos==r.start()||r.pos==r.end()}(e,t,n))}class eb{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>ty(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)for(let e=0;e<r.children.length;e++){let t=r.children[e];if(t.size){r=t;break}}return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let t=0;n<this.children.length;n++){let i=this.children[n],o=t+i.size;if(o>e||i instanceof ab){r=e-t;break}t=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof tb&&e.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?ty(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?ty(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==r&&e<=a){let i=o+n.border;if(e>=i&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=ty(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=ty(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(i>a&&o<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),u=!1;if((wy||Cy)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(u=!(!t||"\n"!=e.nodeValue[t-1]),u&&t==e.nodeValue.length)for(let t,n=e;n;n=n.parentNode){if(t=n.nextSibling){"BR"==t.nodeName&&(s=a={node:t.parentNode,offset:ty(t)+1});break}let e=n.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];u=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(wy&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||u&&Cy)&&oy(s.node,s.offset,c.anchorNode,c.anchorOffset)&&oy(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!u){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,s=o-i.border;if(e>=r&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=r||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-r,t-r):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class tb extends eb{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r)),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class nb extends eb{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class rb extends eb{constructor(e,t,n,r,i){super(e,[],n,r),this.mark=t,this.spec=i}static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=jg.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new rb(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=rb.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=wb(i,t,o,n)),e>0&&(i=wb(i,0,e,n));for(let e=0;e<i.length;e++)i[e].parent=r;return r.children=i,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ib extends eb{constructor(e,t,n,r,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,i,o){let s,a=i.nodeViews[t.type.name],l=a&&a(t,i,()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o,n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=jg.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=mb(c,n,t),l?s=new lb(e,t,n,r,c,u||null,d,l,i,o+1):t.isText?new sb(e,t,n,r,c,d,i):new ib(e,t,n,r,c,u||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>jm.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&gb(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,s=i&&i.pos<0,a=new yb(this,o&&o.node,e);!function(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,i,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;s<i.length&&i[s].to==o;){let e=i[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(bb);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let f=o+h.nodeSize;if(h.isText){let e=f;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-o),h=h.cut(0,e-o),f=e,p=-1)}else for(;s<i.length&&i[s].to<f;)s++;r(h,h.isInline&&!h.isLeaf?a.filter(e=>!e.inline):a.slice(),t.forChild(o,h),p),o=f}}(this.node,this.innerDeco,(t,i,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(i==this.node.childCount?zm.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)},(t,o,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,l,u,e)||a.updateNextNode(t,o,l,e,c,r)||a.addNode(t,o,l,e,r),r+=t.nodeSize}),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),cb(this.contentDOM,this.children,e),ky&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof Pv)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,o=function(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new nb(this,i,t,r);e.input.compositionNodes.push(o),this.children=wb(this.children,n,n+r.length,e,o)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(gb(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=pb(this.dom,this.nodeDOM,hb(this.outerDeco,this.node,t),hb(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ob(e,t,n,r,i){mb(r,t,e);let o=new ib(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class sb extends ib{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new sb(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ab extends eb{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class lb extends ib{constructor(e,t,n,r,i,o,s,a,l,c){super(e,t,n,r,i,o,s,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function cb(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=vb(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof rb){let t=r?r.previousSibling:e.lastChild;cb(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=vb(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const ub=function(e){e&&(this.nodeName=e)};ub.prototype=Object.create(null);const db=[new ub];function hb(e,t,n){if(0==e.length)return db;let r=n?db[0]:new ub,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(r=new ub(s.nodeName));for(let e in s){let o=s[e];null!=o&&(n&&1==i.length&&i.push(r=new ub(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}}return i}function pb(e,t,n,r){if(n==db&&r==db)return t;let i=t;for(let t=0;t<r.length;t++){let o=r[t],s=n[t];if(t){let t;s&&s.nodeName==o.nodeName&&i!=e&&(t=i.parentNode)&&t.nodeName.toLowerCase()==o.nodeName||(t=document.createElement(o.nodeName),t.pmIsDeco=!0,t.appendChild(i),s=db[0]),i=t}fb(i,s||db[0],o)}return i}function fb(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function mb(e,t,n){return pb(e,e,db,hb(t,n,1!=e.nodeType))}function gb(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function vb(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class yb{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof rb)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=rb.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,n))o=this.top.children.indexOf(i,this.index);else for(let r=this.index,i=Math.min(this.top.children.length,r+5);r<i;r++){let i=this.top.children[r];if(i.matchesNode(e,t,n)&&!this.preMatch.matched.has(i)){o=r;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof ib){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&gb(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,o+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!gb(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let s=ib.create(this.top,t,n,r,i,o);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,r,i){let o=ib.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new tb(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof rb;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof sb)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Cy||xy)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new ab(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function bb(e,t){return e.type.side-t.type.side}function wb(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function _b(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=r.resolve(s);if(uy(n)){for(a=s;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&Uv.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,i=t==ly(e);r||i;){if(e==n)return!0;let t=ty(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==ly(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;l=new Uv(s==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,i=s;for(let r=0;r<n.rangeCount;r++){let o=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(o.startContainer,o.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(t<0)return null;[a,s]=i==e.state.selection.anchor?[i,t]:[t,i],c=r.resolve(s)}else a=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!l){l=Rb(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)}return l}function xb(e){return e.editable?e.hasFocus():Nb(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Sb(e,t=!1){let n=e.state.selection;if(Tb(e,n),xb(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&xy){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&oy(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,ty(r)+1):n.setStart(r,0);n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&yy&&by<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,i,{anchor:o,head:s}=n;!Cb||n instanceof Pv||(n.$from.parent.inlineContent||(r=kb(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=kb(e,n.to))),e.docView.setSelection(o,s,e,t),Cb&&(r&&Ab(r),i&&Ab(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{xb(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")},20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Cb=Cy||xy&&Sy<63;function kb(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Cy&&i&&"false"==i.contentEditable)return Eb(i);if(!(i&&"false"!=i.contentEditable||o&&"false"!=o.contentEditable)){if(i)return Eb(i);if(o)return Eb(o)}}function Eb(e){return e.contentEditable="true",Cy&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Ab(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Tb(e,t){if(t instanceof Uv){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ib(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ib(e)}function Ib(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Rb(e,t,n,r){return e.someProp("createSelectionBetween",r=>r(e,t,n))||Pv.between(t,n,r)}function Lb(e){return!(e.editable&&!e.hasFocus())&&Nb(e)}function Nb(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ob(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&Nv.findFrom(o,t)}function Db(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Mb(e,t,n){let r=e.state.selection;if(!(r instanceof Pv)){if(r instanceof Uv&&r.node.isInline)return Db(e,new Pv(t>0?r.$to:r.$from));{let n=Ob(e.state,t);return!!n&&Db(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return Db(e,new Pv(r.$anchor,o))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=Ob(e.state,t);return!!(n&&n instanceof Uv)&&Db(e,n)}if(!(Ey&&n.indexOf("m")>-1)){let n,i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText)return!1;let s=t<0?i.pos-o.nodeSize:i.pos;return!!(o.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(Uv.isSelectable(o)?Db(e,new Uv(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):!!Iy&&Db(e,new Pv(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}function Pb(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function jb(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Ub(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;wy&&1==n.nodeType&&r<Pb(n)&&jb(n.childNodes[r],-1)&&(s=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(jb(e,-1))i=n,o=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(Bb(n))break;{let t=n.previousSibling;for(;t&&jb(t,-1);)i=n.parentNode,o=ty(t),t=t.previousSibling;if(t)n=t,r=Pb(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?Fb(e,n,r):i&&Fb(e,i,o)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=Pb(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!jb(n.childNodes[r],1))break;i=n,o=++r}else{if(Bb(n))break;{let t=n.nextSibling;for(;t&&jb(t,1);)i=t.parentNode,o=ty(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=Pb(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}i&&Fb(e,i,o)}(e)}function Bb(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Fb(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!cy(e);)t=ty(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!cy(e);)t=ty(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(uy(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Sb(e)},50)}function zb(e,t){let n=e.state.doc.resolve(t);if(!xy&&!Ay&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function qb(e,t,n){let r=e.state.selection;if(r instanceof Pv&&!r.empty||n.indexOf("s")>-1)return!1;if(Ey&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Ob(e.state,t);if(n&&n instanceof Uv)return Db(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,s=r instanceof Fv?Nv.near(n,t):Nv.findFrom(n,t);return!!s&&Db(e,s)}return!1}function $b(e,t){if(!(e.state.selection instanceof Pv))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function Hb(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function Vb(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||Ey&&72==n&&"c"==r)return $b(e,-1)||Ub(e,-1);if(46==n&&!t.shiftKey||Ey&&68==n&&"c"==r)return $b(e,1)||Ub(e,1);if(13==n||27==n)return!0;if(37==n||Ey&&66==n&&"c"==r){let t=37==n?"ltr"==zb(e,e.state.selection.from)?-1:1:-1;return Mb(e,t,r)||Ub(e,t)}if(39==n||Ey&&70==n&&"c"==r){let t=39==n?"ltr"==zb(e,e.state.selection.from)?1:-1:1;return Mb(e,t,r)||Ub(e,t)}return 38==n||Ey&&80==n&&"c"==r?qb(e,-1,r)||Ub(e,-1):40==n||Ey&&78==n&&"c"==r?function(e){if(!Cy||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Hb(e,n,"true"),setTimeout(()=>Hb(e,n,"false"),20)}return!1}(e)||qb(e,1,r)||Ub(e,1):r==(Ey?"m":"c")&&(66==n||73==n||89==n||90==n)}function Wb(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||jg.fromSchema(e.state.schema),a=nw(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=ew[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function Gb(e,t,n,r,i){let o,s,a=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,a||r,e)}),a)return t?new $m(jm.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):$m.empty;let n=e.someProp("clipboardTextParser",n=>n(t,i,r,e));if(n)s=n;else{let n=i.marks(),{schema:r}=e.state,s=jg.fromSchema(r);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=nw().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);(n=i&&ew[i[1].toLowerCase()])&&(e=n.map(e=>"<"+e+">").join("")+e+n.map(e=>"</"+e+">").reverse().join(""));if(r.innerHTML=function(e){let t=window.trustedTypes;if(!t)return e;rw||(rw=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e}));return rw.createHTML(e)}(e),n)for(let e=0;e<n.length;e++)r=r.querySelector(n[e])||r;return r}(n),Iy&&function(e){let t=e.querySelectorAll(xy?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let e=+u[3];e>0;e--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||Ag.fromSchema(e.state.schema);s=t.parseSlice(o,{preserveWhitespace:!(!l&&!u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Jb.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}let{content:i,openStart:o,openEnd:s}=e;for(let e=n.length-2;e>=0;e-=2){let t=r.nodes[n[e]];if(!t||t.hasRequiredAttrs())break;i=jm.from(t.create(n[e+1],i)),o++,s++}return new $m(i,o,s)}(Yb(s,+u[1],+u[2]),u[4]);else if(s=$m.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,i=t.node(n).contentMatchAt(t.index(n)),o=[];if(e.forEach(e=>{if(!o)return;let t,n=i.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&r.length&&Zb(n,r,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=Qb(o[o.length-1],r.length));let t=Kb(e,n);o.push(t),i=i.matchType(t.type),r=n}}),o)return jm.from(o)}return e}(s.content,i),!0),s.openStart||s.openEnd){let e=0,t=0;for(let t=s.content.firstChild;e<s.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=s.content.lastChild;t<s.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);s=Yb(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e)}),s}const Jb=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Kb(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,jm.from(e));return e}function Zb(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=Zb(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(jm.from(Kb(n,e,i+1))))}}function Qb(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,Qb(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(jm.empty,!0);return e.copy(n.append(r))}function Xb(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<r-1&&(a=Xb(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(jm.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Yb(e,t,n){return t<e.openStart&&(e=new $m(Xb(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new $m(Xb(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const ew={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let tw=null;function nw(){return tw||(tw=document.implementation.createHTMLDocument("title"))}let rw=null;const iw={},ow={},sw={touchstart:!0,touchmove:!0};class aw{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function lw(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function cw(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>uw(e,t))})}function uw(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)})}function dw(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function hw(e){return{left:e.clientX,top:e.clientY}}function pw(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let r=o.depth+1;r>0;r--)if(e.someProp(t,t=>r>o.depth?t(e,n,o.nodeAfter,o.before(r),i,!0):t(e,n,o.node(r),o.before(r),i,!1)))return!0;return!1}function fw(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function mw(e,t,n,r,i){return pw(e,"handleClickOn",t,n,r)||e.someProp("handleClick",n=>n(e,t,r))||(i?function(e,t){if(-1==t)return!1;let n,r,i=e.state.selection;i instanceof Uv&&(n=i.node);let o=e.state.doc.resolve(t);for(let e=o.depth+1;e>0;e--){let t=e>o.depth?o.nodeAfter:o.node(e);if(Uv.isSelectable(t)){r=n&&i.$from.depth>0&&e>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(e);break}}return null!=r&&(fw(e,Uv.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Uv.isSelectable(r))&&(fw(e,new Uv(n),"pointer"),!0)}(e,n))}function gw(e,t,n,r){return pw(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",n=>n(e,t,r))}function vw(e,t,n,r){return pw(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",n=>n(e,t,r))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(fw(e,Pv.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let t=i.depth+1;t>0;t--){let n=t>i.depth?i.nodeAfter:i.node(t),o=i.before(t);if(n.inlineContent)fw(e,Pv.create(r,o+1,o+1+n.content.size),"pointer");else{if(!Uv.isSelectable(n))continue;fw(e,Uv.create(r,o),"pointer")}return!0}}(e,n,r)}function yw(e){return Ew(e)}ow.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!_w(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Ty||!xy||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!ky||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",t=>t(e,n))||Vb(e,n)?n.preventDefault():lw(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,dy(13,"Enter"))),e.input.lastIOSEnter=0)},200)}},ow.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},ow.keypress=(e,t)=>{let n=t;if(_w(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ey&&n.metaKey)return;if(e.someProp("handleKeyPress",t=>t(e,n)))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof Pv&&r.$from.sameParent(r.$to))){let t=String.fromCharCode(n.charCode),i=()=>e.state.tr.insertText(t).scrollIntoView();/[\r\n]/.test(t)||e.someProp("handleTextInput",n=>n(e,r.$from.pos,r.$to.pos,t,i))||e.dispatch(i()),n.preventDefault()}};const bw=Ey?"metaKey":"ctrlKey";iw.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=yw(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[bw]&&e.input.lastClick.button==n.button&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o,button:n.button};let s=e.posAtCoords(hw(n));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new ww(e,s,n,!!r)):("doubleClick"==o?gw:vw)(e,s.pos,s.inside,n)?n.preventDefault():lw(e,"pointer"))};class ww{constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[bw],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof Uv&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!wy||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),lw(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Sb(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(hw(e))),this.updateAllowDefault(e),this.allowDefault||!t?lw(this.view,"pointer"):mw(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Cy&&this.mightDrag&&!this.mightDrag.node.isAtom||xy&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(fw(this.view,Nv.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):lw(this.view,"pointer")}move(e){this.updateAllowDefault(e),lw(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function _w(e,t){return!!e.composing||!!(Cy&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}iw.touchstart=e=>{e.input.lastTouch=Date.now(),yw(e),lw(e,"pointer")},iw.touchmove=e=>{e.input.lastTouch=Date.now(),lw(e,"pointer")},iw.contextmenu=e=>yw(e);const xw=Ty?5e3:-1;function Sw(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Ew(e),t))}function Cw(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function kw(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=ly(e=e.childNodes[t-1])}else{if(!e.parentNode||cy(e))return null;t=ty(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||cy(e))return null;t=ty(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}function Ew(e,t=!1){if(!(Ty&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Cw(e),t||e.docView&&e.docView.dirty){let n=_b(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}ow.compositionstart=ow.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Pv&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)))e.markCursor=e.state.storedMarks||n.marks(),Ew(e,!0),e.markCursor=null;else if(Ew(e,!t.selection.empty),wy&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}Sw(e,xw)},ow.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,Sw(e,20))};const Aw=yy&&by<15||ky&&Ry<604;function Tw(e,t,n,r,i){let o=Gb(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,i,o||$m.empty)))return!0;if(!o)return!1;let s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Iw(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}iw.copy=ow.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let o=Aw?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Wb(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},ow.paste=(e,t)=>{let n=t;if(e.composing&&!Ty)return;let r=Aw?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Tw(e,Iw(r),r.getData("text/html"),i,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Tw(e,r.value,null,i,t):Tw(e,r.textContent,r.innerHTML,i,t)},50)}(e,n)};class Rw{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Lw=Ey?"altKey":"ctrlKey";function Nw(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[Lw]}iw.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i,o=e.state.selection,s=o.empty?null:e.posAtCoords(hw(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof Uv?o.to-1:o.to));else if(r&&r.mightDrag)i=Uv.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(i=Uv.create(e.state.doc,t.posBefore))}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=Wb(e,a);(!n.dataTransfer.files.length||!xy||Sy>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Aw?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Aw||n.dataTransfer.setData("text/plain",c),e.dragging=new Rw(u,Nw(e,n),i)},iw.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},ow.dragover=ow.dragenter=(e,t)=>t.preventDefault(),ow.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(hw(n));if(!i)return;let o=e.state.doc.resolve(i.pos),s=r&&r.slice;s?e.someProp("transformPasted",t=>{s=t(s,e)}):s=Gb(e,Iw(n.dataTransfer),Aw?null:n.dataTransfer.getData("text/html"),!1,o);let a=!(!r||!Nw(e,n));if(e.someProp("handleDrop",t=>t(e,n,s||$m.empty,a)))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?function(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let e=0;e<n.openStart;e++)i=i.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=r.depth;t>=0;t--){let n=t==r.depth?0:r.pos<=(r.start(t+1)+r.end(t+1))/2?-1:1,o=r.index(t)+(n>0?1:0),s=r.node(t),a=!1;if(1==e)a=s.canReplace(o,o,i);else{let e=s.contentMatchAt(o).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(o,o,e[0])}if(a)return 0==n?r.pos:n<0?r.before(t+1):r.after(t+1)}return null}(e.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=e.state.tr;if(a){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&Uv.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Uv(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((e,n,r,i)=>t=i),c.setSelection(Rb(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},iw.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Sb(e)},20))},iw.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},iw.beforeinput=(e,t)=>{if(xy&&Ty&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,dy(8,"Backspace"))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}};for(let e in ow)iw[e]=ow[e];function Ow(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Dw{constructor(e,t){this.toDOM=e,this.spec=t||Bw,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new jw(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Dw&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ow(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Mw{constructor(e,t){this.attrs=e,this.spec=t||Bw}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new jw(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Mw&&Ow(this.attrs,e.attrs)&&Ow(this.spec,e.spec)}static is(e){return e.type instanceof Mw}destroy(){}}class Pw{constructor(e,t){this.attrs=e,this.spec=t||Bw}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new jw(i.pos-n,o.pos-n,this)}valid(e,t){let n,{index:r,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to}eq(e){return this==e||e instanceof Pw&&Ow(this.attrs,e.attrs)&&Ow(this.spec,e.spec)}destroy(){}}class jw{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new jw(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new jw(e,e,new Dw(t,n))}static inline(e,t,n,r){return new jw(e,t,new Mw(n,r))}static node(e,t,n,r){return new jw(e,t,new Pw(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Mw}get widget(){return this.type instanceof Dw}}const Uw=[],Bw={};class Fw{constructor(e,t){this.local=e.length?e:Uw,this.children=t.length?t:Uw}static create(e,t){return t.length?Ww(t,e,0,Bw):zw}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,r+s,i)}}map(e,t,n){return this==zw||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Bw)}mapInner(e,t,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){let a=e.slice();for(let e=0,t=o;e<n.maps.length;e++){let r=0;n.maps[e].forEach((e,n,i,o)=>{let s=o-i-(n-e);for(let i=0;i<a.length;i+=3){let o=a[i+1];if(o<0||e>o+t-r)continue;let l=a[i]+t-r;n>=l?a[i+1]=e<=l?-2:-1:e>=t&&s&&(a[i]+=s,a[i+1]+=s)}r+=s}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=n.map(e[t]+o),u=c-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[t+1]+o,-1)-i,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=a[t+2].mapInner(n,f,c+1,e[t]+o+1,s);r!=zw?(a[t]=u,a[t+1]=d,a[t+2]=r):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,i,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(r,i,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let n=0;n<e.length;n+=3)-1==e[n+1]&&a(e[n+2],t[n]+o+1);return n}(a,e,t,n,i,o,s),c=Ww(l,r,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Fw(t.sort(Gw),a)}(this.children,o||[],e,t,n,r,i):o?new Fw(o.sort(Gw),Uw):zw}add(e,t){return t.length?this==zw?Fw.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach((e,o)=>{let s,a=o+n;if(s=Hw(t,e,a)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,s,a+1):r.splice(i,0,o,o+e.nodeSize,Ww(s,e,a+1,Bw)),i+=3}});let o=$w(i?Vw(t):t,-n);for(let t=0;t<o.length;t++)o[t].type.valid(e,o[t])||o.splice(t--,1);return new Fw(o.length?this.local.concat(o).sort(Gw):this.local,r||this.children)}remove(e){return 0==e.length||this==zw?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let r=0;r<n.length;r+=3){let i,o=n[r]+t,s=n[r+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<s&&(e[n]=null,(i||(i=[])).push(t));if(!i)continue;n==this.children&&(n=this.children.slice());let a=n[r+2].removeInner(i,o+1);a!=zw?n[r+2]=a:(n.splice(r,3),r-=3)}if(r.length)for(let n,i=0;i<e.length;i++)if(n=e[i])for(let e=0;e<r.length;e++)r[e].eq(n,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Fw(r,n):zw}forChild(e,t){if(this==zw)return this;if(t.isLeaf)return Fw.empty;let n,r;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let i=e+1,o=i+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<o&&t.to>i&&t.type instanceof Mw){let e=Math.max(i,t.from)-i,n=Math.min(o,t.to)-i;e<n&&(r||(r=[])).push(t.copy(e,n))}}if(r){let e=new Fw(r.sort(Gw),Uw);return n?new qw([e,n]):e}return n||zw}eq(e){if(this==e)return!0;if(!(e instanceof Fw)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Jw(this.localsInner(e))}localsInner(e){if(this==zw)return Uw;if(e.inlineContent||!this.local.some(Mw.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof Mw||t.push(this.local[e]);return t}forEachSet(e){e(this)}}Fw.empty=new Fw([],[]),Fw.removeOverlap=Jw;const zw=Fw.empty;class qw{constructor(e){this.members=e}map(e,t){const n=this.members.map(n=>n.map(e,t,Bw));return qw.from(n)}forChild(e,t){if(t.isLeaf)return Fw.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=zw&&(i instanceof qw?n=n.concat(i.members):n.push(i))}return qw.from(n)}eq(e){if(!(e instanceof qw)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?Jw(n?t:t.sort(Gw)):Uw}static from(e){switch(e.length){case 0:return zw;case 1:return e[0];default:return new qw(e.every(e=>e instanceof Fw)?e:e.reduce((e,t)=>e.concat(t instanceof Fw?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function $w(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new jw(i.from+t,i.to+t,i.type))}return n}function Hw(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let t,o=0;o<e.length;o++)(t=e[o])&&t.from>n&&t.to<r&&((i||(i=[])).push(t),e[o]=null);return i}function Vw(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Ww(e,t,n,r){let i=[],o=!1;t.forEach((t,s)=>{let a=Hw(e,t,s+n);if(a){o=!0;let e=Ww(a,t,n+s+1,r);e!=zw&&i.push(s,s+t.nodeSize,e)}});let s=$w(o?Vw(e):e,-n).sort(Gw);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||(r.onRemove&&r.onRemove(s[e].spec),s.splice(e--,1));return s.length||i.length?new Fw(s,i):zw}function Gw(e,t){return e.from-t.from||e.to-t.to}function Jw(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),Kw(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),Kw(t,i+1,o.copy(r.to,o.to)))}}return t}function Kw(e,t,n){for(;t<e.length&&Gw(n,e[t])>0;)t++;e.splice(t,0,n)}function Zw(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=zw&&t.push(r)}),e.cursorWrapper&&t.push(Fw.create(e.state.doc,[e.cursorWrapper.deco])),qw.from(t)}const Qw={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Xw=yy&&by<=11;class Yw{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class e_{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Yw,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);yy&&by<=11&&e.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():this.flush()}),Xw&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Qw)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Lb(this.view)){if(this.suppressingSelectionUpdates)return Sb(this.view);if(yy&&by<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&oy(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let t=e.focusNode;t;t=ny(t))n.add(t);for(let r=e.anchorNode;r;r=ny(r))if(n.has(r)){t=r;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&Lb(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,s=!1,a=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],a);n&&(i=i<0?n.from:Math.min(n.from,i),o=o<0?n.to:Math.max(n.to,o),n.typeOver&&(s=!0))}if(wy&&a.length){let t=a.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&i_(e,n)==t||r.remove()}}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&uy(n)&&(l=_b(e))&&l.eq(Nv.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Sb(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,o),function(e){if(t_.has(e))return;if(t_.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=wy,n_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),n_=!0}}(e)),this.handleDOMChange(i,o,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Sb(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(yy&&by<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==e.target?ty(r)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?ty(i):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let t_=new WeakMap,n_=!1;function r_(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return oy(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function i_(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function o_(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Cy&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||Cy&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const s_=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function a_(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=_b(e,t);if(n&&!e.state.selection.eq(n)){if(xy&&Ty&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,dy(13,"Enter"))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),o&&r.setMeta("composition",o),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=function(e,t,n){let r,{node:i,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],uy(c)||r.push({node:c.focusNode,offset:c.focusOffset})),xy&&8===e.input.lastKeyCode)for(let e=s;e>o;e--){let t=i.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){s=e;break}if(!n||n.size)break}let d=e.state.doc,h=e.someProp("domParser")||Ag.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:o_,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){r-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.size<t.size){let e=r<=o&&r>=s?o-r:0;o-=e,o&&o<t.size&&u_(t.textBetween(o-1,o+1))&&(o+=e?1:-1),a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;o-=t,o&&o<e.size&&u_(e.textBetween(o-1,o+1))&&(o+=t?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(p.content,d.doc.content,d.from,l,c);if(f&&e.input.domChangeCount++,(ky&&e.input.lastIOSEnter>Date.now()-225||Ty)&&i.some(e=>1==e.nodeType&&!s_.test(e.nodeName))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",t=>t(e,dy(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof Pv&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=l_(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);o&&n.setMeta("composition",o),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof Pv&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),yy&&by<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" \xa0"==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),v=d.doc.resolveNoCache(f.endB-d.from),y=h.resolve(f.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=f.endA;if((ky&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&g.pos<d.doc.content.size&&(!g.sameParent(v)||!g.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(g.pos,v.pos,"",""))&&(m=Nv.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head>g.pos)&&e.someProp("handleKeyDown",t=>t(e,dy(13,"Enter"))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,i){if(n-t<=i.pos-r.pos||c_(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let e=o.nodeAfter;return null!=e&&n==t+e.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(c_(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||c_(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(h,f.start,f.endA,g,v)&&e.someProp("handleKeyDown",t=>t(e,dy(8,"Backspace"))))return void(Ty&&xy&&e.domObserver.suppressSelectionUpdates());xy&&f.endB==f.start&&(e.input.lastChromeDelete=Date.now()),Ty&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,v=d.doc.resolveNoCache(f.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,dy(13,"Enter"))})},20));let w,_=f.start,x=f.endA,S=t=>{let n=t||e.state.tr.replace(_,x,d.doc.slice(f.start-d.from,f.endB-d.from));if(d.sel){let t=l_(e,n.doc,d.sel);t&&!(xy&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==_||t.head==n.mapping.map(x)-1)||yy&&t.empty&&t.head==_)&&n.setSelection(t)}return o&&n.setMeta("composition",o),n.scrollIntoView()};if(b){if(g.pos==v.pos){yy&&by<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Sb(e),20));let t=S(e.state.tr.delete(_,x)),n=h.resolve(f.start).marksAcross(h.resolve(f.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(f.endA==f.endB&&(w=function(e,t){let n,r,i,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s;for(let e=0;e<s.length;e++)a=s[e].removeFromSet(a);for(let e=0;e<o.length;e++)l=o[e].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",i=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",i=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(i(t.child(e)));if(jm.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start())))){let t=S(e.state.tr);"add"==w.type?t.addMark(_,x,w.mark):t.removeMark(_,x,w.mark),e.dispatch(t)}else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,v.parentOffset),n=()=>S(e.state.tr.insertText(t,_,x));e.someProp("handleTextInput",r=>r(e,_,x,t,n))||e.dispatch(n())}}else e.dispatch(S())}function l_(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Rb(e,t.resolve(n.anchor),t.resolve(n.head))}function c_(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function u_(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class d_{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new aw,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(g_),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=f_(this),p_(this),this.nodeViews=m_(this),this.docView=ob(this.state.doc,h_(this),Zw(this),this.dom,this),this.domObserver=new e_(this,(e,t,n,r)=>a_(this,e,t,n,r)),this.domObserver.start(),function(e){for(let t in iw){let n=iw[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!dw(e,t)||uw(e,t)||!e.editable&&t.type in ow||n(e,t)},sw[t]?{passive:!0}:void 0)}Cy&&e.dom.addEventListener("input",()=>null),cw(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&cw(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(g_),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(Cw(this),o=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=m_(this);(function(e,t){let n=0,r=0;for(let r in e){if(e[r]!=t[r])return!0;n++}for(let e in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&cw(this),this.editable=f_(this),p_(this);let a=Zw(this),l=h_(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=i||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(o=!0);let d="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(o,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:My(e.dom)}}(this);if(o){this.domObserver.stop();let t=u&&(yy||xy)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(u){let n=xy?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=kw(this)),!i&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=ob(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return oy(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Sb(this,t):(Tb(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Py(n,0==r?0:r-t)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode))if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof Uv){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&Dy(this,t.getBoundingClientRect(),e)}else Dy(this,this.coordsAtPos(this.state.selection.head,1),e);else;}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new Rw(e.slice,e.move,r<0?void 0:Uv.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let r=0;r<this.directPlugins.length;r++){let i=this.directPlugins[r].props[e];if(null!=i&&(n=t?t(i):i))return n}let i=this.state.plugins;if(i)for(let r=0;r<i.length;r++){let o=i[r].props[e];if(null!=o&&(n=t?t(o):o))return n}}hasFocus(){if(yy){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(jy)return e.focus(jy);let t=My(e);e.focus(null==jy?{get preventScroll(){return jy={preventScroll:!0},!0}}:void 0),jy||(jy=!1,Py(t,0))}(this.dom),Sb(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e;return e||document}updateRoot(){this._root=null}posAtCoords(e){return zy(this,e)}coordsAtPos(e,t=1){return Vy(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return Yy(this,t||this.state,e)}pasteHTML(e,t){return Tw(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Tw(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Wb(this,e)}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Zw(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ry=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){uw(e,t)||!iw[t.type]||!e.editable&&t.type in ow||iw[t.type](e,t)}(this,e)}domSelectionRange(){let e=this.domSelection();return e?Cy&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return r_(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?r_(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function h_(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[jw.node(0,e.state.doc.content.size,t)]}function p_(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:jw.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function f_(e){return!e.someProp("editable",t=>!1===t(e.state))}function m_(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function g_(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}d_.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};var v_=200,y_=function(){};y_.prototype.append=function(e){return e.length?(e=y_.from(e),!this.length&&e||e.length<v_&&this.leafAppend(e)||this.length<v_&&e.leafPrepend(this)||this.appendInner(e)):this},y_.prototype.prepend=function(e){return e.length?y_.from(e).append(this):this},y_.prototype.appendInner=function(e){return new w_(this,e)},y_.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?y_.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},y_.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},y_.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},y_.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(t,n){return r.push(e(t,n))},t,n),r},y_.from=function(e){return e instanceof y_?e:e&&e.length?new b_(e):y_.empty};var b_=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=v_)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=v_)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(y_);y_.empty=new b_([]);var w_=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(y_);const __=y_;class x_{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new S_(e.map));let t,i=e.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new S_(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(o=n?e.selection.map(n.slice(r)):e.selection,s=new x_(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0},this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(e,t,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let n=0;n<e.steps.length;n++){let l,c=e.steps[n].invert(e.docs[n]),u=new S_(e.mapping.maps[n],c,t);(l=a&&a.merge(u))&&(u=l,n?i.pop():s=s.slice(0,s.length-1)),i.push(u),t&&(o++,t=void 0),r||(a=u)}let l=o-n.depth;return l>k_&&(s=function(e,t){let n;return e.forEach((e,r)=>{if(e.selection&&0==t--)return n=r,!1}),e.slice(n)}(s,l),o-=l),new x_(s.append(i),o)}remapping(e,t){let n=new Jg;return this.items.forEach((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)},e,t),n}addMaps(e){return 0==this.eventCount?this:new x_(this.items.append(e.map(e=>new S_(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},r);let a=t;this.items.forEach(t=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&s++,n.push(new S_(l,o,c))}else n.push(new S_(l))},r);let l=[];for(let e=t;e<o;e++)l.push(new S_(i.maps[e]));let c=this.items.slice(0,r).append(l).append(n),u=new x_(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&i++;let l,c=new S_(s.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--},this.items.length,0),new x_(__.from(r.reverse()),i)}}x_.empty=new x_(__.empty,0);class S_{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new S_(t.getMap().invert(),t,this.selection)}}}class C_{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const k_=20;function E_(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,r,i)=>t.push(r,i));return t}function A_(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}let T_=!1,I_=null;function R_(e){let t=e.plugins;if(I_!=t){T_=!1,I_=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){T_=!0;break}}return T_}const L_=new ey("history"),N_=new ey("closeHistory");function O_(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Qv({key:L_,state:{init:()=>new C_(x_.empty,x_.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let i,o=n.getMeta(L_);if(o)return o.historyState;n.getMeta(N_)&&(e=new C_(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(L_))return s.getMeta(L_).redo?new C_(e.done.addTransform(n,void 0,r,R_(t)),e.undone,E_(n.mapping.maps),e.prevTime,e.prevComposition):new C_(e.done,e.undone.addTransform(n,void 0,r,R_(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new C_(e.done.rebased(n,i),e.undone.rebased(n,i),A_(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new C_(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),A_(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)}),n}(n,e.prevRanges)),a=s?A_(e.prevRanges,n.mapping):E_(n.mapping.maps);return new C_(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,R_(t)),x_.empty,a,n.time,null==i?e.prevComposition:i)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?M_:"historyRedo"==n?P_:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function D_(e,t){return(n,r)=>{let i=L_.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let o=function(e,t,n){let r=R_(t),i=L_.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),l=new C_(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(L_,{redo:n,historyState:l})}(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const M_=D_(!1,!0),P_=D_(!0,!0);D_(!1,!1),D_(!0,!1);const j_=["open","alt"],U_=["h1","h2","h3","h4","h5","h6"];function B_(e){const t={};for(const n of e.attributes)t[n.name]=n.value;const n=e.nodeName.toLowerCase();return U_.includes(n)?{originalAttributes:t,level:n[1]}:{originalAttributes:t}}let F_={doc:{content:"block+"},text:{group:"inline"},p:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"p",getAttrs:e=>B_(e)}],toDOM:e=>["p",{...e.attrs.originalAttributes},0]},main:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"main",getAttrs:e=>B_(e)}],toDOM:e=>["main",{...e.attrs.originalAttributes},0]},article:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"article",getAttrs:e=>B_(e)}],toDOM:e=>["article",{...e.attrs.originalAttributes},0]},section:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"section",getAttrs:e=>B_(e)}],toDOM:e=>["section",{...e.attrs.originalAttributes},0]},aside:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"aside",getAttrs:e=>B_(e)}],toDOM:e=>["aside",{...e.attrs.originalAttributes},0]},header:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"header",getAttrs:e=>B_(e)}],toDOM:e=>["header",{...e.attrs.originalAttributes},0]},footer:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"footer",getAttrs:e=>B_(e)}],toDOM:e=>["footer",{...e.attrs.originalAttributes},0]},div:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"div",getAttrs:e=>B_(e)}],toDOM:e=>["div",{...e.attrs.originalAttributes},0]},nav:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"nav",getAttrs:e=>B_(e)}],toDOM:e=>["nav",{...e.attrs.originalAttributes},0]},address:{content:"inline+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"address",getAttrs:e=>B_(e)}],toDOM:e=>["address",{...e.attrs.originalAttributes},0]},heading:{content:"inline*",group:"block",attrs:{level:{default:1,validate:"number"},originalAttributes:{default:{}}},parseDOM:U_.map(e=>({tag:e,getAttrs:e=>B_(e)})),toDOM(e){const{level:t,originalAttributes:n}=e.attrs;return["h"+t,{...n},0]},defining:!0},img:{group:"inline",inline:!0,draggable:!0,attrs:{originalAttributes:{default:{},src:{validate:"string"},alt:{default:null,validate:"string|null"},title:{default:null,validate:"string|null"}}},parseDOM:[{tag:"img[src]",getAttrs:e=>B_(e)}],toDOM:e=>["img",{...e.attrs.originalAttributes}]},dl:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"dl",getAttrs:e=>B_(e)}],toDOM:e=>["dl",{...e.attrs.originalAttributes},0]},dt:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"dt",getAttrs:e=>B_(e)}],toDOM:e=>["dt",{...e.attrs.originalAttributes},0]},dd:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"dd",getAttrs:e=>B_(e)}],toDOM:e=>["dd",{...e.attrs.originalAttributes},0]},ul:{content:"li+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"ul",getAttrs:e=>B_(e)}],toDOM:e=>["ul",{...e.attrs.originalAttributes},0]},ol:{content:"li+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"ol",getAttrs:e=>B_(e)}],toDOM:e=>["ol",{...e.attrs.originalAttributes},0]},li:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"li",getAttrs:e=>B_(e)}],toDOM:e=>["li",{...e.attrs.originalAttributes},0],defining:!0},pre:{content:"text*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>B_(e)}],toDOM:e=>["pre",{...e.attrs.originalAttributes},["code",0]],code:!0,defining:!0},blockquote:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"blockquote",getAttrs:e=>B_(e)}],toDOM:e=>["blockquote",{...e.attrs.originalAttributes},0],defining:!0},video:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"video",getAttrs:e=>B_(e)}],toDOM:e=>["video",{...e.attrs.originalAttributes},0]},audio:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"audio",getAttrs:e=>B_(e)}],toDOM:e=>["audio",{...e.attrs.originalAttributes},0]},source:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"source",getAttrs:e=>B_(e)}],toDOM:e=>["source",{...e.attrs.originalAttributes}]},track:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"track",getAttrs:e=>B_(e)}],toDOM:e=>["track",{...e.attrs.originalAttributes},0]},figure:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"figure",getAttrs:e=>B_(e)}],toDOM:e=>["figure",{...e.attrs.originalAttributes},0]},figcaption:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"figcaption",getAttrs:e=>B_(e)}],toDOM:e=>["figcaption",{...e.attrs.originalAttributes},0]},details:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"details",getAttrs:e=>B_(e)}],toDOM:e=>["details",{...e.attrs.originalAttributes},0]},summary:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"summary",getAttrs:e=>B_(e)}],toDOM:e=>["summary",{...e.attrs.originalAttributes},0]},hr:{group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"hr",getAttrs:e=>B_(e)}],toDOM:e=>["hr",{...e.attrs.originalAttributes}]},object:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"object",getAttrs:e=>B_(e)}],toDOM:e=>["object",{...e.attrs.originalAttributes},0]},iframe:{group:"block",inline:!1,atom:!0,attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"iframe",getAttrs:e=>B_(e)}],toDOM:e=>["iframe",{...e.attrs.originalAttributes},0]},svg:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"svg",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg svg",{...e.attrs.originalAttributes},0]},g:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"g",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg g",{...e.attrs.originalAttributes},0]},circle:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"circle",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg circle",{...e.attrs.originalAttributes},0]},svgText:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"text",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg text",{...e.attrs.originalAttributes},0]},path:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"path",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg path",{...e.attrs.originalAttributes},0]},metadata:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"metadata",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg metadata",{...e.attrs.originalAttributes},0]},tspan:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"tspan",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg tspan",{...e.attrs.originalAttributes},0]},title:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"title",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg title",{...e.attrs.originalAttributes},0]},defs:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"defs",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg defs",{...e.attrs.originalAttributes},0]},marker:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"marker",getAttrs:e=>B_(e)}],toDOM:e=>["http://www.w3.org/2000/svg marker",{...e.attrs.originalAttributes},0]},button:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"button",getAttrs:e=>B_(e)}],toDOM:e=>["button",{...e.attrs.originalAttributes},0]},label:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"label",getAttrs:e=>B_(e)}],toDOM:e=>["label",{...e.attrs.originalAttributes},0]},select:{content:"block+",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"select",getAttrs:e=>B_(e)}],toDOM:e=>["select",{...e.attrs.originalAttributes},0]},option:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"option",getAttrs:e=>B_(e)}],toDOM:e=>["option",{...e.attrs.originalAttributes},0]},input:{group:"inline",inline:!0,attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"input",getAttrs:e=>B_(e)}],toDOM:e=>["input",{...e.attrs.originalAttributes}]},textarea:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"textarea",getAttrs:e=>B_(e)}],toDOM:e=>["textarea",{...e.attrs.originalAttributes},0]},table:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"table",getAttrs:e=>B_(e)}],toDOM:e=>["table",{...e.attrs.originalAttributes},0]},thead:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"thead",getAttrs:e=>B_(e)}],toDOM:e=>["thead",{...e.attrs.originalAttributes},0]},tbody:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"tbody",getAttrs:e=>B_(e)}],toDOM:e=>["tbody",{...e.attrs.originalAttributes},0]},tfoot:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"tfoot",getAttrs:e=>B_(e)}],toDOM:e=>["tfoot",{...e.attrs.originalAttributes},0]},caption:{content:"inline*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"caption",getAttrs:e=>B_(e)}],toDOM:e=>["caption",{...e.attrs.originalAttributes},0]},tr:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"tr",getAttrs:e=>B_(e)}],toDOM:e=>["tr",{...e.attrs.originalAttributes},0]},th:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"th",getAttrs:e=>B_(e)}],toDOM:e=>["th",{...e.attrs.originalAttributes},0]},td:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"td",getAttrs:e=>B_(e)}],toDOM:e=>["td",{...e.attrs.originalAttributes},0]},colgroup:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"colgroup",getAttrs:e=>B_(e)}],toDOM:e=>["colgroup",{...e.attrs.originalAttributes},0]},col:{group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"col",getAttrs:e=>B_(e)}],toDOM:e=>["col",{...e.attrs.originalAttributes}]},canvas:{content:"block*",group:"block",attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:"canvas",getAttrs:e=>B_(e)}],toDOM:e=>["canvas",{...e.attrs.originalAttributes},0]}};const z_={};cr.DOMNormalisation.inlineElements.forEach(e=>{let t="";switch("math"!=e&&"mrow"!=e&&"mi"!=e&&"mo"!=e||(t="http://www.w3.org/1998/Math/MathML "),z_[e]={attrs:{originalAttributes:{default:{}}},parseDOM:[{tag:e,getAttrs:e=>B_(e)}],toDOM:n=>[t+e,{...n.attrs.originalAttributes},0],inclusive:!1,excludes:"",group:"inline"},e){case"code":z_[e].code=!0;break;case"a":z_[e].attrs={originalAttributes:{default:{},href:{validate:"string"},title:{default:null,validate:"string|null"}}}}});const q_=F_,$_=z_,H_=new class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=Dm.from(e.nodes),t.marks=Dm.from(e.marks||{}),this.nodes=Sg.compile(this.spec.nodes,this),this.marks=kg.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw new RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],r=t.spec.content||"",i=t.spec.marks;if(t.contentMatch=n[r]||(n[r]=ug.parse(r,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==i?null:i?Eg(this,i.split(" ")):""!=i&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:Eg(this,n.split(" "))}this.nodeFromJSON=e=>ag.fromJSON(this,e),this.markFromJSON=e=>zm.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Sg))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new lg(n,n.defaultAttrs,e,zm.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}({nodes:q_,marks:$_}),V_=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function W_(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const G_=(e,t,n)=>{let r=W_(e,n);if(!r)return!1;let i=K_(r);if(!i){let n=r.blockRange(),i=n&&lv(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(nx(e,i,t,-1))return!0;if(0==r.parent.content.size&&(J_(o,"end")||Uv.isSelectable(o)))for(let n=r.depth;;n--){let s=gv(e.doc,r.before(n),r.after(n),$m.empty);if(s&&s.slice.size<s.to-s.from){if(t){let n=e.tr.step(s);n.setSelection(J_(o,"end")?Nv.findFrom(n.doc.resolve(n.mapping.map(i.pos,-1)),-1):Uv.create(n.doc,i.pos-o.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||r.node(n-1).childCount>1)break}return!(!o.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)};function J_(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}function K_(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Z_(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}function Q_(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const X_=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function Y_(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ex=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof Uv&&e.selection.node.isBlock)return!(!n.parentOffset||!pv(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.depth)return!1;let i,o,s=[],a=!1,l=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){a=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),o=Y_(n.node(e-1).contentMatchAt(n.indexAfter(e-1)));let t=tx&&tx(r.parent,a,n);s.unshift(t||(a&&o?{type:o}:null)),i=e;break}if(1==e)return!1;s.unshift(null)}let c=e.tr;(e.selection instanceof Pv||e.selection instanceof Fv)&&c.deleteSelection();let u=c.mapping.map(n.pos),d=pv(c.doc,u,s.length,s);if(d||(s[0]=o?{type:o}:null,d=pv(c.doc,u,s.length,s)),!d)return!1;if(c.split(u,s.length,s),!a&&l&&n.node(i).type!=o){let e=c.mapping.map(n.before(i)),t=c.doc.resolve(e);o&&n.node(i-1).canReplaceWith(t.index(),t.index()+1,o)&&c.setNodeMarkup(c.mapping.map(n.before(i)),o)}return t&&t(c.scrollIntoView()),!0};var tx;function nx(e,t,n,r){let i,o,s=t.nodeBefore,a=t.nodeAfter,l=s.type.spec.isolating||a.type.spec.isolating;if(!l&&function(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!(!(r&&i&&r.type.compatibleContent(i.type))||(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!i.isTextblock&&!fv(e.doc,t.pos)||(n&&n(e.tr.join(t.pos).scrollIntoView()),0)))}(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(o=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&o.matchType(i[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,o=jm.empty;for(let e=i.length-1;e>=0;e--)o=jm.from(i[e].create(null,o));o=jm.from(s.copy(o));let l=e.tr.step(new iv(t.pos-1,r,t.pos,r,new $m(o,1,0),i.length,!0)),c=l.doc.resolve(r+2*i.length);c.nodeAfter&&c.nodeAfter.type==s.type&&fv(l.doc,c.pos)&&l.join(c.pos),n(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&l?null:Nv.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&lv(d);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(c&&J_(a,"start",!0)&&J_(s,"end")){let r=s,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let o=a,l=1;for(;!o.isTextblock;o=o.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=jm.empty;for(let e=i.length-1;e>=0;e--)r=jm.from(i[e].copy(r));n(e.tr.step(new iv(t.pos-i.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new $m(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function rx(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(Pv.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}const ix=rx(-1),ox=rx(1);function sx(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&cv(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}function ax(e,t=null){return function(n,r){let i=!1;for(let r=0;r<n.selection.ranges.length&&!i;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];n.doc.nodesBetween(o,s,(r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}})}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function lx(e,t=null,n){let r=!1!==(n&&n.removeWhenPresent),i=!1!==(n&&n.enterInlineAtoms),o=!(n&&n.includeWhitespace);return function(n,s){let{empty:a,$cursor:l,ranges:c}=n.selection;if(a&&!l||!function(e,t,n,r){for(let i=0;i<t.length;i++){let{$from:o,$to:s}=t[i],a=0==o.depth&&e.inlineContent&&e.type.allowsMarkType(n);if(e.nodesBetween(o.pos,s.pos,(e,t)=>{if(a||!r&&e.isAtom&&e.isInline&&t>=o.pos&&t+e.nodeSize<=s.pos)return!1;a=e.inlineContent&&e.type.allowsMarkType(n)}),a)return!0}return!1}(n.doc,c,e,i))return!1;if(s)if(l)e.isInSet(n.storedMarks||l.marks())?s(n.tr.removeStoredMark(e)):s(n.tr.addStoredMark(e.create(t)));else{let a,l=n.tr;i||(c=function(e){let t=[];for(let n=0;n<e.length;n++){let{$from:r,$to:i}=e[n];r.doc.nodesBetween(r.pos,i.pos,(e,n)=>{if(e.isAtom&&e.content.size&&e.isInline&&n>=r.pos&&n+e.nodeSize<=i.pos)return n+1>r.pos&&t.push(new Ov(r,r.doc.resolve(n+1))),r=r.doc.resolve(n+1+e.content.size),!1}),r.pos<i.pos&&t.push(new Ov(r,i))}return t}(c)),a=r?!c.some(t=>n.doc.rangeHasMark(t.$from.pos,t.$to.pos,e)):!c.every(t=>{let n=!1;return l.doc.nodesBetween(t.$from.pos,t.$to.pos,(r,i,o)=>{if(n)return!1;n=!e.isInSet(r.marks)&&!!o&&o.type.allowsMarkType(e)&&!(r.isText&&/^\s*$/.test(r.textBetween(Math.max(0,t.$from.pos-i),Math.min(r.nodeSize,t.$to.pos-i))))}),!n});for(let n=0;n<c.length;n++){let{$from:r,$to:i}=c[n];if(a){let n=r.pos,s=i.pos,a=r.nodeAfter,c=i.nodeBefore,u=o&&a&&a.isText?/^\s*/.exec(a.text)[0].length:0,d=o&&c&&c.isText?/\s*$/.exec(c.text)[0].length:0;n+u<s&&(n+=u,s-=d),l.addMark(n,s,e.create(t))}else l.removeMark(r.pos,i.pos,e)}s(l.scrollIntoView())}return!0}}function cx(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}let ux=cx(V_,G_,(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=K_(r)}let s=o&&o.nodeBefore;return!(!s||!Uv.isSelectable(s))&&(t&&t(e.tr.setSelection(Uv.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)}),dx=cx(V_,(e,t,n)=>{let r=Z_(e,n);if(!r)return!1;let i=Q_(r);if(!i)return!1;let o=i.nodeAfter;if(nx(e,i,t,1))return!0;if(0==r.parent.content.size&&(J_(o,"start")||Uv.isSelectable(o))){let n=gv(e.doc,r.before(),r.after(),$m.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(J_(o,"start")?Nv.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):Uv.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)},(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=Q_(r)}let s=o&&o.nodeAfter;return!(!s||!Uv.isSelectable(s))&&(t&&t(e.tr.setSelection(Uv.create(e.doc,o.pos)).scrollIntoView()),!0)});const hx={Enter:cx(X_,(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Fv||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Y_(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(Pv.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(pv(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&lv(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)},ex),"Mod-Enter":(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=Y_(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,s.createAndFill());i.setSelection(Nv.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},Backspace:ux,"Mod-Backspace":ux,"Shift-Backspace":ux,Delete:dx,"Mod-Delete":dx,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new Fv(e.doc))),!0)},px={"Ctrl-h":hx.Backspace,"Alt-Backspace":hx["Mod-Backspace"],"Ctrl-d":hx.Delete,"Ctrl-Alt-Backspace":hx["Mod-Delete"],"Alt-Delete":hx["Mod-Delete"],"Alt-d":hx["Mod-Delete"],"Ctrl-a":ix,"Ctrl-e":ox};for(let e in hx)px[e]=hx[e];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();for(var fx={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},mx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gx="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),vx="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),yx=0;yx<10;yx++)fx[48+yx]=fx[96+yx]=String(yx);for(yx=1;yx<=24;yx++)fx[yx+111]="F"+yx;for(yx=65;yx<=90;yx++)fx[yx]=String.fromCharCode(yx+32),mx[yx]=String.fromCharCode(yx);for(var bx in fx)mx.hasOwnProperty(bx)||(mx[bx]=fx[bx]);const wx="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),_x="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function xx(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let e=0;e<o.length-1;e++){let s=o[e];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))r=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);wx?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Sx(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Cx(e){let t=function(e){let t=Object.create(null);for(let n in e)t[xx(n)]=e[n];return t}(e);return function(e,n){let r,i=function(e){var t=!(gx&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||vx&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?mx:fx)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=t[Sx(i,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){let r=t[Sx(i,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(_x&&n.ctrlKey&&n.altKey)&&(r=fx[n.keyCode])&&r!=i){let i=t[Sx(r,n)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}function kx(e){e.preventDefault(),e.stopPropagation();const t=oh(Bi(e.target).language,{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}function Ex(e){e.preventDefault(),e.stopPropagation();const t=th(Bi(e.target).license,{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}function Ax(e){e.preventDefault(),e.stopPropagation();const t=function(e,t={}){return e?(t.class=t.class||"inbox",t.title="Inbox",ih([{href:e,rel:"ldp:inbox"}],t)):""}(Bi(e.target).inbox,{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}function Tx(e){e.preventDefault(),e.stopPropagation();const t=function(e,t={}){return e?(t.class=t.class||"in-reply-to",t.title="In reply to",ih([{href:e,rel:"as:inReplyTo"}],t)):""}(Bi(e.target)["in-reply-to"],{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}function Ix(e){e.preventDefault(),e.stopPropagation();const t=function(e,t={}){if(!e)return"";t.class=t.class||"publication-status";var n=cr.PublicationStatus[e].name||e;return t.title="Status",ih([{prefix:"pso: http://purl.org/spar/pso/",rel:"pso:holdsStatusInTime",resource:"#"+Ui(),child:{rel:"pso:withStatus",resource:e,typeOf:"pso:PublicationStatus",textContent:n}}],t)}(Bi(e.target)["publication-status"],{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}function Rx(e){e.preventDefault(),e.stopPropagation();const t=function(e,t={}){if(!e)return"";t.class=t.class||"resource-type";var n=cr.ResourceType[e].name||e;return t.title="Type",ih([{href:e,rel:"rdf:type",textContent:n}],t)}(Bi(e.target)["resource-type"],{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}function Lx(e){e.preventDefault(),e.stopPropagation();const t=function(e,t={}){return e?(t.class=t.class||"test-suite",t.title="Test Suite",ih([{href:e,rel:"spec:testSuite"}],t)):""}(Bi(e.target)["test-suite"],{});this.replaceSelectionWithFragment(Pi(t)),this.hideMenu()}class Nx{constructor(e){this.editorView=e,this.menuContainer=document.createElement("div"),this.menuContainer.id="document-slashmenu",this.menuContainer.classList.add("do","editor-slashmenu","editor-form"),this.menuContainer.style.display="none",this.menuContainer.style.position="absolute";const t={language:"Language",license:"License",inbox:"Inbox","in-reply-to":"In reply to","publication-status":"Status","resource-type":"Type","test-suite":"Test suite"};this.slashMenuButtons=["language","license","inbox","in-reply-to","publication-status","resource-type","test-suite"].map(e=>({button:e,dom:()=>Pi(mc({button:e,buttonTextContent:t[e]})).firstChild})),this.createMenuItems(),this.formHandlerLanguage=kx.bind(this),this.formHandlerLicense=Ex.bind(this),this.formHandlerInbox=Ax.bind(this),this.formHandlerInReplyTo=Tx.bind(this),this.formHandlerPublicationStatus=Ix.bind(this),this.formHandlerResourceType=Rx.bind(this),this.formHandlerTestSuite=Lx.bind(this),this.formEventListeners={language:[{event:"submit",callback:this.formHandlerLanguage},{event:"click",callback:e=>this.formClickHandler(e,"language")}],license:[{event:"submit",callback:this.formHandlerLicense},{event:"click",callback:e=>this.formClickHandler(e,"license")}],inbox:[{event:"submit",callback:this.formHandlerInbox},{event:"click",callback:e=>this.formClickHandler(e,"inbox")}],"in-reply-to":[{event:"submit",callback:this.formHandlerInReplyTo},{event:"click",callback:e=>this.formClickHandler(e,"in-reply-to")}],"publication-status":[{event:"submit",callback:this.formHandlerPublicationStatus},{event:"click",callback:e=>this.formClickHandler(e,"publication-status")}],"resource-type":[{event:"submit",callback:this.formHandlerResourceType},{event:"click",callback:e=>this.formClickHandler(e,"resource-type")}],"test-suite":[{event:"submit",callback:this.formHandlerTestSuite},{event:"click",callback:e=>this.formClickHandler(e,"test-suite")}]},document.body.appendChild(this.menuContainer),this.bindHideEvents()}showMenu(e,t){this.menuContainer.style.display="block",this.menuContainer.style.left=`${e}px`,this.menuContainer.style.top=`${t}px`;const n=this.menuContainer.querySelector("button"),r=e=>{"Tab"===e.key&&(e.preventDefault(),n?.focus(),document.removeEventListener("keydown",r))},i=e=>{"Escape"===e.key&&(this.hideMenu(),document.removeEventListener("keydown",i))};document.addEventListener("keydown",r),document.addEventListener("keydown",i)}hideMenu(){this.menuContainer.style.display="none",this.menuContainer.replaceChildren()}formClickHandler(e,t){var n=e.target.closest("button");if(n){var r=n.classList;"submit"!==n.type&&(e.preventDefault(),e.stopPropagation()),r.contains("editor-form-cancel")&&this.hideMenu()}}createMenuItems(){const e=document.createElement("ul");this.slashMenuButtons.forEach(({button:t,dom:n})=>{const r=this.createMenuItem(t,n);e.appendChild(r),r.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.handlePopups(t)})}),this.menuContainer.appendChild(e)}createMenuItem(e,t){const n=t();n.id="editor-button-"+e;document.createElement("span");const r=document.createElement("li");return r.appendChild(n),r}handlePopups(e){const t=Pi(`<form class="editor-form editor-form-active">${{language:this.createLanguageWidgetHTML(),license:this.createLicenseWidgetHTML(),inbox:this.createInboxWidgetHTML(),"in-reply-to":this.createInReplyToWidgetHTML(),"publication-status":this.createPublicationStatusWidgetHTML(),"resource-type":this.createResourceTypeWidgetHTML(),"test-suite":this.createTestSuiteWidgetHTML()}[e]}</form>`);this.openPopup(t,e)}createLanguageWidgetHTML(){return`\n      <fieldset>\n        <legend>Add a language</legend>\n        <label for="set-language">Language</label> <select class="editor-form-select" id="set-language" name="language" required="">${lh({selected:""})}</select>\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    `}createLicenseWidgetHTML(){return`\n      <fieldset>\n        <legend>Add a license</legend>\n        <label for="set-license">License</label> <select class="editor-form-select" id="set-language" name="license" required="">${ch({selected:""})}</select>\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    `}createInboxWidgetHTML(){return'\n      <fieldset>\n        <legend>Add an inbox</legend>\n        <label for="set-inbox">Inbox</label> <input class="editor-form-input" id="set-inbox" name="inbox" placeholder="https://example.net/inbox/" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URL\')" required="" type="url" value="" />\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    '}createInReplyToWidgetHTML(){return'\n      <fieldset>\n        <legend>Add an in reply to URL</legend>\n        <label for="set-in-reply-to">In reply to</label> <input class="editor-form-input" id="set-in-reply-to" name="in-reply-to" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URL\')" required="" type="url" value="" />\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    '}createPublicationStatusWidgetHTML(){var e,t,n;return`\n      <fieldset>\n        <legend>Add a publication status</legend>\n        <label for="set-publication-status">Publication status</label> <select class="editor-form-select" id="set-publication-status" name="publication-status" required="">${e={selected:""},t="",n="","selected"in(e=e||{})?""==(n=e.selected)&&(t+='<option selected="selected" value="">Choose a publication status</option>'):n=sd.pso.draft.value,Object.keys(cr.PublicationStatus).forEach(e=>{var r=e==n?' selected="selected"':"";t+='<option value="'+e+'" title="'+cr.PublicationStatus[e].description+'"'+r+">"+cr.PublicationStatus[e].name+"</option>"}),t}</select>\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    `}createResourceTypeWidgetHTML(){var e,t,n;return`\n      <fieldset>\n        <legend>Add a type</legend>\n        <label for="set-resource-type">Resource type</label> <select class="editor-form-select" id="set-resource-type" name="resource-type" required="">${e={selected:""},t="",n="","selected"in(e=e||{})?""==(n=e.selected)&&(t+='<option selected="selected" value="">Choose a resource type</option>'):n="http://schema.org/Article",Object.keys(cr.ResourceType).forEach(e=>{var r=e==n?' selected="selected"':"";t+='<option value="'+e+'" title="'+cr.ResourceType[e].description+'"'+r+">"+cr.ResourceType[e].name+"</option>"}),t}</select>\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    `}createTestSuiteWidgetHTML(){return'\n      <fieldset>\n        <legend>Add a test suite</legend>\n        <label for="set-test-suite">Test suite</label> <input class="editor-form-input" id="set-test-suite" name="test-suite" placeholder="https://example.net/test-suite" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URL\')" required="" type="url" value="" />\n        <div>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </div>\n      </fieldset>\n    '}openPopup(e,t){this.menuContainer.replaceChildren(),this.menuContainer.appendChild(e);const n=this.menuContainer.querySelector("form");this.formEventListeners[t]&&this.formEventListeners[t].forEach(({event:e,callback:t})=>{n.addEventListener(e,t)}),this.menuContainer.style.display="block",this.menuContainer.style.padding=0}replaceSelectionWithFragment(e){const{state:t,dispatch:n}=this.editorView,{selection:r,schema:i}=t,o=Pv.create(t.doc,Math.max(r.from-1,0),r.from);let s=Ag.fromSchema(i).parse(e);n(t.tr.setSelection(o).replaceSelectionWith(s))}bindHideEvents(){this.editorView.setProps({handleTextInput:(e,t,n,r)=>("/"!==r&&this.hideMenu(),!1),handleKeyDown:(e,t)=>("Escape"===t.key&&this.hideMenu(),!1)}),document.addEventListener("click",e=>{this.menuContainer.contains(e.target)||this.hideMenu()})}}let Ox;function Dx(e,t,n){return setTimeout(()=>function(e){const{selection:t}=e.state,{$from:n}=t;Ox=new Nx(e);const r=n.parent.textBetween(0,n.parentOffset,null,"\n");if("/"===r||" /"===r.substring(r.length-2)){const t=e.coordsAtPos(n.pos);Ox.showMenu(t.left,t.top)}else Ox.hideMenu()}(n),50),!1}const Mx=new Qv({props:{handleKeyDown:Cx({Backspace:function(e,t){const{selection:n}=e,{$from:r}=n;return"/"===r.parent.textBetween(0,r.parentOffset,null,"\n")&&Ox.hideMenu(),n.empty?G_(e,t):V_(e,t)},Enter:function(e,t){const{selection:n}=e,{$from:r}=n,{schema:i,tr:o}=e;let s,a=!1,l=!1,c=null;for(let e=r.depth;e>0;e--){s=r.node(e);var u=s.type.name.toLowerCase();if("pre"===u){a=!0;break}if("li"===u||"dt"===u||"dd"===u){l=!0,c=e;break}}if(a)return X_(e,t);if(l&&null!==c){let e=s.type;switch(s.type){case"li":e=s.type;break;case"dd":e=i.nodes.dt;break;case"dt":e=i.nodes.dd}const n=i.nodes.p,a=e.create({},n.create()),l=r.after(c);return o.insert(l,a),t(o.setSelection(Pv.create(o.doc,l+2))),!0}return ex(e,t)},"/":(e,t,n)=>Dx(0,0,n),"Mod-z":M_,"Mod-y":P_})}});function Px(e,t=null){return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o);if(!s)return!1;let a=r?n.tr:null;return!!function(e,t,n,r=null){let i=!1,o=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=s.resolve(t.start-2);o=new og(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new og(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let a=cv(o,n,r,t);if(!a)return!1;e&&function(e,t,n,r,i){let o=jm.empty;for(let e=n.length-1;e>=0;e--)o=jm.from(n[e].type.create(n[e].attrs,o));e.step(new iv(t.start-(r?2:0),t.end,t.start,t.end,new $m(o,0,0),n.length,!0));let s=0;for(let e=0;e<n.length;e++)n[e].type==i&&(s=e+1);let a=n.length-s,l=t.start+n.length-(r?2:0),c=t.parent;for(let n=t.startIndex,r=t.endIndex,i=!0;n<r;n++,i=!1)!i&&pv(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(n).nodeSize}(e,t,a,i,n);return!0}(a,s,e,t)&&(r&&r(a.scrollIntoView()),!0)}}function jx(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new iv(o-1,s,o,s,new $m(jm.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new og(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=lv(r);if(null==a)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(o,-1)-1);fv(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos);return t(i.scrollIntoView()),!0}(t,n,e,o):function(e,t,n){let r=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,o=n.startIndex;t>o;t--)e-=i.child(t).nodeSize,r.delete(e-1,e+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?jm.empty:jm.from(i))))return!1;let d=o.pos,h=d+s.nodeSize;return r.step(new iv(d-(a?1:0),h+(l?1:0),d+1,h-1,new $m((a?jm.empty:jm.from(i.copy(jm.empty))).append(l?jm.empty:jm.from(i.copy(jm.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,o)))}}function Ux(e,t,n,r,i){if("string"!=typeof n)throw new Error("getTextQuoteHTML: selectedContent is of type "+typeof n);if(!n.length)throw new Error("getTextQuoteHTML: selectedContent is empty");e=e||ji(),t=t||"oa:replying",r=r||"";var o=(i=i||{}).do?" do":"",s='<span class="ref'+o+'" rel="schema:hasPart" resource="#'+e+'" typeof="http://purl.org/dc/dcmitype/Text">',a="</span>";return"oa:highlighting"==t&&(s='<span class="ref'+o+'" rel="schema:hasPart" resource="#h-'+e+'" typeof="oa:Annotation"><span rel="oa:motivatedBy" resource="oa:highlighting"></span><span rel="oa:hasTarget" resource="#'+e+'" typeof="http://purl.org/dc/dcmitype/Text">',a="</span></span>"),s+('<mark datatype="rdf:HTML" id="'+e+'" property="rdf:value">'+n+"</mark>")+r+a}function Bx(e){return e?function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1}(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null}function Fx(e){const t=window.getSelection();t.removeAllRanges(),e&&e.forEach(({range:e})=>{t.addRange(e)})}function zx(e){const{action:t,id:n,datetime:r,selectionData:i,refId:o,refLabel:s,motivatedBy:a,targetIRI:l,resourceIRI:c,selectionLanguage:u,targetLanguage:d,formData:h,annotationInboxLocation:p,profile:f}=e,{tagging:m,content:g,language:v,license:y,"ref-type":b,url:w,about:_,resource:x,typeof:S,href:C,rel:k,property:E,datatype:A}=h;var T,I;let R={};if("https://www.w3.org/ns/activitystreams"===f)T="object";else T="write";switch(t){case"approve":case"disapprove":case"specificity":case"comment":R={type:t,mode:T,motivatedByIRI:a,id:n,canonical:"urn:uuid:"+n,refId:o,refLabel:s,creator:{},datetime:r,target:{iri:l,source:c,selector:{exact:i.selector.exact,prefix:i.selector.prefix,suffix:i.selector.suffix,language:u},language:d}};var L={value:g};v&&(R.language=v,L.language=v),y&&(R.rights=R.license=y,L.rights=L.license=y),R.body=[L].concat(wd(m)),cr.User.IRI&&(R.creator.iri=cr.User.IRI),cr.User.Name&&(R.creator.name=cr.User.Name),R.creator.image=cr.User.Image||Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"]),cr.User.URL&&(R.creator.url=cr.User.URL),p&&cr.User.TypeIndex&&cr.User.TypeIndex[ns.as.Announce.value]&&(R.inbox=cr.User.TypeIndex[ns.as.Announce.value]);break;case"bookmark":N="",R={type:t,mode:T,motivatedByIRI:a,id:n,canonical:"urn:uuid:"+n,refId:o,refLabel:s,creator:{},datetime:r,target:{iri:l,source:c,selector:{exact:i.selector.exact,prefix:i.selector.prefix,suffix:i.selector.suffix,language:u},language:d}};L={purpose:"describing",value:g};v&&(R.language=v,L.language=v),y&&(R.rights=R.license=y,L.rights=L.license=y),R.body=[L].concat(wd(m)),cr.User.IRI&&(R.creator.iri=cr.User.IRI),cr.User.Name&&(R.creator.name=cr.User.Name),R.creator.image=cr.User.Image||Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"]),cr.User.URL&&(R.creator.url=cr.User.URL),I=Ux(o,a,i.selectedContent,N,{do:!0});break;case"note":var N='<sup class="ref-comment"><a href="#'+n+'"rel="cito:isCitedBy">'+s+"</a></sup>";R={type:t,mode:"read",motivatedByIRI:a,id:n,canonical:"urn:uuid:"+n,refId:o,refLabel:s,creator:{},datetime:r,target:{iri:l,source:c,selector:{exact:i.selector.exact,prefix:i.selector.prefix,suffix:i.selector.suffix,language:u},language:d}};L={purpose:"describing",value:g};v&&(R.language=v,L.language=v),y&&(R.rights=R.license=y,L.rights=L.license=y),R.body=[L].concat(wd(m)),cr.User.IRI&&(R.creator.iri=cr.User.IRI),cr.User.Name&&(R.creator.name=cr.User.Name),R.creator.image=cr.User.Image||Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"]),cr.User.URL&&(R.creator.url=cr.User.URL),I=Ux(o,a,i.selectedContent,N),DO.Editor.replaceSelectionWithFragment(Pi(I));break;case"citation":switch(b){case"ref-footnote":default:N='<sup class="'+b+'"><a href="#'+n+'" rel="cito:isCitedBy">'+s+"</a></sup>",R={type:b,mode:T,motivatedByIRI:a,id:n,refId:o,refLabel:s,datetime:r,citationURL:w};L={value:g};v&&(R.language=v,L.language=v),y&&(R.rights=R.license=y,L.rights=L.license=y),R.body=[L];break;case"ref-reference":N='<span class="'+b+'">'+cr.RefType[cr.DocRefType].InlineOpen+'<a href="#'+n+'">'+s+"</a>"+cr.RefType[cr.DocRefType].InlineClose+"</span>"}I=Ux(o,a,i.selectedContent,N),DO.Editor.replaceSelectionWithFragment(Pi(I));break;case"semantics":R={about:_,typeOf:S,rel:k,href:C,resource:x,property:E,content:g,datatype:A,lang:v,textContent:i.selectedContent},I=fh(R,"expanded"),DO.Editor.replaceSelectionWithFragment(Pi(I))}return R}const qx=cr.ns;function $x(e){DO.U.shareResource(e)}function Hx(e,t){e.preventDefault(),e.stopPropagation(),Fx(this.selection);const n=window.getSelection(),r=Bx(n.getRangeAt(0)),i=Bi(e.target),o={selection:n,selector:this.getTextQuoteSelector(),selectedParentElement:r,selectedContent:this.getSelectionAsHTML()};!function(e,t){Object.entries(e).forEach(([e,n])=>{const r=t[e];cr.User.UI[e]={checked:!1},r&&(cr.User.UI[e].checked=r.checked)})}({annotationInboxLocation:i["annotation-inbox"],annotationLocationPersonalStorage:i["annotation-location-personal-storage"],annotationLocationService:i["annotation-location-service"]},i),function(e,t,n){const r=Vx(e,t,n),{annotationDistribution:i,...o}=r;let s,a;switch(e){case"approve":case"disapprove":case"specificity":case"bookmark":case"comment":i.forEach(t=>{const n={...o,...t};var i=zx(n);if(n.motivatedByIRI=i.motivatedByIRI,"profile"in n&&"https://www.w3.org/ns/activitystreams"==n.profile){var l=Gx(n,{relativeObject:!0});l.statements=bd(i),a=yd(l)}else a=bd(i);s=vd("",a),yh(n.containerIRI,n.id,s,n).catch(e=>{throw e}).then(e=>{var t=e.headers.get("Location");return t&&(t=gi(n.containerIRI,t),n.noteIRI=n.noteURL=t),function(e,t){if(!e.canonical)return Promise.resolve();return"profile"in e&&"https://www.w3.org/ns/activitystreams"==e.profile?DO.U.showActivities(e.noteIRI).catch(e=>(console.log("Error showing activities:",e),Promise.resolve())):DO.U.showActivities(e.noteIRI,t).catch(e=>(console.log("Error showing activities:",e),Promise.resolve()))}(n,r.options)}).then(()=>{if("bookmark"!=e)return function(e){const t=cr.DocumentURL;if(!e.canonical)return Promise.resolve();var n;n=e.annotationInbox?Promise.resolve([e.annotationInbox]):"inbox"in DO.C.Resource[t]&&DO.C.Resource[t].inbox.length?Promise.resolve(DO.C.Resource[t].inbox):getLinkRelation(qx.ldp.inbox.value,t).catch(()=>getLinkRelationFromRDF(qx.as.inbox.value,t));return n.catch(e=>{throw e}).then(t=>{if(t.length){var n=Gx(e,{announce:!0});return n.inbox=t[0],vh(n).catch(e=>{console.log("Error notifying the inbox:",e)})}})}(n,r.options)}).catch(e=>{})})}}(t,i,o),this.cleanupToolbar()}function Vx(e,t,n){const r={action:e,selectionData:n,id:Ui(),datetime:Ni(),resourceIRI:cr.DocumentURL,containerIRI:window.location.href,contentType:"text/html",options:{},annotationDistribution:[],formData:{},parentNodeWithId:n.selectedParentElement?.closest("[id]"),motivatedBy:cr.ActionToMotivation[e]||"oa:replying"};var i,o;return Object.entries(t).forEach(([t,n])=>{t.startsWith(`${e}-`)&&(r.formData[t.substring(e.length+1)]=n)}),"ref-footnote"==r.type?r.motivatedBy="oa:describing":"ref-reference"==r.type&&(r.motivatedBy="oa:linking"),r.refLabel=ph(r.motivatedBy),r.refId="r-"+r.id,r.targetIRI=r.parentNodeWithId?r.resourceIRI+"#"+r.parentNodeWithId.id:r.resourceIRI,r.latestVersion=DO.C.Resource[r.resourceIRI].graph.out(qx.rel["latest-version"]).values[0],r.latestVersion&&(r.resourceIRI=r.latestVersion,r.targetIRI=r.parentNodeWithId?r.latestVersion+"#"+r.parentNodeWithId.id:r.latestVersion,r.options.targetInMemento=!0),r.targetLanguage=xd(r.parentNodeWithId),r.selectionLanguage=xd(r.selectionData.selectedParentElement),r.selectorIRI=(i=r.resourceIRI,o=r.selectionData.selector,i=yi(i=i||window.location.href),o.type=o.type||"TextQuoteSelector",o.type,`${i}#selector(type=${o.type},prefix=${encodeURIComponent(o.prefix)},exact=${encodeURIComponent(o.exact)},suffix=${encodeURIComponent(o.suffix)})`),r.annotationDistribution=function(e,t){const{id:n,selectionData:r,formData:i}=t;let{containerIRI:o}=t;const{selectedParentElement:s}=r,a=function(e,t){if(!t)return;let n=null;const r=(e=e||document.body).closest(t);return r&&(n=r.querySelector('[rel="ldp:inbox"], [rel="as:inbox"]'),n&&(n=n.href||n.getAttribute("resource"),n=decodeURIComponent(n))),n}(s,'.do[typeof="oa:Annotation"]'),l=i["annotation-location-personal-storage"],c=i["annotation-location-service"];var u,d,h,p,f,m,g=[];let v=!1;const y=cr.ActionActivityIndex[e];if(l&&cr.User.TypeIndex||!l&&!c&&cr.User.TypeIndex){var b=cr.User.TypeIndex[qx.solid.publicTypeIndex.value];cr.User.TypeIndex[qx.solid.privateTypeIndex.value];if(b)Object.values(b).forEach(e=>{if(!v){var t=e[qx.solid.forClass.value],r=e[qx.solid.instanceContainer.value];e[qx.solid.instance.value];y?.includes(t)&&r&&(v=!0,o=r,d=h=o+n,p={},u={id:n,containerIRI:o,noteURL:d,noteIRI:h,fromContentType:f="text/html",contentType:m=f,canonical:!0,annotationInbox:a},g.push(u))}})}(l&&cr.User.Outbox||!l&&!c&&cr.User.Outbox)&&(o=cr.User.Outbox[0],d=h=o+n,p={"@context":["https://www.w3.org/ns/activitystreams",{oa:"http://www.w3.org/ns/oa#",schema:"http://schema.org/"}],profile:"https://www.w3.org/ns/activitystreams"},u={id:n,containerIRI:o,noteURL:d,noteIRI:h,fromContentType:f="text/html",contentType:m=f,annotationInbox:a},void 0!==cr.User.Storage||v||(u.canonical=!0),u=Object.assign(u,p),Wx(g,o)||g.push(u));!v&&(l&&cr.User.Storage||!l&&!c&&cr.User.Storage)&&(o=cr.User.Storage[0],d=h=o+n,p={},u={id:n,containerIRI:o,noteURL:d,noteIRI:h,fromContentType:f="text/html",contentType:m=f,canonical:!0,annotationInbox:a},Wx(g,o)||g.push(u));c&&void 0!==cr.AnnotationService&&(o=cr.AnnotationService,m=f="text/html",p={"@context":["http://www.w3.org/ns/anno.jsonld",{as:"https://www.w3.org/ns/activitystreams#",schema:"http://schema.org/"}],profile:"http://www.w3.org/ns/anno.jsonld"},!l&&c?(d=h=o+n,u={id:n,containerIRI:o,noteURL:d,noteIRI:h,fromContentType:f,contentType:m,canonical:!0,annotationInbox:a}):l?u={id:n,containerIRI:o,noteURL:d=o+n,noteIRI:h,fromContentType:f,contentType:m,annotationInbox:a}:(d=h=o+n,u={id:n,containerIRI:o,noteURL:d,noteIRI:h,fromContentType:f,contentType:m,canonical:!0,annotationInbox:a}),u=Object.assign(u,p),Wx(g,o)||g.push(u));return g}(e,r),r}function Wx(e,t){return Object.keys(e).some(n=>e[n].containerIRI==t)}function Gx(e,t={}){const{id:n,targetIRI:r,formData:i,action:o}=e;var s=t.relativeObject?"#"+n:e.noteIRI,a='    <dl about="'+s+'">\n<dt>Object type</dt><dd><a about="'+s+'" typeof="oa:Annotation" href="'+qx.oa.Annotation.value+'">Annotation</a></dd>\n<dt>Motivation</dt><dd><a href="'+DO.C.Prefixes[e.motivatedByIRI.split(":")[0]]+e.motivatedByIRI.split(":")[1]+'" property="oa:motivation">'+e.motivatedByIRI.split(":")[1]+"</a></dd>\n</dl>\n",l={slug:n,license:i.license,statements:a};if(t.announce)l.type=["as:Announce"],l.object=s,l.inReplyTo=r;else switch(o){default:case"comment":case"specificity":l.type=["as:Create"],l.object=s,l.inReplyTo=r;break;case"approve":l.type=["as:Like"],l.object=r,l.context=s;break;case"disapprove":l.type=["as:Dislike"],l.object=r,l.context=s;break;case"bookmark":l.type=["as:Add"],l.object=s,l.target=e.containerIRI}return l}function Jx(e){e.preventDefault(),e.stopPropagation();const t=Bi(e.target),n=t["a-href"],r=t["a-title"],i=r?{href:n,title:r}:{href:n};this.updateMarkWithAttributes(H_,"a",i)(this.editorView.state,this.editorView.dispatch),this.clearToolbarForm(e.target),this.clearToolbarButton("a")}function Kx(e){e.preventDefault(),e.stopPropagation();const t=Bi(e.target);console.log(t);const n={cite:t["blockquote-cite"]};console.log(n),function(e,t){return(n,r)=>{const{nodes:i}=e,{$from:o}=n.selection,s=i.blockquote;return console.log(t),o.node().type===s?(console.log(i.p),sx(i.p,t)(n,r)):(console.log(s),sx(s,t)(n,r))}}(H_,n)(this.editorView.state,this.editorView.dispatch),this.clearToolbarForm(e.target),this.clearToolbarButton("blockquote")}function Zx(e){e.preventDefault(),e.stopPropagation();const t=Bi(e.target),n=t["img-src"],r=t["img-alt"],i=t["img-figcaption"];let o,s;const a=e.target.querySelector(".img-preview"),l=a.querySelector("img[src]");l&&(o=l.width,s=l.height);const c={alt:r,...null!=s?{height:s}:{},src:n,...null!=o?{width:o}:{},title:i};this.insertImage(c)(this.editorView.state,this.editorView.dispatch),a.replaceChildren(),this.clearToolbarForm(e.target),this.clearToolbarButton("img")}function Qx(e){e.preventDefault(),e.stopPropagation();const t={cite:Bi(e.target)["q-cite"]};this.updateMarkWithAttributes(H_,"q",t)(this.editorView.state,this.editorView.dispatch),this.clearToolbarForm(e.target),this.clearToolbarButton("q")}function Xx(e,t){e.preventDefault(),e.stopPropagation();const n=window.getSelection(),r=Bx(n.getRangeAt(0));tS(t,Bi(e.target),{selection:n,selector:this.getTextQuoteSelector(),selectedParentElement:r,selectedContent:this.getSelectionAsHTML()}),this.clearToolbarForm(e.target),this.clearToolbarButton("note")}function Yx(e,t){e.preventDefault(),e.stopPropagation(),Fx(this.selection);const n=window.getSelection(),r=Bx(n.getRangeAt(0));tS(t,Bi(e.target),{selection:n,selector:this.getTextQuoteSelector(),selectedParentElement:r,selectedContent:this.getSelectionAsHTML()}),this.clearToolbarForm(e.target),this.clearToolbarButton("citation")}function eS(e,t){e.preventDefault(),e.stopPropagation();const n={};Fx(this.selection);const r=Bi(e.target);Object.entries(r).forEach(([e,r])=>{e.startsWith(`${t}-`)&&(n[e.substring(t.length+1)]=r)});let{element:i,attrs:o}=function(e){let t=e.about,n=e.resource,r=e.typeof,i=e.rel,o=e.property,s=e.href,a=e.content,l=e.lang,c=e.datatype,u=Ui();t=t||"#"+u,o=o||"rdfs:label";let d=l;return c=l?void 0:c,{element:"datatype"in e&&"xsd:dateTime"==e.datatype?"time":""==s?"span":"a",attrs:{id:u,about:t,resource:n,typeof:r,rel:i,property:o,href:s,content:a,lang:l,"xml:lang":d,datatype:c}}}(n);o=Object.fromEntries(Object.entries(o).filter(([e,t])=>t)),this.updateMarkWithAttributes(H_,i,o)(this.editorView.state,this.editorView.dispatch),this.clearToolbarForm(e.target),this.clearToolbarButton("semantics")}function tS(e,t,n){const r=Vx(e,t,n),{id:i,refId:o,formData:s}=r;var a,l;switch(a=zx(r),e){case"note":l=Pi(`\n        <aside class="note">\n          ${bd(a)}\n        </aside>\n      `),DO.Editor.insertFragmentInNode(l),DO.U.positionNote(o,i);break;case"citation":let{"ref-type":e,url:t,relation:n,content:r,language:c}=s;switch(e){case"ref-footnote":default:l=Pi(`\n            <aside class="note">\n              ${bd(a)}\n            </aside>\n          `),DO.Editor.insertFragmentInNode(l),DO.U.positionNote(o,i);break;case"ref-reference":let e={};t=t.trim(),e.citationId=t,e.refId=o,e.citationRelation=n,DO.U.getCitation(t,e).then(n=>{var r=t;Vi(t)?r=n.term.value:t.match(/^10\.\d+\//)&&(r="http://dx.doi.org/"+t),r=r.replace(/(https?:\/\/(dx\.)?doi\.org\/)/i,"http://dx.doi.org/");var o=DO.U.getCitationHTML(n,r,e),s=document.querySelector("#references");Qd(s?.querySelector("dl, ol, ul")||s,i,o),e.showRobustLinksDecoration=!0;var a=n.node(lr.namedNode(r)),l=Uo(a);if(l||(a=n.node(lr.namedNode(yi(r)))),l=Uo(a)){var c=l[0],u=location.href.split(location.search||location.hash||/[?#]/)[0]+"#"+e.refId,d=`\n                  <dl about="${u}">\n                    <dt>Action</dt><dd>Citation</dd>\n                    <dt>Cited by</dt><dd><a href="${u}">${u}</a></dd>\n                    <dt>Citation type</dt><dd><a href="${t}">${cr.Citation[e.citationRelation]}</a></dd>\n                    <dt>Cites</dt><dd><a href="${t}" property="${e.citationRelation}">${t}</a></dd>\n                  </dl>\n                `;vh({type:["as:Announce"],inbox:c,object:u,target:t,statements:d})}else a=n.node(lr.namedNode(e.citationId))})}}}const nS=cr.ns;class rS{constructor(e,t,n){this.mode=e,this.toolbarCommands=this.getToolbarCommands(),this.toolbarPopups=this.getToolbarPopups(),this.selection=null,this.buttons=t.map(e=>({button:e,command:this.toolbarCommands[e],dom:()=>Pi(mc({button:e})).firstChild})),this.populateForms=this.getPopulateForms(),this.formHandlers=this.getFormHandlers(),this.formLegends=this.getFormLegends(),this.bindFormHandlers(),this.formEventListeners=this.getFormEventListeners(),this.toolbarButtonEventListeners=this.getFormEventListeners(),this.toolbarButtonClickHandlers=this.getToolbarButtonClickHandlers(),this.editorView=n,this.documentBody=n?.dom.parentNode??document.body,this.dom=document.createElement("div"),this.dom.id="document-editor",this.dom.className="do editor-toolbar editor-form-view-transition",this.addToolbar(),this.selectionHandler=e=>this.selectionUpdate(n),this.updateToolbarVisibilityHandler=e=>this.updateToolbarVisibility(e),document.removeEventListener("keyup",this.selectionHandler),document.removeEventListener("mouseup",this.selectionHandler),document.addEventListener("keyup",this.selectionHandler),document.addEventListener("mouseup",this.selectionHandler),this.updateToolbarVisibility=this.updateToolbarVisibility.bind(this),this.formClickHandler=this.formClickHandler.bind(this),this.selectionUpdate=this.selectionUpdate.bind(this),document.removeEventListener("mousedown",this.updateToolbarVisibilityHandler),document.addEventListener("mousedown",this.updateToolbarVisibilityHandler)}initializeButtons(e){e.forEach(({button:e,command:t,dom:n})=>{const r=this.createButtonNode(e,n),i=document.createElement("li");i.appendChild(r),document.querySelector(".editor-form-actions").appendChild(i),this.updateButtonState(H_,r,e,this.editorView),this.setupPopup(e),this.attachButtonHandler(r,e,t)})}createButtonNode(e,t){const n=t();return n.id="editor-button-"+e,n}setupPopup(e){const t=this.toolbarPopups[e];if(!t)return;const n=document.createElement("form");n.classList.add("editor-form"),n.id="editor-form-"+e,n.appendChild(Pi(`${t({button:e,legend:this.formLegends[e]})}`)),this.dom.appendChild(n),this.formEventListeners[e]&&this.formEventListeners[e].forEach(({event:e,callback:t})=>{n.addEventListener(e,t)})}attachButtonHandler(e,t,n){const r=this.toolbarButtonClickHandlers[t]||(r=>{r.preventDefault(),r.stopPropagation(),this.signInRequired(t)&&this.checkAnnotationServiceUpdateForm(t),this.toggleButtonState(e,t,n),this.handlePopups(t)});e.addEventListener("click",r)}toggleButtonState(e,t,n){this.editorView?.focus(),e.classList.toggle("editor-button-active"),n&&n(this.editorView.state,this.editorView.dispatch,this.editorView),this.buttons.forEach(({button:e})=>{const n=this.dom.querySelector(`#editor-button-${e}`);this.toolbarPopups[e]?e!==t&&n.classList.remove("editor-button-active"):this.updateButtonState(H_,n,e,this.editorView)})}handlePopups(e){if(!this.toolbarPopups[e])return;const t=this.dom.querySelector(`#editor-form-${e}`);if(this.closeOtherPopups(e),this.populateForms[e]){const n=this.editorView?.state;this.populateForms[e](e,t,n)}t.classList.toggle("editor-form-active"),this.positionPopup(t);const n=t.querySelector(`textarea#${e}-content`),r=t.querySelector("input");n?n.focus():r.focus();const i=this.dom.querySelector(`#editor-button-${e}`),o=n=>{"Escape"===n.key&&(this.clearToolbarForm(t),this.clearToolbarButton(e),document.removeEventListener("keydown",o),i.focus())};document.addEventListener("keydown",o)}closeOtherPopups(e){this.buttons.forEach(({button:t})=>{t!==e&&this.toolbarPopups[t]&&this.dom.querySelector(`#editor-form-${t}`).classList.remove("editor-form-active")})}positionPopup(e){const t=this.dom.offsetHeight,n=this.dom.offsetWidth,r=window.getSelection().getRangeAt(0).getBoundingClientRect();e.style.left=n/2-e.offsetWidth/2+"px",e.style.right="initial",r.top>=t+20&&window.innerHeight-r.bottom>=e.offsetHeight+20?e.style.top=`${t+r.height+15}px`:r.top>=t+e.offsetHeight+20?e.style.top=`-${e.offsetHeight+5}px`:e.style.top=`${t+5}px`}replaceSelectionWithFragment(){}getSelectionAsHTML(){}getToolbarPopups(){return{}}getToolbarCommands(){return{}}getFormHandlers(){return[]}getFormLegends(){return{}}bindFormHandlers(){this.getFormHandlers().forEach(e=>{this[e.name]=e.fn.bind(this)})}getToolbarButtonClickHandlers(){return{}}getFormEventListeners(){return{}}updateToolbarVisibility(){}addToolbar(){const e=document.getElementById("document-editor");e&&e.remove();var t=document.querySelector(".editor-form-actions");t&&t.parentNode.removeChild(t);const n=this.dom.getElementsByClassName("editor-form");Array.from(n).forEach(e=>{this.dom.removeChild(e)}),this.ul=document.createElement("ul"),this.ul.classList.add("editor-form-actions"),this.dom.appendChild(this.ul),document.body.appendChild(this.dom),this.initializeButtons(this.buttons)}getPopulateForms(){return{}}signInRequired(e){}cleanupToolbar(){this.dom.classList.remove("editor-form-active"),this.buttons.forEach(({button:e})=>{if(this.clearToolbarButton(e),this.toolbarPopups[e]){const t=document.querySelector("#editor-form-"+e+".editor-form-active");t&&this.clearToolbarForm(t)}})}updateToolbarVisibility(){}updateButtonState(){}isSelectionInDoNode(){const e=window.getSelection();if(!e.rangeCount)return!1;return Bx(e.getRangeAt(0)).closest(".do")}update(e){}selectionUpdate(e){if(this.isSelectionInDoNode())return;const t=window.getSelection();if(!(t&&!t.isCollapsed))return;if(!t.rangeCount||!t.toString().length||10===t.toString().charCodeAt(0))return;if(!this.isSelectionsStartEndRangesWithinSameParent(t))return;this.selection=function(){const e=window.getSelection();if(!e.rangeCount)return null;const t=[];for(let n=0;n<e.rangeCount;n++){const r=e.getRangeAt(n).cloneRange(),i=r.cloneContents();t.push({range:r,fragment:i})}return t}();const n=t.getRangeAt(0).getBoundingClientRect(),r=this.dom.offsetHeight,i=this.dom.offsetWidth,o=this.dom.querySelector("button"),s=!(this.dom.classList.contains("editor-form-active")||o===document.activeElement);if(this.dom.classList.add("editor-form-active"),this.dom.style.left=n.left+n.width/2-i/2+"px",this.dom.classList.remove("toolbar-arrow-over","toolbar-arrow-under"),n.top>=r+20?(this.dom.style.top=n.top+window.scrollY-r-10+"px",this.dom.classList.add("toolbar-arrow-under")):(this.dom.style.top=`${n.bottom+window.scrollY+10}px`,this.dom.classList.add("toolbar-arrow-over")),this.dom.style.right="initial",s){const e=t=>{if("Tab"===t.key){const n=document.querySelectorAll(".editor-form");if(Array.from(n).filter(e=>e.classList.contains("editor-form-active"))[0])return;t.preventDefault();this.dom.querySelector(".edito          ive")||o?.focus(),document.removeEventListener("keydown",e)}};document.addEventListener("keydown",e)}const a=e=>{if("Escape"===e.key){const e=document.querySelectorAll(".editor-form");if(Array.from(e).filter(e=>e.classList.contains("editor-form-active"))[0])return;this.dom.classList.remove("editor-form-active"),this.clearSelection(),document.removeEventListener("keydown",a)}};document.addEventListener("keydown",a)}isSelectionsStartEndRangesWithinSameParent(e){return(e=e||window.getSelection()).getRangeAt(0).startContainer.parentNode===e.getRangeAt(e.rangeCount-1).endContainer.parentNode}clearToolbarButton(e){const t=this.dom.querySelector("#"+("editor-button-"+e));this.toolbarPopups[e]&&t.classList.remove("editor-button-active"),this.updateButtonState(H_,t,e,this.editorView)}clearToolbarForm(e){e.classList.remove("editor-form-active"),e.removeAttribute("style"),e.reset()}formClickHandler(e,t){var n=e.target.closest("button");if(n){var r=n.classList;if("submit"!==n.type&&(e.preventDefault(),e.stopPropagation()),r.contains("editor-form-cancel")){const e=n.closest("form");this.clearToolbarForm(e),this.clearToolbarButton(t)}}}signInRequired(e){return{approve:!0,disapprove:!0,specificity:!0,bookmark:!0,comment:!0}[e]}checkAnnotationServiceUpdateForm(e){_o(nS.oa.annotationService.value,null,fd()).then(t=>{cr.AnnotationService=t[0],oS(e)}).catch(t=>{this.signInRequired(e)&&!cr.User.IRI?td():oS(e)})}showTextQuoteSelectorFromLocation(e){var t="oa:highlighting",n=function(e){var t=/#selector\(type=TextQuoteSelector,(.*)\)/;const n=e.hash.match(t);if(n){var r=n[1].split(","),i={type:"TextQuoteSelector"};return r.forEach(e=>{var t=e.split("=");if(2==t.length)switch(t[0]){case"prefix":i.prefix=decodeURIComponent(t[1]);break;case"exact":i.exact=decodeURIComponent(t[1]);break;case"suffix":i.suffix=decodeURIComponent(t[1])}}),i}}(document.location);if(n&&n.exact&&n.exact.length){var r=document.location.hash.substring(1);if(document.getElementById(r))return;var i=ph(t);e=e||gd(document);var o='<sup class="ref-highlighting"><a rel="oa:hasTarget" href="#'+r+'">'+i+"</a></sup>";this.importTextQuoteSelector(e,n,r,t,o,{do:!0,mode:"#selector"})}}importTextQuoteSelector(e,t,n,r,i,o){var s=e.textContent;o=o||{};var a,l=t.prefix||"",c=t.exact||"",u=t.suffix||"",d=Mi(l.toString()+c.toString()+u.toString());return Hi(s,new RegExp(d,"g")).forEach(t=>{var s=t.index,u=s+l.length,d=s+l.length+c.length,h={start:u,end:d},p=Ux(n,r,c,i,o);!function(e,t,n){const r=document.createRange(),i=window.getSelection();let o=0;!function n(i){if(i.nodeType===Node.TEXT_NODE){let n=o+i.textContent.length;o<=e&&n>=e&&r.setStart(i,e-o),o<=t&&n>=t&&r.setEnd(i,t-o),o=n}else for(let e=0;e<i.childNodes.length;e++)n(i.childNodes[e])}(n),i.removeAllRanges(),i.addRange(r)}(u,d,e);var f=(h=window.getSelection()).getRangeAt(0);h.removeAllRanges(),h.addRange(f),f.collapse(!0),a=f.commonAncestorContainer.parentNode;for(var m=f.commonAncestorContainer.nodeValue,g=Pi(m.substr(0,f.startOffset)+p+m.substr(f.startOffset+c.length)),v=0;v<a.childNodes.length;v++){var y=a.childNodes[v];3===y.nodeType&&y.nodeValue===m&&a.replaceChild(g,y)}}),a}destroy(){this.documentBody.querySelector("#document-editor")&&(this.documentBody.removeChild(this.dom),document.removeEventListener("selectionchange",this.selectionHandler))}}function iS(e){return`\n    <fieldset>\n      <legend>${e.legend}</legend>\n      <dl class="info">\n        <dt class="required">*</dt>\n        <dd>Required field</dd>\n      </dl>\n      <label for="${e.button}-content">Note</label>\n      <textarea class="editor-form-textarea" cols="20" id="${e.button}-content" name="${e.button}-content" placeholder="${e.placeholder?e.placeholder:"What do you think?"}" required="" rows="5"></textarea>\n      <label for="${e.button}-tagging">Tags</label> <input class="editor-form-input" id="${e.button}-tagging" name="${e.button}-tagging" placeholder="Separate tags with commas" />\n      <label for="${e.button}-language">Language</label>\n      <select class="editor-form-select" id="${e.button}-language" name="${e.button}-language">${lh()}</select>\n      <label for="${e.button}-license">License</label>\n      <select class="editor-form-select" id="${e.button}-license" name="${e.button}-license">${ch()}</select>\n      <span class="annotation-location-selection">${ah(e.button)}</span>\n      <span class="annotation-inbox">${sh(e.button)}</span>\n\n      <button class="editor-form-submit" title="Post" type="submit">Post</button>\n      <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n    </fieldset>\n  `}function oS(e){for(var t=document.querySelectorAll(".do.editor-toolbar .annotation-location-selection"),n=0;n<t.length;n++)t[n].replaceChildren(Pi(ah(e)))}cr.ns;class sS extends rS{constructor(e,t,n){super(e,t,n),this.editorView=n}getFormEventListeners(){return{a:[{event:"submit",callback:this.formHandlerA},{event:"click",callback:e=>this.formClickHandler(e,"a")}],q:[{event:"submit",callback:this.formHandlerQ},{event:"click",callback:e=>this.formClickHandler(e,"q")}],blockquote:[{event:"submit",callback:this.formHandlerBlockquote},{event:"click",callback:e=>this.formClickHandler(e,"blockquote")}],img:[{event:"submit",callback:this.formHandlerImg},{event:"click",callback:e=>this.formClickHandler(e,"img")}],semantics:[{event:"submit",callback:e=>this.formHandlerSemantics(e,"semantics")},{event:"click",callback:e=>this.formClickHandler(e,"semantics")}],citation:[{event:"submit",callback:e=>this.formHandlerCitation(e,"citation")},{event:"click",callback:e=>this.formClickHandler(e,"citation")}],note:[{event:"submit",callback:e=>this.formHandlerAnnotate(e,"note")},{event:"click",callback:e=>this.formClickHandler(e,"note")}]}}getFormHandlers(){return[{name:"formHandlerA",fn:Jx},{name:"formHandlerQ",fn:Qx},{name:"formHandlerBlockquote",fn:Kx},{name:"formHandlerImg",fn:Zx},{name:"formHandlerCitation",fn:Yx},{name:"formHandlerSemantics",fn:eS},{name:"formHandlerAnnotate",fn:Xx}]}getToolbarCommands(){return{p:ax(H_.nodes.p),h1:lS(H_,1),h2:lS(H_,2),h3:lS(H_,3),h4:lS(H_,4),em:lx(H_.marks.em),strong:lx(H_.marks.strong),ul:cS(H_,"ul"),ol:cS(H_,"ol"),pre:ax(H_.nodes.pre),code:lx(H_.marks.code)}}getFormLegends(){return{note:"Add note"}}getToolbarPopups(){return{a:e=>'\n        <fieldset>\n          <legend>Add a link</legend>\n          <dl class="info">\n            <dt class="required">*</dt>\n            <dd>Required field</dd>\n          </dl>\n          <label for="a-href">URL</label> <input class="editor-form-input" id="a-href" name="a-href" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URL\')" required="" type="url" value="" />\n          <label for="a-title">Title</label> <input class="editor-form-input" id="a-title" name="a-title" placeholder="Add advisory information for the tooltip." type="text" />\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </fieldset>\n      ',blockquote:e=>'\n        <fieldset>\n          <legend>Add the source of the blockquote</legend>\n          <label for="blockquote-cite">URL</label> <input class="editor-form-input" id="blockquote-cite" name="blockquote-cite" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URL\')" type="url" value="" />\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </fieldset>\n      ',q:e=>'\n        <fieldset>\n          <legend>Add the source of the quote</legend>\n          <label for="q-cite">URL</label> <input class="editor-form-input" id="q-cite" name="q-cite" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URL\')" type="url" value="" />\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </fieldset>\n      ',img:e=>'\n        <fieldset>\n          <legend>Add an image with a description</legend>\n          <figure class="img-preview"></figure>\n          <label for="img-file">Upload</label> <input class="editor-form-input" id="img-file" name="img-file" type="file" />\n          <label for="img-src">URL</label> <input class="editor-form-input" id="img-src" name="img-src" type="url" value="" />\n          <label for="img-alt">Description</label> <input class="editor-form-input" id="img-alt" name="img-alt" placeholder="Describe the image for people who are blind or have low vision." type="text" value="" />\n          <label for="img-figcaption">Caption</label> <input class="editor-form-input" id="img-figcaption" name="img-figcaption" placeholder="A caption or legend for the figure." type="text" value="" />\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </fieldset>\n      ',note:e=>iS(e),citation:e=>`\n        <fieldset>\n          <legend>Add a citation</legend>\n          <label for="citation-specref-search">Search <a href="https://www.specref.org/" rel="noopener" target="_blank">specref.org</a></label> <input class="editor-form-input" id="citation-specref-search" name="citation-specref-search" placeholder="Enter terms to search for specifications" type="text" value="" />\n          <input id="citation-specref-search-submit" name="citation-specref-search-submit" type="submit" value="Search" />\n          <span>\n          <input id="ref-footnote" name="citation-ref-type" type="radio" value="ref-footnote" /> <label for="ref-footnote">Footnote</label>\n          <input id="ref-reference" name="citation-ref-type" type="radio" value="ref-reference" /> <label for="ref-reference">Reference</label>\n          </span>\n          <label for="citation-relation">Relation</label>\n          <select class="editor-form-select" id="citation-relation" name="citation-relation">${function(e){e=e||"cites";var t="";return Object.keys(cr.Citation).forEach(e=>{t+='<option value="'+e+'">'+cr.Citation[e]+"</option>"}),t}()}</select>\n          <label for="citation-url">URL</label>\n          <input class="editor-form-input" id="citation-url" name="citation-url" pattern="https?://.+" placeholder="Paste or type a link (URL)" oninput="setCustomValidity('')" oninvalid="setCustomValidity('Please enter a valid URL')" type="url" value="" />\n          <label for="citation-content">Note</label>\n          <textarea class="editor-form-textarea" cols="20" id="citation-content" name="citation-content" rows="1" placeholder="${e.placeholder?e.placeholder:"Describe the purpose or reason of citation."}"></textarea>\n          <label for="citation-language">Language</label>\n          <select class="editor-form-select" id="citation-language" name="citation-language">${lh()}</select>\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n          <div class="specref-search-results"></div>\n        </fieldset>\n      `,semantics:e=>'\n        <fieldset>\n          <legend>Add semantics</legend>\n          <label for="semantics-about">about</label> <input class="editor-form-input" id="semantics-about" name="semantics-about" placeholder="Enter URL, e.g., https://example.net/foo#bar" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URI\')" type="url" value="" />\n          <label for="semantics-resource">resource</label> <input class="editor-form-input" id="semantics-resource" name="semantics-resource" placeholder="Enter URL, e.g., https://example.net/foo#bar" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URI\')" type="url" value="" />\n          <label for="semantics-typeof">typeof</label> <input class="editor-form-input" id="semantics-typeof" name="semantics-typeof" placeholder="Enter URL, e.g., https://example.net/foo#Baz" oninput="setCustomValidity(\'\')" oninvalid="setCustomValidity(\'Please enter a valid URI\')" type="url" value="" />\n          <label for="semantics-rel">rel</label> <input class="editor-form-input" id="semantics-rel" name="semantics-rel" placeholder="schema:url" type="text" value="" />\n          <label for="semantics-property">property</label> <input class="editor-form-input" name="semantics-property" id="semantics-property" placeholder="schema:name" type="text" value="" />\n          <label for="semantics-href">href</label> <input class="editor-form-input" id="semantics-href" name="semantics-href" placeholder="Enter URL, e.g., https://example.net/foo" type="url" value="" />\n          <label for="semantics-content">content</label> <input class="editor-form-input" id="semantics-content" name="semantics-content" placeholder="Enter content, e.g., \'Baz\'" type="text" value="" />\n          <label for="semantics-lang">lang</label> <input class="editor-form-input" name="semantics-lang" id="semantics-lang" placeholder="Enter language code, e.g., en" type="text" value="" />\n          <label for="semantics-datatype">datatype</label> <input class="editor-form-input" name="semantics-datatype" id="semantics-datatype" placeholder="Enter URL, e.g., https://example.net/qux" type="text" value="" />\n          <button class="editor-form-submit" title="Save" type="submit">Save</button>\n          <button class="editor-form-cancel" title="Cancel" type="button">Cancel</button>\n        </fieldset>\n      '}}update(e){this.selectionUpdate(e);const t=window.getSelection();t&&!t.isCollapsed||this.dom.classList.contains("editor-form-active")&&this.cleanupToolbar()}updateToolbarVisibility(e){!this.dom.classList.contains("editor-form-active")||e.target.closest(".do")||"file"===e.target.closest("input[type]")?.type||this.editorView.dom.contains(e.target)||this.cleanupToolbar()}insertImage(e){return(t,n)=>{const{schema:r,tr:i}=t,o=r.nodes.img.create({originalAttributes:e});return i.replaceSelectionWith(o),n(i),!0}}clearSelection(){const{state:e,dispatch:t}=this.editorView,{tr:n}=e,r=e.selection.from;t(n.setSelection(Pv.create(e.doc,r)))}getTextQuoteSelector(){const e=this.editorView,{selection:t,doc:n}=e.state,{from:r,to:i}=t,o=cr.ContextLength;var s=n.textBetween(r,i);e.domAtPos(r).node.parentNode;let a=n.textBetween(r-o,r);a=ad(a);let l=n.textBetween(i,i+o);return l=ad(l),{type:"TextQuoteSelector",exact:s,prefix:a,suffix:l}}getSelectionAsHTML(){const e=this.editorView.state.tr,{selection:t,doc:n}=e;if(!(t instanceof Pv)||t.empty)return;const{from:r,to:i}=t,o=n.slice(r,i),s=jg.fromSchema(n.type.schema).serializeFragment(o.content);return(new XMLSerializer).serializeToString(s)}replaceSelectionWithFragment(e){const{state:t,dispatch:n}=this.editorView,{selection:r,schema:i}=t;let o=Ag.fromSchema(i).parseSlice(e);n(t.tr.replaceSelection(o))}insertFragmentInNode(e){const{state:t,dispatch:n}=this.editorView,{selection:r}=t,i=function(e){const{from:t}=e.state.selection;function n(t){let n=t.before(),r=e.state.doc.nodeAt(n);for(;r;){var i=r.type.name.toLowerCase();if("section"===i)return n+r.nodeSize;if(["div","article","main","body"].includes(i))return n+r.nodeSize;n=e.state.doc.resolve(n).before(),r=e.state.doc.nodeAt(n)}return null}return n(e.state.doc.resolve(t))}(this.editorView);let o=Ag.fromSchema(H_).parse(e);console.log(o),n(t.tr.insert(i,o))}updateMarkWithAttributes(e,t,n){return(r,i)=>{Object.fromEntries(Object.entries(n).filter(([e,t])=>t.length||j_.includes(e)));const{tr:o,selection:s}=this.editorView.state,{$from:a,$to:l}=s,c=e.marks[t];if(!c)return!1;return aS(r,e.marks[t])&&o.removeMark(a.pos,l.pos,c),o.addMark(a.pos,l.pos,c.create({originalAttributes:n})),i&&i(o),!0}}clearToolbarButton(e){const t=this.dom.querySelector("#"+("editor-button-"+e));this.toolbarPopups[e]&&t.classList.remove("editor-button-active"),this.updateButtonState(H_,t,e,this.editorView)}clearToolbarForm(e){e.classList.remove("editor-form-active"),e.removeAttribute("style"),e.reset(),this.editorView.focus()}populateFormImg(e,t,n){const r=t.querySelector('[name="img-file"]'),i=t.querySelector('[name="img-alt"]');let o=t.querySelector('[name="img-src"]');var s=n.doc.textBetween(n.selection.from,n.selection.to,"\n");try{new URL(s);o.value=s}catch(e){i.value=s}r.addEventListener("change",async e=>{const n=t.querySelector(".img-preview");await async function(e,t,n){for(;n.firstChild;)n.removeChild(n.firstChild);const r=t.files;if(0===r.length){const e=document.createElement("p");e.textContent="No files currently selected for upload.",n.appendChild(e)}else{const e=document.createElement("ol");n.appendChild(e);for(const t of r){const n=document.createElement("li"),r=document.createElement("p");if(dS(t)){const i=document.createElement("img");i.src=URL.createObjectURL(t),i.alt=i.title=t.name;const o=await pS(i.src);i.width=o.width,i.height=o.height,r.textContent=`\n          File name: ${t.name}.\n          Size: ${hS(t.size)}.\n          Dimensions: ${i.width}x${i.height}px.`,n.appendChild(i),n.appendChild(r),e.appendChild(n)}else r.textContent=`File name ${t.name}: Not a valid file type. Update your selection.`,n.appendChild(r);e.appendChild(n)}}}(0,r,n);const i=n.querySelector("img[src]");i&&(o=t.querySelector('[name="img-src"]'),o.value=i.src)})}populateFormCitation(e,t,n){const r=document.querySelector("#citation-specref-search"),i=document.querySelector("#citation-url");r.focus(),r.value=n.doc.textBetween(n.selection.from,n.selection.to,"\n");var o=document.querySelector(".specref-search-results");o&&o.replaceChildren(),document.querySelector("#citation-specref-search-submit").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();var t=r.value.trim();Yi("https://api.specref.org/search-refs?q="+encodeURIComponent(t),{Accept:"application/json"},{noCredentials:!0}).then(e=>e.text()).then(e=>{e=JSON.parse(e);var t,n,r,i,s,a,l=[];Object.keys(e).forEach(t=>{"object"!=typeof e[t]||Array.isArray(e[t])||!("href"in e[t])||"aliasOf"in e[t]||"versionOf"in e[t]||"publisher"in e[t]&&"wg21"==e[t].publisher.toLowerCase()&&(!(e[t].href.startsWith("https://wg21.link/n")||e[t].href.startsWith("https://wg21.link/p")||e[t].href.startsWith("https://wg21.link/std"))||e[t].href.endsWith(".yaml")||e[t].href.endsWith("/issue")||e[t].href.endsWith("/github")||e[t].href.endsWith("/paper"))||(n=e[t].href,r=e[t].title||n,i=e[t].publisher||"",s=e[t].date||"",a=e[t].status||"",i&&(i=". "+i),s&&(s=". "+s),a&&(a=". "+a),l.push('<li><input name="specref-item" id="ref-'+t+'" type="radio" value="'+t+'" /> <label for="ref-'+t+'"><a href="'+n+'" rel="noopener" target="_blank">'+r+"</a>"+i+s+a+"</label></li>"))}),t="<ul>"+l.join("")+"</ul>",l&&((o=document.querySelector(".specref-search-results"))&&o.replaceChildren(Pi(t)),o.querySelector("ul").addEventListener("change",t=>{var n=t.target.closest("input");n&&(document.querySelector("#citation-url").value=e[n.value].href)}))})}),i.focus(),document.querySelector('.editor-form input[name="citation-ref-type"]').checked=!0}getPopulateForms(){return{img:this.populateFormImg,citation:this.populateFormCitation}}updateButtonState(e,t,n,r){const i=function(e,t){if(!e||!t)return null;const n=t.match(/^h([1-6])$/);if(n)return{type:"node",schema:e.nodes.heading,level:parseInt(n[1],10)};if(e.marks[t])return{type:"mark",schema:e.marks[t]};if(e.nodes[t])return{type:"node",schema:e.nodes[t]};return null}(e,n);let o;i&&("mark"===i.type?o=aS(r.state,i.schema):"node"===i.type&&(o=function(e,t,n={}){const{selection:r}=e,{$from:i,to:o,node:s}=r;if(s)return s.type===t&&Object.entries(n).every(([e,t])=>s.attrs[e]===t);const a=i.parent;return o<=i.end()&&a.type===t&&Object.entries(n).every(([e,t])=>a.attrs[e]===t)}(r.state,i.schema,{level:i.level}))),void 0!==o&&(o?t.classList.add("editor-button-active"):t.classList.remove("editor-button-active"))}}function aS(e,t){const{from:n,$from:r,to:i,empty:o}=e.selection;return o?t.isInSet(e.storedMarks||r.marks()):e.doc.rangeHasMark(n,i,t)}function lS(e,t){return(n,r)=>{const{nodes:i}=e,{$from:o}=n.selection,s=i.heading;return o.node().type===s&&o.node().attrs.level===t?ax(i.p)(n,r):ax(s,{level:t})(n,r)}}function cS(e,t){return(n,r)=>{const{nodes:i}=e,o=i[t],{$from:s}=n.selection,a=s.node(-1);if(a&&a.type===i.li){const t=function(e,t){let n=null,r=e.pos,i=e.depth;for(;i>0;){const o=e.node(i);if(o.type===t.nodes.ul||o.type===t.nodes.ol){n=o,r=e.before(i);break}i--}return n?{parentList:n,parentListPos:r}:null}(s,e);if(t){const{parentList:e,parentListPos:s}=t;return e.type===o?jx(i.li)(n,r):function(e,t,n,r){const{tr:i}=e,{schema:o}=e;i.setNodeMarkup(r,n),t&&t(i);return!0}(n,r,o,s)}}return Px(o)(n,r)}}const uS=["image/apng","image/bmp","image/gif","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/tiff","image/webp","image/x-icon"];function dS(e){return uS.includes(e.type)}function hS(e){return e<1e3?`${e} bytes`:e>=1e3&&e<1e6?`${(e/1e3).toFixed(1)} KB`:`${(e/1e6).toFixed(1)} MB`}async function pS(e){return new Promise((t,n)=>{const r=new Image;r.onload=function(){t({width:r.naturalWidth,height:r.naturalHeight})},r.onerror=function(){n(new Error("Error loading image"))},r.src=e})}cr.ns;class fS extends rS{constructor(e,t,n){super(e,t,n),this.editorView=n}updateToolbarVisibility(e){this.dom.classList.contains("editor-form-active")&&!e.target.closest(".do")&&"file"!==e.target.closest("input[type]")?.type&&this.cleanupToolbar()}getToolbarButtonClickHandlers(){return{share:$x}}getFormEventListeners(){return{approve:[{event:"submit",callback:e=>this.formHandlerAnnotate(e,"approve")},{event:"click",callback:e=>this.formClickHandler(e,"approve")}],disapprove:[{event:"submit",callback:e=>this.formHandlerAnnotate(e,"disapprove")},{event:"click",callback:e=>this.formClickHandler(e,"disapprove")}],specificity:[{event:"submit",callback:e=>this.formHandlerAnnotate(e,"specificity")},{event:"click",callback:e=>this.formClickHandler(e,"specificity")}],bookmark:[{event:"submit",callback:e=>this.formHandlerAnnotate(e,"bookmark")},{event:"click",callback:e=>this.formClickHandler(e,"bookmark")}],comment:[{event:"submit",callback:e=>this.formHandlerAnnotate(e,"comment")},{event:"click",callback:e=>this.formClickHandler(e,"comment")}]}}getFormHandlers(){return[{name:"formHandlerAnnotate",fn:Hx}]}clearSelection(){const e=window.getSelection();e.rangeCount>0&&e.removeAllRanges()}getSelectionAsHTML(e){if(!(e=e||window.getSelection()).rangeCount)return"";const t=document.createElement("div");for(let n=0;n<e.rangeCount;n++){const r=e.getRangeAt(n).cloneContents();t.appendChild(r)}return t.getHTML()}getTextQuoteSelector(){Fx(this.selection);const e=window.getSelection();var t=Bx(e.getRangeAt(0));var n=this.getSelectionAsHTML(e);const r=function(e,t){if(!t.rangeCount)return;const n=[];for(let e=0;e<t.rangeCount;e++)n.push(t.getRangeAt(e));const r=document.createRange();r.setStart(n[0].startContainer,n[0].startOffset),r.setEnd(n[n.length-1].endContainer,n[n.length-1].endOffset);const i=r.cloneRange();i.selectNodeContents(e),i.setEnd(r.startContainer,r.startOffset);const o=i.toString().length;return{start:o,end:o+r.toString().length}}(t,e);var i=r.start,o=r.end,s=Math.max(0,i-cr.ContextLength),a=t.textContent.substr(s,i-s);a=ad(a);var l=Math.min(t.textContent.length,o+cr.ContextLength),c=t.textContent.substr(o,l-o);return{type:"TextQuoteSelector",exact:n,prefix:a,suffix:c=ad(c)}}replaceSelectionWithFragment(e){const t=this.selection;if(!t.rangeCount)return;const n=[];for(let e=0;e<t.rangeCount;e++)n.push(t.getRangeAt(e));const r=document.createRange();r.setStart(n[0].startContainer,n[0].startOffset),r.setEnd(n[n.length-1].endContainer,n[n.length-1].endOffset),t.removeAllRanges(),r.deleteContents(),r.collapse(!0),r.insertNode(e),t.removeAllRanges()}getFormLegends(){return{approve:"Approve",disapprove:"Disapprove",specificity:"Specificity",bookmark:"Bookmark",comment:"Comment"}}getToolbarPopups(){return{approve:e=>iS(e),disapprove:e=>iS(e),specificity:e=>iS(e),bookmark:e=>iS(e),comment:e=>iS(e)}}clearToolbarButton(e){const t=this.dom.querySelector("#"+("editor-button-"+e));this.toolbarPopups[e]&&t.classList.remove("editor-button-active")}clearToolbarForm(e,t={}){e.classList.remove("editor-form-active"),e.removeAttribute("style"),t.preserveFields?t.preserveFields.forEach(e=>{}):e.reset()}populateFormAnnotate(e,t){!function(e){for(var t=document.querySelectorAll(".do.editor-toolbar .annotation-inbox"),n=0;n<t.length;n++)t[n].replaceChildren(Pi(sh(e)))}(e)}getPopulateForms(){return{approve:this.populateFormAnnotate.bind(this),disapprove:this.populateFormAnnotate.bind(this),specificity:this.populateFormAnnotate.bind(this),bookmark:this.populateFormAnnotate.bind(this),comment:this.populateFormAnnotate.bind(this)}}}const mS=cr.ns;class gS{constructor(e,t){this.mode=e||cr.Editor.mode,this.restrictedNodes=[],this.node=t||document.body,this.toggleModeMessageId=null,this.editorView=null,this.socialToolbarView=null,this.authorToolbarView=this.editorView?.pluginViews[0],this.hasRunTextQuoteSelector=!1,this.placeholder=cr.Editor.Placeholder}init(e,t,n){if(this.mode=e||cr.Editor.mode||this.mode,this.node=t||this.node,"new"===n?.template&&(DO.Editor.new=!0,this.setTemplate(e,n),this.node=this.node.querySelector("article")),"author"===this.mode)this.destroySocialToolbar(),this.createEditor(this.node),this.authorToolbarView=this.editorView?.pluginViews[0];else this.storeRestrictedNodes(),this.destroyEditor(),this.createSocialToolbar(this.node);this.hasRunTextQuoteSelector||!this.socialToolbarView&&!this.authorToolbarView||(this.showTextQuoteSelectorFromLocation(),this.hasRunTextQuoteSelector=!0)}storeRestrictedNodes(){const e=["#document-editor","#review-changes",".copy-to-clipboard",".robustlinks"].map(e=>`:not(${e})`).join(""),t=`.do${e}`;this.restrictedNodes=Array.from(document.body.querySelectorAll(t))}showEditorModeActionMessage(e,t={}){var n=`Activated <em>${e}</em> mode.`;Sd(n={content:n,type:"info"},cr.MessageLog);return kd(document.body,n,t)}toggleEditor(e,t){DO.Editor.new=!1;let n=document.body;"new"===t?.template&&(DO.Editor.new=!0,this.setTemplate(e,t),n=n.querySelector("article")),hc(cr.User),this.init(e,n),this.toggleModeMessageId=this.showEditorModeActionMessage(e,this.toggleModeMessageId?{clearId:this.toggleModeMessageId}:{}),cr.EditorEnabled="author"===e,yc()}replaceContent(e,t){this.destroyEditor(t)}setTemplate(e,t){if("new"===t.template)this.setTemplateNew(e,t)}setTemplateNew(e,t){const n=document.querySelector("head title");if(n)n.textContent="Untitled";else{const e=document.createElement("title");e.textContent="Untitled",document.head.appendChild(e)}var r=document.getElementById("document-menu");document.body.replaceChildren(Pi(`<main><article><h1 aria-label="Add a title" data-placeholder="${this.placeholder.h1}" property="schema:name"></h1><div datatype="rdf:HTML" property="schema:description"><p data-placeholder="${this.placeholder.p}"></p></div></article></main>`)),document.body.prepend(r),document.body.removeAttribute("id"),document.body.removeAttribute("class")}importTextQuoteSelector(e,t,n,r,i,o){const s=this.authorToolbarView||this.socialToolbarView;return s?.importTextQuoteSelector(e,t,n,r,i,o)}showTextQuoteSelectorFromLocation(){const e=this.authorToolbarView||this.socialToolbarView;return e?.showTextQuoteSelectorFromLocation()}replaceSelectionWithFragment(e){const t=this.authorToolbarView||this.socialToolbarView;return t?.replaceSelectionWithFragment(e)}insertFragmentInNode(e,t){const n=this.authorToolbarView||this.socialToolbarView;return n?.insertFragmentInNode(e,t)}createEditor(e){this.storeRestrictedNodes(),this.restrictedNodes.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)});const t=new Qv({view(e){return this.authorToolbarView=new sS("author",["p","h1","h2","h3","h4","em","strong","a","img","ol","ul","pre","code","blockquote","q","semantics","citation","note"],e),this.authorToolbarView}}),n=Kv.create({doc:Ag.fromSchema(H_).parse(this.node),plugins:[O_(),Mx,t]});this.node.replaceChildren(),this.editorView=new d_(this.node,{state:n,editable:()=>!0,attributes:{class:""+(Ed(n.doc)?"":"do-new")}}),this.restrictedNodes.forEach(e=>{"document-menu"==e.id||"document-items"==e.id?document.body.prepend(e):document.body.appendChild(e)}),console.log("Editor created. Mode:",this.mode)}destroyEditor(e){if(e||this.editorView){let t,n;if(t=(e=e??jg.fromSchema(H_).serializeFragment(this.editorView.state.doc.content)).body?pd(e.body):pd(e),t instanceof Document)n=Array.from(t.body.childNodes);else if(t instanceof HTMLElement&&"body"===t.tagName.toLowerCase())n=Array.from(t.childNodes);else if(t instanceof DocumentFragment){const e=t.querySelector("body");n=e?Array.from(e.childNodes):Array.from(t.childNodes)}else n=Array.from(t.childNodes??[]);this.editorView&&(this.editorView.destroy(),this.editorView=null,this.authorToolbarView=null),document.body.replaceChildren(...n,...this.restrictedNodes)}}createSocialToolbar(){this.socialToolbarView=new fS("social",["share","approve","disapprove","specificity","bookmark","comment"]),document.body.appendChild(this.socialToolbarView.dom)}destroySocialToolbar(){this.socialToolbarView&&(this.socialToolbarView.destroy(),this.socialToolbarView=null)}updateDocumentTitle(){var e=document.querySelector("h1");e&&(document.title=e.textContent.trim())}setEditorDataItems(e){if(e&&e.target.closest("button.editor-enable")){this.updateDocumentTitle();var t=cr.DocumentURL,n=cr.Resource[t].graph.node(lr.namedNode(t));cr.ContributorRoles.forEach(e=>{var r="document-"+e+"s",i=document.getElementById(r);i||(i='        <dl id="'+r+'"><dt>'+(e.charAt(0).toUpperCase()+e.slice(1)+"s")+"</dt></dl>",Td(document,i,{id:r}),i=document.getElementById(r));if(cr.User.IRI&&!n.out(mS.schema[e]).values.includes(cr.User.IRI)){var o,s=cr.User.Name||cr.User.IRI;cr.User.Name?(o=Ui(null,cr.User.Name),document.getElementById(o)&&(o=Ui(null,cr.User.Name,e))):o=Ui(null,cr.User.IRI);var a='<dd class="do"'+(o=' id="'+o+'"')+(cr.Resource[t].rdftype.includes(mS.schema.ScholarlyArticle.value)?' inlist="" rel="bibo:'+e+'List" resource="'+cr.User.IRI+'"':"")+'><span about="" rel="schema:'+e+'">'+Yd({avatarSize:32})+'</span><button class="add-'+e+'" contenteditable="false" title="Add '+s+" as "+e+'">'+Ri[".fas.fa-plus"]+"</button></dd>";i.insertAdjacentHTML("beforeend",a)}i.insertAdjacentHTML("beforeend",'<dd class="do"><button class="enter-'+e+'" contenteditable="false" title="Enter '+e+'">'+Ri[".fas.fa-user-plus"]+"</button></dd>"),i.insertAdjacentHTML("beforeend",'<dd class="do"><button class="invite-'+e+'" contenteditable="false" title="Invite '+e+'">'+Ri[".fas.fa-bullhorn"]+"</button></dd>"),(i=document.getElementById(r)).addEventListener("click",t=>{var n=t.target.closest("button.add-"+e);if(n){var r=t.target.closest(".do");r&&r.classList.add("selected"),n.parentNode.removeChild(n)}if((n=t.target.closest("button.enter-"+e))&&(r=t.target.closest(".do")).insertAdjacentHTML("beforebegin",'<dd class="do" contenteditable="false"><input contenteditable="false" name="enter-'+e+'" placeholder="https://csarven.ca/#i" type="text" value="" /> <button class="commit-'+e+'" contenteditable="false" title="Commit '+e+'">'+Ri[".fas.fa-plus"]+"</button></dd>"),(n=t.target.closest("button.commit-"+e))&&(r=t.target.closest(".do"))){r.classList.add("selected");var i=r.querySelector("input"),o=i.value.trim();o.startsWith("http")?wo(o).then(t=>{var s=Oo(t)||o,a=Jo(t);a=a&&a.length?'<img alt="" height="32" rel="schema:image" src="'+a+'" width="32" /> ':"";var l=Pi('<span about="" rel="schema:'+e+'"><span about="'+o+'" typeof="schema:Person">'+a+'<a href="'+o+'" rel="schema:url">'+s+"</a></span></span>");r.replaceChild(l,i),n.parentNode.removeChild(n)}):i.focus()}t.target.closest("button.invite-"+e)&&(console.log("TODO: Temporarily disabled. Check 'button.invite-' + contributorRole"),t.target.removeAttribute("disabled"))})});var r=document.getElementById("document-modified"),i=cr.Resource[cr.DocumentURL]?.headers?.["last-modified"]?.["field-value"];!r&&i&&(i=new Date(i),Id(document,{id:"document-modified",property:"schema:dateModified",title:"Modified",datetime:i}))}else e&&e.target.closest("button.editor-disable")&&Ld()}}var vS=i(4809),yS=i(6827);function bS(e,t){let n;if(t&&t["@context"]&&("http://www.w3.org/ns/csvw"==t["@context"]||t["@context"].includes("http://www.w3.org/ns/csvw"))&&Array.isArray(t["@context"])&&t["@context"].forEach(e=>{xS(e)&&e["@language"]&&(n=e["@language"])}),!t.tables&&!t.tables.length)return;let r=t.tables;const i=["aboutUrl","propertyUrl","valueUrl"],o=t.tables.reduce((e,t,n)=>(e[t.url]=n,e),{});e=e.sort((e,t)=>(o[e.url]??Number.MAX_SAFE_INTEGER)-(o[t.url]??Number.MAX_SAFE_INTEGER));let s="",a={},l=t["dcterms:title"]||t["@id"];l=_S(l),e.forEach(e=>{const t=r.find(t=>t.url===e.url);let n=t["dcterms:title"]||t.url||t["@id"];n=_S(n);let o=function(e,t,n){if(!Array.isArray(e)||0===e.length)return"";const r=e.map(e=>`<dd lang="${e["@language"]}" property="${n}" xml:lang="${e["@language"]}">${e["@value"]}</dd>`).join("");return`<dl><dt>${t}</dt>${r}</dl>`}(t["dcat:keyword"],"Keywords","dcat:keyword"),l=t["dcterms:publisher"];l=Array.isArray(l)?l[0]:l;let c=t["dcterms:license"],u=t["dcterms:modified"];c=Array.isArray(c)?c[0]:c;let d=c?th(c["@id"],{rel:"dcterms:license",label:"License"}):"",h=u?Rd({property:"dcterms:modified",title:"Modified",datetime:new Date(t["dcterms:modified"]["@value"])}):"",p=ih([{rel:"dcterms:source",href:e.url}],{title:"Source"});const f=t.tableSchema.columns,m=f.filter(e=>!!e.virtual),g=f.length-m.length,v=t.tableSchema.aboutUrl;let y=t.tableSchema.foreignKeys;y=y?y.map(e=>e.columnReference):[];let b,w,_="";const{data:x}=e;if(!x||0===x.length)return"<table></table>";const S=x[0],C=x.slice(1);a[t.url]=n.textContent,s+=`<table id="${t.url}">`,s+=`<caption${n.language}>${n.textContent}</caption>`,s+="<thead><tr>",S.forEach(e=>{e=ad(zi(e)),s+=`<th>${e}</th>`}),s+="</tr></thead>",s+="<tbody>",C.forEach((e,t)=>{const n=S.reduce((t,n)=>(t[n]=wS(e,S,n),t),{});n._row=t+1,v&&(b=yS(zi(v)),w=b.fill(n),_=` about="${w}" id="${w.slice(1)}"`);const r=m?m.filter(e=>"rdf:type"==e.propertyUrl):[],o=r.length?r[0].valueUrl:null;s+=`<tr${_}${o?` typeof="${o}"`:""}>`,e.forEach((r,o)=>{const a=S[o];if(!a)return;r=ad(zi(r=r.trim()));const l={...f.find(e=>e.name===a)},c=l.null||[""],u=S.reduce((t,n)=>{let r=wS(e,S,n);return t[n]=r,t},{});n._row=t+1;let d=!!y.includes(l.name),h=!1;Object.keys(l).forEach(e=>{if(i.includes(e)){const t=yS(l[e]);let n=!1;t.varNames.forEach(e=>{y.includes(e)&&e!==l.name&&(d=!0,n=c.includes(u[e]),n&&(h=!0))}),l[e]=n?null:zi(t.fill(u))}});const p=[];let m;if(l.aboutUrl&&(p.push(`about="${l.aboutUrl}"`),d||p.push(`id="${l.aboutUrl.slice(1)}"`)),l.propertyUrl){if("rdf:type"==l.propertyUrl){let e=l.aboutUrl||w;p.push(`about="${e}"`),w||d||p.push(`id="${e.slice(1)}"`),l.valueUrl?p.push(`typeof="${l.valueUrl}"`):p.push(`typeof="${r}"`)}if("dcterms:description"!=l.propertyUrl||c.includes(r)||p.push(`property="${l.propertyUrl}"`),"rdf:type"!==l.propertyUrl&&"dcterms:description"!==l.propertyUrl&&l.valueUrl){if("strideThreatType"==l.name){let e=l.valueUrl.slice(1),t=cr.STRIDEThreatTypes[e];t&&(r=t.name,l.valueUrl=t.uri)}let e,t="";"dcterms:subject"!=l.propertyUrl&&"rdfs:seeAlso"!=l.propertyUrl||!URL.canParse(r)||(e=r),h||(t=` rel="${l.propertyUrl}"`),m=`<a href="${e??l.valueUrl}"${t}>${r}</a>`}else m=r}else m=`<span property="${a}">${r}</span>`;c.includes(r)?s+=`<td>${r}</td>`:s+=`<td ${p.join(" ")}>${m}</td>`}),s+="</tr>"}),s+="</tbody>";let k,E,A="";xS(l)?(k=l["@id"]||l["schema:url"],k=k["@id"]?k["@id"]:k,E=l["schema:name"]?l["schema:name"]:k):k=l,l&&(A=`<dl><dt>Publisher</dt><dd><a href="${k}" rel="dcterms:publisher">${E}</a></dd></dl>`),""===A&&""===d&&""===o&&""===h&&""===p||(s+=`<tfoot><tr><td colspan="${g}">${p}${A}${d}${o}${h}</td></tr></tfoot>`),s+="</table>"});let c=[],u="";return Object.keys(a).forEach(e=>{c.push(`<li><a href="#${e}">${a[e]}</a></li>`)}),c.length&&(u=`<nav id="list-of-tables"><h2>Tables</h2><div><ol class="toc">${c.join("")}</ol></div></nav>`),`<h1${l.language}>${l.textContent}</h1>${u}${s}`}function wS(e,t,n){const r=t.indexOf(n);return-1!==r?e[r]:void 0}function _S(e){let t="",n=e=Array.isArray(e)?e[0]:e;return xS(e)&&(n=e["@value"],t=` lang="${e["@language"]}" xml:lang="${e["@language"]}"`),{language:t,textContent:n}}const xS=e=>"[object Object]"===Object.prototype.toString.call(e),SS={...t,...n},CS=cr.ns;let kS;void 0===window.DO&&(kS={C:cr,U:{initButtons:function(){cr.Button={Close:mc({button:"close",buttonClass:"close",buttonLabel:"Close",buttonTitle:"Close",iconSize:"fa-2x"}),Delete:mc({button:"delete",buttonClass:"delete",buttonTitle:"Delete"}),Toggle:mc({button:"toggle",buttonClass:"toggle",buttonTitle:"Show/Hide"}),More:mc({button:"more",buttonClass:"more",buttonTitle:"Show more"}),Clipboard:mc({button:"clipboard",buttonClass:"do copy-to-clipboard",buttonTitle:"Copy to clipboard"}),OpenMenu:mc({button:"bars",buttonClass:"show",buttonTitle:"Open menu"}),CloseMenu:mc({button:"minus",buttonClass:"hide",buttonTitle:"Close menu"}),Info:{Delete:mc({button:"info",buttonClass:"info",buttonTitle:"About Delete",buttonRel:"rel:help",buttonResource:`${fc}#feature-delete`}),EmbedData:mc({button:"info",buttonClass:"info",buttonTitle:"About Embed Data",buttonRel:"rel:help",buttonResource:`${fc}#feature-embed-data`}),GraphView:mc({button:"info",buttonClass:"info",buttonTitle:"About Graph View",buttonRel:"rel:help",buttonResource:`${fc}#feature-graph-view`}),GenerateFeeds:mc({button:"info",buttonClass:"info",buttonTitle:"About Generate Feed",buttonRel:"rel:help",buttonResource:`${fc}#feature-generate-feed`}),MessageLog:mc({button:"info",buttonClass:"info",buttonTitle:"About Message Log",buttonRel:"rel:help",buttonResource:`${fc}#feature-message-log`}),Notifications:mc({button:"info",buttonClass:"info",buttonTitle:"About Notifications",buttonRel:"rel:help",buttonResource:`${fc}#feature-notifications`}),Open:mc({button:"info",buttonClass:"info",buttonTitle:"About Open",buttonRel:"rel:help",buttonResource:`${fc}#feature-open`}),Reply:mc({button:"info",buttonClass:"info",buttonTitle:"About Reply",buttonRel:"rel:help",buttonResource:`${fc}#feature-reply`}),ReviewChanges:mc({button:"info",buttonClass:"info",buttonTitle:"About Review Changes",buttonRel:"rel:help",buttonResource:`${fc}#feature-review-changes`}),RobustLinks:mc({button:"info",buttonClass:"info",buttonTitle:"About Robustify Links",buttonRel:"rel:help",buttonResource:`${fc}#feature-robustify-links`}),SaveAs:mc({button:"info",buttonClass:"info",buttonTitle:"About Save As",buttonRel:"rel:help",buttonResource:`${fc}#feature-save-as`}),Share:mc({button:"info",buttonClass:"info",buttonTitle:"About Share",buttonRel:"rel:help",buttonResource:`${fc}#feature-share`}),SignIn:mc({button:"info",buttonClass:"info",buttonTitle:"About Sign In",buttonRel:"rel:help",buttonResource:`${fc}#feature-sign-in`}),Source:mc({button:"info",buttonClass:"info",buttonTitle:"About Source",buttonRel:"rel:help",buttonResource:`${fc}#feature-source`})},SignIn:mc({button:"signin",buttonClass:"signin-user",buttonTitle:"Sign in to authenticate",buttonTextContent:"Sign in"}),Menu:{Delete:mc({button:"delete",buttonClass:"resource-delete",buttonTitle:"Delete article",buttonTextContent:"Delete",iconSize:"fa-2x",buttonDisabled:!0}),EditEnable:mc({button:"cursor",buttonClass:"editor-enable",buttonTextContent:"Edit",buttonTitle:"Enable editor",iconSize:"fa-2x"}),EditDisable:mc({button:"cursor",buttonClass:"editor-disable",buttonTextContent:"Edit",buttonTitle:"Disable editor",iconSize:"fa-2x"}),EmbedData:mc({button:"data-meta",buttonClass:"embed-data-meta",buttonTitle:"Embed structured data",buttonTextContent:"Embed Data",iconSize:"fa-2x"}),Export:mc({button:"export",buttonClass:"export-as-html",buttonTitle:"Export and save to file",buttonTextContent:"Export",iconSize:"fa-2x"}),GenerateFeed:mc({button:"feed",buttonClass:"generate-feed",buttonTitle:"Generate Web feed",buttonTextContent:"Feed",iconSize:"fa-2x"}),Immutable:mc({button:"immutable",buttonClass:"create-immutable",buttonTitle:"Make this article immutable and version it",buttonTextContent:"Immutable",iconSize:"fa-2x",buttonDisabled:!0}),InternetArchive:mc({button:"archive",buttonClass:"snapshot-internet-archive",buttonTitle:"Capture with Internet Archive",buttonTextContent:"Internet Archive",iconSize:"fa-2x"}),Open:mc({button:"open",buttonClass:"resource-open",buttonTitle:"Open article",buttonTextContent:"Open",iconSize:"fa-2x"}),New:mc({button:"new",buttonClass:"resource-new",buttonTitle:"Create new article",buttonTextContent:"New",iconSize:"fa-2x"}),Notifications:mc({button:"activities",buttonClass:"resource-notifications",buttonTitle:"Show notifications",buttonTextContent:"Notifications",iconSize:"fa-2x"}),RobustifyLinks:mc({button:"robustify-links",buttonClass:"robustify-links",buttonTitle:"Robustify Links",buttonTextContent:"Robustify Links",iconSize:"fa-2x"}),Save:mc({button:"save",buttonClass:"resource-save",buttonTitle:"Save article",buttonTextContent:"Save",iconSize:"fa-2x",buttonDisabled:!0}),SaveAs:mc({button:"save-as",buttonClass:"resource-save-as",buttonTitle:"Save as article",buttonTextContent:"Save As",iconSize:"fa-2x"}),Share:mc({button:"share",buttonClass:"resource-share",buttonTitle:"Share resource",buttonTextContent:"Share",iconSize:"fa-2x"}),SignIn:mc({button:"signin",buttonClass:"signin-user",buttonTitle:"Sign in to authenticate",buttonTextContent:"Sign in",iconSize:"fa-2x"}),SignOut:mc({button:"signout",buttonClass:"signout-user",buttonTitle:"Live long and prosper"}),Source:mc({button:"source",buttonClass:"resource-source",buttonTitle:"Edit article source code",buttonTextContent:"Source",iconSize:"fa-2x"}),Memento:mc({button:"memento",buttonClass:"resource-memento",buttonTitle:"Memento article",buttonTextContent:"Memento",iconSize:"fa-2x",buttonDisabled:!0}),MessageLog:mc({button:"messages",buttonClass:"message-log",buttonTitle:"Show message log",buttonTextContent:"Messages",iconSize:"fa-2x"}),Print:mc({button:"print",buttonClass:"resource-print",buttonTitle:"Print document",buttonTextContent:"Print",iconSize:"fa-2x"}),Reply:mc({button:"in-reply-to",buttonClass:"resource-reply",buttonTitle:"Reply",buttonTextContent:"Reply",iconSize:"fa-2x"}),Version:mc({button:"version",buttonClass:"create-version",buttonTitle:"Version this article",buttonTextContent:"Version",iconSize:"fa-2x",buttonDisabled:!0})}}},getItemsList:function(e,t){e=e||Qi(),(t=t||{}).resourceItems=t.resourceItems||[],t.headers=t.headers||{},t.excludeMarkup=!0,kS.C.CollectionItems=kS.C.CollectionItems||{},kS.C.CollectionPages="CollectionPages"in kS.C&&kS.C.CollectionPages.length?kS.C.CollectionPages:[],kS.C.Collections="Collections"in kS.C&&kS.C.Collections.length?kS.C.Collections:[];var n,r=(n=kS.C.MediaTypes.RDF,(n=Array.isArray(n)?n:[n]).map(e=>`http://www.w3.org/ns/iana/media-types/${e}#Resource`));return wo(e,t.headers,t).then(function(n){if(!n||n.resource)return[];var i=n.node(lr.namedNode(e)),o=fs(i);(o.includes(CS.ldp.Container.value)||o.includes(CS.as.Collection.value)||o.includes(CS.as.OrderedCollection.value))&&kS.C.Collections.push(e),o.includes(CS.ldp.Container.value)||o.includes(CS.as.Collection.value)||o.includes(CS.as.OrderedCollection.value)||kS.C.CollectionPages.push(e),[i.out(CS.as.items).values,i.out(CS.as.orderedItems).values,i.out(CS.ldp.contains).values].forEach(e=>{e.forEach(e=>{var n=i.node(lr.namedNode(e));if(n.out(CS.rdf.first).values.length||n.out(CS.rdf.rest).values.length)t.resourceItems=t.resourceItems.concat(bo(i,e));else{var o=fs(n);if(!(o.includes(CS.ldp.Container.value)||o.includes(CS.as.Collection.value)||o.includes(CS.as.CollectionPage.value)||o.includes(CS.as.OrderedCollection.value)||o.includes(CS.as.OrderedCollectionPage.value))){const n=o.some(e=>e.startsWith("http://www.w3.org/ns/iana/media-types/"));!(n&&o.some(e=>r.includes(e)))&&n||t.resourceItems.push(e)}}})});var s=i.out(CS.as.first).values,a=i.out(CS.as.next).values;return s.length&&!kS.C.CollectionPages.includes(s[0])?kS.U.getItemsList(s[0],t):a.length&&!kS.C.CollectionPages.includes(a[0])?kS.U.getItemsList(a[0],t):Li(t.resourceItems)}).catch(e=>(console.log(e),[]))},getNotifications:function(e){e=e||Qi();var t=[];return kS.C.Inbox[e]={},kS.C.Inbox[e].Notifications=[],wo(e).then(n=>{kS.C.Inbox[e].Graph=n;var r=n.node(lr.namedNode(e));if(r.out(CS.ldp.contains).values.forEach(e=>{fs(r.node(lr.namedNode(e))).includes(CS.ldp.Container.value)||t.push(e)}),t.length)return kS.C.Inbox[e].Notifications=t,t;return Promise.reject({message:"There are no notifications."})})},showInboxNotifications:function(e,t){_o(CS.ldp.inbox.value,e,t).then(e=>{e.forEach(e=>{kS.C.Inbox[e]||kS.U.showNotificationSources(e)})})},showNotificationSources:function(e){kS.U.getNotifications(e).then(function(e){e.forEach(e=>{kS.U.showActivities(e,{notification:!0})})},function(e){return console.log("No notifications"),e})},showContactsActivities:function(){var e,t,n,r=document.querySelector("#document-notifications"),i=function(){var e=r.querySelector("div.info"),t=e.querySelector(".progress");e.removeChild(t),kS.U.initializeButtonMore(r)},o=[];o.push(...kS.U.processAgentActivities(kS.C.User)),e=r.querySelector("div.info"),t=e.querySelector(".progress"),n=Pi(`<div class="progress">${Ri[".fas.fa-circle-notch.fa-spin.fa-fw"].replace(" fa-fw","")} Checking activities</div>`),t?e.replaceChild(n,t):e.appendChild(n);var s,a,l=e=>{if(e.length){var t=e.map(e=>id(e,{fetchIndexes:!0}).then(t=>t.Graph?(kS.C.User.Contacts=kS.C.User.Contacts||{},kS.C.User.Contacts[e]=t,kS.U.processAgentActivities(t)):[]));return Promise.allSettled(t).then(e=>{o.push(...e.flat())})}return Promise.resolve()};(kS.C.User.Contacts&&Object.keys(kS.C.User.Contacts).length?(s=kS.C.User.Contacts,a=Object.keys(s).map(e=>{var t=kS.C.User.Contacts[e];return t.IRI?kS.U.processAgentActivities(t):[]}),Promise.allSettled(a).then(e=>{o.push(...e.flat())})):kS.C.User.IRI?Ao(kS.C.User.IRI).then(l):Promise.resolve()).then(()=>Promise.allSettled(o)).then(()=>i()).catch(()=>i())},processAgentActivities:function(e){return e.TypeIndex&&Object.keys(e.TypeIndex).length?kS.U.processAgentTypeIndex(e):e.Graph&&(e.PublicTypeIndex?.length||e.PrivateTypeIndex?.length)?To(e.Graph).then(t=>(Object.keys(t).forEach(n=>{e.TypeIndex[n]=t[n]}),processAgentActivities(e))):[Promise.resolve()]},processAgentTypeIndex:function(e){var t=[],n=kS.C.ActivitiesObjectTypes.concat(Object.keys(kS.C.ResourceType)),r=e.TypeIndex[CS.solid.publicTypeIndex.value]||{},i=e.TypeIndex[CS.solid.privateTypeIndex.value]||{},o=Object.assign({},r,i),s=[];return Object.values(o).forEach(r=>{var i=r[CS.solid.forClass.value],o=r[CS.solid.instance.value],a=r[CS.solid.instanceContainer.value];n.includes(i)&&(s.push(i),o&&t.push(kS.U.showActivities(o,{excludeMarkup:!0,agent:e.IRI})),a&&t.push(kS.U.showActivitiesSources(a,{activityType:"instanceContainer",agent:e.IRI})))}),t},processAgentStorageOutbox:function(e){var t=[];return e.Storage&&e.Storage.length?e.Outbox&&e.Outbox.length?(e.Storage[0]===e.Outbox[0]||t.push(kS.U.showActivitiesSources(e.Storage[0])),t.push(kS.U.showActivitiesSources(e.Outbox[0]))):t.push(kS.U.showActivitiesSources(e.Storage[0])):e.Outbox&&e.Outbox.length&&t.push(kS.U.showActivitiesSources(e.Outbox[0])),t},showActivitiesSources:function(e,t={}){return kS.U.getItemsList(e).then(function(e){for(var n=[],r=0;r<e.length&&r<kS.C.CollectionItemsLimit;r++){var i=function(e){return kS.U.showActivities(e,t)};n.push(i(e[r]))}return Promise.allSettled(n)}).catch(t=>{console.log(t),console.log(e+" has no activities.")})},getActivities:function(e,t){switch(e=yi(e=e||Qi()),t.activityType){default:case"instanceContainer":return kS.U.getItemsList(e);case"instance":return kS.U.showActivities(e)}},showActivities:function(e,t={}){if(kS.C.Activity[e]||kS.C.Notification[e])return[];var n=kS.C.DocumentURL,r=kS.C.ActivitiesObjectTypes.concat(Object.keys(kS.C.ResourceType));return function(e){return eo(e).then(t=>{var n=t.headers.get("Content-Type"),r={};if(r.contentType=n?n.split(";")[0].toLowerCase().trim():"",DO.C.MediaTypes.RDF.includes(r.contentType)){var i={Accept:Ki()};return wo(e,i)}return Promise.reject({resource:e,response:t,message:"Unsupported media type for RDF parsing: "+r.contentType})})}(e).then(i=>{if(i&&!i.resource){t.notification?(kS.C.Notification[e]={},kS.C.Notification[e].Activities=[],kS.C.Notification[e].Graph=i):(kS.C.Activity[e]={},kS.C.Activity[e].Graph=i);var o=Qi(),s=[],a=[];i.out().quads().forEach(e=>{a.push(e.subject.value)}),(a=Li(a)).forEach(a=>{var l=i.node(lr.namedNode(a)),c=fs(l);if(c.length){var u=c,d=rs(l),h=is(l),p=ss(l);if(u.includes(CS.as.Like.value)||u.includes(CS.as.Dislike.value)){if((A=l.out(CS.as.object).values).length&&Si(A.values[0])==o){var f=l.out(CS.as.context).values;if(f.length)return s.push(f[0]),kS.U.showActivities(f[0]).then(e=>e).catch(e=>console.log(f[0]+": context is unreachable",e));var m=l.term.value,g=A[0],v="r-"+(M=ji(m)),y=M,b=(P=u.includes(CS.as.Like.value)?"Liked":"Disliked").slice(0,-1),w={type:"Liked"===P?"approve":"disapprove",mode:"read",motivatedByIRI:b,id:M,refId:v,refLabel:y,iri:m,creator:{},target:{iri:g}},_={value:P};d&&(w.language=d,_.language=d),h&&(w.rights=w.license=h,_.rights=_.license=h),w.body=[_];var x=l.out(CS.as.actor).values;if(x.length){w.creator={iri:x[0]};var S=Oo(B=i.node(lr.namedNode(w.creator.iri))),C=Jo(B);void 0!==S&&(w.creator.name=S),void 0!==C&&(w.creator.image=C)}else u.includes(CS.as.Dislike.value)&&(w.creator={name:"Anonymous Coward"});(j=Yo(l))&&(w.datetime=j),kS.U.addNoteToNotifications(w)}}else if(u.includes(CS.as.Relationship.value)){if(l.out(CS.as.subject).values.length&&as.out(as.relationship).values.length&&l.out(CS.as.object).values.length&&Si(l.out(CS.as.object).values[0])==o){var k=l.out(CS.as.subject).values[0];return s.push(k),kS.U.showActivities(k).then(e=>e).catch(e=>console.log(k+": subject is unreachable",e))}}else if(u.includes(CS.as.Announce.value)||u.includes(CS.as.Create.value)){var E={},A=l.out(CS.as.object).values.length?l.out(CS.as.object).values[0]:void 0,T=l.out(CS.as.target).values.length?l.out(CS.as.target).values[0]:void 0,I=l.node(lr.namedNode(A)),R=I.out(CS.as.inReplyTo).values.length&&I.out(CS.as.inReplyTo).values[0];if(A&&(T||R))if((O=Si(T)||Si(R))==o?E.targetInOriginalResource=!0:kS.C.Resource[n].graph.out(CS.rel["latest-version"]).values.length&&O==Si(kS.C.Resource[n].graph.out(CS.rel["latest-version"]).values[0])?E.targetInMemento=!0:kS.C.Resource[n].graph.out(CS.owl.sameAs).values.length&&kS.C.Resource[n].graph.out(CS.owl.sameAs).values[0]==O&&(E.targetInSameAs=!0),E.targetInOriginalResource||E.targetInMemento||E.targetInSameAs){if(s.push(A),t.notification&&kS.C.Notification[e].Activities.push(A),A.startsWith(e))return kS.U.showAnnotation(A,l,E);l=l.node(lr.namedNode(A));var L={};return Object.keys(kS.C.Citation).forEach(e=>{l.out(lr.namedNode(e)).values.forEach(t=>{t.startsWith(o)&&(E.objectCitingEntity=!0,L={citingEntity:A,citationCharacterization:e,citedEntity:T||R})})}),E.objectCitingEntity?kS.U.showCitations(L,l):kS.U.showActivities(A,E).then(e=>e).catch(e=>console.log(A+": object is unreachable",e))}}else if(u.includes(CS.as.Add.value)){A=l.out(CS.as.object).values.length?l.out(CS.as.object).values[0]:void 0,T=l.out(CS.as.target).values.length?l.out(CS.as.target).values[0]:void 0;var N=l.out(CS.as.origin).values.length?l.out(CS.as.origin).values[0]:void 0;if(A&&(T||N)){var O=Si(T),D=Si(N);if(O==o||D==o)return s.push(A),A.startsWith(e)?kS.U.showAnnotation(A,l):kS.U.showActivities(A).then(e=>e).catch(e=>console.log(A+": object is unreachable",e))}}else{if(u.includes(CS.oa.Annotation.value)&&Si(l.out(CS.oa.hasTarget).values[0])==o&&!s.includes(a))return kS.U.showAnnotation(a,l);if(!s.includes(a)&&r.some(e=>u.includes(e))&&l.out(CS.as.inReplyTo).values.length&&l.out(CS.as.inReplyTo).values[0]&&Si(l.out(CS.as.inReplyTo).values[0])==o)return s.push(a),kS.U.showAnnotation(a,l);if(u.includes(CS.bookmark.Bookmark.value)&&l.out(CS.bookmark.recalls).values.length&&Si(l.out(CS.bookmark.recalls).values[0])==o){m=l.term.value,g=l.out(CS.bookmark.recalls).values[0],w={type:"bookmark",mode:"read",motivatedByIRI:b="bookmark:Bookmark",id:M=ji(m),refId:v="r-"+M,refLabel:y=M,iri:m,creator:{},target:{iri:g},body:[{value:P="Bookmarked"}]};var M,P,j,U=t.agent;if(Object.keys(kS.C.Actor.Property).some(e=>{const{values:t}=l.out(lr.namedNode(e));if(t.length)return U=t[0],!0}),U){w.creator={iri:U};var B;S=Oo(B=i.node(lr.namedNode(w.creator.iri))),C=Jo(B);void 0!==S&&(w.creator.name=S),void 0!==C&&(w.creator.image=C)}(j=Yo(l))&&(w.datetime=j),h&&(w.license=h),p&&(w.rights=p),kS.U.addNoteToNotifications(w)}}}})}})},showVisualisationGraph:function(e,t,n,r){e=e||Qi(),n=n||"body",(r=r||{}).contentType=r.contentType||"text/html",r.subjectURI=r.subjectURI||e,r.license=r.license||"https://creativecommons.org/licenses/by/4.0/",r.language=r.language||"en",r.creator=r.creator||"https://dokie.li/";var i,o=r.width||"100%",s=r.height||"100%",a=Ui();function l(e){return"M"+e[0].x+","+e[0].y+"S"+e[1].x+","+e[1].y+" "+e[2].x+","+e[2].y}function c(e){return"translate("+e.x+","+e.y+")"}var u={0:{color:"#fff",label:""},1:{color:"#000",label:"",type:"rdf:Resource"},2:{color:"#777",label:""},3:{color:"#551a8b",label:"Visited",type:"rdf:Resource"}},d={4:{color:"#ccc",label:"Literal",type:"rdfs:Literal"},5:{color:"#ff0",label:"Root",type:"rdf:Resource"},6:{color:"#ff2900",label:"Type",type:"rdf:Resource"},7:{color:"#002af7",label:"External reference",type:"rdf:Resource"},8:{color:"#00cc00",label:"Internal reference",type:"rdf:Resource"},9:{color:"#00ffff",label:"Citation",type:"rdf:Resource"},10:{color:"#900090",label:"Social",type:"rdf:Resource"},11:{color:"#ff7f00",label:"Dataset",type:"rdf:Resource"},12:{color:"#9a3a00",label:"Requirement",type:"rdf:Resource"},13:{color:"#9a6c00",label:"Advisement",type:"rdf:Resource"},14:{color:"#ff00ff",label:"Specification",type:"rdf:Resource"},15:{color:"#0088ee",label:"Policy",type:"rdf:Resource"},16:{color:"#FFB900",label:"Event",type:"rdf:Resource"},17:{color:"#009999",label:"Slides",type:"rdf:Resource"},18:{color:"#d1001c",label:"Concepts",type:"rdf:Resource"}};u=Object.assign(u,d),"#graph-view"!=n||document.getElementById("graph-view")||document.body.appendChild(Pi(`<aside id="graph-view" class="do on">${kS.C.Button.Close}<h2>Graph view ${kS.C.Button.Info.GraphView}</h2><div class="info"></div></aside>`));var h=SS.select(n).append("svg").attr("width",o).attr("height",s).attr("id",a).attr("xmlns","http://www.w3.org/2000/svg").attr("xml:lang",r.language).attr("prefix","rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# xsd: http://www.w3.org/2001/XMLSchema# dcterms: http://purl.org/dc/terms/").attr("typeof","http://purl.org/dc/dcmitype/Image"),p=document.querySelector(n);p.insertAdjacentHTML("beforeend",'<button class="export" title="Export graph as SVG">Export</button>'),p.addEventListener("click",e=>{if(e.target.closest("button.export")){var t=p.querySelector('svg[typeof="http://purl.org/dc/dcmitype/Image"]'),n={subjectURI:"http://example.org/"+t.id,mediaType:"image/svg+xml",filenameExtension:".svg"};t=fd(t.cloneNode(!0)),kS.U.exportAsDocument(t,n)}});var f=document.getElementById(a);function m(e){var t;h.append("defs").append("marker").attr("id","end").attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",-1).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").attr("fill",u[2].color).append("path").attr("d","M0,-5L10,0L0,5"),h.append("g").attr("class","graph-objects");var n=h.select("g.graph-objects"),i=n.selectAll("path").data(e.bilinks).enter().append("path").attr("fill","none").attr("stroke",u[4].color).attr("marker-end","url(#end)"),o=n.selectAll("circle").data(e.nodes.filter(function(t){if(e.uniqueNodes[t.id]&&e.uniqueNodes[t.id].index==t.index)return t.id})).enter().append("a").attr("href",function(e){return"type"in u[e.group]&&"rdfs:Literal"!==u[e.group].type&&!e.id.startsWith("http://example.com/.well-known/genid/")?e.id:null}).attr("rel",function(e){return null===this.getAttribute("href")?null:"dcterms:references"}).append("circle").attr("r",6).attr("fill",function(e){return u[e.group].color}).attr("stroke",function(e){return e.visited?u[3].color:4==e.group?u[2].color:u[7].color}).on("click",function(e,t){e.preventDefault(),e.stopPropagation();var n=t.id;if("type"in u[t.group]&&"rdf:Literal"!==u[t.group].type&&!(t.id in kS.C.Graphs)){(r=r||{}).subjectURI=n;var i={Accept:Ki()};"http:"==n.slice(0,5).toLowerCase()&&(r.noCredentials=!0),function(e,t,n){Yi(e,t,n).then(e=>{var t=e.headers.get("Content-Type");return n.contentType=t?t.split(";")[0].trim():"text/turtle",e.text().then(e=>{n.mergeGraph=!0,g(n.subjectURI,e,n)})})}(n,i,r)}});return o.append("title").text(function(e){return e.id}),t={link:i,node:o},function(e){var t=h.append("g").attr("class","graph-legend"),n=t.append("text").attr("class","graph-resources").attr("x",0).attr("y",20).text("Resources: ");e.resources.forEach((t,r)=>{n.append("a").attr("fill",d[7].color).attr("href",t).attr("rel","dcterms:source").text(t),r<e.resources.length-1&&n.append("tspan").text(", ")}),t.append("text").attr("class","graph-statements").attr("x",0).attr("y",45).text("Statements: "+e.bilinks.length),t.append("text").attr("class","graph-nodes-unique").attr("x",0).attr("y",70).text("Nodes: "+Object.keys(e.uniqueNodes).length+" (unique)"),t.append("text").attr("class","graph-creator").attr("x",0).attr("y",95).text("Creator: "),t.select("g.graph-legend .graph-creator").append("a").attr("fill",d[7].color).attr("href",r.creator).attr("rel","dcterms:creator").text(r.creator),t.append("text").attr("class","graph-license").attr("x",0).attr("y",120).text("License: "),t.select("g.graph-legend .graph-license").append("a").attr("href",r.license).attr("rel","dcterms:license").attr("fill",d[7].color).text(kS.C.License[r.license].name);const i={};Object.keys(d).forEach(e=>{i[e]={...d[e],count:0}}),e.nodes.forEach(e=>{const t=e.group;t&&i.hasOwnProperty(t)&&i[t].count++});var o=Object.keys(i);t.selectAll("foobarbazqux").data(o).enter().append("circle").attr("cx",10).attr("cy",(e,t)=>150+25*t).attr("r",6).attr("fill",e=>i[e].color),t.selectAll("foobarbazqux").data(o).enter().append("text").attr("x",25).attr("y",(e,t)=>155+25*t).attr("fill",e=>i[e].color).text(e=>i[e].label+" ("+i[e].count+")")}(e),t}function g(e,t,n){return e=yi(e),n.resources="resources"in n?Li(n.resources.concat(e)):[e],kS.U.getVisualisationGraphData(e,t,n).then(function(e){var t=function(e,t){var n=e.nodes,r=new Map;n.forEach(e=>{r.set(e.id,e)});var i=e.links,o=[],s={};return i.forEach(e=>{var t=e.source=r.get(e.source),a=e.target=r.get(e.target),l={};n.push(l),s[t.id]>-1?t=s[t.id]:s[t.id]=t,s[a.id]>-1?a=s[a.id]:s[a.id]=a,i.push({source:t,target:l},{source:l,target:a}),o.push([t,l,a])}),{nodes:n,links:i,bilinks:o,uniqueNodes:s,resources:t.resources}}(e,n);i=SS.forceSimulation().nodes(e.nodes).alphaDecay(.025).force("link",SS.forceLink().distance(6).strength(.25)).force("collide",SS.forceCollide().radius(12).strength(.25)).force("center",SS.forceCenter(o/2,s/2)),"mergeGraph"in n&&n.mergeGraph&&(h.selectAll("defs").remove(),h.selectAll("g.graph-legend").remove(),h.selectAll("g.graph-objects").remove(),i.restart()),function(e,t){i.nodes(e.nodes).on("tick",function(){t.link.attr("d",l),t.node.attr("transform",c)}),i.force("link").links(e.links)}(e,m(t))})}o=r.width||parseInt(f.ownerDocument.defaultView.getComputedStyle(f,null).width),s=r.height||parseInt(f.ownerDocument.defaultView.getComputedStyle(f,null).height),"title"in r&&h.append("title").attr("property","dcterms:title").text(r.title),g(e,t,r)},getVisualisationGraphData:function(e,t,n){var r=yi(e),i=kS.C.DocumentURL,{skipNodeWithClass:o,...s}=kS.C.DOMNormalisation,a=s;return"string"==typeof t?mo(t,n).then(e=>kS.U.convertGraphToVisualisationGraph(r,e,n)):"object"==typeof t?kS.U.convertGraphToVisualisationGraph(r,t,n):void 0===t?kS.C.Resource[i]&&kS.C.Resource[i].graph?kS.U.convertGraphToVisualisationGraph(r,kS.C.Resource[i].graph,n):mo(t=fd(null,a),n).then(e=>kS.U.convertGraphToVisualisationGraph(r,e,n)):void 0},convertGraphToVisualisationGraph:function(e,t,n){kS.C.Graphs=kS.C.Graphs||{};var r=lr.grapoi({dataset:lr.dataset().addAll(t.dataset)}),i={};i[n.subjectURI]=t,"mergeGraph"in n&&n.mergeGraph&&(i=Object.assign(kS.C.Graphs,i)),kS.C.Graphs[n.subjectURI]=t,Object.keys(i).forEach(e=>{r.dataset.addAll(i[e].dataset)});var o={nodes:[],links:[],resources:n.resources},s=[];return r.out().quads().forEach(t=>{if("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"!=t.object.value){var n,r=8,i=8,a=!1,l=!1;switch(t.subject.termType){default:case"NamedNode":yi(t.subject.value)!=e&&(r=7);break;case"BlankNode":r=8}switch(t.object.termType){default:case"NamedNode":yi(t.object.value)!=e&&(i=7);break;case"BlankNode":i=8;break;case"Literal":i=4}if(t.subject.value.startsWith("http://example.com/.well-known/genid/")&&(r=8),t.object.value.startsWith("http://example.com/.well-known/genid/")&&(i=8),t.predicate.value==CS.rdf.type.value)switch(i=6,So(t.object.value)&&(r=10),t.object.value){case CS.qb.DataSet.value:i=11;break;case CS.doap.Specification.value:r=14;break;case CS.odrl.Agreement.value:case CS.odrl.Assertion.value:case CS.odrl.Offer.value:case CS.odrl.Policy.value:case CS.odrl.Privacy.value:case CS.odrl.Request.value:case CS.odrl.Set.value:case CS.odrl.Ticket.value:r=15;break;case CS.schema.Event.value:case CS.bibo.Event.value:case CS.bibo.Conference.value:r=16;break;case CS.bibo.Slide.value:r=17}switch("http://purl.org/ontology/bibo/presentedAt"==t.subject.value&&(i=16),cr.Event.Property.hasOwnProperty(t.predicate.value)&&(r=16),n=t.predicate.value,cr.Actor.Property.hasOwnProperty(n)&&(i=10),t.predicate.value.startsWith("http://purl.org/spar/cito/")&&(i=9),t.predicate.value){case CS.foaf.knows.value:r=10,i=10;break;case CS.spec.requirement.value:case CS.spec.requirementReference.value:i=12;break;case CS.spec.advisement.value:i=13;break;case CS.spec.testSuite.value:i=11;break;case CS.odrl.hasPolicy.value:i=15;break;case CS.skos.hasTopConcept.value:case CS.skos.inScheme.value:case CS.skos.semanticRelation.value:case CS.skos.topConceptOf.value:case CS.schema.audience.value:i=18}kS.C.Graphs[t.subject.value]&&(a=!0),kS.C.Graphs[t.object.value]&&(l=!0),t.subject.value==e&&(r=5,a=!0),t.object.value==e&&(i=5,l=!0);var c=t.object.value;"Literal"==t.object.termType&&(c=zi(c)),s.includes(t.subject.value)||(s.push(t.subject.value),o.nodes.push({id:t.subject.value,group:r,visited:a})),s.includes(t.object.value)||(t.object.value in kS.C.Resource&&kS.C.Resource[t.object.value].graph.out(CS.rdf.type).values.forEach(e=>{So(e)&&(i=10)}),s.push(c),o.nodes.push({id:c,group:i,visited:l})),o.links.push({source:t.subject.value,target:c,value:t.predicate.value})}}),s=void 0,Promise.resolve(o)},showGraph:function(e,t,n){kS.C.GraphViewerAvailable&&((n=n||{}).contentType=n.contentType||"text/html",n.subjectURI=n.subjectURI||location.href.split(location.search||location.hash||/[?#]/)[0],Array.isArray(e)?kS.U.showGraphResources(e,t,n):_o(e&&"filter"in n&&"predicates"in n.filter&&n.filter.predicates.length?n.filter.predicates[0]:CS.ldp.inbox.value,e||location.href.split(location.search||location.hash||/[?#]/)[0]).then(function(e){kS.U.showGraphResources(e[0],t,n)},function(e){console.log(e)}))},showGraphResources:function(e,t,n){t=t||gd(document),n=n||{},Array.isArray(e)&&(e=Li(e)),kS.U.processResources(e,n).then(r=>{var i=[];r.forEach(e=>{i.push(wo(e))}),Promise.allSettled(i).then(r=>{let i=lr.dataset();if(r.forEach(e=>{e.value&&i.addAll(e.value.dataset)}),n.filter){const e=function*(e,t){for(const n of e)("subjects"in t.filter&&t.filter.subjects.includes(n.subject.value)||"predicates"in t.filter&&t.filter.predicates.includes(n.predicate.value))&&(yield n)}(lr.grapoi({dataset:i}).out().quads(),n);i=lr.dataset(e)}n.contentType="text/turtle",n.resources=e,kS.U.showVisualisationGraph(n.subjectURI,i.toCanonical(),t,n)})})},processResources:function(e,t){return Array.isArray(e)?Promise.resolve(e):kS.U.getItemsList(e,t)},init:function(){kS.U.initAuth().then(()=>kS.C.init())},initAuth:async function(){return async function(){return cr.Session.handleRedirectFromLogin()}().then(()=>{cr.Session?console.log("Logged in: ",cr.Session.webId):console.log("No session")})},initUser:function(){dc("DO.C.User").then(e=>{e&&"object"in e&&(kS.C.User=qi(e.object.describes),cr.User.Graph||rd(cr.User.IRI).then(od))})},getContentNode:function(e){return gd(document)},initEditor:function(e={}){kS.Editor=new gS;const t=e.template||(cr.Editor.new?"new":null);e=t?{template:t}:{},kS.Editor.init(null,null,e)},setWebExtensionURL:function(){kS.C.WebExtensionBaseURL=cr.WebExtensionEnabled?cr.WebExtension.runtime.getURL(""):null},setDocumentURL:function(e){e=e||Qi(),kS.C.DocumentURL=yi(e)},setDocumentString:function(e){kS.C.DocumentString=fd(e)},setDocumentMode:async function(e){cr.Editor.mode=e||cr.Editor.mode;var t=wi("style");if(t.length){var n=(t=zi(t=t[0])).lastIndexOf("/");if(n=n>-1?t.substr(n+1):t,t.startsWith("http")){var r='<link class="do" href="'+vi(t)+'" media="all" rel="stylesheet" title="'+n+'" />';document.querySelector("head").insertAdjacentHTML("beforeend",r)}_i();var i=document.querySelectorAll('head link[rel~="stylesheet"][title]:not([href$="dokieli.css"])');kS.U.updateSelectedStylesheets(i,n)}var o=wi("open");if(o.length){if(o.length>1){let p=o.map(e=>`<a href="${e} rel="noopener" target="_blank">${e}</a>`).join(", ");var s=`Opening ${p}`;const f={content:`Opening ${p}`,type:"info",timer:1e4};Sd({...f,content:s},cr.MessageLog);kd(document.body,f);async function m(){return await Promise.all(o.map(async e=>{const t=await fetch(e);return"application/json"==t.headers.get("content-type")||"application/ld+json"==t.headers.get("content-type")?{name:e.split("/").pop(),type:t.headers.get("content-type"),content:JSON.stringify(await t.json())}:{name:e.split("/").pop(),type:t.headers.get("content-type"),content:await t.text()}}))}let g=await m();const v=g.map(e=>e.type).includes("text/csv")?"text:csv":"text/plain",y=o;let b={defaultStylesheet:!1,init:!0};await kS.U.spawnDokieli(document,g,v,y,b)}else o=zi(o=o[0]),o=decodeURIComponent(o),kS.U.openResource(o);let h=wi("graph-view");h.length&&"true"==h[0]&&kS.U.showVisualisationGraph(kS.C.DocumentURL,fd(),"#graph-view"),_i()}if(kS.C.GraphViewerAvailable){let w=wi("graph-view");w.length&&"true"==w[0]&&kS.U.showVisualisationGraph(kS.C.DocumentURL,fd(),"#graph-view");var a=wi("graph").map(e=>yi(e=zi(e)));if(a.length){var l={subjectURI:a[0],license:"https://creativecommons.org/publicdomain/zero/1.0/",title:a[0]},c=a.map(e=>`<a href="${e}">${e}</a>`).join(", ");s=`Loading graph(s) ${c}`;const _={content:`<span class="progress">${Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]} Loading graph(s) ${c}</span>`,type:"info",timer:3e3};Sd({..._,content:s},cr.MessageLog),kd(document.body,_),kS.U.showGraph(a,"#graph-view",l),_i()}}const u=wi("author"),d=wi("social");if(d.length&&"true"==d[0])cr.Editor.mode="social",_i();else if(u.length&&"true"==u[0])cr.Editor.mode="author",_i();else if("text/html"==kS.C.Resource[kS.C.DocumentURL].contentType){Ed(Ad(document))||(cr.Editor.mode="author",cr.Editor.new=!0)}},initServiceWorker:function(){"serviceWorker"in navigator&&!cr.WebExtensionEnabled&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then(()=>{console.log("Service Worker registered")}).catch(e=>{console.error("Service Worker registration failed:",e)})},initLocalStorage:function(){dc(kS.C.DocumentURL).then(e=>{e?e.autoSave&&(kS.C.AutoSave.Items[kS.C.DocumentURL]||={},kS.C.AutoSave.Items[kS.C.DocumentURL].localStorage||={},kS.C.AutoSave.Items[kS.C.DocumentURL].localStorage.updated=e.updated):sc(kS.C.DocumentURL,{method:"localStorage"})})},initDocumentActions:function(){document.addEventListener("click",e=>{var t=e.target.closest("button.close");if(t){var n=t.parentNode;n.parentNode.removeChild(n)}}),Pd(),document.addEventListener("click",e=>{var t=e.target.closest("button.signin-user");t&&(t.disabled=!0,td())}),jd(),document.addEventListener("click",e=>{var t=e.target.closest("button.toggle");t&&(t.closest("aside").classList.toggle("on"),window.history.replaceState({},null,cr.DocumentURL))}),Xd(),document.addEventListener("click",e=>{var t=e.target.closest("span.ref.do sup a");if(t){var n=new URL(t.href).hash,r=n.substring(1),i=document.querySelector('#document-notifications[class~="do"]:has(article[id="'+r+'"])');if(!n.length||!i)return;i.classList.contains("on")||(i.classList.add("on"),window.history.replaceState({},null,n))}});var e=kS.C.DocumentURL;e in kS.C.Resource&&"state"in kS.C.Resource[e]?(kS.U.processPotentialAction(kS.C.Resource[e]),kS.C.Resource[e].inbox?.length&&!kS.C.Inbox[kS.C.Resource[e].inbox[0]]&&kS.U.showNotificationSources(kS.C.Resource[e].inbox[0])):(Fd(kS.C.DocumentString).then(t=>{kS.U.processPotentialAction(t),kS.C.Resource[e].inbox?.length&&!kS.C.Inbox[kS.C.Resource[e].inbox[0]]&&kS.U.showNotificationSources(kS.C.Resource[e].inbox[0])}),kS.U.syncLocalRemoteResource()),kS.U.processActivateAction()},processActivateAction:function(){document.addEventListener("click",e=>{e.target.closest('[about="#document-menu"][typeof="schema:ActivateAction"], [href="#document-menu"][typeof="schema:ActivateAction"], [resource="#document-menu"][typeof="schema:ActivateAction"]')&&(e.preventDefault(),e.stopPropagation(),gd(document).classList.contains("on-document-menu")?kS.U.hideDocumentMenu(e):kS.U.showDocumentMenu(e))})},processChooseActions:function(){for(var e=document.querySelectorAll('[about="#feature-license-options"][typeof="schema:ChooseAction"], [href="#feature-license-options"][typeof="schema:ChooseAction"], [resource="#feature-license-options"][typeof="schema:ChooseAction"]'),t=0;t<e.length;t++)e[t].parentNode.replaceChild(Pi('<label class="do" for="feature-license-options">License</label> <select class="do" id="feature-license-options">'+ch()+"</select>"),e[t]);var n=document.querySelectorAll('[about="#feature-language-options"][typeof="schema:ChooseAction"], [href="#feature-language-options"][typeof="schema:ChooseAction"], [resource="#feature-language-options"][typeof="schema:ChooseAction"]');for(t=0;t<n.length;t++)n[t].parentNode.replaceChild(Pi('<label class="do" for="feature-language-options">Languages</label> <select class="do" id="feature-language-options">'+lh()+"</select>"),n[t])},processPotentialAction:function(e){var t=e.graph;t.out().quads().forEach(e=>{e.subject.value;var n=e.predicate.value,r=e.object.value;if(n==CS.schema.potentialAction.value){var i=r,o=("null"===document.location.origin?"file://":document.location.origin)+document.location.pathname;i.startsWith(o)&&document.addEventListener("click",e=>{var n=i.substr(i.lastIndexOf("#"));if(n){var r='[about="'+n+'"][typeof="schema:ViewAction"], [href="'+n+'"][typeof="schema:ViewAction"], [resource="'+n+'"][typeof="schema:ViewAction"]',o=e.target.closest(r);if(o){e.preventDefault(),e.stopPropagation();var s=t.node(lr.namedNode(i)).out(CS.schema.object).values;if(s.length){r="#"+o.closest("[id]").id;var a=document.querySelector(r+" svg");if(a)a.nextSibling.parentNode.removeChild(a.nextSibling),a.parentNode.removeChild(a);else{var l={};l.subjectURI=s[0],l.contentType="text/turtle",kS.U.showVisualisationGraph(l.subjectURI,t.dataset.toCanonical(),r,l)}}}}})}})},enableRemoteSync:async function(){await ic(kS.C.DocumentURL,{autoSave:!0}),kS.U.syncLocalRemoteResource()},disableRemoteSync:async function(){yc(),await ic(kS.C.DocumentURL,{autoSave:!1}),await sc(kS.C.DocumentURL,{method:"localStorage"})},monitorNetworkStatus:function(){let e;window.addEventListener("online",async()=>{console.log("online"),await kS.U.enableRemoteSync();const t=await dc(kS.C.DocumentURL);let n;n=!t||void 0===t.autoSave||t.autoSave?"You are back online. Your changes will be synced with the remote server.":"You are back online. Changes will be saved only locally because autosave is disabled. You can change this from the main menu.",n={content:n,type:"info"},Sd(n,cr.MessageLog),e=kd(document.body,n,e?{clearId:e}:{})}),window.addEventListener("offline",async()=>{console.log("offline"),await kS.U.disableRemoteSync();const t=await dc(kS.C.DocumentURL);let n;n=!t||void 0===t.autoSave||t.autoSave?"You are offline. Your changes will be saved locally and synced when you're back online.":"You are offline. Changes will be saved only locally because autosave is disabled. You can change this from the main menu.",n={content:n,type:"info",timer:null},Sd(n,cr.MessageLog),e=kd(document.body,n,e?{clearId:e}:{})})},syncLocalRemoteResource:async function(e={}){const t=kS.C.Resource[kS.C.DocumentURL]?.headers?.etag?.["field-value"];let n="text/html";const r={Accept:n};t&&(r["If-None-Match"]=t);let i,o,s,a,l,c,u,d,h,p={};const f=kS.C.Resource[kS.C.DocumentURL].digestSRI,m=Jd(kS.C.DocumentURL,"write");i=await dc(kS.C.DocumentURL);const g=!i||void 0===i.autoSave||i.autoSave;let v,y,b;if(i?.items?.length)for(const e of i.items){const t=await dc(e);if(t?.published&&!y&&(y=t),t?.published||b||(b=t),y&&b)break}v=fd();let w,_=await Fi(v);if(b){const{digestSRI:e,mediaType:t,content:r}=b;v=r,_=e,n=t}try{l=await Yi(kS.C.DocumentURL,r,{}),c=l.status,u=l.headers.get("ETag"),d=l.headers.get("Last-Modified"),h=l.headers.get("Date"),w=await l.text(),a=md(w),s=fd(a.documentElement),a=md(s),o=await Fi(s);let e={};cr.Resource[kS.C.DocumentURL].headers||(e.followLinkRelationTypes=["describedby"]),await zd(kS.C.DocumentURL,s,l,{storeHash:!0}),Hd(kS.C.DocumentURL,e)}catch(e){c=e.status||0,l=e.response,u=l?.headers.get("ETag"),d=l?.headers.get("Last-Modified"),h=l?.headers.get("Date"),s=kS.C.Resource[kS.C.DocumentURL].data,a=md(s),o=await Fi(s),l&&qd(l);var x="",S="",C="update",k=kS.C.DocumentURL;if(304!=c&&404!=c){switch(c){default:x=`Error (${c}).`,S=`Error (${c}).`;break;case 401:return void(kS.C.User.IRI?(x=`You do not have permission to ${C} <code>${k}</code>.`,S=`You do not have permission to ${C} <code>${k}</code>. Try signing in with a different account.`):(x="You are not signed in.",S=`You are not signed in. ${kS.C.Button.SignIn} and try again.`));case 403:return void(kS.C.User.IRI?(x=`You do not have permission to ${C} <code>${k}</code>.`,S=`You do not have permission to ${C} <code>${k}</code>. Try signing in with a different account or request access.`):(x="You are not signed in.",S=`You are not signed in. ${kS.C.Button.SignIn} and try again.`))}let e={content:S,type:"error",timer:null,code:c};Sd({...e,content:x},cr.MessageLog),kd(document.body,e)}}const E=Oi(d)||Oi(h)||Ni(),A=!(!r["If-None-Match"]||!u),T=A&&r["If-None-Match"]===u;if(_&&o&&_==o)console.log("Local and remote unchanged.");else{if(e.forceLocal||e.forceRemote){if(A&&!T&&!e.forceRemote&&304!==c)return p.message="Cannot force due to missing or changed ETag. Show review.",void kS.U.showResourceReviewChanges(v,s,l,p);if(A||console.log("ETags were not used. Assume user intent is valid."),e.forceLocal){if(!m)return void console.log("No Write access.");g||console.log("Remote autoSave is disabled. Asking to enable autosave-remote"),console.log("Force pushing local content.");const e=t?{"If-Match":t}:{};try{return void await kS.U.pushLocalContentToRemote(b,e)}catch(e){if(412!==e.status)throw new Error(`${e.status} Unhandled status ${e}`);kS.U.syncLocalRemoteResource()}return}if(e.forceRemote)return console.log("Force replacing with remote content."),async function(e,t){if(!t)return Promise.resolve();const n=await dc(e);if(!n)return;await cc(t);const r=n.items.indexOf(t);-1!==r&&n.items.splice(r,1)}(kS.C.DocumentURL,b.id),kS.Editor.replaceContent(kS.Editor.mode,a),kS.Editor.init(kS.Editor.mode,document.body),sc(kS.C.DocumentURL,{method:"localStorage",published:E}),void zd(kS.C.DocumentURL,fd(),l)}if(b){var I=document.implementation.createHTMLDocument("template");I.documentElement.setHTMLUnsafe(v);const e=I.body;if(kS.Editor.replaceContent(kS.Editor.mode,e),kS.Editor.init(kS.Editor.mode,document.body),y.digestSRI!==o&&304!==c)return p.message="Remote content has changed since your last edit and you have local unpublished changes.",void kS.U.showResourceReviewChanges(v,s,kS.C.Resource[kS.C.DocumentURL].response,p)}switch(c){case 200:if(console.log("Local or remote changed."),b)if(T||f==o){if(console.log("Local unpublished changes. Remote unchanged (200). Should update remote."),!g)return void console.log("remoteAutoSave is disabled.");if(!m)return void console.log("No Write access.");const e=t?{"If-Match":t}:{};try{return void await kS.U.pushLocalContentToRemote(b,e)}catch(e){if(412!==e.status)throw new Error(`${e.status} Unhandled status ${e}`);kS.U.syncLocalRemoteResource()}}else p.message="Local unpublished changes. Remote changed. Review changes.",kS.U.showResourceReviewChanges(v,s,l,p);else T&&f==o?(p.message="No local unpublished changes. Remote unchanged. Review changes.",kS.U.syncLocalRemoteResource()):(console.log("Local unchaged. Remote changed. Update local."),kS.Editor.replaceContent(kS.Editor.mode,a),kS.Editor.init(kS.Editor.mode,document.body),sc(kS.C.DocumentURL,{method:"localStorage",published:E}),zd(kS.C.DocumentURL,fd(),l));break;case 304:if(b){if(console.log("Local unpublished changes. Remote unchanged (304). Should update remote."),!g)return void console.log("remoteAutoSave is disabled.");if(!m)return void console.log("No Write access.");const e=t?{"If-Match":t}:{};try{return void await kS.U.pushLocalContentToRemote(b,e)}catch(e){if(412!==e.status)throw new Error(`${e.status} Unhandled status ${e}`);kS.U.syncLocalRemoteResource()}}break;case 404:if(console.log("Remote was deleted. Push local to remote."),!g)return void console.log("remoteAutoSave is disabled.");if(!m)return void console.log("No Write access.");try{return void await kS.U.pushLocalContentToRemote(b,{"If-None-Match":"*"})}catch(e){if(412!==e.status)throw new Error(`${e.status} Unhandled status ${e}`);kS.U.syncLocalRemoteResource()}break;case 403:console.log(`TODO: ${c} Request access because you lost access. Keep working in local.`);break;default:console.log(`TODO: ${c} Unhandled status code.`)}}},pushLocalContentToRemote:async function(e,t){const{id:n,content:r,mediaType:i}=e,o=await oo(kS.C.DocumentURL,r,i,null,{headers:t});console.log(`Remote updated (${o.status}).`),ic(n,{published:Ni()}),zd(kS.C.DocumentURL,r,o,{preserveHeaders:["wac-allow"]})},showResourceReviewChanges:function(e,t,n,r){if(!e.length||!t.length)return;const i=document.getElementById("review-changes");i&&i.remove();var o=document.implementation.createHTMLDocument("template");o.documentElement.setHTMLUnsafe(e);const s=o.body.getHTML().trim();var a=document.implementation.createHTMLDocument("template");a.documentElement.setHTMLUnsafe(t);const l=a.body.getHTML().trim();let c="";r?.message&&(c=`<p>${r?.message}</p>`),document.body.appendChild(Pi(`<aside id="review-changes" class="do on">${kS.C.Button.Close}<h2>Review Changes ${kS.C.Button.Info.ReviewChanges}</h2><div class="info">${c}</div></aside>`));const u=pm(l,s);let d=[],h=0,p=0;u.forEach(e=>{let t;e.added?(t="ins",h++):e.removed&&(t="del",p++),t?d.push("<"+t+">"+e.value+"</"+t+">"):d.push(e.value)});let f=`\n        <details>\n          <summary>More details about the changes</summary>\n          <table>\n            <caption>Differences</caption>\n            <thead>\n              <tr><th>Change</th><th>Count</th><th>Example</th></tr>\n            </thead>\n            <tbody>\n              <tr><td>Added</td><td>${h}</td><td><ins>This is an example text that was added.</ins></td></tr>\n              <tr><td>Removed</td><td>${p}</td><td><del>This is an example text that was removed.</del></td></tr>\n            </tbody>\n          </table>\n        </details>\n        `;var m=document.getElementById("review-changes");m.querySelector("h2 + div.info").insertAdjacentHTML("beforeend",f),m.insertAdjacentHTML("beforeend",`\n        <div class="do-diff">${d.join("")}</div>\n        <button class="review-changes-save-local" title="Keep my edits">Keep my changes</button>\n        <button class="review-changes-save-remote" title="Discard my edits and use remote version">Overwrite my changes</button>\n        <button class="review-changes-submit" title="Edit changes and apply them to both local and remote">Save</button>\n      `);const g=document.querySelector("#review-changes .do-diff");kS.Editor.init("author",g),m.addEventListener("click",e=>{var t=e.target.closest("button");if(t){if(t.classList.contains("close")||t.classList.contains("info"))return;var n=m.querySelector(".do-diff");t.classList.contains("review-changes-save-local")?kS.U.syncLocalRemoteResource({forceLocal:!0}):t.classList.contains("review-changes-save-remote")?kS.U.syncLocalRemoteResource({forceRemote:!0}):t.classList.contains("review-changes-submit")&&(n.querySelectorAll("del").forEach(e=>e.remove()),n.querySelectorAll("ins").forEach(e=>{const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);e.remove()}),kS.Editor.replaceContent(kS.Editor.mode,g.querySelector(".ProseMirror")),kS.Editor.init(kS.Editor.mode,document.body),sc(kS.C.DocumentURL,{method:"localStorage"}),kS.U.syncLocalRemoteResource({forceLocal:!0})),m.remove()}})},showDocumentInfo:function(){document.body.prepend(Pi(`<div class="do" id="document-menu">${kS.C.Button.OpenMenu}<div><section id="user-info"></section></div></div>`));var e=document.getElementById("user-info");document.querySelector("#document-menu").addEventListener("click",t=>{var n=t.target.closest("button");n&&(n.classList.contains("show")?kS.U.showDocumentMenu(t):n.classList.contains("hide")?kS.U.hideDocumentMenu(t):n.classList.contains("signout-user")&&async function(e){Di(e),e.insertAdjacentHTML("afterbegin",cr.Button.Menu.SignIn),document.querySelectorAll("aside.do blockquote[cite] article button.delete").forEach(e=>{e.parentNode.removeChild(e)}),$d(cr.DocumentURL).then(e=>{yc()})}(e))})},showDocumentMenu:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=document.querySelector("#document-menu.do");if(!t)return kS.U.showDocumentInfo(),void kS.U.showDocumentMenu();var n=t.querySelector("button"),r=t.querySelector("#user-info"),i=t.querySelector("div");n.parentNode.replaceChild(Pi(kS.C.Button.CloseMenu),n),t.classList.add("on"),ed(r),kS.U.showDocumentDo(i),kS.U.showAutoSave(i),kS.U.showViews(i),kS.U.showAboutDokieli(i),gd(document).classList.contains("on-slideshow")||kS.U.showDocumentItems();var o={reuse:!0};document.location.protocol.startsWith("http")&&(o.followLinkRelationTypes=["describedby"]),zd(kS.C.DocumentURL,fd(),null,o)},hideDocumentMenu:function(e){var t,n=document.querySelector("#document-menu.do"),r=n.querySelector("button");r.parentNode.replaceChild(Pi(kS.C.Button.OpenMenu),r),n.classList.remove("on"),n.querySelector("button.signin-user")&&(n.querySelector("button.signin-user").disabled=!1),void 0!==(t=kS.C.DocumentDoItems)&&(t=Array.isArray(t)?t:[t]).forEach(e=>{var t=document.getElementById(e);t&&t.parentNode.removeChild(t)})},showAutoSave:async function(e){if(e.querySelector("#document-autosave"))return;const t=await dc(kS.C.DocumentURL),n=Jd(kS.C.DocumentURL,"write");let r=void 0===t?.autoSave||t.autoSave;r=r&&n?' checked=""':"";let i=`\n      <section id="document-autosave">\n        <h2>Autosave</h2>\n        <label for="autosave-remote">Autosave</label> <input${r} id="autosave-remote" title="Keep changes local or sync to remote storage" type="checkbox" />\n      </section>\n      `;e.querySelector("#document-do").insertAdjacentHTML("afterend",i),document.getElementById("document-autosave").addEventListener("change",async e=>{e.target.checked?await kS.U.enableRemoteSync():await kS.U.disableRemoteSync()})},showAboutDokieli:function(e){if(document.querySelector("#about-dokieli"))return;const t=`\n      <section id="about-dokieli">\n        <dl>\n          <dt>About</dt>\n          <dd><img alt="" height="16" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAn1BMVEUAAAAAjwAAkAAAjwAAjwAAjwAAjwAAjwAAkAAAdwAAjwAAjQAAcAAAjwAAjwAAiQAAjwAAjAAAjwAAjwAAjwAAjwAAkAAAjwAAjwAAjwAAjQAAjQAAhQAAhQAAkAAAkAAAkAAAjgAAjwAAiQAAhAAAkAAAjwAAjwAAkAAAjwAAjgAAjgAAjQAAjwAAjQAAjwAAkAAAjwAAjQAAiwAAkABp3EJyAAAANHRSTlMA+fH89enaabMF4iADxJ4SiSa+uXztyoNvQDcsDgvl3pRiXBcH1M+ppJlWUUpFMq6OdjwbMc1+ZgAABAhJREFUeNrt29nSmkAQBeAGZBMUxH3f993/vP+zJZVKVZKCRhibyc3/XVt6SimYPjPSt28Vmt5W/fu2T/9B9HIf7Tp+0RsgDC6DY6OLvzxJj8341DnsakgZUNUmo2XsORYYS6rOeugukhnyragiq56JIs5UEQ/FXKgidRTzompEKOhG1biioDFV44mCAqrGAQWtqRptA8VMqCpR6zpo9iy84VO1opWHPBZVb9QAzyQN/D1YNungJ+DMSYsbOFvSIwGjR3p0wGiQHkMw2qRHC4w76RGBcSA9NmAcSY8QjAdpYiFbTJoYyNYnTWrI1iFNusj2JE1sZBuQJtyE5pImc3Y21cRhZ1NNtsh2Ik127HCsSY8djjVpINuVhPnjVefobee2adXqu2S/6FyivABDEjQ9Lxo1pDlNd5wg24ikRK5ngKGhHhg1DSgZk4RrD6pa9LlRAnUBfWp6xCe+6EOvOT6yrmrigZaCZHPAp6b0gaiBFKvRd0/D1rr1OrvxDqiyoZmmPt9onib0t/VybyEXqdu0Cw16rUNVAfZFlzdjr5KOaoAUK6JsrgWGQapuBlIS4gy70gEmTrk1fuAgU40UxWXv6wvZAC2Dqfx0BfBK1z1H0aJ0WH7Ub4oG8JDlpBCgK1l5tSjHQSoAf0HVfMqxF+yqpzVk2ZGuAGdk8ijPHZlmpOCg0vh5cgE2JtN3qQSoU3lXpbKlLRegrzTpt+U2TNpKY2YiFiA0kS1Q6QccweZ/oinASm2B3RML0AGDNAU4qq3udmIXYVttD3YrFsBR24N1xG5EJpTeaiYWwILS5WRKBfChFsCSehpOwKi/yS0V4AsMWym3TWUFgMqIsRYL8AVOSDlaYgEitbZnDKll+UatchyJBSC1c3lDuQA2VHYAL3KneHpgLCjHSS7AHYyEciwh1g88wDB94rlyAVxwhsR7ygW4gRMTry8XwDdUDkXFgjVdD5wRsRaCAWJwPGI1Baval8Ie3Hqn8AjjhHbZr2DzrInumDTBGlCG8xy8QPY3MNLX4TiRP1q+BWs2pn9ECwu5+qTABc+80h++28UbTkjlTW3wrM6Ufrtu8d5J9Svg1Vch/RTcUYQdUHm+g1z1x2gSGyjGGVN5F7xjoTCjE0ndC3jJMzfCftmiciZ1lNGe3vCGufOWVMLIQHHehi3X1O8JJxR236SalUzninbu937BlwfV/I3k4KdGk2xm+MHuLa8Z0i9TC280qLRrF+8cw9RSjrOg8oIG8j2YgULsbGPomsgR0x9nsOzkOLh+kZr1owZGbfC2JJl78fIV0Wei/gxZDl85XWVtt++cxhuSEQ6bdfzLjlvM86PbaD4vQUjSglV8385My7CdXtO9+ZSyrLcf7nBN376V8gMpRztyq6RXYQAAAABJRU5ErkJggg==" width="16" /><a href="https://dokie.li/" rel="noopener" target="_blank">dokieli</a> is an ${Ri[".fab.fa-osi"]} <a href="https://git.dokie.li/" rel="noopener" target="_blank">open source</a> project. There is ${Ri[".fas.fa-flask"]} <a href="https://dokie.li/docs" rel="noopener" target="_blank">documentation</a> and public ${Ri[".fas.fa-comments"]} <a href="https://matrix.to/#/%23dokieli:matrix.org" rel="noopener" target="_blank">chat</a>. Made with fun.</dd>\n        </dl>\n      </section>`;e.insertAdjacentHTML("beforeend",t)},showXHRProgressHTML:function(e,t){"progress"in t&&(e.upload.onprogress=function(e){e.lengthComputable&&(t.progress.value=e.loaded/e.total*100,t.progress.textContent=t.progress.value)})},setDocRefType:function(){var e=document.querySelector('head link[rel="stylesheet"][title]');e&&(kS.C.DocRefType=e.getAttribute("title")),-1==Object.keys(kS.C.RefType).indexOf(kS.C.DocRefType)&&(kS.C.DocRefType="LNCS")},generateCSSBasedOnCurrentDocumentIcons:function(){var e,t,n,r=function(e){let t="";return Object.entries(e).forEach(([e,n])=>{t+=`i${e} { background-image: url("${function(e){return`data:image/svg+xml,${e=(e=e.replace(/ class="[^"]*"/g,"").replace(/ fill="[^"]*"/g,"").replace(/>\s+</g,"><").trim()).replace(/</g,"%3c").replace(/>/g,"%3e").replace(/"/g,"'").replace(/\n/g,"").replace(/\r/g,"")}`}(n)}"); }\n`}),t}((e=Array.from(document.querySelectorAll('i[class*="fa-"]')).flatMap(e=>Array.from(e.classList)).filter(e=>e.startsWith("fa-")),t=[...new Set(e)],n=Object.entries(Ri).filter(([e])=>t.some(t=>e.includes(t))).sort(([e],[t])=>e.localeCompare(t)),Object.fromEntries(n)));console.log(r)},getCurrentLinkStylesheet:function(){return document.querySelector('head link[rel="stylesheet"][title]:not([href$="dokieli.css"]):not([disabled])')},showViews:function(e){if(!document.querySelector("#document-views")){var t=document.querySelectorAll('head link[rel~="stylesheet"][title]:not([href$="dokieli.css"])'),n='<section id="document-views"><h2>Views</h2>'+Ri[".fas.fa-magic"]+"<ul>";if(kS.C.GraphViewerAvailable&&(n+='<li><button class="resource-visualise" title="Change to graph view">Graph</button></li>'),n+='<li><button title="Change to native device/browser view">Native</button></li>',t.length)for(var r=0;r<t.length;r++){var i=t[r],o=i.getAttribute("title");i.closest('[rel~="alternate"]')?n+='<li><button title="Change to \u2018'+o+'\u2019 view">'+o+"</button></li>":n+='<li><button disabled="disabled" title="Current style">'+o+"</button></li>"}n+="</ul></section>",e.insertAdjacentHTML("beforeend",zi(n));var s=document.querySelectorAll('#document-views button:not([class~="resource-visualise"])');for(let e=0;e<s.length;e++)s[e].removeEventListener("click",kS.U.initCurrentStylesheet),s[e].addEventListener("click",kS.U.initCurrentStylesheet);kS.C.GraphViewerAvailable&&document.querySelector("#document-views").addEventListener("click",e=>{if(e.target.closest(".resource-visualise")){if(document.querySelector("#graph-view"))return;e&&(e.target.disabled=!0),document.body.appendChild(Pi(`<aside id="graph-view" class="do on">${kS.C.Button.Close}<h2>Graph view ${kS.C.Button.Info.GraphView}</h2><div class="info"></div></aside>`)),document.getElementById("graph-view").addEventListener("click",e=>{if(e.target.closest("button.close")){var t=document.querySelector("#document-views .resource-visualise");t&&(t.disabled=!1)}}),kS.U.showVisualisationGraph(kS.C.DocumentURL,void 0,"#graph-view")}})}},updateSelectedStylesheets:function(e,t){t=t.toLowerCase();for(var n=0;n<e.length;n++)(function(e){e.getAttribute("title").toLowerCase()!=t&&(e.disabled=!0,e.setAttribute("rel","stylesheet alternate"))})(e[n]);for(let n=0;n<e.length;n++)(function(e){e.getAttribute("title").toLowerCase()==t&&(e.setAttribute("rel","stylesheet"),e.disabled=!1)})(e[n])},initCurrentStylesheet:function(e){var t=kS.U.getCurrentLinkStylesheet();t=t?t.getAttribute("title"):"";var n=e&&e.target?e.target.textContent.toLowerCase():t.toLowerCase(),r=document.querySelectorAll('head link[rel~="stylesheet"][title]:not([href$="dokieli.css"])');kS.U.updateSelectedStylesheets(r,n);for(var i=document.querySelectorAll("#document-views button"),o=0;o<i.length;o++)i[o].disabled=!(!e||!e.target||e.target.textContent!=i[o].textContent);if(kS.U.showRefs(),"shower"==n){var s=document.querySelectorAll(".slide");for(o=0;o<s.length;o++)s[o].classList.add("do");gd(document).classList.add("on-slideshow","list"),document.querySelector("head").insertAdjacentHTML("beforeend",'<meta content="width=792, user-scalable=no" name="viewport" />');var a=gd(document),l=document.querySelector("#document-menu.do");if(l){var c=l.querySelector("button");c.parentNode.replaceChild(Pi(kS.C.Button.CloseMenu),c),l.classList.remove("on"),a.classList.remove("on-document-menu");var u=l.querySelectorAll("section");for(o=0;o<u.length;o++)u[o].parentNode.removeChild(u[o])}var d=document.getElementById("table-of-contents");d=!!d&&d.parentNode.removeChild(d),cm.initRun()}if("shower"==t.toLowerCase()){s=document.querySelectorAll(".slide");for(var h=0;h<s.length;h++)s[h].classList.remove("do");gd(document).classList.remove("on-slideshow","list","full"),gd(document).removeAttribute("style");var p=document.querySelector('head meta[name="viewport"][content="width=792, user-scalable=no"]');p=!!p&&p.parentNode.removeChild(p),history.pushState(null,null,window.location.pathname),cm.removeEvents()}},showEmbedData:function(e){if(!document.querySelector("#embed-data-in-html")){e.target.setAttribute("disabled","disabled");var t=document.querySelectorAll('head script[id^="meta-"]'),n={"meta-turtle":{mediaType:"text/turtle",scriptStart:'<script id="meta-turtle" title="Turtle" type="text/turtle">',cdataStart:"# "+kS.C.CDATAStart+"\n",cdataEnd:"\n# "+kS.C.CDATAEnd,scriptEnd:"<\/script>"},"meta-json-ld":{mediaType:"application/ld+json",scriptStart:'<script id="meta-json-ld" title="JSON-LD" type="application/ld+json">',cdataStart:kS.C.CDATAStart+"\n",cdataEnd:"\n"+kS.C.CDATAEnd,scriptEnd:"<\/script>"},"meta-trig":{mediaType:"application/trig",scriptStart:'<script id="meta-trig" title="TriG" type="application/trig">',cdataStart:"# "+kS.C.CDATAStart+"\n",cdataEnd:"\n# "+kS.C.CDATAEnd,scriptEnd:"<\/script>"}},r={};if(t.length)for(var i=0;i<t.length;i++){var o=t[i],s=o.id;r[s]=o.getHTML().split(/\r\n|\r|\n/),r[s].shift(),r[s].pop(),r[s]={type:o.getAttribute("type")||"",title:o.getAttribute("title")||"",content:r[s].join("\n")}}var a=`\n        <aside id="embed-data-entry" class="do on tabs">${kS.C.Button.Close}\n          <h2>Embed Data ${kS.C.Button.Info.EmbedData}</h2>\n          <div class="info"></div>\n          <nav><ul><li class="selected"><a href="#embed-data-turtle">Turtle</a></li><li><a href="#embed-data-json-ld">JSON-LD</a></li><li><a href="#embed-data-trig">TriG</a></li></ul></nav>\n          <div id="embed-data-turtle" class="selected"><textarea placeholder="Enter data in Turtle" name="meta-turtle" cols="80" rows="24">${r["meta-turtle"]?r["meta-turtle"].content:""}</textarea><button class="save" title="Embed data into document">Save</button></div>\n          <div id="embed-data-json-ld"><textarea placeholder="Enter data in JSON-LD" name="meta-json-ld" cols="80" rows="24">${r["meta-json-ld"]?r["meta-json-ld"].content:""}</textarea><button class="save" title="Embed data into document">Save</button></div>\n          <div id="embed-data-trig"><textarea placeholder="Enter data in TriG" name="meta-trig" cols="80" rows="24">${r["meta-trig"]?r["meta-trig"].content:""}</textarea><button class="save" title="Embed data into document">Save</button></div>\n        </aside>\n        `;document.body.appendChild(Pi(a)),document.querySelector("#embed-data-turtle textarea").focus();var l=document.querySelectorAll("#embed-data-entry nav a");for(let e=0;e<l.length;e++)l[e].addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();var t=e.target.parentNode;if(!t.classList.contains("selected")){document.querySelector("#embed-data-entry nav li.selected").classList.remove("selected"),t.classList.add("selected"),document.querySelector("#embed-data-entry > div.selected").classList.remove("selected");var n=document.querySelector("#embed-data-entry > div"+e.target.hash);n.classList.add("selected"),n.querySelector("textarea").focus()}});document.querySelector("#embed-data-entry button.close").addEventListener("click",e=>{document.querySelector("button.embed-data-meta").removeAttribute("disabled")});var c=document.querySelectorAll("#embed-data-entry button.save");for(let e=0;e<c.length;e++)c[e].addEventListener("click",e=>{var t=e.target.closest(".selected").querySelector("textarea"),r=t.getAttribute("name"),i=t.value.trim(),o=document.getElementById(r);n[r]&&i.length?go(i,n[r].mediaType,n[r].mediaType,{sanitize:!0}).then(e=>{o?o.textContent=n[r].cdataStart+e+n[r].cdataEnd:document.querySelector("head").insertAdjacentHTML("beforeend",n[r].scriptStart+n[r].cdataStart+e+n[r].cdataEnd+n[r].scriptEnd)}):o.parentNode.removeChild(o);var s=document.getElementById("embed-data-entry");s.parentNode.removeChild(s),document.querySelector(".embed-data-meta").removeAttribute("disabled")})}},showDocumentMetadata:function(e){if(!document.querySelector("#document-metadata")){var t,n=kS.C.DocumentURL,r=Ad(document),i=kS.U.contentCount(r),o=[],s=[],a=[],l=[],c=[],u=[],d=[],h=kS.C.Resource[n].graph,p=Object.keys(kS.C.Citation).concat([CS.dcterms.references.value,CS.schema.citation.value]),f=h.out().quads();for(const e of f){e.subject.value;var m=e.predicate.value;e.object.value;p.includes(m)&&c.push(e)}u=kS.C.Resource[n].spec&&kS.C.Resource[n].spec.requirement?Object.keys(kS.C.Resource[n].spec.requirement):[],d=kS.C.Resource[n].spec&&kS.C.Resource[n].spec.advisement?Object.keys(kS.C.Resource[n].spec.advisement):[],t=kS.C.Resource[n].skos?kS.C.Resource[n].skos:[],p='<tr class="citations"><th>Citations</th><td>'+c.length+"</td></tr>",u='<tr class="requirements"><th>Requirements</th><td>'+u.length+"</td></tr>",d='<tr class="advisements"><th>Advisements</th><td>'+d.length+"</td></tr>";var g=[],v='<tr class="concepts"><th>Concepts</th><td>'+(g=t.type&&t.type[CS.skos.Concept.value]?t.type[CS.skos.Concept.value]:g).length+"</td></tr>",y='<tr class="statements"><th>Statements</th><td>'+h.out().terms.length+"</td></tr>",b=Zo(h),w=Qo(h),_=Ko(h),x=Xo(h);b&&(b.forEach(e=>{let t=us(h.node(lr.namedNode(e)));t=t===e?ds(e):t,a.push(`<li>${t}</li>`)}),a.length&&(a='<tr class="people"><th>Editors</th><td><ul class="editors">'+a.join("")+"</ul></td></tr>")),w&&(w.forEach(e=>{let t=us(h.node(lr.namedNode(e)));t=t===e?ds(e):t,o.push(`<li>${t}</li>`)}),o.length&&(o='<tr class="people"><th>Authors</th><td><ul class="authors">'+o.join("")+"</ul></td></tr>")),_&&(_.forEach(e=>{let t=us(h.node(lr.namedNode(e)));t=t===e?ds(e):t,s.push(`<li>${t}</li>`)}),s.length&&(s='<tr class="people"><th>Contributors</th><td><ul class="contributors">'+s.join("")+"</ul></td></tr>")),x&&(x.forEach(e=>{let t=us(h.node(lr.namedNode(e)));t=t===e?ds(e):t,l.push(`<li>${t}</li>`)}),l.length&&(l='<tr class="people"><th>Performers</th><td><ul class="performers">'+l.join("")+"</ul></td></tr>"));var S='<section id="document-metadata"><table>\n        <caption>Document Metadata</caption>\n        <tbody>\n          '+(o+a+s+l+p+u+d+v+y)+"\n          <tr><th>Reading time</th><td>"+i.readingTime+" minutes</td></tr>\n          <tr><th>Characters</th><td>"+i.chars+"</td></tr>\n          <tr><th>Words</th><td>"+i.words+"</td></tr>\n          <tr><th>Bytes</th><td>"+i.bytes+"</td></tr>\n        </tbody>\n      </table></section>";e.insertAdjacentHTML("beforeend",zi(S))}},contentCount:function(e){var t=(e=function(e,t){t=Array.isArray(t)?t:[t];const n=(e.nodeType===Node.DOCUMENT_NODE?e.documentElement:e).cloneNode(!0),r=t.map(e=>`.${e}`).join(",");return n.querySelectorAll(r).forEach(e=>{e.parentNode.removeChild(e)}),n}(e=e||Ad(document),"do"))instanceof Element&&"html"===e.tagName.toLowerCase()?dd():"",n=e.textContent.trim(),r={readingTime:1,words:0,chars:0,lines:0,pages:{A4:1,USLetter:1},bytes:0};if(n.length){var i=e.ownerDocument.defaultView.getComputedStyle(e,null)["line-height"],o=Math.ceil(e.clientHeight/parseInt(i));r={readingTime:Math.ceil(n.split(" ").length/200),words:n.match(/\S+/g).length,chars:n.length,lines:o,pages:{A4:Math.ceil(o/47),USLetter:Math.ceil(o/63)},bytes:encodeURI(t+e.outerHTML).split(/%..|./).length-1}}return r},showExtendedConcepts:function(){var e=kS.C.DocumentURL,t=kS.C.Resource[e].citations,n=[];t.forEach(e=>{n.push(wo(e))});var r=lr.dataset(),i=[],o={resources:[]};return Promise.allSettled(n).then(e=>e.filter(e=>"fulfilled"===e.status&&e.value).map(e=>e.value)).then(e=>{e.forEach(e=>{if(e&&e.out().terms.length){var t=e.term.value;e=lr.grapoi({dataset:e.dataset}),kS.C.Resource[t]=kS.C.Resource[t]||{},kS.C.Resource[t].graph=e,kS.C.Resource[t].skos=Wd(e),kS.C.Resource[t].title=ls(e)||t,kS.C.Resource[t].skos.graph.out().terms.length&&(i.push('<section><h4><a href="'+t+'">'+kS.C.Resource[t].title+"</a></h4><div><dl>"+kS.U.getDocumentConceptDefinitionsHTML(t)+"</dl></div></section>"),r.addAll(kS.C.Resource[t].skos.graph.dataset),o.resources.push(t))}});var t="list-of-additional-concepts";i='<section id="'+t+'"><h3>Additional Concepts</h3><div><button class="graph">View Graph</button><figure></figure>'+i.join("")+"</div></section>";var n=document.getElementById(t);n&&n.parentNode.removeChild(n);var s=document.getElementById("list-of-concepts"),a=s.querySelector("#include-concepts");a&&a.parentNode.removeChild(a),s.querySelector("div").insertAdjacentHTML("beforeend",zi(i)),n=document.getElementById(t),window.history.replaceState(null,null,"#"+t),n.scrollIntoView();var l="#"+t+" figure";return n.addEventListener("click",e=>{var t=e.target.closest("button.graph");t&&(t.parentNode.removeChild(t),o.subjectURI=kS.C.DocumentURL,o.contentType="text/turtle",kS.U.showVisualisationGraph(o.subjectURI,r.toCanonical(),l,o))}),r})},getDocumentConceptDefinitionsHTML:function(e){var t="";return Object.keys(kS.C.Resource[e].skos.type).forEach(n=>{t+="<dt>"+kS.C.SKOSClasses[n]+"s</dt>",n==CS.skos.Concept.value&&(t+="<dd><ul>"),$i(kS.C.Resource[e].skos.type[n]).forEach(r=>{var i=$i(hs(kS.C.Resource[e].graph.node(lr.namedNode(r))));(i=(i=i.length?i.join(" / "):Ai(r)).trim(),i='<a href="'+r+'">'+i+"</a>",n==CS.skos.Concept.value)?t+="<li>"+i+"</li>":(t+="<dd>",t+="<dl>",t+="<dt>"+i+"</dt><dd><ul>",[CS.skos.hasTopConcept.value,CS.skos.member.value].forEach(n=>{var i=kS.C.Resource[e].skos.data[r][n];i?.length&&$i(i).forEach(n=>{var r=hs(kS.C.Resource[e].graph.node(lr.namedNode(n)));(r=r.length?r:[Ai(n)]).forEach(e=>{e=e.trim(),console.log(e),t+='<li><a href="'+n+'">'+e+"</a></li>"})})}),t+="</ul></dd></dl>",t+="</dd>")}),n==CS.skos.Concept.value&&(t+="</ul></dd>")}),t},showDocumentCommunicationOptions:function(e){var t=[],n=kS.C.DocumentURL;!function r(){if(kS.C.Resource[n].headers?.linkHeaders?.has("rel","describedby")){var i=kS.C.Resource[n].headers.linkHeaders.rel("describedby");i.every(e=>void 0!==kS.C.Resource[e.uri]?.graph)?(i.forEach(e=>{void 0!==kS.C.Resource[e.uri]?.graph&&t.push(kS.U.getCommunicationOptions(kS.C.Resource[e.uri].graph,{subjectURI:n}))}),t.forEach(t=>{e.insertAdjacentHTML("beforeend",zi(t));var r=document.querySelectorAll("#"+e.id+' [id^="notification-subscriptions-"]');kS.U.buttonSubscribeNotificationChannel(r,n)})):window.setTimeout(r,250)}else window.setTimeout(r,250)}()},showDocumentItems:function(){var e=document.getElementById("document-items");e&&e.parentNode.removeChild(e);var t=document.getElementById("document-menu");document.body.insertBefore(Pi('<aside id="document-items" class="do on">'+kS.C.Button.Close+"</aside>"),t.nextSibling),e=document.getElementById("document-items");var n=Ad(document).querySelectorAll("section:not(section section):not([id^=table-of]):not([id^=list-of])");kS.U.showListOfStuff(e),kS.U.showHighlightStructuredData(e),n.length&&(kS.U.showTableOfContents(e,n),kS.C.SortableList&&kS.C.EditorEnabled&&kS.U.sortToC()),kS.U.showDocumentMetadata(e),kS.U.showDocumentCommunicationOptions(e)},showHighlightStructuredData:function(e){if(e){var t=Ad(document),n=`<section id="highlight-data"><h2>Highlight Data</h2><ul><li><input id="highlight-structured-data" name="highlight-structured-data" type="checkbox" ${t.classList.contains("highlight-structure")?'checked="checked"':""}/> <label for="highlight-structured-data">Structure</label></li></ul></section>`;e.insertAdjacentHTML("beforeend",n),document.querySelector("#highlight-data").addEventListener("change",e=>{var n=e.target.closest("#highlight-structured-data");n&&(n.checked?t.classList.add("highlight-structure"):t.classList.remove("highlight-structure"))})}},showListOfStuff:function(e){if(e){var t="",n=[];kS.C.EditorEnabled||(t=' disabled="disabled"'),Object.keys(kS.C.ListOfStuff).forEach(e=>{var r="",i=kS.C.ListOfStuff[e].label;kS.C.ListOfStuff[e].selector;document.getElementById(e)&&(r=' checked="checked"'),n.push('<li><input id="l-o-s-'+e+'" type="checkbox"'+t+r+'/><label for="l-o-s-'+e+'">'+i+"</label></li>")}),n.length&&(e.insertAdjacentHTML("beforeend",'<section id="list-of-stuff"><h2>List of Stuff</h2><ul>'+n.join("")+"</ul></section>"),kS.C.EditorEnabled&&document.getElementById("list-of-stuff").addEventListener("click",e=>{if(e.target.closest("input")){var t=e.target.id.slice(6);if(e.target.getAttribute("checked")){var n=document.getElementById(t);n&&(n.parentNode.removeChild(n),document.querySelectorAll('body *:not([id="references"]) cite + .ref:not(.do)').forEach(e=>{e.parentNode.removeChild(e)})),e.target.removeAttribute("checked"),window.history.replaceState(null,null,window.location.pathname)}else kS.U.buildListOfStuff(t),e.target.setAttribute("checked","checked"),window.location.hash="#"+t}}))}},showTableOfContents:function(e,t,n){n=n||{};var r=kS.C.SortableList&&kS.C.EditorEnabled?" sortable":"";if(e){var i='<section id="table-of-contents-i"'+r+"><h2>"+kS.C.ListOfStuff["table-of-contents"].label+'</h2><ol class="toc'+r+'">';i+=kS.U.getListOfSections(t,{sortable:kS.C.SortableList}),i+="</ol></section>",e.insertAdjacentHTML("beforeend",zi(i))}},sortToC:function(){},getListOfSections:function(e,t){var n="",r="";1==(t=t||{}).sortable&&(r=' class="sortable"');for(var i=0;i<e.length;i++){var o=e[i];if(o.id){var s=o.querySelector("h1, h2, h3, h4, h5, h6, header h1, header h2, header h3, header h4, header h5, header h6")||{textContent:o.id},a="",l=' data-id="'+o.id+'"';if(t.raw||(a=document.location.hash=="#"+o.id?' class="selected"':"",r=""),s){n+="<li"+a+l+'><a href="#'+o.id+'">'+s.textContent+"</a>";var c=o.parentNode.querySelectorAll('[id="'+o.id+'"] > div > section[rel*="hasPart"]:not([class~="slide"]), [id="'+o.id+'"] > section[rel*="hasPart"]:not([class~="slide"])');c.length&&(n+="<ol"+r+">",n+=kS.U.getListOfSections(c,t),n+="</ol>"),n+="</li>"}}}return n},buildListOfStuff:function(e){var t="",n=kS.C.DocumentURL,r=Ad(document);if("references"==e)Qd();else{var i=kS.C.ListOfStuff[e].label,o=kS.C.ListOfStuff[e].selector,s=kS.C.ListOfStuff[e].titleSelector,a=r.querySelectorAll('*:not([class~="do"]) '+o);if("table-of-contents"==e||"list-of-concepts"==e||a.length){var l=document.getElementById(e);switch(l&&l.parentNode.removeChild(l),e){default:t+='<nav id="'+e+'">',t+="<h2>"+i+"</h2>",t+='<div><ol class="toc">';break;case"list-of-abbreviations":t+='<section id="'+e+'">',t+="<h2>"+i+"</h2>",t+="<div><dl>";break;case"list-of-quotations":t+='<section id="'+e+'">',t+="<h2>"+i+"</h2>",t+="<div><ul>";break;case"list-of-concepts":t+='<section id="'+e+'">',t+="<h2>"+i+"</h2>";var c=kS.C.Resource[n].citations||[];c.length&&(t+='<div><p id="include-concepts"><button class="add">Include concepts</button> from <data value="'+c.length+'">'+c.length+"</data> external references.</p>"),t+="<dl>";break;case"table-of-requirements":case"table-of-advisements":t+='<section id="'+e+'">',t+="<h2>"+i+"</h2>",t+="<div><table>"}if("table-of-contents"==e){var u=Ad(document);t+=kS.U.getListOfSections(u.querySelectorAll("section:not(section section)"),{raw:!0})}else if("table-of-requirements"==e)t+="<caption>Conformance Requirements and Test Coverage</caption>",t+='<thead><tr><th colspan="3">Requirement</th></tr><tr><th>Subject</th><th>Level</th><th>Statement</th></tr></thead>',t+="<tbody>",Object.keys(kS.C.Resource[n].spec.requirement).forEach(e=>{var r=kS.C.Resource[n].spec.requirement[e][CS.spec.statement.value]||e,i=document.querySelector('#document-latest-published-version [rel~="rel:latest-version"]');i=i?i.href:e,r='<a href="'+(i=e.replace(yi(e),i))+'">'+r+"</a>";var o=kS.C.Resource[n].spec.requirement[e][CS.spec.requirementSubject.value],s=o||'<span class="warning">?</span>';s.startsWith("http")&&(s=bi(o)||Ci(o)||s);var a='<a href="'+o+'">'+s+"</a>",l=kS.C.Resource[n].spec.requirement[e][CS.spec.requirementLevel.value],c=l||'<span class="warning">?</span>';c.startsWith("http")&&(c=bi(l)||Ci(l)||c),t+='<tr about="'+i+'">',t+="<td>"+a+"</td>",t+="<td>"+('<a href="'+l+'">'+c+"</a>")+"</td>",t+="<td>"+r+"</td>",t+="</tr>"}),t+="</tbody>";else if("table-of-advisements"==e)t+="<caption>Non-normative Advisements</caption>",t+='<thead><tr><th colspan="2">Advisement</th></tr><tr><th>Level</th><th>Statement</th></tr></thead>',t+="<tbody>",Object.keys(kS.C.Resource[n].spec.advisement).forEach(e=>{var r=kS.C.Resource[n].spec.advisement[e][CS.spec.statement.value]||e,i=document.querySelector('#document-latest-published-version [rel~="rel:latest-version"]');i=i?i.href:e,r='<a href="'+(i=e.replace(yi(e),i))+'">'+r+"</a>";var o=kS.C.Resource[n].spec.advisement[e][CS.spec.advisementLevel.value],s=o||'<span class="warning">?</span>';s.startsWith("http")&&(s=bi(o)||Ci(o)||s),t+='<tr about="'+i+'">',t+="<td>"+('<a href="'+o+'">'+s+"</a>")+"</td>",t+="<td>"+r+"</td>",t+="</tr>"}),t+="</tbody>";else if("list-of-abbreviations"==e){a.length&&(a=[].slice.call(a)).sort((e,t)=>e.textContent.toLowerCase().localeCompare(t.textContent.toLowerCase()));for(var d=[],h=0;h<a.length;h++)d.includes(a[h].textContent)||(t+="<dt>"+a[h].textContent+"</dt>",t+="<dd>"+a[h].getAttribute(s)+"</dd>",d.push(a[h].textContent))}else if("list-of-concepts"==e)t+=kS.U.getDocumentConceptDefinitionsHTML(n);else{d=[];for(let n=0;n<a.length;n++){var p,f;(p="list-of-quotations"==e?a[n].getAttribute(s):a[n].querySelector(s))&&(f="list-of-quotations"==e?_d(a[n],".do").textContent:_d(p,".do").textContent,d.indexOf(f)<0&&("list-of-quotations"==e?t+="<li><q>"+f+'</q>, <a href="'+p+'">'+p+"</a></li>":a[n].id?t+='<li><a href="#'+a[n].id+'">'+f+"</a></li>":t+="<li>"+f+"</li>",d.push(f)))}}switch(e){default:t+="</ol></div>",t+="</nav>";break;case"list-of-abbreviations":case"list-of-concepts":t+="</dl></div>",t+="</section>";break;case"list-of-quotations":t+="</ul></div>",t+="</section>";break;case"table-of-requirements":t+="</table></div>",t+="</section>"}}}if(Td(document,t,{id:e}),"table-of-requirements"==e){var m={noCredentials:!0},g=kS.C.Resource[n].graph.out(CS.spec.testSuite).values;if(g.length){var v=g[0];wo(v,null,m).then(t=>{t&&kS.U.insertTestCoverageToTable(e,t)}).catch(e=>{console.log(e)})}var y=kS.C.Resource[n].graph.out(CS.rel["predecessor-version"]).values;if(y.length){v=y[0];var b=kS.C.Resource[n].graph,w=b.term.value,_="Diff requirements with the predecessor version",x=document.getElementById(e);x.querySelector("thead").querySelector("tr > th").insertAdjacentHTML("beforeend",'<button id="include-diff-requirements" class="do add" disabled="disabled" title="'+_+'">'+Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]+"</button>"),wo(v,null,m).then(e=>{if(e){var t=e.term.value,n=document.getElementById("include-diff-requirements");n.setHTMLUnsafe(zi(Ri[".fas.fa-plus-minus"])),n.disabled=!1,n.addEventListener("click",n=>{var r=n.target.closest("button");r&&(r.classList.contains("add")?(r.classList.remove("add"),r.classList.add("remove"),r.setAttribute("title","Show requirements"),r.setHTMLUnsafe(zi(Ri[".fas.fa-list-check"])),r.classList.contains("checked")||(kS.U.diffRequirements(b,e),r.classList.add("checked")),x.querySelectorAll("tbody tr").forEach(e=>{var n=e.getAttribute("about"),r=e.querySelector("td:nth-child(3)");n=n.replace(yi(n),w);var i=t+"#"+bi(n);r.setHTMLUnsafe(zi(kS.C.Resource[w].spec.requirement[n].diff[i].statement))})):r.classList.contains("remove")&&(r.classList.remove("remove"),r.classList.add("add"),r.setAttribute("title",_),r.setHTMLUnsafe(zi(Ri[".fas.fa-plus-minus"])),x.querySelectorAll("tbody tr").forEach(e=>{var t=e.getAttribute("about"),n=e.querySelector("td:nth-child(3)"),r=w+"#"+bi(t),i=kS.C.Resource[w].spec.requirement[r][CS.spec.statement.value]||t;n.setHTMLUnsafe(zi('<a href="'+t+'">'+i+"</a>"))})))})}})}}"list-of-concepts"==e&&document.getElementById(e).addEventListener("click",e=>{var t=e.target.closest("button.add");t&&(t.disabled=!0,t.insertAdjacentHTML("beforeend",Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]),kS.U.showExtendedConcepts())})},diffRequirements:function(e,t){kS.C.DocumentURL;var n=e.term.value,r=t.term.value,i=Vd(e),o=Vd(t),s=Object.values(kS.C.Resource[n].spec.change);Object.keys(i).forEach(e=>{kS.C.Resource[n].spec.requirement[e].diff={};var t=i[e][CS.spec.statement.value]||"",a=r+"#"+bi(e);kS.C.Resource[n].spec.requirement[e].diff[a]={};var l="";o[a]&&(l=o[a][CS.spec.statement.value]||"");var c=s.filter(t=>t[CS.spec.changeSubject.value]==e)[0],u="";if(c){var d=c[CS.spec.changeClass.value],h=c[CS.spec.statement.value];if(d)h&&(h="<dt>Change Description</dt><dd>"+h+"</dd>"),u='<details><summary>Changelog</summary><dl><dt>Change Class</dt><dd><a href="'+d+'">'+(kS.C.ChangeClasses[d]||d)+"</a></dd>"+h+"</dl></details>"}var p=pm(l,t),f=[];p.forEach(e=>{var t="span";e.added?t="ins":e.removed&&(t="del"),f.push("<"+t+">"+e.value+"</"+t+">")}),kS.C.Resource[n].spec.requirement[e].diff[a].statement=f.join("")+u})},insertTestCoverageToTable(e,t){var n=document.getElementById(e),r=n.querySelector("thead");r.querySelector("tr:first-child").insertAdjacentHTML("beforeend",'<th colspan="2">Coverage</th>'),r.querySelector("tr:nth-child(2)").insertAdjacentHTML("beforeend","<th>Test Case (Review Status)</th>");var i=[];(t=lr.grapoi({dataset:t.dataset})).out().quads().forEach(e=>{i.push(e.subject.value)}),i=Li(i);var o,s=[],a=document.querySelector('#document-latest-published-version [rel~="rel:latest-version"]').href;i.forEach(e=>{var n=t.node(lr.namedNode(e)),r=n.term.value,i=fs(n);if(i.length&&i.includes(CS["test-description"].TestCase.value)){var o=n.out(CS.spec.requirementReference).values[0];o&&o.startsWith(a)&&(s[r]={},s[r][CS.spec.requirementReference.value]=o,s[r][CS["test-description"].reviewStatus.value]=n.out(CS["test-description"].reviewStatus).values[0],s[r][CS.dcterms.title.value]=n.out(CS.dcterms.title).values[0])}}),n.querySelectorAll("tbody tr").forEach(e=>{var t=e.querySelector("td:nth-child(3) a").href;Object.keys(s).forEach(n=>{if(s[n][CS.spec.requirementReference.value]==t){var r='<a href="'+n+'">'+(s[n][CS.dcterms.title.value]||n)+"</a>";if(s[n][CS["test-description"].reviewStatus.value]){var i=s[n][CS["test-description"].reviewStatus.value];r+=' (<a href="'+i+'">'+(bi(i)||Ci(i)||i)+"</a>)"}r="<li>"+r+"</li>";var o=e.querySelector("td:nth-child(4)");o?o.querySelector("ul").insertAdjacentHTML("beforeend",r):e.insertAdjacentHTML("beforeend","<td><ul>"+r+"</ul></td>")}}),e.querySelector("td:nth-child(4)")||e.insertAdjacentHTML("beforeend",'<td><span class="warning">?</span></td>')}),n.insertAdjacentHTML("beforeend","<tfoot><tr>"+((o=[]).push('<dl id="test-description-review-statuses">'),Object.keys(cr.TestDescriptionReviewStatus).forEach(e=>{o.push("<dt>"+bi(e)+"</dt>"),o.push("<dd>"+cr.TestDescriptionReviewStatus[e]+"</dd>")}),o.push("</dl>"),o.join("")+"</tr></tfoot>"))},eventEscapeDocumentMenu:function(e){27==e.keyCode&&kS.U.hideDocumentMenu(e)},eventLeaveDocumentMenu:function(e){e.target.closest(".do.on")||kS.U.hideDocumentMenu(e)},utf8Tob64:function(e){return window.btoa(encodeURIComponent(e))},b64Toutf8:function(e){return unescape(decodeURIComponent(window.atob(e)))},getSelectorSign:function(e){if(!e)return kS.C.SelectorSign["*"];if("object"==typeof e){var t=e.nodeName.toLowerCase(),n="";if(e.id)switch(t){default:break;case"section":case"dl":n="#"+e.id}return kS.C.SelectorSign[t+n]||kS.C.SelectorSign[t]||kS.C.SelectorSign["*"]}return kS.C.SelectorSign["*"]},showFragment:function(e){for(var t=e?document.querySelectorAll(e):document.querySelectorAll("main *[id]:not(input):not(textarea):not(select):not(#content)"),n=0;n<t.length;n++)t[n].addEventListener("mouseenter",e=>{var t=document.querySelector('*[id="'+e.target.id+'"] > .do.fragment');if(!t&&"aside"!=e.target.parentNode.nodeName.toLowerCase()){const i=kS.U.getSelectorSign(e.target);e.target.insertAdjacentHTML("afterbegin",'<span class="do fragment"><a href="#'+e.target.id+'">'+i+"</a></span>");var n=(t=document.querySelector('[id="'+e.target.id+'"] > .do.fragment')).clientWidth,r=0;kS.U.getOffset(e.target).left-kS.U.getOffset(gd(document)).left>200&&(r=e.target.offsetLeft),t.style.top=Math.ceil(e.target.offsetTop)+"px",t.style.left=r-n+"px",t.style.height=e.target.clientHeight+"px",t.style.width=n-10+"px"}}),t[n].addEventListener("mouseleave",e=>{var t=document.querySelector('[id="'+e.target.id+'"] > .do.fragment');t&&t.parentNode&&t.parentNode.removeChild(t)})},getOffset:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}},initCopyToClipboard:function(){["pre","table"].forEach(e=>{Ad(document).querySelectorAll(e).forEach(e=>{e.insertAdjacentHTML("afterend",kS.C.Button.Clipboard),uh(e,e.nextElementSibling)})})},generateFilename:function(e,t){var n=function(e){var t=new URL(e),n=t.pathname.split("/");return(n=n.filter(function(e){return""!==e})).pop()||t.hostname}(e=e||kS.C.DocumentURL);return n=n+"."+(Ni().replace(/[^\w]+/gi,"")||"now")+(t.filenameExtension||".txt")},exportAsDocument:function(e,t={}){e=e||fd();var n=t.mediaType||"text/html",r=t.subjectURI||kS.C.DocumentURL,i=new Blob([e],{type:n+";charset=utf-8"}),o=document.createElement("a");o.download=kS.U.generateFilename(r,t),o.href=window.URL.createObjectURL(i),o.style.display="none",gd(document).appendChild(o),o.click(),gd(document).removeChild(o),window.URL.revokeObjectURL(o.href)},showRobustLinks:function(e,t){e&&(e.target.closest("button").disabled=!0);var n=t||document.querySelectorAll('cite > a[href^="http"][data-versionurl][data-versiondate]');document.body.appendChild(Pi('<aside id="robustify-links" class="do on">'+kS.C.Button.Close+`<h2>Robustify Links  ${kS.C.Button.Info.RobustLinks}</h2><div class="info"></div><div id="robustify-links-input"><p><input id="robustify-links-select-all" type="checkbox" value="true"/><label for="robustify-links-select-all">Select all</label></p><p><input id="robustify-links-reuse" type="checkbox" value="true" checked="checked"/><label for="robustify-links-reuse">Reuse Robustifed</label></p><ul id="robustify-links-list"></ul></div><button class="robustify" title="Robustify Links">Robustify</button></aside>`));var r={};n.forEach(e=>{r[e.href]||(r[e.href]={node:e,"data-versionurl":e.getAttribute("data-versionurl"),"data-versiondate":e.getAttribute("data-versiondate")})});var i=document.querySelectorAll('cite > a[href^="http"]:not([data-versionurl]):not([data-versiondate])');document.querySelector("#robustify-links-input").insertAdjacentHTML("afterbegin",'<p class="count"><data>'+i.length+"</data> candidates.</p>");var o=document.querySelector("#robustify-links-list");i.forEach(e=>{var t='<li><input id="'+e.href+'" type="checkbox" value="'+e.href+'" /> <label for="'+e.href+'"><a href="'+e.href+'" rel="noopener" target="_blank" title="'+e.textContent+'">'+e.href+"</a></label>";t+="</li>",o.insertAdjacentHTML("beforeend",t)}),document.getElementById("robustify-links").addEventListener("click",function(e){if(e.target.closest("button.close")){var t=document.querySelector("#document-do .robustify-links");t&&(t.disabled=!1)}if(e.target.closest("button.robustify")){e.target.disabled=!0;document.querySelectorAll("#robustify-links-list input:checked").forEach(t=>{var n={showRobustLinksDecoration:!1,showActionMessage:!1},i=document.querySelector('cite > a[href="'+t.value+'"]:not([data-versionurl]):not([data-versiondate])');t.parentNode.insertAdjacentHTML("beforeend",'<span class="progress" data-to="'+t.value+'">'+Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]+"</span>");var o=document.querySelector('#robustify-links-list .progress[data-to="'+t.value+'"]'),s=!1;document.querySelector("#robustify-links-reuse").checked&&Object.keys(r).forEach(e=>{t.value==e&&(o.setHTMLUnsafe(zi('<a href="'+r[e]["data-versionurl"]+'" rel="noopener" target="_blank">'+Ri[".fas.fa-archive"]+"</a>")),i.setAttribute("data-versionurl",r[e]["data-versionurl"]),i.setAttribute("data-versiondate",r[e]["data-versiondate"]),Xd(i.closest("cite")),s=!0)}),s||kS.U.createRobustLink(t.value,i,n).then(function(e){var n="data-versionurl"in e?e["data-versionurl"]:e.href;"data-versionurl"in e&&"data-versiondate"in e&&(r[t.value]={node:i,"data-versionurl":e["data-versionurl"],"data-versiondate":e["data-versiondate"]}),o.setHTMLUnsafe(zi('<a href="'+n+'" rel="noopener" target="_blank">'+Ri[".fas.fa-archive"]+"</a>")),Xd(i.closest("cite"))}).catch(e=>{o.setHTMLUnsafe(zi(Ri[".fas.fa-times-circle"]+" Unable to archive. Try later."))}),e.target.disabled=!1})}if(e.target.closest("#robustify-links-select-all")){var n=document.querySelectorAll("#robustify-links-list input");e.target.checked?n.forEach(e=>{e.setAttribute("checked","checked"),e.checked=!0}):n.forEach(e=>{e.removeAttribute("checked"),e.checked=!1})}e.target.closest("#robustify-links-list input")&&(e.target.getAttribute("checked")?e.target.removeAttribute("checked"):e.target.setAttribute("checked","checked"))})},createRobustLink:function(e,t,n){return kS.U.snapshotAtEndpoint(void 0,e,"https://web.archive.org/save/","",{Accept:"*/*",showActionMessage:!1}).then(r=>{if(r){var i={href:e},o=r.location;if("string"==typeof o){var s=o.split("/")[4];if(s){var a=s.substr(0,4)+"-"+s.substr(4,2)+"-"+s.substr(6,2)+"T"+s.substr(8,2)+":"+s.substr(10,2)+":"+s.substr(12,2)+"Z";t.setAttribute("data-versionurl",o),t.setAttribute("data-versiondate",a),i["data-versionurl"]=o,i["data-versiondate"]=a}}if(n.showActionMessage=!("showActionMessage"in n)||n.showActionMessage,n.showActionMessage){var l=`Archived <a href="${e}">${e}</a> at <a href="${o}">${o}</a> and created RobustLink.`;Sd(l={content:l,type:"success"},cr.MessageLog),kd(document.body,l)}return n.showRobustLinksDecoration&&Xd(),i}return Promise.reject()})},snapshotAtEndpoint:function(e,t,n,r,i={}){var o,s,a;t=t||Qi(),n=n||"https://pragma.archivelab.org/",i.noCredentials=!0,i.showActionMessage=!("showActionMessage"in i)||i.showActionMessage,s=Ri[".fas.fa-times-circle.fa-fw"],a=Ri[".fas.fa-archive"]+" Archived at ";var l={403:s+" Archive unavailable. Please try later.",504:s+" Archive timeout. Please try later."};if(i.showActionMessage){var c=e.target.closest("button");if(void 0!==e&&c){if(c.disabled)return;c.disabled=!0;var u=c.parentNode,d="Archiving in progress.";Sd(d={content:d,type:"info"},cr.MessageLog),u.insertAdjacentHTML("beforeend",' <span class="progress">'+Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]+" "+d.content+"</span>")}o=u.querySelector(".progress")}var h=function(e){if(i.showActionMessage){var t=l[e.status];Sd(t={content:t,type:"error",timer:3e3},cr.MessageLog),o.setHTMLUnsafe(zi(l[e.status]))}return Promise.reject(l[e.status])},p=function(e){if(i.showActionMessage){var t=a+'<a rel="noopener" target="_blank" href="'+e.location+'">'+e.location+"</a>";Sd(t={content:t,type:"success"},cr.MessageLog),o.setHTMLUnsafe(zi(t.content))}return Promise.resolve(e)},f=function(e){var t=e.headers.get("Link");if(t&&t.length){var n=uo.parse(t);if(n.has("rel","memento")){var r={response:e,location:n.rel("memento")[0].uri};return p(r)}}return h(e)};if("https://web.archive.org/save/"===n){var m=n+t;return Yi(m=kS.C.WebExtensionEnabled?m:vi(m,{forceProxy:!0}),{Accept:"*/*"},i).then(e=>{let t=e.headers.get("Content-Location");return t&&t.length?t.startsWith("/web/")?p({response:e,location:"https://web.archive.org"+t}):e.text().then(t=>{var n=(t=zi(t)).match(/var redirUrl = "([^"]*)";/);if(n&&n[1].startsWith("/web/")){var r={response:e,location:"https://web.archive.org"+n[1]};return p(r)}return f(e)}):f(e)}).catch(e=>h(e))}return r=r||{url:t,annotation:{"@context":"http://www.w3.org/ns/anno.jsonld","@type":"Annotation",motivation:"linking",target:t,rights:"https://creativecommons.org/publicdomain/zero/1.0/"}},kS.C.User.IRI&&(r.annotation.creator={},r.annotation.creator["@id"]=kS.C.User.IRI),kS.C.User.Name&&(r.annotation.creator["http://schema.org/name"]=kS.C.User.Name),kS.C.User.Image&&(r.annotation.creator["http://schema.org/image"]=kS.C.User.Image),kS.C.User.URL&&(r.annotation.creator["http://schema.org/url"]=kS.C.User.URL),"contentType"in i||(i.contentType="application/json"),io(n,"",JSON.stringify(r),i.contentType,null,i).then(e=>e.json()).then(e=>{if(e.wayback_id){var t;let n="https://web.archive.org"+e.wayback_id;return i.showActionMessage&&(Sd(t={content:t=a+'<a href="'+n+'" rel="noopener" target="_blank">'+n+"</a>",type:"info"},cr.MessageLog),o.setHTMLUnsafe(zi(t.content))),{response:e,location:n}}return i.showActionMessage&&(Sd(t={content:t=l[e.status],type:"error"},cr.MessageLog),o.setHTMLUnsafe(zi(t.content))),Promise.reject(l[e.status])}).catch(e=>{if(i.showActionMessage){var t=l[e.response.status];Sd(t={content:t,type:"error"},cr.MessageLog),o.setHTMLUnsafe(zi(t.content))}})},generateFeed:function(e){e.target.disabled=!0,document.body.appendChild(Pi(`<aside id="generate-feed" class="do on">${kS.C.Button.Close}<h2>Generate Feed ${kS.C.Button.Info.GenerateFeeds}</h2><div class="info"></div></aside>`));var t=document.getElementById("generate-feed");t.addEventListener("click",e=>{e.target.closest("button.close")&&(document.querySelector("#document-do .generate-feed").disabled=!1)});var n="",r="location-generate-feed",i="write";t.insertAdjacentHTML("beforeend",'<fieldset id="'+r+'-fieldset"><legend>Save to</legend></fieldset>'),n=t.querySelector("fieldset#"+r+"-fieldset"),kS.U.setupResourceBrowser(n,r,i);var o=kS.C.User.IRI&&kS.C.User.Name?kS.C.User.Name+"'s":"Example's";n.insertAdjacentHTML("beforeend",'<p id="'+r+'-samp">Feed will be generated at: <samp id="'+r+"-"+i+'"></samp></p><ul><li><label for="'+r+'-title">Title</label> <input type="text" placeholder="'+o+' Web Feed" name="'+r+'-title" value=""></li><li><label for="'+r+'-language">Language</label> <select id="'+r+'-language" name="'+r+'-language">'+lh()+'</select></li><li><label for="'+r+'-license">License</label> <select id="'+r+'-license" name="'+r+'-license">'+ch()+"</select></li><li>"+kS.U.getFeedFormatSelection()+'</li></ul><button class="create" title="Save to destination">Generate</button>');var s=document.getElementById(r+"-input");s.focus(),s.placeholder="https://example.org/path/to/feed.xml",t.addEventListener("click",e=>{if(e.target.closest("button.create")){var t=document.getElementById("generate-feed"),n=t.querySelector("#"+r+"-"+i).innerText.trim(),o=t.querySelector(".response-message");if(o&&o.parentNode.removeChild(o),n.length){var s={},a=kS.C.MediaTypes.Feed[0],l=t.querySelector('select[id="feed-format"]');l.length&&(a=kS.C.MediaTypes.Feed.indexOf(l.value)>-1?l.value:a,s.contentType=a);var c,u,d,h=t.querySelector('input[name="'+r+'-title"]').value||n,p=t.querySelector('select[name="'+r+'-language"]').value,f=t.querySelector('select[name="'+r+'-license"]').value,m=[],g=t.querySelectorAll("#"+r+'-ul input[type="checkbox"]:checked');(g=Array.from(g)).length&&(m=g.map(e=>e.value)),(c=m,u=[],d={},c.forEach(function(e){u.push(Yi(e).then(t=>{var n=t.headers.get("Content-Type"),r={};return r.contentType=n?n.split(";")[0].toLowerCase().trim():"text/turtle",r.subjectURI=t.url,r.storeHash=!0,t.text().then(e=>Fd(e,r)).catch(function(t){return console.error(`Error fetching ${e}:`,t.message),Promise.resolve()})}).then(t=>{d[e]=t}))}),Promise.all(u).then(()=>d)).then(e=>{var t={self:n,title:h,language:p,license:f,author:{},origin:new URL(n).origin,items:e};return kS.C.User.IRI&&(t.author.uri=kS.C.User.IRI,kS.C.User.Name&&(t.author.name=kS.C.User.Name)),t=function(e,t){t=t||{};var n="",r="language"in e?"<language>"+e.language+"</language>":"",i="title"in e?"<title>"+e.title+"</title>":"<title>"+e.self+"</title>",o="",s="",a="",l="",c="",u="",d=Ni(),h=new Date(d).getFullYear(),p=[];switch(Object.keys(e.items).forEach(n=>{var r="",i=n,o=new URL(i).origin,s="",a=[],l="title"in e.items[n]?"<title>"+e.items[n].title+"</title>":"",c=e.items[n].description.replace(/(data|src|href)=(['"])([^'"]+)(['"])/gi,(e,t,n,r,s)=>`${t}="${/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(r)?r:(r.startsWith("/")?o:i)+"/"+r}"`);c=ad(ld(c));var u="",d="",h="";switch(t.contentType){case"application/atom+xml":"author"in e.items[n]&&void 0!==e.items[n].author&&e.items[n].author.forEach(t=>{var n=`    <author>\n      <uri>${t.uri}</uri>${"name"in t?`\n      <name>${t.name}</name>`:""}${"email"in t?`\n      <email>${t.email}</email>`:""}\n    </author>`;t.uri==e.author.uri?a.unshift(n):a.push(n)}),u="published"in e.items[n]&&void 0!==e.items[n].published?"<published>"+e.items[n].published+"</published>":"",d="updated"in e.items[n]&&void 0!==e.items[n].updated?"<updated>"+e.items[n].updated+"</updated>":"",c="description"in e.items[n]?'<content type="html">'+c+"\n      </content>":"",h="license"in e.items[n]?'<link rel="license" href="'+e.items[n].license+'" />':"",r="\n  <entry>\n    <id>"+i+'</id>\n    <link href="'+i+'" />\n    '+l+"\n    "+u+"\n    "+d+"\n    "+h+"\n"+a.join("\n")+"\n    "+c+"\n  </entry>";break;case"application/rss+xml":"author"in e.items[n]&&void 0!==e.items[n].author&&("email"in(s=e.items[n].author.find(t=>t.uri===e.author.uri)||e.items[n].author[0])?(s=s.name?`${s.email} (${s.name})`:s.email,a.push("<author>"+s+"</author>")):"uri"in s&&a.push("<dc:creator>"+(s.name?s.name:s.uri)+"</dc:creator>")),u="updated"in e.items[n]&&void 0!==e.items[n].updated?"<pubDate>"+new Date(e.items[n].updated).toUTCString()+"</pubDate>":"published"in e.items[n]&&void 0!==e.items[n].published?"<pubDate>"+new Date(e.items[n].published).toUTCString()+"</pubDate>":"",c="description"in e.items[n]?"<description>"+c+"</description>":"",r="\n    <item>\n      <guid>"+i+"</guid>\n      "+l+"\n      "+u+"\n      "+a.join("")+"\n      "+c+"\n    </item>"}p.push(r)}),t.contentType){case"application/atom+xml":"author"in e&&"uri"in e.author&&(u=`\n  <author>\n    <uri>${e.author.uri}</uri>\n    ${"name"in e.author?`<name>${e.author.name}</name>`:""}\n  </author>`,a="name"in e.author?" "+e.author.name:""),c="description"in e?"<summary>"+e.description+"</summary>":"","license"in e&&(s='<link rel="license" href="'+e.license+'" />',l=" . License: "+e.license),a="<rights>Copyright "+h+a+l+" . Rights and license are feed only.</rights>",o='<generator uri="https://dokie.li/">dokieli</generator>',n='<feed xmlns="http://www.w3.org/2005/Atom">\n  '+i+'\n  <link href="'+e.self+'" rel="self" />\n  <id>'+e.self+"</id>\n  <updated>"+d+"</updated>\n  "+a+"\n  "+s+"\n  "+o+"\n"+u+"\n"+p.join("")+"\n</feed>\n";break;case"application/rss+xml":d=new Date(d).toUTCString(),"author"in e&&(u=e.author.name||e.author.uri||"",a="name"in e.author?" "+e.author.name:"",u&&(u=`<dc:creator>${u}</dc:creator>`)),c="description"in e?"<description>"+e.description+"</description>":"title"in e?"<description>"+e.title+"</description>":"<description>"+e.self+"</description>",o="<generator>https://dokie.li/</generator>","license"in e&&(l=" . License: "+e.license),a="<copyright>Copyright "+h+a+l+" . Rights and license are feed only.</copyright>",n='<?xml version="1.0" encoding="utf-8"?>\n<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">\n  <channel>\n    <atom:link href="'+e.self+'" rel="self" type="application/rss+xml" />\n    <link>'+e.origin+"</link>\n    "+i+"\n    <pubDate>"+d+"</pubDate>\n    "+a+"\n    "+o+"\n    "+r+"\n    "+u+"\n    "+c+"\n"+p.join("")+"\n  </channel>\n</rss>\n"}return n}(t,s),t}).then(r=>{var i=t.querySelector("progress");i&&i.parentNode.removeChild(i),e.target.insertAdjacentHTML("afterend",'<progress min="0" max="100" value="0"></progress>'),i=t.querySelector("progress"),oo(n,r,s.contentType,null,{progress:i}).then(e=>{i.parentNode.removeChild(i);let r=e.url||n;t.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="success">Document saved at <a href="'+r+'" rel="noopener" target="_blank">'+r+"</a></p></div>"),window.open(r,"_blank")}).catch(e=>{console.log("Error saving document. Status: "+e.status)})})}else t.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">Specify the location to generate the feed to.</p></div>')}})},mementoDocument:function(e){if(void 0!==e){var t=e.target.closest("button");if(t.disabled)return;t.disabled=!0,kS.C.ButtonStates["resource-memento"]=!1}Od()},showDocumentDo:function(e){if(e.querySelector("#document-do"))return;var t=`<section id="document-do"><h2>Do</h2><ul>${[kS.C.Button.Menu.Share,kS.C.Button.Menu.Reply,kS.C.Button.Menu.Notifications,kS.C.Button.Menu.New,kS.C.Button.Menu.EditEnable,kS.C.Button.Menu.Open,kS.C.Button.Menu.Save,kS.C.Button.Menu.SaveAs,kS.C.Button.Menu.Version,kS.C.Button.Menu.Immutable,kS.C.Button.Menu.Memento,kS.C.Button.Menu.RobustifyLinks,kS.C.Button.Menu.InternetArchive,kS.C.Button.Menu.GenerateFeed,kS.C.Button.Menu.Export,kS.C.Button.Menu.Source,kS.C.Button.Menu.EmbedData,kS.C.Button.Menu.Print,kS.C.Button.Menu.Delete,kS.C.Button.Menu.MessageLog].map(e=>`<li>${e}</li>`).join("")}</ul></section>`;e.insertAdjacentHTML("beforeend",t),document.getElementById("document-do").addEventListener("click",e=>{var t;if(e.target.closest(".resource-share")&&kS.U.shareResource(e),e.target.closest(".resource-reply")&&kS.U.replyToResource(e),t=e.target.closest("button.editor-disable")){t.closest("li");t.outerHTML=kS.C.Button.Menu.EditEnable,kS.U.hideDocumentMenu(),kS.Editor.toggleEditor("social"),lc(kS.C.DocumentURL,{method:"localStorage",saveSnapshot:!0})}else(t=e.target.closest("button.editor-enable"))&&(t.closest("li"),t.outerHTML=kS.C.Button.Menu.EditDisable,kS.U.hideDocumentMenu(),kS.Editor.toggleEditor("author"),ac(kS.C.DocumentURL,{method:"localStorage"}));if(e.target.closest(".resource-notifications")&&kS.U.showNotifications(e),e.target.closest(".resource-new")&&kS.U.createNewDocument(e),e.target.closest(".resource-open")&&kS.U.openDocument(e),e.target.closest(".resource-source")&&kS.U.viewSource(e),e.target.closest(".embed-data-meta")&&kS.U.showEmbedData(e),e.target.closest(".resource-save")&&kS.U.resourceSave(e),e.target.closest(".resource-save-as")&&kS.U.saveAsDocument(e),e.target.closest(".resource-memento")&&kS.U.mementoDocument(e),(e.target.closest(".create-version")||e.target.closest(".create-immutable"))&&kS.U.resourceSave(e),e.target.closest(".export-as-html")){var n={subjectURI:kS.C.DocumentURL,mediaType:"text/html",filenameExtension:".html"};kS.U.exportAsDocument(fd(),n)}if(e.target.closest(".robustify-links")&&kS.U.showRobustLinks(e),e.target.closest(".snapshot-internet-archive")&&kS.U.snapshotAtEndpoint(e,kS.C.DocumentURL,"https://web.archive.org/save/","",{Accept:"*/*",showActionMessage:!0}),e.target.closest(".generate-feed")&&kS.U.generateFeed(e),e.target.closest(".resource-print"))return window.print(),!1;e.target.closest(".resource-delete")&&kS.U.resourceDelete(e,kS.C.DocumentURL),e.target.closest(".message-log")&&kS.U.showMessageLog(e)})},showMessageLog:function(e,t){var n;e.target.closest("button").disabled=!0,kS.C.MessageLog&&kS.C.MessageLog.length?(n='<table role="log"><caption>Messages</caption><thead><tr><th>Date/Time</th><th>Message</th><th>Type</th></tr></thead><tbody>',Object.keys(kS.C.MessageLog).forEach(e=>{n+="<tr><td><time>"+kS.C.MessageLog[e].dateTime+"</time></td><td>"+kS.C.MessageLog[e].content+"</td><td>"+kS.C.MessageLog[e].type+"</td></tr>"}),n+="</tbody></table>"):n="<p>No messages.</p>",document.body.appendChild(Pi('<aside id="message-log" class="do on">'+kS.C.Button.Close+`<h2>Message Log ${kS.C.Button.Info.MessageLog}</h2><div class="info"></div><div>`+n+"</div></aside>")),document.querySelector("#message-log button.close").addEventListener("click",e=>{document.querySelector("button.message-log").removeAttribute("disabled")})},resourceDelete:function(e,t,n){t&&(e.target.closest("button").disabled=!0,document.body.appendChild(Pi('<aside id="delete-document" class="do on">'+kS.C.Button.Close+`<h2>Delete ${kS.C.Button.Info.Delete}</h2><div class="info"></div><div><p>Are you sure you want to delete the following document?</p><p><code>`+t+'</code></p></div><button class="cancel" title="Cancel delete">Cancel</button><button class="delete" title="Delete document">Delete</button></aside>')),document.querySelector("#delete-document").addEventListener("click",e=>{if(!e.target.closest("button.info")){e.preventDefault(),e.stopPropagation();var n=e.target.closest("button.close")||e.target.closest("button.cancel"),r=e.target.closest("button.delete");if(n){var i=n.parentNode;i.parentNode.removeChild(i);var o=document.querySelector("#document-do .resource-delete");o&&(o.disabled=!1)}else r&&Xi(t).then(e=>{kS.Editor.toggleEditor("author",{template:"new"});var n="",r="";switch(e.status){case 200:case 204:default:n=`Deleted <code>${t}</code>.`,r=`Deleted <code>${t}</code>.`;break;case 202:n=`Deleting <code>${t}</code> in progress.`,r=`Deleting <code>${t}</code> in progress.`}const i={content:r,type:"success",timer:3e3,code:e.status};Sd({...i,content:n},cr.MessageLog),kd(document.body,i)}).catch(e=>{var n="",r="";let i="delete";if(e.status)switch(e.status){case 401:kS.C.User.IRI?(n=`You do not have permission to ${i} <code>${t}</code>.`,r=`You do not have permission to ${i} <code>${t}</code>. Try signing in with a different account.`):(n="You are not signed in.",r=`You are not signed in. ${kS.C.Button.SignIn} and try again.`);break;case 403:default:kS.C.User.IRI?(n=`You do not have permission to ${i} <code>${t}</code>.`,r=`You do not have permission to ${i} <code>${t}</code>. Try signing in with a different account or request access.`):(n+="You are not signed in.",r=`You are not signed in. ${kS.C.Button.SignIn} and try again.`);break;case 409:n=`It was not possible to ${i} <code>${t}</code>.`,r=`It was not possible to ${i} <code>${t}</code> because something changed in the meantime. Please reload the document and try again later.`}const o={content:r,type:"error",timer:null,code:e.status};Sd({...o,content:n},cr.MessageLog),kd(document.body,o)})}}))},resourceSave:function(e,t){var n=Qi();Fd(fd(),t=t||{}).then(t=>{"new"==kS.C.DocumentAction||"open"==kS.C.DocumentAction?kS.U.saveAsDocument(e):e.target.closest(".create-version")?function(e,t,n){if(e){Id(document,{id:"document-created",property:"schema:dateCreated",title:"Created"});var r,i,o=ji(),s=e.substr(0,e.lastIndexOf("/")+1),a=s+o;i={id:"document-identifier",title:"Identifier"},r={rel:"owl:sameAs",href:a},Nd(document,[r],i),i={id:"document-latest-version",title:"Latest Version"},r={rel:"rel:latest-version",href:a},Nd(document,[r],i),cr.OriginalResourceInfo["latest-version"]&&(i={id:"document-predecessor-version",title:"Predecessor Version"},r={rel:"rel:predecessor-version",href:cr.OriginalResourceInfo["latest-version"]},Nd(document,[r],i)),so(s,o,t=fd(),n).then(e=>Cd(e)).catch(e=>Cd(null,e)),i={id:"document-identifier",title:"Identifier"},r={rel:"owl:sameAs",href:e},Nd(document,[r],i),so(e,null,t=fd(),n).then(e=>Cd(e)).catch(e=>Cd(null,e)).finally(()=>{Fd(t,{mode:"update"})})}}(n):e.target.closest(".create-immutable")?function(e,t,n){if(e){var r,i,o=ji(),s=e.substr(0,e.lastIndexOf("/")+1),a=s+o,l=document.documentElement.cloneNode(!0),c=new Date;(l=Id(l,{id:"document-created",property:"schema:dateCreated",title:"Created",datetime:c})).querySelector("#document-resource-state")||(l=Dd(l,{id:"document-resource-state",subjectURI:"",type:"mem:Memento",mode:"create"})),l=Nd(l,[r={rel:"owl:sameAs",href:a}],i={id:"document-identifier",title:"Identifier"}),i={id:"document-original",title:"Original resource"},l=Nd(l,[r=cr.OriginalResourceInfo.state==sd.mem.Memento.value&&cr.OriginalResourceInfo.profile==sd.mem.OriginalResource.value?{rel:"mem:original",href:a}:{rel:"mem:original",href:e}],i);var u=cr.OriginalResourceInfo.timemap||e+".timemap";l=Nd(l,[r={rel:"mem:timemap",href:u}],i={id:"document-timemap",title:"TimeMap"}),so(s,o,t=fd(l),n).then(e=>Cd(e)).catch(e=>Cd(null,e)).finally(()=>{Fd(t,{mode:"update"})}),u=cr.OriginalResourceInfo.timemap||e+".timemap",cr.OriginalResourceInfo.state!=sd.mem.Memento.value&&(Id(document,{id:"document-created",property:"schema:dateCreated",title:"Created",datetime:c}),i={id:"document-identifier",title:"Identifier"},r={rel:"owl:sameAs",href:e},Nd(document,[r],i),i={id:"document-latest-version",title:"Latest Version"},r={rel:"mem:memento rel:latest-version",href:a},Nd(document,[r],i),cr.OriginalResourceInfo["latest-version"]&&(i={id:"document-predecessor-version",title:"Predecessor Version"},r={rel:"mem:memento rel:predecessor-version",href:cr.OriginalResourceInfo["latest-version"]},Nd(document,[r],i)),i={id:"document-timemap",title:"TimeMap"},r={rel:"mem:timemap",href:u},Nd(document,[r],i),so(e,null,t=fd(),n).then(e=>Cd(e)).catch(e=>Cd(null,e)));var d="<"+e+"> <http://mementoweb.org/ns#memento> <"+a+"> .\n<"+a+'> <http://mementoweb.org/ns#mementoDateTime> "'+c.toISOString()+'"^^<http://www.w3.org/2001/XMLSchema#dateTime> .';ao(u,{insert:d}).then(()=>{Od(null,u)})}}(n):e.target.closest(".resource-save")&&Kd(n)})},replyToResource:function(e,t){t=t||Qi(),e.target.closest("button").disabled=!0,document.body.appendChild(Pi('<aside id="reply-to-resource" class="do on">'+kS.C.Button.Close+`<h2>Reply ${kS.C.Button.Info.Reply}</h2><div class="info"></div><div id="reply-to-resource-input"><p>Reply to <code>`+t+'</code></p><ul><li><p><label for="reply-to-resource-note">Quick reply (plain text note)</label></p><p><textarea id="reply-to-resource-note" rows="10" cols="40" name="reply-to-resource-note" placeholder="Great article!"></textarea></p></li><li><label for="reply-to-resource-language">Language</label> <select id="reply-to-resource-language" name="reply-to-resource-language">'+lh()+'</select></li><li><label for="reply-to-resource-license">License</label> <select id="reply-to-resource-license" name="reply-to-resource-license">'+ch()+"</select></li></ul></div>"));var n,r,i=document.getElementById("reply-to-resource"),o="location-reply-to",s="write";kS.U.setupResourceBrowser(i,o,s),document.getElementById(o).insertAdjacentHTML("afterbegin","<p>Choose a location to save your reply.</p>"),i.insertAdjacentHTML("beforeend",'<p>Your reply will be saved at <samp id="'+o+"-"+s+'"></samp></p>');var a=document.getElementById(o+"-input");a.focus(),a.placeholder="https://example.org/path/to/article",i.insertAdjacentHTML("beforeend",'<button class="reply" title="Send your reply">Send</button>'),i.addEventListener("click",e=>{if(e.target.closest("button.close")&&(document.querySelector("#document-do .resource-reply").disabled=!1),e.target.closest("button.reply")){n=document.querySelector("#reply-to-resource #reply-to-resource-note").value.trim();var a=i.querySelector(".response-message");a&&a.parentNode.removeChild(a),i.insertAdjacentHTML("beforeend",'<div class="response-message"></div>'),r=document.querySelector("#reply-to-resource #"+o+"-"+s).innerText.trim();try{r=r&&r.length?new URL(r).href:r}catch(e){}if(!n||!r)return void document.querySelector("#reply-to-resource .response-message").setHTMLUnsafe(zi('<p class="error">Need a note and a location to save it.</p>'));!function(){var e=Ni(),o=Ui(),s="oa:replying",a={type:"comment",mode:"write",motivatedByIRI:s,id:o,creator:{},datetime:e,target:{iri:t},body:[{value:n}]};kS.C.User.IRI&&(a.creator.iri=kS.C.User.IRI);kS.C.User.Name&&(a.creator.name=kS.C.User.Name);kS.C.User.Image&&(a.creator.image=kS.C.User.Image);kS.C.User.URL&&(a.creator.url=kS.C.User.URL);var l=document.querySelector("#reply-to-resource-language");l&&l.length&&(a.language=l.value.trim(),a.body.language=a.language);var c=document.querySelector("#reply-to-resource-license");c&&c.length&&(a.license=c.value.trim(),a.body.rights=a.body.license=a.rights=a.license);var u=vd("",n=bd(a));oo(r,u).catch(e=>{let t;switch(console.log("Could not save reply:"),console.error(e),e.status){case 0:case 405:t="this location is not writable.";break;case 401:t="you are not authorized.",kS.C.User.IRI||(t+=" Try signing in.");break;case 403:t="you do not have permission to write here.";break;case 406:t="enter a name for your resource.";break;default:t=e.message}throw new Error("Cannot save your reply: ",t)}).then(e=>(i.querySelector(".response-message").setHTMLUnsafe(zi('<p class="success"><a href="'+e.url+'" rel="noopener" target="_blank">Reply saved!</a></p>')),_o(CS.ldp.inbox.value,null,fd()))).then(e=>{if(!e)throw new Error("Inbox is empty or missing");var n=e[0];let i='    <dl about="'+r+'">\n<dt>Object type</dt><dd><a about="'+r+'" typeof="oa:Annotation" href="'+CS.oa.Annotation.value+'">Annotation</a></dd>\n<dt>Motivation</dt><dd><a href="'+kS.C.Prefixes[s.split(":")[0]]+s.split(":")[1]+'" property="oa:motivation">'+s.split(":")[1]+"</a></dd>\n</dl>\n";return vh({type:["as:Announce"],inbox:n,object:r,target:t,license:a.license,statements:i}).catch(e=>{throw console.error("Failed sending notification to "+n+" :",e),new Error("Failed sending notification to author inbox")})}).then(e=>{var t="Notification sent",n=e.headers.get("Location");n?t='<a href="'+n.trim()+'" rel="noopener" "target="_blank">'+t+"</a>!":t+=", but location unknown.";var r=i.querySelector(".response-message");r.setHTMLUnsafe(zi(r.getHTML()+'<p class="success">'+t+"</p>"))}).catch(e=>{var t=i.querySelector(".response-message");t.setHTMLUnsafe(zi(t.getHTML()+'<p class="error">We could not save your reply:'+e.message+"</p>"))})}()}})},shareResource:function(e,t){if(document.querySelector("#share-resource.do.on"))return;const n=yi(t=t||Qi());var r=e.target.closest("button");r&&(r.disabled=!0);kS.C.User.IRI||kS.C.User.Graph&&(kS.C.User.Knows&&kS.C.User.Knows.length||kS.C.User.Graph.out(CS.owl.sameAs).values.length);var i="";(kS.C.User.IRI&&kS.C.OriginalResourceInfo.rdftype&&kS.C.OriginalResourceInfo.rdftype.includes(CS.schema.ScholarlyArticle.value)||kS.C.OriginalResourceInfo.rdftype.includes(CS.schema.Thesis.value))&&(i='\n          <div id="share-resource-external">\n            <h3>Share with research community</h3>\n            <input id="share-resource-linked-research" type="checkbox" value="https://linkedresearch.org/cloud" />\n            <label for="share-resource-linked-research"><a href="https://linkedresearch.org/cloud">Linked Open Research Cloud</a></label>\n          </div>');var o=`\n        <aside id="share-resource" class="do on">${kS.C.Button.Close}\n          <h2>Share ${kS.C.Button.Info.Share}</h2>\n          \n          <div class="info"></div>\n\n          <div id="share-resource-share-url">\n            <h3>Share URL</h3>\n\n            <label for="share-resource-clipboard">Copy URL to clipboard</label>\n            <input id="share-resource-clipboard" name="share-resource-clipboard" readonly="readonly" type="text" value="${t}" />\n            ${kS.C.Button.Clipboard}\n          </div>\n\n          ${i}\n\n          <div id="share-resource-agents">\n            <h3>Share with contacts</h3>\n\n            <ul>\n              <li id="share-resource-address-book">\n              </li>\n            </ul>\n\n            <label for="share-resource-note">Note</label>\n            <textarea id="share-resource-note" rows="3" cols="40" name="share-resource-note" placeholder="Check this out!"></textarea>\n\n            <button class="share" id="share-resource-agents-button" title="Share resource">Share</button>\n          </div>\n        </aside>\n      `;document.body.appendChild(Pi(o));var s=document.querySelector("#share-resource-clipboard");uh(s,document.querySelector("#share-resource-clipboard + button.copy-to-clipboard")),s.addEventListener("focus",e=>{var t=e.target.closest("input");t&&(t.selectionStart=0,t.selectionEnd=t.value.length)});var a=document.getElementById("share-resource-address-book");if(a.insertAdjacentHTML("beforeend",Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]),kS.U.selectContacts(a,kS.C.User.IRI),Gd(n,"control")){var l=document.querySelector("#share-resource > .info"),c=`\n          <div id="share-resource-permissions">\n            <h3>Permissions</h3>\n\n            <span class="progress">${Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]} Checking access permissions.</span>\n\n            <ul class="permissions">\n            </ul>\n\n            <div class="autocomplete">\n              <label for="share-resource-search-contacts">Add contacts</label>\n              <input id="share-resource-search-contacts" name="share-resource-search-contacts" placeholder="Search contacts or enter WebID" type="text" value="" />\n              <ul class="suggestions">\n              </ul>\n            </div>\n          </div>`;l.insertAdjacentHTML("afterend",c);var u=document.getElementById("share-resource-permissions"),d=u.querySelector(".progress");ms(n).catch(e=>{u.removeChild(d),console.log("XXX: Cannot access effectiveACLResource",e)}).then(e=>{u.removeChild(d);const{defaultACLResource:t,effectiveACLResource:r,effectiveContainer:i}=kS.C.Resource[n].acl;var o={};t==r?o.accessTo=n:o.default=i;var s=gs(e,o);const a=function(e,t){var n={},r=t||["agent","agentClass","agentGroup"];return Object.keys(e).forEach(t=>{r.forEach(r=>{e[t][r].forEach(i=>{n[i]={},n[i].subjectType=r,n[i].mode=e[t].mode})})}),n}(s),l=document.getElementById("share-resource-search-contacts"),c=document.querySelector("#share-resource-permissions .suggestions");l.addEventListener("focus",e=>{e.target.value.length||p(h())}),l.addEventListener("input",e=>{const t=e.target.value.trim().toLowerCase();p(h(t))});var h=function(e=""){const t=Object.keys(kS.C.User.Contacts),n=new Set(Object.keys(a));return t.filter(t=>{const r=!e.length||t.toLowerCase().includes(e)||kS.C.User.Contacts[t].Name?.toLowerCase().includes(e)||kS.C.User.Contacts[t].IRI?.toLowerCase().includes(e)||kS.C.User.Contacts[t].URL?.toLowerCase().includes(e);return!n.has(t)&&r})},p=function(e){c.replaceChildren(),e.forEach(e=>{const t=document.createElement("li");var r=kS.C.User.Contacts[e].Name||e,i=kS.C.User.Contacts[e].Image;i&&i.length||(i=Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"])),i='<img alt="" height="32" src="'+i+'" width="32" />',t.insertAdjacentHTML("beforeend",i+'<span title="'+e+'">'+r+"</span>");var o=document.querySelector("#share-resource-permissions ul");t.addEventListener("click",()=>{kS.U.addAccessSubjectItem(o,kS.C.User.Contacts[e].Graph,e);var t=document.getElementById("share-resource-access-subject-"+encodeURIComponent(e)),r={accessContext:"Share"};r.selectedAccessMode=CS.acl.Read.value,kS.U.showAccessModeSelection(t,"",e,"agent",r);var i=document.querySelector('[id="'+t.id+'"] select');i.disabled=!0,i.insertAdjacentHTML("afterend",`<span class="progress">${Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]}</span>`),kS.U.updateAuthorization(r.accessContext,r.selectedAccessMode,e,"agent").catch(e=>{console.log(e)}).then(e=>{ms(n).catch(e=>{kS.U.removeProgressIndicator(i)}).then(e=>{kS.U.removeProgressIndicator(i)})}),c.replaceChildren(),l.value=""}),c.appendChild(t)})},f=kS.C.AccessContext.Share;const m=Object.keys(f);var g=document.querySelector("#share-resource-permissions ul"),v=function(e,t){if(t!=kS.C.User.IRI){kS.U.addAccessSubjectItem(g,e,t);var n=document.getElementById("share-resource-access-subject-"+encodeURIComponent(t)),r=[];Object.keys(s).forEach(e=>{var n=s[e].mode;(s[e].agent.includes(t)||s[e].agentGroup.includes(t))&&n.forEach(e=>{m.includes(e)&&r.push(e)})});const o=r.includes(CS.acl.Control.value)&&CS.acl.Control.value||r.includes(CS.acl.Write.value)&&CS.acl.Write.value||r.includes(CS.acl.Read.value)&&CS.acl.Read.value||"";var i=i||{};i.accessContext="Share",i.selectedAccessMode=o,kS.U.showAccessModeSelection(n,"",t,a[t].subjectType,i)}};Object.keys(a).forEach(e=>{e!==CS.foaf.Agent.value&&e!==kS.C.User.IRI&&wo(e).catch(t=>{v(null,e)}).then(t=>{var n;t&&(n=t.node(lr.namedNode(e))),v(n,e)})})})}var h=document.getElementById("share-resource");h.querySelector("#share-resource-note").focus(),h.addEventListener("click",function(n){if(n.target.closest("button.close")&&(e.target.closest("button").disabled=!1),n.target.closest("button.share")){var r=[],i=document.querySelector("#share-resource #share-resource-to");i&&(r=(i=i.value.trim()).length?i.split(/\r\n|\r|\n/):[]);var o=document.querySelector("#share-resource #share-resource-note").value.trim();document.querySelectorAll("#share-resource-contacts .progress").forEach(e=>{e.parentNode.removeChild(e)});var s=document.querySelector("#share-resource-linked-research:checked");s&&r.push(s.value);var a=document.querySelectorAll("#share-resource-contacts input:checked");if(a.length)for(var l=0;l<a.length;l++)r.push(a[l].value);var c=h.querySelector(".response-message");return c&&c.parentNode.removeChild(c),h.insertAdjacentHTML("beforeend",'<div class="response-message"></div>'),gh(r,o,t,h)}})},addAccessSubjectItem:function(e,t,n){var r=t?.term.value||n;r=zi(r);var i=encodeURIComponent(r),o=t&&Oo(t)||r,s=t?Jo(t):null;s&&s.length||(s=Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"]));var a='<li id="share-resource-access-subject-'+i+'">'+(s='<img alt="" height="32" src="'+s+'" width="32" />')+'<a href="'+r+'" rel="noopener" target="_blank">'+o+"</a></li>";e.insertAdjacentHTML("beforeend",a)},showAccessModeSelection:function(e,t,n,r,i){t=t||Ui("select-access-mode-"),(i=i||{}).accessContext=i.accessContext||"Share",i.selectedAccessMode=i.selectedAccessMode||"";const o=Qi(),s='<select aria-label="Change access permission" id="'+t+'">'+function(e){(e=e||{}).context=e.context||"Share";var t=cr.AccessContext[e.context]||"Share",n='<option value="">No access</option>';return Object.keys(t).forEach(r=>{var i=e.selected&&r===e.selected?' selected="selected"':"";n+="<option"+i+' value="'+r+'">'+t[r]+"</option>"}),n}({context:i.accessContext,selected:i.selectedAccessMode})+"</select>";e.insertAdjacentHTML("beforeend",s);var a=document.getElementById(t);a.addEventListener("change",e=>{var t=e.target.value;(kS.C.AccessContext[i.accessContext][t]||""==t)&&(e.target.disabled=!0,e.target.insertAdjacentHTML("afterend",`<span class="progress">${Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]}</span>`),kS.U.updateAuthorization(i.accessContext,t,n,r).catch(t=>{console.log(t),kS.U.removeProgressIndicator(e.target)}).then(e=>{ms(o).catch(e=>{kS.U.removeProgressIndicator(a)}).then(e=>{kS.U.removeProgressIndicator(a)})}))})},removeProgressIndicator(e){var t=document.querySelector('[id="'+e.id+'"] + .progress');e.disabled=!1,e.parentNode.removeChild(t)},updateAuthorization:function(e,t,n,r){var i=Qi();const{defaultACLResource:o,effectiveACLResource:s,effectiveContainer:a}=kS.C.Resource[i].acl,l=o==s,c=o;var u=kS.C.Resource[s].graph,d={};l?d.accessTo=i:d.default=a;var h,p=gs(u,d),f="",m="",g=[];if(l)Object.keys(p).forEach(e=>{if(p[e][r].includes(n)){var t=p[e][r].length>1,o=l?"accessTo":"default",s=r,a=n,c="<"+p[e].mode.join(">, <")+">";m+=t?`\n<${e}>\n  acl:${s} <${a}> .\n`:`\n<${e}>\n  a acl:Authorization ;\n  acl:${o} <${i}> ;\n  acl:mode ${c} ;\n  acl:${s} <${a}> .\n`,g.push({delete:m})}}),t.length&&(h="#"+Ui(),f+=`\n  <${h}>\n    a acl:Authorization ;\n    acl:accessTo <${i}> ;\n    acl:mode <${t}> ;\n    acl:${r} <${n}> .\n  `,g.push({insert:f}));else{var v=structuredClone(p),y=[];Object.keys(v).forEach(e=>{var i;if(v[e][r].includes(n))if(t.length)y.push(e);else{switch(t){case CS.acl.Read.value:i=[CS.acl.Read.value];break;case CS.acl.Write.value:i=[CS.acl.Read.value,CS.acl.Write.value];break;case CS.acl.Control.value:i=[CS.acl.Read.value,CS.acl.Write.value,CS.acl.Control.value]}v[e].mode=i}}),y.forEach(e=>{delete v[e]}),f="",Object.keys(v).forEach(e=>{h="#"+Ui();var t=[];["agent","agentClass","agentGroup","origin"].forEach(n=>{v[e][n]&&v[e][n].length&&t.push(`  acl:${n} <${v[e][n].join(">, <")}>`)}),t=t.join(";\n"),f+=`\n<${h}>\n  a acl:Authorization ;\n  acl:accessTo <${i}> ;\n  acl:mode <${v[e].mode.join(">, <")}> ;\n  ${t} .\n`}),g.push({insert:f})}if(g.length)return ao(c,g);throw new Error("Check why the patch payload wasn't constructed in updateAuthorization."+g)},selectContacts:function(e,t){e.setHTMLUnsafe(zi('<ul id="share-resource-contacts"></ul>'));var n=document.getElementById("share-resource-contacts");kS.C.User.Contacts&&Object.keys(kS.C.User.Contacts).length?Object.keys(kS.C.User.Contacts).forEach(e=>{kS.C.User.Contacts[e].Inbox&&kS.C.User.IRI!==e&&kS.U.addShareResourceContactInput(n,kS.C.User.Contacts[e])}):kS.U.updateContactsInfo(t,n)},updateContactsInfo:function(e,t,n){return n=n||{},Ao(e).then(e=>(e.length&&e.forEach(e=>{id(e).then(n=>{kS.C.User.Contacts=kS.C.User.Contacts||{},kS.C.User.Contacts[e]=n,kS.U.addShareResourceContactInput(t,n),hc(kS.C.User)})}),Promise.resolve()))},addShareResourceContactInput:function(e,t){var n=t.IRI,r=t.Inbox;if(r&&r.length){var i=encodeURIComponent(n),o=t.Name||n,s=t.Image;s&&s.length||(s=Ti("image/svg+xml","base64",Ri[".fas.fa-user-secret"]));var a='<li><input id="share-resource-contact-'+i+'" type="checkbox" value="'+n+'" /><label for="share-resource-contact-'+i+'">'+(s='<img alt="" height="32" src="'+s+'" width="32" />')+'<a href="'+n+'" rel="noopener" target="_blank">'+o+"</a></label></li>";e.insertAdjacentHTML("beforeend",a)}},updateContactsInbox:function(e,t){return function(t){var n=jo(t);return n?Promise.resolve(n):xo(CS.ldp.inbox.value,e)}(t).then(t=>{t&&t.length&&(kS.C.User.Contacts[e].Inbox=t)})},nextLevelButton:function(e,t,n,r){t=zi(t),n=zi(n),r=zi(r);var i=document.getElementById(n+"-"+r);e.addEventListener("click",()=>{if(e.parentNode.classList.contains("container")){wo(t,{Accept:"text/turtle, application/ld+json"}).then(e=>(i&&(i.textContent="write"==r?t+Ui():t),kS.U.generateBrowserList(e,t,n,r)),function(e){var t=document.getElementById(n);kS.U.showErrorResponseMessage(t,e.response)})}else{document.getElementById(n+"-input").value=t;var o=e.parentNode.querySelector('input[type="radio"]').checked,s=e.parentNode.parentNode.querySelectorAll('input[checked="true"]');i&&(i.textContent=t);for(var a=0;a<s.length;a++)s[a].removeAttribute("checked");o?e.parentNode.querySelector('input[type="radio"]').removeAttribute("checked"):e.parentNode.querySelector('input[type="radio"]').setAttribute("checked","true")}},!1)},generateBrowserList:function(e,t,n,r){var i="location-generate-feed"==n?"checkbox":"radio";return new Promise((o,s)=>{document.getElementById(n+"-input").value=t;for(var a=document.getElementById(n).querySelectorAll(".response-message"),l=0;l<a.length;l++)a[l].parentNode.removeChild(a[l]);var c=document.getElementById(n+"-create-container");c&&c.replaceChildren();var u=document.getElementById(n+"-ul");u.replaceChildren();var d=t.split("/");if(d.length>4){d.splice(-2,2);var h=Ei(d.join("/")),p='<li class="container"><input type="radio" name="containers" value="'+h+'" id="'+h+'" /><label for="'+h+'" id="browser-up">..</label></li>';u.insertAdjacentHTML("afterbegin",p)}var f=e.node(lr.namedNode(t)).out(CS.ldp.contains).values,m=Array(),g=Array();f.forEach(t=>{var n=fs(e.node(lr.namedNode(t))),r=t.split("/");if(n.includes(CS.ldp.Container.value)||n.includes(CS.ldp.BasicContainer.value)){var o=r[r.length-2];m.push('<li class="container"><input type="radio" name="resources" value="'+t+'" id="'+o+'"/><label for="'+o+'">'+decodeURIComponent(o)+"</label></li>")}else o=r[r.length-1],g.push('<li><input type="'+i+'" name="resources" value="'+t+'" id="'+o+'"/><label for="'+o+'">'+decodeURIComponent(o)+"</label></li>")}),m.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),g.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())});var v=m.join("\n")+g.join("\n");u.insertAdjacentHTML("beforeend",v);var y=u.querySelectorAll("label");y.length<=1&&u.insertAdjacentHTML("beforeend","<p><em>(empty)</em></p>");for(let e=0;e<y.length;e++){var b=y[e].parentNode,w=b.querySelector("input");if("location-generate-feed"!=n||b.classList.contains("container")){var _=w.value;kS.U.nextLevelButton(y[e],_,n,r)}}return o(u)})},buttonSubscribeNotificationChannel:function(e,t){e.forEach(e=>{e.addEventListener("click",n=>{var r=n.target.closest("button");if(r)if(t in kS.C.Subscription&&"Connection"in kS.C.Subscription[t]||!r.classList.contains("subscribe"))kS.C.Subscription[t].Connection.close(),kS.C.Subscription[t]={},r.textContent="Subscribe",r.setAttribute("class","subscribe");else{var i=e.querySelector('[rel="notify:subscription"]').getAttribute("resource"),o={type:kS.C.Resource[t].subscription[i].channelType[0],topic:t},s=kS.C.Resource[t].subscription[i].feature;if(s&&s.length){var a=new Date,l=new Date(a.getTime()+1e3),c=new Date(l.getTime()+36e5);s.includes(CS.notify.startAt.value)&&(o.startAt=l.toISOString()),s.includes(CS.notify.endAt.value)&&(o.endAt=c.toISOString()),s.includes(CS.notify.rate.value)&&(o.rate="PT10S")}kS.U.subscribeToNotificationChannel(i,o).then(e=>{kS.C.Subscription[o.topic]&&"Connection"in kS.C.Subscription[o.topic]&&(r.textContent="Unsubscribe",r.setAttribute("class","unsubscribe"))}).catch(e=>{console.log(e)})}})})},showStorageDescription:function(e,t,n,r){var i=document.getElementById(t+"-samp"),o=document.getElementById(t+"-storage-description");if(i&&!o)return _o(CS.solid.storageDescription.value,n).then(r=>{if(r.length){var s=r[0];kS.C.Storages=kS.C.Storages||{},kS.C.Storages[e.term.value]={storageDescription:s}}o&&o.replaceChildren(),i.insertAdjacentHTML("afterend",'<details id="'+t+'-storage-description-details"><summary>Storage details</summary></details>'),(o=document.getElementById(t+"-storage-description-details")).addEventListener("click",r=>{if(!o.open&&!document.getElementById(t+"-storage-description")){var i='<dl id="storage-location"><dt>Storage location</dt><dd><a href="'+n+'" rel="noopener" target="_blank">'+n+"</a></dd></dl>";wo(s).then(r=>{if(r){var s=r.out(CS.foaf.primaryTopic).values;r=s.length?r.node(lr.namedNode(s[0])):r.node(lr.namedNode(n));var a=kS.U.getStorageSelfDescription(r),l=kS.U.getContactInformation(r),c=kS.U.getPersistencePolicy(r),u=kS.U.getODRLPolicies(r),d=kS.U.getCommunicationOptions(r);o.insertAdjacentHTML("beforeend",zi('<div id="'+t+'-storage-description">'+i+a+l+c+u+d+"</div>"));var h=e.term.value,p=document.querySelectorAll('[id="'+t+'-storage-description"] [id^="notification-subscriptions-"]');kS.U.buttonSubscribeNotificationChannel(p,h)}else o.insertAdjacentHTML("beforeend",'<div id="'+t+'-storage-description">Unavailable</div>')})}})}).catch(e=>{})},getStorageSelfDescription:function(e){var t=ls(e),n=e.term.value;return t=void 0!==t?t:n,kS.C.Resource[n]=kS.C.Resource[n]||{},kS.C.Resource[n].title=t,kS.C.Resource[n].description=e.out(CS.schema.abstract).values[0]||e.out(CS.dcterms.description).values[0]||e.out(CS.rdf.value).values[0]||e.out(CS.as.summary).values[0]||e.out(CS.schema.description).values[0]||e.out(CS.as.content).values[0]||void 0,'<dl id="storage-self-description">'+('<dt>Storage name</dt><dd><a href="'+n+'">'+t+"</a></dd>")+(kS.C.Resource[n].description?"<dt>Storage description</dt><dd>"+kS.C.Resource[n].description+"</dd>":"")+"</dl>"},getPersistencePolicy:function(e){var t="",n=e.out(CS.pim.persistencePolicy).values;if(n.length){var r=[];kS.C.Resource[e.term.value]=kS.C.Resource[e.term.value]||{},kS.C.Resource[e.term.value].persistencePolicy=[],n.forEach(t=>{kS.C.Resource[e.term.value].persistencePolicy.push(t),r.push('<dd><a href="'+t+'" rel="noopener" target="_blank">'+t+"</a></dd>")}),t='<dl id="storage-persistence-policy"><dt>URI persistence policy</dt>'+r.join("")+"</dl>"}return t},getODRLPolicies:function(e){var t="",n=[],r=e.out(CS.odrl.hasPolicy).values;return r.length&&(r.forEach(t=>{var r=e.node(lr.namedNode(t)),i=[],o=fs(r),s=o.findIndex(e=>e===CS.odrl.Offer.value||e===CS.odrl.Agreement.value);if(s>=0){var a=o[s],l=a.substr(a.lastIndexOf("/")+1);i.push('<dt>Rule<dt><dd><a href="'+a+'" rel="noopener" target="_blank">'+l+"</a></dd>")}var c=r.out(CS.odrl.uid).values[0];c&&i.push('<dt>Unique identifier<dt><dd><a href="'+c+'" rel="noopener" target="_blank">'+c+"</a></dd>");var u=r.out(CS.odrl.target).values[0];u&&i.push('<dt>Target<dt><dd><a href="'+u+'" rel="noopener" target="_blank">'+u+"</a></dd>");var d=r.out(CS.odrl.permission).values[0];if(d){var h=e.node(lr.namedNode(d));i.push(kS.U.getODRLRuleActions(h)),i.push(kS.U.getODRLRuleAssigners(h)),i.push(kS.U.getODRLRuleAssignees(h))}var p=r.out(CS.odrl.prohibition).values[0];p&&(h=e.node(lr.namedNode(p)),i.push(kS.U.getODRLRuleActions(h)),i.push(kS.U.getODRLRuleAssigners(h)),i.push(kS.U.getODRLRuleAssignees(h)));var f="<dl>"+i.join("")+"</dl>";n.push('<dd><details><summary><a href="'+t+'" rel="noopener" target="_blank">'+t+"</a></summary>"+f+"</details></dd>")}),t='<dl id="odrl-policies"><dt>Policies</dt>'+n.join("")+"</dl>"),t},getODRLRuleActions:function(e){var t=[];return e.out(CS.odrl.action).values.forEach(e=>{var n=e,r=e;e.startsWith("http://www.w3.org/ns/odrl/2/")?r="https://www.w3.org/TR/odrl-vocab/#term-"+(n=e.substr(e.lastIndexOf("/")+1)):e.startsWith("http://creativecommons.org/ns#")?r="https://www.w3.org/TR/odrl-vocab/#term-"+(n=e.substr(e.lastIndexOf("#")+1)):e.lastIndexOf("#")?n=e.substr(e.lastIndexOf("#")+1):e.lastIndexOf("/")&&(n=e.substr(e.lastIndexOf("/")+1));var i="",o="",s="";kS.C.User.PreferredPolicyRule&&kS.C.User.PreferredPolicyRule.Prohibition&&kS.C.User.PreferredPolicyRule.Prohibition.Actions.includes(e)&&(i=Ri[".fas.fa-circle-exclamation"]+" ",o=' class="warning"',s=' title="The action ('+n+') is prohibited by preferred policy."'),t.push("<li"+s+">"+i+"<a"+o+' href="'+r+'" resource="'+e+'">'+n+"</a></li>")}),t='<dt>Actions</dt><dd><ul rel="odrl:action">'+t.join("")+"</ul></dd>"},getODRLRuleAssigners:function(e){var t=[];return e.out(CS.odrl.assigner).values.forEach(e=>{t.push('<dd><a href="'+e+'" rel="noopener" target="_blank">'+e+"</a></dd>")}),"<dt>Assigners</dt>"+t.join("")},getODRLRuleAssignees:function(e){var t=[];return e.out(CS.odrl.assignees).values.forEach(e=>{t.push('<dd><a href="'+e+'" rel="noopener" target="_blank">'+e+"</a></dd>")}),"<dt>Assignees</dt>"+t.join("")},getContactInformation:function(e){var t="",n=[],r=e.out(CS.solid.owner).values;return r.length&&(kS.C.Resource[e.term.value]=kS.C.Resource[e.term.value]||{},kS.C.Resource[e.term.value].owner=[],r.forEach(t=>{kS.C.Resource[e.term.value].owner.push(t),n.push('<dd><a href="'+t+'" rel="noopener" target="_blank">'+t+"</a></dd>")}),t='<dl id="resource-owners"><dt>Owners</dt>'+n.join("")+"</dl>"),t},getCommunicationOptions:function(e,t={}){var n=t.subjectURI||e.term.value;e=e.node(lr.namedNode(n));var r=kS.U.getNotificationSubscriptions(e),i=kS.U.getNotificationChannels(e);kS.C.Resource[n]=kS.C.Resource[n]||{},r&&(kS.C.Resource[n].subscription=kS.C.Resource[n].subscription||{}),i&&(kS.C.Resource[n].channel=kS.C.Resource[n].channel||{});var o=[];return r&&(o.push('<dl id="notification-subscriptions-'+n+'"><dt>Notification Subscriptions</dt>'),r.forEach(t=>{var r=e.node(lr.namedNode(t)),i=kS.U.getNotificationChannelTypes(r),s=kS.U.getNotificationFeatures(r);kS.C.Resource[n].subscription[t]={},kS.C.Resource[n].subscription[t].channelType=i,kS.C.Resource[n].subscription[t].feature=s;var a="Subscribe",l="subscribe",c=n;kS.C.Subscription[c]&&kS.C.Subscription[c].Connection&&(a="Unsubscribe",l="unsubscribe"),o.push('<dd id="notification-subscription-'+t+'"><details><summary><a href="'+t+'" rel="noopener" target="_blank">'+t+"</a></summary>"),o.push('<dl rel="notify:subscription" resource="'+t+'">');var u=n;if(u&&o.push('<dt>Topic</dt><dd><a href="'+u+'" rel="notify:topic nopener" target="_blank">'+u+'</a> <button id="notification-subscription-'+t+'-button" class="'+l+'">'+a+"</button></dd>"),i&&o.push('<dt>Channel Type</dt><dd><a href="'+i+'" rel="notify:channelType noopener" target="_blank">'+i+"</a></dd>"),s){o.push('<dt>Features</dt><dd><ul rel="notify:feature">');s.forEach(e=>{var t,n=e;switch(e){case CS.notify.startAt.value:case CS.notify.endAt.value:case CS.notify.state.value:case CS.notify.rate.value:case CS.notify.accept.value:n="https://solidproject.org/TR/2022/notifications-protocol-20221231#notify-"+(t=bi(e))}o.push('<li><a href="'+n+'" resource="'+e+'" rel="noopener" target="_blank">'+t+"</a></li>")}),o.push("</ul></dd>")}o.push("</dl></details></dd>")}),o.push("</dl>")),o.join("")},getNotificationSubscriptions:function(e){var t=e.out(CS.notify.subscription).values;return t.length?t:void 0},getNotificationChannels:function(e){var t=e.out(CS.notify.channel).values;return t.length?t:void 0},getNotificationChannelTypes:function(e){var t=e.out(CS.notify.channelType).values;return t||void 0},getNotificationFeatures:function(e){var t=e.out(CS.notify.feature).values;return t.length?t:void 0},subscribeToNotificationChannel:function(e,t){if(t.type===CS.notify.WebSocketChannel2023.value)return kS.U.subscribeToWebSocketChannel(e,t)},subscribeToWebSocketChannel:function(e,t,n={}){if(!e||!t.type||!t.topic)return Promise.reject();var r;if(n.contentType=n.contentType||"application/ld+json","text/turtle"===n.contentType)r="<> a <"+t.type+"> ;\n  <http://www.w3.org/ns/solid/notifications#topic> <"+t.topic+"> .";else t["@context"]=t["@context"]||["https://www.w3.org/ns/solid/notification/v1"],r=JSON.stringify(t);return kS.C.Subscription[t.topic]&&kS.C.Subscription[t.topic].Connection&&kS.C.Subscription[t.topic].Connection.close(),kS.C.Subscription[t.topic]={},kS.C.Subscription[t.topic].Request=t,io(e,"",r,n.contentType,null,n).then(e=>kS.U.processNotificationSubscriptionResponse(e,t)).catch(e=>{let t;switch(console.error(e),e.status){case 0:case 405:t="subscription request not allowed.";break;case 401:t="you are not authorized.",kS.C.User.IRI||(t+=" Try signing in.");break;case 403:t="you do not have permission to request a subscription.";break;case 406:t="representation not acceptable to the user agent.";break;default:t=e.message}throw new Error("Cannot subscribe: ",t)}).then(e=>{switch(e.topic in kS.C.Subscription||console.log("DO.C.Subscription["+e.topic+"] undefined."),kS.C.Subscription[e.topic].Response=e,e.type){case"WebSocketChannel2023":case CS.notify.WebSocketChannel2023.value:return e.type=CS.notify.WebSocketChannel2023.value,kS.U.connectToWebSocket(e.receiveFrom,e).then(t=>{kS.C.Subscription[e.topic].Connection=t})}})},processNotificationSubscriptionResponse:function(e,t){var n=e.headers.get("Content-Type").split(";")[0].trim();return("application/ld+json"==n?e.json():e.text()).then(e=>{switch(n){case"text/turtle":return Promise.reject({message:"TODO text/turtle",data:e});case"application/ld+json":if(!(e["@context"]&&e.type&&e.topic))return Promise.reject({message:"Missing @context, type, topic(, receiveFrom)",data:e});if(t.topic!=e.topic&&console.log("TODO: topic requested != response"),("WebSocketChannel2023"==t.type||t.type==CS.notify.WebSocketChannel2023.value)&&e.receiveFrom)return Promise.resolve(e);break;default:return Promise.reject({message:"TODO text/plain?",data:e})}})},processNotificationChannelMessage:function(e,t){if(e["@context"]&&e.id&&e.type&&e.object&&e.published){t.subjectURI!=e.object&&console.log("TODO: topic requested != message object "),kS.C.Subscription[e.object].Notifications=kS.C.Subscription[e.object].Notifications||{},kS.C.Subscription[e.object].Notifications[e.id]=e;var n=Array.isArray(e.type)?e.type:[e.type],r="";n.forEach(e=>{r+=r+'<dd><a href="'+e+'">'+e+"</a></dd>"});var i=[];i.push("<details>"),i.push("<summary>Notification Received</summary>"),i.push("<dl>"),i.push('<dt>Identifier</dt><dd><a href="'+e.id+'">'+e.id+"</a></dd>"),i.push("<dt>Types</dt>"+r),i.push('<dt>Object</dt><dd><a href="'+e.object+'">'+e.object+"</a></dd>"),i.push("<dt>Published</dt><dd><time>"+e.published+"</time></dd>"),i.push("</dl>"),i.push("</details>"),Sd(i={content:i=i.join(""),type:"info",timer:3e3},cr.MessageLog),kd(document.body,i)}},connectToWebSocket:function(e,t){return new Promise((n,r)=>{t.type;var i,o=new WebSocket(e);o.onopen=function(){i={message:"Connected to "+e+" ("+t.type+")."},console.log(i),n(o)},o.onclose=function(t){i={message:"Socket to "+e+" is closed."},console.log(i,t.reason)},o.onerror=function(e){console.error("Socket encountered error: ",e.message,"Closing socket"),o.close(),r(e)},o.onmessage=function(e){var n={subjectURI:t.topic};kS.U.processNotificationChannelMessage(e.data,n)}}).then().catch(e=>{console.log(e)})},initBrowse:function(e,t,n,r,i,o){t.value=e,wo(e,{Accept:"text/turtle, application/ld+json"}).then(t=>{kS.U.generateBrowserList(t,e,i,o).then(n=>{kS.U.showStorageDescription(t,i,e)})}).then(e=>{document.getElementById(i+"-"+o).textContent="write"==o?t.value+Ui():t.value}),n.addEventListener("click",e=>{kS.U.triggerBrowse(t.value,i,o)},!1),kS.C.Session?.isActive&&r.addEventListener("click",e=>{kS.U.showCreateContainer(t.value,i,o,e)},!1)},triggerBrowse:function(e,t,n){var r=document.getElementById(t);e.length>10&&e.match(/^https?:\/\//g)&&"/"==e.slice(-1)?wo(e,{Accept:"text/turtle, application/ld+json"}).then(r=>{kS.U.generateBrowserList(r,e,t,n).then(n=>(kS.U.showStorageDescription(r,t,e),n),function(e){console.log("???? "+e)})},function(e){var n=document.getElementById(t+"-ul");kS.U.showErrorResponseMessage(n,e.response)}):r.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">This is not a valid location.</p></div>')},showCreateContainer:function(e,t,n,r){if(r){t=t||ji();var i=document.getElementById(t+"-create-container");i&&i.replaceChildren(),i.insertAdjacentHTML("beforeend",'<label for="'+t+'-create-container-name">Container Name</label> <input id="'+t+'-create-container-name" name="'+t+'-create-container-name" type="text" placeholder="My Secret Stuff" /> <button class="insert" disabled="disabled">Create</button>');i.querySelector("label");var o=i.querySelector("input"),s=document.querySelector("#"+t+"-create-container button.insert");o.addEventListener("keyup",e=>{zi(o.value.trim()).length?s.removeAttribute("disabled"):s.disabled="disabled"}),s.addEventListener("click",r=>{var i,s=zi(o.value.trim());i={insert:"<> <"+CS.dcterms.title.value+'> """'+(s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'""" .')},s=s.endsWith("/")?s.slice(0,-1):s;var a=e+encodeURIComponent(s)+"/",l={headers:{"If-None-Match":"*"}};ao(a,i,l).then(function(e){kS.U.triggerBrowse(a,t,n)},function(e){var r=vd(s,'<article about=""><dl id="document-title"><dt>Title</dt><dd property="dcterms:title">'+s+"</dd></dl></article>",{omitLang:!0,prefixes:{dcterms:"http://purl.org/dc/terms/"}});lo(a,r,l).then(function(e){kS.U.triggerBrowse(a,t,n)},function(e){var n=document.getElementById(t+"-create-container");kS.U.showErrorResponseMessage(n,e.response,"createContainer")})})})}},showErrorResponseMessage(e,t,n){var r="status"in t?t.status:0;r="string"==typeof r?parseInt(t.slice(-3)):r,console.log(t);for(var i=e.querySelectorAll(".response-message"),o=0;o<i.length;o++)i[o].parentNode.removeChild(i[o]);var s=t.statusText||"";s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");var a="";switch(r){default:a="Request unsuccessful ("+s+").";break;case 401:var l="You are not authenticated with valid credentials.";a=kS.C.User.IRI?l:l+" . Try signing in.";break;case 403:a="This request is forbidden.";break;case 404:a="Not found.";break;case 405:a="Request not supported on the target resource.";break;case 409:a="Conflict with the current state of the target resource.";break;case 412:if(a="Precondition failed.","createContainer"===n)a+=" Use a different Container Name."}e.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+zi(a)+"</p></div>")},setupResourceBrowser:function(e,t,n){t=zi(t=t||"browser-location"),n=zi(n=n||"write");var r="",i="";kS.C.Session?.isActive&&(r=' <button id="'+t+'-create-container-button" title="Create container (folder)">Create container</button>',i='<div id="'+t+'-create-container"></div>'),e.insertAdjacentHTML("beforeend",'<div id="'+t+'"><label for="'+t+'-input">URL</label> <input type="text" id="'+t+'-input" name="'+t+'-input" placeholder="https://example.org/path/to/" /><button id="'+t+'-update" disabled="disabled" title="Browse location">Browse</button>'+r+"</div>"+i+'<div id="'+t+'-listing"></div>');document.getElementById(t);var o=document.getElementById(t+"-create-container"),s=document.getElementById(t+"-create-container-button"),a=document.getElementById(t+"-listing"),l=document.getElementById(t+"-input"),c=document.getElementById(t+"-update");l.addEventListener("keyup",e=>{for(var r=document.getElementById(t).querySelectorAll(".response-message"),i=0;i<r.length;i++)r[i].parentNode.removeChild(r[i]);var o=document.getElementById(t+"-"+n);l.value.length>10&&l.value.match(/^https?:\/\//g)&&"/"==l.value.slice(-1)?(c.removeAttribute("disabled"),13==e.which&&kS.U.triggerBrowse(l.value,t,n),o&&(o.textContent=l.value+Ui())):(c.disabled="disabled",o&&(o.textContent=l.value))},!1);var u,d=document.getElementById(t+"-ul");d||((d=document.createElement("ul")).id=t+"-ul",a.appendChild(d)),kS.C.User.Storage&&kS.C.User.Storage.length?u=Ei(kS.C.User.Storage[0]):kS.C.User.Outbox&&kS.C.User.Outbox[0]&&(u=Ei(kS.C.User.Outbox[0])),u?kS.U.initBrowse(u,l,c,s,t,n):_o(CS.oa.annotationService.value,null,fd()).then(function(e){kS.U.initBrowse(e[0],l,c,s,t,n)},function(){var e=document.getElementById(t+"-input");kS.C.Session?.isActive&&(c.addEventListener("click",()=>{o.replaceChildren(),kS.U.triggerBrowse(e.value,t,n)},!1),s.addEventListener("click",r=>{kS.U.showCreateContainer(e.value,t,n,r)},!1))})},showResourceBrowser:function(e,t){e=zi(e=e||"location-"+Ui()),t=t||"write",t=zi(e);var n='<aside id="resource-browser-'+e+'" class="do on">'+kS.C.Button.Close+"<h2>Resource Browser</h2></aside>";document.body.appendChild(Pi(n)),kS.U.setupResourceBrowser(document.getElementById("resource-browser-"+e),e,t),document.getElementById("resource-browser-"+e).insertAdjacentHTML("beforeend",'<p><samp id="'+e+"-"+t+'"></samp></p>')},openInputFile:function(e){let t=Array.from(e.target.files),n={init:!0},r=t.map(e=>new Promise((t,n)=>{let r=new FileReader;r.onload=()=>{t({name:e.name,type:e.type,content:r.result})},r.onerror=n,r.readAsText(e)}));Promise.all(r).then(e=>{let t=1===e.length?e[0].type:"application/octet-stream",r=e.map(e=>"file:"+e.name),i=r.map(e=>`<a href="${e} rel="noopener" target="_blank">${e}</a>`).join(", ");var o=`Opening ${i}`;const s={content:`Opening ${i}`,type:"info",timer:1e4};Sd({...s,content:o},cr.MessageLog);kd(document.body,s);kS.U.spawnDokieli(document,e,t,r,n)}).catch(e=>{console.error("Error reading files:",e)})},openDocument:function(e){void 0!==e&&(e.target.disabled=!0),document.body.insertAdjacentHTML("beforeend",'<aside id="open-document" class="do on">'+kS.C.Button.Close+`<h2>Open Document ${kS.C.Button.Info.Open}</h2><div class="info"></div><p><label for="open-local-file">Open local file</label> <input type="file" id="open-local-file" name="open-local-file" multiple="" /></p></aside>`);var t="location-open-document",n="read",r=document.getElementById("open-document");kS.U.setupResourceBrowser(r,t,n);var i=void 0===kS.C.User.Storage?"":'<p><samp id="'+t+"-"+n+'">https://example.org/path/to/article</samp></p>';r.insertAdjacentHTML("beforeend",i+'<button class="open" title="Open document">Open</button>'),r.addEventListener("click",function(e){if(e.target.closest("button.close")&&(document.querySelector("#document-do .resource-open").disabled=!1),e.target.closest("#open-local-file")&&e.target.addEventListener("change",kS.U.openInputFile,!1),e.target.closest("button.open")){var n=document.getElementById("open-document").querySelector(".response-message");n&&n.parentNode.removeChild(n);var r=document.getElementById(t+"-input").value;kS.U.openResource(r,{})}})},openResource:function(e,t){t=t||{};!function(e,t,n){var r=`Opening <a href="${e} rel="noopener" target="_blank">${e}</a>.`;const i={content:`Opening <a href="${e}" rel="noopener" target="_blank">${e}</a>`,type:"info",timer:1e4};Sd({...i,content:r},cr.MessageLog);const o=kd(document.body,i);Yi(e,t,n).catch(t=>{document.getElementById(o).remove();var n=`Unable to open <a href="${e}" rel="noopener" target="_blank">${e}</a>.`;const r={content:`Unable to open <a href="${e}" rel="noopener" target="_blank">${e}</a>.`,type:"error",timer:5e3,code:t.status};throw Sd({...r,content:n},cr.MessageLog),kd(document.body,r),t}).then(t=>{e=encodeURI(e);var n=t.headers.get("Content-Type"),r={};return r.contentType=n?n.split(";")[0].toLowerCase().trim():"text/turtle",r.subjectURI=e,t.text().then(t=>{kS.U.setDocumentURL(e);var n=kS.C.DocumentURL;kS.C.Resource[n]=kS.C.Resource[n]||{};var i={};["text/markdown","text/plain"].includes(r.contentType)&&(t=hh(t,{createDocument:!0}),i.defaultStylesheet=!0,r.contentType="text/html"),kS.C.MediaTypes.RDF.includes(r.contentType)&&(r.storeHash=!0,Fd(t,r)),kS.U.buildResourceView(t,r).then(e=>{i.defaultStylesheet="defaultStylesheet"in e?e.defaultStylesheet:"defaultStylesheet"in i&&i.defaultStylesheet,i.init=!0;kS.U.spawnDokieli(document,e.data,e.options.contentType,e.options.subjectURI,i)})}).then(()=>{kS.C.DocumentAction="open";var t=document.querySelector("#document-action-message");t&&t.parentNode.removeChild(t);var n=`Opened <a href="${e}" rel="noopener" target="_blank">${e}</a>.`;Sd(n={content:n,type:"success",timer:3e3},cr.MessageLog),kd(document.body,n)})})}(e,{Accept:Ki()},t)},buildResourceView:function(e,t){return kS.C.MediaTypes.RDF.includes(t.contentType)?mo(e,t).then(function(n){var r=ls(n)||t.subjectURI,i='<a href="'+t.subjectURI+'">'+r+"</a>",o=fs(n);return o.includes(CS.ldp.Container.value)||o.includes(CS.as.Collection.value)||o.includes(CS.as.OrderedCollection.value)?kS.U.processResources(t.subjectURI,t).then(function(e){var n=[];return e.forEach(e=>{n.push(wo(e))}),Promise.allSettled(n).then(e=>{var n=[];e.forEach(e=>{if(e.value instanceof Error);else if(void 0===e.value);else if("resource"in e.value)n.push('<li rel="schema:hasPart" resource="'+e.value.resource+'"><a href="'+e.value.resource+'">'+e.value.resource+"</a></li>");else{var t=kS.U.generateIndexItemHTML(e.value);"string"==typeof t&&""!==t&&n.push('<li rel="schema:hasPart" resource="'+e.value.term.value+'">'+t+"</li>")}});var r="";n.length&&(r="<ul>"+n.join("")+"</ul>");var o='      <article about="" typeof="as:Collection">\n        <h1 property="schema:name">'+i+'</h1>\n        <div datatype="rdf:HTML" property="schema:description">\n          <section>'+r+"\n          </section>\n        </div>\n      </article>";return{data:vd("Collection: "+t.subjectURI,o),options:{subjectURI:t.subjectURI,contentType:"text/html"},defaultStylesheet:!0}}).catch(e=>{})}):{data:e,options:t}}):Promise.resolve({data:e,options:t})},generateIndexItemHTML:function(e,t){if(void 0!==e.iri){t=t||{};var n="",r="",i="",o="",s="";(n=Jo(e)||"")&&(n=eh(n)+" "),r=ls(e)||e.term.value,r='<a href="'+e.term.value+'" property="schema:name" rel="schema:url">'+r+"</a>";var a=[CS.schema.datePublished,CS.dcterms.issued,CS.dcterms.date,CS.as.published,CS.schema.dateCreated,CS.dcterms.created,CS.prov.generatedAtTime,CS.dcterms.modified,CS.as.updated],l=c(e,a)[0]||"";return l&&(i=', <time content="'+l+'" datetime="'+l+'" property="schema:dataPublished">'+l.substr(0,10)+"</time>"),(o=e.out(CS.oa.hasBody).values.length?e.node(lr.namedNode(o)).out(CS.rdf.value).values[0]:c(e,[CS.schema.abstract,CS.dcterms.description,CS.rdf.value,CS.as.summary,CS.schema.description,CS.as.content])[0]||"")&&(o='<div datatype="rdf:HTML" property="schema:description">'+o+"</div>"),e.out(CS.as.tag).values.length&&(s=[],e.out(CS.as.tag).values.forEach(t=>{var n=e.node(e.namedNode(t)),r=Ai(t);n.out(CS.as.href).values.length&&(t=n.out(CS.as.href).values[0]),n.out(CS.as.name).values.length&&(r=n.out(CS.as.name).values[0]),s.push('<li><a href="'+t+'" rel="schema:about">'+r+"</a></li>")}),s="<ul>"+s.join("")+"</ul>"),n+r+i+o+s}function c(e,t){let n;return t.forEach(t=>{n=e.out(t).values}),n}},spawnDokieli:async function(e,t,n,r,i={}){let o=Array.isArray(r)?r[0]:r;o=zi(o);const s=function(e){try{const t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch{return!1}}(o),a=function(e){try{return"file:"===new URL(e).protocol}catch{return!1}}(o);if(!s&&!a){const e="Cannot open, not valid URL or file location.",t={content:e,type:"error",timer:3e3};throw Sd({...t,content:e},cr.MessageLog),kd(document.body,t),new Error(e)}let l=Array.isArray(t)?t:[{name:o,type:n,content:t}];var c=document.implementation.createHTMLDocument("template");const u=!!l.find(e=>"text/csv"==e.type);if(l.length>1&&u){const e=[],t=[];l.map(n=>{n.name.endsWith("metadata.json")&&e.push(n),"text/csv"===n.type&&t.push(n)});const n=t.map(e=>{let t=(n=e.content,vS.parse(n.trim()));var n;return t.url=e.name,t});let r;e[0]&&e[0].content&&(r=JSON.parse(e[0].content));const i=bS(n,r);c.body.appendChild(Pi(`<main><article>${i}</article></main>`))}else switch(n){case"text/html":case"application/xhtml+xml":c.documentElement.setHTMLUnsafe(l[0].content),c.body.setHTMLUnsafe(zi(c.body.getHTML()));break;case"text/csv":console.error("Must provide a metadata file; single CSVs without metadata not supported yet");break;case"application/gpx+xml":c=await Ch(l[0].content).then(e=>{var t="geo",n=document.querySelector("#geo figcaption a");if(n){var r=`Opened geo data at <a href="${n.href}">${n.textContent}</a>`;Sd(r={content:r,type:"info",timer:3e3},cr.MessageLog),kd(document.body,r);var i=document.getElementById(t);window.history.pushState(null,null,"#"+t),i.scrollIntoView()}return e});break;default:t=ad(l[0]);var d=document.createElement("iframe");d.srcdoc="<pre>"+t+"</pre>",d.width="1280",d.height="720";var h=Pi(`<main><article><dl><dt>${a?`<code>${o.slice(5)}</code>`:`<a href="${o}" rel="noopener" target="_blank">${o}</a>`}</dt><dd></dd></dl></article></main>`);h.querySelector("dd").appendChild(d),c.body.appendChild(h)}if(i.defaultStylesheet){var p=document.querySelectorAll('head link[rel~="stylesheet"][href]');let e=!1;p.forEach(t=>{const n=t.href,r="https://dokie.li/media/css/basic.css"===n,i="https://dokie.li/media/css/dokieli.css"===n;t.setAttribute("href",n),r||i?(t.setAttribute("rel","stylesheet"),e=!0):(t.setAttribute("disabled","disabled"),t.classList.add("do"))}),e||document.querySelector("head").insertAdjacentHTML("beforeend",'\n            <link href="https://dokie.li/media/css/basic.css" media="all" rel="stylesheet" title="Basic" />\n            <link href="https://dokie.li/media/css/dokieli.css" media="all" rel="stylesheet" />')}(document.querySelectorAll("head script[src]").forEach(e=>{e.setAttribute("src",e.src)}),!0===i.init&&s&&"text/html"==n)&&(document.querySelectorAll("head base").forEach(e=>{e.remove()}),document.querySelector("head").insertAdjacentHTML("afterbegin",'<base href="'+o+'" />'));if("application/gpx+xml"==n){i.init=!1;var f=document.getElementById("open-document");f&&f.parentNode.removeChild(f),document.querySelector("#document-do .resource-open").disabled=!1,kS.U.hideDocumentMenu()}else if(!0===i.init){const e=c.body.cloneNode(!0);return e.setAttribute("prefix","rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# owl: http://www.w3.org/2002/07/owl# xsd: http://www.w3.org/2001/XMLSchema# rdfa: http://www.w3.org/ns/rdfa# dcterms: http://purl.org/dc/terms/ dctypes: http://purl.org/dc/dcmitype/ foaf: http://xmlns.com/foaf/0.1/ pimspace: http://www.w3.org/ns/pim/space# skos: http://www.w3.org/2004/02/skos/core# prov: http://www.w3.org/ns/prov# mem: http://mementoweb.org/ns# qb: http://purl.org/linked-data/cube# schema: http://schema.org/ void: http://rdfs.org/ns/void# rsa: http://www.w3.org/ns/auth/rsa# cert: http://www.w3.org/ns/auth/cert# wgs: http://www.w3.org/2003/01/geo/wgs84_pos# bibo: http://purl.org/ontology/bibo/ sioc: http://rdfs.org/sioc/ns# doap: http://usefulinc.com/ns/doap# dbr: http://dbpedia.org/resource/ dbp: http://dbpedia.org/property/ sio: http://semanticscience.org/resource/ opmw: http://www.opmw.org/ontology/ deo: http://purl.org/spar/deo/ doco: http://purl.org/spar/doco/ cito: http://purl.org/spar/cito/ fabio: http://purl.org/spar/fabio/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp# solid: http://www.w3.org/ns/solid/terms# acl: http://www.w3.org/ns/auth/acl# earl: http://www.w3.org/ns/earl# spec: http://www.w3.org/ns/spec# odrl: http://www.w3.org/ns/odrl/2/ dio: https://w3id.org/dio# rel: https://www.w3.org/ns/iana/link-relations/relation# dpv: https://w3id.org/dpv# risk: https://w3id.org/dpv/risk#"),document.documentElement.replaceChild(e,document.body),kS.U.showDocumentInfo(),void kS.U.initEditor()}return c.documentElement.cloneNode(!0)},createNewDocument:function(e){kS.U.hideDocumentMenu(),kS.Editor.toggleEditor("author",{template:"new"}),kS.C.DocumentAction="new",lc(kS.C.DocumentURL,{method:"localStorage"}),yc()},saveAsDocument:async function(e){e&&(e.target.closest("button").disabled=!0),document.body.appendChild(Pi(`<aside id="save-as-document" class="do on">${kS.C.Button.Close}<h2>Save As ${kS.C.Button.Info.SaveAs}</h2><div class="info"></div></aside>`));var t=document.getElementById("save-as-document");t.addEventListener("click",e=>{e.target.closest("button.close")&&(document.querySelector("#document-do .resource-save-as").disabled=!1)});var n="",r="location-inbox",i="read";t.insertAdjacentHTML("beforeend",'<div><input id="'+r+'-set" name="'+r+'-set" type="checkbox" /> <label for="'+r+'-set">Set Inbox</label></div>'),t.addEventListener("click",e=>{if(e.target.closest("input#"+r+"-set"))if(e.target.getAttribute("checked"))e.target.removeAttribute("checked"),(n=t.querySelector("#"+r+"-fieldset")).parentNode.removeChild(n);else{e.target.setAttribute("checked","checked"),e.target.nextElementSibling.insertAdjacentHTML("afterend",'<fieldset id="'+r+'-fieldset"></fieldset>'),n=t.querySelector("#"+r+"-fieldset"),kS.U.setupResourceBrowser(n,r,i),n.insertAdjacentHTML("beforeend","<p>Article's <em>inbox</em> will be set to: <samp id=\""+r+"-"+i+'"></samp></p>');var o=document.getElementById(r+"-input");o.focus(),o.placeholder="https://example.org/path/to/inbox/"}});var o="location-annotation-service",s="read";t.insertAdjacentHTML("beforeend",'<div><input id="'+o+'-set" name="'+o+'-set" type="checkbox" /> <label for="'+o+'-set">Set Annotation Service</label></div>'),t.addEventListener("click",e=>{if(e.target.closest("input#"+o+"-set"))if(e.target.getAttribute("checked"))e.target.removeAttribute("checked"),(n=t.querySelector("#"+o+"-fieldset")).parentNode.removeChild(n);else{e.target.setAttribute("checked","checked"),e.target.nextElementSibling.insertAdjacentHTML("afterend",'<fieldset id="'+o+'-fieldset"></fieldset>'),n=t.querySelector("#"+o+"-fieldset"),kS.U.setupResourceBrowser(n,o,s),n.insertAdjacentHTML("beforeend","<p>Article's <em>annotation service</em> will be set to: <samp id=\""+o+"-"+s+'"></samp></p>');var r=document.getElementById(o+"-input");r.focus(),r.placeholder="https://example.org/path/to/annotation/"}});var a=document.querySelectorAll("img"),l=[],c=[],u=[];0==a.length||a.forEach(e=>{e.hasAttribute("alt")?(""===e.alt.trim()&&u.push(e),c.push(e)):l.push(e)});var d="";(l.length||u.length)&&(d+=l.length?"<li>Fail: Images (<code>img</code>) without alternative text (<code>alt</code>).</li>":"",d+=u.length?"<li>Can't Tell: Images (<code>img</code>) without a non-empty alternative text (<code>alt</code>).</li>":"");var h=document.querySelectorAll("video"),p=[],f=[];0==h.length||h.forEach(e=>{e.querySelector("track")&&e.hasAttribute("kind")?f.push(e):p.push(e)});var m="";p.length&&(m+="<li>Fail: Videos (<code>video</code>) without external timed text tracks (<code>track</code> or <code>track</code> with <code>kind</code> of text track.)</li>");var g=document.querySelectorAll("audio"),v=[],y=[];0==g.length||g.forEach(e=>{e.querySelector("track")&&e.hasAttribute("kind")?y.push(e):v.push(e)});var b="";v.length&&(b+="<li>Fail: Audios (<code>audio</code>) without external timed text tracks (<code>track</code> or <code>track</code> with <code>kind</code> of text track.)</li>");var w="";d.length||b.length||m.length?w+="<p>This document contains some content, e.g., images, videos, audio, that is not accompanied with alternative text or an alternative text field without information. End users with disabilities will likely experience difficulty accessing the content. Please consider adding alternative text before continuing:</p><ul>"+d+b+m+"</ul>":w+="<p>All content in this document includes alternative text. End users with disabilities will likely have a good experience with this document.</p>",w='<details id="accessibility-report-save-as"><summary>Accessibility Report</summary>'+w+"</details>";let _="",x="";kS.Editor.new||(_='<li><input type="checkbox" id="dokielize-resource" name="dokielize-resource" /><label for="dokielize-resource">dokielize</label></li>',x='<li><input type="checkbox" id="derivation-data" name="derivation-data" checked="checked" /><label for="derivation-data">Derivation data</label></li>');var S="location-save-as",C="write";t.insertAdjacentHTML("beforeend",'<fieldset id="'+S+'-fieldset"><legend>Save to</legend></fieldset>'),n=t.querySelector("fieldset#"+S+"-fieldset"),kS.U.setupResourceBrowser(n,S,C),n.insertAdjacentHTML("beforeend",'<p id="'+S+'-samp">Article will be saved at: <samp id="'+S+"-"+C+'"></samp></p>'+kS.U.getBaseURLSelection()+"<ul>"+_+x+"</ul>"+w+'<button class="create" title="Save to destination">Save</button>');var k=document.getElementById(S+"-input");k.focus(),k.placeholder="https://example.org/path/to/article",t.addEventListener("click",async e=>{if(e.target.closest("button.create")){var t=document.getElementById("save-as-document"),n=t.querySelector("#"+S+"-"+C).innerText.trim(),a=t.querySelector(".response-message");if(a&&a.parentNode.removeChild(a),n.length){var l,c=document.documentElement.cloneNode(!0);if(!kS.Editor.new)document.querySelector("#dokielize-resource").checked&&(c=fd(c),c=await kS.U.spawnDokieli(document,c,"text/html",n,{init:!1})),document.querySelector("#derivation-data").checked&&(l={id:"document-derived-from",title:"Derived From"},c=Nd(c,[{rel:"prov:wasDerivedFrom",href:kS.C.DocumentURL}],l),c=Nd(c=Id(c,{id:"document-derived-on",property:"prov:generatedAtTime",title:"Derived On"}),[{rel:"owl:sameAs",href:n}],l={id:"document-identifier",title:"Identifier"}));var u=t.querySelector("#"+r+"-"+i);u&&(c=Nd(c,[{rel:"ldp:inbox",href:u=u.innerText.trim()}],l={id:"document-inbox",title:"Notifications Inbox"}));var d=t.querySelector("#"+o+"-"+s);d&&(c=Nd(c,[{rel:"oa:annotationService",href:d=d.innerText.trim()}],l={id:"document-annotation-service",title:"Annotation Service"}));var h=t.querySelector('select[id="base-url"]');if(h.length){var p=h.value,f=c.querySelectorAll("head link, [src], object[data]"),m=c.querySelector("head base[href]");"base-url-relative"==p&&kS.U.copyRelativeResources(n,f);var g={baseURLType:p};m&&(g.iri=m.href),f=kS.U.rewriteBaseURL(f,g)}c=fd(c);var v=t.querySelector("progress");v&&v.parentNode.removeChild(v),e.target.insertAdjacentHTML("afterend",'<progress min="0" max="100" value="0"></progress>'),v=t.querySelector("progress"),oo(n,c,null,null,{progress:v}).then(e=>{v.parentNode.removeChild(v);let r=e.url||n;if(r=zi(r),t.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="success">Document saved at <a href="'+r+'">'+r+"</a></p></div>"),kS.C.DocumentAction="save-as",kS.Editor.new){kS.Editor.new=!1;var i=new URL(r),o=new URL(kS.C.DocumentURL);i.origin===o.origin?(window.history.pushState({},null,r),kS.U.setDocumentURL(r),kS.U.hideDocumentMenu()):window.open(r+documentMode,"_blank")}else window.open(r+documentMode,"_blank")}).catch(e=>{let r;console.log("Error saving document. Status: "+e.status),v.parentNode.removeChild(v);var i,o,s="",a=e.response.headers.get("Link");switch(a&&(i=uo.parse(a)),kS.C.User.IRI&&i&&i.has("rel",CS.ldp.inbox.value)&&(s='<p><button class="request-access" data-inbox="'+(o=i.rel(CS.ldp.inbox.value)[0].uri)+'" data-target="'+n+'" title="Send an access request to resource inbox.">Request Access</button></p>'),e.status){case 0:case 405:r="this location is not writable.";break;case 401:r="you are not authorized.",kS.C.User.IRI||(r+=" Try signing in.");break;case 403:r="you do not have permission to write here.";break;case 406:r="enter a name for your resource.";break;default:r=e.message}t.insertAdjacentHTML("beforeend",zi('<div class="response-message"><p class="error">Unable to save: '+r+"</p>"+s+"</div>")),kS.C.User.IRI&&s&&document.querySelector("#save-as-document .response-message .request-access").addEventListener("click",e=>{var t="#"+ji();o=e.target.dataset.inbox;var n=e.target.dataset.target,r=kS.C.User.IRI;e.target.disabled=!0;var i=e.target.parentNode;i.insertAdjacentHTML("beforeend",zi('<span class="progress" data-to="'+o+'">'+Ri[".fas.fa-circle-notch.fa-spin.fa-fw"]+"</span>"));var s='<dl about="'+t+'" prefix="acl: http://www.w3.org/ns/auth/acl#">\n  <dt>Object type</dt><dd><a about="'+t+'" href="'+CS.acl.Authorization.value+'" typeof="acl:Authorization">Authorization</a></dd>\n  <dt>Agents</dt><dd><a href="'+r+'" property="acl:agent">'+r+'</a></dd>\n  <dt>Access to</dt><dd><a href="'+n+'" property="acl:accessTo">'+n+'</a></dd>\n  <dt>Modes</dt><dd><a href="'+CS.acl.Read.value+'" property="acl:mode">Read</a></dd><dd><a href="'+CS.acl.Write.value+'" property="acl:mode">Write</a></dd>\n</dl>\n',a={type:["as:Request"],inbox:o,object:t,statements:s};return i=document.querySelector("#save-as-document .response-message"),vh(a).catch(e=>{console.log("Error notifying the inbox:",e),i.querySelector('.progress[data-to="'+o+'"]').setHTMLUnsafe(zi(Ri[".fas.fa-times-circle.fa-fw"]+" Unable to notify. Try later."))}).then(e=>{var t="Notification sent",n=e.headers.get("Location");n?t='<a href="'+n.trim()+'" rel="noopener" target="_blank">'+Ri[".fas.fa-check-circle.fa-fw"]+"</a>":t+=", but location unknown.",i.querySelector('.progress[data-to="'+o+'"]').setHTMLUnsafe(zi(t))})})})}else t.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">Specify the location to save the article to, and optionally set its <em>inbox</em> or <em>annotation service</em>.</p></div>')}})},viewSource:function(e){e&&(e.target.closest("button").disabled=!0);var t="file:"===document.location.protocol?' disabled="disabled"':"";document.body.appendChild(Pi('<aside id="source-view" class="do on">'+kS.C.Button.Close+`<h2>Source ${kS.C.Button.Info.Source}</h2><div class="info"></div><textarea id="source-edit" rows="24" cols="80"></textarea><p><button class="update"`+t+' title="Update source">Update</button></p></aside>'));var n=document.getElementById("source-view");document.getElementById("source-edit").value=fd(),n.addEventListener("click",e=>{if(e.target.closest("button.update")){var t=document.getElementById("source-edit").value;document.documentElement.setHTMLUnsafe(zi(t)),kS.U.showDocumentInfo(),kS.U.showDocumentMenu(e),kS.U.viewSource(),document.querySelector("#document-do .resource-source").disabled=!0}e.target.closest("button.close")&&(document.querySelector("#document-do .resource-source").disabled=!1)})},getFeedFormatSelection:function(){return'\n        <div id="feed-format-selection">\n          <label for="feed-format">Format:</label>\n          <select id="feed-format">\n            <option id="feed-format-atom" value="application/atom+xml">Atom</option>\n            <option id="feed-format-rss" value="application/rss+xml" selected="selected">RSS</option>\n          </select>\n        </div>\n      '},getBaseURLSelection:function(){return'\n        <div id="base-url-selection">\n          <label for="base-url">Location of media resources:</label>\n          <select id="base-url">\n            <option id="base-url-relative" value="base-url-relative" selected="selected">Copy to your storage</option>\n            <option id="base-url-absolute" value="base-url-absolute">Use references as is</option>\n          </select>\n        </div>\n      '},rewriteBaseURL:function(e,t){if(t=t||{},"object"==typeof e&&e.length)for(var n=0;n<e.length;n++){var r,i,o=e[n];switch(o.tagName.toLowerCase()){default:r=o.getAttribute("src"),i="src";break;case"link":r=o.getAttribute("href"),i="href";break;case"object":r=o.getAttribute("data"),i="data"}var s=r.split(":")[0];"http"!=s&&"https"!=s&&"file"!=s&&"data"!=s&&"urn"!=s&&"file:"!=document.location.protocol?r=kS.U.setBaseURL(r,t):r.startsWith("http:")&&o.tagName.toLowerCase()&&(r=vi(r)),o.setAttribute(i,r)}return e},setBaseURL:function(e,t){var n="baseURLType"in(t=t||{})?t.baseURLType:"base-url-absolute",r=[];if(r=e.match(/(https?:\/\/([^\/]*)\/|file:\/\/\/|data:|urn:|\/\/)?(.*)/))switch(n){case"base-url-absolute":default:if("//"==r[1]&&"iri"in t)e=t.iri.split(":")[0]+":"+e;else{if(e=xi("iri"in t?vi(t.iri):document.location.href),r[3].startsWith("../")){for(var i=r[3].split("../"),o=0;o<i.length-1;o++)e=ki(e)||e;e+=i[i.length-1]}else e+=r[3].replace(/^\//g,"")}break;case"base-url-relative":e=r[3].replace(/^\//g,"")}return e},generateLabelFromString:function(e){return"string"==typeof e&&e.length&&(e=(e="."!==(e=".html"!==(e=e.replace(/-/g," "))&&e.endsWith(".html")?e.substr(0,e.lastIndexOf(".html")):e)&&e.endsWith(".")?e.substr(0,e.lastIndexOf(".")):e).charAt(0).toUpperCase()+e.slice(1)),e},copyRelativeResources:function(e,t){for(var n="",r=xi(e),i=0;i<t.length;i++){var o=t[i];switch(o.tagName.toLowerCase()){default:n="src";break;case"link":n="href";break;case"object":n="data"}var s=o.getAttribute(n).trim(),a="",l=s.split(":")[0];if("http"!=l&&"https"!=l&&"file"!=l&&"data"!=l&&"urn"!=l&&"urn"!=l){if(s.startsWith("//"))var c=r+(s=document.location.protocol+s).substr(2);else s.startsWith("/")?(a=kS.U.setBaseURL(s,{baseURLType:"base-url-relative"}),s=document.location.origin+s,c=r+a):(a=kS.U.setBaseURL(s,{baseURLType:"base-url-relative"}),s=xi(document.location.href)+s,c=r+a);Zi(s,c)}}},createAttributeDateTime:function(e){var t=Ni();switch(e){case"mark":case"article":t='data-datetime="'+t+'"';break;case"del":case"ins":t='datetime="'+t+'"';break;default:t=""}return t},getCitation:function(e,t){var n;if((t=t||{}).noCredentials=!0,Vi(e)){n="https://openlibrary.org/isbn/"+e;var r={Accept:"application/json"},i=lr.grapoi({dataset:lr.dataset()}).node(lr.namedNode(n));return Yi(n,r,t).then(e=>e.text()).then(e=>{var n=[];if((e=JSON.parse(e)).title&&i.addOut(CS.schema.name,e.title),e.publish_date&&i.addOut(schemadatePublished,function(e){let t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}(e.publish_date)),e.covers&&i.addOut(CS.schema.image,lr.namedNode("https://covers.openlibrary.org/b/id/"+e.covers[0]+"-S.jpg")),e.authors&&Array.isArray(e.authors)&&e.authors.length&&e.authors[0].key){var o="https://openlibrary.org"+e.authors[0].key;n.push(Yi(o,r,t).then(e=>e.text()).then(e=>{e=JSON.parse(e);var t="http://example.com/.well-known/genid/"+ji();return e.links&&Array.isArray(e.links)&&e.links.length&&(t=e.links[0].url),i.addOut(CS.schema.author,lr.namedNode(t),t=>{e.name&&t.addOut(CS.schema.name,e.name)}),i}))}return Promise.allSettled(n).then(e=>{var t=[];return e.forEach(e=>{t.push(e.value)}),t[0]})})}return wo(n=e.match(/^10\.\d+\//)?"https://doi.org/"+e:e.replace(/https?:\/\/dx\.doi\.org\//i,"https://doi.org/"),null,t)},getCitationHTML:function(e,t,n){if(e){n=n||{};var r=e.node(lr.namedNode(t)),i=ls(r);void 0===i&&(i=ls(r=e.node(lr.namedNode(n.citationId)))||""),i=(i=ad(i)).length?"<cite>"+i+"</cite>, ":"";var o=Yo(r)||"",s=r.out(CS.schema.dateModified).values[0]||o;o=o?o.substr(0,4)+", ":"";var a,l="Accessed: "+Ni(),c=[],u=[],d=r.out(CS.schema.author).values,h=r.out(CS.dcterms.creator).values,p=r.out(CS.as.actor).values;d.length?d.forEach(e=>{u.push(e)}):h.length?h.forEach(e=>{u.push(e)}):p.length&&p.forEach(e=>{u.push(e)}),u.length&&(u.forEach(e=>{var t=r.node(lr.namedNode(e)),n=Oo(t),i=t.out(CS.schema.familyName).values,o=t.out(CS.schema.givenName).values,s=t.out(CS.foaf.familyName).values,a=t.out(CS.foaf.givenName).values;i.length&&o.length?n=kS.U.createRefName(i[0],o[0]):s.length&&a.length&&(n=kS.U.createRefName(s[0],a[0])),n?c.push(n):c.push(e)}),c=c.join(", ")+": ");var f=r.out(CS.mem.memento).values,m=r.out(CS.rel["latest-version"]).values;f.length?a=f:m.length&&(a=m),a=a?' data-versionurl="'+a+'"':"";var g=s?' data-versiondate="'+s+'"':"",v="content"in n&&n.content.length?n.content+", ":"",y="Reason: "+kS.C.Citation[n.citationRelation],b=t,w="";return Vi(n.citationId)?(b=n.citationId,w=", ISBN: "):b=t=n.citationId.match(/^10\.\d+\//)?"https://doi.org/"+n.citationId:t.replace(/https?:\/\/dx\.doi\.org\//i,"https://doi.org/"),c+i+o+v+w+'<a about="#'+n.refId+'"'+g+a+' href="'+t+'" rel="schema:citation '+n.citationRelation+'" title="'+kS.C.Citation[n.citationRelation]+'">'+b+"</a> ["+l+", "+y+"]"}},createRefName:function(e,t,n){switch(n=n||kS.C.DocRefType){case"LNCS":default:return e+", "+t.slice(0,1)+".";case"ACM":return t.slice(0,1)+". "+e;case"fullName":return t+" "+e}},highlightItems:function(){for(var e=gd(document).querySelectorAll('*[class*="highlight-"]'),t=0;t<e.length;t++)e[t].addEventListener("mouseenter",e=>{for(var t=e.target.getAttribute("class").split(" ").filter(e=>e.startsWith("highlight-")),n=gd(document).querySelectorAll('*[class~="'+t[0]+'"]'),r=0;r<n.length;r++)n[r].classList.add("do","highlight")}),e[t].addEventListener("mouseleave",e=>{var t=e.target.getAttribute("class");t=e.target.getAttribute("class").split(" ").filter(e=>e.startsWith("highlight-"));for(var n=gd(document).querySelectorAll('*[class~="'+t[0]+'"]'),r=0;r<n.length;r++)n[r].classList.remove("do","highlight")})},SPARQLQueryURL:{getResourcesOfTypeWithLabel:function(e,t,n,r){var i="",o="";if("lang"in(r=r||{})||(r.lang="en"),"filter"in r){if("<http://purl.org/linked-data/cube#DataSet>"==t||"qb:DataSet"==t&&"dimensionRefAreaNotation"in r.filter){var s,a="",l="\n    [] qb:dataSet ?resource";"dimensionProperty"in r.filter?s=" ; "+r.filter.dimensionProperty:(a=" .\n  { SELECT DISTINCT ?propertyRefArea WHERE { ?propertyRefArea rdfs:subPropertyOf* sdmx-dimension:refArea . } }",s=" ; ?propertyRefArea ");var c=" [ skos:notation '"+r.filter.dimensionRefAreaNotation.toUpperCase()+"' ] ."}o=a+l+s+c}return i="\n  ","optional"in r?"prefLabels"in r.optional&&(1==r.optional.prefLabels.length?i+="  ?resource "+r.optional.prefLabels[0]+" ?prefLabel .":(i+="  VALUES ?labelProperty {",r.optional.prefLabels.forEach(e=>{i+=" "+e}),i+=" } ?resource ?labelProperty ?prefLabel .")):i+="  ?resource rdfs:label ?prefLabel .",e+"?query="+mi("PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX qb: <http://purl.org/linked-data/cube#>\nPREFIX sdmx-dimension: <http://purl.org/linked-data/sdmx/2009/dimension#>\nPREFIX sdmx-measure: <http://purl.org/linked-data/sdmx/2009/measure#>\nCONSTRUCT {\n  ?resource skos:prefLabel ?prefLabel .\n}\nWHERE {\n  ?resource a "+t+" ."+i+"\n  FILTER (CONTAINS(LCASE(?prefLabel), '"+n+"') && (LANG(?prefLabel) = '' || LANGMATCHES(LANG(?prefLabel), '"+r.lang+"')))"+o+"\n}")},getObservationsWithDimension:function(e,t,n,r){return e+"?query="+mi("PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX qb: <http://purl.org/linked-data/cube#>\nPREFIX sdmx-dimension: <http://purl.org/linked-data/sdmx/2009/dimension#>\nPREFIX sdmx-measure: <http://purl.org/linked-data/sdmx/2009/measure#>\nCONSTRUCT {\n  ?observation sdmx-dimension:refPeriod ?refPeriod .\n  ?observation sdmx-measure:obsValue ?obsValue .\n}\nWHERE {\n  ?observation qb:dataSet <"+t+"> .\n  "+n+"\n  ?propertyRefPeriod rdfs:subPropertyOf* sdmx-dimension:refPeriod .\n  ?observation ?propertyRefPeriod ?refPeriod .\n  ?propertyMeasure rdfs:subPropertyOf* sdmx-measure:obsValue .\n  ?observation ?propertyMeasure ?obsValue .\n}")}},getSparkline:function(e,t){"cssStroke"in(t=t||{})||(t.cssStroke="#000");var n='<svg height="100%" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# xsd: http://www.w3.org/2001/XMLSchema# qb: http://purl.org/linked-data/cube# prov: http://www.w3.org/ns/prov# schema: http://schema.org/" width="100%" xmlns="http://www.w3.org/2000/svg">';return n+=kS.U.drawSparklineGraph(e,t),n+="</svg>"},drawSparklineGraph:function(e,t){"cssStroke"in(t=t||{})||(t.cssStroke="#000");for(var n="",r="http://purl.org/linked-data/cube#Observation",i=e.map(e=>e["http://purl.org/linked-data/sdmx/2009/measure#obsValue"]),o=Math.min.apply(null,i),s=Math.max.apply(null,i),a=i.map(function(e){return 98/(s-o)*(e-o)+0||0}),l=100/a.length,c=0,u=0,d=l/2,h=98-a[0],p="",f=0;f<a.length;f++)c=d,u=h,d=f/a.length*98+l/2,h=98-a[f],p+='<a href="'+e[f][r]+'" rel="rdfs:seeAlso noopener" resource="'+e[f][r]+'" target="_blank"><line x1="'+c+'%" x2="'+d+'%" y1="'+u+'%" y2="'+h+'%" stroke="'+t.cssStroke+'" /></a>',f+1===a.length&&(p+='<a href="'+e[f][r]+'" rel="noopener" target="_blank"><circle cx="'+d+'%" cy="'+h+'%" r="1" stroke="#f00" fill:#f00 /></a>');var m="";return t&&"url"in t&&(m=' rel="prov:wasDerivedFrom" resource="'+t.url+'"'),n+="<g"+m+">",n+='<metadata rel="schema:license" resource="https://creativecommons.org/publicdomain/zero/1.0/"></metadata>',t&&"title"in t&&(n+='<title property="schema:name">'+t.title+"</title>"),n+=p+"</g>"},getListHTMLFromTriples:function(e,t){var n="elementId"in(t=t||{element:"ul"})?' id="'+t.elementId+'"':"",r="elementName"in t?' name="'+t.elementName+'"':"",i="elementLabel"in t?' aria-label="'+t.elementLabel+'"':"",o="elementTitle"in t?t.elementTitle:"",s="";switch(e.forEach(e=>{var n=e.subject.value,r=e.object.value;switch(t.element){case"ol":case"ul":default:s+='<li><a href="'+n+'">'+r+"</a></li>";break;case"dl":s+='<dd><a href="'+n+'">'+r+"</a></dd>";break;case"select":s+='<option value="'+n+'">'+r+"</option>"}}),t.element){case"ul":default:return"<ul"+n+">"+s+"</ul>";case"ol":return"<ol"+n+">"+s+"</ol>";case"dl":return"<dl"+n+"><dt>"+o+"</dt>"+s+"</dl>";case"select":return"<select"+i+n+r+">"+s+"</select>"}},showAsTabs:function(e){e=e||".tabs",document.querySelectorAll(e).forEach(e=>{var t=e.querySelectorAll("nav li.selected"),n=e.querySelectorAll("figure.selected");0==t.length&&0==n.length&&(e.querySelector("nav li").classList.add("selected"),e.querySelector("figure").classList.add("selected")),e.querySelector("nav").addEventListener("click",t=>{var n=t.target;if(n.closest("a")){t.preventDefault(),t.stopPropagation();var r=n.parentNode;if(!r.classList.contains("class")){for(var i=e.querySelectorAll("nav li"),o=0;o<i.length;o++)i[o].classList.remove("selected");r.classList.add("selected");var s=e.querySelectorAll("figure");for(let e=0;e<s.length;e++)s[e].classList.remove("selected");e.querySelector("figure"+n.hash).classList.add("selected")}}})})},showRefs:function(){for(var e=document.querySelectorAll("span.ref"),t=0;t<e.length;t++){var n=e[t].querySelector("mark[id]");if(n)for(var r=n.id,i=e[t].querySelectorAll("[class*=ref-] a"),o=0;o<i.length;o++){var s=i[o].getAttribute("href").substr(1),a=i[o].textContent;kS.U.positionNote(r,s,a)}}},positionNote:function(e,t,n){var r=document.querySelector('[id="'+e+'"]'),i=document.querySelector('[id="'+t+'"]');r=r||Ad(i),i.hasAttribute("style")&&i.removeAttribute("style");var o=["top: "+Math.ceil(r.parentNode.offsetTop)+"px"].join("; ");i.setAttribute("style",o)},positionInteraction:function(e,t,n){return t=t||gd(document),kS.C.Activity[e]?Promise.reject():(kS.C.Activity[e]={},wo(e).then(function(r){r&&!r.resource&&kS.U.showAnnotation(e,r,t,n)}))},showAnnotation:function(e,t,n){var r=gd(document);n=n||{};var i=kS.C.DocumentURL,o=t.node(lr.namedNode(e));o.out(CS.as.object).values.length&&(o=t.node(lr.namedNode(o.out(CS.as.object).values[0])));var s=ji(e),a="r-"+s,l=s,c=o.out(CS.ldp.inbox).values.length?o.out(CS.ldp.inbox).values[0]:void 0,u=o.out(CS.as.inbox).values.length?o.out(CS.as.inbox).values[0]:void 0;(c=c||u)&&(kS.C.Inbox[c]?kS.C.Inbox[c].Notifications.forEach(e=>{kS.C.Notification[e]?kS.C.Notification[e].Activities&&kS.C.Notification[e].Activities.forEach(e=>{!document.querySelector('[about="'+e+'"]')&&kS.C.Activity[e]&&kS.C.Activity[e].Graph&&kS.U.showAnnotation(e,kS.C.Activity[e].Graph)}):kS.U.showActivities(e,{notification:!0})}):kS.U.showNotificationSources(c));var d,h=Yo(o),p=o.out(CS.schema.creator).values.length?o.out(CS.schema.creator):o.out(CS.dcterms.creator).values.length?o.out(CS.dcterms.creator):o.out(CS.as.creator).values.length?o.out(CS.as.creator):void 0;if(p){d=p.values[0];var f=Oo(p=t.node(lr.namedNode(d))),m=Jo(p),g=p.out(CS.schema.url).values[0]}var v="oa:replying",y=o.out(CS.schema.description).values[0]||o.out(CS.dcterms.description).values[0]||o.out(CS.as.content).values[0],b=fs(o),w=[];if(b.forEach(e=>{w.push(e)}),w.includes(CS.oa.Annotation.value)){y=o.out(CS.oa.bodyValue).values[0]||y;var _=o.out(CS.oa.hasBody).values;if(_.length){var x=rs(o),S=is(o),C=ss(o),k=[];_.forEach(e=>{var n={id:e},r=t.node(lr.namedNode(e));if(r){var i=fs(r);i.length&&(n.type=i);var o=r.out(CS.rdf.value).values;o.length&&(n.value=o[0]);var s=r.out(CS.oa.hasPurpose).values;s.length&&(n.purpose=s[0]);var a=r.out(CS.dcelements.format).values[0]||r.out(CS.dcterms.format).values[0];a&&(n.format=a);var l=rs(r)||x;l&&(n.language=l);var c=is(r)||S;c&&(n.license=c);var u=ss(r)||C;u&&(n.rights=u)}k.push(n)})}var E=o.out(CS.oa.hasTarget).values[0];if(E&&!(E.startsWith(i)||"targetInMemento"in n||"targetInSameAs"in n))return;var A,T,I,R=t.node(lr.namedNode(E)),L=R.term.value,N=R.out(CS.oa.hasSource).values[0];(v=o.out(CS.oa.motivatedBy).values[0])&&(l=ph(v));var O=R.out(CS.oa.hasSelector).values[0];if(O){var D=fs(O=t.node(lr.namedNode(O)))[0];if(D==CS.oa.TextQuoteSelector.value)A=O.out(CS.oa.exact).values[0],T=O.out(CS.oa.prefix).values[0],I=O.out(CS.oa.suffix).values[0];else if(D==CS.oa.FragmentSelector.value){var M=O.out(CS.oa.refinedBy).values[0];if(A=(M=M&&O.node(lr.namedNode(M)))&&M.out(CS.oa.exact).values[0],T=M&&M.out(CS.oa.prefix).values[0],I=M&&M.out(CS.oa.suffix).values[0],O.out(CS.rdf.value).values[0]&&O.out(CS.dcterms.conformsTo).values[0]&&O.out(CS.dcterms.conformsTo).values[0].endsWith("://tools.ietf.org/html/rfc3987")){var P=O.out(CS.rdf.value).values[0];""!==(P=0==P.indexOf("#")?bi(P):P)&&(r=document.getElementById(P)||gd(document))}}}var j='<sup class="ref-annotation"><a href="#'+s+'" rel="cito:hasReplyFrom" resource="'+e+'">'+l+"</a></sup>";if(r.textContent.indexOf(T+A+I)>=0){O={prefix:T,exact:A,suffix:I};var U=kS.Editor.importTextQuoteSelector(r,O,a,v,j,{do:!0}).closest("[id]"),B={type:"comment",mode:"read",motivatedByIRI:v,id:s,refId:a,iri:e,creator:{},target:{iri:L=U?i+"#"+U.id:i,source:N,selector:{exact:A,prefix:T,suffix:I}}};if(y&&(B.bodyValue=y),k&&(B.body=k),d&&(B.creator.iri=d),f&&(B.creator.name=f),m&&(B.creator.image=m),g&&(B.creator.url=g),x&&(B.language=x),S&&(B.license=S),C&&(B.rights=C),c&&(B.inbox=c),h&&(B.datetime=h),kS.U.addNoteToNotifications(B),kS.C.User.IRI){var F=document.querySelector('aside.do blockquote[cite="'+e+'"] article button.delete');F&&F.addEventListener("click",e=>{Md(e.target.closest("button.delete"))})}return e}B={type:"comment",mode:"read",motivatedByIRI:v,id:s,refId:a,refLabel:l,iri:e,creator:{},target:{iri:L}},y&&(B.bodyValue=y),k&&(B.body=k),d&&(B.creator.iri=d),f&&(B.creator.name=f),m&&(B.creator.image=m),x&&(B.language=x),S&&(B.license=S),C&&(B.rights=C),c&&(B.inbox=c),h&&(B.datetime=h),kS.U.addNoteToNotifications(B)}else if(o.out(CS.as.inReplyTo).values[0]||o.out(CS.sioc.replyof).values[0]){var z,q;o.out(CS.as.inReplyTo).values[0]?(z=o.out(CS.as.inReplyTo).values[0],q="as:inReplyTo"):o.out(CS.sioc.reply_of).values[0]&&(z=o.out(CS.sioc.reply_of).values[0],q="sioc:reply_of"),z&&z.includes(Qi())?(B={type:"comment",mode:"read",motivatedByIRI:v,id:s,refId:a,refLabel:l,iri:e,creator:{},inReplyTo:{iri:z,rel:q}},y&&(B.bodyValue=y),k&&(B.body=k),d&&(B.creator.iri=d),f&&(B.creator.name=f),m&&(B.creator.image=m),x&&(B.language=x),S&&(B.license=S),C&&(B.rights=C),c&&(B.inbox=c),h&&(B.datetime=h),kS.U.addNoteToNotifications(B)):console.log(e+" is not an oa:Annotation, as:inReplyTo, sioc:reply_of")}},showCitations:function(e,t){var n=yi(e.citingEntity);kS.C.Activity[n]?kS.C.Activity[n].Graph?kS.U.addCitation(e,kS.C.Activity[n].Graph):window.setTimeout(kS.U.showCitations,1e3,e,t):kS.U.processCitationClaim(e)},processCitationClaim:function(e){return wo(e.citingEntity).then(t=>{var n=yi(e.citingEntity);kS.C.Activity[n]={},kS.C.Activity[n].Graph=t;var r=t.node(lr.namedNode(e.citingEntity));kS.U.addCitation(e,r)})},addCitation:function(e,t){var n=e.citingEntity,r=e.citationCharacterization,i=e.citedEntity,o=kS.C.DocumentURL;t=t.node(lr.namedNode(n));var s,a=kS.C.Citation[r]||r,l=ji(n),c=yi(n),u=ls(t);if(!u){var d=ls(t.node(lr.namedNode(c)));u=d||n}e.citingEntityLabel=u;var h=ls(kS.C.Resource[o].graph.node(lr.namedNode(i)));h||(h=(d=kS.C.Resource[o].graph(kS.C.Resource[o].graph.node(lr.namedNode(yi(i)))))||i),e.citedEntityLabel=h;var p,f,m=Pi('\n<aside class="note do">\n<blockquote cite="'+n+'">'+bd({id:l,iri:n,type:"ref-citation",mode:"read",citation:e})+"</blockquote>\n</aside>\n");if(p=bi(i),f=document.querySelector('[id="'+p+'"]')){s=p,f.appendChild(m),kS.U.positionNote(s,l,u)}else{var g='<li><a about="'+n+'" href="'+n+'" rel="'+r+'" resource="'+i+'">'+u+"</a> ("+a+")</li>",v="document-cited-by",y=document.getElementById(v);if(y){var b=y.querySelector("ul");b.querySelector('[about="'+n+'"][rel="'+r+'"][resource="'+i+'"]')||b.appendChild(Pi(g))}else Td(document,'        <dl class="do" id="'+v+'"><dt>Cited By</dt><dd><ul>'+g+"</ul></dl>",{id:v})}},initializeButtonMore:function(e){var t=e.querySelector("div.info"),n=t.querySelector(".progress"),r=Pi('<div class="progress">'+kS.C.Button.More+" See more interactions with this document</div>");n?t.replaceChild(r,n):t.appendChild(r),(e=document.getElementById("document-notifications")).querySelector("div.info button.more").addEventListener("click",()=>{kS.C.User.IRI?kS.U.showContactsActivities():td()})},initializeNotifications:function(e={}){Ad(document);var t=`<aside class="do" contenteditable="false" id="document-notifications">${kS.C.Button.Toggle}<h2>Notifications ${kS.C.Button.Info.Notifications}</h2><div><div class="info"></div><ul class="activities"></ul></div></aside>`;return document.body.insertAdjacentHTML("beforeend",t),t=document.getElementById("document-notifications"),e.includeButtonMore&&kS.U.initializeButtonMore(t),t},addNoteToNotifications:function(e){if(!document.getElementById(e.id)){var t=e.iri,n=bd(e),r=zi('<li data-datetime="'+(e.datetime?e.datetime:"1900-01-01T00:00:00.000Z")+'"><blockquote cite="'+t+'">'+n+"</blockquote></li>"),i=document.getElementById("document-notifications");i||(i=kS.U.initializeNotifications({includeButtonMore:!0}));var o=document.querySelector("#document-notifications > div > ul"),s=i.querySelectorAll("div > ul > li[data-datetime]"),a=null;if(s.length){var l=function(e,t){const n=Li(e).sort().reverse();let r=null;for(let e of n)if(e<=t){r=e;break}return r}(Array.from(s).map(e=>e.getAttribute("data-datetime")).sort().reverse(),e.datetime);a=Array.from(s).find(e=>l&&l===e.getAttribute("data-datetime")?e:null)}a?a.insertAdjacentHTML("beforebegin",r):o.insertAdjacentHTML("beforeend",r)}},showNotifications:function(){kS.U.hideDocumentMenu();var e=document.getElementById("document-notifications");e||(e=kS.U.initializeNotifications()),e.classList.add("on"),kS.U.showContactsActivities()},initMath:function(e){kS.C.MathAvailable&&(e=e||{skipTags:["script","noscript","style","textarea","pre","code","math"],ignoreClass:"equation",MathML:{useMathMLspacing:!0},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:!0},asciimath2jax:{delimiters:[["$","$"],["`","`"]]}},window.MathJax.Hub.Config(e),window.MathJax.Hub.Register.StartupHook("End Jax",function(){var e=window.MathJax.Hub.Browser,t="SVG";e.isMSIE&&e.hasMathPlayer&&(t="NativeMML"),e.isFirefox&&(t="NativeMML"),e.isSafari&&e.versionAtLeast("5.0")&&(t="NativeMML"),window.MathJax.Hub.setRenderer(t)}))},initSlideshow:function(e){((e=e||{}).progress=e.progress||!0,gd(document).classList.contains("shower"))&&(!gd(document).querySelector(".progress")&&e.progress&&gd(document).appendChild(Pi('<div class="progress"></progress>')),(new cm).start())}}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{kS.U.init()}):window.addEventListener("load",()=>{kS.U.init()})),window.DO=kS;const ES=kS})()})();
//# sourceMappingURL=dokieli.js.map