(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory(require("fetch"),require("window"));else if(typeof define==="function"&&define.amd)define(["fetch","window"],factory);else if(typeof exports==="object")exports["auth"]=factory(require("fetch"),require("window"));else root["solid"]=root["solid"]||{},root["solid"]["auth"]=factory(root["fetch"],root["window"])})(window,function(__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__27__){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);const auth=new _solid_auth_client__WEBPACK_IMPORTED_MODULE_0__["default"];__webpack_exports__["default"]=auth;Object.getOwnPropertyNames(_solid_auth_client__WEBPACK_IMPORTED_MODULE_0__["default"].prototype).forEach(property=>{const value=auth[property];if(typeof value==="function"){auth[property]=value.bind(auth)}});if(typeof window!=="undefined"){if("SolidAuthClient"in window){console.warn("Caution: multiple versions of solid-auth-client active.")}else{let warned=false;Object.defineProperty(window,"SolidAuthClient",{enumerable:true,get:()=>{if(!warned){warned=true;console.warn("window.SolidAuthClient has been deprecated.");console.warn("Please use window.solid.auth instead.")}return auth}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return SolidAuthClient});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);var events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);var events__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);var _authn_fetch__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4);var _popup__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(65);var _session__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8);var _storage__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9);var _url_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6);var _webid_oidc__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}const globalFetch=fetch;class SolidAuthClient extends events__WEBPACK_IMPORTED_MODULE_1___default.a{constructor(...args){super(...args);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_pendingSession",void 0)}fetch(input,options){this.emit("request",Object(_url_util__WEBPACK_IMPORTED_MODULE_6__["toUrlString"])(input));return Object(_authn_fetch__WEBPACK_IMPORTED_MODULE_2__["authnFetch"])(Object(_storage__WEBPACK_IMPORTED_MODULE_5__["defaultStorage"])(),globalFetch,input,options)}login(idp,options){options=_objectSpread(_objectSpread({},defaultLoginOptions(Object(_url_util__WEBPACK_IMPORTED_MODULE_6__["currentUrlNoParams"])())),options);return _webid_oidc__WEBPACK_IMPORTED_MODULE_7__["login"](idp,options)}async popupLogin(options){options=_objectSpread(_objectSpread({},defaultLoginOptions()),options);if(!/https?:/.test(options.popupUri)){options.popupUri=new URL(options.popupUri||"/.well-known/solid/login",window.location).toString()}if(!options.callbackUri){options.callbackUri=options.popupUri}const popup=Object(_popup__WEBPACK_IMPORTED_MODULE_3__["openIdpPopup"])(options.popupUri);const session=await Object(_popup__WEBPACK_IMPORTED_MODULE_3__["obtainSession"])(options.storage,popup,options);this.emit("login",session);this.emit("session",session);return session}async currentSession(storage=Object(_storage__WEBPACK_IMPORTED_MODULE_5__["defaultStorage"])()){let session=this._pendingSession||await Object(_session__WEBPACK_IMPORTED_MODULE_4__["getSession"])(storage);if(!session){try{this._pendingSession=_webid_oidc__WEBPACK_IMPORTED_MODULE_7__["currentSession"](storage);session=await this._pendingSession}catch(err){console.error(err)}if(session){await Object(_session__WEBPACK_IMPORTED_MODULE_4__["saveSession"])(storage)(session);this.emit("login",session);this.emit("session",session)}delete this._pendingSession}return session}async trackSession(callback){callback(await this.currentSession());this.on("session",callback)}stopTrackSession(callback){this.removeListener("session",callback)}async logout(storage=Object(_storage__WEBPACK_IMPORTED_MODULE_5__["defaultStorage"])()){const session=await Object(_session__WEBPACK_IMPORTED_MODULE_4__["getSession"])(storage);if(session){try{await _webid_oidc__WEBPACK_IMPORTED_MODULE_7__["logout"](storage,globalFetch);this.emit("logout");this.emit("session",null)}catch(err){console.warn("Error logging out:");console.error(err)}await Object(_session__WEBPACK_IMPORTED_MODULE_4__["clearSession"])(storage)}}}function defaultLoginOptions(url){return{callbackUri:url?url.split("#")[0]:"",popupUri:"",storage:Object(_storage__WEBPACK_IMPORTED_MODULE_5__["defaultStorage"])()}}},function(module,exports){function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}module.exports=_defineProperty},function(module,exports,__webpack_require__){"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;module.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;function checkListener(listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function _getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;checkListener(listener);events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=_getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){checkListener(listener);this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){checkListener(listener);this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;checkListener(listener);events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function once(emitter,name){return new Promise(function(resolve,reject){function eventListener(){if(errorListener!==undefined){emitter.removeListener("error",errorListener)}resolve([].slice.call(arguments))}var errorListener;if(name!=="error"){errorListener=function errorListener(err){emitter.removeListener(name,eventListener);reject(err)};emitter.once("error",errorListener)}emitter.once(name,eventListener)})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"authnFetch",function(){return authnFetch});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5);var isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(isomorphic_fetch__WEBPACK_IMPORTED_MODULE_1__);var _url_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6);var _host__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7);var _session__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8);var _webid_oidc__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}async function authnFetch(storage,fetch,input,options){if(options){const headers=copyHeaders(options.headers);options=_objectSpread(_objectSpread({},options),{},{headers:headers})}const session=await Object(_session__WEBPACK_IMPORTED_MODULE_4__["getSession"])(storage);if(!session){return fetch(input,options)}if(await shouldShareCredentials(storage,input)){return Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_5__["fetchWithCredentials"])(session,fetch,input,options)}let resp=await fetch(input,options);if(resp.status===401){await Object(_host__WEBPACK_IMPORTED_MODULE_3__["updateHostFromResponse"])(storage)(resp);if(await shouldShareCredentials(storage,input)){resp=Object(_webid_oidc__WEBPACK_IMPORTED_MODULE_5__["fetchWithCredentials"])(session,fetch,input,options)}}return resp}async function shouldShareCredentials(storage,input){const requestHost=await Object(_host__WEBPACK_IMPORTED_MODULE_3__["getHost"])(storage)(Object(_url_util__WEBPACK_IMPORTED_MODULE_2__["toUrlString"])(input));return requestHost!=null&&requestHost.requiresAuth}function copyHeaders(origHeaders){const headers={};if(origHeaders){if(typeof origHeaders.forEach==="function"){origHeaders.forEach((value,key)=>{headers[key]=value})}else{for(const key in origHeaders){headers[key]=origHeaders[key]}}}return headers}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"currentUrl",function(){return currentUrl});__webpack_require__.d(__webpack_exports__,"currentUrlNoParams",function(){return currentUrlNoParams});__webpack_require__.d(__webpack_exports__,"navigateTo",function(){return navigateTo});__webpack_require__.d(__webpack_exports__,"originOf",function(){return originOf});__webpack_require__.d(__webpack_exports__,"toUrlString",function(){return toUrlString});function getLocation(){return typeof window!=="undefined"?window.location:{href:"https://example.org/",pathname:"/",origin:"example.org"}}const currentUrl=()=>getLocation().href;const currentUrlNoParams=()=>getLocation().origin+getLocation().pathname;const navigateTo=url=>{getLocation().href=url};const originOf=url=>new URL(url).origin;const toUrlString=url=>{if(typeof url!=="string"){url="url"in url?url.url:url.toString()}return new URL(url,currentUrl()).toString()}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"getHost",function(){return getHost});__webpack_require__.d(__webpack_exports__,"saveHost",function(){return saveHost});__webpack_require__.d(__webpack_exports__,"updateHostFromResponse",function(){return updateHostFromResponse});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);var _session__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8);var _storage__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9);var _webid_oidc__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(11);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function getHost(storage){return async url=>{const{host:host}=new URL(url);const session=await Object(_session__WEBPACK_IMPORTED_MODULE_1__["getSession"])(storage);if(session&&host===new URL(session.idp).host){return{url:host,requiresAuth:true}}const{hosts:hosts}=await Object(_storage__WEBPACK_IMPORTED_MODULE_2__["getData"])(storage);return hosts&&hosts[host]}}function saveHost(storage){return async({url:url,requiresAuth:requiresAuth})=>{await Object(_storage__WEBPACK_IMPORTED_MODULE_2__["updateStorage"])(storage,data=>_objectSpread(_objectSpread({},data),{},{hosts:_objectSpread(_objectSpread({},data.hosts),{},{[url]:{requiresAuth:requiresAuth}})}))}}function updateHostFromResponse(storage){return async resp=>{if(_webid_oidc__WEBPACK_IMPORTED_MODULE_3__["requiresAuth"](resp)){const{host:host}=new URL(resp.url);await saveHost(storage)({url:host,requiresAuth:true})}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"getSession",function(){return getSession});__webpack_require__.d(__webpack_exports__,"saveSession",function(){return saveSession});__webpack_require__.d(__webpack_exports__,"clearSession",function(){return clearSession});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);var _storage__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}async function getSession(storage){const data=await Object(_storage__WEBPACK_IMPORTED_MODULE_1__["getData"])(storage);return data.session||null}function saveSession(storage){return async session=>{const data=await Object(_storage__WEBPACK_IMPORTED_MODULE_1__["updateStorage"])(storage,data=>_objectSpread(_objectSpread({},data),{},{session:session}));return data.session}}async function clearSession(storage){await Object(_storage__WEBPACK_IMPORTED_MODULE_1__["updateStorage"])(storage,data=>_objectSpread(_objectSpread({},data),{},{session:null}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"NAMESPACE",function(){return NAMESPACE});__webpack_require__.d(__webpack_exports__,"defaultStorage",function(){return defaultStorage});__webpack_require__.d(__webpack_exports__,"getData",function(){return getData});__webpack_require__.d(__webpack_exports__,"updateStorage",function(){return updateStorage});__webpack_require__.d(__webpack_exports__,"asyncStorage",function(){return asyncStorage});__webpack_require__.d(__webpack_exports__,"memStorage",function(){return memStorage});__webpack_require__.d(__webpack_exports__,"ipcStorage",function(){return ipcStorage});var _ipc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);const NAMESPACE="solid-auth-client";const defaultStorage=()=>{const hasLocalStorage=typeof window!=="undefined"&&"localStorage"in window;return asyncStorage(hasLocalStorage?window.localStorage:memStorage())};async function getData(store){let serialized;let data;try{serialized=await store.getItem(NAMESPACE);data=JSON.parse(serialized||"{}")}catch(e){console.warn("Could not deserialize data:",serialized);console.error(e);data={}}return data}async function updateStorage(store,update){const currentData=await getData(store);const newData=update(currentData);await store.setItem(NAMESPACE,JSON.stringify(newData));return newData}function asyncStorage(storage){return{getItem:key=>{return Promise.resolve(storage.getItem(key))},setItem:(key,val)=>{return Promise.resolve(storage.setItem(key,val))},removeItem:key=>{return Promise.resolve(storage.removeItem(key))}}}const memStorage=()=>{const store={};return{getItem:key=>{if(typeof store[key]==="undefined")return null;return store[key]},setItem:(key,val)=>{store[key]=val},removeItem:key=>{delete store[key]}}};function ipcStorage(client){return{getItem:key=>client.request("storage/getItem",key),setItem:(key,val)=>client.request("storage/setItem",key,val),removeItem:key=>client.request("storage/removeItem",key)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Server",function(){return Server});__webpack_require__.d(__webpack_exports__,"Client",function(){return Client});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);const NAMESPACE="solid-auth-client";class Server{constructor(clientWindow,clientOrigin,handle){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_clientWindow",void 0);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_clientOrigin",void 0);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_handler",void 0);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_messageListener",void 0);this._clientWindow=clientWindow;this._clientOrigin=clientOrigin;this._handler=handle;this._messageListener=(event=>this._handleMessage(event))}async _handleMessage({data:data,origin:origin}){if(origin!==this._clientOrigin){console.warn("solid-auth-client is listening to ".concat(this._clientOrigin," ")+"so ignored a message received from ".concat(origin,"."));return}const req=data&&data[NAMESPACE];if(req&&req.method){const{id:id,method:method,args:args}=req;const ret=await this._handler(method,...args);this._clientWindow.postMessage({[NAMESPACE]:{id:id,ret:ret}},this._clientOrigin)}}start(){window.addEventListener("message",this._messageListener)}stop(){window.removeEventListener("message",this._messageListener)}}class Client{constructor(serverWindow,serverOrigin){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_serverWindow",void 0);_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(this,"_serverOrigin",void 0);this._serverWindow=serverWindow;this._serverOrigin=serverOrigin}request(method,...args){const id=Math.random();this._serverWindow.postMessage({[NAMESPACE]:{id:id,method:method,args:args}},this._serverOrigin);return new Promise((resolve,reject)=>{window.addEventListener("message",responseListener);const timeout=setTimeout(()=>{reject(new Error("Could not connect to main window."));window.removeEventListener("message",responseListener)},2e3);function responseListener({data:data}){const resp=data&&data[NAMESPACE];if(resp&&resp.id===id&&resp.hasOwnProperty("ret")){resolve(resp.ret);clearTimeout(timeout);window.removeEventListener("message",responseListener)}}})}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"login",function(){return login});__webpack_require__.d(__webpack_exports__,"currentSession",function(){return currentSession});__webpack_require__.d(__webpack_exports__,"logout",function(){return logout});__webpack_require__.d(__webpack_exports__,"getRegisteredRp",function(){return getRegisteredRp});__webpack_require__.d(__webpack_exports__,"requiresAuth",function(){return requiresAuth});__webpack_require__.d(__webpack_exports__,"fetchWithCredentials",function(){return fetchWithCredentials});var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);var _babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__);var auth_header__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14);var auth_header__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(auth_header__WEBPACK_IMPORTED_MODULE_2__);var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18);var _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3__);var _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61);var _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4__);var _url_util__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6);var _storage__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1___default()(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}async function login(idp,options){try{const rp=await getRegisteredRp(idp,options);await saveAppHashFragment(options.storage);return sendAuthRequest(rp,options)}catch(err){console.warn("Error logging in with WebID-OIDC");console.error(err);return null}}async function currentSession(storage=Object(_storage__WEBPACK_IMPORTED_MODULE_6__["defaultStorage"])()){try{const rp=await getStoredRp(storage);if(!rp){return null}const url=Object(_url_util__WEBPACK_IMPORTED_MODULE_5__["currentUrl"])();if(!/#(.*&)?access_token=/.test(url)){return null}window.location.hash="";await restoreAppHashFragment(storage);const storeData=await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["getData"])(storage);const session=await rp.validateResponse(url,storeData);if(!session){return null}return _objectSpread(_objectSpread({},session),{},{webId:session.idClaims.sub,idp:session.issuer})}catch(err){console.warn("Error finding a WebID-OIDC session");console.error(err);return null}}async function logout(storage,fetch){const rp=await getStoredRp(storage);if(rp){try{await rp.logout();try{await fetch("/.well-known/solid/logout",{credentials:"include"})}catch(e){console.info("Couldn't find /.well-known/solid/logout, this is harmless.")}}catch(err){console.warn("Error logging out of the WebID-OIDC session");console.error(err)}}}async function getRegisteredRp(idp,options){let rp=await getStoredRp(options.storage);if(!rp||rp.provider.url!==idp||!rp.registration.redirect_uris.includes(options.callbackUri)){rp=await registerRp(idp,options);await storeRp(options.storage,idp,rp)}return rp}async function getStoredRp(storage){const data=await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["getData"])(storage);const{rpConfig:rpConfig}=data;if(rpConfig){rpConfig.store=storage;return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.from(rpConfig)}else{return null}}async function storeRp(storage,idp,rp){await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(storage,data=>_objectSpread(_objectSpread({},data),{},{rpConfig:rp}));return rp}function registerRp(idp,opts){const{storage:storage,callbackUri:callbackUri}=opts;const responseType="id_token token";const clientNameI18n={};Object.entries(opts).filter(([key,_])=>key.startsWith("clientName#")).forEach(([key,value])=>clientNameI18n[key.replace("clientName#","client_name#")]=value);const supplementaryOptions={logo_uri:opts.logoUri,contacts:opts.contacts,client_name:opts.clientName};const registration=_objectSpread(_objectSpread({issuer:idp,grant_types:["implicit"],redirect_uris:[callbackUri],response_types:[responseType],scope:"openid profile"},clientNameI18n),supplementaryOptions);const options={defaults:{authenticate:{redirect_uri:callbackUri,response_type:responseType,display:"page",scope:["openid"]}},store:storage};return _solid_oidc_rp__WEBPACK_IMPORTED_MODULE_3___default.a.register(idp,registration,options)}async function sendAuthRequest(rp,{callbackUri:callbackUri,storage:storage}){const data=await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["getData"])(storage);const url=await rp.createRequest({redirect_uri:callbackUri},data);await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(storage,()=>data);return Object(_url_util__WEBPACK_IMPORTED_MODULE_5__["navigateTo"])(url)}async function saveAppHashFragment(store){await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(store,data=>_objectSpread(_objectSpread({},data),{},{appHashFragment:window.location.hash}))}async function restoreAppHashFragment(store){await Object(_storage__WEBPACK_IMPORTED_MODULE_6__["updateStorage"])(store,_ref=>{let{appHashFragment:appHashFragment=""}=_ref,data=_babel_runtime_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0___default()(_ref,["appHashFragment"]);window.location.hash=appHashFragment;return data})}function requiresAuth(resp){if(resp.status!==401){return false}const wwwAuthHeader=resp.headers.get("www-authenticate");if(!wwwAuthHeader){return false}const auth=auth_header__WEBPACK_IMPORTED_MODULE_2__["parse"](wwwAuthHeader);return auth.scheme==="Bearer"&&auth.params&&auth.params.scope==="openid webid"}async function fetchWithCredentials(session,fetch,input,options){const headers=(options?options.headers:input.headers)||{};const popToken=await _solid_oidc_rp_src_PoPToken__WEBPACK_IMPORTED_MODULE_4___default.a.issueFor(Object(_url_util__WEBPACK_IMPORTED_MODULE_5__["toUrlString"])(input),session);headers.authorization="Bearer ".concat(popToken);return fetch(input,_objectSpread(_objectSpread({},options),{},{credentials:"include",headers:headers}))}},function(module,exports,__webpack_require__){var objectWithoutPropertiesLoose=__webpack_require__(13);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}module.exports=_objectWithoutProperties},function(module,exports){function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}module.exports=_objectWithoutPropertiesLoose},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"format",{enumerable:true,get:function get(){return _format.default}});Object.defineProperty(exports,"parse",{enumerable:true,get:function get(){return _parse.default}});var _format=_interopRequireDefault(__webpack_require__(15));var _parse=_interopRequireDefault(__webpack_require__(17));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _util=__webpack_require__(16);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var xxx=function xxx(key){return function(value){return`${key}=${value&&!(0,_util.isToken)(value)?(0,_util.quote)(value):value}`}};var build=function build(params){return params.reduce(function(prev,_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],values=_ref2[1];var transform=xxx(key);if(!(0,_util.isToken)(key)){throw new TypeError}if(Array.isArray(values)){return _toConsumableArray(prev).concat(_toConsumableArray(values.map(transform)))}return _toConsumableArray(prev).concat([transform(values)])},[])};var challenge=function challenge(params,options){if(Array.isArray(params)){return build(params)}else if(typeof params==="object"){var entries=params;return challenge(Object.keys(params).map(function(key){return[key,entries[key]]}),options)}throw new TypeError};var _default=function _default(scheme,token,params){var obj=typeof scheme==="string"?{scheme:scheme,token:token,params:params}:scheme;if(typeof obj!=="object"){throw new TypeError}else if(!(0,_util.isScheme)(obj.scheme)){throw new TypeError("Invalid scheme.")}return[obj.scheme].concat(_toConsumableArray(typeof obj.token!=="undefined"?[obj.token]:[]),_toConsumableArray(typeof obj.params!=="undefined"?challenge(obj.params):[])).join(" ")};exports.default=_default},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.unquote=exports.quote=exports.isScheme=exports.isToken=void 0;var token=/^[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+$/;var isToken=function isToken(str){return typeof str==="string"&&token.test(str)};exports.isToken=isToken;var isScheme=isToken;exports.isScheme=isScheme;var quote=function quote(str){return`"${str.replace(/"/g,'\\"')}"`};exports.quote=quote;var unquote=function unquote(str){return str.substr(1,str.length-2).replace(/\\"/g,'"')};exports.unquote=unquote},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _util=__webpack_require__(16);var body=/((?:[a-zA-Z0-9._~+\/-]+=*(?:\s+|$))|[^\u0000-\u001F\u007F()<>@,;:\\"/?={}\[\]\u0020\u0009]+)(?:=([^\\"=\s,]+|"(?:[^"\\]|\\.)*"))?/g;var normalize=function normalize(prev,_cur){var cur=_cur.charAt(0)==='"'?(0,_util.unquote)(_cur):_cur.trim();if(Array.isArray(prev)){return prev.concat(cur)}else if(typeof prev==="string"){return[prev,cur]}return cur};var parseProperties=function parseProperties(scheme,string){var token=null;var params={};while(true){var res=body.exec(string);if(res===null){break}if(res[2]){params[res[1]]=normalize(params[res[1]],res[2])}else{token=normalize(token,res[1])}}return{scheme:scheme,params:params,token:token}};var _default=function _default(str){if(typeof str!=="string"){throw new TypeError("Header value must be a string.")}var start=str.indexOf(" ");var scheme=str.substr(0,start);if(!(0,_util.isScheme)(scheme)){throw new TypeError(`Invalid scheme ${scheme}`)}return parseProperties(scheme,str.substr(start))};exports.default=_default},function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(19)},function(module,exports,__webpack_require__){(function(global){const assert=__webpack_require__(21);const fetch=__webpack_require__(5);const{URL:URL}=__webpack_require__(27);const Headers=fetch.Headers?fetch.Headers:global.Headers;const{JWKSet:JWKSet}=__webpack_require__(28);const AuthenticationRequest=__webpack_require__(55);const AuthenticationResponse=__webpack_require__(57);const onHttpError=__webpack_require__(60);const FormUrlEncoded=__webpack_require__(56);class RelyingParty{constructor({provider:provider={},defaults:defaults,registration:registration={},store:store={}}={}){this.provider=provider;this.defaults=defaults||{popToken:false,authenticate:{response_type:"id_token token",display:"page",scope:["openid"]}};this.registration=registration;this.store=store}static async from(data){const rp=new RelyingParty(data);const validation=rp.validate();if(!validation.valid){throw validation.error}const jwks=rp.provider.jwks;if(!jwks){return rp.jwks().then(()=>rp)}return JWKSet.importKeys(jwks).then(jwks=>{rp.provider.jwks=jwks;return rp})}static register(issuer,registration,options,idpId,oobRegistration){const rp=new RelyingParty({provider:{url:issuer},defaults:Object.assign({},options.defaults),store:options.store});return Promise.resolve().then(()=>rp.discover()).then(()=>rp.jwks()).then(()=>{assert(rp.provider.configuration,"OpenID Configuration is not initialized.");return rp.provider.configuration.registration_endpoint?rp.register(registration):rp.getRegistration(registration,idpId,oobRegistration)}).then(()=>rp)}validate(){if(!this.provider||!this.provider.url){return{valid:false,error:new Error("Provider url is required.")}}return{valid:true}}discover(){try{let issuer=this.provider.url;assert(issuer,'RelyingParty provider must define "url"');let url=new URL(issuer);url.pathname=".well-known/openid-configuration";return fetch(url.toString()).then(onHttpError("Error fetching openid configuration")).then(response=>{return response.json().then(json=>this.provider.configuration=json)})}catch(error){return Promise.reject(error)}}register(options){try{let configuration=this.provider.configuration;assert(configuration,"OpenID Configuration is not initialized.");assert(configuration.registration_endpoint,"OpenID Configuration is missing registration_endpoint.");let uri=configuration.registration_endpoint;let method="post";let headers=new Headers({"Content-Type":"application/json"});let params=this.defaults.register;let body=JSON.stringify(Object.assign({},params,options));return fetch(uri,{method:method,headers:headers,body:body}).then(onHttpError("Error registering client")).then(response=>{return response.json().then(json=>this.registration=json)})}catch(error){return Promise.reject(error)}}serialize(){return JSON.stringify(this)}getRegistration(options,idp,oobRegistration){return Promise.resolve().then(()=>{return this.registration=oobRegistration.getRegistration(idp)}).catch(error=>{throw error})}jwks(){try{let configuration=this.provider.configuration;assert(configuration,"OpenID Configuration is not initialized.");assert(configuration.jwks_uri,"OpenID Configuration is missing jwks_uri.");let uri=configuration.jwks_uri;return fetch(uri).then(onHttpError("Error resolving provider keys")).then(response=>{return response.json().then(json=>JWKSet.importKeys(json)).then(jwks=>this.provider.jwks=jwks)})}catch(error){return Promise.reject(error)}}createRequest(options,session){return AuthenticationRequest.create(this,options,session||this.store)}validateResponse(response,session=this.store){let options;if(response.match(/^http(s?):\/\//)){options={rp:this,redirect:response,session:session}}else{options={rp:this,body:response,session:session}}const authResponse=new AuthenticationResponse(options);return AuthenticationResponse.validateResponse(authResponse)}userinfo(accessToken){try{let configuration=this.provider.configuration;assert(configuration,"OpenID Configuration is not initialized.");assert(configuration.userinfo_endpoint,"OpenID Configuration is missing userinfo_endpoint.");accessToken=accessToken||this.store.access_token;assert(accessToken,"Missing access token.");let uri=configuration.userinfo_endpoint;let headers=new Headers({"Content-Type":"application/json",Authorization:`Bearer ${accessToken}`});return fetch(uri,{headers:headers}).then(onHttpError("Error fetching userinfo")).then(response=>response.json())}catch(error){return Promise.reject(error)}}logoutRequest(options={}){const{id_token_hint:id_token_hint,post_logout_redirect_uri:post_logout_redirect_uri,state:state}=options;let configuration;assert(this.provider,"OpenID Configuration is not initialized");configuration=this.provider.configuration;assert(configuration,"OpenID Configuration is not initialized");if(!configuration.end_session_endpoint){console.log(`OpenId Configuration for `+`${configuration.issuer} is missing end_session_endpoint`);return null}if(post_logout_redirect_uri&&!id_token_hint){throw new Error("id_token_hint is required when using post_logout_redirect_uri")}const params={};if(id_token_hint){params.id_token_hint=id_token_hint}if(post_logout_redirect_uri){params.post_logout_redirect_uri=post_logout_redirect_uri}if(state){params.state=state}const url=new URL(configuration.end_session_endpoint);url.search=FormUrlEncoded.encode(params);return url.href}logout(){let configuration;try{assert(this.provider,"OpenID Configuration is not initialized.");configuration=this.provider.configuration;assert(configuration,"OpenID Configuration is not initialized.")}catch(error){return Promise.reject(error)}if(!configuration.end_session_endpoint){this.clearSession();return Promise.resolve(undefined)}let uri=configuration.end_session_endpoint;let method="get";return fetch(uri,{method:method,credentials:"include"}).then(onHttpError("Error logging out")).then(()=>this.clearSession())}clearSession(){let session=this.store;if(!session){return}delete session[SESSION_PRIVATE_KEY]}popTokenFor(uri,idToken){return PoPToken.issueFor(uri,idToken)}}const SESSION_PRIVATE_KEY="oidc.session.privateKey";RelyingParty.SESSION_PRIVATE_KEY=SESSION_PRIVATE_KEY;module.exports=RelyingParty}).call(this,__webpack_require__(20))},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){"use strict";(function(global){var objectAssign=__webpack_require__(22);function compare(a,b){if(a===b){return 0}var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y){return-1}if(y<x){return 1}return 0}function isBuffer(b){if(global.Buffer&&typeof global.Buffer.isBuffer==="function"){return global.Buffer.isBuffer(b)}return!!(b!=null&&b._isBuffer)}var util=__webpack_require__(23);var hasOwn=Object.prototype.hasOwnProperty;var pSlice=Array.prototype.slice;var functionsHaveNames=function(){return function foo(){}.name==="foo"}();function pToString(obj){return Object.prototype.toString.call(obj)}function isView(arrbuf){if(isBuffer(arrbuf)){return false}if(typeof global.ArrayBuffer!=="function"){return false}if(typeof ArrayBuffer.isView==="function"){return ArrayBuffer.isView(arrbuf)}if(!arrbuf){return false}if(arrbuf instanceof DataView){return true}if(arrbuf.buffer&&arrbuf.buffer instanceof ArrayBuffer){return true}return false}var assert=module.exports=ok;var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(func){if(!util.isFunction(func)){return}if(functionsHaveNames){return func.name}var str=func.toString();var match=str.match(regex);return match&&match[1]}assert.AssertionError=function AssertionError(options){this.name="AssertionError";this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false}else{this.message=getMessage(this);this.generatedMessage=true}var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction)}else{var err=new Error;if(err.stack){var out=err.stack;var fn_name=getName(stackStartFunction);var idx=out.indexOf("\n"+fn_name);if(idx>=0){var next_line=out.indexOf("\n",idx+1);out=out.substring(next_line+1)}this.stack=out}}};util.inherits(assert.AssertionError,Error);function truncate(s,n){if(typeof s==="string"){return s.length<n?s:s.slice(0,n)}else{return s}}function inspect(something){if(functionsHaveNames||!util.isFunction(something)){return util.inspect(something)}var rawname=getName(something);var name=rawname?": "+rawname:"";return"[Function"+name+"]"}function getMessage(self){return truncate(inspect(self.actual),128)+" "+self.operator+" "+truncate(inspect(self.expected),128)}function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction})}assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,"==",assert.ok)}assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,"==",assert.equal)};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,"!=",assert.notEqual)}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected,false)){fail(actual,expected,message,"deepEqual",assert.deepEqual)}};assert.deepStrictEqual=function deepStrictEqual(actual,expected,message){if(!_deepEqual(actual,expected,true)){fail(actual,expected,message,"deepStrictEqual",assert.deepStrictEqual)}};function _deepEqual(actual,expected,strict,memos){if(actual===expected){return true}else if(isBuffer(actual)&&isBuffer(expected)){return compare(actual,expected)===0}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime()}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase}else if((actual===null||typeof actual!=="object")&&(expected===null||typeof expected!=="object")){return strict?actual===expected:actual==expected}else if(isView(actual)&&isView(expected)&&pToString(actual)===pToString(expected)&&!(actual instanceof Float32Array||actual instanceof Float64Array)){return compare(new Uint8Array(actual.buffer),new Uint8Array(expected.buffer))===0}else if(isBuffer(actual)!==isBuffer(expected)){return false}else{memos=memos||{actual:[],expected:[]};var actualIndex=memos.actual.indexOf(actual);if(actualIndex!==-1){if(actualIndex===memos.expected.indexOf(expected)){return true}}memos.actual.push(actual);memos.expected.push(expected);return objEquiv(actual,expected,strict,memos)}}function isArguments(object){return Object.prototype.toString.call(object)=="[object Arguments]"}function objEquiv(a,b,strict,actualVisitedObjects){if(a===null||a===undefined||b===null||b===undefined)return false;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;if(strict&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return false;var aIsArgs=isArguments(a);var bIsArgs=isArguments(b);if(aIsArgs&&!bIsArgs||!aIsArgs&&bIsArgs)return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b,strict)}var ka=objectKeys(a);var kb=objectKeys(b);var key,i;if(ka.length!==kb.length)return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!==kb[i])return false}for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key],strict,actualVisitedObjects))return false}return true}assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected,false)){fail(actual,expected,message,"notDeepEqual",assert.notDeepEqual)}};assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(actual,expected,message){if(_deepEqual(actual,expected,true)){fail(actual,expected,message,"notDeepStrictEqual",notDeepStrictEqual)}}assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,"===",assert.strictEqual)}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,"!==",assert.notStrictEqual)}};function expectedException(actual,expected){if(!actual||!expected){return false}if(Object.prototype.toString.call(expected)=="[object RegExp]"){return expected.test(actual)}try{if(actual instanceof expected){return true}}catch(e){}if(Error.isPrototypeOf(expected)){return false}return expected.call({},actual)===true}function _tryBlock(block){var error;try{block()}catch(e){error=e}return error}function _throws(shouldThrow,block,expected,message){var actual;if(typeof block!=="function"){throw new TypeError('"block" argument must be a function')}if(typeof expected==="string"){message=expected;expected=null}actual=_tryBlock(block);message=(expected&&expected.name?" ("+expected.name+").":".")+(message?" "+message:".");if(shouldThrow&&!actual){fail(actual,expected,"Missing expected exception"+message)}var userProvidedMessage=typeof message==="string";var isUnwantedException=!shouldThrow&&util.isError(actual);var isUnexpectedException=!shouldThrow&&actual&&!expected;if(isUnwantedException&&userProvidedMessage&&expectedException(actual,expected)||isUnexpectedException){fail(actual,expected,"Got unwanted exception"+message)}if(shouldThrow&&actual&&expected&&!expectedException(actual,expected)||!shouldThrow&&actual){throw actual}}assert.throws=function(block,error,message){_throws(true,block,error,message)};assert.doesNotThrow=function(block,error,message){_throws(false,block,error,message)};assert.ifError=function(err){if(err)throw err};function strict(value,message){if(!value)fail(value,true,message,"==",strict)}assert.strict=objectAssign(strict,assert,{equal:assert.strictEqual,deepEqual:assert.deepStrictEqual,notEqual:assert.notStrictEqual,notDeepEqual:assert.notDeepStrictEqual});assert.strict.strict=assert.strict;var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key)}return keys}}).call(this,__webpack_require__(20))},function(module,exports,__webpack_require__){"use strict";var getOwnPropertySymbols=Object.getOwnPropertySymbols;var hasOwnProperty=Object.prototype.hasOwnProperty;var propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(val===null||val===undefined){throw new TypeError("Object.assign cannot be called with null or undefined")}return Object(val)}function shouldUseNative(){try{if(!Object.assign){return false}var test1=new String("abc");test1[5]="de";if(Object.getOwnPropertyNames(test1)[0]==="5"){return false}var test2={};for(var i=0;i<10;i++){test2["_"+String.fromCharCode(i)]=i}var order2=Object.getOwnPropertyNames(test2).map(function(n){return test2[n]});if(order2.join("")!=="0123456789"){return false}var test3={};"abcdefghijklmnopqrst".split("").forEach(function(letter){test3[letter]=letter});if(Object.keys(Object.assign({},test3)).join("")!=="abcdefghijklmnopqrst"){return false}return true}catch(err){return false}}module.exports=shouldUseNative()?Object.assign:function(target,source){var from;var to=toObject(target);var symbols;for(var s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from){if(hasOwnProperty.call(from,key)){to[key]=from[key]}}if(getOwnPropertySymbols){symbols=getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++){if(propIsEnumerable.call(from,symbols[i])){to[symbols[i]]=from[symbols[i]]}}}}return to}},function(module,exports,__webpack_require__){(function(process){var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(obj){var keys=Object.keys(obj);var descriptors={};for(var i=0;i<keys.length;i++){descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i])}return descriptors};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(typeof process!=="undefined"&&process.noDeprecation===true){return fn}if(typeof process==="undefined"){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))debugEnviron=process.env.NODE_DEBUG||"";set=set.toUpperCase();if(!debugs[set]){if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=__webpack_require__(25);function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=__webpack_require__(26);exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var kCustomPromisifiedSymbol=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;exports.promisify=function promisify(original){if(typeof original!=="function")throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn=original[kCustomPromisifiedSymbol];if(typeof fn!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return fn}function fn(){var promiseResolve,promiseReject;var promise=new Promise(function(resolve,reject){promiseResolve=resolve;promiseReject=reject});var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}args.push(function(err,value){if(err){promiseReject(err)}else{promiseResolve(value)}});try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}Object.setPrototypeOf(fn,Object.getPrototypeOf(original));if(kCustomPromisifiedSymbol)Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return Object.defineProperties(fn,getOwnPropertyDescriptors(original))};exports.promisify.custom=kCustomPromisifiedSymbol;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason;reason=newReason}return cb(reason)}function callbackify(original){if(typeof original!=="function"){throw new TypeError('The "original" argument must be of type Function')}function callbackified(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}var maybeCb=args.pop();if(typeof maybeCb!=="function"){throw new TypeError("The last argument must be of type Function")}var self=this;var cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then(function(ret){process.nextTick(cb,null,ret)},function(rej){process.nextTick(callbackifyOnRejected,rej,cb)})}Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original));Object.defineProperties(callbackified,getOwnPropertyDescriptors(original));return callbackified}exports.callbackify=callbackify}).call(this,__webpack_require__(24))},function(module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},function(module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},function(module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__27__},function(module,exports,__webpack_require__){const crypto=__webpack_require__(29);const JWA=__webpack_require__(32);const JWK=__webpack_require__(50);const JWKSet=__webpack_require__(51);const JWT=__webpack_require__(52);const JWS=__webpack_require__(53);module.exports={crypto:crypto,JWA:JWA,JWK:JWK,JWKSet:JWKSet,JWT:JWT,JWS:JWS}},function(module,exports,__webpack_require__){const imported=__webpack_require__(30);module.exports=imported.default?imported.default:imported},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _webcrypto_shim_mjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31);__webpack_exports__["default"]=window.crypto},function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);(function(global,factory){if(typeof define==="function"&&define.amd){define([],function(){return factory(global)})}else if(typeof module==="object"&&module.exports){module.exports=factory(global)}else{factory(global)}})(typeof self!=="undefined"?self:undefined,function(global){"use strict";if(typeof Promise!=="function")throw"Promise support required";var _crypto=global.crypto||global.msCrypto;if(!_crypto)return;var _subtle=_crypto.subtle||_crypto.webkitSubtle;if(!_subtle)return;var _Crypto=global.Crypto||_crypto.constructor||Object,_SubtleCrypto=global.SubtleCrypto||_subtle.constructor||Object,_CryptoKey=global.CryptoKey||global.Key||Object;var isEdge=global.navigator.userAgent.indexOf("Edge/")>-1;var isIE=!!global.msCrypto&&!isEdge;var isWebkit=!_crypto.subtle&&!!_crypto.webkitSubtle;if(!isIE&&!isWebkit)return;function s2a(s){return btoa(s).replace(/\=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function a2s(s){s+="===",s=s.slice(0,-s.length%4);return atob(s.replace(/-/g,"+").replace(/_/g,"/"))}function s2b(s){var b=new Uint8Array(s.length);for(var i=0;i<s.length;i++)b[i]=s.charCodeAt(i);return b}function b2s(b){if(b instanceof ArrayBuffer)b=new Uint8Array(b);return String.fromCharCode.apply(String,b)}function alg(a){var r={name:(a.name||a||"").toUpperCase().replace("V","v")};switch(r.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":if(a.length)r["length"]=a.length;break;case"HMAC":if(a.hash)r["hash"]=alg(a.hash);if(a.length)r["length"]=a.length;break;case"RSAES-PKCS1-v1_5":if(a.publicExponent)r["publicExponent"]=new Uint8Array(a.publicExponent);if(a.modulusLength)r["modulusLength"]=a.modulusLength;break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":if(a.hash)r["hash"]=alg(a.hash);if(a.publicExponent)r["publicExponent"]=new Uint8Array(a.publicExponent);if(a.modulusLength)r["modulusLength"]=a.modulusLength;break;default:throw new SyntaxError("Bad algorithm name")}return r}function jwkAlg(a){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[a.name][(a.hash||{}).name||a.length||""]}function b2jwk(k){if(k instanceof ArrayBuffer||k instanceof Uint8Array)k=JSON.parse(decodeURIComponent(escape(b2s(k))));var jwk={kty:k.kty,alg:k.alg,ext:k.ext||k.extractable};switch(jwk.kty){case"oct":jwk.k=k.k;case"RSA":["n","e","d","p","q","dp","dq","qi","oth"].forEach(function(x){if(x in k)jwk[x]=k[x]});break;default:throw new TypeError("Unsupported key type")}return jwk}function jwk2b(k){var jwk=b2jwk(k);if(isIE)jwk["extractable"]=jwk.ext,delete jwk.ext;return s2b(unescape(encodeURIComponent(JSON.stringify(jwk)))).buffer}function pkcs2jwk(k){var info=b2der(k),prv=false;if(info.length>2)prv=true,info.shift();var jwk={ext:true};switch(info[0][0]){case"1.2.840.113549.1.1.1":var rsaComp=["n","e","d","p","q","dp","dq","qi"],rsaKey=b2der(info[1]);if(prv)rsaKey.shift();for(var i=0;i<rsaKey.length;i++){if(!rsaKey[i][0])rsaKey[i]=rsaKey[i].subarray(1);jwk[rsaComp[i]]=s2a(b2s(rsaKey[i]))}jwk["kty"]="RSA";break;default:throw new TypeError("Unsupported key type")}return jwk}function jwk2pkcs(k){var key,info=[["",null]],prv=false;switch(k.kty){case"RSA":var rsaComp=["n","e","d","p","q","dp","dq","qi"],rsaKey=[];for(var i=0;i<rsaComp.length;i++){if(!(rsaComp[i]in k))break;var b=rsaKey[i]=s2b(a2s(k[rsaComp[i]]));if(b[0]&128)rsaKey[i]=new Uint8Array(b.length+1),rsaKey[i].set(b,1)}if(rsaKey.length>2)prv=true,rsaKey.unshift(new Uint8Array([0]));info[0][0]="1.2.840.113549.1.1.1";key=rsaKey;break;default:throw new TypeError("Unsupported key type")}info.push(new Uint8Array(der2b(key)).buffer);if(!prv)info[1]={tag:3,value:info[1]};else info.unshift(new Uint8Array([0]));return new Uint8Array(der2b(info)).buffer}var oid2str={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},str2oid={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};function b2der(buf,ctx){if(buf instanceof ArrayBuffer)buf=new Uint8Array(buf);if(!ctx)ctx={pos:0,end:buf.length};if(ctx.end-ctx.pos<2||ctx.end>buf.length)throw new RangeError("Malformed DER");var tag=buf[ctx.pos++],len=buf[ctx.pos++];if(len>=128){len&=127;if(ctx.end-ctx.pos<len)throw new RangeError("Malformed DER");for(var xlen=0;len--;)xlen<<=8,xlen|=buf[ctx.pos++];len=xlen}if(ctx.end-ctx.pos<len)throw new RangeError("Malformed DER");var rv;switch(tag){case 2:rv=buf.subarray(ctx.pos,ctx.pos+=len);break;case 3:if(buf[ctx.pos++])throw new Error("Unsupported bit string");len--;case 4:rv=new Uint8Array(buf.subarray(ctx.pos,ctx.pos+=len)).buffer;break;case 5:rv=null;break;case 6:var oid=btoa(b2s(buf.subarray(ctx.pos,ctx.pos+=len)));if(!(oid in oid2str))throw new Error("Unsupported OBJECT ID "+oid);rv=oid2str[oid];break;case 48:rv=[];for(var end=ctx.pos+len;ctx.pos<end;)rv.push(b2der(buf,ctx));break;default:throw new Error("Unsupported DER tag 0x"+tag.toString(16))}return rv}function der2b(val,buf){if(!buf)buf=[];var tag=0,len=0,pos=buf.length+2;buf.push(0,0);if(val instanceof Uint8Array){tag=2,len=val.length;for(var i=0;i<len;i++)buf.push(val[i])}else if(val instanceof ArrayBuffer){tag=4,len=val.byteLength,val=new Uint8Array(val);for(var i=0;i<len;i++)buf.push(val[i])}else if(val===null){tag=5,len=0}else if(typeof val==="string"&&val in str2oid){var oid=s2b(atob(str2oid[val]));tag=6,len=oid.length;for(var i=0;i<len;i++)buf.push(oid[i])}else if(val instanceof Array){for(var i=0;i<val.length;i++)der2b(val[i],buf);tag=48,len=buf.length-pos}else if(typeof val==="object"&&val.tag===3&&val.value instanceof ArrayBuffer){val=new Uint8Array(val.value),tag=3,len=val.byteLength;buf.push(0);for(var i=0;i<len;i++)buf.push(val[i]);len++}else{throw new Error("Unsupported DER value "+val)}if(len>=128){var xlen=len,len=4;buf.splice(pos,0,xlen>>24&255,xlen>>16&255,xlen>>8&255,xlen&255);while(len>1&&!(xlen>>24))xlen<<=8,len--;if(len<4)buf.splice(pos,4-len);len|=128}buf.splice(pos-2,2,tag,len);return buf}function CryptoKey(key,alg,ext,use){Object.defineProperties(this,{_key:{value:key},type:{value:key.type,enumerable:true},extractable:{value:ext===undefined?key.extractable:ext,enumerable:true},algorithm:{value:alg===undefined?key.algorithm:alg,enumerable:true},usages:{value:use===undefined?key.usages:use,enumerable:true}})}function isPubKeyUse(u){return u==="verify"||u==="encrypt"||u==="wrapKey"}function isPrvKeyUse(u){return u==="sign"||u==="decrypt"||u==="unwrapKey"}["generateKey","importKey","unwrapKey"].forEach(function(m){var _fn=_subtle[m];_subtle[m]=function(a,b,c){var args=[].slice.call(arguments),ka,kx,ku;switch(m){case"generateKey":ka=alg(a),kx=b,ku=c;break;case"importKey":ka=alg(c),kx=args[3],ku=args[4];if(a==="jwk"){b=b2jwk(b);if(!b.alg)b.alg=jwkAlg(ka);if(!b.key_ops)b.key_ops=b.kty!=="oct"?"d"in b?ku.filter(isPrvKeyUse):ku.filter(isPubKeyUse):ku.slice();args[1]=jwk2b(b)}break;case"unwrapKey":ka=args[4],kx=args[5],ku=args[6];args[2]=c._key;break}if(m==="generateKey"&&ka.name==="HMAC"&&ka.hash){ka.length=ka.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[ka.hash.name];return _subtle.importKey("raw",_crypto.getRandomValues(new Uint8Array(ka.length+7>>3)),ka,kx,ku)}if(isWebkit&&m==="generateKey"&&ka.name==="RSASSA-PKCS1-v1_5"&&(!ka.modulusLength||ka.modulusLength>=2048)){a=alg(a),a.name="RSAES-PKCS1-v1_5",delete a.hash;return _subtle.generateKey(a,true,["encrypt","decrypt"]).then(function(k){return Promise.all([_subtle.exportKey("jwk",k.publicKey),_subtle.exportKey("jwk",k.privateKey)])}).then(function(keys){keys[0].alg=keys[1].alg=jwkAlg(ka);keys[0].key_ops=ku.filter(isPubKeyUse),keys[1].key_ops=ku.filter(isPrvKeyUse);return Promise.all([_subtle.importKey("jwk",keys[0],ka,true,keys[0].key_ops),_subtle.importKey("jwk",keys[1],ka,kx,keys[1].key_ops)])}).then(function(keys){return{publicKey:keys[0],privateKey:keys[1]}})}if((isWebkit||isIE&&(ka.hash||{}).name==="SHA-1")&&m==="importKey"&&a==="jwk"&&ka.name==="HMAC"&&b.kty==="oct"){return _subtle.importKey("raw",s2b(a2s(b.k)),c,args[3],args[4])}if(isWebkit&&m==="importKey"&&(a==="spki"||a==="pkcs8")){return _subtle.importKey("jwk",pkcs2jwk(b),c,args[3],args[4])}if(isIE&&m==="unwrapKey"){return _subtle.decrypt(args[3],c,b).then(function(k){return _subtle.importKey(a,k,args[4],args[5],args[6])})}var op;try{op=_fn.apply(_subtle,args)}catch(e){return Promise.reject(e)}if(isIE){op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)};op.oncomplete=function(r){res(r.target.result)}})}op=op.then(function(k){if(ka.name==="HMAC"){if(!ka.length)ka.length=8*k.algorithm.length}if(ka.name.search("RSA")==0){if(!ka.modulusLength)ka.modulusLength=(k.publicKey||k).algorithm.modulusLength;if(!ka.publicExponent)ka.publicExponent=(k.publicKey||k).algorithm.publicExponent}if(k.publicKey&&k.privateKey){k={publicKey:new CryptoKey(k.publicKey,ka,kx,ku.filter(isPubKeyUse)),privateKey:new CryptoKey(k.privateKey,ka,kx,ku.filter(isPrvKeyUse))}}else{k=new CryptoKey(k,ka,kx,ku)}return k});return op}});["exportKey","wrapKey"].forEach(function(m){var _fn=_subtle[m];_subtle[m]=function(a,b,c){var args=[].slice.call(arguments);switch(m){case"exportKey":args[1]=b._key;break;case"wrapKey":args[1]=b._key,args[2]=c._key;break}if((isWebkit||isIE&&(b.algorithm.hash||{}).name==="SHA-1")&&m==="exportKey"&&a==="jwk"&&b.algorithm.name==="HMAC"){args[0]="raw"}if(isWebkit&&m==="exportKey"&&(a==="spki"||a==="pkcs8")){args[0]="jwk"}if(isIE&&m==="wrapKey"){return _subtle.exportKey(a,b).then(function(k){if(a==="jwk")k=s2b(unescape(encodeURIComponent(JSON.stringify(b2jwk(k)))));return _subtle.encrypt(args[3],c,k)})}var op;try{op=_fn.apply(_subtle,args)}catch(e){return Promise.reject(e)}if(isIE){op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)};op.oncomplete=function(r){res(r.target.result)}})}if(m==="exportKey"&&a==="jwk"){op=op.then(function(k){if((isWebkit||isIE&&(b.algorithm.hash||{}).name==="SHA-1")&&b.algorithm.name==="HMAC"){return{kty:"oct",alg:jwkAlg(b.algorithm),key_ops:b.usages.slice(),ext:true,k:s2a(b2s(k))}}k=b2jwk(k);if(!k.alg)k["alg"]=jwkAlg(b.algorithm);if(!k.key_ops)k["key_ops"]=b.type==="public"?b.usages.filter(isPubKeyUse):b.type==="private"?b.usages.filter(isPrvKeyUse):b.usages.slice();return k})}if(isWebkit&&m==="exportKey"&&(a==="spki"||a==="pkcs8")){op=op.then(function(k){k=jwk2pkcs(b2jwk(k));return k})}return op}});["encrypt","decrypt","sign","verify"].forEach(function(m){var _fn=_subtle[m];_subtle[m]=function(a,b,c,d){if(isIE&&(!c.byteLength||d&&!d.byteLength))throw new Error("Empy input is not allowed");var args=[].slice.call(arguments),ka=alg(a);if(isIE&&m==="decrypt"&&ka.name==="AES-GCM"){var tl=a.tagLength>>3;args[2]=(c.buffer||c).slice(0,c.byteLength-tl),a.tag=(c.buffer||c).slice(c.byteLength-tl)}args[1]=b._key;var op;try{op=_fn.apply(_subtle,args)}catch(e){return Promise.reject(e)}if(isIE){op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)};op.oncomplete=function(r){var r=r.target.result;if(m==="encrypt"&&r instanceof AesGcmEncryptResult){var c=r.ciphertext,t=r.tag;r=new Uint8Array(c.byteLength+t.byteLength);r.set(new Uint8Array(c),0);r.set(new Uint8Array(t),c.byteLength);r=r.buffer}res(r)}})}return op}});if(isIE){var _digest=_subtle.digest;_subtle["digest"]=function(a,b){if(!b.byteLength)throw new Error("Empy input is not allowed");var op;try{op=_digest.call(_subtle,a,b)}catch(e){return Promise.reject(e)}op=new Promise(function(res,rej){op.onabort=op.onerror=function(e){rej(e)};op.oncomplete=function(r){res(r.target.result)}});return op};global.crypto=Object.create(_crypto,{getRandomValues:{value:function(a){return _crypto.getRandomValues(a)}},subtle:{value:_subtle}});global.CryptoKey=CryptoKey}if(isWebkit){_crypto.subtle=_subtle;global.Crypto=_Crypto;global.SubtleCrypto=_SubtleCrypto;global.CryptoKey=CryptoKey}});__webpack_exports__["default"]={}},function(module,exports,__webpack_require__){const supportedAlgorithms=__webpack_require__(33);const{NotSupportedError:NotSupportedError}=__webpack_require__(48);class JWA{static async sign(alg,key,data){let normalizedAlgorithm=supportedAlgorithms.normalize("sign",alg);if(normalizedAlgorithm instanceof Error){return Promise.reject(new NotSupportedError(alg))}return normalizedAlgorithm.sign(key,data)}static async verify(alg,key,signature,data){let normalizedAlgorithm=supportedAlgorithms.normalize("verify",alg);if(normalizedAlgorithm instanceof Error){return Promise.reject(new NotSupportedError(alg))}return normalizedAlgorithm.verify(key,signature,data)}static async importKey(key){let normalizedAlgorithm=supportedAlgorithms.normalize("importKey",key.alg);return normalizedAlgorithm.importKey(key)}}module.exports=JWA},function(module,exports,__webpack_require__){const None=__webpack_require__(34);const HMAC=__webpack_require__(35);const RSASSA_PKCS1_v1_5=__webpack_require__(45);const SupportedAlgorithms=__webpack_require__(46);const supportedAlgorithms=new SupportedAlgorithms;supportedAlgorithms.define("HS256","sign",new HMAC({name:"HMAC",hash:{name:"SHA-256"}}));supportedAlgorithms.define("HS384","sign",new HMAC({name:"HMAC",hash:{name:"SHA-384"}}));supportedAlgorithms.define("HS512","sign",new HMAC({name:"HMAC",hash:{name:"SHA-512"}}));supportedAlgorithms.define("RS256","sign",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}}));supportedAlgorithms.define("RS384","sign",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}}));supportedAlgorithms.define("RS512","sign",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}));supportedAlgorithms.define("none","sign",new None({}));supportedAlgorithms.define("HS256","verify",new HMAC({name:"HMAC",hash:{name:"SHA-256"}}));supportedAlgorithms.define("HS384","verify",new HMAC({name:"HMAC",hash:{name:"SHA-384"}}));supportedAlgorithms.define("HS512","verify",new HMAC({name:"HMAC",hash:{name:"SHA-512"}}));supportedAlgorithms.define("RS256","verify",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}}));supportedAlgorithms.define("RS384","verify",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}}));supportedAlgorithms.define("RS512","verify",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}));supportedAlgorithms.define("none","verify",new None({}));supportedAlgorithms.define("RS256","importKey",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}}));supportedAlgorithms.define("RS384","importKey",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}}));supportedAlgorithms.define("RS512","importKey",new RSASSA_PKCS1_v1_5({name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}));module.exports=supportedAlgorithms},function(module,exports){class None{sign(){return Promise.resolve("")}verify(){}}module.exports=None},function(module,exports,__webpack_require__){"use strict";(function(Buffer){const base64url=__webpack_require__(40);const crypto=__webpack_require__(30);const TextEncoder=__webpack_require__(43);class HMAC{constructor(params){this.params=params}sign(key,data){let algorithm=this.params;data=(new TextEncoder).encode(data);return crypto.subtle.sign(algorithm,key,data).then(signature=>base64url(Buffer.from(signature)))}verify(key,signature,data){let algorithm=this.params;if(typeof signature==="string"){signature=Uint8Array.from(base64url.toBuffer(signature))}if(typeof data==="string"){data=(new TextEncoder).encode(data)}return crypto.subtle.verify(algorithm,key,signature,data)}assertSufficientKeyLength(key){if(key.length<this.bitlength){throw new Error("The key is too short.")}}}module.exports=HMAC}).call(this,__webpack_require__(36).Buffer)},function(module,exports,__webpack_require__){"use strict";(function(global){var base64=__webpack_require__(37);var ieee754=__webpack_require__(38);var isArray=__webpack_require__(39);exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=global.TYPED_ARRAY_SUPPORT!==undefined?global.TYPED_ARRAY_SUPPORT:typedArraySupport();exports.kMaxLength=kMaxLength();function typedArraySupport(){try{var arr=new Uint8Array(1);arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return arr.foo()===42&&typeof arr.subarray==="function"&&arr.subarray(1,1).byteLength===0}catch(e){return false}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(that,length){if(kMaxLength()<length){throw new RangeError("Invalid typed array length")}if(Buffer.TYPED_ARRAY_SUPPORT){that=new Uint8Array(length);that.__proto__=Buffer.prototype}else{if(that===null){that=new Buffer(length)}that.length=length}return that}function Buffer(arg,encodingOrOffset,length){if(!Buffer.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer)){return new Buffer(arg,encodingOrOffset,length)}if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new Error("If encoding is specified then the first argument must be a string")}return allocUnsafe(this,arg)}return from(this,arg,encodingOrOffset,length)}Buffer.poolSize=8192;Buffer._augment=function(arr){arr.__proto__=Buffer.prototype;return arr};function from(that,value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(typeof ArrayBuffer!=="undefined"&&value instanceof ArrayBuffer){return fromArrayBuffer(that,value,encodingOrOffset,length)}if(typeof value==="string"){return fromString(that,value,encodingOrOffset)}return fromObject(that,value)}Buffer.from=function(value,encodingOrOffset,length){return from(null,value,encodingOrOffset,length)};if(Buffer.TYPED_ARRAY_SUPPORT){Buffer.prototype.__proto__=Uint8Array.prototype;Buffer.__proto__=Uint8Array;if(typeof Symbol!=="undefined"&&Symbol.species&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true})}}function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be a number')}else if(size<0){throw new RangeError('"size" argument must not be negative')}}function alloc(that,size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(that,size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(that,size).fill(fill,encoding):createBuffer(that,size).fill(fill)}return createBuffer(that,size)}Buffer.alloc=function(size,fill,encoding){return alloc(null,size,fill,encoding)};function allocUnsafe(that,size){assertSize(size);that=createBuffer(that,size<0?0:checked(size)|0);if(!Buffer.TYPED_ARRAY_SUPPORT){for(var i=0;i<size;++i){that[i]=0}}return that}Buffer.allocUnsafe=function(size){return allocUnsafe(null,size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(null,size)};function fromString(that,string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding')}var length=byteLength(string,encoding)|0;that=createBuffer(that,length);var actual=that.write(string,encoding);if(actual!==length){that=that.slice(0,actual)}return that}function fromArrayLike(that,array){var length=array.length<0?0:checked(array.length)|0;that=createBuffer(that,length);for(var i=0;i<length;i+=1){that[i]=array[i]&255}return that}function fromArrayBuffer(that,array,byteOffset,length){array.byteLength;if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError("'offset' is out of bounds")}if(array.byteLength<byteOffset+(length||0)){throw new RangeError("'length' is out of bounds")}if(byteOffset===undefined&&length===undefined){array=new Uint8Array(array)}else if(length===undefined){array=new Uint8Array(array,byteOffset)}else{array=new Uint8Array(array,byteOffset,length)}if(Buffer.TYPED_ARRAY_SUPPORT){that=array;that.__proto__=Buffer.prototype}else{that=fromArrayLike(that,array)}return that}function fromObject(that,obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;that=createBuffer(that,len);if(that.length===0){return that}obj.copy(that,0,0,len);return that}if(obj){if(typeof ArrayBuffer!=="undefined"&&obj.buffer instanceof ArrayBuffer||"length"in obj){if(typeof obj.length!=="number"||isnan(obj.length)){return createBuffer(that,0)}return fromArrayLike(that,obj)}if(obj.type==="Buffer"&&isArray(obj.data)){return fromArrayLike(that,obj.data)}}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(length){if(length>=kMaxLength()){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+kMaxLength().toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return!!(b!=null&&b._isBuffer)};Buffer.compare=function compare(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError("Arguments must be Buffers")}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(typeof ArrayBuffer!=="undefined"&&typeof ArrayBuffer.isView==="function"&&(ArrayBuffer.isView(string)||string instanceof ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){string=""+string}var len=string.length;if(len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case undefined:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length|0;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;if(this.length>0){str=this.toString("hex",0,max).match(/.{2}/g).join(" ");if(this.length>max)str+=" ... "}return"<Buffer "+str+">"};Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target)){throw new TypeError("Argument must be a Buffer")}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(isNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(Buffer.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(strLen%2!==0)throw new TypeError("Invalid hex string");if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(isNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset|0;if(isFinite(length)){length=length|0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=toHex(buf[i])}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf;if(Buffer.TYPED_ARRAY_SUPPORT){newBuf=this.subarray(start,end);newBuf.__proto__=Buffer.prototype}else{var sliceLen=end-start;newBuf=new Buffer(sliceLen,undefined);for(var i=0;i<sliceLen;++i){newBuf[i]=this[i+start]}}return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset|0;byteLength=byteLength|0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;byteLength=byteLength|0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,255,0);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);this[offset]=value&255;return offset+1};function objectWriteUInt16(buf,value,offset,littleEndian){if(value<0)value=65535+value+1;for(var i=0,j=Math.min(buf.length-offset,2);i<j;++i){buf[offset+i]=(value&255<<8*(littleEndian?i:1-i))>>>(littleEndian?i:1-i)*8}}Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,65535,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};function objectWriteUInt32(buf,value,offset,littleEndian){if(value<0)value=4294967295+value+1;for(var i=0,j=Math.min(buf.length-offset,4);i<j;++i){buf[offset+i]=value>>>(littleEndian?i:3-i)*8&255}}Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset|0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(!Buffer.TYPED_ARRAY_SUPPORT)value=Math.floor(value);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8}else{objectWriteUInt16(this,value,offset,true)}return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>8;this[offset+1]=value&255}else{objectWriteUInt16(this,value,offset,false)}return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24}else{objectWriteUInt32(this,value,offset,true)}return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset|0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;if(Buffer.TYPED_ARRAY_SUPPORT){this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255}else{objectWriteUInt32(this,value,offset,false)}return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("sourceStart out of bounds");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;var i;if(this===target&&start<targetStart&&targetStart<end){for(i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else if(len<1e3||!Buffer.TYPED_ARRAY_SUPPORT){for(i=0;i<len;++i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,start+len),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(val.length===1){var code=val.charCodeAt(0);if(code<256){val=code}}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}}else if(typeof val==="number"){val=val&255}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:utf8ToBytes(new Buffer(val,encoding).toString());var len=bytes.length;for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(str){str=stringtrim(str).replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function stringtrim(str){if(str.trim)return str.trim();return str.replace(/^\s+|\s+$/g,"")}function toHex(n){if(n<16)return"0"+n.toString(16);return n.toString(16)}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isnan(val){return val!==val}}).call(this,__webpack_require__(20))},function(module,exports,__webpack_require__){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},function(module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},function(module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(41).default;module.exports.default=module.exports},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});var pad_string_1=__webpack_require__(42);function encode(input,encoding){if(encoding===void 0){encoding="utf8"}if(Buffer.isBuffer(input)){return fromBase64(input.toString("base64"))}return fromBase64(Buffer.from(input,encoding).toString("base64"))}function decode(base64url,encoding){if(encoding===void 0){encoding="utf8"}return Buffer.from(toBase64(base64url),"base64").toString(encoding)}function toBase64(base64url){base64url=base64url.toString();return pad_string_1.default(base64url).replace(/\-/g,"+").replace(/_/g,"/")}function fromBase64(base64){return base64.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBuffer(base64url){return Buffer.from(toBase64(base64url),"base64")}var base64url=encode;base64url.encode=encode;base64url.decode=decode;base64url.toBase64=toBase64;base64url.fromBase64=fromBase64;base64url.toBuffer=toBuffer;exports.default=base64url}).call(this,__webpack_require__(36).Buffer)},function(module,exports,__webpack_require__){"use strict";(function(Buffer){Object.defineProperty(exports,"__esModule",{value:true});function padString(input){var segmentLength=4;var stringLength=input.length;var diff=stringLength%segmentLength;if(!diff){return input}var position=stringLength;var padLength=segmentLength-diff;var paddedStringLength=stringLength+padLength;var buffer=Buffer.alloc(paddedStringLength);buffer.write(input);while(padLength--){buffer.write("=",position++)}return buffer.toString()}exports.default=padString}).call(this,__webpack_require__(36).Buffer)},function(module,exports,__webpack_require__){(function(global){const TextEncoder=global.TextEncoder?global.TextEncoder:__webpack_require__(44).TextEncoder;module.exports=TextEncoder}).call(this,__webpack_require__(20))},function(module,exports){},function(module,exports,__webpack_require__){"use strict";(function(Buffer){const base64url=__webpack_require__(40);let crypto=__webpack_require__(29);const TextEncoder=__webpack_require__(43);class RSASSA_PKCS1_v1_5{constructor(params){this.params=params}sign(key,data){let algorithm=this.params;data=(new TextEncoder).encode(data);return crypto.subtle.sign(algorithm,key,data).then(signature=>base64url(Buffer.from(signature)))}verify(key,signature,data){let algorithm=this.params;if(typeof signature==="string"){signature=Uint8Array.from(base64url.toBuffer(signature))}if(typeof data==="string"){data=(new TextEncoder).encode(data)}return crypto.subtle.verify(algorithm,key,signature,data)}async importKey(key){let jwk=Object.assign({},key);let algorithm=this.params;let usages=key["key_ops"]||[];if(key.use==="sig"){usages.push("verify")}if(key.use==="enc"){return Promise.resolve(key)}if(key.key_ops){usages=key.key_ops}return crypto.subtle.importKey("jwk",jwk,algorithm,true,usages).then(cryptoKey=>{Object.defineProperty(jwk,"cryptoKey",{enumerable:false,value:cryptoKey});return jwk})}}module.exports=RSASSA_PKCS1_v1_5}).call(this,__webpack_require__(36).Buffer)},function(module,exports,__webpack_require__){const NotSupportedError=__webpack_require__(47);const operations=["sign","verify","encrypt","decrypt","importKey"];class SupportedAlgorithms{constructor(){operations.forEach(op=>{this[op]={}})}static get operations(){return operations}define(alg,op,argument){let registeredAlgorithms=this[op];registeredAlgorithms[alg]=argument}normalize(op,alg){let registeredAlgorithms=this[op];if(!registeredAlgorithms){return new SyntaxError}let argument=registeredAlgorithms[alg];if(!argument){return new NotSupportedError(alg)}return argument}}module.exports=SupportedAlgorithms},function(module,exports){class NotSupportedError extends Error{constructor(alg){super();this.message=`${alg} is not a supported algorithm`}}module.exports=NotSupportedError},function(module,exports,__webpack_require__){module.exports={DataError:__webpack_require__(49),NotSupportedError:__webpack_require__(47)}},function(module,exports){class DataError extends Error{constructor(message){super(message)}}module.exports=DataError},function(module,exports,__webpack_require__){"use strict";const JWA=__webpack_require__(32);class JWK{constructor({kty:kty,use:use,key_ops:key_ops,alg:alg,kid:kid,x5u:x5u,x5c:x5c,x5t:x5t}={}){this.kty=kty;this.use=use;this.key_ops=key_ops;this.alg=alg;this.kid=kid;this.x5u=x5u;this.x5c=x5c;this.x5t=x5t}static async importKey(jwk){return JWA.importKey(jwk)}}module.exports=JWK},function(module,exports,__webpack_require__){"use strict";const JWK=__webpack_require__(50);class JWKSet{constructor({keys:keys}={}){this.keys=keys}static async importKeys(jwks){if(!jwks.keys){return Promise.reject(new Error("Cannot import JWKSet: keys property is empty"))}let imported,importing;try{imported=new JWKSet(jwks);importing=jwks.keys.map(key=>JWK.importKey(key))}catch(err){return Promise.reject(err)}return Promise.all(importing).then(keys=>{imported.keys=keys;return imported})}}module.exports=JWKSet},function(module,exports,__webpack_require__){const base64url=__webpack_require__(40);const JWS=__webpack_require__(53);const DataError=__webpack_require__(49);const JOSEHeader=__webpack_require__(54);class JWT{constructor(data={}){this.type=data.type;this.segments=data.segments;this.header=new JOSEHeader(data.header);this.protected=data.protected;this.unprotected=data.unprotected;this.iv=data.iv;this.aad=data.aad;this.ciphertext=data.ciphertext;this.tag=data.tag;this.recipients=data.recipients;this.payload=data.payload;this.signatures=data.signatures;this.signature=data.signature;this.key=data.key;this.serialization=data.serialization||"compact"}static decode(data){let ExtendedJWT=this;let jwt;if(typeof data!=="string"){throw new DataError("JWT must be a string")}if(data.startsWith("{")){try{data=JSON.parse(data,()=>{})}catch(error){throw new DataError("Invalid JWT serialization")}if(data.signatures||data.recipients){data.serialization="json"}else{data.serialization="flattened"}jwt=new ExtendedJWT(data,{filter:false})}else{try{let serialization="compact";let segments=data.split(".");let length=segments.length;if(length!==3&&length!==5){throw new Error("Malformed JWT")}let header=JSON.parse(base64url.decode(segments[0]));if(length===3){let type="JWS";let payload=JSON.parse(base64url.decode(segments[1]));let signature=segments[2];jwt=new ExtendedJWT({type:type,segments:segments,header:header,payload:payload,signature:signature,serialization:serialization},{filter:false})}if(length===5){}}catch(error){throw new DataError("Invalid JWT compact serialization")}}return jwt}static encode(header,payload,key){let jwt=new JWT(header,payload);return jwt.encode(key)}static async verify(key,token){let jwt=JWT.decode(token);jwt.key=key;return jwt.verify().then(verified=>jwt)}isJWE(){return!!this.header.enc}resolveKeys(jwks){let kid=this.header.kid;let keys,match;if(Array.isArray(jwks)){keys=jwks}if(jwks.keys){keys=jwks.keys}if(!jwks.keys&&typeof jwks==="object"){keys=[jwks]}if(!keys){throw new DataError("Invalid JWK argument")}if(kid){match=keys.find(jwk=>jwk.kid===kid)}else{match=keys.find(jwk=>jwk.use==="sig")}if(match){this.key=match.cryptoKey;return true}else{return false}}async encode(){let token=this;if(this.isJWE()){return JWE.encrypt(token)}else{return JWS.sign(token)}}async verify(){return JWS.verify(this)}}module.exports=JWT},function(module,exports,__webpack_require__){const base64url=__webpack_require__(40);const JWA=__webpack_require__(32);const{DataError:DataError}=__webpack_require__(48);const JOSEHeader=__webpack_require__(54);class JWS{constructor(data={}){this.header=new JOSEHeader(data.header);this.payload=data.payload||{};this.signature=data.signature;this.protected=data.protected;this.signatures=data.signatures;this.verified=false}static async sign(token){let payload=base64url(JSON.stringify(token.payload));if(token.serialization==="compact"){let{key:key,header:{alg:alg}}=token;let header=base64url(JSON.stringify(token.header));let data=`${header}.${payload}`;return JWA.sign(alg,key,data).then(signature=>`${data}.${signature}`)}if(token.serialization==="json"){}if(token.serialization==="flattened"){}return Promise.reject(new DataError("Unsupported serialization"))}static async verify(jwt){if(jwt.signatures){}let{key:key,signature:signature,header:{alg:alg}}=jwt;if(jwt.signature){let[header,payload]=jwt.segments;let data=`${header}.${payload}`;if(alg==="none"){return Promise.reject(new DataError("Signature provided to verify with alg: none"))}return JWA.verify(alg,key,signature,data).then(verified=>{jwt.verified=verified;return verified})}if(alg==="none"){if(!key&&!signature){jwt.verified=true;return Promise.resolve(true)}if(key){return Promise.reject(new DataError("Key provided to verify signature with alg: none"))}}return Promise.reject(new DataError("Missing signature(s)"))}}module.exports=JWS},function(module,exports){class JOSEHeader{constructor({typ:typ,cty:cty,alg:alg,jku:jku,kid:kid,x5u:x5u,x5c:x5c,x5t:x5t,crit:crit,enc:enc,zip:zip}={}){this.typ=typ;this.cty=cty;this.alg=alg;this.jku=jku;this.kid=kid;this.x5u=x5u;this.x5c=x5c;this.x5t=x5t;this.crit=crit;this.enc=enc;this.zip=zip}isJWS(){}isJWE(){}}module.exports=JOSEHeader},function(module,exports,__webpack_require__){(function(Buffer){const assert=__webpack_require__(21);const base64url=__webpack_require__(40);const{crypto:crypto,JWT:JWT}=__webpack_require__(28);const FormUrlEncoded=__webpack_require__(56);const{URL:URL}=__webpack_require__(27);class AuthenticationRequest{static create(rp,options,session){const{provider:provider,defaults:defaults,registration:registration}=rp;let issuer,endpoint,client,params;return Promise.resolve().then(()=>{assert(provider.configuration,"RelyingParty provider OpenID Configuration is missing");assert(defaults.authenticate,"RelyingParty default authentication parameters are missing");assert(registration,"RelyingParty client registration is missing");issuer=provider.configuration.issuer;endpoint=provider.configuration.authorization_endpoint;client={client_id:registration.client_id};params=Object.assign(defaults.authenticate,client,options);assert(issuer,"Missing issuer in provider OpenID Configuration");assert(endpoint,"Missing authorization_endpoint in provider OpenID Configuration");assert(params.scope,"Missing scope parameter in authentication request");assert(params.response_type,"Missing response_type parameter in authentication request");assert(params.client_id,"Missing client_id parameter in authentication request");assert(params.redirect_uri,"Missing redirect_uri parameter in authentication request");params.state=Array.from(crypto.getRandomValues(new Uint8Array(16)));params.nonce=Array.from(crypto.getRandomValues(new Uint8Array(16)));return Promise.all([crypto.subtle.digest({name:"SHA-256"},new Uint8Array(params.state)),crypto.subtle.digest({name:"SHA-256"},new Uint8Array(params.nonce))])}).then(digests=>{let state=base64url(Buffer.from(digests[0]));let nonce=base64url(Buffer.from(digests[1]));let key=`${issuer}/requestHistory/${state}`;session[key]=JSON.stringify(params);params.state=state;params.nonce=nonce}).then(()=>AuthenticationRequest.generateSessionKeys()).then(sessionKeys=>{AuthenticationRequest.storeSessionKeys(sessionKeys,params,session)}).then(()=>{if(provider.configuration.request_parameter_supported){return AuthenticationRequest.encodeRequestParams(params).then(encodedParams=>{params=encodedParams})}}).then(()=>{let url=new URL(endpoint);url.search=FormUrlEncoded.encode(params);return url.href})}static generateSessionKeys(){return crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},true,["sign","verify"]).then(keyPair=>{return Promise.all([crypto.subtle.exportKey("jwk",keyPair.publicKey),crypto.subtle.exportKey("jwk",keyPair.privateKey)])}).then(jwkPair=>{let[publicJwk,privateJwk]=jwkPair;return{public:publicJwk,private:privateJwk}})}static storeSessionKeys(sessionKeys,params,session){session["oidc.session.privateKey"]=JSON.stringify(sessionKeys.private);params.key=sessionKeys.public}static encodeRequestParams(params){const excludeParams=["scope","client_id","response_type","state"];const keysToEncode=Object.keys(params).filter(key=>!excludeParams.includes(key));let payload={};keysToEncode.forEach(key=>{payload[key]=params[key]});let requestParamJwt=new JWT({header:{alg:"none"},payload:payload},{filter:false});return requestParamJwt.encode().then(requestParamCompact=>{let newParams={scope:params["scope"],client_id:params["client_id"],response_type:params["response_type"],request:requestParamCompact,state:params["state"]};return newParams})}}module.exports=AuthenticationRequest}).call(this,__webpack_require__(36).Buffer)},function(module,exports){class FormUrlEncoded{static encode(data){let pairs=[];Object.keys(data).forEach(function(key){pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(data[key]))});return pairs.join("&")}static decode(data){let obj={};data.split("&").forEach(function(property){let pair=property.split("=");let key=decodeURIComponent(pair[0]);let val=decodeURIComponent(pair[1]);obj[key]=val});return obj}}module.exports=FormUrlEncoded},function(module,exports,__webpack_require__){(function(global,Buffer){const{URL:URL}=__webpack_require__(27);const assert=__webpack_require__(21);const{crypto:crypto}=__webpack_require__(28);const base64url=__webpack_require__(40);const fetch=__webpack_require__(5);const Headers=fetch.Headers?fetch.Headers:global.Headers;const FormUrlEncoded=__webpack_require__(56);const IDToken=__webpack_require__(58);const Session=__webpack_require__(59);const onHttpError=__webpack_require__(60);const HttpError=__webpack_require__(62);class AuthenticationResponse{constructor({rp:rp,redirect:redirect,body:body,session:session,mode:mode,params:params={}}){this.rp=rp;this.redirect=redirect;this.body=body;this.session=session;this.mode=mode;this.params=params}static validateResponse(response){return Promise.resolve(response).then(this.parseResponse).then(this.errorResponse).then(this.matchRequest).then(this.validateStateParam).then(this.validateResponseMode).then(this.validateResponseParams).then(this.exchangeAuthorizationCode).then(this.validateIDToken).then(Session.fromAuthResponse)}static parseResponse(response){let{redirect:redirect,body:body}=response;if(redirect&&body||!redirect&&!body){throw new HttpError(400,"Invalid response mode")}if(redirect){let url=new URL(redirect);let{search:search,hash:hash}=url;if(search&&hash||!search&&!hash){throw new HttpError(400,"Invalid response mode")}if(search){response.params=FormUrlEncoded.decode(search.substring(1));response.mode="query"}if(hash){response.params=FormUrlEncoded.decode(hash.substring(1));response.mode="fragment"}}if(body){response.params=FormUrlEncoded.decode(body);response.mode="form_post"}return response}static errorResponse(response){const errorCode=response.params.error;if(errorCode){const errorParams={};errorParams["error"]=errorCode;errorParams["error_description"]=response.params["error_description"];errorParams["error_uri"]=response.params["error_uri"];errorParams["state"]=response.params["state"];const error=new Error(`AuthenticationResponse error: ${errorCode}`);error.info=errorParams;throw error}return response}static matchRequest(response){let{rp:rp,params:params,session:session}=response;let state=params.state;let issuer=rp.provider.configuration.issuer;if(!state){throw new Error("Missing state parameter in authentication response")}let key=`${issuer}/requestHistory/${state}`;let request=session[key];if(!request){throw new Error("Mismatching state parameter in authentication response")}response.request=JSON.parse(request);return response}static validateStateParam(response){let octets=new Uint8Array(response.request.state);let encoded=response.params.state;return crypto.subtle.digest({name:"SHA-256"},octets).then(digest=>{if(encoded!==base64url(Buffer.from(digest))){throw new Error("Mismatching state parameter in authentication response")}return response})}static validateResponseMode(response){if(response.request.response_type!=="code"&&response.mode==="query"){throw new Error("Invalid response mode")}return response}static validateResponseParams(response){let{request:request,params:params}=response;let expectedParams=request.response_type.split(" ");if(expectedParams.includes("code")){assert(params.code,"Missing authorization code in authentication response")}if(expectedParams.includes("id_token")){assert(params.id_token,"Missing id_token in authentication response")}if(expectedParams.includes("token")){assert(params.access_token,"Missing access_token in authentication response");assert(params.token_type,"Missing token_type in authentication response")}return response}static exchangeAuthorizationCode(response){let{rp:rp,params:params,request:request}=response;let code=params.code;if(!code||request["response_type"]!=="code"){return Promise.resolve(response)}let{provider:provider,registration:registration}=rp;let id=registration["client_id"];let secret=registration["client_secret"];if(!secret){return Promise.reject(new Error("Client cannot exchange authorization code because "+"it is not a confidential client"))}let endpoint=provider.configuration.token_endpoint;let method="POST";let headers=new Headers({"Content-Type":"application/x-www-form-urlencoded"});let bodyContents={grant_type:"authorization_code",code:code,redirect_uri:request["redirect_uri"]};let authMethod=registration["token_endpoint_auth_method"]||"client_secret_basic";if(authMethod==="client_secret_basic"){let credentials=new Buffer(`${id}:${secret}`).toString("base64");headers.set("Authorization",`Basic ${credentials}`)}if(authMethod==="client_secret_post"){bodyContents["client_id"]=id;bodyContents["client_secret"]=secret}let body=FormUrlEncoded.encode(bodyContents);return fetch(endpoint,{method:method,headers:headers,body:body}).then(onHttpError("Error exchanging authorization code")).then(tokenResponse=>tokenResponse.json()).then(tokenResponse=>{assert(tokenResponse["access_token"],"Missing access_token in token response");assert(tokenResponse["token_type"],"Missing token_type in token response");assert(tokenResponse["id_token"],"Missing id_token in token response");response.params=Object.assign(response.params,tokenResponse);return response})}static validateIDToken(response){if(!response.params.id_token){return Promise.resolve(response)}return Promise.resolve(response).then(AuthenticationResponse.decryptIDToken).then(AuthenticationResponse.decodeIDToken).then(AuthenticationResponse.validateIssuer).then(AuthenticationResponse.validateAudience).then(AuthenticationResponse.resolveKeys).then(AuthenticationResponse.verifySignature).then(AuthenticationResponse.validateExpires).then(AuthenticationResponse.verifyNonce).then(AuthenticationResponse.validateAcr).then(AuthenticationResponse.validateAuthTime).then(AuthenticationResponse.validateAccessTokenHash).then(AuthenticationResponse.validateAuthorizationCodeHash)}static decryptIDToken(response){return Promise.resolve(response)}static decodeIDToken(response){let jwt=response.params.id_token;try{response.decoded=IDToken.decode(jwt)}catch(decodeError){const error=new HttpError(400,"Error decoding ID Token");error.cause=decodeError;error.info={id_token:jwt};throw error}return response}static validateIssuer(response){let configuration=response.rp.provider.configuration;let payload=response.decoded.payload;if(payload.iss!==configuration.issuer){throw new Error("Mismatching issuer in ID Token")}return response}static validateAudience(response){let registration=response.rp.registration;let{aud:aud,azp:azp}=response.decoded.payload;if(typeof aud==="string"&&aud!==registration["client_id"]){throw new Error("Mismatching audience in id_token")}if(Array.isArray(aud)&&!aud.includes(registration["client_id"])){throw new Error("Mismatching audience in id_token")}if(Array.isArray(aud)&&!azp){throw new Error("Missing azp claim in id_token")}if(azp&&azp!==registration["client_id"]){throw new Error("Mismatching azp claim in id_token")}return response}static resolveKeys(response){let rp=response.rp;let provider=rp.provider;let decoded=response.decoded;let isFreshJwks=false;return Promise.resolve(provider.jwks).then(jwks=>jwks?jwks:(isFreshJwks=true,rp.jwks())).then(jwks=>{if(decoded.resolveKeys(jwks)){return Promise.resolve(response)}if(!isFreshJwks){return rp.jwks().then(jwks=>{if(decoded.resolveKeys(jwks)){return Promise.resolve(response)}throw new Error("Cannot resolve signing key for ID Token")})}throw new Error("Cannot resolve signing key for ID Token")})}static verifySignature(response){let alg=response.decoded.header.alg;let registration=response.rp.registration;let expectedAlgorithm=registration["id_token_signed_response_alg"]||"RS256";if(alg!==expectedAlgorithm){throw new Error(`Expected ID Token to be signed with ${expectedAlgorithm}`)}return response.decoded.verify().then(verified=>{if(!verified){throw new Error("Invalid ID Token signature")}return response})}static validateExpires(response){let exp=response.decoded.payload.exp;if(exp<=Math.floor(Date.now()/1e3)){throw new Error("Expired ID Token")}return response}static verifyNonce(response){let octets=new Uint8Array(response.request.nonce);let nonce=response.decoded.payload.nonce;if(!nonce){throw new Error("Missing nonce in ID Token")}return crypto.subtle.digest({name:"SHA-256"},octets).then(digest=>{if(nonce!==base64url(Buffer.from(digest))){throw new Error("Mismatching nonce in ID Token")}return response})}static validateAcr(response){return response}static validateAuthTime(response){return response}static validateAccessTokenHash(response){return response}static validateAuthorizationCodeHash(response){return response}}module.exports=AuthenticationResponse}).call(this,__webpack_require__(20),__webpack_require__(36).Buffer)},function(module,exports,__webpack_require__){const{JWT:JWT}=__webpack_require__(28);const REQUIRED_CLAIMS=["iss","sub","aud","exp","iat"];class TokenClaimsSet{constructor({iss:iss,sub:sub,aud:aud,exp:exp,iat:iat,nbf:nbf,jti:jti,auth_time:auth_time,nonce:nonce,acr:acr,amr:amr}={}){this.iss=iss;this.sub=sub;this.aud=aud;this.exp=exp;this.iat=iat;this.nbf=nbf;this.jti=jti;this.auth_time=auth_time;this.nonce=nonce;this.acr=acr;this.amr=amr}validate(){let valid=true;let error;try{for(const claim of REQUIRED_CLAIMS){if(!this[claim]){valid=false;throw new Error(`Required claim ${claim} is missing.`)}}}catch(validationError){error=validationError}return{valid:valid,error:error}}}class IDToken extends JWT{constructor(data={}){super(data);this.payload=new TokenClaimsSet(data.payload)}validate(){const payloadResult=this.payload.validate();if(!payloadResult.valid){return payloadResult}let valid=true;let error;return{valid:valid,error:error}}}module.exports=IDToken;module.exports.TokenClaimsSet=TokenClaimsSet},function(module,exports,__webpack_require__){"use strict";const fetch=__webpack_require__(5);const onHttpError=__webpack_require__(60);const PoPToken=__webpack_require__(61);class Session{constructor(options){this.credentialType=options.credentialType||"access_token";this.issuer=options.issuer;this.authorization=options.authorization||{};this.sessionKey=options.sessionKey;this.idClaims=options.idClaims;this.accessClaims=options.accessClaims}static from(options){return new Session(options)}static fromAuthResponse(response){const RelyingParty=__webpack_require__(19);let idClaims=response.decoded&&response.decoded.payload||{};let{rp:rp}=response;let registration=rp.registration;let rpAuthOptions=rp.defaults.authenticate||{};let credentialType=rpAuthOptions["credential_type"]||rp.defaults.popToken?"pop_token":"access_token";let sessionKey=response.session[RelyingParty.SESSION_PRIVATE_KEY];let options={credentialType:credentialType,sessionKey:sessionKey,issuer:idClaims.iss,idClaims:idClaims,authorization:{client_id:registration["client_id"],access_token:response.params["access_token"],id_token:response.params["id_token"],refresh_token:response.params["refresh_token"]}};return Session.from(options)}get fetch(){return(url,options)=>{return Promise.resolve().then(()=>{if(this.hasCredentials()){return this.fetchWithCredentials(url,options)}else{return fetch(url,options)}}).then(onHttpError("Error while fetching resource"))}}bearerTokenFor(url){switch(this.credentialType){case"pop_token":return PoPToken.issueFor(url,this);default:return Promise.resolve(this.authorization[this.credentialType])}}hasCredentials(){switch(this.credentialType){case"pop_token":return!!this.authorization["id_token"];default:return!!this.authorization[this.credentialType]}}fetchWithCredentials(url,options={}){options.headers=options.headers||{};return this.bearerTokenFor(url).then(token=>{options.headers.authorization=`Bearer ${token}`;return fetch(url,options)})}}module.exports=Session},function(module,exports,__webpack_require__){"use strict";function onHttpError(message="fetch error"){return response=>{if(response.status>=200&&response.status<300){return response}let errorMessage=`${message}: ${response.status} ${response.statusText}`;let error=new Error(errorMessage);error.response=response;error.statusCode=response.status;throw error}}module.exports=onHttpError},function(module,exports,__webpack_require__){"use strict";const{URL:URL}=__webpack_require__(27);const{JWT:JWT,JWK:JWK}=__webpack_require__(28);const DEFAULT_MAX_AGE=3600;class PoPToken extends JWT{static issueFor(resourceServerUri,session){if(!resourceServerUri){throw new Error("Cannot issue PoPToken - missing resource server URI")}if(!session.sessionKey){throw new Error("Cannot issue PoPToken - missing session key")}if(!session.authorization.id_token){throw new Error("Cannot issue PoPToken - missing id token")}let jwk=JSON.parse(session.sessionKey);return JWK.importKey(jwk).then(importedSessionJwk=>{let options={aud:new URL(resourceServerUri).origin,key:importedSessionJwk,iss:session.authorization.client_id,id_token:session.authorization.id_token};return PoPToken.issue(options)}).then(jwt=>{return jwt.encode()})}static issue(options){let{aud:aud,iss:iss,key:key}=options;let alg=key.alg;let iat=options.iat||Math.floor(Date.now()/1e3);let max=options.max||DEFAULT_MAX_AGE;let exp=iat+max;let header={alg:alg};let payload={iss:iss,aud:aud,exp:exp,iat:iat,id_token:options.id_token,token_type:"pop"};let jwt=new PoPToken({header:header,payload:payload,key:key.cryptoKey},{filter:false});return jwt}}module.exports=PoPToken},function(module,exports,__webpack_require__){exports=module.exports=HttpError;var StandardError=__webpack_require__(63);var STATUS_CODE_TO_NAME=__webpack_require__(64);var STATUS_NAME_TO_CODE=exports;function HttpError(code,msg,props){if(typeof code=="string")code=STATUS_NAME_TO_CODE[code];if(typeof code!="number")throw new TypeError("Non-numeric HTTP code");if(typeof msg=="object"&&msg!=null){props=msg;msg=null}StandardError.call(this,msg||STATUS_CODE_TO_NAME[code],props);this.code=code}HttpError.prototype=Object.create(StandardError.prototype,{constructor:{value:HttpError,configurable:true,writable:true}});HttpError.prototype.name="HttpError";Object.defineProperties(HttpError.prototype,{statusCode:alias("code"),statusMessage:alias("message"),status:{configurable:true,get:function(){return this.code},set:function(value){Object.defineProperty(this,"status",{value:value,configurable:true,enumerable:true,writable:true})}}});HttpError.prototype.toString=function(){return this.name+": "+this.code+" "+this.message};for(var code in STATUS_CODE_TO_NAME){var name=STATUS_CODE_TO_NAME[code];exports[name.replace("'","").replace(/[- ]/g,"_").toUpperCase()]=+code}function alias(name){return{configurable:true,get:function(){return this[name]},set:function(value){return this[name]=value}}}},function(module,exports){var has=Object.hasOwnProperty;var proto=Object.getPrototypeOf;var trace=Error.captureStackTrace;module.exports=StandardError;function StandardError(msg,props){if(msg&&typeof msg=="object")props=msg,msg=undefined;else this.message=msg;if(props)for(var key in props)this[key]=props[key];if(!has.call(this,"name"))this.name=has.call(proto(this),"name")?this.name:this.constructor.name;if(trace&&!("stack"in this))trace(this,this.constructor)}StandardError.prototype=Object.create(Error.prototype,{constructor:{value:StandardError,configurable:true,writable:true}});StandardError.prototype.name="StandardError"},function(module){module.exports=JSON.parse('{"100":"Continue","101":"Switching Protocols","102":"Processing","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I\'m a teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Unordered Collection","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}')},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"openIdpPopup",function(){return openIdpPopup});__webpack_require__.d(__webpack_exports__,"obtainSession",function(){return obtainSession});__webpack_require__.d(__webpack_exports__,"popupHandler",function(){return popupHandler});var _ipc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10);var _url_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6);function openIdpPopup(popupUri){const width=650;const height=400;const left=window.screenX+(window.innerWidth-width)/2;const top=window.screenY+(window.innerHeight-height)/2;const settings="width=".concat(width,",height=").concat(height,",left=").concat(left,",top=").concat(top);return window.open(popupUri,"solid-auth-client",settings)}function obtainSession(store,popup,options){return new Promise((resolve,reject)=>{const popupServer=new _ipc__WEBPACK_IMPORTED_MODULE_0__["Server"](popup,Object(_url_util__WEBPACK_IMPORTED_MODULE_1__["originOf"])(options.popupUri||""),popupHandler(store,options,session=>{popupServer.stop();resolve(session)}));popupServer.start()})}function popupHandler(store,{popupUri:popupUri,callbackUri:callbackUri},foundSessionCb){return async(method,...args)=>{switch(method){case"getAppOrigin":return window.location.origin;case"storage/getItem":return store.getItem(...args);case"storage/setItem":return store.setItem(...args);case"storage/removeItem":return store.removeItem(...args);case"getLoginOptions":return{popupUri:popupUri,callbackUri:callbackUri};case"foundSession":foundSessionCb(...args)}}}}])["default"]});(()=>{var __webpack_modules__=[(module,__unused_webpack_exports,__webpack_require__)=>{__webpack_require__.g.fetcher=__webpack_require__(1);__webpack_require__.g.doc=__webpack_require__(115);const uri=__webpack_require__(116);const graph=__webpack_require__(117);const inbox=__webpack_require__(120);const util=__webpack_require__(114);window.MediumEditor=__webpack_require__(121);window.MediumEditorTable=__webpack_require__(122);const storage=__webpack_require__(123);__webpack_require__.g.auth=__webpack_require__(124);__webpack_require__.g.template=__webpack_require__(113);const d3=Object.assign({},__webpack_require__(125),__webpack_require__(176));const shower=__webpack_require__(204)["default"];if(typeof DO==="undefined"){const ld=__webpack_require__(2);__webpack_require__.g.SimpleRDF=ld.SimpleRDF;var DO={fetcher:fetcher,C:__webpack_require__(112),U:{getResourceLabel:function(s){return s.dctermstitle||s["http://purl.org/dc/elements/1.1/title"]||auth.getAgentName(s)||undefined},getItemsList:function(url,options){url=url||window.location.origin+window.location.pathname;options=options||{};options["resourceItems"]=options.resourceItems||[];options["headers"]=options.headers||{};DO.C["CollectionItems"]=DO.C["CollectionItems"]||{};DO.C["CollectionPages"]="CollectionPages"in DO.C&&DO.C.CollectionPages.length>0?DO.C.CollectionPages:[];var pIRI=uri.getProxyableIRI(url);return fetcher.getResourceGraph(pIRI,options.headers,options).then(function(i){var s=i.child(url);DO.C.CollectionPages.push(url);var items=[s.asitems,s.asorderedItems,s.ldpcontains];Object.keys(items).forEach(function(i){items[i].forEach(function(resource){var types=s.child(resource).rdftype;if(types.indexOf(DO.C.Vocab["ldpContainer"]["@id"])<0&&types.indexOf(DO.C.Vocab["asCollection"]["@id"])<0&&types.indexOf(DO.C.Vocab["asOrderedCollection"]["@id"])<0){DO.C.CollectionItems[resource]=s;options.resourceItems.push(resource)}})});if(s.asfirst&&DO.C.CollectionPages.indexOf(s.asfirst)<0){return DO.U.getItemsList(s.asfirst,options)}else if(s.asnext&&DO.C.CollectionPages.indexOf(s.asnext)<0){return DO.U.getItemsList(s.asnext,options)}else{return util.uniqueArray(options.resourceItems)}},function(reason){console.log(reason);return reason})},getNotifications:function(url){url=url||window.location.origin+window.location.pathname;var notifications=[];var pIRI=uri.getProxyableIRI(url);DO.C.Inbox[url]={};DO.C.Inbox[url]["Notifications"]=[];return graph.getGraph(pIRI).then(function(i){DO.C.Inbox[url]["Graph"]=i;var s=i.child(url);s.ldpcontains.forEach(function(resource){var types=s.child(resource).rdftype;if(types.indexOf(DO.C.Vocab["ldpContainer"]["@id"])<0){notifications.push(resource)}});if(notifications.length>0){DO.C.Inbox[url]["Notifications"]=notifications;return notifications}else{var reason={message:"There are no notifications."};return Promise.reject(reason)}},function(reason){console.log(reason);return reason})},showInboxNotifications:function(){if(typeof SimpleRDF!=="undefined"){fetcher.getLinkRelation(DO.C.Vocab["ldpinbox"]["@id"]).then(function(i){i.forEach(function(inboxURL){if(!DO.C.Inbox[inboxURL]){DO.U.showNotificationSources(inboxURL)}})},function(reason){})}},showNotificationSources:function(url){DO.U.getNotifications(url).then(function(i){i.forEach(function(notification){if(!DO.C.Notification[notification]){DO.U.showActivities(notification)}})},function(reason){console.log("No notifications");return reason})},showContactsActivities:function(e){var showProgress=function(e){var rA=e.target.closest(".resource-activities");var i=rA.querySelector(".fa-bolt");rA.disabled=true;var icon=util.fragmentFromString(template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"].replace(/ fa\-fw/," fa-fw fa-2x"));i.parentNode.replaceChild(icon,i)};var removeProgress=function(e){var rA=e.target.closest(".resource-activities");var i=rA.querySelector(".fa-spin");var icon=util.fragmentFromString(template.Icon[".fas.fa-circle.fa-2x"]);i.parentNode.replaceChild(icon,i)};if(e){showProgress(e)}var promises=[];if(DO.C.User.Storage&&DO.C.User.Storage.length>0){if(DO.C.User.Outbox&&DO.C.User.Outbox.length>0){if(DO.C.User.Storage[0]==DO.C.User.Outbox[0]){DO.U.showActivitiesSources(DO.C.User.Outbox[0])}else{DO.U.showActivitiesSources(DO.C.User.Storage[0]);DO.U.showActivitiesSources(DO.C.User.Outbox[0])}}else{DO.U.showActivitiesSources(DO.C.User.Storage[0])}}else if(DO.C.User.Outbox&&DO.C.User.Outbox.length>0){DO.U.showActivitiesSources(DO.C.User.Outbox[0])}if(DO.C.User.Contacts&&Object.keys(DO.C.User.Contacts).length>0){var sAS=function(iri){return DO.U.showActivitiesSources(iri).catch(()=>{return Promise.resolve()})};Object.keys(DO.C.User.Contacts).forEach(function(iri){var o=DO.C.User.Contacts[iri].Outbox;if(o){promises.push(sAS(o[0]))}var s=DO.C.User.Contacts[iri].Storage;if(s){promises.push(sAS(s[0]))}});return Promise.all(promises).then(r=>{removeProgress(e)})}else{return DO.U.updateContactsInfo(DO.C.User.IRI,{showActivitiesSources:true}).then(()=>{removeProgress(e)}).catch(()=>{removeProgress(e)})}},showActivitiesSources:function(url){return DO.U.getActivities(url).then(function(items){var promises=[];for(var i=0;i<items.length&&i<DO.C.CollectionItemsLimit;i++){var pI=function(iri){return DO.U.showActivities(iri).catch(()=>{return Promise.resolve()})};promises.push(pI(items[i]))}return Promise.all(promises)},function(reason){console.log("No activities");return reason})},getActivities:function(url,options){url=url||window.location.origin+window.location.pathname;var pIRI=uri.getProxyableIRI(url);options=options||{};return DO.U.getItemsList(pIRI,options)},showActivities:function(url){DO.C.Notification[url]={};DO.C.Notification[url]["Activities"]=[];var pIRI=uri.getProxyableIRI(url);return fetcher.getResourceGraph(pIRI).then(function(g){DO.C.Notification[url]["Graph"]=g;var currentPathURL=window.location.origin+window.location.pathname;var subjects=[];g.graph().toArray().forEach(function(t){subjects.push(t.subject.nominalValue)});subjects=util.uniqueArray(subjects);subjects.forEach(function(i){var s=g.child(i);var types=s.rdftype._array||[];if(types.length>0){var resourceTypes=types;if(resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Like")>-1||resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Dislike")>-1){if(s.asobject&&s.asobject.at(0)){if(s.ascontext&&s.ascontext.at(0)){if(uri.getPathURL(s.asobject.at(0))==currentPathURL){var context=s.ascontext.at(0);return DO.U.positionInteraction(context).then(function(iri){return iri},function(reason){console.log(context+": Context is unreachable")})}}else{var iri=s.iri().toString();var targetIRI=s.asobject.at(0);var motivatedBy="oa:assessing";var id=String(Math.abs(util.hashCode(iri)));var refId="r-"+id;var refLabel=id;var bodyText=resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Like")>-1?"Liked":"Disliked";var noteData={type:"article",mode:"read",motivatedByIRI:motivatedBy,id:id,refId:refId,refLabel:refLabel,creator:{},target:{iri:targetIRI},body:bodyText,license:{}};if(s.asactor){noteData["creator"]={iri:s.asactor};var a=g.child(noteData["creator"]["iri"]);var actorName=auth.getAgentName(a);var actorImage=auth.getAgentImage(a);if(typeof actorName!="undefined"){noteData["creator"]["name"]=actorName}if(typeof actorImage!="undefined"){noteData["creator"]["image"]=actorImage}}else if(type=="https://www.w3.org/ns/activitystreams#Dislike"){noteData["creator"]={name:"Anonymous Coward"}}if(s.asupdated){noteData["datetime"]=s.asupdated}if(s.schemalicense){noteData.license["iri"]=s.schemalicense;noteData.license["name"]=DO.C.License[noteData.license["iri"]].name}DO.U.addInteraction(noteData)}}}else if(resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Relationship")>-1){if(s.assubject&&s.assubject.at(0)&&s.asrelationship&&s.asrelationship.at(0)&&s.asobject&&s.asobject.at(0)&&uri.getPathURL(s.asobject.at(0))==currentPathURL){var subject=s.assubject.at(0);return DO.U.positionInteraction(subject).then(function(iri){return iri},function(reason){console.log(subject+": subject is unreachable")})}}else if(resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Announce")>-1||resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Create")>-1){if(s.asobject&&s.asobject.at(0)&&s.astarget&&s.astarget.at(0)){var options={};var targetPathURL=uri.getPathURL(s.astarget.at(0));if(targetPathURL==currentPathURL){options["targetInOriginalResource"]=true}else if(DO.C.ResourceInfo.graph.rellatestversion&&targetPathURL==uri.getPathURL(DO.C.ResourceInfo.graph.rellatestversion)){options["targetInMemento"]=true}else if(DO.C.ResourceInfo.graph.owlsameAs&&DO.C.ResourceInfo.graph.owlsameAs.at(0)==targetPathURL){options["targetInSameAs"]=true}if(options["targetInOriginalResource"]||options["targetInMemento"]||options["targetInSameAs"]){var object=s.asobject.at(0);var target=s.astarget.at(0);DO.C.Notification[url]["Activities"].push(i);DO.C.Activity[object]={};DO.C.Activity[object]["Graph"]=s;if(object.startsWith(url)){return DO.U.showAnnotation(object,s)}else{s=s.child(object);var citation={};Object.keys(DO.C.Citation).forEach(function(citationCharacterization){var citedEntity=s[citationCharacterization];if(citedEntity&&citedEntity.startsWith(currentPathURL)){options["objectCitingEntity"]=true;citation={citingEntity:object,citationCharacterization:citationCharacterization,citedEntity:target}}});if(options["objectCitingEntity"]){return DO.U.showCitations(citation,s)}else{return DO.U.positionInteraction(object,document.body,options).then(function(iri){return iri},function(reason){console.log(object+": object is unreachable")})}}}}}else if(resourceTypes.indexOf("https://www.w3.org/ns/activitystreams#Add")>-1){if(s.asobject&&s.asobject.at(0)){var object=s.asobject.at(0);if(object.startsWith(url)){return DO.U.showAnnotation(object,s)}else{return DO.U.positionInteraction(object).then(function(iri){return iri},function(reason){console.log(object+": object is unreachable")})}}}else if(resourceTypes.indexOf("http://www.w3.org/ns/oa#Annotation")>-1&&uri.getPathURL(s.oahasTarget)==currentPathURL){return DO.U.showAnnotation(i,s)}else{}}else{}})},function(reason){console.log(url+": is unreachable. "+reason);return reason})},showVisualisationGraph:function(url,data,selector,options){url=url||window.location.origin+window.location.pathname;data=data||doc.getDocument();selector=selector||"body";options=options||{};options["contentType"]=options.contentType||"text/html";options["subjectURI"]=options.subjectURI||url;options["license"]=options.license||"https://creativecommons.org/licenses/by/4.0/";var width=options.width||"100%";var height=options.height||"100%";var nodeRadius=6;var simulation;var id=util.generateAttributeId();function positionLink(d){return"M"+d[0].x+","+d[0].y+"S"+d[1].x+","+d[1].y+" "+d[2].x+","+d[2].y}function positionNode(d){return"translate("+d.x+","+d.y+")"}function dragstarted(d){if(!d3.event.active)simulation.alphaTarget(.3).restart();d.fx=d.x,d.fy=d.y}function dragged(d){d.fx=d3.event.x,d.fy=d3.event.y}function dragended(d){if(!d3.event.active)simulation.alphaTarget(0);d.fx=null,d.fy=null}function runSimulation(graph,svgObject){simulation.nodes(graph.nodes).on("tick",ticked);simulation.force("link").links(graph.links);function ticked(){svgObject.link.attr("d",positionLink);svgObject.node.attr("transform",positionNode)}}var group={0:{color:"#fff",label:""},1:{color:"#000",label:"",type:"rdf:Resource"},2:{color:"#777",label:""},3:{color:"#ccc",label:"Literal"},4:{color:"#551a8b",label:"Visited",type:"rdf:Resource"},5:{color:"#ff0",label:"Root",type:"rdf:Resource"},6:{color:"#ff2900",label:"Type",type:"rdf:Resource"},7:{color:"#002af7",label:"External",type:"rdf:Resource"},8:{color:"#00cc00",label:"Internal",type:"rdf:Resource"},9:{color:"#00ffff",label:"Citation",type:"rdf:Resource"},10:{color:"#900090",label:"Social",type:"rdf:Resource"},11:{color:"#ff7f00",label:"DataSet",type:"rdf:Resource"},12:{color:"#9a3a00",label:"Requirement",type:"rdf:Resource"},13:{color:"#0088ee",label:"Policy",type:"rdf:Resource"}};if(selector=="#graph-view"&&!document.getElementById("graph-view")){document.documentElement.appendChild(util.fragmentFromString('<aside id="graph-view" class="do on">'+DO.C.Button.Close+"<h2>Graph view</h2></aside>"))}var svg=d3.select(selector).append("svg").attr("width",width).attr("height",height).attr("id",id).attr("class","graph").attr("xmlns","http://www.w3.org/2000/svg").attr("version","1.1").attr("xml:lang","en").attr("prefix","rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# xsd: http://www.w3.org/2001/XMLSchema# schema: http://schema.org/");var s=document.getElementById(id);width=options.width||parseInt(s.ownerDocument.defaultView.getComputedStyle(s,null)["width"]);height=options.height||parseInt(s.ownerDocument.defaultView.getComputedStyle(s,null)["height"]);svg.append("metadata").append("tspan").attr("rel","schema:creator").attr("resource","https://dokie.li/");if("license"in options){svg.select("metadata").append("tspan").attr("rel","schema:license").attr("resource",options.license)}if("title"in options){svg.append("title").attr("property","schema:name").text(options.title)}function handleResource(pIRI,headers,options){return fetcher.getResource(pIRI,headers,options).catch(error=>{var pIRI=uri.getProxyableIRI(options["subjectURI"],{forceProxy:true});return handleResource(pIRI,headers,options)}).then(response=>{var cT=response.headers.get("Content-Type");options["contentType"]=cT?cT.split(";")[0].trim():"text/turtle";return response.text().then(data=>{options["mergeGraph"]=true;initiateVisualisation(options["subjectURI"],data,options)})})}function createSVGMarker(){svg.append("defs").selectAll("marker").data(["end"]).enter().append("marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",20).attr("refY",-1).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").attr("fill",group[2].color).append("path").attr("d","M0,-5L10,0L0,5")}function buildGraphObject(graph){var graphObject={};var nodes=graph.nodes;var nodeById=new Map;nodes.forEach(function(n){nodeById.set(n.id,n)});var links=graph.links;var bilinks=[];var uniqueNodes={};links.forEach(function(link){var s=link.source=nodeById.get(link.source),t=link.target=nodeById.get(link.target),i={};nodes.push(i);if(uniqueNodes[s.id]>-1){s=uniqueNodes[s.id]}else{uniqueNodes[s.id]=s}if(uniqueNodes[t.id]>-1){t=uniqueNodes[t.id]}else{uniqueNodes[t.id]=t}links.push({source:s,target:i},{source:i,target:t});bilinks.push([s,i,t])});graphObject={nodes:nodes,links:links,bilinks:bilinks,uniqueNodes:uniqueNodes};return graphObject}function buildSVGObject(go){var svgObject={};createSVGMarker();var link=svg.selectAll("path").data(go.bilinks).enter().append("path").attr("fill","none").attr("stroke",group[3].color).attr("marker-end","url(#end)");var node=svg.selectAll("circle").data(go.nodes.filter(function(d){if(go.uniqueNodes[d.id]&&go.uniqueNodes[d.id].index==d.index){return d.id}})).enter().append("circle").attr("r",nodeRadius).attr("fill",function(d){return group[d.group].color}).attr("stroke",function(d){if(d.visited){return group[4].color}else if(d.group==3){return group[2].color}else{return group[7].color}}).on("click",function(d){var iri=d.id;if("type"in group[d.group]&&group[d.group].type=="rdf:Resource"&&!(d.id in DO.C.Graphs)){options=options||{};options["subjectURI"]=iri;var headers={Accept:fetcher.setAcceptRDFTypes()};var pIRI=uri.getProxyableIRI(iri);if(pIRI.slice(0,5).toLowerCase()=="http:"){options["noCredentials"]=true}handleResource(pIRI,headers,options)}});node.append("title").text(function(d){return d.id});svgObject={link:link,node:node};return svgObject}function initiateVisualisation(url,data,options){url=uri.stripFragmentFromString(url);return DO.U.getVisualisationGraphData(url,data,options).then(function(graph){var graphObject=buildGraphObject(graph);simulation=d3.forceSimulation().nodes(graph.nodes).alphaDecay(.025).force("link",d3.forceLink().distance(nodeRadius).strength(.25)).force("collide",d3.forceCollide().radius(nodeRadius*2).strength(.25)).force("center",d3.forceCenter(width/2,height/2));if("mergeGraph"in options&&options.mergeGraph){svg.selectAll("marker").remove();svg.selectAll("path").remove();svg.selectAll("circle").remove();simulation.restart()}var svgObject=buildSVGObject(graphObject);runSimulation(graph,svgObject)})}initiateVisualisation(url,data,options)},getVisualisationGraphData:function(url,data,options){var requestURL=uri.stripFragmentFromString(url);var documentURL=uri.stripFragmentFromString(document.location.href);return new Promise(function(resolve,reject){graph.getGraphFromData(data,options).then(function(g){DO.C["Graphs"]=DO.C["Graphs"]||{};var g=SimpleRDF(DO.C.Vocab,options["subjectURI"],g,ld.store).child(requestURL);var dataGraph=SimpleRDF();var graphs={};graphs[options["subjectURI"]]=g;if("mergeGraph"in options&&options.mergeGraph){graphs=Object.assign(DO.C.Graphs,graphs)}DO.C["Graphs"][options["subjectURI"]]=g;Object.keys(graphs).forEach(function(i){var graph=graphs[i].graph();dataGraph.graph().addAll(graph)});var graph={nodes:[],links:[]};var graphNodes=[];dataGraph.graph().toArray().forEach(function(t){if(t.object.nominalValue=="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"){return}var sGroup=8;var pGroup=8;var oGroup=8;var sVisited=false;var oVisited=false;switch(t.subject.interfaceName){default:case"NamedNode":if(uri.stripFragmentFromString(t.subject.nominalValue)!=requestURL){sGroup=7}break;case"BlankNode":sGroup=8;break}switch(t.object.interfaceName){default:case"NamedNode":if(uri.stripFragmentFromString(t.object.nominalValue)!=requestURL){oGroup=7}break;case"BlankNode":oGroup=8;break;case"Literal":oGroup=3;break}if(t.predicate.nominalValue==DO.C.Vocab["rdftype"]["@id"]){oGroup=6;if(auth.isActorType(t.object.nominalValue)){sGroup=10}switch(t.object.nominalValue){case DO.C.Vocab["qbDataSet"]["@id"]:oGroup=11;break;case DO.C.Vocab["odrlAgreement"]["@id"]:case DO.C.Vocab["odrlAssertion"]["@id"]:case DO.C.Vocab["odrlOffer"]["@id"]:case DO.C.Vocab["odrlPolicy"]["@id"]:case DO.C.Vocab["odrlPrivacy"]["@id"]:case DO.C.Vocab["odrlRequest"]["@id"]:case DO.C.Vocab["odrlSet"]["@id"]:case DO.C.Vocab["odrlTicket"]["@id"]:sGroup=13;break}}if(auth.isActorProperty(t.predicate.nominalValue)){oGroup=10}if(t.predicate.nominalValue.startsWith("http://purl.org/spar/cito/")){oGroup=9}switch(t.predicate.nominalValue){case DO.C.Vocab["foafknows"]["@id"]:sGroup=10;oGroup=10;break;case DO.C.Vocab["specrequirement"]["@id"]:oGroup=12;break;case DO.C.Vocab["odrlhasPolicy"]["@id"]:oGroup=13;break}if(DO.C.Graphs[t.subject.nominalValue]){sVisited=true}if(DO.C.Graphs[t.object.nominalValue]){oVisited=true}if(t.subject.nominalValue==requestURL){sGroup=5;sVisited=true}if(t.object.nominalValue==requestURL){oGroup=5;oVisited=true}if(graphNodes.indexOf(t.subject.nominalValue)==-1){graphNodes.push(t.subject.nominalValue);graph.nodes.push({id:t.subject.nominalValue,group:sGroup,visited:sVisited})}if(graphNodes.indexOf(t.object.nominalValue)==-1){graphNodes.push(t.object.nominalValue);graph.nodes.push({id:t.object.nominalValue,group:oGroup,visited:oVisited})}graph.links.push({source:t.subject.nominalValue,target:t.object.nominalValue,value:t.predicate.nominalValue})});delete graphNodes;return resolve(graph)})})},showGraph:function(resources,selector,options){if(!DO.C.GraphViewerAvailable){return}options=options||{};options["contentType"]=options.contentType||"text/html";options["subjectURI"]=options.subjectURI||location.href.split(location.search||location.hash||/[?#]/)[0];if(Array.isArray(resources)){DO.U.showGraphResources(resources,selector,options)}else{var property=resources&&"filter"in options&&"predicates"in options.filter&&options.filter.predicates.length>0?options.filter.predicates[0]:DO.C.Vocab["ldpinbox"]["@id"];var iri=resources?resources:location.href.split(location.search||location.hash||/[?#]/)[0];fetcher.getLinkRelation(property,iri).then(function(resources){DO.U.showGraphResources(resources[0],selector,options)},function(reason){console.log(reason)})}},showGraphResources:function(resources,selector,options){selector=selector||document.body;options=options||{};resources=util.uniqueArray(resources);DO.U.processResources(resources,options).then(function(url){var promises=[];url.forEach(function(u){var pIRI=uri.getProxyableIRI(u);promises.push(fetcher.getResourceGraph(pIRI))});var dataGraph=SimpleRDF();Promise.all(promises).then(function(graphs){graphs.forEach(function(graph){graph=graph.graph();dataGraph.graph().addAll(graph)});if("filter"in options){dataGraph=dataGraph.graph().filter(function(g){if("subjects"in options.filter&&options.filter.subjects.length>0&&options.filter.subjects.indexOf(g.subject.nominalValue)>=0){return g}if("predicates"in options.filter&&options.filter.predicates.length>0&&options.filter.predicates.indexOf(g.predicate.nominalValue)>=0){return g}})}graph.serializeGraph(dataGraph,{contentType:"text/turtle"}).then(function(data){options["contentType"]="text/turtle";DO.U.showVisualisationGraph(options.subjectURI,data,selector,options)})})})},processResources:function(resources,options){if(Array.isArray(resources)){return Promise.resolve(resources)}else{return DO.U.getItemsList(resources,options)}},urlParam:function(name){var results=new RegExp("[?&]"+name+"=([^&#]*)").exec(window.location.href);if(results===null){return null}else{return results[1]||0}},getTextQuoteSelectorFromLocation:function(location){var regexp=/#selector\(type=TextQuoteSelector,(.*)\)/;matches=location.hash.match(regexp);if(matches){var selectorsArray=matches[1].split(",");var selector={};selectorsArray.forEach(function(s){var kv=s.split("=");if(kv.length==2){switch(kv[0]){case"prefix":selector["prefix"]=decodeURIComponent(kv[1]);break;case"exact":selector["exact"]=decodeURIComponent(kv[1]);break;case"suffix":selector["suffix"]=decodeURIComponent(kv[1]);break}}});return selector}},showTextQuoteSelector:function(containerNode){var motivatedBy="oa:highlighting";var selector=DO.U.getTextQuoteSelectorFromLocation(document.location);if(selector&&selector.exact&&selector.exact.length>0){var refId=document.location.hash.substring(1);var refLabel=DO.U.getReferenceLabel(motivatedBy);containerNode=containerNode||document.body;var docRefType='<sup class="ref-highlighting"><a rel="oa:hasTarget" href="#'+refId+'">'+refLabel+"</a></sup>";var options={do:true,mode:"#selector"};DO.U.importTextQuoteSelector(containerNode,selector,refId,motivatedBy,docRefType,options)}},importTextQuoteSelector:function(containerNode,selector,refId,motivatedBy,docRefType,options){var containerNodeTextContent=containerNode.textContent;options=options||{};var prefix=selector.prefix||"";var exact=selector.exact||"";var suffix=selector.suffix||"";var phrase=util.escapeRegExp(prefix.toString()+exact.toString()+suffix.toString());var selectedParentNode;var textMatches=DO.U.matchAllIndex(containerNodeTextContent,new RegExp(phrase,"g"));textMatches.forEach(function(item){var selectorIndex=item.index;var exactStart=selectorIndex+prefix.length;var exactEnd=selectorIndex+prefix.length+exact.length;var selection={start:exactStart,end:exactEnd};var ref=DO.U.getTextQuoteHTML(refId,motivatedBy,exact,docRefType,options);MediumEditor.selection.importSelection(selection,containerNode,document);var selection=window.getSelection();var r=selection.getRangeAt(0);selection.removeAllRanges();selection.addRange(r);r.collapse(true);selectedParentNode=r.commonAncestorContainer.parentNode;var selectedParentNodeValue=r.commonAncestorContainer.nodeValue;var selectionUpdated=util.fragmentFromString(selectedParentNodeValue.substr(0,r.startOffset)+ref+selectedParentNodeValue.substr(r.startOffset+exact.length));for(var i=0;i<selectedParentNode.childNodes.length;i++){var n=selectedParentNode.childNodes[i];if(n.nodeType===3&&n.nodeValue===selectedParentNodeValue){selectedParentNode.replaceChild(selectionUpdated,n)}}});return selectedParentNode},initUser:function(){storage.getLocalStorageProfile().then(user=>{if(user&&"object"in user){user.object.describes.Role=DO.C.User.IRI&&user.object.describes.Role?user.object.describes.Role:"social";user.object.describes.ContactsOutboxChecked=DO.C.User.IRI&&user.object.describes.ContactsOutboxChecked;DO.C["User"]=user.object.describes}})},setDocumentMode:function(mode){var style=DO.U.urlParam("style");if(style){var title=style.lastIndexOf("/");title=title>-1?style.substr(title+1):style;if(style.startsWith("http")){var pIRI=uri.getProxyableIRI(style);var link='<link class="do" href="'+pIRI+'" media="all" rel="stylesheet" title="'+title+'" />';document.querySelector("head").insertAdjacentHTML("beforeend",link)}window.history.replaceState({},null,document.location.href.substr(0,document.location.href.lastIndexOf("?")));var stylesheets=document.querySelectorAll('head link[rel~="stylesheet"][title]:not([href$="dokieli.css"])');DO.U.updateSelectedStylesheets(stylesheets,title)}var open=DO.U.urlParam("open");if(open){open=decodeURIComponent(open);doc.showActionMessage(document.documentElement,'<span class="progress">'+template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"]+' Opening <a href="'+open+'" target="_blank">'+open+"</a></span>",{timer:1e4});DO.U.openResource(open);window.history.replaceState({},null,document.location.href.substr(0,document.location.href.lastIndexOf("?")))}if(DO.C.GraphViewerAvailable){var searchParams=new URLSearchParams(document.location.search);var g=searchParams.get("graph");if(g){var iri=decodeURIComponent(g);var docURI=iri.split(/[#]/)[0];iri=iri.split("=").pop();var options={subjectURI:iri,license:"https://creativecommons.org/publicdomain/zero/1.0/",title:iri};DO.U.showGraph([docURI],"#graph-view",options);window.history.replaceState({},null,document.location.href.substr(0,document.location.href.lastIndexOf("?graph")))}}if(DO.C.EditorAvailable){if(DO.U.urlParam("author")=="true"||DO.U.urlParam("social")=="true"){if(DO.U.urlParam("social")=="true"){mode="social"}else if(DO.U.urlParam("author")=="true"){mode="author"}var url=document.location.href;window.history.replaceState({},null,url.substr(0,url.lastIndexOf("?")))}if(mode!=="author"){var content=doc.selectArticleNode(document);content=util.fragmentFromString(doc.domToString(content)).textContent.trim();if(content.length==0){mode="author"}}switch(mode||""){case"social":default:DO.U.Editor.enableEditor("social");break;case"author":DO.U.Editor.enableEditor("author");break}}},initDocumentActions:function(){doc.buttonClose();doc.buttonRemoveAside();doc.showRobustLinksDecoration();function checkResourceInfo(){if(DO.C.ResourceInfo){processPotentialAction(DO.C.ResourceInfo)}else{doc.getResourceInfo().then(function(resourceInfo){processPotentialAction(resourceInfo)})}}function processPotentialAction(resourceInfo){var g=resourceInfo.graph;var triples=g._graph;triples.forEach(function(t){var s=t.subject.nominalValue;var p=t.predicate.nominalValue;var o=t.object.nominalValue;if(p==DO.C.Vocab["schemapotentialAction"]["@id"]){var subject=g.child(s);var potentialActions=subject.schemapotentialAction;potentialActions.forEach(function(action){var documentOrigin=document.location.origin==="null"?"file://":document.location.origin;var originPathname=documentOrigin+document.location.pathname;if(action.startsWith(originPathname)){document.addEventListener("click",function(e){var fragment=action.substr(action.lastIndexOf("#"));if(fragment){var selector='[about="'+fragment+'"][typeof="schema:ViewAction"], [href="'+fragment+'"][typeof="schema:ViewAction"], [resource="'+fragment+'"][typeof="schema:ViewAction"]';var element=e.target.closest(selector);if(element){e.preventDefault();e.stopPropagation();var so=g.child(action).schemaobject;if(typeof so!=="undefined"){so=so.iri().toString();selector="#"+element.closest("[id]").id;var svgGraph=document.querySelector(selector+" svg.graph");if(svgGraph){svgGraph.parentNode.removeChild(svgGraph)}else{graph.serializeGraph(g,{contentType:"text/turtle"}).then(function(data){var options={};options["subjectURI"]=so;options["contentType"]="text/turtle";DO.U.showVisualisationGraph(options.subjectURI,data,selector,options)})}}}}})}})}})}var resourceInfo=checkResourceInfo();document.addEventListener("click",function(e){if(e.target.closest('[about="#document-menu"][typeof="schema:ActivateAction"], [href="#document-menu"][typeof="schema:ActivateAction"], [resource="#document-menu"][typeof="schema:ActivateAction"]')){e.preventDefault();e.stopPropagation();if(document.body.classList.contains("on-document-menu")){DO.U.hideDocumentMenu(e)}else{DO.U.showDocumentMenu(e)}}});var annotationRights=document.querySelectorAll('[about="#annotation-rights"][typeof="schema:ChooseAction"], [href="#annotation-rights"][typeof="schema:ChooseAction"], [resource="#annotation-rights"][typeof="schema:ChooseAction"]');for(var i=0;i<annotationRights.length;i++){annotationRights[i].parentNode.replaceChild(util.fragmentFromString("<select>"+DO.U.getLicenseOptionsHTML()+"</select>"),annotationRights[i])}},showDocumentInfo:function(){document.documentElement.appendChild(util.fragmentFromString('<menu id="document-menu" class="do"><button class="show" title="Open menu">'+template.Icon[".fas.fa-bars"]+'</button><header></header><div></div><footer><dl><dt>About</dt><dd id="about-dokieli"><img alt="" height="16" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAn1BMVEUAAAAAjwAAkAAAjwAAjwAAjwAAjwAAjwAAkAAAdwAAjwAAjQAAcAAAjwAAjwAAiQAAjwAAjAAAjwAAjwAAjwAAjwAAkAAAjwAAjwAAjwAAjQAAjQAAhQAAhQAAkAAAkAAAkAAAjgAAjwAAiQAAhAAAkAAAjwAAjwAAkAAAjwAAjgAAjgAAjQAAjwAAjQAAjwAAkAAAjwAAjQAAiwAAkABp3EJyAAAANHRSTlMA+fH89enaabMF4iADxJ4SiSa+uXztyoNvQDcsDgvl3pRiXBcH1M+ppJlWUUpFMq6OdjwbMc1+ZgAABAhJREFUeNrt29nSmkAQBeAGZBMUxH3f993/vP+zJZVKVZKCRhibyc3/XVt6SimYPjPSt28Vmt5W/fu2T/9B9HIf7Tp+0RsgDC6DY6OLvzxJj8341DnsakgZUNUmo2XsORYYS6rOeugukhnyragiq56JIs5UEQ/FXKgidRTzompEKOhG1biioDFV44mCAqrGAQWtqRptA8VMqCpR6zpo9iy84VO1opWHPBZVb9QAzyQN/D1YNungJ+DMSYsbOFvSIwGjR3p0wGiQHkMw2qRHC4w76RGBcSA9NmAcSY8QjAdpYiFbTJoYyNYnTWrI1iFNusj2JE1sZBuQJtyE5pImc3Y21cRhZ1NNtsh2Ik127HCsSY8djjVpINuVhPnjVefobee2adXqu2S/6FyivABDEjQ9Lxo1pDlNd5wg24ikRK5ngKGhHhg1DSgZk4RrD6pa9LlRAnUBfWp6xCe+6EOvOT6yrmrigZaCZHPAp6b0gaiBFKvRd0/D1rr1OrvxDqiyoZmmPt9onib0t/VybyEXqdu0Cw16rUNVAfZFlzdjr5KOaoAUK6JsrgWGQapuBlIS4gy70gEmTrk1fuAgU40UxWXv6wvZAC2Dqfx0BfBK1z1H0aJ0WH7Ub4oG8JDlpBCgK1l5tSjHQSoAf0HVfMqxF+yqpzVk2ZGuAGdk8ijPHZlmpOCg0vh5cgE2JtN3qQSoU3lXpbKlLRegrzTpt+U2TNpKY2YiFiA0kS1Q6QccweZ/oinASm2B3RML0AGDNAU4qq3udmIXYVttD3YrFsBR24N1xG5EJpTeaiYWwILS5WRKBfChFsCSehpOwKi/yS0V4AsMWym3TWUFgMqIsRYL8AVOSDlaYgEitbZnDKll+UatchyJBSC1c3lDuQA2VHYAL3KneHpgLCjHSS7AHYyEciwh1g88wDB94rlyAVxwhsR7ygW4gRMTry8XwDdUDkXFgjVdD5wRsRaCAWJwPGI1Baval8Ie3Hqn8AjjhHbZr2DzrInumDTBGlCG8xy8QPY3MNLX4TiRP1q+BWs2pn9ECwu5+qTABc+80h++28UbTkjlTW3wrM6Ufrtu8d5J9Svg1Vch/RTcUYQdUHm+g1z1x2gSGyjGGVN5F7xjoTCjE0ndC3jJMzfCftmiciZ1lNGe3vCGufOWVMLIQHHehi3X1O8JJxR236SalUzninbu937BlwfV/I3k4KdGk2xm+MHuLa8Z0i9TC280qLRrF+8cw9RSjrOg8oIG8j2YgULsbGPomsgR0x9nsOzkOLh+kZr1owZGbfC2JJl78fIV0Wei/gxZDl85XWVtt++cxhuSEQ6bdfzLjlvM86PbaD4vQUjSglV8385My7CdXtO9+ZSyrLcf7nBN376V8gMpRztyq6RXYQAAAABJRU5ErkJggg==" width="16" /><a href="https://dokie.li/" target="_blank">dokieli</a> is an '+template.Icon[".fab.fa-osi"]+' <a href="https://github.com/linkeddata/dokieli" target="_blank">open source</a> project. There is '+template.Icon[".fas.fa-flask"]+' <a href="https://dokie.li/docs" target="_blank">documentation</a> and public '+template.Icon[".fas.fa-comments"]+' <a href="https://gitter.im/linkeddata/dokieli" target="_blank">chat</a>. Made with fun.</dd></dl></footer></menu>'));document.querySelector("#document-menu").addEventListener("click",function(e){var button=e.target.closest("button");if(button){if(button.classList.contains("show")){DO.U.showDocumentMenu(e)}else if(button.classList.contains("hide")){DO.U.hideDocumentMenu(e)}}})},showDocumentMenu:function(e){if(e){e.preventDefault();e.stopPropagation()}var data;var options={};if(document.location.protocol!=="file:"){options["header"]="wac-allow"}doc.getResourceInfo(data,options).then(function(resourceInfo){var body=document.body;var dMenu=document.querySelector("#document-menu.do");if(dMenu){var dMenuButton=dMenu.querySelector("button");var dHead=dMenu.querySelector("header");var dInfo=dMenu.querySelector("div");dMenuButton.classList.remove("show");dMenuButton.classList.add("hide");dMenuButton.setAttribute("title","Hide Menu");dMenuButton.innerHTML=template.Icon[".fas.fa-minus"];dMenu.classList.add("on");auth.showUserSigninSignout(dHead);DO.U.showDocumentDo(dInfo);DO.U.showViews(dInfo);if(!body.classList.contains("on-slideshow")){DO.U.showDocumentItems()}}else{DO.U.showDocumentInfo();DO.U.showDocumentMenu()}})},hideDocumentMenu:function(e){var body=document.body;var dMenu=document.querySelector("#document-menu.do");var dMenuButton=dMenu.querySelector("button");dMenu.classList.remove("on");var buttonSigninUser=dMenu.querySelector("button.signin-user");if(buttonSigninUser){dMenu.querySelector("button.signin-user").disabled=false}dMenuButton.classList.remove("hide");dMenuButton.classList.add("show");dMenuButton.setAttribute("title","Open Menu");dMenuButton.innerHTML=template.Icon[".fas.fa-bars"];doc.removeNodesWithIds(DO.C.DocumentDoItems)},setPolyfill:function(){if(!Element.prototype.matches){Element.prototype.matches=Element.prototype.msMatchesSelector}if(!Element.prototype.closest){Element.prototype.closest=function(selector){var el=this;while(el){if(el.matches(selector)){return el}el=el.parentElement}}}},matchAllIndex:function(string,regexp){var matches=[];string.replace(regexp,function(){var arr=[].slice.call(arguments,0);var extras=arr.splice(-2);arr.index=extras[0];arr.input=extras[1];matches.push(arr)});return matches.length?matches:null},showXHRProgressHTML:function(http,options){if("progress"in options){http.upload.onprogress=function(e){if(e.lengthComputable){options.progress.value=e.loaded/e.total*100;options.progress.textContent=options.progress.value}}}},setDocRefType:function(){var link=document.querySelector('head link[rel="stylesheet"][title]');if(link){DO.C.DocRefType=link.getAttribute("title")}if(Object.keys(DO.C.RefType).indexOf(DO.C.DocRefType)==-1){DO.C.DocRefType="LNCS"}},getCurrentLinkStylesheet:function(){return document.querySelector('head link[rel="stylesheet"][title]:not([href$="dokieli.css"]):not([disabled])')},showViews:function(node){if(document.querySelector("#document-views")){return}var stylesheets=document.querySelectorAll('head link[rel~="stylesheet"][title]:not([href$="dokieli.css"])');var s='<section id="document-views" class="do"><h2>Views</h2>'+template.Icon[".fas.fa-magic"]+"<ul>";if(DO.C.GraphViewerAvailable){s+='<li><button class="resource-visualise" title="Change to graph view">Graph</button></li>'}s+='<li><button title="Change to native device/browser view">Native</button></li>';if(stylesheets.length>0){for(var i=0;i<stylesheets.length;i++){var stylesheet=stylesheets[i];var view=stylesheet.getAttribute("title");if(stylesheet.closest('[rel~="alternate"]')){s+='<li><button title="Change to ‘'+view+'’ view">'+view+"</button></li>"}else{s+='<li><button disabled="disabled" title="Current style">'+view+"</button></li>"}}}s+="</ul></section>";node.insertAdjacentHTML("beforeend",s);var viewButtons=document.querySelectorAll('#document-views.do button:not([class~="resource-visualise"])');for(var i=0;i<viewButtons.length;i++){viewButtons[i].removeEventListener("click",DO.U.initCurrentStylesheet);viewButtons[i].addEventListener("click",DO.U.initCurrentStylesheet)}if(DO.C.GraphViewerAvailable){document.querySelector("#document-views.do").addEventListener("click",function(e){if(e.target.closest(".resource-visualise")){if(document.querySelector("#graph-view")){return}if(e){e.target.disabled=true}document.documentElement.appendChild(util.fragmentFromString('<aside id="graph-view" class="do on">'+DO.C.Button.Close+"<h2>Graph view</h2></aside>"));var graphView=document.getElementById("graph-view");graphView.addEventListener("click",function(e){if(e.target.closest("button.close")){var rv=document.querySelector("#document-views .resource-visualise");if(rv){rv.disabled=false}}});var optionsNormalisation=DO.C.DOMNormalisation;delete optionsNormalisation["skipNodeWithClass"];DO.U.showVisualisationGraph(document.location.href,doc.getDocument(null,optionsNormalisation),"#graph-view")}})}},updateSelectedStylesheets:function(stylesheets,selected){var selected=selected.toLowerCase();for(var j=0;j<stylesheets.length;j++){(function(stylesheet){if(stylesheet.getAttribute("title").toLowerCase()!=selected){stylesheet.disabled=true;stylesheet.setAttribute("rel","stylesheet alternate")}})(stylesheets[j])}for(var j=0;j<stylesheets.length;j++){(function(stylesheet){if(stylesheet.getAttribute("title").toLowerCase()==selected){stylesheet.setAttribute("rel","stylesheet");stylesheet.disabled=false}})(stylesheets[j])}},initCurrentStylesheet:function(e){var currentStylesheet=DO.U.getCurrentLinkStylesheet();currentStylesheet=currentStylesheet?currentStylesheet.getAttribute("title"):"";var selected=e&&e.target?e.target.textContent.toLowerCase():currentStylesheet.toLowerCase();var stylesheets=document.querySelectorAll('head link[rel~="stylesheet"][title]:not([href$="dokieli.css"])');DO.U.updateSelectedStylesheets(stylesheets,selected);var bd=document.querySelectorAll("#document-views.do button");for(var j=0;j<bd.length;j++){bd[j].disabled=e&&e.target&&e.target.textContent==bd[j].textContent?true:false}DO.U.showRefs();if(selected=="shower"){var slides=document.querySelectorAll(".slide");for(var j=0;j<slides.length;j++){slides[j].classList.add("do")}document.body.classList.add("on-slideshow","list");document.querySelector("head").insertAdjacentHTML("beforeend",'<meta content="width=792, user-scalable=no" name="viewport" />');var body=document.body;var dMenu=document.querySelector("#document-menu.do");if(dMenu){var dMenuButton=dMenu.querySelector("button");var dHead=dMenu.querySelector("header");var dInfo=dMenu.querySelector("div");dMenuButton.classList.remove("show");dMenuButton.classList.add("hide");dMenuButton.setAttribute("title","Open Menu");dMenuButton.innerHTML=template.Icon[".fas.fa-minus"];dMenu.classList.remove("on");body.classList.remove("on-document-menu");var dMenuSections=dMenu.querySelectorAll("section");for(var j=0;j<dMenuSections.length;j++){dMenuSections[j].parentNode.removeChild(dMenuSections[j])}}var toc=document.getElementById("table-of-contents");toc=toc?toc.parentNode.removeChild(toc):false;shower.initRun()}if(currentStylesheet.toLowerCase()=="shower"){var slides=document.querySelectorAll(".slide");for(var c=0;c<slides.length;c++){slides[c].classList.remove("do")}document.body.classList.remove("on-slideshow","list","full");document.body.removeAttribute("style");var mV=document.querySelector('head meta[name="viewport"][content="width=792, user-scalable=no"]');mV=mV?mV.parentNode.removeChild(mV):false;history.pushState(null,null,window.location.pathname);shower.removeEvents()}},showEmbedData:function(e){if(document.querySelector("#embed-data-in-html")){return}e.target.setAttribute("disabled","disabled");var scriptCurrent=document.querySelectorAll('head script[id^="meta-"]');var scriptType={"meta-turtle":{scriptStart:'<script id="meta-turtle" title="Turtle" type="text/turtle">',cdataStart:"# "+DO.C.CDATAStart+"\n",cdataEnd:"\n# "+DO.C.CDATAEnd,scriptEnd:"<\/script>"},"meta-json-ld":{scriptStart:'<script id="meta-json-ld" title="JSON-LD" type="application/ld+json">',cdataStart:DO.C.CDATAStart+"\n",cdataEnd:"\n"+DO.C.CDATAEnd,scriptEnd:"<\/script>"},"meta-trig":{scriptStart:'<script id="meta-trig" title="TriG" type="application/trig">',cdataStart:"# "+DO.C.CDATAStart+"\n",cdataEnd:"\n# "+DO.C.CDATAEnd,scriptEnd:"<\/script>"}};var scriptCurrentData={};if(scriptCurrent.length>0){for(var i=0;i<scriptCurrent.length;i++){var v=scriptCurrent[i];var id=v.id;scriptCurrentData[id]=v.innerHTML.split(/\r\n|\r|\n/);scriptCurrentData[id].shift();scriptCurrentData[id].pop();scriptCurrentData[id]={type:v.getAttribute("type")||"",title:v.getAttribute("title")||"",content:scriptCurrentData[id].join("\n")}}}var embedMenu='<aside id="embed-data-entry" class="do on tabs">'+DO.C.Button.Close+'\n        <h2>Embed Data</h2>\n        <nav><ul><li class="selected"><a href="#embed-data-turtle">Turtle</a></li><li><a href="#embed-data-json-ld">JSON-LD</a></li><li><a href="#embed-data-trig">TriG</a></li></ul></nav>\n        <div id="embed-data-turtle" class="selected"><textarea placeholder="Enter data in Turtle" name="meta-turtle" cols="80" rows="24">'+(scriptCurrentData["meta-turtle"]?scriptCurrentData["meta-turtle"].content:"")+'</textarea><button class="save" title="Embed data into document">Save</button></div>\n        <div id="embed-data-json-ld"><textarea placeholder="Enter data in JSON-LD" name="meta-json-ld" cols="80" rows="24">'+(scriptCurrentData["meta-json-ld"]?scriptCurrentData["meta-json-ld"].content:"")+'</textarea><button class="save" title="Embed data into document">Save</button></div>\n        <div id="embed-data-trig"><textarea placeholder="Enter data in TriG" name="meta-trig" cols="80" rows="24">'+(scriptCurrentData["meta-trig"]?scriptCurrentData["meta-trig"].content:"")+'</textarea><button class="save" title="Embed data into document">Save</button></div>\n        </aside>';document.documentElement.appendChild(util.fragmentFromString(embedMenu));document.querySelector("#embed-data-turtle textarea").focus();var a=document.querySelectorAll("#embed-data-entry nav a");for(var i=0;i<a.length;i++){a[i].addEventListener("click",function(e){e.preventDefault();e.stopPropagation();var li=e.target.parentNode;if(!li.classList.contains("selected")){document.querySelector("#embed-data-entry nav li.selected").classList.remove("selected");li.classList.add("selected");document.querySelector("#embed-data-entry > div.selected").classList.remove("selected");var d=document.querySelector("#embed-data-entry > div"+e.target.hash);d.classList.add("selected");d.querySelector("textarea").focus()}})}document.querySelector("#embed-data-entry button.close").addEventListener("click",function(e){document.querySelector("button.embed-data-meta").removeAttribute("disabled")});var buttonSave=document.querySelectorAll("#embed-data-entry button.save");for(var i=0;i<buttonSave.length;i++){buttonSave[i].addEventListener("click",function(e){var textarea=e.target.parentNode.querySelector("textarea");var name=textarea.getAttribute("name");var scriptEntry=textarea.value;var script=document.getElementById(name);if(scriptEntry.length>0){if(script){var scriptContent=scriptType[name].cdataStart+scriptEntry+scriptType[name].cdataEnd;script.innerHTML=scriptContent}else{var scriptContent="  "+scriptType[name].scriptStart+scriptType[name].cdataStart+scriptEntry+scriptType[name].cdataEnd+scriptType[name].scriptEnd;document.querySelector("head").insertAdjacentHTML("beforeend",scriptContent)}}else{script.parentNode.removeChild(script)}var ede=document.getElementById("embed-data-entry");ede.parentNode.removeChild(ede);document.querySelector(".embed-data-meta").removeAttribute("disabled")})}},htmlEntities:function(s){return String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},showDocumentMetadata:function(node){if(document.querySelector("#document-metadata")){return}var content=doc.selectArticleNode(document);var count=DO.U.contentCount(content);var authors=[],contributors=[],editors=[];var citationsTo=[];var data=doc.getDocument();var subjectURI=window.location.origin+window.location.pathname;var options={contentType:"text/html",subjectURI:subjectURI};var s=DO.C.ResourceInfo.graph;var triples=s._graph;var citations=Object.keys(DO.C.Citation).concat(DO.C.Vocab["schemacitation"]["@id"]);triples.forEach(function(t){var s=t.subject.nominalValue;var p=t.predicate.nominalValue;var o=t.object.nominalValue;if(citations.indexOf(p)>-1){citationsTo.push(t)}});citations='<tr class="citations"><th>Citations</th><td>'+citationsTo.length+"</td></tr>";var statements='<tr class="statements"><th>Statements</th><td>'+triples.length+"</td></tr>";var g=s.child(options["subjectURI"]);if(g.schemaeditor._array.length>0){g.schemaeditor.forEach(function(s){var label=DO.U.getResourceLabel(g.child(s));if(typeof label!=="undefined"){editors.push("<li>"+label+"</li>")}});if(editors.length>0){editors='<tr class="people"><th>Editors</th><td><ul class="editors">'+editors.join("")+"</ul></td></tr>"}}if(g.schemaauthor._array.length>0){g.schemaauthor.forEach(function(s){var label=DO.U.getResourceLabel(g.child(s));if(typeof label!=="undefined"){authors.push("<li>"+label+"</li>")}});if(authors.length>0){authors='<tr class="people"><th>Authors</th><td><ul class="authors">'+authors.join("")+"</ul></td></tr>"}}if(g.schemacontributor._array.length>0){g.schemacontributor.forEach(function(s){var label=DO.U.getResourceLabel(g.child(s));if(typeof label!=="undefined"){contributors.push("<li>"+label+"</li>")}});if(contributors.length>0){contributors='<tr class="people"><th>Contributors</th><td><ul class="contributors">'+contributors.join("")+"</ul></td></tr>"}}var data=authors+editors+contributors+citations+statements;var s='<section id="document-metadata" class="do"><table>\n            <caption>Document Metadata</caption>\n            <tbody>\n              '+data+"\n              <tr><th>Reading time</th><td>"+count.readingTime+" minutes</td></tr>\n              <tr><th>Characters</th><td>"+count.chars+"</td></tr>\n              <tr><th>Words</th><td>"+count.words+"</td></tr>\n              <tr><th>Bytes</th><td>"+count.bytes+"</td></tr>\n            </tbody>\n          </table></section>";node.insertAdjacentHTML("beforeend",s)},contentCount:function contentCount(c){var content=util.fragmentFromString(doc.domToString(c)).textContent.trim();var contentCount={readingTime:1,words:0,chars:0,lines:0,pages:{A4:1,USLetter:1},bytes:0};if(content.length>0){var lineHeight=c.ownerDocument.defaultView.getComputedStyle(c,null)["line-height"];var linesCount=Math.ceil(c.clientHeight/parseInt(lineHeight));contentCount={readingTime:Math.ceil(content.split(" ").length/200),words:content.match(/\S+/g).length,chars:content.length,lines:linesCount,pages:{A4:Math.ceil(linesCount/47),USLetter:Math.ceil(linesCount/63)},bytes:encodeURI(document.documentElement.outerHTML).split(/%..|./).length-1}}return contentCount},showDocumentItems:function(){var documentItems=document.getElementById("document-items");if(documentItems){documentItems.parentNode.removeChild(documentItems)}document.documentElement.appendChild(util.fragmentFromString('<aside id="document-items" class="do on">'+DO.C.Button.Close+"</aside>"));documentItems=document.getElementById("document-items");var sections=document.querySelectorAll('h1 ~ div > section:not([class~="slide"]):not([id^=table-of]):not([id^=list-of])');if(sections.length>0){DO.U.showListOfStuff(documentItems);DO.U.showTableOfContents(documentItems,sections);if(DO.C.SortableList&&DO.C.EditorEnabled){DO.U.sortToC()}}DO.U.showDocumentMetadata(documentItems)},showListOfStuff:function(node){if(!node){return}var disabledInput="",s=[];if(!DO.C.EditorEnabled){disabledInput=' disabled="disabled"'}Object.keys(DO.C.ListOfStuff).forEach(function(id){var checkedInput="";var label=DO.C.ListOfStuff[id].label;var selector=DO.C.ListOfStuff[id].selector;var item=document.getElementById(id);if(item){checkedInput=' checked="checked"'}s.push('<li><input id="l-o-s-'+id+'" type="checkbox"'+disabledInput+checkedInput+'/><label for="l-o-s-'+id+'">'+label+"</label></li>")});if(s.length>0){node.insertAdjacentHTML("beforeend",'<section id="list-of-stuff" class="do"><h2>List of Stuff</h2><ul>'+s.join("")+"</ul></section>");if(DO.C.EditorEnabled){document.getElementById("list-of-stuff").addEventListener("click",function(e){if(e.target.closest("input")){var id=e.target.id.slice(6);if(!e.target.getAttribute("checked")){DO.U.buildListOfStuff(id);e.target.setAttribute("checked","checked");window.location.hash="#"+id}else{var tol=document.getElementById(id);if(tol){tol.parentNode.removeChild(tol);doc.removeReferences()}e.target.removeAttribute("checked");window.history.replaceState(null,null,window.location.pathname)}}})}}},showTableOfContents:function(node,sections,options){options=options||{};var sortable=DO.C.SortableList&&DO.C.EditorEnabled?" sortable":"";if(!node){return}var toc='<section id="table-of-contents-i" class="do"'+sortable+"><h2>"+DO.C.ListOfStuff["table-of-contents"].label+'</h2><ol class="toc'+sortable+'">';toc+=DO.U.getListOfSections(sections,{sortable:DO.C.SortableList});toc+="</ol></section>";node.insertAdjacentHTML("beforeend",toc)},sortToC:function(){},getListOfSections:function(sections,options){options=options||{};var s="",attributeClass="";if(options.sortable==true){attributeClass=' class="sortable"'}for(var i=0;i<sections.length;i++){var section=sections[i];if(section.id){var heading=section.querySelector("h1, h2, h3, h4, h5, h6, header h1, header h2, header h3, header h4, header h5, header h6")||{textContent:section.id};var currentHash="";var dataId=' data-id="'+section.id+'"';if(!options.raw){currentHash=document.location.hash=="#"+section.id?' class="selected"':"";attributeClass=""}if(heading){s+="<li"+currentHash+dataId+'><a href="#'+section.id+'">'+heading.textContent+"</a>";var subsections=section.parentNode.querySelectorAll('[id="'+section.id+'"] > div > section[rel*="hasPart"]:not([class~="slide"]), [id="'+section.id+'"] > section[rel*="hasPart"]:not([class~="slide"])');if(subsections.length>0){s+="<ol"+attributeClass+">";s+=DO.U.getListOfSections(subsections,options);s+="</ol>"}s+="</li>"}}}return s},buildListOfStuff:function(id){var s="";if(id=="references"){doc.buildReferences()}else{var label=DO.C.ListOfStuff[id].label;var selector=DO.C.ListOfStuff[id].selector;var titleSelector=DO.C.ListOfStuff[id].titleSelector;var nodes=document.querySelectorAll('section:not([class~="do"]) '+selector);if(id=="table-of-contents"||nodes.length>0){var tId=document.getElementById(id);if(tId){tId.parentNode.removeChild(tId)}if(id=="list-of-abbreviations"){s+='<section id="'+id+'">';s+="<h2>"+label+"</h2>";s+="<div><dl>"}else if(id=="list-of-quotations"){s+='<section id="'+id+'">';s+="<h2>"+label+"</h2>";s+="<div><ul>"}else{s+='<nav id="'+id+'">';s+="<h2>"+label+"</h2>";s+='<div><ol class="toc">'}if(id=="table-of-contents"){s+=DO.U.getListOfSections(document.querySelectorAll('h1 ~ div > section:not([class~="slide"])'),{raw:true})}else{if(id=="list-of-abbreviations"){if(nodes.length>0){nodes=[].slice.call(nodes);nodes.sort(function(a,b){return a.textContent.toLowerCase().localeCompare(b.textContent.toLowerCase())})}var processed=[];for(var i=0;i<nodes.length;i++){if(processed.indexOf(nodes[i].textContent)<0){s+="<dt>"+nodes[i].textContent+"</dt>";s+="<dd>"+nodes[i].getAttribute(titleSelector)+"</dd>";processed.push(nodes[i].textContent)}}}else{var processed=[];for(var i=0;i<nodes.length;i++){var title,textContent;if(id=="list-of-quotations"){title=nodes[i].getAttribute(titleSelector)}else{title=nodes[i].querySelector(titleSelector)}if(title){if(id=="list-of-quotations"){textContent=doc.removeSelectorFromNode(nodes[i],".do").textContent}else{textContent=doc.removeSelectorFromNode(title,".do").textContent}if(processed.indexOf(textContent)<0){if(id=="list-of-quotations"){s+="<li><q>"+textContent+'</q>, <a href="'+title+'">'+title+"</a></li>"}else if(nodes[i].id){s+='<li><a href="#'+nodes[i].id+'">'+textContent+"</a></li>"}else{s+="<li>"+textContent+"</li>"}processed.push(textContent)}}}}}if(id=="list-of-quotations"){s+="</ul></div>";s+="</section>"}else if(id=="list-of-abbreviations"){s+="</dl></div>";s+="</section>"}else{s+="</ol></div>";s+="</nav>"}}}doc.insertDocumentLevelHTML(document,s,{id:id})},eventEscapeDocumentMenu:function(e){if(e.keyCode==27){DO.U.hideDocumentMenu(e)}},eventLeaveDocumentMenu:function(e){if(!e.target.closest(".do.on")){DO.U.hideDocumentMenu(e)}},updateDocumentTitle:function(e){var h1=document.querySelector("h1");if(h1){document.title=h1.textContent.trim()}},utf8Tob64:function(s){return window.btoa(encodeURIComponent(s))},b64Toutf8:function(s){return unescape(decodeURIComponent(window.atob(s)))},getSelectorSign:function(node){if(!node){return DO.C.SelectorSign["*"]}if(typeof node==="object"){var nodeName=node.nodeName.toLowerCase();var nodeId="";if(node.id){switch(nodeName){default:break;case"section":case"dl":nodeId="#"+node.id;break}}return DO.C.SelectorSign[nodeName+nodeId]||DO.C.SelectorSign[nodeName]||DO.C.SelectorSign["*"]}return DO.C.SelectorSign["*"]},showFragment:function(selector){var ids=selector?document.querySelectorAll(selector):document.querySelectorAll("main *[id]:not(input):not(textarea):not(select):not(#content)");for(var i=0;i<ids.length;i++){ids[i].addEventListener("mouseenter",function(e){var fragment=document.querySelector('*[id="'+e.target.id+'"] > .do.fragment');if(!fragment&&e.target.parentNode.nodeName.toLowerCase()!="aside"){sign=DO.U.getSelectorSign(e.target);e.target.insertAdjacentHTML("afterbegin",'<span class="do fragment"><a href="#'+e.target.id+'">'+sign+"</a></span>");fragment=document.querySelector('[id="'+e.target.id+'"] > .do.fragment');var fragmentClientWidth=fragment.clientWidth;var fragmentOffsetLeft=DO.U.getOffset(e.target).left;var bodyOffsetLeft=DO.U.getOffset(document.body).left;var offsetLeft=0;if(fragmentOffsetLeft-bodyOffsetLeft>200){offsetLeft=e.target.offsetLeft}fragment.style.top=Math.ceil(e.target.offsetTop)+"px";fragment.style.left=offsetLeft-fragmentClientWidth+"px";fragment.style.height=e.target.clientHeight+"px";fragment.style.width=fragmentClientWidth-10+"px"}});ids[i].addEventListener("mouseleave",function(e){var fragment=document.querySelector('[id="'+e.target.id+'"] > .do.fragment');if(fragment&&fragment.parentNode){fragment.parentNode.removeChild(fragment)}})}},getOffset:function(el){var box=el.getBoundingClientRect();return{top:box.top+window.pageYOffset-document.documentElement.clientTop,left:box.left+window.pageXOffset-document.documentElement.clientLeft}},exportAsHTML:function(){var data=doc.getDocument();var blob=new Blob([data],{type:"text/html;charset=utf-8"});var pattern=/[^\w]+/gi;var h1=document.querySelector("h1");var title=h1?h1.textContent.toLowerCase().replace(pattern,"-"):"index";var timestamp=util.getDateTimeISO().replace(pattern,"")||"now";var fileName=title+"."+timestamp+".html";var a=document.createElement("a");a.download=fileName;a.href=window.URL.createObjectURL(blob);a.style.display="none";document.body.appendChild(a);a.click();document.body.removeChild(a)},showRobustLinks:function(e,selector){if(e){e.target.closest("button").disabled=true}var robustLinks=selector||document.querySelectorAll('cite > a[href^="http"][data-versionurl][data-versiondate]');document.documentElement.appendChild(util.fragmentFromString('<aside id="robustify-links" class="do on">'+DO.C.Button.Close+'<h2>Robustify Links</h2><div id="robustify-links-input"><p><input id="robustify-links-select-all" type="checkbox" value="true"/><label for="robustify-links-select-all">Select all</label></p><p><input id="robustify-links-reuse" type="checkbox" value="true" checked="checked"/><label for="robustify-links-reuse">Reuse Robustifed</label></p><ul id="robustify-links-list"></ul></div><button class="robustify" title="Robustify Links">Robustify</button></aside>'));var robustLinksUnique={};robustLinks.forEach(function(i){if(!robustLinksUnique[i.href]){robustLinksUnique[i.href]={node:i,"data-versionurl":i.getAttribute("data-versionurl"),"data-versiondate":i.getAttribute("data-versiondate")}}else{}});var rlCandidates=document.querySelectorAll('cite > a[href^="http"]:not([data-versionurl]):not([data-versiondate])');var rlInput=document.querySelector("#robustify-links-input");rlInput.insertAdjacentHTML("afterbegin",'<p class="count"><data>'+rlCandidates.length+"</data> candidates.</p>");var rlUL=document.querySelector("#robustify-links-list");rlCandidates.forEach(function(i){var html='<li><input id="'+i.href+'" type="checkbox" value="'+i.href+'" /> <label for="'+i.href+'"><a href="'+i.href+'" target="_blank" title="'+i.textContent+'">'+i.href+"</a></label>";html+="</li>";rlUL.insertAdjacentHTML("beforeend",html)});var robustifyLinks=document.getElementById("robustify-links");robustifyLinks.addEventListener("click",function(e){if(e.target.closest("button.close")){var rs=document.querySelector("#document-do .robustify-links");if(rs){rs.disabled=false}}if(e.target.closest("button.robustify")){e.target.disabled=true;var rlChecked=document.querySelectorAll("#robustify-links-list input:checked");var promises=[];rlChecked.forEach(function(i){var options={};options["showRobustLinksDecoration"]=false;options["showActionMessage"]=false;var node=document.querySelector('cite > a[href="'+i.value+'"]:not([data-versionurl]):not([data-versiondate])');i.parentNode.insertAdjacentHTML("beforeend",'<span class="progress" data-to="'+i.value+'">'+template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"]+"</span>");var progress=document.querySelector('#robustify-links-list .progress[data-to="'+i.value+'"]');var robustLinkFound=false;var robustifyLinksReuse=document.querySelector("#robustify-links-reuse");if(robustifyLinksReuse.checked){Object.keys(robustLinksUnique).forEach(function(url){if(i.value==url){progress.innerHTML='<a href="'+robustLinksUnique[url]["data-versionurl"]+'" target="_blank">'+template.Icon[".fas.fa-archive"]+"</a>";node.setAttribute("data-versionurl",robustLinksUnique[url]["data-versionurl"]);node.setAttribute("data-versiondate",robustLinksUnique[url]["data-versiondate"]);doc.showRobustLinksDecoration(node.closest("cite"));robustLinkFound=true}})}if(!robustLinkFound){DO.U.createRobustLink(i.value,node,options).then(function(rl){var versionURL="data-versionurl"in rl?rl["data-versionurl"]:rl.href;if("data-versionurl"in rl&&"data-versiondate"in rl){robustLinksUnique[i.value]={node:node,"data-versionurl":rl["data-versionurl"],"data-versiondate":rl["data-versiondate"]}}progress.innerHTML='<a href="'+versionURL+'" target="_blank">'+template.Icon[".fas.fa-archive"]+"</a>";doc.showRobustLinksDecoration(node.closest("cite"))}).catch(function(r){progress.innerHTML=template.Icon[".fas.fa-times-circle"]+" Unable to archive. Try later."})}e.target.disabled=false})}if(e.target.closest("#robustify-links-select-all")){var rlInput=document.querySelectorAll("#robustify-links-list input");if(e.target.checked){rlInput.forEach(function(i){i.setAttribute("checked","checked");i.checked=true})}else{rlInput.forEach(function(i){i.removeAttribute("checked");i.checked=false})}}if(e.target.closest("#robustify-links-list input")){if(e.target.getAttribute("checked")){e.target.removeAttribute("checked")}else{e.target.setAttribute("checked","checked")}}})},createRobustLink:function(uri,node,options){return DO.U.snapshotAtEndpoint(undefined,uri,"https://web.archive.org/save/","",{Accept:"*/*",showActionMessage:false}).then(function(r){if(r){var o={href:uri};var versionURL=r.location;if(typeof versionURL==="string"){var vD=versionURL.split("/")[4];if(vD){var versionDate=vD.substr(0,4)+"-"+vD.substr(4,2)+"-"+vD.substr(6,2)+"T"+vD.substr(8,2)+":"+vD.substr(10,2)+":"+vD.substr(12,2)+"Z";node.setAttribute("data-versionurl",versionURL);node.setAttribute("data-versiondate",versionDate);o["data-versionurl"]=versionURL;o["data-versiondate"]=versionDate}}options["showActionMessage"]="showActionMessage"in options?options.showActionMessage:true;if(options.showActionMessage){doc.showActionMessage(document.documentElement,'<p>Archived <a href="'+uri+'">'+uri+'</a> at <a href="'+versionURL+'">'+versionURL+"</a> and created RobustLink.</p>")}if(options.showRobustLinksDecoration){doc.showRobustLinksDecoration()}return o}else{return Promise.reject()}})},snapshotAtEndpoint:function snapshotAtEndpoint(e,iri,endpoint,noteData,options={}){iri=iri||window.location.origin+window.location.pathname;endpoint=endpoint||"https://pragma.archivelab.org/";options.noCredentials=true;var progress,svgFail,messageArchivedAt;options["showActionMessage"]="showActionMessage"in options?options.showActionMessage:true;var svgFail=template.Icon[".fas.fa-times-circle.fa-fw"];var messageArchivedAt=template.Icon[".fas.fa-archive"]+" Archived at ";var responseMessages={403:svgFail+" Archive unavailable. Please try later.",504:svgFail+" Archive timeout. Please try later."};if(options.showActionMessage){var button=e.target.closest("button");if(typeof e!=="undefined"&&button){if(button.disabled){return}else{button.disabled=true}var archiveNode=button.parentNode;archiveNode.insertAdjacentHTML("beforeend",' <span class="progress">'+template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"]+" Archiving in progress.</span>")}progress=archiveNode.querySelector(".progress")}var handleError=function(response){if(options.showActionMessage){progress.innerHTML=responseMessages[response.status]}return Promise.reject(responseMessages[response.status])};var handleSuccess=function(o){if(options.showActionMessage){progress.innerHTML=messageArchivedAt+'<a target="_blank" href="'+o.location+'">'+o.location+"</a>"}return Promise.resolve(o)};var checkLinkHeader=function(response){var link=response.headers.get("Link");if(link&&link.length>0){var rels=fetcher.parseLinkHeader(link);if("memento"in rels&&rels.memento.length>0){var o={response:response,location:rels.memento[0]};return handleSuccess(o)}}return handleError(response)};switch(endpoint){case"https://web.archive.org/save/":var headers={Accept:"*/*"};var pIRI=endpoint+iri;pIRI=DO.C.WebExtension?pIRI:uri.getProxyableIRI(pIRI,{forceProxy:true});return fetcher.getResource(pIRI,headers,options).then(response=>{let location=response.headers.get("Content-Location");if(location&&location.length>0){if(location.startsWith("/web/")){var o={response:response,location:"https://web.archive.org"+location};return handleSuccess(o)}else{return response.text().then(data=>{var regexp=/var redirUrl = "([^"]*)";/;var match=data.match(regexp);if(match&&match[1].startsWith("/web/")){var o={response:response,location:"https://web.archive.org"+match[1]};return handleSuccess(o)}else{return checkLinkHeader(response)}})}}else{return checkLinkHeader(response)}}).catch(response=>{return handleError(response)});case"https://pragma.archivelab.org/":default:noteData=noteData||{url:iri,annotation:{"@context":"http://www.w3.org/ns/anno.jsonld","@type":"Annotation",motivation:"linking",target:iri,rights:"https://creativecommons.org/publicdomain/zero/1.0/"}};if(DO.C.User.IRI){noteData.annotation["creator"]={};noteData.annotation.creator["@id"]=DO.C.User.IRI}if(DO.C.User.Name){noteData.annotation.creator["http://schema.org/name"]=DO.C.User.Name}if(DO.C.User.Image){noteData.annotation.creator["http://schema.org/image"]=DO.C.User.Image}if(DO.C.User.URL){noteData.annotation.creator["http://schema.org/url"]=DO.C.User.URL}if(!("contentType"in options)){options["contentType"]="application/json"}return fetcher.postResource(endpoint,"",JSON.stringify(noteData),options.contentType,null,options).then(response=>response.json()).then(response=>{if(response["wayback_id"]){let location="https://web.archive.org"+response.wayback_id;if(options.showActionMessage){progress.innerHTML=messageArchivedAt+'<a target="_blank" href="'+location+'">'+location+"</a>"}return{response:response,location:location}}else{if(options.showActionMessage){progress.innerHTML=responseMessages[response.status]}return Promise.reject(responseMessages[response.status])}}).catch(()=>{if(options.showActionMessage){progress.innerHTML=responseMessages[response.status]}})}},mementoDocument:function(e){if(typeof e!=="undefined"){var b=e.target.closest("button");if(b.disabled){return}else{b.disabled=true}}var iri=uri.stripFragmentFromString(document.location.href);var li=[];li.push('<li><button class="create-version"'+doc.getButtonDisabledHTML("create-version")+' title="Version this article">'+template.Icon[".fas.fa-code-branch.fa-2x"]+"Version</button></li>");li.push('<li><button class="create-immutable"'+doc.getButtonDisabledHTML("create-immutable")+' title="Make this article immutable and version it">'+template.Icon[".far.fa-snowflake.fa-2x"]+"Immutable</button></li>");li.push('<li><button class="robustify-links"'+doc.getButtonDisabledHTML("robustify-links")+' title="Robustify Links">'+template.Icon[".fas.fa-link.fa-2x"]+"Robustify Links</button></li>");li.push('<li><button class="snapshot-internet-archive"'+doc.getButtonDisabledHTML("snapshot-internet-archive")+' title="Capture with Internet Archive">'+template.Icon[".fas.fa-archive.fa-2x"]+"Internet Archive</button></li>");li.push('<li><button class="export-as-html"'+doc.getButtonDisabledHTML("export-as-html")+' title="Export and save to file">'+template.Icon[".fas.fa-external-link-alt.fa-2x"]+"Export</button></li>");e.target.closest("button").insertAdjacentHTML("afterend",'<ul id="memento-items" class="on">'+li.join("")+"</ul>");var mementoItems=document.getElementById("memento-items");doc.showTimeMap();mementoItems.addEventListener("click",function(e){if(e.target.closest("button.resource-save")||e.target.closest("button.create-version")||e.target.closest("button.create-immutable")){DO.U.resourceSave(e)}if(e.target.closest("button.export-as-html")){DO.U.exportAsHTML(e)}if(e.target.closest("button.robustify-links")){DO.U.showRobustLinks(e)}if(e.target.closest("button.snapshot-internet-archive")){DO.U.snapshotAtEndpoint(e,iri,"https://web.archive.org/save/","",{Accept:"*/*",showActionMessage:true})}})},showDocumentDo:function showDocumentDo(node){var documentDo=document.getElementById("document-do");if(documentDo){Object.keys(DO.C.ResourceInfo.buttonStates).forEach(function(id){var s=documentDo.querySelector("."+id);if(s){if(DO.C.ResourceInfo.buttonStates[id]){s.removeAttribute("disabled")}else{s.setAttribute("disabled","disabled")}}});return}var documentURL=uri.stripFragmentFromString(document.location.href);var buttonDisabled="";var s='<section id="document-do" class="do"><h2>Do</h2><ul>';s+='<li><button class="resource-share" title="Share resource">'+template.Icon[".fas.fa-bullhorn.fa-2x"]+"Share</button></li>";s+='<li><button class="resource-reply" title="Reply">'+template.Icon[".fas.fa-reply.fa-2x"]+"Reply</button></li>";buttonDisabled=DO.C.User.IRI?"":' disabled="disabled"';var activitiesIcon=template.Icon[".fas.fa-bolt.fa-2x"];if(DO.C.User["ContactsOutboxChecked"]){activitiesIcon=template.Icon[".fas.fa-circle.fa-2x"];buttonDisabled=' disabled="disabled"'}s+='<li><button class="resource-activities"'+buttonDisabled+' title="Show activities">'+activitiesIcon+"Activities</button></li>";s+='<li><button class="resource-new" title="Create new article">'+template.Icon[".far.fa-lightbulb.fa-2x"]+"New</button></li>";s+='<li><button class="resource-open" title="Open article">'+template.Icon[".fas.fa-coffee.fa-2x"]+"Open</button></li>";buttonDisabled=DO.U.accessModeAllowed("write")?"":' disabled="disabled"';buttonDisabled=document.location.protocol==="file:"?' disabled="disabled"':buttonDisabled;s+='<li><button class="resource-save"'+buttonDisabled+' title="Save article">'+template.Icon[".fas.fa-life-ring.fa-2x"]+"Save</button></li>";s+='<li><button class="resource-save-as"'+doc.getButtonDisabledHTML("resource-save-as")+' title="Save as article">'+template.Icon[".far.fa-paper-plane.fa-2x"]+"Save As</button></li>";s+='<li><button class="resource-memento" title="Memento article">'+template.Icon[".far.fa-clock.fa-2x"]+"Memento</button></li>";if(DO.C.EditorAvailable){var editFile=DO.C.EditorEnabled&&DO.C.User.Role=="author"?DO.C.Editor.DisableEditorButton:DO.C.Editor.EnableEditorButton;s+="<li>"+editFile+"</li>"}s+='<li><button class="resource-source" title="Edit article source code">'+template.Icon[".fas.fa-code.fa-2x"]+"Source</button></li>";s+='<li><button class="embed-data-meta" title="Embed structured data (Turtle, JSON-LD, TriG)">'+template.Icon[".fas.fa-table.fa-2x"]+"Embed Data</button></li>";if(DO.C.ResourceInfo["odrl"]&&DO.C.ResourceInfo["odrl"]["prohibitionAssignee"]==DO.C.User.IRI&&(DO.C.ResourceInfo["odrl"]["prohibitionActions"]&&DO.C.ResourceInfo["odrl"]["prohibitionActions"].indexOf("http://www.w3.org/ns/odrl/2/print")>-1||DO.C.ResourceInfo["odrl"]["permissionActions"]&&DO.C.ResourceInfo["odrl"]["permissionActions"].indexOf("http://www.w3.org/ns/odrl/2/print")>-1)){s+='<li><button class="resource-print"'+doc.getButtonDisabledHTML("resource-print")+' title="Print document">'+template.Icon[".fas.fa-print.fa-2x"]+"Print</button></li>"}s+="</ul></section>";node.insertAdjacentHTML("beforeend",s);var eD=node.querySelector(".editor-disable");if(eD){storage.showAutoSaveStorage(eD.closest("li"))}var dd=document.getElementById("document-do");dd.addEventListener("click",e=>{if(e.target.closest(".resource-share")){DO.U.shareResource(e)}if(e.target.closest(".resource-reply")){DO.U.replyToResource(e)}var b;if(DO.C.EditorAvailable){b=e.target.closest("button.editor-disable");var documentURL=uri.stripFragmentFromString(document.location.href);if(b){var node=b.closest("li");b.outerHTML=DO.C.Editor.EnableEditorButton;DO.U.Editor.enableEditor("social",e);storage.hideAutoSaveStorage(node.querySelector("#autosave-items"),documentURL)}else{b=e.target.closest("button.editor-enable");if(b){var node=b.closest("li");b.outerHTML=DO.C.Editor.DisableEditorButton;DO.U.Editor.enableEditor("author",e);storage.showAutoSaveStorage(node,documentURL)}}}if(e.target.closest(".resource-activities")){DO.U.showContactsActivities(e)}if(e.target.closest(".resource-new")){DO.U.createNewDocument(e)}if(e.target.closest(".resource-open")){DO.U.openDocument(e)}if(e.target.closest(".resource-source")){DO.U.viewSource(e)}if(e.target.closest(".embed-data-meta")){DO.U.showEmbedData(e)}if(e.target.closest(".resource-save")){DO.U.resourceSave(e)}if(e.target.closest(".resource-save-as")){DO.U.saveAsDocument(e)}if(e.target.closest(".resource-memento")){DO.U.mementoDocument(e)}if(e.target.closest(".resource-print")){window.print();return false}})},resourceSave:function(e,options){var url=window.location.origin+window.location.pathname;var data=doc.getDocument();options=options||{};doc.getResourceInfo(data,options).then(function(i){if(e.target.closest(".create-version")){doc.createMutableResource(url)}else if(e.target.closest(".create-immutable")){doc.createImmutableResource(url)}else if(e.target.closest(".resource-save")){doc.updateMutableResource(url)}})},replyToResource:function replyToResource(e,iri){iri=iri||fetcher.currentLocation();e.target.closest("button").disabled=true;document.documentElement.appendChild(util.fragmentFromString('<aside id="reply-to-resource" class="do on">'+DO.C.Button.Close+'<h2>Reply to this</h2><div id="reply-to-resource-input"><p>Reply to <code>'+iri+'</code></p><ul><li><p><label for="reply-to-resource-note">Quick reply (plain text note)</label></p><p><textarea id="reply-to-resource-note" rows="10" cols="40" name="reply-to-resource-note" placeholder="Great article!"></textarea></p></li><li><label for="reply-to-resource-language">Language</label> <select id="reply-to-resource-language" name="reply-to-resource-language">'+DO.U.getLanguageOptionsHTML()+'</select></li><li><label for="reply-to-resource-license">License</label> <select id="reply-to-resource-license" name="reply-to-resource-license">'+DO.U.getLicenseOptionsHTML()+"</select></li></ul></div>"));var replyToResource=document.getElementById("reply-to-resource");var id="location-reply-to";var action="write";DO.U.setupResourceBrowser(replyToResource,id,action);document.getElementById(id).insertAdjacentHTML("afterbegin","<p>Choose a location to save your reply.</p>");replyToResource.insertAdjacentHTML("beforeend",'<p>Your reply will be saved at <samp id="'+id+"-"+action+'">https://example.org/path/to/article</samp></p>');var bli=document.getElementById(id+"-input");bli.focus();bli.placeholder="https://example.org/path/to/article";replyToResource.insertAdjacentHTML("beforeend",'<button class="reply" title="Send your reply">Send</button>');replyToResource.addEventListener("click",e=>{if(e.target.closest("button.close")){document.querySelector("#document-do .resource-reply").disabled=false}if(e.target.closest("button.reply")){var note=document.querySelector("#reply-to-resource #reply-to-resource-note").value.trim();var rm=replyToResource.querySelector(".response-message");if(rm){rm.parentNode.removeChild(rm)}}replyToResource.insertAdjacentHTML("beforeend",'<div class="response-message"></div>');if(!iri||!note){document.querySelector("#reply-to-resource .response-message").innerHTML='<p class="error">Need a note and a location to save it.</p>';return}var datetime=util.getDateTimeISO();var attributeId=util.generateAttributeId();var noteIRI=document.querySelector("#reply-to-resource #"+id+"-"+action).innerText.trim();var motivatedBy="oa:replying";var noteData={type:"article",mode:"write",motivatedByIRI:motivatedBy,id:attributeId,creator:{},datetime:datetime,target:{iri:iri},body:note,language:{},license:{}};if(DO.C.User.IRI){noteData.creator["iri"]=DO.C.User.IRI}if(DO.C.User.Name){noteData.creator["name"]=DO.C.User.Name}if(DO.C.User.Image){noteData.creator["image"]=DO.C.User.Image}if(DO.C.User.URL){noteData.creator["url"]=DO.C.User.URL}var language=document.querySelector("#reply-to-resource-language");if(language&&language.length>0){noteData.language["code"]=language.value.trim()}var license=document.querySelector("#reply-to-resource-license");if(license&&license.length>0){noteData.license["iri"]=license.value.trim();noteData.license["name"]=DO.C.License[license.value.trim()].name}var note=DO.U.createNoteDataHTML(noteData);var data=doc.createHTML("",note);fetcher.putResource(noteIRI,data).catch(error=>{console.log("Could not save reply:");console.error(error);let message;switch(error.status){case 0:case 405:message="this location is not writable.";break;case 401:message="you are not authorized.";if(!DO.C.User.IRI){message+=" Try signing in."}break;case 403:message="you do not have permission to write here.";break;case 406:message="enter a name for your resource.";break;default:message=error.message;break}throw new Error("Cannot save your reply: ",message)}).then(response=>{replyToResource.querySelector(".response-message").innerHTML='<p class="success"><a target="_blank" href="'+response.url+'">Reply saved!</a></p>';return fetcher.getLinkRelation(DO.C.Vocab["ldpinbox"]["@id"]).catch(error=>{console.error("Could not fetch inbox endpoint:",error);throw new Error("Could not determine the author inbox endpoint")})}).then(inboxes=>{if(!inboxes){throw new Error("Author inbox endpoint is empty or missing")}var inboxURL=inboxes[0];let notificationStatements='    <dl about="'+noteIRI+'">\n<dt>Object type</dt><dd><a about="'+noteIRI+'" typeof="oa:Annotation" href="'+DO.C.Vocab["oaAnnotation"]["@id"]+'">Annotation</a></dd>\n<dt>Motivation</dt><dd><a href="'+DO.C.Prefixes[motivatedBy.split(":")[0]]+motivatedBy.split(":")[1]+'" property="oa:motivation">'+motivatedBy.split(":")[1]+"</a></dd>\n</dl>\n";let notificationData={type:["as:Announce"],inbox:inboxURL,object:noteIRI,target:iri,license:noteData.license["iri"],statements:notificationStatements};return inbox.notifyInbox(notificationData).catch(error=>{console.error("Failed sending notification to "+inboxURL+" :",error);throw new Error("Failed sending notification to author inbox")})}).then(response=>{var notificationSent="Notification sent";var location=response.headers.get("Location");if(location){notificationSent='<a target="_blank" href="'+location.trim()+'">'+notificationSent+"</a>!"}else{notificationSent=notificationSent+", but location unknown."}replyToResource.querySelector(".response-message").innerHTML+='<p class="success">'+notificationSent+"</p>"}).catch(error=>{replyToResource.querySelector(".response-message").innerHTML+='<p class="error">'+"We could not notify the author of your reply:"+error.message+"</p>"})})},shareResource:function shareResource(e,iri){iri=iri||fetcher.currentLocation();if(e){e.target.disabled=true}var addContactsButtonDisable="",noContactsText="";if(!DO.C.User.IRI&&!(DO.C.User.Graph&&(DO.C.User.Knows&&DO.C.User.Knows.length>0||DO.C.User.Graph.owlsameAs&&DO.C.User.Graph.owlsameAs._array.length>0))){addContactsButtonDisable=' disabled="disabled"';noContactsText="<p>Sign in to select from your list of contacts, alternatively, enter contacts individually:</p>"}var shareResourceLinkedResearch="";if(DO.C.User.IRI&&DO.C.OriginalResourceInfo["rdftype"]&&DO.C.OriginalResourceInfo.rdftype.indexOf(DO.C.Vocab["schemaScholarlyArticle"]["@id"])>-1){shareResourceLinkedResearch='<li><input id="share-resource-linked-research" type="checkbox" value="https://linkedresearch.org/cloud" /><label for="share-resource-linked-research">Notify <a href="https://linkedresearch.org/cloud">Linked Open Research Cloud</a></label></li>'}document.documentElement.appendChild(util.fragmentFromString('<aside id="share-resource" class="do on">'+DO.C.Button.Close+'<h2>Share resource</h2><div id="share-resource-input"><p>Send a notification about <code>'+iri+'</code></p><ul><li id="share-resource-address-book"></li>'+shareResourceLinkedResearch+'<li><label for="share-resource-to">To</label> <textarea id="share-resource-to" rows="2" cols="40" name="share-resource-to" placeholder="WebID or article IRI (one per line)"></textarea></li><li><label for="share-resource-note">Note</label> <textarea id="share-resource-note" rows="2" cols="40" name="share-resource-note" placeholder="Check this out!"></textarea></li></ul></div><button class="share" title="Share resource">Share</button></aside>'));var li=document.getElementById("share-resource-address-book");if(DO.C.User.Contacts&&Object.keys(DO.C.User.Contacts).length>0){DO.U.selectContacts(li,DO.C.User.IRI)}else{li.insertAdjacentHTML("beforeend",'<button class="add"'+addContactsButtonDisable+' title="Add and select contacts from your profile">'+template.Icon[".far.fa-address-book"]+" Add from contacts</button>"+noContactsText)}var shareResource=document.getElementById("share-resource");shareResource.addEventListener("click",function(e){if(e.target.closest("button.close")){var rs=document.querySelector("#document-do .resource-share");if(rs){rs.disabled=false}}if(DO.C.User.IRI&&e.target.closest("button.add")){e.preventDefault();e.stopPropagation();var li=e.target.closest("li");li.insertAdjacentHTML("beforeend",template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"]);DO.U.selectContacts(li,DO.C.User.IRI)}if(e.target.closest("button.share")){var tos=document.querySelector("#share-resource #share-resource-to").value.trim();tos=tos.length>0?tos.split(/\r\n|\r|\n/):[];var note=document.querySelector("#share-resource #share-resource-note").value.trim();var ps=document.querySelectorAll("#share-resource-contacts .progress");ps.forEach(function(p){p.parentNode.removeChild(p)});var srlr=document.querySelector("#share-resource-linked-research:checked");if(srlr){tos.push(srlr.value)}var srci=document.querySelectorAll("#share-resource-contacts input:checked");if(srci.length>0){for(var i=0;i<srci.length;i++){tos.push(srci[i].value)}}if(!iri){return}return inbox.sendNotifications(tos,note,iri,shareResource)}})},selectContacts:function(node,url){node.innerHTML='<p>Select from contacts</p><ul id="share-resource-contacts"></ul>';var shareResourceNode=document.getElementById("share-resource-contacts");if(DO.C.User.Contacts&&Object.keys(DO.C.User.Contacts).length>0){Object.keys(DO.C.User.Contacts).forEach(function(iri){if(DO.C.User.Contacts[iri].Inbox){DO.U.addShareResourceContactInput(shareResourceNode,DO.C.User.Contacts[iri].Graph)}})}else{DO.U.updateContactsInfo(url,{addShareResourceContactInput:shareResourceNode})}},updateContactsInfo:function(url,options){options=options||{};return auth.getUserContacts(url).then(function(contacts){if(contacts.length>0){var promises=[];var gC=function(url){return fetcher.getResourceGraph(url).then(i=>{var s=i.child(url);DO.C.User.Contacts[url]={};DO.C.User.Contacts[url]["Graph"]=s;var uCA=function(url,s){var outbox=DO.C.User.Contacts[url]["Outbox"]=auth.getAgentOutbox(s);var storage=DO.C.User.Contacts[url]["Storage"]=auth.getAgentStorage(s);if("showActivitiesSources"in options){if(storage&&storage.length>0){if(outbox&&outbox.length>0){if(storage[0]==outbox[0]){DO.U.showActivitiesSources(outbox[0])}else{DO.U.showActivitiesSources(storage[0]);DO.U.showActivitiesSources(outbox[0])}}else{DO.U.showActivitiesSources(storage[0])}}else if(outbox&&outbox.length>0){DO.U.showActivitiesSources(outbox[0])}}return Promise.resolve()};var uCI=function(url,s){return DO.U.updateContactsInbox(url,s).then(()=>{if("addShareResourceContactInput"in options){DO.U.addShareResourceContactInput(options.addShareResourceContactInput,s)}return Promise.resolve()}).catch(()=>{})};if("showActivitiesSources"in options){uCI(url,s);return uCA(url,s)}else if("addShareResourceContactInput"in options){uCA(url,s);return uCI(url,s)}}).catch(err=>{return Promise.resolve()})};contacts.forEach(function(url){promises.push(gC(url))});DO.C.User["ContactsOutboxChecked"]=true;return Promise.all(promises)}else{if("addShareResourceContactInput"in options){options.addShareResourceContactInput.innerHTML="No contacts with "+template.Icon[".fas.fa-inbox"]+" inbox found in your profile, but you can enter contacts individually:"}return Promise.resolve()}},function(reason){console.log(reason)})},addShareResourceContactInput:function(node,s){var iri=s.iri().toString();var id=encodeURIComponent(iri);var name=auth.getAgentName(s)||iri;var img=auth.getAgentImage(s);img=img&&img.length>0?'<img alt="" height="32" src="'+img+'" width="32" />':"";var input='<li><input id="share-resource-contact-'+id+'" type="checkbox" value="'+iri+'" /><label for="share-resource-contact-'+id+'">'+img+'<a href="'+iri+'" target="_blank">'+name+"</a></label></li>";node.insertAdjacentHTML("beforeend",input)},updateContactsInbox:function(iri,s){var checkInbox=function(s){var aI=auth.getAgentInbox(s);if(aI){return Promise.resolve(aI)}else{return fetcher.getLinkRelationFromHead(DO.C.Vocab["ldpinbox"]["@id"],iri).then(function(i){return i},function(reason){return fetcher.getLinkRelationFromHead(DO.C.Vocab["asinbox"]["@id"],iri)})}};return checkInbox(s).then(inboxes=>{DO.C.User.Contacts[iri]["Inbox"]=inboxes})},nextLevelButton:function(button,url,id,action){var actionNode=document.getElementById(id+"-"+action);button.addEventListener("click",function(){if(button.parentNode.classList.contains("container")){var headers;headers={Accept:"text/turtle, application/ld+json"};fetcher.getResourceGraph(url,headers).then(function(g){actionNode.textContent=action=="write"?url+util.generateAttributeId():url;return DO.U.generateBrowserList(g,url,id,action)},function(reason){var inputBox=document.getElementById(id);var statusCode="status"in reason?reason.status:0;statusCode=typeof statusCode==="string"?parseInt(reason.slice(-3)):statusCode;var msgs=inputBox.querySelectorAll(".response-message");for(var i=0;i<msgs.length;i++){msgs[i].parentNode.removeChild(msgs[i])}switch(statusCode){default:inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">Unable to access ('+reason.statusText+").</p>");break;case 404:inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">Not found.</p></div>');break;case 401:var msg="You are not authorized.";if(!DO.C.User.IRI){msg+=" Try signing in."}inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+msg+"</p></div>");break;case 403:var msg="You don't have permission to access this location.";inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+msg+"</p></div>");break}})}else{document.getElementById(id+"-input").value=url;var alreadyChecked=button.parentNode.querySelector('input[type="radio"]').checked;var radios=button.parentNode.parentNode.querySelectorAll('input[checked="true"]');actionNode.textContent=url;for(var i=0;i<radios.length;i++){radios[i].removeAttribute("checked")}if(alreadyChecked){button.parentNode.querySelector('input[type="radio"]').removeAttribute("checked")}else{button.parentNode.querySelector('input[type="radio"]').setAttribute("checked","true")}}},false)},generateBrowserList:function(g,url,id,action){return new Promise(function(resolve,reject){document.getElementById(id+"-input").value=url;var msgs=document.getElementById(id).querySelectorAll(".response-message");for(var i=0;i<msgs.length;i++){msgs[i].parentNode.removeChild(msgs[i])}var list=document.getElementById(id+"-ul");list.innerHTML="";var urlPath=url.split("/");if(urlPath.length>4){urlPath.splice(-2,2);var prevUrl=uri.forceTrailingSlash(urlPath.join("/"));var upBtn='<li class="container"><input type="radio" name="containers" value="'+prevUrl+'" id="'+prevUrl+'" /><label for="'+prevUrl+'" id="browser-up">..</label></li>';list.insertAdjacentHTML("afterbegin",upBtn)}var current=g.child(url);var contains=current.ldpcontains;var containersLi=Array();var resourcesLi=Array();contains.forEach(function(c){var cg=g.child(c);var types=cg.rdftype;var resourceTypes=[];types.forEach(function(type){resourceTypes.push(type)});var path=c.split("/");if(resourceTypes.indexOf("http://www.w3.org/ns/ldp#Container")>-1||resourceTypes.indexOf("http://www.w3.org/ns/ldp#BasicContainer")>-1){var slug=path[path.length-2];containersLi.push('<li class="container"><input type="radio" name="resources" value="'+c+'" id="'+slug+'"/><label for="'+slug+'">'+slug+"</label></li>")}else{var slug=path[path.length-1];resourcesLi.push('<li><input type="radio" name="resources" value="'+c+'" id="'+slug+'"/><label for="'+slug+'">'+slug+"</label></li>")}});containersLi.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())});resourcesLi.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())});var liHTML=containersLi.join("\n")+resourcesLi.join("\n");list.insertAdjacentHTML("beforeend",liHTML);var buttons=list.querySelectorAll("label");if(buttons.length<=1){list.insertAdjacentHTML("beforeend","<p><em>(empty)</em></p>")}for(var i=0;i<buttons.length;i++){var nextUrl=buttons[i].parentNode.querySelector("input").value;DO.U.nextLevelButton(buttons[i],nextUrl,id,action)}return resolve(list)})},accessModeAllowed:function(mode){var allowedMode=false;if("headers"in DO.C.ResourceInfo&&"wac-allow"in DO.C.ResourceInfo["headers"]&&"permissionGroup"in DO.C.ResourceInfo["headers"]["wac-allow"]){if("user"in DO.C.ResourceInfo["headers"]["wac-allow"]["permissionGroup"]&&DO.C.ResourceInfo["headers"]["wac-allow"]["permissionGroup"]["user"].indexOf(mode)>-1||"public"in DO.C.ResourceInfo["headers"]["wac-allow"]["permissionGroup"]&&DO.C.ResourceInfo["headers"]["wac-allow"]["permissionGroup"]["public"].indexOf(mode)>-1){allowedMode=true}}return allowedMode},showStorageDescription:function(s,id,storageUrl,checkAgain){var samp=document.getElementById(id+"-samp");var sD=document.getElementById(id+"-storage-description");if(samp&&!sD){var sDPromise=fetcher.getLinkRelation(DO.C.Vocab["solidstorageDescription"]["@id"],storageUrl);return sDPromise.then(sDURLs=>{if(sDURLs.length>0){var sDURL=sDURLs[0];DO.C.Storages=DO.C.Storages||{};DO.C.Storages[s.iri().toString()]={storageDescription:sDURL}}if(sD){sD.innerHTML=""}samp.insertAdjacentHTML("afterend",'<details id="'+id+'-storage-description-details"><summary>Storage details</summary></details>');sD=document.getElementById(id+"-storage-description-details");sD.addEventListener("click",function(e){if(!sD.open){var storageDescriptionNode=document.getElementById(id+"-storage-description");if(!storageDescriptionNode){var storageLocation='<dl id="storage-location"><dt>Storage location</dt><dd><a href="'+storageUrl+'" target="_blank">'+storageUrl+"</a></dd></dl>";fetcher.getResourceGraph(sDURL).then(function(g){g=g.foafprimaryTopic?g.child(g.foafprimaryTopic):g.child(storageUrl);var selfDescription=DO.U.getStorageSelfDescription(g);var contactInformation=DO.U.getContactInformation(g);var persistencePolicy=DO.U.getPersistencePolicy(g);var odrlPolicies=DO.U.getODRLPolicies(g);var communicationOptions=DO.U.getCommunicationOptions(g);sD.insertAdjacentHTML("beforeend",'<div id="'+id+'-storage-description">'+storageLocation+selfDescription+contactInformation+persistencePolicy+odrlPolicies+communicationOptions+"</div>")})}}})}).catch(error=>{})}},getStorageSelfDescription:function(g){var s="";var storageName=DO.U.getResourceLabel(g);var storageURL=g.iri().toString();storageName=typeof storageName!=="undefined"?storageName:storageURL;DO.C.Storages=DO.C.Storages||{};DO.C.Storages[g.iri().toString()]=DO.C.Storages[g.iri().toString()]||{};DO.C.Storages[g.iri().toString()]["title"]=storageName;DO.C.Storages[g.iri().toString()]["description"]=g.schemaabstract||g.dctermsdescription||g.rdfvalue||g.assummary||g.schemadescription||g.ascontent||undefined;var storageTitle='<dt>Storage name</dt><dd><a href="'+storageURL+'">'+storageName+"</a></dd>";var storageDescription=DO.C.Storages[g.iri().toString()]["description"]?"<dt>Storage description</dt><dd>"+DO.C.Storages[g.iri().toString()]["description"]+"</dd>":"";s='<dl id="storage-self-description">'+storageTitle+storageDescription+"</dl>";return s},getPersistencePolicy:function(g){var s="";if(g.pimpersistencePolicy&&g.pimpersistencePolicy._array.length>0){var pp=[];DO.C.Storages=DO.C.Storages||{};DO.C.Storages[g.iri().toString()]=DO.C.Storages[g.iri().toString()]||{};DO.C.Storages[g.iri().toString()]["persistencePolicy"]=[];g.pimpersistencePolicy.forEach(function(iri){DO.C.Storages[g.iri().toString()]["persistencePolicy"].push(iri);pp.push('<dd><a href="'+iri+'" target="_blank">'+iri+"</a></dd>")});s='<dl id="storage-persistence-policy"><dt>URI persistence policy</dt>'+pp.join("")+"</dl>"}return s},getODRLPolicies:function(g){var s="";var odrlPolicies=[];if(g.odrlhasPolicy&&g.odrlhasPolicy._array.length>0){g.odrlhasPolicy._array.forEach(function(iri){var policy=g.child(iri);var policyDetails=[];var target,ruleType,assigner,peAction,assignee,assigner,actions;var types=policy.rdftype._array;var indexPolicy=types.indexOf(DO.C.Vocab["odrlOffer"]["@id"])||types.indexOf(DO.C.Vocab["odrlAgreement"]["@id"]);if(indexPolicy>=0){var rule=types[indexPolicy];var ruleLabel=rule.substr(rule.lastIndexOf("/")+1);policyDetails.push('<dt>Rule<dt><dd><a href="'+rule+'" target="_blank">'+ruleLabel+"</a></dd>")}if(policy.odrluid&&policy.odrluid.at(0)){policyDetails.push('<dt>Unique identifier<dt><dd><a href="'+policy.odrluid+'" target="_blank">'+policy.odrluid+"</a></dd>")}if(policy.odrtarget&&policy.odrltarget.at(0)){policyDetails.push('<dt>Target<dt><dd><a href="'+policy.odrltarget+'" target="_blank">'+policy.odrltarget+"</a></dd>")}if(policy.odrlpermission&&policy.odrlpermission.at(0)){var ruleG=g.child(policy.odrlpermission.at(0));policyDetails.push(DO.U.getODRLRuleActions(ruleG));policyDetails.push(DO.U.getODRLRuleAssigners(ruleG));policyDetails.push(DO.U.getODRLRuleAssignees(ruleG))}if(policy.odrlprohibition&&policy.odrlprohibition.at(0)){var ruleG=g.child(policy.odrlprohibition.at(0));policyDetails.push(DO.U.getODRLRuleActions(ruleG));policyDetails.push(DO.U.getODRLRuleAssigners(ruleG));policyDetails.push(DO.U.getODRLRuleAssignees(ruleG))}var detail="<dl>"+policyDetails.join("")+"</dl>";odrlPolicies.push('<dd><details><summary><a href="'+iri+'" target="_blank">'+iri+"</a></summary>"+detail+"</details></dd>")});s='<dl id="odrl-policies"><dt>Policies</dt>'+odrlPolicies.join("")+"</dl>"}return s},getODRLRuleActions:function(r){var actions="";var uPPActions=[];if(DO.C.User.PreferencesGraph&&DO.C.User.PreferredPolicy){var uPG=DO.C.User.PreferencesGraph.child(DO.C.User.PreferredPolicy);if(uPG&&uPG.odrlprohibition&&uPG.odrlprohibition.at(0)){var pG=uPG.child(uPG.odrlprohibition.at(0));if(pG.odrlaction&&pG.odrlaction._array.length>0){uPPActions=pG.odrlaction._array}}}if(r.odrlaction&&r.odrlaction._array.length>0){var actions=[];r.odrlaction._array.forEach(function(iri){var label=iri;var href=iri;if(iri.startsWith("http://www.w3.org/ns/odrl/2/")){label=iri.substr(iri.lastIndexOf("/")+1);href="https://www.w3.org/TR/odrl-vocab/#term-"+label}else if(iri.lastIndexOf("#")){label=iri.substr(iri.lastIndexOf("#")+1)}else if(iri.lastIndexOf("/")){label=iri.substr(iri.lastIndexOf("/")+1)}var caution="";var htmlClass="";if(uPPActions.indexOf(iri)>-1){caution=template.Icon["fas.fa-circle-exclamation"]+" ";htmlClass=' class="warning"'}actions.push("<li>"+caution+"<a"+htmlClass+' href="'+href+'" resource="'+iri+'">'+label+"</a></li>")});actions='<dt>Actions</dt><dd><ul rel="odrl:action">'+actions.join("")+"</ul></dd>";return actions}},getODRLRuleAssigners:function(g){var s="";var a=[];if(g.odrlassigner&&g.odrlassigner._array.length>0){g.odrlassigner._array.forEach(function(iri){a.push('<dd><a href="'+iri+'" target="_blank">'+iri+"</a></dd>")});s="<dt>Assigners</dt>"+a.join("")}return s},getODRLRuleAssignees:function(g){var s="";var a=[];if(g.odrlassignee&&g.odrlassignee._array.length>0){g.odrlassignee._array.forEach(function(iri){a.push('<dd><a href="'+iri+'" target="_blank">'+iri+"</a></dd>")});s="<dt>Assignees</dt>"+a.join("")}return s},getContactInformation:function(g){var s="";var resourceOwners=[];if(g.solidowner&&g.solidowner._array.length>0){DO.C.Storages=DO.C.Storages||{};DO.C.Storages[g.iri().toString()]=DO.C.Storages[g.iri().toString()]||{};DO.C.Storages[g.iri().toString()]["owner"]=[];g.solidowner._array.forEach(function(iri){DO.C.Storages[g.iri().toString()]["owner"].push(iri);resourceOwners.push('<dd><a href="'+iri+'" target="_blank">'+iri+"</a></dd>")});s='<dl id="resource-owners"><dt>Owners</dt>'+resourceOwners.join("")+"</dl>"}return s},getCommunicationOptions:function(g){var s="";var resourceOwners=[];var notificationChannels=DO.U.getNotificationChannels(g);DO.C.Storages=DO.C.Storages||{};DO.C.Storages[g.iri().toString()]=DO.C.Storages[g.iri().toString()]||{};if(notificationChannels){DO.C.Storages[g.iri().toString()]["notificationChannels"]=DO.C.Storages[g.iri().toString()]["notificationChannels"]||{};var notificationChannelDetails=[];notificationChannels.forEach(function(notificationChannel){var notificationSubscriptionType="";var notificationSubscription="";var notificationFeatures="";DO.C.Storages[g.iri().toString()]["notificationChannels"][notificationChannel]=DO.C.Storages[g.iri().toString()]["notificationChannels"][notificationChannel]||{};var nC=g.child(notificationChannel);var types=nC.rdftype._array;if(types.indexOf(DO.C.Vocab["notifyWebSocketSubscription2021"]["@id"])>=0){DO.C.Storages[g.iri().toString()]["notificationChannels"][notificationChannel]["type"]="WebSocketSubscription2021";notificationSubscriptionType='<dt>Subscription Type</dt><dd><a about="'+notificationChannel+'" href="https://solidproject.org/TR/websocket-subscription-2021" target="_blank" typeof="notify:WebSocketSubscription2021">WebSocketSubscription2021</a></dd>'}if(nC.notifysubscription){DO.C.Storages[g.iri().toString()]["notificationChannels"][notificationChannel]["subscription"]=nC.notifysubscription;notificationSubscription='<dt>Subscription</dt><dd><a href="'+nC.notifysubscription+'" rel="notify:subscription" target="_blank">'+nC.notifysubscription+"</a></dd>"}if(nC.notifyfeature&&nC.notifyfeature._array.length>0){var nF=[];DO.C.Storages[g.iri().toString()]["notificationChannels"][notificationChannel]["feature"]=[];nC.notifyfeature._array.forEach(function(iri){var label=href=iri;DO.C.Storages[g.iri().toString()]["notificationChannels"][notificationChannel]["feature"].push(iri);switch(iri){case DO.C.Vocab["notifyexpiration"]["@id"]:case DO.C.Vocab["notifystate"]["@id"]:case DO.C.Vocab["notifyrate"]["@id"]:case DO.C.Vocab["notifyaccept"]["@id"]:label=uri.getFragmentFromString(iri);href="https://solidproject.org/TR/notifications-protocol#feature-"+label;break;default:break}nF.push('<li><a href="'+href+'" resource="'+iri+'" target="_blank">'+label+"</a></li>")});notificationFeatures='<dt>Features</dt><dd><ul rel="notify:feature">'+nF.join("")+"</ul></dd>"}notificationChannelDetails.push('<dd><details><summary><a href="'+notificationChannel+'" target="_blank">'+notificationChannel+"</a></summary><dl>"+notificationSubscriptionType+notificationSubscription+notificationFeatures+"</dl></details></dd>")});s='<dl id="notification-channels"><dt>Notification channels</dt>'+notificationChannelDetails.join("")+"</dl>"}return s},getNotificationChannels:function(s){return s.notifynotificationChannel&&s.notifynotificationChannel._array.length>0?s.notifynotificationChannel._array:undefined},subscribeToNotificationChannel:function(subscription,subscriptionType,topic){switch(subscriptionType){case DO.C.Vocab["notifyWebSocketSubscription2021"]["@id"]:return DO.C.subscribeToWebSocketSubscription(subscription,subscriptionType,topic,feature);break}},processNotificationSubscriptionResponse:function(response){var cT=response.headers.get("Content-Type");cT=cT.split(";")[0].trim();var rD=cT=="application/ld+json"?response.json():response.text();return rD.then(data=>{switch(cT){case"text/turtle":return Promise.reject({message:"TODO text/turtle",data:data});break;case"application/ld+json":if(data["@context"]&&data.type&&data.source){return Promise.resolve(data)}else{return Promise.reject({message:"Missing @context, type, source",data:data})}break;case"text/plain":return Promise.reject({message:"TODO text/plain?",data:data});break}})},subscribeToWebSocketSubscription:function(subscription,subscriptionType,topic,feature,options={}){if(!subscription||!subscriptionType||!topic){return Promise.reject()}options["contentType"]=options.contentType||"application/ld+json";var data;switch(options["contentType"]){case"text/turtle":data="<> a <http://www.w3.org/ns/solid/notifications#WebSocketSubscription2021> ;\n  <http://www.w3.org/ns/solid/notifications#topic> <"+topic+"> .";break;case"applicat/ld+json":data={"@context":["https://www.w3.org/ns/solid/notification/v1"],type:"WebSocketSubscription2021",topic:topic};data=JSON.stringify(data);break}return fetcher.postResource(subscription,"",data,options.contentType,null,options).then(DO.U.processNotificationSubscriptionResponse).catch(error=>{throw error}).then(data=>{switch(data.type){case DO.C.Vocab["notifyWebSocketSubscription2021"]["@id"]:return DO.U.connectToWebSocket(data.source,data.type);break}})},connectToWebSocket:function(url,type){function connect(){return new Promise(function(resolve,reject){var ws=new WebSocket(url,type);var message;ws.onopen=function(){message={message:"Connected to "+url+" ("+type+")."};console.log(message);resolve(ws)};ws.onclose=function(e){message={message:"Socket is closed. Reconnect will be attempted in 1 second."};setTimeout(function(){connect()},1e3);console.log(message,e.reason)};ws.onerror=function(err){console.error("Socket encountered error: ",err.message,"Closing socket");ws.close();reject(err)}})}return connect().then().catch(function(err){console.log(err)})},initBrowse:function(storageUrl,input,browseButton,id,action){input.value=storageUrl;var headers;headers={Accept:"text/turtle, application/ld+json"};fetcher.getResourceGraph(storageUrl,headers).then(function(g){DO.U.generateBrowserList(g,storageUrl,id,action).then(function(i){DO.U.showStorageDescription(g,id,storageUrl)})}).then(function(i){document.getElementById(id+"-"+action).textContent=action=="write"?input.value+util.generateAttributeId():input.value});browseButton.addEventListener("click",function(){DO.U.triggerBrowse(input.value,id,action)},false)},triggerBrowse:function(url,id,action){var inputBox=document.getElementById(id);if(url.length>10&&url.match(/^https?:\/\//g)&&url.slice(-1)=="/"){var headers;headers={Accept:"text/turtle, application/ld+json"};fetcher.getResourceGraph(url,headers).then(function(g){DO.U.generateBrowserList(g,url,id,action).then(function(l){DO.U.showStorageDescription(g,id,url);return l},function(reason){console.log("???? "+reason)})},function(reason){var list=document.getElementById(id+"-ul");var statusCode="status"in reason?reason.status:0;statusCode=typeof statusCode==="string"?parseInt(reason.slice(-3)):statusCode;var msgs=inputBox.querySelectorAll(".response-message");for(var i=0;i<msgs.length;i++){msgs[i].parentNode.removeChild(msgs[i])}switch(statusCode){default:inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">Unable to access ('+reason.statusText+").</p>");break;case 404:inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">Not found.</p></div>');break;case 401:var msg="You are not authorized.";if(!DO.C.User.IRI){msg+=" Try signing in."}inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+msg+"</p></div>");break;case 403:var msg="You don't have permission to access this location.";inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+msg+"</p></div>");break}})}else{inputBox.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">This is not a valid location.</p></div>')}},setupResourceBrowser:function(parent,id,action){id=id||"browser-location";action=action||"write";parent.insertAdjacentHTML("beforeend",'<div id="'+id+'"><label for="'+id+'-input">URL</label> <input type="text" id="'+id+'-input" name="'+id+'-input" placeholder="https://example.org/path/to/" /><button id="'+id+'-update" disabled="disabled" title="Browse location">Browse</button></div>\n      <div id="'+id+'-listing"></div>');var inputBox=document.getElementById(id);var storageBox=document.getElementById(id+"-listing");var input=document.getElementById(id+"-input");var browseButton=document.getElementById(id+"-update");input.addEventListener("keyup",function(e){var msgs=document.getElementById(id).querySelectorAll(".response-message");for(var i=0;i<msgs.length;i++){msgs[i].parentNode.removeChild(msgs[i])}var actionNode=document.getElementById(id+"-"+action);if(input.value.length>10&&input.value.match(/^https?:\/\//g)&&input.value.slice(-1)=="/"){browseButton.removeAttribute("disabled");if(e.which==13){DO.U.triggerBrowse(input.value,id,action)}if(action){action.textContent=input.value+util.generateAttributeId()}}else{browseButton.disabled="disabled";if(actionNode){actionNode.textContent=input.value}}},false);var browserul=document.getElementById(id+"-ul");if(!browserul){browserul=document.createElement("ul");browserul.id=id+"-ul";storageBox.appendChild(browserul)}var storageUrl;if(DO.C.User.Storage&&DO.C.User.Storage.length>0){storageUrl=uri.forceTrailingSlash(DO.C.User.Storage[0])}if(storageUrl){DO.U.initBrowse(storageUrl,input,browseButton,id,action)}else{fetcher.getLinkRelation(DO.C.Vocab["oaannotationService"]["@id"]).then(function(storageUrl){DO.U.initBrowse(storageUrl[0],input,browseButton,id,action)},function(){browseButton.addEventListener("click",function(){DO.U.triggerBrowse(input.value,id,action)},false)})}},showResourceBrowser:function(id,action){id=id||"location-"+util.generateAttributeId();action=action||"write";var browserHTML='<aside id="resource-browser-'+id+'" class="do on">'+DO.C.Button.Close+"<h2>Resource Browser</h2></aside>";document.documentElement.appendChild(util.fragmentFromString(browserHTML));DO.U.setupResourceBrowser(document.getElementById("resource-browser-"+id),id,action);document.getElementById("resource-browser-"+id).insertAdjacentHTML("beforeend",'<p><samp id="'+id+"-"+action+'"></samp></p>')},openInputFile:function(e){var file=e.target.files[0];var contentType=file.type;var reader=new FileReader;reader.onload=function(){DO.U.spawnDokieli(reader.result,contentType,"file:"+file.name)};reader.readAsText(file)},openDocument:function(e){if(typeof e!=="undefined"){e.target.disabled=true}document.documentElement.appendChild(util.fragmentFromString('<aside id="open-document" class="do on">'+DO.C.Button.Close+'<h2>Open Document</h2><p><label for="open-local-file">Open local file</label> <input type="file" id="open-local-file" name="open-local-file" /></p></aside>'));var id="location-open-document";var action="read";var openDocument=document.getElementById("open-document");DO.U.setupResourceBrowser(openDocument,id,action);var idSamp=typeof DO.C.User.Storage=="undefined"?"":'<p><samp id="'+id+"-"+action+'">https://example.org/path/to/article</samp></p>';openDocument.insertAdjacentHTML("beforeend",idSamp+'<button class="open" title="Open document">Open</button>');openDocument.addEventListener("click",function(e){if(e.target.closest("button.close")){document.querySelector("#document-do .resource-open").disabled=false}if(e.target.closest("#open-local-file")){e.target.addEventListener("change",DO.U.openInputFile,false)}if(e.target.closest("button.open")){var openDocument=document.getElementById("open-document");var rm=openDocument.querySelector(".response-message");if(rm){rm.parentNode.removeChild(rm)}var bli=document.getElementById(id+"-input");var iri=bli.value;var options={};DO.U.openResource(iri,options)}})},openResource:function(iri,options){options=options||{};var headers={Accept:fetcher.setAcceptRDFTypes()};var pIRI=uri.getProxyableIRI(iri);if(pIRI.slice(0,5).toLowerCase()=="http:"){options["noCredentials"]=true}var handleResource=function handleResource(pIRI,headers,options){return fetcher.getResource(pIRI,headers,options).catch(error=>{var pIRI=uri.getProxyableIRI(iri,{forceProxy:true});return handleResource(pIRI,headers,options);throw error}).then(response=>{var cT=response.headers.get("Content-Type");var options={};options["contentType"]=cT?cT.split(";")[0].trim():"text/turtle";options["subjectURI"]=iri;return response.text().then(data=>{DO.U.buildResourceView(data,options).then(o=>{var spawnOptions={};spawnOptions["defaultStylesheet"]="defaultStylesheet"in o?o.defaultStylesheet:false;DO.U.spawnDokieli(o.data,o.options["contentType"],o.options["subjectURI"],spawnOptions)})})})};handleResource(pIRI,headers,options)},buildResourceView:function(data,options){return graph.getGraphFromData(data,options).then(function(i){var s=SimpleRDF(DO.C.Vocab,options["subjectURI"],i,ld.store).child(options["subjectURI"]);var title=DO.U.getResourceLabel(s)||options.subjectURI;var h1='<a href="'+options.subjectURI+'">'+title+"</a>";var types=s.rdftype._array;if(types.indexOf(DO.C.Vocab["ldpContainer"]["@id"])>=0||types.indexOf(DO.C.Vocab["asCollection"]["@id"])>=0||types.indexOf(DO.C.Vocab["asOrderedCollection"]["@id"])>=0){return DO.U.processResources(options["subjectURI"],options).then(function(url){var promises=[];url.forEach(function(u){var pIRI=uri.getProxyableIRI(u);promises.push(fetcher.getResourceGraph(pIRI))});return Promise.all(promises.map(p=>p.catch(e=>e))).then(function(graphs){var items=[];graphs.filter(result=>!(result instanceof Error));graphs.forEach(function(graph){var html=DO.U.generateIndexItemHTML(graph);if(typeof html==="string"&&html!=""){items.push(html)}});var createNewDocument="";var listItems="";if(items.length>0){listItems=`\n            <ul>\n              <li>`+items.join("</li>\n<li>")+`</li>\n            </ul>`}var html=`      <article about="" typeof="as:Collection">\n        <h1 property="schema:name">`+h1+`</h1>\n        <div datatype="rdf:HTML" property="schema:description">\n          <section>`+createNewDocument+listItems+`\n          </section>\n        </div>\n      </article>`;return{data:doc.createHTML("Collection: "+options.subjectURI,html),options:{subjectURI:options.subjectURI,contentType:"text/html"},defaultStylesheet:true}}).catch(e=>{})})}else{return{data:data,options:options}}})},generateIndexItemHTML:function(graph,options){if(typeof graph.iri==="undefined")return;options=options||{};var name="";var published="";name=DO.U.getResourceLabel(graph)||graph.iri().toString();name='<a href="'+graph.iri().toString()+'">'+name+"</a>";var datePublished=graph.schemadatePublished||graph.dctermsissued||graph.dctermsdate||graph.aspublished||graph.schemadateCreated||graph.dctermscreated||graph.provgeneratedAtTime||graph.dctermsmodified||graph.asupdated||"";if(datePublished){published=', <time datetime="'+datePublished+'">'+datePublished.substr(0,10)+"</time>"}var summary="";if(graph.oahasBody){summary=graph.child(graph.oahasBody).rdfvalue}else{summary=graph.schemaabstract||graph.dctermsdescription||graph.rdfvalue||graph.assummary||graph.schemadescription||graph.ascontent||""}if(summary){summary="<div>"+summary+"</div>"}return name+published+summary},spawnDokieli:function(data,contentType,iri,options){options=options||{};if(DO.C.AvailableMediaTypes.indexOf(contentType)>-1){var tmpl=document.implementation.createHTMLDocument("template");switch(contentType){case"text/html":case"application/xhtml+xml":tmpl.documentElement.innerHTML=data;break;default:tmpl.documentElement.innerHTML="<pre>"+data.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</pre>";break}var documentHasDokieli=tmpl.querySelectorAll('head script[src$="/dokieli.js"]');if(documentHasDokieli.length==0){var doFiles=["dokieli.css","dokieli.js"];if(options.defaultStylesheet){doFiles.push("basic.css")}doFiles.forEach(function(i){var media=i.endsWith(".css")?tmpl.querySelectorAll('head link[rel~="stylesheet"][href$="/'+i+'"]'):tmpl.querySelectorAll('head script[src$="/'+i+'"]');if(media.length==0){switch(i){case"dokieli.css":tmpl.querySelector("head").insertAdjacentHTML("beforeend",'<link href="https://dokie.li/media/css/'+i+'" media="all" rel="stylesheet" />');break;case"basic.css":tmpl.querySelector("head").insertAdjacentHTML("beforeend",'<link href="https://dokie.li/media/css/'+i+'" media="all" rel="stylesheet" />');case"dokieli.js":tmpl.querySelector("head").insertAdjacentHTML("beforeend",'<script src="https://dokie.li/scripts/'+i+'"><\/script>');break}}});var nodes=tmpl.querySelectorAll("head link, [src], object[data]");nodes=DO.U.rewriteBaseURL(nodes,{baseURLType:"base-url-absolute",iri:iri});document.documentElement.removeAttribute("id");document.documentElement.removeAttribute("class")}else if(!iri.startsWith("file:")){window.open(iri,"_blank");return}document.documentElement.innerHTML=tmpl.documentElement.innerHTML;if(!iri.startsWith("file:")){var iriHost=iri.split("//")[1].split("/")[0];var iriProtocol=iri.split("//")[0];if(document.location.protocol==iriProtocol&&document.location.host==iriHost){try{history.pushState(null,null,iri)}catch(e){console.log("Cannot change pushState due to cross-origin.")}}}DO.C.init()}else{console.log("//TODO: Handle server returning wrong Response/Content-Type for the Request/Accept")}},createNewDocument:function createNewDocument(e){e.target.disabled=true;document.documentElement.appendChild(util.fragmentFromString('<aside id="create-new-document" class="do on">'+DO.C.Button.Close+"<h2>Create New Document</h2></aside>"));var newDocument=document.getElementById("create-new-document");newDocument.addEventListener("click",e=>{if(e.target.closest("button.close")){document.querySelector("#document-do .resource-new").disabled=false}});var id="location-new";var action="write";DO.U.setupResourceBrowser(newDocument,id,action);document.getElementById(id).insertAdjacentHTML("afterbegin","<p>Choose a location to save your new article.</p>");var baseURLSelection=document.location.protocol=="file:"?"":DO.U.getBaseURLSelection();newDocument.insertAdjacentHTML("beforeend",baseURLSelection+'<p>Your new document will be saved at <samp id="'+id+"-"+action+'">https://example.org/path/to/article</samp></p><button class="create" title="Create new document">Create</button>');var bli=document.getElementById(id+"-input");bli.focus();bli.placeholder="https://example.org/path/to/article";newDocument.addEventListener("click",e=>{if(!e.target.closest("button.create")){return}var newDocument=document.getElementById("create-new-document");var storageIRI=newDocument.querySelector("#"+id+"-"+action).innerText.trim();var title=storageIRI.length>0?uri.getURLLastPath(storageIRI):"";title=DO.U.generateLabelFromString(title);var rm=newDocument.querySelector(".response-message");if(rm){rm.parentNode.removeChild(rm)}var html=document.documentElement.cloneNode(true);var baseURLSelectionChecked=newDocument.querySelector('select[name="base-url"]');if(baseURLSelectionChecked.length>0){var baseURLType=baseURLSelectionChecked.value;var nodes=html.querySelectorAll("head link, [src], object[data]");if(baseURLType=="base-url-relative"){DO.U.copyRelativeResources(storageIRI,nodes)}nodes=DO.U.rewriteBaseURL(nodes,{baseURLType:baseURLType})}html.querySelector("body").innerHTML='<main><article about="" typeof="schema:Article"><h1 property="schema:name">'+title+"</h1></article></main>";html.querySelector("head title").innerHTML=title;html=doc.getDocument(html);fetcher.putResource(storageIRI,html).then(()=>{var documentMode=DO.C.WebExtension?"":"?author=true";newDocument.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="success">'+'New document created at <a href="'+storageIRI+documentMode+'">'+storageIRI+"</a></p></div>");window.open(storageIRI+documentMode,"_blank")}).catch(error=>{console.log("Error creating a new document:");console.error(error);let message;switch(error.status){case 0:case 405:message="this location is not writable.";break;case 401:message="you are not authorized.";if(!DO.C.User.IRI){message+=" Try signing in."}break;case 403:message="you do not have permission to write here.";break;case 406:message="enter a name for your resource.";break;default:message=error.message;break}newDocument.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+"Could not create new document: "+message+"</p>")})})},saveAsDocument:function saveAsDocument(e){e.target.disabled=true;document.documentElement.appendChild(util.fragmentFromString('<aside id="save-as-document" class="do on">'+DO.C.Button.Close+"<h2>Save As Document</h2></aside>"));var saveAsDocument=document.getElementById("save-as-document");saveAsDocument.addEventListener("click",function(e){if(e.target.closest("button.close")){document.querySelector("#document-do .resource-save-as").disabled=false}});var fieldset="";locationInboxId="location-inbox";locationInboxAction="read";saveAsDocument.insertAdjacentHTML("beforeend",'<div><input id="'+locationInboxId+'-set" name="'+locationInboxId+'-set" type="checkbox" /> <label for="'+locationInboxId+'-set">Set Inbox</label></div>');saveAsDocument.addEventListener("click",function(e){if(e.target.closest("input#"+locationInboxId+"-set")){if(e.target.getAttribute("checked")){e.target.removeAttribute("checked");fieldset=saveAsDocument.querySelector("#"+locationInboxId+"-fieldset");fieldset.parentNode.removeChild(fieldset)}else{e.target.setAttribute("checked","checked");e.target.nextElementSibling.insertAdjacentHTML("afterend",'<fieldset id="'+locationInboxId+'-fieldset"></fieldset>');fieldset=saveAsDocument.querySelector("#"+locationInboxId+"-fieldset");DO.U.setupResourceBrowser(fieldset,locationInboxId,locationInboxAction);fieldset.insertAdjacentHTML("beforeend","<p>Article's <em>inbox</em> will be set to: <samp id=\""+locationInboxId+"-"+locationInboxAction+'"></samp></p>');var lii=document.getElementById(locationInboxId+"-input");lii.focus();lii.placeholder="https://example.org/path/to/inbox/"}}});locationAnnotationServiceId="location-annotation-service";locationAnnotationServiceAction="read";saveAsDocument.insertAdjacentHTML("beforeend",'<div><input id="'+locationAnnotationServiceId+'-set" name="'+locationAnnotationServiceId+'-set" type="checkbox" /> <label for="'+locationAnnotationServiceId+'-set">Set Annotation Service</label></div>');saveAsDocument.addEventListener("click",function(e){if(e.target.closest("input#"+locationAnnotationServiceId+"-set")){if(e.target.getAttribute("checked")){e.target.removeAttribute("checked");fieldset=saveAsDocument.querySelector("#"+locationAnnotationServiceId+"-fieldset");fieldset.parentNode.removeChild(fieldset)}else{e.target.setAttribute("checked","checked");e.target.nextElementSibling.insertAdjacentHTML("afterend",'<fieldset id="'+locationAnnotationServiceId+'-fieldset"></fieldset>');fieldset=saveAsDocument.querySelector("#"+locationAnnotationServiceId+"-fieldset");DO.U.setupResourceBrowser(fieldset,locationAnnotationServiceId,locationAnnotationServiceAction);fieldset.insertAdjacentHTML("beforeend","<p>Article's <em>annotation service</em> will be set to: <samp id=\""+locationAnnotationServiceId+"-"+locationAnnotationServiceAction+'"></samp></p>');var lasi=document.getElementById(locationAnnotationServiceId+"-input");lasi.focus();lasi.placeholder="https://example.org/path/to/annotation/"}}});var id="location-save-as";var action="write";saveAsDocument.insertAdjacentHTML("beforeend",'<fieldset id="'+id+'-fieldset"><legend>Save to</legend></fieldset>');fieldset=saveAsDocument.querySelector("fieldset#"+id+"-fieldset");DO.U.setupResourceBrowser(fieldset,id,action);fieldset.insertAdjacentHTML("beforeend",'<p id="'+id+"-samp"+'">Article will be saved at: <samp id="'+id+"-"+action+'"></samp></p>'+DO.U.getBaseURLSelection()+'<p><input type="checkbox" id="derivation-data" name="derivation-data" checked="checked" /><label for="derivation-data">Derivation data</label></p><button class="create" title="Save to destination">Save</button>');var bli=document.getElementById(id+"-input");bli.focus();bli.placeholder="https://example.org/path/to/article";saveAsDocument.addEventListener("click",e=>{if(!e.target.closest("button.create")){return}var currentDocumentURL=uri.stripFragmentFromString(document.location.href);var saveAsDocument=document.getElementById("save-as-document");var storageIRI=saveAsDocument.querySelector("#"+id+"-"+action).innerText.trim();var rm=saveAsDocument.querySelector(".response-message");if(rm){rm.parentNode.removeChild(rm)}if(!storageIRI.length){saveAsDocument.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+"Specify the location to save the article to, and optionally set its <em>inbox</em> or <em>annotation service</em>.</p></div>");return}var html=document.documentElement.cloneNode(true);var o,r;var wasDerived=document.querySelector("#derivation-data");if(wasDerived.checked){o={id:"document-derived-from",title:"Derived From"};r={rel:"prov:wasDerivedFrom",href:currentDocumentURL};html=doc.setDocumentRelation(html,[r],o);html=doc.setDate(html,{id:"document-derived-on",property:"prov:generatedAtTime",title:"Derived On"});o={id:"document-identifier",title:"Identifier"};r={rel:"owl:sameAs",href:storageIRI};html=doc.setDocumentRelation(html,[r],o)}var inboxLocation=saveAsDocument.querySelector("#"+locationInboxId+"-"+locationInboxAction);if(inboxLocation){inboxLocation=inboxLocation.innerText.trim();o={id:"document-inbox",title:"Notifications Inbox"};r={rel:"ldp:inbox",href:inboxLocation};html=doc.setDocumentRelation(html,[r],o)}var annotationServiceLocation=saveAsDocument.querySelector("#"+locationAnnotationServiceId+"-"+locationAnnotationServiceAction);if(annotationServiceLocation){annotationServiceLocation=annotationServiceLocation.innerText.trim();o={id:"document-annotation-service",title:"Annotation Service"};r={rel:"oa:annotationService",href:annotationServiceLocation};html=doc.setDocumentRelation(html,[r],o)}var baseURLSelectionChecked=saveAsDocument.querySelector('select[name="base-url"]');if(baseURLSelectionChecked.length>0){var baseURLType=baseURLSelectionChecked.value;var nodes=html.querySelectorAll("head link, [src], object[data]");if(baseURLType=="base-url-relative"){DO.U.copyRelativeResources(storageIRI,nodes)}nodes=DO.U.rewriteBaseURL(nodes,{baseURLType:baseURLType})}html=doc.getDocument(html);var progress=saveAsDocument.querySelector("progress");if(progress){progress.parentNode.removeChild(progress)}e.target.insertAdjacentHTML("afterend",'<progress min="0" max="100" value="0"></progress>');progress=saveAsDocument.querySelector("progress");fetcher.putResource(storageIRI,html,null,null,{progress:progress}).then(response=>{progress.parentNode.removeChild(progress);let url=response.url||storageIRI;var documentMode=DO.C.WebExtension?"":"?author=true";saveAsDocument.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="success">'+'Document saved at <a href="'+url+documentMode+'">'+url+"</a></p></div>");window.open(url+documentMode,"_blank")}).catch(error=>{console.log("Error saving document. Status: "+error.status);progress.parentNode.removeChild(progress);let message;var requestAccess="";var linkHeaders;var inboxURL;var link=error.response.headers.get("Link");if(link&&link.length>0){linkHeaders=fetcher.parseLinkHeader(link)}if(DO.C.User.IRI&&linkHeaders&&DO.C.Vocab["ldpinbox"]["@id"]in linkHeaders){inboxURL=linkHeaders[DO.C.Vocab["ldpinbox"]["@id"]][0];requestAccess='<p><button class="request-access" data-inbox="'+inboxURL+'" data-target="'+storageIRI+'" title="Send an access request to resource inbox.">Request Access</button></p>'}switch(error.status){case 0:case 405:message="this location is not writable.";break;case 401:message="you are not authorized.";if(!DO.C.User.IRI){message+=" Try signing in."}break;case 403:message="you do not have permission to write here.";break;case 406:message="enter a name for your resource.";break;default:message=error.message;break}saveAsDocument.insertAdjacentHTML("beforeend",'<div class="response-message"><p class="error">'+"Unable to save: "+message+"</p>"+requestAccess+"</div>");if(DO.C.User.IRI&&requestAccess){document.querySelector("#save-as-document .response-message .request-access").addEventListener("click",function(e){var objectId="#"+util.generateUUID();inboxURL=e.target.dataset.inbox;var accessTo=e.target.dataset.target;var agent=DO.C.User.IRI;e.target.disabled=true;var responseMessage=e.target.parentNode;responseMessage.insertAdjacentHTML("beforeend",'<span class="progress" data-to="'+inboxURL+'"><svg class="fas fa-circle-notch fa-spin fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"/></svg></span>');var notificationStatements=`<dl about="`+objectId+`" prefix="acl: http://www.w3.org/ns/auth/acl#">\n  <dt>Object type</dt><dd><a about="`+objectId+`" href="`+DO.C.Vocab["aclAuthorization"]["@id"]+`" typeof="acl:Authorization">Authorization</a></dd>\n  <dt>Agents</dt><dd><a href="`+agent+`" property="acl:agent">`+agent+`</a></dd>\n  <dt>Access to</dt><dd><a href="`+accessTo+`" property="acl:accessTo">`+accessTo+`</a></dd>\n  <dt>Modes</dt><dd><a href="`+DO.C.Vocab["aclRead"]["@id"]+`" property="acl:mode">Read</a></dd><dd><a href="`+DO.C.Vocab["aclWrite"]["@id"]+`" property="acl:mode">Write</a></dd>\n</dl>\n`;var notificationData={type:["as:Request"],inbox:inboxURL,object:objectId,statements:notificationStatements};responseMessage=document.querySelector("#save-as-document .response-message");return inbox.notifyInbox(notificationData).catch(error=>{console.log("Error notifying the inbox:",error);responseMessage.querySelector('.progress[data-to="'+inboxURL+'"]').innerHTML='<svg class="fas fa-times-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg> Unable to notify. Try later.'}).then(response=>{var notificationSent="Notification sent";var location=response.headers.get("Location");if(location){notificationSent='<a target="_blank" href="'+location.trim()+'"><svg class="fas fa-check-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg></a>'}else{notificationSent=notificationSent+", but location unknown."}responseMessage.querySelector('.progress[data-to="'+inboxURL+'"]').innerHTML=notificationSent})})}})})},viewSource:function(e){e.target.disabled=true;var buttonDisabled=document.location.protocol==="file:"?' disabled="disabled"':"";document.documentElement.appendChild(util.fragmentFromString('<aside id="source-view" class="do on">'+DO.C.Button.Close+'<h2>Source</h2><textarea id="source-edit" rows="24" cols="80"></textarea><p><button class="create"'+buttonDisabled+' title="Update source">Update</button></p></aside>'));var sourceBox=document.getElementById("source-view");var input=document.getElementById("source-edit");input.value=doc.getDocument();sourceBox.addEventListener("click",function(e){if(e.target.closest("button.create")){var url=window.location.origin+window.location.pathname;var data=document.getElementById("source-edit").value;document.documentElement.innerHTML=data;DO.U.showDocumentInfo();DO.U.showDocumentMenu(e);DO.U.viewSource();document.querySelector("#document-do .resource-source").disabled=true}if(e.target.closest("button.close")){document.querySelector("#document-do .resource-source").disabled=false}})},getBaseURLSelection:function(){return'<div id="base-url-selection"><label>Location of media resources:</label>\n      <select name="base-url">\n      <option id="base-url-absolute" value="base-url-absolute" selected="selected">Use references as is</option>\n      <option id="base-url-relative" value="base-url-relative">Copy to your storage</option>\n      </select>\n      </div>'},rewriteBaseURL:function(nodes,options){options=options||{};if(typeof nodes==="object"&&nodes.length>0){for(var i=0;i<nodes.length;i++){var node=nodes[i];var url,ref;switch(node.tagName.toLowerCase()){default:url=node.getAttribute("src");ref="src";break;case"link":url=node.getAttribute("href");ref="href";break;case"object":url=node.getAttribute("data");ref="data";break}var s=url.split(":")[0];if(s!="http"&&s!="https"&&s!="file"&&s!="data"&&s!="urn"&&document.location.protocol!="file:"){url=DO.U.setBaseURL(url,options)}else if(url.startsWith("http:")&&node.tagName.toLowerCase()){var proxyURL="proxyURL"in options?options.proxyURL:DO.C.ProxyURL;url=proxyURL+uri.encodeString(url)}node.setAttribute(ref,url)}}return nodes},setBaseURL:function(url,options){options=options||{};var urlType="baseURLType"in options?options.baseURLType:"base-url-absolute";var matches=[];var regexp=/(https?:\/\/([^\/]*)\/|file:\/\/\/|data:|urn:|\/\/)?(.*)/;matches=url.match(regexp);if(matches){switch(urlType){case"base-url-absolute":default:if(matches[1]=="//"&&"iri"in options){url=options.iri.split(":")[0]+":"+url}else{href="iri"in options?uri.getProxyableIRI(options.iri):document.location.href;url=uri.getBaseURL(href)+matches[3].replace(/^\//g,"")}break;case"base-url-relative":url=matches[3].replace(/^\//g,"");break}}return url},generateLabelFromString:function(s){if(typeof s==="string"&&s.length>0){s=s.replace(/-/g," ");s=s!==".html"&&s.endsWith(".html")?s.substr(0,s.lastIndexOf(".html")):s;s=s!=="."&&s.endsWith(".")?s.substr(0,s.lastIndexOf(".")):s;s=s.charAt(0).toUpperCase()+s.slice(1)}return s},copyRelativeResources:function copyRelativeResources(storageIRI,relativeNodes){var ref="";var baseURL=uri.getBaseURL(storageIRI);for(var i=0;i<relativeNodes.length;i++){var node=relativeNodes[i];switch(node.tagName.toLowerCase()){default:ref="src";break;case"link":ref="href";break;case"object":ref="data";break}var fromURL=x=node.getAttribute(ref).trim();var pathToFile="";var s=fromURL.split(":")[0];if(s!="http"&&s!="https"&&s!="file"&&s!="data"&&s!="urn"&&s!="urn"){if(fromURL.startsWith("//")){fromURL=document.location.protocol+fromURL;toURL=baseURL+fromURL.substr(2)}else if(fromURL.startsWith("/")){pathToFile=DO.U.setBaseURL(fromURL,{baseURLType:"base-url-relative"});fromURL=document.location.origin+fromURL;toURL=baseURL+pathToFile}else{pathToFile=DO.U.setBaseURL(fromURL,{baseURLType:"base-url-relative"});fromURL=uri.getBaseURL(document.location.href)+fromURL;toURL=baseURL+pathToFile}fetcher.copyResource(fromURL,toURL)}}},createAttributeDateTime:function(element){var a=util.getDateTimeISO();switch(element){case"mark":case"article":a='data-datetime="'+a+'"';break;case"del":case"ins":a='datetime="'+a+'"';break;default:a="";break}return a},getCitation:function(i,options){options=options||{};var iri=i;if(i.toLowerCase().slice(0,4)!=="http"){iri="http://data.crossref.org/"+i.trim()}else{var x=iri.toLowerCase().trim().split("/");if(x[2]=="doi.org"||x[2]=="dx.doi.org"){var y=x[0]+"//"+x[2]+"/";iri="http://data.crossref.org/"+iri.substr(y.length,iri.length)}}return fetcher.getResourceGraph(iri)},getCitationHTML:function(citationGraph,citationURI,options){if(!citationGraph){return}options=options||{};var subject=citationGraph.child(citationURI);var title=DO.U.getResourceLabel(subject);if(typeof title=="undefined"){subject=citationGraph.child(options.citationId);title=DO.U.getResourceLabel(subject)||""}title=title.replace(/ & /g," &amp; ");title=title.length>0?"<cite>"+title+"</cite>, ":"";var datePublished=subject.schemadatePublished||subject.dctermsissued||subject.dctermsdate||subject.schemadateCreated||subject.dctermscreated||"";var dateVersion=subject.schemadateModified||datePublished;datePublished=datePublished?datePublished.substr(0,4)+", ":"";var dateAccessed="Accessed: "+util.getDateTimeISO();var authors=[],authorList=[];if(subject.schemaauthor&&subject.schemaauthor._array.length>0){subject.schemaauthor.forEach(function(a){authorList.push(a)})}else if(subject.dctermscreator&&subject.dctermscreator._array.length>0){subject.dctermscreator.forEach(function(a){authorList.push(a)})}else if(subject.asactor&&subject.asactor._array.length>0){subject.asactor.forEach(function(a){authorList.push(a)})}if(authorList.length>0){authorList.forEach(function(authorIRI){var s=subject.child(authorIRI);var author=auth.getAgentName(s);if(s.schemafamilyName&&s.schemafamilyName.length>0&&s.schemagivenName&&s.schemagivenName.length>0){author=DO.U.createRefName(s.schemafamilyName,s.schemagivenName)}else if(s.foaffamilyName&&s.foaffamilyName.length>0&&s.foafgivenName&&s.foafgivenName.length>0){author=DO.U.createRefName(s.foaffamilyName,s.foafgivenName)}if(author!==""){authors.push(author)}else{authors.push(authorIRI)}});authors=authors.join(", ")+": "}var dataVersionURL;if(subject.memmemento){dataVersionURL=subject.memmemento}else if(subject.rellatestversion){dataVersionURL=subject.rellatestversion}dataVersionURL=dataVersionURL?' data-versionurl="'+dataVersionURL+'"':"";var dataVersionDate=dateVersion?' data-versiondate="'+dateVersion+'"':"";var content="content"in options&&options.content.length>0?options.content+", ":"";var citationReason="Reason: "+DO.C.Citation[options.citationRelation];var citationHTML=authors+title+datePublished+content+'<a about="#'+options.refId+'"'+dataVersionDate+dataVersionURL+' href="'+options.citationId+'" rel="schema:citation '+options.citationRelation+'" title="'+DO.C.Citation[options.citationRelation]+'">'+options.citationId+"</a> ["+dateAccessed+", "+citationReason+"]";return citationHTML},createRefName:function(familyName,givenName,refType){refType=refType||DO.C.DocRefType;switch(refType){case"LNCS":default:return familyName+", "+givenName.slice(0,1)+".";break;case"ACM":return givenName.slice(0,1)+". "+familyName;break;case"fullName":return givenName+" "+familyName;break}},highlightItems:function(){var highlights=document.body.querySelectorAll('*[class*="highlight-"]');for(var i=0;i<highlights.length;i++){highlights[i].addEventListener("mouseenter",function(e){var c=e.target.getAttribute("class").split(" ").filter(function(s){return s.startsWith("highlight-")});var highlightsX=document.body.querySelectorAll('*[class~="'+c[0]+'"]');for(var j=0;j<highlightsX.length;j++){highlightsX[j].classList.add("do","highlight")}});highlights[i].addEventListener("mouseleave",function(e){var c=e.target.getAttribute("class");var c=e.target.getAttribute("class").split(" ").filter(function(s){return s.startsWith("highlight-")});var highlightsX=document.body.querySelectorAll('*[class~="'+c[0]+'"]');for(var j=0;j<highlightsX.length;j++){highlightsX[j].classList.remove("do","highlight")}})}},SPARQLQueryURL:{getResourcesOfTypeWithLabel:function(sparqlEndpoint,resourceType,textInput,options){options=options||{};var labelsPattern="",resourcePattern="";if(!("lang"in options)){options["lang"]="en"}if("filter"in options){if(resourceType=="<http://purl.org/linked-data/cube#DataSet>"||resourceType=="qb:DataSet"&&"dimensionRefAreaNotation"in options.filter){var dimensionPattern,dimensionDefault="";var dataSetPattern="\n    [] qb:dataSet ?resource";if("dimensionProperty"in options.filter){dimensionPattern=" ; "+options.filter.dimensionProperty}else{var dimensionDefault=" .\n  { SELECT DISTINCT ?propertyRefArea WHERE { ?propertyRefArea rdfs:subPropertyOf* sdmx-dimension:refArea . } }";dimensionPattern=" ; ?propertyRefArea "}var notationPattern=" [ skos:notation '"+options.filter.dimensionRefAreaNotation.toUpperCase()+"' ] ."}resourcePattern=dimensionDefault+dataSetPattern+dimensionPattern+notationPattern}labelsPattern="\n  ";if("optional"in options){if("prefLabels"in options.optional){if(options.optional.prefLabels.length==1){labelsPattern+="  ?resource "+options.optional.prefLabels[0]+" ?prefLabel ."}else{labelsPattern+="  VALUES ?labelProperty {";options.optional.prefLabels.forEach(function(property){labelsPattern+=" "+property});labelsPattern+=" } ?resource ?labelProperty ?prefLabel ."}}}else{labelsPattern+="  ?resource rdfs:label ?prefLabel ."}var query="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX qb: <http://purl.org/linked-data/cube#>\nPREFIX sdmx-dimension: <http://purl.org/linked-data/sdmx/2009/dimension#>\nPREFIX sdmx-measure: <http://purl.org/linked-data/sdmx/2009/measure#>\nCONSTRUCT {\n  ?resource skos:prefLabel ?prefLabel .\n}\nWHERE {\n  ?resource a "+resourceType+" ."+labelsPattern+"\n  FILTER (CONTAINS(LCASE(?prefLabel), '"+textInput+"') && (LANG(?prefLabel) = '' || LANGMATCHES(LANG(?prefLabel), '"+options.lang+"')))"+resourcePattern+"\n}";return sparqlEndpoint+"?query="+uri.encodeString(query)},getObservationsWithDimension:function(sparqlEndpoint,dataset,paramDimension,options){var query="PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX skos: <http://www.w3.org/2004/02/skos/core#>\nPREFIX dcterms: <http://purl.org/dc/terms/>\nPREFIX qb: <http://purl.org/linked-data/cube#>\nPREFIX sdmx-dimension: <http://purl.org/linked-data/sdmx/2009/dimension#>\nPREFIX sdmx-measure: <http://purl.org/linked-data/sdmx/2009/measure#>\nCONSTRUCT {\n  ?observation sdmx-dimension:refPeriod ?refPeriod .\n  ?observation sdmx-measure:obsValue ?obsValue .\n}\nWHERE {\n  ?observation qb:dataSet <"+dataset+"> .\n  "+paramDimension+"\n  ?propertyRefPeriod rdfs:subPropertyOf* sdmx-dimension:refPeriod .\n  ?observation ?propertyRefPeriod ?refPeriod .\n  ?propertyMeasure rdfs:subPropertyOf* sdmx-measure:obsValue .\n  ?observation ?propertyMeasure ?obsValue .\n}";return sparqlEndpoint+"?query="+uri.encodeString(query)}},getSparkline:function(data,options){options=options||{};if(!("cssStroke"in options)){options["cssStroke"]="#000"}var svg='<svg height="100%" prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# rdfs: http://www.w3.org/2000/01/rdf-schema# xsd: http://www.w3.org/2001/XMLSchema# qb: http://purl.org/linked-data/cube# prov: http://www.w3.org/ns/prov# schema: http://schema.org/" version="1.1" width="100%" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink">';svg+=DO.U.drawSparklineGraph(data,options);svg+="</svg>";return svg},drawSparklineGraph:function(data,options){options=options||{};if(!("cssStroke"in options)){options["cssStroke"]="#000"}var svg="";var obsValue="http://purl.org/linked-data/sdmx/2009/measure#obsValue";var observation="http://purl.org/linked-data/cube#Observation";var dotSize=1;var values=data.map(function(n){return n[obsValue]}),min=Math.min.apply(null,values),max=Math.max.apply(null,values);var new_max=98;var new_min=0;var range=new_max-new_min;var parts=values.map(function(v){return(new_max-new_min)/(max-min)*(v-min)+new_min||0});var div=100/parts.length;var x1=0,y1=0,x2=div/2,y2=range-parts[0];var lines="";for(var i=0;i<parts.length;i++){x1=x2;y1=y2;x2=range*(i/parts.length)+div/2;y2=range-parts[i];lines+='<a rel="rdfs:seeAlso" resource="'+data[i][observation]+'" target="_blank" xlink:href="'+data[i][observation]+'"><line'+' x1="'+x1+'%"'+' x2="'+x2+'%"'+' y1="'+y1+'%"'+' y2="'+y2+'%"'+' stroke="'+options.cssStroke+'"'+" /></a>";if(i+1===parts.length){lines+='<a target="_blank" xlink:href="'+data[i][observation]+'"><circle'+' cx="'+x2+'%"'+' cy="'+y2+'%"'+' r="'+dotSize+'"'+' stroke="#f00"'+" fill:#f00"+" /></a>"}}var wasDerivedFrom="";if(options&&"url"in options){wasDerivedFrom=' rel="prov:wasDerivedFrom" resource="'+options.url+'"'}svg+="<g"+wasDerivedFrom+">";svg+='<metadata rel="schema:license" resource="https://creativecommons.org/publicdomain/zero/1.0/"></metadata>';if(options&&"title"in options){svg+='<title property="schema:name">'+options["title"]+"</title>"}svg+=lines+"</g>";return svg},getListHTMLFromTriples:function(triples,options){options=options||{element:"ul"};var elementId="elementId"in options?' id="'+options.elementId+'"':"";var elementName="elementId"in options?' name="'+options.elementId+'"':"";var elementTitle="elementId"in options?options.elementId:"";var items="";triples.forEach(function(t){var s=t.subject.nominalValue;var o=t.object.nominalValue;switch(options.element){case"ol":case"ul":default:items+='<li><a href="'+s+'">'+o+"</a></li>";break;case"dl":items+='<dd><a href="'+s+'">'+o+"</a></dd>";break;case"select":items+='<option value="'+s+'">'+o+"</option>";break}});switch(options.element){case"ul":default:return"<ul"+elementId+">"+items+"</ul>";case"ol":return"<ol"+elementId+">"+items+"</ol>";case"dl":return"<dl"+elementId+"><dt>"+elementTitle+"</dt>"+items+"</dl>";case"select":return"<select"+elementId+elementName+">"+items+"</select>"}},showAsTabs:function(selector){selector=selector||".tabs";var nodes=document.querySelectorAll(selector);nodes.forEach(function(node){var li=node.querySelectorAll("nav li.selected");var figure=node.querySelectorAll("figure.selected");if(li.length==0&&figure.length==0){node.querySelector("nav li").classList.add("selected");node.querySelector("figure").classList.add("selected")}node.querySelector("nav").addEventListener("click",function(e){var a=e.target;if(a.closest("a")){e.preventDefault();e.stopPropagation();var li=a.parentNode;if(!li.classList.contains("class")){var navLi=node.querySelectorAll("nav li");for(var i=0;i<navLi.length;i++){navLi[i].classList.remove("selected")}li.classList.add("selected");var figures=node.querySelectorAll("figure");for(var i=0;i<figures.length;i++){figures[i].classList.remove("selected")}node.querySelector("figure"+a.hash).classList.add("selected")}}})})},getReferenceLabel:function(motivatedBy){motivatedBy=motivatedBy||"";motivatedBy=motivatedBy.length>0&&motivatedBy.slice(0,4)=="http"&&motivatedBy.indexOf("#")>-1?"oa:"+motivatedBy.substr(motivatedBy.lastIndexOf("#")+1):motivatedBy;return DO.C.MotivationSign[motivatedBy]||"#"},showRefs:function(){var refs=document.querySelectorAll("span.ref");for(var i=0;i<refs.length;i++){var ref=refs[i].querySelector("mark[id]");if(ref){var refId=ref.id;var refA=refs[i].querySelectorAll("[class*=ref-] a");for(var j=0;j<refA.length;j++){var noteId=refA[j].getAttribute("href").substr(1);var refLabel=refA[j].textContent;DO.U.positionNote(refId,noteId,refLabel)}}}},getTextQuoteHTML:function(refId,motivatedBy,exact,docRefType,options){options=options||{};var doMode=options.do?" do":"";var refOpen='<span class="ref'+doMode+'" rel="schema:hasPart" resource="#'+refId+'" typeof="dcterms:Text">';var refClose="</span>";if(motivatedBy=="oa:highlighting"){refOpen='<span class="ref'+doMode+'" rel="schema:hasPart" resource="#h-'+refId+'" typeof="oa:Annotation"><span rel="oa:motivatedBy" resource="oa:highlighting"></span><span rel="oa:hasTarget" resource="#'+refId+'" typeof="dcterms:Text">';refClose="</span></span>"}var mark='<mark datatype="rdf:HTML" id="'+refId+'" property="rdf:value">'+exact+"</mark>";return refOpen+mark+docRefType+refClose},positionNote:function(refId,noteId,refLabel){var ref=document.querySelector('[id="'+refId+'"]');var note=document.querySelector('[id="'+noteId+'"]');ref=ref?ref:doc.selectArticleNode(note);if(note.hasAttribute("style")){note.removeAttribute("style")}var style=["top: "+Math.ceil(ref.parentNode.offsetTop)+"px"].join("; ");note.setAttribute("style",style)},positionInteraction:function(noteIRI,containerNode,options){containerNode=containerNode||document.body;return fetcher.getResourceGraph(noteIRI).then(function(g){DO.U.showAnnotation(noteIRI,g,containerNode,options)})},showAnnotation:function(noteIRI,g,containerNode,options){containerNode=containerNode||document.body;options=options||{};var documentURL=uri.stripFragmentFromString(document.location.href);var note=g.child(noteIRI);if(note.asobject&&note.asobject.at(0)){note=g.child(note.asobject.at(0))}var id=String(Math.abs(util.hashCode(noteIRI)));var refId="r-"+id;var refLabel=id;var inboxIRI=note.ldpinbox&&note.ldpinbox.at(0)?note.ldpinbox.at(0):undefined;if(inboxIRI){if(DO.C.Inbox[inboxIRI]){DO.C.Inbox[inboxIRI]["Notifications"].forEach(function(notification){if(DO.C.Notification[notification]&&DO.C.Notification[notification]["Activities"]){DO.C.Notification[notification]["Activities"].forEach(function(activity){if(!document.querySelector('[about="'+activity+'"]')&&DO.C.Activity[activity]&&DO.C.Activity[activity]["Graph"]){DO.U.showAnnotation(activity,DO.C.Activity[activity]["Graph"])}})}})}else{DO.U.showNotificationSources(inboxIRI)}}var datetime=note.schemadatePublished||note.dctermscreated||note.aspublished;var annotatedBy=note.schemacreator||note.dctermscreator||note.asactor;var annotatedByIRI;if(annotatedBy&&annotatedBy.at(0)){annotatedByIRI=annotatedBy.at(0);annotatedBy=g.child(annotatedByIRI)}var annotatedByName=auth.getAgentName(annotatedBy);var annotatedByImage=auth.getAgentImage(annotatedBy);var annotatedByURL=annotatedBy.schemaurl||"";annotatedByURL=annotatedByURL?annotatedByURL:undefined;var lang=note.dctermslanguage||undefined;var licenseIRI=note.schemalicense||note.dctermsrights||undefined;var motivatedBy="oa:replying";var bodyText=note.schemadescription;if(!bodyText){bodyText=note.dctermsdescription;if(!bodyText){bodyText=note.ascontent}}var types=note.rdftype;var resourceTypes=[];types.forEach(function(type){resourceTypes.push(type)});if(resourceTypes.indexOf("http://www.w3.org/ns/oa#Annotation")>-1){var body=g.child(note.oahasBody);var bodyLanguage=body.schemainLanguage||body.dctermslanguage||undefined;var bodyLicenseIRI=body.schemalicense||body.dctermsrights||undefined;bodyText=body.rdfvalue;if(note.oahasTarget&&!(note.oahasTarget.startsWith(documentURL)||"targetInMemento"in options||"targetInSameAs"in options)){return}var target=g.child(note.oahasTarget);var targetIRI=target.iri().toString();var source=target.oahasSource;if(note.oamotivatedBy){motivatedBy=note.oamotivatedBy;refLabel=DO.U.getReferenceLabel(motivatedBy)}var exact,prefix,suffix;var selector=target.oahasSelector;if(selector){selector=g.child(selector);var selectorTypes;if(selector.rdftype&&selector.rdftype.at(0)){selectorTypes=selector.rdftype.at(0)}if(selectorTypes=="http://www.w3.org/ns/oa#TextQuoteSelector"){exact=selector.oaexact;prefix=selector.oaprefix;suffix=selector.oasuffix}else if(selectorTypes=="http://www.w3.org/ns/oa#FragmentSelector"){var refinedBy=g.child(selector.oarefinedBy);exact=refinedBy.oaexact;prefix=refinedBy.oaprefix;suffix=refinedBy.oasuffix;if(selector.rdfvalue&&selector.rdfvalue!==""&&selector.dctermsconformsTo&&selector.dctermsconformsTo.endsWith("://tools.ietf.org/html/rfc3987")){var fragment=selector.rdfvalue;fragment=fragment.indexOf("#")==0?uri.getFragmentFromString(fragment):fragment;if(fragment!==""){containerNode=document.getElementById(fragment)||document.body}}}}var docRefType='<sup class="ref-annotation"><a href="#'+id+'" rel="cito:hasReplyFrom" resource="'+noteIRI+'">'+refLabel+"</a></sup>";var containerNodeTextContent=containerNode.textContent;var selectorIndex=containerNodeTextContent.indexOf(prefix+exact+suffix);if(selectorIndex>=0){var selector={prefix:prefix,exact:exact,suffix:suffix};var selectedParentNode=DO.U.importTextQuoteSelector(containerNode,selector,refId,motivatedBy,docRefType,{do:true});var parentNodeWithId=selectedParentNode.closest("[id]");var targetIRI=parentNodeWithId?documentURL+"#"+parentNodeWithId.id:documentURL;var noteData={type:"article",mode:"read",motivatedByIRI:motivatedBy,id:id,refId:refId,iri:noteIRI,creator:{},datetime:datetime,target:{iri:targetIRI,source:source,selector:{exact:exact,prefix:prefix,suffix:suffix}},body:bodyText,language:{},license:{}};if(annotatedByIRI){noteData.creator["iri"]=annotatedByIRI}if(annotatedByName){noteData.creator["name"]=annotatedByName}if(annotatedByImage){noteData.creator["image"]=annotatedByImage}if(annotatedByURL){noteData.creator["url"]=annotatedByURL}if(bodyLanguage){noteData.language["code"]=bodyLanguage}if(licenseIRI){noteData.license["iri"]=licenseIRI}if(inboxIRI){noteData.inbox=inboxIRI}var note=DO.U.createNoteDataHTML(noteData);var nES=selectedParentNode.nextElementSibling;var asideNote='\n<aside class="note do">\n<blockquote cite="'+noteIRI+'">'+note+"</blockquote>\n</aside>\n";var asideNode=util.fragmentFromString(asideNote);var parentSection=doc.getClosestSectionNode(selectedParentNode);parentSection.appendChild(asideNode);if(DO.C.User.IRI){var noteDelete=document.querySelector('aside.do blockquote[cite="'+noteIRI+'"] article button.delete');if(noteDelete){noteDelete.addEventListener("click",function(e){e.preventDefault();e.stopPropagation();fetcher.deleteResource(noteIRI).then(()=>{var aside=noteDelete.closest("aside.do");aside.parentNode.removeChild(aside);var span=document.querySelector('span[resource="#'+refId+'"]');span.outerHTML=span.querySelector("mark").textContent})})}}DO.U.positionNote(refId,id);DO.C.Activity[noteIRI]["Graph"]=g;return noteIRI}else{var noteData={type:"article",mode:"read",motivatedByIRI:motivatedBy,id:id,refId:refId,refLabel:refLabel,iri:noteIRI,creator:{},datetime:datetime,target:{iri:targetIRI},body:bodyText,language:{},license:{}};if(annotatedByIRI){noteData.creator["iri"]=annotatedByIRI}if(annotatedByName){noteData.creator["name"]=annotatedByName}if(annotatedByImage){noteData.creator["image"]=annotatedByImage}if(bodyLanguage){noteData.language["code"]=bodyLanguage}if(licenseIRI){noteData.license["iri"]=licenseIRI;noteData.license["name"]=DO.C.License[noteData.license["iri"]].name}if(datetime){noteData.datetime=datetime}DO.U.addInteraction(noteData);DO.C.Activity[noteIRI]["Graph"]=g}}else if(note.asinReplyTo&&note.asinReplyTo.at(0)||note.siocreplyof&&note.siocreplyof.at(0)){var inReplyTo,inReplyToRel;if(note.asinReplyTo.at(0)){inReplyTo=note.asinReplyTo.at(0);inReplyToRel="as:inReplyTo"}else if(note.siocreplyof.at(0)){inReplyTo=note.siocreplyof.at(0);inReplyToRel="sioc:reply_of"}if(inReplyTo&&inReplyTo.indexOf(window.location.origin+window.location.pathname)>=0){var noteData={type:"article",mode:"read",motivatedByIRI:motivatedBy,id:id,refId:refId,refLabel:refLabel,iri:noteIRI,creator:{},inReplyTo:{iri:inReplyTo,rel:inReplyToRel},body:bodyText,language:{},license:{}};if(annotatedByIRI){noteData.creator["iri"]=annotatedByIRI}if(annotatedByName){noteData.creator["name"]=annotatedByName}if(annotatedByImage){noteData.creator["image"]=annotatedByImage}if(bodyLanguage){noteData.language["code"]=bodyLanguage}if(licenseIRI){noteData.license["iri"]=licenseIRI}if(datetime){noteData.datetime=datetime}DO.U.addInteraction(noteData);DO.C.Activity[noteIRI]["Graph"]=g}else{console.log(noteIRI+" is not an oa:Annotation, as:inReplyTo, sioc:reply_of")}}},showCitations:function(citation,g){var cEURL=uri.stripFragmentFromString(citation.citingEntity);if(DO.C.Activity[cEURL]){if(DO.C.Activity[cEURL]["Graph"]){DO.U.addCitation(citation,DO.C.Activity[cEURL]["Graph"])}else{window.setTimeout(DO.U.showCitations,1e3,citation,g)}}else{DO.C.Activity[cEURL]={};DO.U.processCitationClaim(citation)}},processCitationClaim:function(citation){var pIRI=uri.getProxyableIRI(citation.citingEntity);return fetcher.getResourceGraph(pIRI).then(function(i){var cEURL=uri.stripFragmentFromString(citation.citingEntity);DO.C.Activity[cEURL]["Graph"]=i;var s=i.child(citation.citingEntity);DO.U.addCitation(citation,s)})},addCitation:function(citation,s){var citingEntity=citation.citingEntity;var citationCharacterization=citation.citationCharacterization;var citedEntity=citation.citedEntity;var documentURL=uri.stripFragmentFromString(document.location.href);s=s.child(citingEntity);var citationCharacterizationLabel=DO.C.Citation[citationCharacterization]||citationCharacterization;var id=String(Math.abs(util.hashCode(citingEntity)));var refId;var cEURL=uri.stripFragmentFromString(citingEntity);var citingEntityLabel=DO.U.getResourceLabel(s);if(!citingEntityLabel){var cEL=DO.U.getResourceLabel(s.child(cEURL));citingEntityLabel=cEL?cEL:citingEntity}citation["citingEntityLabel"]=citingEntityLabel;var citedEntityLabel=DO.U.getResourceLabel(DO.C.ResourceInfo.graph.child(citedEntity));if(!citedEntityLabel){var cEL=DO.C.ResourceInfo.graph(DO.C.ResourceInfo.graph.child(uri.stripFragmentFromString(citedEntity)));citedEntityLabel=cEL?cEL:citedEntity}citation["citedEntityLabel"]=citedEntityLabel;var noteData={id:id,iri:citingEntity,type:"ref-citation",mode:"read",citation:citation};var noteDataHTML=DO.U.createNoteDataHTML(noteData);var asideNote='\n<aside class="note do">\n<blockquote cite="'+citingEntity+'">'+noteDataHTML+"</blockquote>\n</aside>\n";var asideNode=util.fragmentFromString(asideNote);var fragment,fragmentNode;fragment=uri.getFragmentFromString(citedEntity);fragmentNode=document.querySelector('[id="'+fragment+'"]');if(fragmentNode){containerNode=fragmentNode;refId=fragment;containerNode.appendChild(asideNode);DO.U.positionNote(refId,id,citingEntityLabel)}else{var dl;var citingItem='<li><a about="'+citingEntity+'" href="'+citingEntity+'" rel="'+citationCharacterization+'" resource="'+citedEntity+'">'+citingEntityLabel+"</a> ("+citationCharacterizationLabel+")</li>";var documentCitedBy="document-cited-by";var citedBy=document.getElementById(documentCitedBy);if(citedBy){var ul=citedBy.querySelector("ul");var spo=ul.querySelector('[about="'+citingEntity+'"][rel="'+citationCharacterization+'"][resource="'+citedEntity+'"]');if(!spo){ul.appendChild(util.fragmentFromString(citingItem))}}else{dl='        <dl class="do" id="'+documentCitedBy+'"><dt>Cited By</dt><dd><ul>'+citingItem+"</ul></dl>";doc.insertDocumentLevelHTML(document,dl,{id:documentCitedBy})}}},addInteraction:function(noteData){var interaction=DO.U.createNoteDataHTML(noteData);var interactions=document.getElementById("document-interactions");if(!interactions){interactions=doc.selectArticleNode(document);var interactionsSection='<section id="document-interactions"><h2>Interactions</h2><div>';interactionsSection+="</div></section>";interactions.insertAdjacentHTML("beforeend",interactionsSection)}interactions=document.querySelector("#document-interactions > div");interactions.insertAdjacentHTML("beforeend",interaction)},createNoteDataHTML:function(n){var published="";var lang="",xmlLang="",language="";var license="";var creator="",authors="",creatorImage="",creatorNameIRI="",creatorURLNameIRI="";var hasTarget="",annotationTextSelector="",target="";var inbox="";var heading,hX;var aAbout="",aPrefix="";var noteType="";var body="";var buttonDelete="";var note="";var targetLabel="";var articleClass="";var prefixes=' prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# schema: http://schema.org/ dcterms: http://purl.org/dc/terms/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams# ldp: http://www.w3.org/ns/ldp#"';var canonicalId=n.canonical||"urn:uuid:"+util.generateUUID();var motivatedByIRI=n.motivatedByIRI||"";var motivatedByLabel="";switch(motivatedByIRI){case"oa:replying":default:motivatedByIRI="oa:replying";motivatedByLabel="replies";targetLabel="In reply to";aAbout="mode"in n&&n.mode=="object"?"#"+n.id:"";aPrefix=prefixes;break;case"oa:assessing":motivatedByLabel="reviews";targetLabel="Review of";aAbout="mode"in n&&n.mode=="object"?"#"+n.id:"";aPrefix=prefixes;break;case"oa:questioning":motivatedByLabel="questions";targetLabel="Questions";aAbout="mode"in n&&n.mode=="object"?"#"+n.id:"";aPrefix=prefixes;break;case"oa:describing":motivatedByLabel="describes";targetLabel="Describes";aAbout="#"+n.id;break;case"oa:commenting":motivatedByLabel="comments";targetLabel="Comments on";aAbout="#"+n.id;break;case"oa:bookmarking":motivatedByLabel="bookmarks";targetLabel="Bookmarked";aAbout="mode"in n&&n.mode=="object"?"#"+n.id:"";aPrefix=prefixes;break}switch(n.mode){default:case"read":hX=3;if("creator"in n&&"iri"in n.creator&&n.creator.iri==DO.C.User.IRI){buttonDelete='<button class="delete do" title="Delete item">'+template.Icon[".fas.fa-trash-alt"]+"</button>"}articleClass=motivatedByIRI=="oa:commenting"?"":' class="do"';aAbout="iri"in n?n.iri:"";break;case"write":hX=1;break;case"object":hX=2;break}var creatorName="";var creatorIRI="#agent";if("creator"in n){if("image"in n.creator){var img=n.mode=="read"?uri.getProxyableIRI(n.creator.image):n.creator.image;creatorImage='<img alt="" height="48" rel="schema:image" src="'+img+'" width="48" /> '}if("iri"in n.creator){creatorIRI=n.creator.iri}if("name"in n.creator){creatorName=n.creator.name;creatorNameIRI='<span about="'+creatorIRI+'" property="schema:name">'+creatorName+"</span>"}else{creatorNameIRI=DO.C.SecretAgentNames[Math.floor(Math.random()*DO.C.SecretAgentNames.length)]}creatorURLNameIRI="url"in n.creator?'<a href="'+n.creator.url+'" rel="schema:url">'+creatorNameIRI+"</a>":'<a href="'+creatorIRI+'">'+creatorNameIRI+"</a>";creator='<span about="'+creatorIRI+'" typeof="schema:Person">'+creatorImage+creatorURLNameIRI+"</span>";authors='<dl class="author-name"><dt>Authors</dt><dd><span rel="schema:creator">'+creator+"</span></dd></dl>"}heading="<h"+hX+' property="schema:name">'+creatorName+' <span rel="oa:motivatedBy" resource="'+motivatedByIRI+'">'+motivatedByLabel+"</span></h"+hX+">";if("inbox"in n&&typeof n.inbox!=="undefined"){inbox='<dl class="inbox"><dt>Notifications Inbox</dt><dd><a href="'+n.inbox+'" rel="ldp:inbox">'+n.inbox+"</a></dd></dl>"}if("datetime"in n&&typeof n.datetime!=="undefined"){var time='<time datetime="'+n.datetime+'" datatype="xsd:dateTime" property="schema:datePublished" content="'+n.datetime+'">'+n.datetime.substr(0,19).replace("T"," ")+"</time>";var timeLinked="iri"in n?'<a href="'+n.iri+'">'+time+"</a>":time;published='<dl class="published"><dt>Published</dt><dd>'+timeLinked+"</dd></dl>"}if(n.language&&"code"in n.language){language=DO.U.createLanguageHTML(n.language,{property:"dcterms:language",label:"Language"});lang=' lang="'+n.language.code+'"';xmlLang=' xml:lang="'+n.language.code+'"'}if(n.license&&"iri"in n.license){license=DO.U.createLicenseHTML(n.license,{rel:"dcterms:rights",label:"Rights"})}switch(n.type){case"article":case"note":case"bookmark":case"approve":case"disapprove":case"specificity":if(typeof n.target!=="undefined"||typeof n.inReplyTo!=="undefined"){if(typeof n.body!=="undefined"){if(typeof n.body==="object"&&"purpose"in n.body){if("describing"in n.body.purpose&&"text"in n.body.purpose.describing){body+='<section id="note-'+n.id+'" rel="oa:hasBody" resource="#note-'+n.id+'"><h'+(hX+1)+' property="schema:name" rel="oa:hasPurpose" resource="oa:describing">Note</h'+(hX+1)+">"+language+'<div datatype="rdf:HTML"'+lang+' property="rdf:value schema:description" resource="#note-'+n.id+'" typeof="oa:TextualBody"'+xmlLang+">"+n.body.purpose.describing.text+"</div></section>"}if("tagging"in n.body.purpose&&"text"in n.body.purpose.tagging){var tagsArray=[];n.body.purpose.tagging.text.split(",").forEach(function(i){var tag=DO.U.htmlEntities(i.trim());if(tag.length>0){tagsArray.push(tag)}});if(tagsArray.length>0){tagsArray=util.uniqueArray(tagsArray);body+='<dl id="tags" class="tags"><dt>Tags</dt><dd><ul rel="oa:hasBody">';tagsArray.forEach(function(i){body+='<li about="#tag-'+util.generateAttributeId(null,i)+'" typeof="oa:TextualBody" property="rdf:value" rel="oa:hasPurpose" resource="oa:tagging" datatype="rdf:HTML">'+i+"</li>"});body+="</ul></dd></dl>"}}}else if(n.body.length>0){body+='<section id="note-'+n.id+'" rel="oa:hasBody" resource="#note-'+n.id+'"><h'+(hX+1)+' property="schema:name">Note</h'+(hX+1)+">"+language+license+'<div datatype="rdf:HTML"'+lang+' property="rdf:value schema:description" resource="#note-'+n.id+'" typeof="oa:TextualBody"'+xmlLang+">"+n.body+"</div></section>"}}var targetIRI="";var targetRelation="oa:hasTarget";if(typeof n.target!=="undefined"&&"iri"in n.target){targetIRI=n.target.iri;var targetIRIFragment=uri.getFragmentFromString(n.target.iri);if(typeof n.target.selector!=="undefined"){var selectionLanguage="language"in n.target.selector&&n.target.selector.language?n.target.selector.language:"";annotationTextSelector='<div rel="oa:hasSelector" resource="#fragment-selector" typeof="oa:FragmentSelector"><dl class="conformsto"><dt>Fragment selector conforms to</dt><dd><a content="'+targetIRIFragment+'" lang="" property="rdf:value" rel="dcterms:conformsTo" href="https://tools.ietf.org/html/rfc3987" xml:lang="">RFC 3987</a></dd></dl><dl rel="oa:refinedBy" resource="#text-quote-selector" typeof="oa:TextQuoteSelector"><dt>Refined by</dt><dd><span lang="'+selectionLanguage+'" property="oa:prefix" xml:lang="'+selectionLanguage+'">'+n.target.selector.prefix+'</span><mark lang="'+selectionLanguage+'" property="oa:exact" xml:lang="'+selectionLanguage+'">'+n.target.selector.exact+'</mark><span lang="'+selectionLanguage+'" property="oa:suffix" xml:lang="'+selectionLanguage+'">'+n.target.selector.suffix+"</span></dd></dl></div>"}}else if(typeof n.inReplyTo!=="undefined"&&"iri"in n.inReplyTo){targetIRI=n.inReplyTo.iri;targetRelation="rel"in n.inReplyTo?n.inReplyTo.rel:"as:inReplyTo"}hasTarget='<a href="'+targetIRI+'" rel="'+targetRelation+'">'+targetLabel+"</a>";if(typeof n.target!=="undefined"&&typeof n.target.source!=="undefined"){hasTarget+=' (<a about="'+n.target.iri+'" href="'+n.target.source+'" rel="oa:hasSource" typeof="oa:SpecificResource">part of</a>)'}var targetLanguage="language"in n.target&&n.target?'<dl><dt>Language</dt><dd><span lang="" property="dcterms:language" xml:lang="">'+n.target.language+"</span></dd></dl>":"";target='<dl class="target"><dt>'+hasTarget+"</dt>";if(typeof n.target!=="undefined"&&typeof n.target.selector!=="undefined"){target+='<dd><blockquote about="'+targetIRI+'" cite="'+targetIRI+'">'+targetLanguage+annotationTextSelector+"</blockquote></dd>"}target+="</dl>";target+='<dl class="renderedvia"><dt>Rendered via</dt><dd><a about="'+targetIRI+'" href="https://dokie.li/" rel="oa:renderedVia">dokieli</a></dd></dl>';var canonical='<dl class="canonical"><dt>Canonical</dt><dd rel="oa:canonical" resource="'+canonicalId+'">'+canonicalId+"</dd></dl>";note='<article about="'+aAbout+'" id="'+n.id+'" typeof="oa:Annotation'+noteType+'"'+aPrefix+articleClass+">"+buttonDelete+"\n  "+heading+"\n  "+authors+"\n  "+published+"\n  "+license+"\n  "+inbox+"\n  "+canonical+"\n  "+target+"\n  "+body+"\n</article>"}break;case"ref-footnote":var citationURL=typeof n.citationURL!=="undefined"&&n.citationURL!=""?'<a href="'+n.citationURL+'" rel="rdfs:seeAlso">'+n.citationURL+"</a>":"";var body=typeof n.body!=="undefined"&&n.body!=""?citationURL?", "+n.body:n.body:"";note='\n  <dl about="#'+n.id+'" id="'+n.id+'" typeof="oa:Annotation">\n    <dt><a href="#'+n.refId+'" rel="oa:hasTarget">'+n.refLabel+'</a><meta rel="oa:motivation" resource="'+motivatedByIRI+'" /></dt>\n    <dd rel="oa:hasBody" resource="#n-'+n.id+'"><div datatype="rdf:HTML" property="rdf:value" resource="#n-'+n.id+'" typeof="oa:TextualBody">'+citationURL+body+"</div></dd>\n  </dl>\n";break;case"ref-citation":heading="<h"+hX+">Citation</h"+hX+">";var citingEntityLabel="citingEntityLabel"in n.citation?n.citation.citingEntityLabel:n.citation.citingEntity;var citationCharacterizationLabel=DO.C.Citation[n.citation.citationCharacterization]||n.citation.citationCharacterization;var citedEntityLabel="citedEntityLabel"in n.citation?n.citation.citedEntityLabel:n.citation.citedEntity;var citation='\n  <dl about="'+n.citation.citingEntity+'">\n    <dt>Cited by</dt><dd><a href="'+n.citation.citingEntity+'">'+citingEntityLabel+'</a></dd>\n    <dt>Citation type</dt><dd><a href="'+n.citation.citationCharacterization+'">'+citationCharacterizationLabel+'</a></dd>\n    <dt>Cites</dt><dd><a href="'+n.citation.citedEntity+'" property="'+n.citation.citationCharacterization+'">'+citedEntityLabel+"</a></dd>\n  </dl>\n";note='<article about="'+aAbout+'" id="'+n.id+'" prefixes="cito: http://purl.org/spart/cito/"'+articleClass+">\n  "+heading+"\n  "+citation+"\n</article>";break;default:break}return note},createLicenseHTML:function(n,options){var license="";var rel=options&&options.rel?options.rel:"schema:license";var label=options&&options.label?options.label:"License";if(typeof n.iri!=="undefined"){license='<dl class="'+label.toLowerCase()+'"><dt>'+label+"</dt><dd>";if("name"in n){var title="description"in n?' title="'+n.description+'"':"";license+='<a href="'+n.iri+'" rel="'+rel+'"'+title+">"+n.name+"</a>"}else{var licenseName=n.iri,licenseDescription=n.iri;if(n.iri in DO.C.License){licenseName=DO.C.License[n.iri].name;licenseDescription=DO.C.License[n.iri].description}license+='<a href="'+n.iri+'" rel="'+rel+'" title="'+licenseDescription+'">'+licenseName+"</a>"}license+="</dd></dl>"}return license},createLanguageHTML:function(n,options){var language="";var property=options&&options.language?options.language:"dcterms:language";var label=options&&options.label?options.label:"Language";if(typeof n.code!=="undefined"){n["name"]=n.name||DO.C.Languages[n.code]||n.code;language='<dl class="'+label.toLowerCase()+'"><dt>'+label+"</dt><dd>";language+='<span content="'+n.code+'" lang="" property="'+property+'" xml:lang="">'+n.name+"</span>";language+="</dd></dl>"}return language},getAnnotationInboxLocationHTML:function(){var s="",inputs=[],checked="";if(DO.C.User.TypeIndex&&DO.C.User.TypeIndex[DO.C.Vocab["asAnnounce"]["@id"]]){if(DO.C.User.UI&&DO.C.User.UI["annotationInboxLocation"]&&DO.C.User.UI.annotationInboxLocation["checked"]){checked=' checked="checked"'}s='<input type="checkbox" id="annotation-inbox" name="annotation-inbox"'+checked+' /><label for="annotation-inbox">Inbox</label>'}return s},getAnnotationLocationHTML:function(){var s="",inputs=[],checked="";if(typeof DO.C.AnnotationService!=="undefined"){if(DO.C.User.Storage&&DO.C.User.Storage.length>0||DO.C.User.Outbox&&DO.C.User.Outbox.length>0){if(DO.C.User.UI&&DO.C.User.UI["annotationLocationService"]&&DO.C.User.UI.annotationLocationService["checked"]){checked=' checked="checked"'}}else{checked=' checked="checked" disabled="disabled"'}inputs.push('<input type="checkbox" id="annotation-location-service" name="annotation-location-service"'+checked+' /><label for="annotation-location-service">Annotation service</label>')}checked=' checked="checked"';if(DO.C.User.Storage&&DO.C.User.Storage.length>0||DO.C.User.Outbox&&DO.C.User.Outbox.length>0){if(DO.C.User.UI&&DO.C.User.UI["annotationLocationPersonalStorage"]&&!DO.C.User.UI.annotationLocationPersonalStorage["checked"]){checked=""}inputs.push('<input type="checkbox" id="annotation-location-personal-storage" name="annotation-location-personal-storage"'+checked+' /><label for="annotation-location-personal-storage">Personal storage</label>')}s="Store at: "+inputs.join("");return s},getPublicationStatusOptionsHTML:function(options){options=options||{};var s="",selectedIRI="";if("selected"in options){selectedIRI=options.selected;if(selectedIRI==""){s+='<option selected="selected" value="">Choose a publication status</option>'}}else{selectedIRI=DO.C.Vocab["psodraft"]["@id"]}Object.keys(DO.C.PublicationStatus).forEach(function(iri){var selected=iri==selectedIRI?' selected="selected"':"";s+='<option value="'+iri+'" title="'+DO.C.PublicationStatus[iri].description+'"'+selected+">"+DO.C.PublicationStatus[iri].name+"</option>"});return s},getLanguageOptionsHTML:function(options){options=options||{};var s="",selectedLang="";if("selected"in options){selectedLang=options.selected;if(selectedLang==""){s+='<option selected="selected" value="">Choose a language</option>'}}else if(typeof DO.C.User.UI.Language!=="undefined"){selectedLang=DO.C.User.UI.Language}else{selectedLang="en"}Object.keys(DO.C.Languages).forEach(function(lang){selected=lang==selectedLang?' selected="selected"':"";s+="<option"+selected+' value="'+lang+'">'+DO.C.Languages[lang]+"</option>"});return s},getLicenseOptionsHTML:function(options){options=options||{};var s="",selectedIRI="";if("selected"in options){selectedIRI=options.selected;if(selectedIRI==""){s+='<option selected="selected" value="">Choose a license</option>'}}else if(typeof DO.C.User.UI.License!=="undefined"){selectedIRI=DO.C.User.UI.License}else{selectedIRI="https://creativecommons.org/licenses/by/4.0/"}Object.keys(DO.C.License).forEach(function(iri){if(iri!="NoLicense"){var selected=iri==selectedIRI?' selected="selected"':"";s+='<option value="'+iri+'" title="'+DO.C.License[iri].description+'"'+selected+">"+DO.C.License[iri].name+"</option>"}});return s},getCitationOptionsHTML:function(type){var type=type||"cites";var s="";Object.keys(DO.C.Citation).forEach(function(iri){s+='<option value="'+iri+'">'+DO.C.Citation[iri]+"</option>"});return s},initMath:function(config){if(!DO.C.MathAvailable){return}config=config||{skipTags:["script","noscript","style","textarea","pre","code","math"],ignoreClass:"equation",MathML:{useMathMLspacing:true},tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],processEscapes:true},asciimath2jax:{delimiters:[["$","$"],["`","`"]]}};MathJax.Hub.Config(config);MathJax.Hub.Register.StartupHook("End Jax",function(){var BROWSER=MathJax.Hub.Browser;var jax="SVG";if(BROWSER.isMSIE&&BROWSER.hasMathPlayer)jax="NativeMML";if(BROWSER.isFirefox)jax="NativeMML";if(BROWSER.isSafari&&BROWSER.versionAtLeast("5.0"))jax="NativeMML";MathJax.Hub.setRenderer(jax)})},initSlideshow:function(options){options=options||{};options.progress=options.progress||true;if(document.body.classList.contains("shower")){if(!document.body.querySelector(".progress")&&options.progress){document.body.appendChild(util.fragmentFromString('<div class="progress"></progress>'))}shwr=new shower;shwr.start()}},Editor:{disableEditor:function(e){DO.C.EditorEnabled=false;DO.C.User.Role="social";DO.U.updateDocumentTitle();return DO.U.Editor.MediumEditor.destroy()},enableEditor:function(editorMode,e,selector){if(typeof DO.U.Editor.MediumEditor!=="undefined"){DO.U.Editor.disableEditor()}if(e||typeof e==="undefined"&&editorMode=="author"){doc.showActionMessage(document.documentElement,"Activated <strong>"+editorMode+"</strong> mode.")}if(!document.getElementById("document-editor")){document.documentElement.appendChild(util.fragmentFromString('<aside id="document-editor" class="do"></aside>'))}var editorOptions={author:{id:"author",elementsContainer:document.getElementById("document-editor"),placeholder:{text:["Make it so!","This is not a Paper","Cogito Ergo Sum","Do One Thing and Do It Well","Free Your Mind","Do or Do Not"][Math.floor(Math.random()*6)]},disableDoubleReturn:true,paste:{forcePlainText:false,cleanPastedHTML:true,cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["area","basefont","br","font","hr","isindex","link","script","style","wbr"]},buttonLabels:DO.C.Editor.ButtonLabelType,toolbar:{buttons:["h2","h3","h4","em","strong","orderedlist","unorderedlist","code","pre","anchor","q","image","sparkline","rdfa","cite","note"],diffLeft:0,diffTop:-10,allowMultiParagraphSelection:false},anchorPreview:false,extensions:{h2:new DO.U.Editor.Button({action:"h2",label:"h2"}),h3:new DO.U.Editor.Button({action:"h3",label:"h3"}),h4:new DO.U.Editor.Button({action:"h4",label:"h4"}),em:new DO.U.Editor.Button({action:"em",label:"em"}),strong:new DO.U.Editor.Button({action:"strong",label:"strong"}),code:new DO.U.Editor.Button({action:"code",label:"code"}),q:new DO.U.Editor.Button({action:"q",label:"q"}),image:new DO.U.Editor.Button({action:"image",label:"image"}),sparkline:new DO.U.Editor.Note({action:"sparkline",label:"sparkline"}),rdfa:new DO.U.Editor.Note({action:"rdfa",label:"rdfa"}),cite:new DO.U.Editor.Note({action:"cite",label:"cite"}),note:new DO.U.Editor.Note({action:"note",label:"note"})}},social:{id:"social",elementsContainer:document.getElementById("document-editor"),buttonLabels:DO.C.Editor.ButtonLabelType,toolbar:{buttons:["selector","share","approve","disapprove","specificity","bookmark","note"],allowMultiParagraphSelection:false},disableEditing:true,anchorPreview:false,extensions:{selector:new DO.U.Editor.Note({action:"selector",label:"selector"}),share:new DO.U.Editor.Note({action:"share",label:"share"}),bookmark:new DO.U.Editor.Note({action:"bookmark",label:"bookmark"}),approve:new DO.U.Editor.Note({action:"approve",label:"approve"}),disapprove:new DO.U.Editor.Note({action:"disapprove",label:"disapprove"}),specificity:new DO.U.Editor.Note({action:"specificity",label:"specificity"}),note:new DO.U.Editor.Note({action:"article",label:"note"})}}};if("MathJax"in window){editorOptions.author.extensions["math"]=new DO.U.Editor.Button({action:"math",label:"math"});editorOptions.author.toolbar.buttons.splice(7,0,"math")}if("MediumEditorTable"in window){editorOptions.author.extensions["table"]=new MediumEditorTable;editorOptions.author.toolbar.buttons.splice(10,0,"table")}var eNodes=selector||doc.selectArticleNode(document);var eOptions=editorOptions[editorMode];DO.C.User.Role=editorMode;storage.updateLocalStorageProfile(DO.C.User);if(typeof MediumEditor!=="undefined"){DO.U.Editor.MediumEditor=new MediumEditor(eNodes,eOptions);DO.C.EditorEnabled=true;if(e&&e.target.closest("button.editor-enable")){DO.C.ContentEditable=true;DO.U.updateDocumentTitle();document.querySelectorAll("i.fa-table, i.fa-link, i.fa-picture-o").forEach(function(i){var icon=template.Icon[".fas.fa-table.fa-2x"].replace(/ fa\-2x/,"");if(i.classList.contains("fa-link")>0){icon=template.Icon[".fas.fa-link"]}else if(i.classList.contains("fa-image")>0){icon=template.Icon[".fas.fa-image"]}i.parentNode.replaceChild(util.fragmentFromString(icon),i)});var documentAuthors="authors";var authors=document.getElementById(documentAuthors);var authorName="author-name";if(!authors){var authors='<div class="do" id="'+documentAuthors+'"><dl id="'+authorName+'"><dt>Authors</dt></dl></div>';doc.insertDocumentLevelHTML(document,authors,{id:documentAuthors});authors=document.getElementById(documentAuthors)}var documentURL=uri.stripFragmentFromString(document.location.href);var documentAuthorName=document.getElementById(authorName);var s=DO.C["ResourceInfo"].graph.child(documentURL);var sa=s.schemaauthor;if(DO.C.User.IRI&&sa.indexOf(DO.C.User.IRI)<0){var userHTML=auth.getUserHTML({avatarSize:32});var authorId=DO.C.User.Name?' id="'+util.generateAttributeId(null,DO.C.User.Name)+'"':"";documentAuthorName.insertAdjacentHTML("beforeend",'<dd class="do"'+authorId+' inlist="" rel="bibo:authorList" resource="'+DO.C.User.IRI+'"><span about="" rel="schema:author">'+userHTML+'</span><button class="add-author-name" contenteditable="false" title="Add author">'+template.Icon[".fas.fa-plus"]+"</button></dd>")}documentAuthorName.insertAdjacentHTML("beforeend",'<dd class="do"><button class="invite-author" contenteditable="false" title="Invite people to author">'+template.Icon[".fas.fa-bullhorn"]+"</button></dd>");authors=document.getElementById(documentAuthors);authors.addEventListener("click",function(e){var button=e.target.closest("button.add-author-name");if(button){e.target.closest("dd").removeAttribute("class");var n=e.target.closest(".do");if(n){n.removeAttribute("class")}button.parentNode.removeChild(button);doc.getResourceInfo()}if(e.target.closest("button.invite-author")){DO.U.shareResource(e);e.target.removeAttribute("disabled")}});var documentLanguage="document-language";var language=document.getElementById(documentLanguage);if(!language){var dl='        <dl class="do" id="'+documentLanguage+'"><dt>Language</dt><dd><select contenteditable="false" name="language">'+DO.U.getLanguageOptionsHTML({selected:""})+"</select></dd></dl>";doc.insertDocumentLevelHTML(document,dl,{id:documentLanguage});var dLangS=document.querySelector("#"+documentLanguage+" select");dLangS.addEventListener("change",function(e){dLangS.querySelectorAll("option").forEach(function(o){o.removeAttribute("selected")});dLangS.querySelector('option[value="'+e.target.value+'"]').setAttribute("selected","selected")})}var documentLicense="document-license";var license=document.getElementById(documentLicense);if(!license){var dl='        <dl class="do" id="'+documentLicense+'"><dt>License</dt><dd><select contenteditable="false" name="license">'+DO.U.getLicenseOptionsHTML({selected:""})+"</select></dd></dl>";doc.insertDocumentLevelHTML(document,dl,{id:documentLicense});var dLS=document.querySelector("#"+documentLicense+" select");dLS.addEventListener("change",function(e){dLS.querySelectorAll("option").forEach(function(o){o.removeAttribute("selected")});dLS.querySelector('option[value="'+e.target.value+'"]').setAttribute("selected","selected")})}var documentStatus="document-status";var status=document.getElementById(documentStatus);if(!status){var dl='        <dl class="do" id="'+documentStatus+'"><dt>Document Status</dt><dd><select contenteditable="false" name="status">'+DO.U.getPublicationStatusOptionsHTML({selected:""})+"</select></dd></dl>";doc.insertDocumentLevelHTML(document,dl,{id:documentStatus});var dSS=document.querySelector("#"+documentStatus+" select");dSS.addEventListener("change",function(e){dSS.querySelectorAll("option").forEach(function(o){o.removeAttribute("selected")});dSS.querySelector('option[value="'+e.target.value+'"]').setAttribute("selected","selected")})}}else if(e&&e.target.closest("button.editor-disable")){doc.setEditSelections()}document.querySelectorAll(".do").forEach(function(node){node.setAttribute("contenteditable","false")});return DO.U.Editor.MediumEditor}},Button:function(){if(typeof MediumEditor!=="undefined"){MediumEditor.extensions.button.prototype.defaults.unorderedlist.contentFA=template.Icon[".fas.fa-link-ul"];MediumEditor.extensions.button.prototype.defaults.orderedlist.contentFA=template.Icon[".fas.fa-link-ol"];MediumEditor.extensions.button.prototype.defaults.image.contentFA=template.Icon[".fas.fa-image"];MediumEditor.extensions.button.prototype.defaults.pre.contentFA=template.Icon[".fas.fa-code"];return MediumEditor.extensions.button.extend({init:function(){this.name=this.label;this.action=this.action;this.aria=this.label;this.tagNames=[this.action];this.useQueryState=true;this.contentDefault="<b>"+this.label+"</b>";switch(this.action){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":this.contentFA=template.Icon[".fas.fa-header"]+parseInt(this.action.slice(-1));break;case"em":this.contentFA=template.Icon[".fas.fa-italic"];break;case"strong":this.contentFA=template.Icon[".fas.fa-bold"];break;case"image":this.contentFA=template.Icon[".fas.fa-image"];break;case"q":this.contentFA=template.Icon[".fas.fa-quote-right"];break;case"math":this.contentFA=template.Icon[".fas.fa-calculator"];break;default:break}this.button=this.createButton();this.on(this.button,"click",this.handleClick.bind(this))},handleClick:function(event){event.preventDefault();event.stopPropagation();var action=this.getAction();var tagNames=this.getTagNames();var button=this.getButton();if(this.isActive()){return this.base.execAction("removeFormat")}else{var datetime=" "+DO.U.createAttributeDateTime(this.action);this.base.selectedDocument=this.document;this.base.selection=MediumEditor.selection.getSelectionHtml(this.base.selectedDocument);var selectedParentElement=this.base.getSelectedParentElement();var parentSection=MediumEditor.util.getClosestTag(selectedParentElement,"section");this.base.saveSelection();switch(this.action){case"h2":case"h3":case"h4":case"h5":case"h6":var parentSectionHeading="";for(var i=0;i<parentSection.childNodes.length;i++){parentSectionHeading=parentSection.childNodes[i].nodeName.toLowerCase();if(DO.C.Editor.headings.indexOf(parentSectionHeading)>0){break}}var pSH=parseInt(parentSectionHeading.slice(-1));var cSH=parseInt(this.action.slice(-1));var closePreviousSections="";for(i=0;i<=pSH-cSH;i++){console.log("i: "+i);closePreviousSections+="</div></section>"}var selection=window.getSelection();if(selection.rangeCount){range=selection.getRangeAt(0);parent=selectedParentElement;var sectionId=util.generateAttributeId(null,this.base.selection);var section=document.createElement("section");section.id=sectionId;section.setAttribute("rel","schema:hasPart");section.setAttribute("resource","#"+sectionId);var heading=document.createElement(tagNames[0]);heading.setAttribute("property","schema:name");heading.innerHTML=this.base.selection;var divDescription=parentSection.getElementsByTagName("div")[0];r=selection.getRangeAt(0);var r=document.createRange();r.setStart(selection.focusNode,selection.focusOffset);r.setEnd(selectedParentElement.lastChild,selectedParentElement.lastChild.length);var fragment=r.extractContents();if(fragment.firstChild.nodeType===3){var sPE=selectedParentElement.nodeName.toLowerCase();switch(sPE){case"p":default:var xSPE=document.createElement(sPE);xSPE.appendChild(fragment.cloneNode(true));fragment=util.fragmentFromString(xSPE.outerHTML);break}}r=selection.getRangeAt(0);var div=document.createElement("div");div.setAttribute("property","schema:description");div.appendChild(fragment.cloneNode(true));section.appendChild(heading);section.appendChild(div);var selectionUpdated=document.createElement("div");selectionUpdated.appendChild(section);selectionUpdated=selectionUpdated.innerHTML;if(cSH-pSH>0){MediumEditor.util.insertHTMLCommand(this.base.selectedDocument,selectionUpdated)}else{MediumEditor.selection.selectNode(parentSection,document);r=selection.getRangeAt(0);selection=window.getSelection();r=selection.getRangeAt(0);r=document.createRange();r.setStartAfter(parentSection);r.setEndAfter(parentSection);r.collapse(true);selection.removeAllRanges();selection.addRange(r);var foo=document.createElement("div");foo.appendChild(parentSection);parentSection=foo.innerHTML;MediumEditor.util.insertHTMLCommand(this.base.selectedDocument,parentSection+selectionUpdated)}}this.base.restoreSelection();this.base.checkSelection();break;case"math":var QUEUE=MathJax.Hub.Queue;var math=null;var selection=this.base.selection;var selectionId=util.generateAttributeId();var selectionUpdated='<span id="'+selectionId+'">$$</span>';MediumEditor.util.insertHTMLCommand(this.base.selectedDocument,selectionUpdated);MathJax.Hub.Queue(["Typeset",MathJax.Hub,selectionId]);var math=MathJax.Hub.getAllJax(selectionId)[0];MathJax.Hub.Queue(["Text",math,selection]);MediumEditor.selection.selectNode(document.getElementById(selectionId),document);break;default:var selectionUpdated="<"+tagNames[0]+datetime+">"+this.base.selection+"</"+tagNames[0]+">";if(this.action=="image"){var imgOptions=this.base.selection.split("|");var src=imgOptions[0];var alt="";var width="";var height="";switch(imgOptions.length){case 1:default:src=imgOptions[0];break;case 2:alt=imgOptions[1];break;case 3:width=' width="'+imgOptions[1]+'"';var widthHeight=imgOptions[1].split("x");if(widthHeight.length==2){width=' width="'+widthHeight[0]+'"';height=' height="'+widthHeight[1]+'"'}alt=imgOptions[2];break;case 4:var figure=imgOptions[1];width=' width="'+imgOptions[2]+'"';var widthHeight=imgOptions[2].split("x");if(widthHeight.length==2){width=' width="'+widthHeight[0]+'"';height=' height="'+widthHeight[1]+'"'}alt=imgOptions[3];break}selectionUpdated='<img alt="'+alt+'"'+height+' src="'+src+'"'+width+" />";if(imgOptions.length==4){selectionUpdated="<figure>"+selectionUpdated+"<figcaption>"+alt+"</figcaption></figure>"}}MediumEditor.util.insertHTMLCommand(this.base.selectedDocument,selectionUpdated);this.base.restoreSelection();this.base.checkSelection();break}this.setActive()}}})}}(),Note:function(){if(typeof MediumEditor!=="undefined"){return MediumEditor.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:false,placeholderText:"What’s up?",targetCheckbox:false,targetCheckboxText:"Open in new window",init:function(){this.name=this.label;this.action=this.action;this.aria=this.label;this.tagNames=[this.action];this.useQueryState=true;this.contentDefault="<b>"+this.label+"</b>";this.signInRequired=false;switch(this.action){case"cite":default:this.contentFA=template.Icon[".fas.fa-hashtag"];break;case"article":this.contentFA=template.Icon[".fas.fa-sticky-note"];this.signInRequired=true;break;case"note":this.contentFA=template.Icon[".fas.fa-sticky-note"];break;case"rdfa":this.contentFA=template.Icon[".fas.fa-rocket"];break;case"selector":this.contentFA=template.Icon[".fas.fa-anchor"];break;case"bookmark":this.contentFA=template.Icon[".fas.fa-bookmark"];this.signInRequired=true;break;case"share":this.contentFA=template.Icon[".fas.fa-bullhorn"];this.signInRequired=true;break;case"approve":this.contentFA=template.Icon[".fas.fa-thumbs-up"];this.signInRequired=true;break;case"disapprove":this.contentFA=template.Icon[".fas.fa-thumbs-down"];this.signInRequired=true;break;case"specificity":this.contentFA=template.Icon[".fas.fa-crosshairs"];this.signInRequired=true;break;case"sparkline":this.contentFA=template.Icon[".fas.fa-chart-line"];break}MediumEditor.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(event){event.preventDefault();event.stopPropagation();var _this=this;var showAction=function(){switch(_this.action){default:var range=MediumEditor.selection.getSelectionRange(_this.document);if(range.startContainer.nodeName.toLowerCase()==="a"||range.endContainer.nodeName.toLowerCase()==="a"||MediumEditor.util.getClosestTag(MediumEditor.selection.getSelectedParentElement(range),"a")){return _this.execAction("unlink")}if(DO.U.Editor.MediumEditor.options.id=="social"&&_this.action=="selector"){var opts={license:"https://creativecommons.org/licenses/by/4.0/",content:"Liked"};_this.completeFormSave(opts)}else if(!_this.isDisplayed()){_this.showForm()}break;case"share":_this.base.restoreSelection();var resourceIRI=uri.stripFragmentFromString(document.location.href);var node=_this.base.getSelectedParentElement().closest("[id]");resourceIRI=node&&node.id?resourceIRI+"#"+node.id:resourceIRI;_this.window.getSelection().removeAllRanges();_this.base.checkSelection();DO.U.shareResource(null,resourceIRI);break}};var updateAnnotationServiceForm=function(){var annotationServices=document.querySelectorAll(".annotation-location-selection");for(var i=0;i<annotationServices.length;i++){annotationServices[i].innerHTML=DO.U.getAnnotationLocationHTML()}};var updateAnnotationInboxForm=function(){var annotationInbox=document.querySelectorAll(".annotation-inbox");for(var i=0;i<annotationInbox.length;i++){annotationInbox[i].innerHTML=DO.U.getAnnotationInboxLocationHTML()}};updateAnnotationServiceForm();updateAnnotationInboxForm();return fetcher.getLinkRelation(DO.C.Vocab["oaannotationService"]["@id"]).then(function(url){DO.C.AnnotationService=url[0];showAction()},function(reason){if(_this.signInRequired&&!DO.C.User.IRI){auth.showUserIdentityInput()}else{showAction()}})},handleKeydown:function(event){if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.K)&&MediumEditor.util.isMetaCtrlKey(event)&&!event.shiftKey){this.handleClick(event)}},getForm:function(){if(!this.form){this.form=this.createForm()}return this.form},getTemplate:function(){var tmpl=[];switch(this.action){case"rdfa":tmpl=['<label for="rdfa-about">about</label><input id="rdfa-about" class="medium-editor-toolbar-input" placeholder="https://example.org/foo#bar" /><br/>','<label for="rdfa-resource">resource</label><input id="rdfa-resource" class="medium-editor-toolbar-input" placeholder="https://example.net/baz" /><br/>','<label for="rdfa-typeof">typeof</label><input id="rdfa-typeof" class="medium-editor-toolbar-input" placeholder="https://example.net/baz" /><br/>','<label for="rdfa-rel">rel</label><input id="rdfa-rel" class="medium-editor-toolbar-input" placeholder="schema:url"><br/>','<label for="rdfa-property">property</label><input id="rdfa-property" class="medium-editor-toolbar-input" placeholder="schema:name" /><br/>','<label for="rdfa-href">href</label><input id="rdfa-href" class="medium-editor-toolbar-input" placeholder="https://example.net/baz" /><br/>','<label for="rdfa-content">content</label><input id="rdfa-content" class="medium-editor-toolbar-input" placeholder="Baz" /><br/>','<label for="rdfa-language">language</label><input id="rdfa-language" class="medium-editor-toolbar-input" placeholder="en" /><br/>','<label for="rdfa-datatype">datatype</label><input id="rdfa-datatype" class="medium-editor-toolbar-input" placeholder="https://example.net/baz" /><br/>'];break;case"article":tmpl=['<textarea id="article-content" name="content" cols="20" rows="5" class="medium-editor-toolbar-textarea" placeholder="',this.placeholderText,'"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>",'<select id="article-license" name="license" class="medium-editor-toolbar-select">',DO.U.getLicenseOptionsHTML(),"</select>",'<span class="annotation-location-selection">'+DO.U.getAnnotationLocationHTML()+"</span>",'<span class="annotation-inbox">'+DO.U.getAnnotationInboxLocationHTML()+"</span>"];break;case"note":tmpl=['<label for="bookmark-tagging">Tags</label> <input id="bookmark-tagging" class="medium-editor-toolbar-input" placeholder="Separate tags with commas" /><br/>','<textarea id="article-content" name="content" cols="20" rows="1" class="medium-editor-toolbar-textarea" placeholder="',this.placeholderText,'"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>",'<select id="article-license" name="license" class="medium-editor-toolbar-select">',DO.U.getLicenseOptionsHTML(),"</select>"];break;case"approve":tmpl=['<textarea id="approve-content" name="content" cols="20" rows="2" class="medium-editor-toolbar-textarea" placeholder="Strong point? Convincing argument?"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>",'<select id="approve-license" name="license" class="medium-editor-toolbar-select">',DO.U.getLicenseOptionsHTML(),"</select>",'<span class="annotation-location-selection">'+DO.U.getAnnotationLocationHTML()+"</span>",'<span class="annotation-inbox">'+DO.U.getAnnotationInboxLocationHTML()+"</span>"];break;case"disapprove":tmpl=['<textarea id="disapprove-content" name="content" cols="20" rows="2" class="medium-editor-toolbar-textarea" placeholder="Weak point? Error? Inaccurate?"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>",'<select id="disapprove-license" name="license" class="medium-editor-toolbar-select">',DO.U.getLicenseOptionsHTML(),"</select>",'<span class="annotation-location-selection">'+DO.U.getAnnotationLocationHTML()+"</span>",'<span class="annotation-inbox">'+DO.U.getAnnotationInboxLocationHTML()+"</span>"];break;case"specificity":tmpl=['<textarea id="specificity-content" name="content" cols="20" rows="2" class="medium-editor-toolbar-textarea" placeholder="Citation or specificity needed?"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>",'<select id="specificity-license" name="license" class="medium-editor-toolbar-select">',DO.U.getLicenseOptionsHTML(),"</select>",'<span class="annotation-location-selection">'+DO.U.getAnnotationLocationHTML()+"</span>",'<span class="annotation-inbox">'+DO.U.getAnnotationInboxLocationHTML()+"</span>"];break;case"cite":tmpl=['<input type="radio" name="citation-type" value="ref-footnote" id="ref-footnote" /> <label for="ref-footnote">Footnote</label>','<input type="radio" name="citation-type" value="ref-reference" id="ref-reference" /> <label for="ref-reference">Reference</label>','<select id="citation-relation" name="citation-relation" class="medium-editor-toolbar-select">',DO.U.getCitationOptionsHTML(),"</select>",'<input type="text" name="citation-url" value="" id="citation-url" class="medium-editor-toolbar-input" placeholder="http://example.org/article#results" />','<textarea id="citation-content" cols="20" rows="1" class="medium-editor-toolbar-textarea" placeholder="',this.placeholderText,'"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>"];break;case"bookmark":tmpl=['<label for="bookmark-tagging">Tags</label> <input id="bookmark-tagging" class="medium-editor-toolbar-input" placeholder="Separate tags with commas" /><br/>','<textarea id="bookmark-content" name="content" cols="20" rows="2" class="medium-editor-toolbar-textarea" placeholder="Description"></textarea>','<select id="article-language" name="language" class="medium-editor-toolbar-select">',DO.U.getLanguageOptionsHTML(),"</select>"];break;case"sparkline":tmpl=['<input type="text" name="sparkline-search" value="" id="sparkline-search" class="medium-editor-toolbar-input" placeholder="Enter search terms" /><br/>','<input type="hidden" name="sparkline-selection-dataset" value="" id="sparkline-selection-dataset" />','<input type="hidden" name="sparkline-selection-refarea" value="" id="sparkline-selection-refarea" />'];break;default:tmpl=['<textarea cols="20" rows="1" class="medium-editor-toolbar-textarea" placeholder="',this.placeholderText,'"></textarea>'];break}tmpl.push('<a href="#" class="medium-editor-toolbar-save" title="Save">',this.getEditorOption("buttonLabels")==="fontawesome"?template.Icon[".fas.fa-check"]:this.formSaveLabel,"</a>");tmpl.push('<a href="#" class="medium-editor-toolbar-close" title="Close">',this.getEditorOption("buttonLabels")==="fontawesome"?template.Icon[".fas.fa-times"]:this.formCloseLabel,"</a>");if(this.targetCheckbox){tmpl.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-textarea-target">',"<label>",this.targetCheckboxText,"</label>","</div>")}if(this.customClassOption){tmpl.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-textarea-button">',"<label>",this.customClassOptionText,"</label>","</div>")}return tmpl.join("")},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none";this.getInput().value=""},showForm:function(opts){var _this=this;var input=this.getInput(),targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox();opts=opts||{url:""};if(typeof opts==="string"){opts={url:opts}}var initialSelectedParentElement=this.base.getSelectedParentElement();var initialSelectionState=MediumEditor.selection.exportSelection(initialSelectedParentElement,this.document);var selection=MediumEditor.selection.getSelectionHtml(this.document).trim();this.base.saveSelection();this.hideToolbarDefaultActions();var form=this.getForm();form.style.display="block";this.setToolbarPosition();input.value=opts.url;switch(this.action){case"rdfa":input.about.focus();break;case"article":case"note":case"approve":case"disapprove":case"specificity":input.content.focus();break;case"cite":input.url.focus();document.querySelector('.medium-editor-toolbar-form input[name="citation-type"]').checked=true;break;case"sparkline":input.search.focus();input.search.value=selection;var inputSearch=function(e){if(e.which==13){e.preventDefault();e.stopPropagation();_this.base.restoreSelection();MediumEditor.util.insertHTMLCommand(document,e.target.value);var selection={start:initialSelectionState.start,end:initialSelectionState.start+e.target.value.length};MediumEditor.selection.importSelection(selection,initialSelectedParentElement,document);_this.base.checkSelection();e.target.setAttribute("data-event-keyup-enter",true);_this.showForm();return}};if(!input.search.getAttribute("data-event-keyup-enter")){input.search.addEventListener("keyup",inputSearch,false)}var sparqlEndpoint="http://worldbank.270a.info/";var resourceType="<http://purl.org/linked-data/cube#DataSet>";var sparklineGraphId="sparkline-graph";var resultContainerId="sparkline-select";var lang="en";var textInputA=selection.split(" of ")[0];var textInputB=selection.substr(selection.indexOf(" of ")+4);if(!DO.C.RefAreas[textInputB.toUpperCase()]){Object.keys(DO.C.RefAreas).forEach(function(key){if(DO.C.RefAreas[key].toLowerCase()==textInputB.toLowerCase()){textInputB=key}})}var sG=document.getElementById(sparklineGraphId);if(sG){sG.parentNode.removeChild(sG)}if(!DO.C.RefAreas[textInputB.toUpperCase()]){var refAreas;Object.keys(DO.C.RefAreas).forEach(function(key){refAreas+='<option value="'+key+'">'+key+" - "+DO.C.RefAreas[key]+"</option>"});form.querySelector(".medium-editor-toolbar-save").insertAdjacentHTML("beforebegin",'<div id="'+sparklineGraphId+'">`'+textInputB+"` is not available. Try: "+'<select name="refAreas"><option>Select a reference area</option>'+refAreas+"</select></div>");var rA=document.querySelector("#"+sparklineGraphId+' select[name="refAreas"]');rA.addEventListener("change",function(e){e.preventDefault();e.stopPropagation();textInputB=e.target.value;input.search.value=textInputA+" of "+textInputB;form.querySelector("#sparkline-selection-dataset").value=textInputA;form.querySelector("#sparkline-selection-refarea").value=textInputB;_this.base.restoreSelection();MediumEditor.util.insertHTMLCommand(document,input.search.value);var selection={start:initialSelectionState.start,end:initialSelectionState.start+input.search.value.length};MediumEditor.selection.importSelection(selection,initialSelectedParentElement,document);_this.base.checkSelection();_this.showForm()});return}var options={};options.filter={dimensionProperty:"sdmx-dimension:refArea",dimensionRefAreaNotation:textInputB};options.optional={prefLabels:["dcterms:title"]};var queryURL=DO.U.SPARQLQueryURL.getResourcesOfTypeWithLabel(sparqlEndpoint,resourceType,textInputA.toLowerCase(),options);queryURL=uri.getProxyableIRI(queryURL);form.querySelector(".medium-editor-toolbar-save").insertAdjacentHTML("beforebegin",'<div id="'+sparklineGraphId+'"></div>'+template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"]);sG=document.getElementById(sparklineGraphId);fetcher.getTriplesFromGraph(queryURL).then(function(triples){sG.removeAttribute("class");triples=util.sortTriples(triples,{sortBy:"object"});return DO.U.getListHTMLFromTriples(triples,{element:"select",elementId:resultContainerId})}).then(function(listHTML){sG.innerHTML=listHTML;form.removeChild(form.querySelector(".fas.fa-circle-notch.fa-spin.fa-fw"))}).then(function(x){var rC=document.getElementById(resultContainerId);rC.addEventListener("change",function(e){e.preventDefault();e.stopPropagation();var sparkline=sG.querySelectorAll(".sparkline, .sparkline-info");for(var i=0;i<sparkline.length;i++){sparkline[i].parentNode.removeChild(sparkline[i])}form.querySelector(".medium-editor-toolbar-save").insertAdjacentHTML("beforebegin",template.Icon[".fas.fa-circle-notch.fa-spin.fa-fw"]);var dataset=e.target.value;var title=e.target.querySelector('*[value="'+e.target.value+'"]').textContent.trim();form.querySelector("#sparkline-selection-dataset").value=title;form.querySelector("#sparkline-selection-refarea").value=textInputB.toUpperCase();var refArea=textInputB.toUpperCase();var paramDimension="\n  ?propertyRefArea rdfs:subPropertyOf* sdmx-dimension:refArea .\n  ?observation ?propertyRefArea [ skos:notation '"+refArea+"' ] .";var queryURL=DO.U.SPARQLQueryURL.getObservationsWithDimension(sparqlEndpoint,dataset,paramDimension);queryURL=uri.getProxyableIRI(queryURL);fetcher.getTriplesFromGraph(queryURL).then(function(triples){if(triples.length>0){var observations={};triples.forEach(function(t){var s=t.subject.nominalValue;var p=t.predicate.nominalValue;var o=t.object.nominalValue;observations[s]=observations[s]||{};observations[s][p]=o});var list=[],item;Object.keys(observations).forEach(function(key){item={};observations[key]["http://purl.org/linked-data/cube#Observation"]=key;item[key]=observations[key];list.push(item[key])});var sortByKey="http://purl.org/linked-data/sdmx/2009/dimension#refPeriod";list.sort(function(a,b){return a[sortByKey].toLowerCase().localeCompare(b[sortByKey].toLowerCase())});var options={url:dataset,title:title};var sparkline=DO.U.getSparkline(list,options);sG.insertAdjacentHTML("beforeend",'<span class="sparkline">'+sparkline+'</span> <span class="sparkline-info">'+triples.length+" observations</span>");form.removeChild(form.querySelector(".fas.fa-circle-notch.fa-spin.fa-fw"))}else{sG.insertAdjacentHTML("beforeend",'<span class="sparkline-info">0 observations. Select another.</span>')}})})});break;case"bookmark":input.content.focus();break;default:input.focus();break}if(targetCheckbox){targetCheckbox.checked=opts.target==="_blank"}if(buttonCheckbox){var classList=opts.buttonClass?opts.buttonClass.split(" "):[];buttonCheckbox.checked=classList.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form){return false}if(this.form.parentNode){this.form.parentNode.removeChild(this.form)}delete this.form},getFormOpts:function(){var targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox();var opts={};switch(this.action){case"rdfa":opts.about=this.getInput().about.value;opts.rel=this.getInput().rel.value;opts.href=this.getInput().href.value;opts.typeOf=this.getInput().typeOf.value;opts.resource=this.getInput().resource.value;opts.property=this.getInput().property.value;opts.content=this.getInput().content.value;opts.datatype=this.getInput().datatype.value;opts.language=this.getInput().language.value;break;case"article":case"approve":case"disapprove":case"specificity":opts.content=this.getInput().content.value;var aLS=this.getInput().annotationLocationService;DO.C.User.UI["annotationLocationService"]={checked:false};if(aLS){DO.C.User.UI.annotationLocationService.checked=opts.annotationLocationService=aLS.checked}var aLPS=this.getInput().annotationLocationPersonalStorage;DO.C.User.UI["annotationLocationPersonalStorage"]={checked:false};if(aLPS){DO.C.User.UI.annotationLocationPersonalStorage.checked=opts.annotationLocationPersonalStorage=aLPS.checked}var aIL=this.getInput().annotationInboxLocation;DO.C.User.UI["annotationInboxLocation"]={checked:false};if(aIL){DO.C.User.UI.annotationInboxLocation.checked=opts.annotationInboxLocation=aIL.checked}opts.language=this.getInput().language.value;opts.license=this.getInput().license.value;break;case"note":opts.content=this.getInput().content.value;opts.tagging=this.getInput().tagging.value;opts.language=this.getInput().language.value;opts.license=this.getInput().license.value;break;case"cite":opts.citationType=this.getInput().citationType.value;opts.citationRelation=this.getInput().citationRelation.value;opts.url=this.getInput().url.value;opts.content=this.getInput().content.value;opts.language=this.getInput().language.value;break;case"bookmark":opts.content=this.getInput().content.value;opts.tagging=this.getInput().tagging.value;opts.language=this.getInput().language.value;break;case"sparkline":opts.search=this.getInput().search.value;opts.select=this.getInput().select.value;opts.sparkline=this.getInput().sparkline.innerHTML;opts.selectionDataSet=this.getInput().selectionDataSet.value;opts.selectionRefArea=this.getInput().selectionRefArea.value;break;default:opts.url=this.getInput().value;break}if(typeof opts.language!=="undefined"){DO.C.User.UI["Language"]=opts.language}if(typeof opts.license!=="undefined"){DO.C.User.UI["License"]=opts.license}storage.updateLocalStorageProfile(DO.C.User);opts.target="_self";if(targetCheckbox&&targetCheckbox.checked){opts.target="_blank"}if(buttonCheckbox&&buttonCheckbox.checked){opts.buttonClass=this.customClassOption}Object.keys(opts).forEach(function(key){if(typeof opts[key]==="string"){opts[key]=opts[key].trim()}});return opts},doFormSave:function(){var opts=this.getFormOpts();this.completeFormSave(opts)},completeFormSave:function(opts){var _this=this;this.base.restoreSelection();var range=MediumEditor.selection.getSelectionRange(this.document);var selectedParentElement=this.base.getSelectedParentElement();this.base.selectedDocument=this.document;this.base.selection=MediumEditor.selection.getSelectionHtml(this.base.selectedDocument);var exact=this.base.selection;var selectionState=MediumEditor.selection.exportSelection(selectedParentElement,this.document);var start=selectionState.start;var end=selectionState.end;var prefixStart=Math.max(0,start-DO.C.ContextLength);var prefix=selectedParentElement.textContent.substr(prefixStart,start-prefixStart);prefix=DO.U.htmlEntities(prefix);var suffixEnd=Math.min(selectedParentElement.textContent.length,end+DO.C.ContextLength);var suffix=selectedParentElement.textContent.substr(end,suffixEnd-end);suffix=DO.U.htmlEntities(suffix);var annotationInbox=selectedParentElement.closest('.do[typeof="oa:Annotation"]');if(annotationInbox){annotationInbox=annotationInbox.querySelector('[rel="ldp:inbox"]');if(annotationInbox){annotationInbox=annotationInbox.href||annotationInbox.getAttribute("resource");annotationInbox=decodeURIComponent(annotationInbox)}}var datetime=util.getDateTimeISO();var id=util.generateAttributeId();var refId="r-"+id;var resourceIRI=uri.stripFragmentFromString(document.location.href);var containerIRI=window.location.href;var selectorIRI=resourceIRI+"#selector(type=TextQuoteSelector,prefix="+encodeURIComponent(prefix)+",exact="+encodeURIComponent(exact)+",suffix="+encodeURIComponent(suffix)+")";var contentType="text/html";var noteIRI,noteURL;var profile;var options={};var annotationDistribution=[],aLS={};if(opts.annotationLocationPersonalStorage&&DO.C.User.Outbox||!opts.annotationLocationPersonalStorage&&!opts.annotationLocationService&&DO.C.User.Outbox){containerIRI=DO.C.User.Outbox[0];var fromContentType="text/html";contentType=fromContentType;noteURL=noteIRI=containerIRI+id;var contextProfile={"@context":["https://www.w3.org/ns/activitystreams",{oa:"http://www.w3.org/ns/oa#",schema:"http://schema.org/"}],profile:"https://www.w3.org/ns/activitystreams"};aLS={id:id,containerIRI:containerIRI,noteURL:noteURL,noteIRI:noteIRI,fromContentType:fromContentType,contentType:contentType,annotationInbox:annotationInbox};if(typeof DO.C.User.Storage==="undefined"){aLS["canonical"]=true}aLS=Object.assign(aLS,contextProfile);annotationDistribution.push(aLS)}if(opts.annotationLocationPersonalStorage&&DO.C.User.Storage||!opts.annotationLocationPersonalStorage&&!opts.annotationLocationService&&DO.C.User.Storage){containerIRI=DO.C.User.Storage[0];var fromContentType="text/html";contentType=fromContentType;noteURL=noteIRI=containerIRI+id;var contextProfile={};aLS={id:id,containerIRI:containerIRI,noteURL:noteURL,noteIRI:noteIRI,fromContentType:fromContentType,contentType:contentType,canonical:true,annotationInbox:annotationInbox};annotationDistribution.push(aLS)}if(opts.annotationLocationService&&typeof DO.C.AnnotationService!=="undefined"){containerIRI=DO.C.AnnotationService;var fromContentType="text/html";contentType=fromContentType;var contextProfile={"@context":["http://www.w3.org/ns/anno.jsonld",{as:"https://www.w3.org/ns/activitystreams#",schema:"http://schema.org/"}],profile:"http://www.w3.org/ns/anno.jsonld"};if(!opts.annotationLocationPersonalStorage&&opts.annotationLocationService){noteURL=noteIRI=containerIRI+id;aLS={id:id,containerIRI:containerIRI,noteURL:noteURL,noteIRI:noteIRI,fromContentType:fromContentType,contentType:contentType,canonical:true,annotationInbox:annotationInbox}}else if(opts.annotationLocationPersonalStorage){noteURL=containerIRI+id;aLS={id:id,containerIRI:containerIRI,noteURL:noteURL,noteIRI:noteIRI,fromContentType:fromContentType,contentType:contentType,annotationInbox:annotationInbox}}else{noteURL=noteIRI=containerIRI+id;aLS={id:id,containerIRI:containerIRI,noteURL:noteURL,noteIRI:noteIRI,fromContentType:fromContentType,contentType:contentType,canonical:true,annotationInbox:annotationInbox}}aLS=Object.assign(aLS,contextProfile);annotationDistribution.push(aLS)}var refLabel=id;var parentNodeWithId=selectedParentElement.closest("[id]");var targetIRI=parentNodeWithId?resourceIRI+"#"+parentNodeWithId.id:resourceIRI;var latestVersion=DO.C.ResourceInfo.graph.rellatestversion;if(latestVersion){resourceIRI=latestVersion;targetIRI=parentNodeWithId?latestVersion+"#"+parentNodeWithId.id:latestVersion;options["targetInMemento"]=true}var targetLanguage=doc.getNodeLanguage(parentNodeWithId);var selectionLanguage=doc.getNodeLanguage(selectedParentElement);var ref="",refType="";var doClass="";var noteData={};var note="";var language="";var licenseIRI="";var motivatedBy="oa:replying";var createNoteData=function(annotation){var id=annotation.id;var note="";var mode="";if(annotation&&"profile"in annotation&&annotation.profile=="https://www.w3.org/ns/activitystreams"){mode="object"}else{mode="write"}switch(_this.action){case"sparkline":var figureIRI=util.generateAttributeId(null,opts.selectionDataSet);ref='<span rel="schema:hasPart" resource="#figure-'+figureIRI+'">\n                    <a href="'+opts.select+'" property="schema:name" rel="prov:wasDerivedFrom" resource="'+opts.select+'" typeof="qb:DataSet">'+opts.selectionDataSet+"</a> ["+DO.U.htmlEntities(DO.C.RefAreas[opts.selectionRefArea])+']\n                    <span class="sparkline" rel="schema:image" resource="#'+figureIRI+'">'+opts.sparkline+"</span></span>";break;case"article":case"approve":case"disapprove":case"specificity":if(_this.action==="approve"||_this.action==="disapprove"){motivatedBy="oa:assessing"}if(_this.action==="specificity"){motivatedBy="oa:questioning"}if(_this.action!=="article"){refLabel=DO.U.getReferenceLabel(motivatedBy)}ref=_this.base.selection;language=opts.language;licenseIRI=opts.license;noteData={type:_this.action,mode:mode,motivatedByIRI:motivatedBy,id:id,canonical:"urn:uuid:"+id,refId:refId,refLabel:refLabel,creator:{},datetime:datetime,target:{iri:targetIRI,source:resourceIRI,selector:{exact:exact,prefix:prefix,suffix:suffix,language:selectionLanguage},language:targetLanguage},body:opts.content,language:{},license:{}};if(DO.C.User.IRI){noteData.creator["iri"]=DO.C.User.IRI}if(DO.C.User.Name){noteData.creator["name"]=DO.C.User.Name}if(DO.C.User.Image){noteData.creator["image"]=DO.C.User.Image}if(DO.C.User.URL){noteData.creator["url"]=DO.C.User.URL}if(opts.language.length>0){noteData.language["code"]=opts.language}if(opts.license.length>0){noteData.license["iri"]=opts.license}if(opts.annotationInboxLocation&&DO.C.User.TypeIndex&&DO.C.User.TypeIndex[DO.C.Vocab["asAnnounce"]["@id"]]){noteData.inbox=DO.C.User.TypeIndex[DO.C.Vocab["asAnnounce"]["@id"]]}break;case"note":motivatedBy="oa:commenting";refLabel=DO.U.getReferenceLabel(motivatedBy);docRefType='<sup class="ref-comment"><a rel="cito:isCitedBy" href="#'+id+'">'+refLabel+"</a></sup>";noteType="note";noteData={type:noteType,mode:"read",motivatedByIRI:motivatedBy,id:id,refId:refId,refLabel:refLabel,creator:{},datetime:datetime,target:{iri:targetIRI,source:resourceIRI,selector:{exact:exact,prefix:prefix,suffix:suffix,language:selectionLanguage},language:targetLanguage},body:{purpose:{describing:{text:opts.content},tagging:{text:opts.tagging}}},language:{},license:{}};if(DO.C.User.IRI){noteData.creator["iri"]=DO.C.User.IRI}if(DO.C.User.Name){noteData.creator["name"]=DO.C.User.Name}if(DO.C.User.Image){noteData.creator["image"]=DO.C.User.Image}if(DO.C.User.URL){noteData.creator["url"]=DO.C.User.URL}if(opts.language.length>0){noteData.language["code"]=opts.language}if(opts.license.length>0){noteData.license["iri"]=opts.license}ref=DO.U.getTextQuoteHTML(refId,motivatedBy,exact,docRefType);break;case"cite":switch(opts.citationType){case"ref-footnote":default:motivatedBy="oa:describing";refLabel=DO.U.getReferenceLabel(motivatedBy);docRefType='<sup class="'+opts.citationType+'"><a rel="cito:isCitedBy" href="#'+id+'">'+refLabel+"</a></sup>";noteData={type:opts.citationType,mode:mode,motivatedByIRI:motivatedBy,id:id,refId:refId,refLabel:refLabel,datetime:datetime,body:opts.content,citationURL:opts.url,language:{}};if(opts.language.length>0){noteData.language["code"]=opts.language}break;case"ref-reference":motivatedBy="oa:linking";refLabel=DO.U.getReferenceLabel("oa:linking");docRefType='<span class="'+opts.citationType+'">'+DO.C.RefType[DO.C.DocRefType].InlineOpen+'<a href="#'+id+'">'+refLabel+"</a>"+DO.C.RefType[DO.C.DocRefType].InlineClose+"</span>";break}ref=DO.U.getTextQuoteHTML(refId,motivatedBy,exact,docRefType);break;case"rdfa":noteData={about:opts.about,typeOf:opts.typeOf,rel:opts.rel,href:opts.href,resource:opts.resource,property:opts.property,content:opts.content,datatype:opts.datatype,lang:opts.language,textContent:_this.base.selection};ref=template.createRDFaHTML(noteData,"expanded");break;case"bookmark":noteType="bookmark";motivatedBy="oa:bookmarking";refLabel=DO.U.getReferenceLabel(motivatedBy);docRefType="";noteData={type:noteType,mode:mode,motivatedByIRI:motivatedBy,id:id,canonical:"urn:uuid:"+id,refId:refId,refLabel:refLabel,creator:{},datetime:datetime,target:{iri:targetIRI,source:resourceIRI,selector:{exact:exact,prefix:prefix,suffix:suffix,language:selectionLanguage},language:targetLanguage},body:{purpose:{describing:{text:opts.content},tagging:{text:opts.tagging}}},language:{},license:{}};if(DO.C.User.IRI){noteData.creator["iri"]=DO.C.User.IRI}if(DO.C.User.Name){noteData.creator["name"]=DO.C.User.Name}if(DO.C.User.Image){noteData.creator["image"]=DO.C.User.Image}if(DO.C.User.URL){noteData.creator["url"]=DO.C.User.URL}if(opts.language.length>0){noteData.language["code"]=opts.language}ref=DO.U.getTextQuoteHTML(refId,motivatedBy,exact,docRefType,{do:true});break}var selectionUpdated=ref;MediumEditor.util.insertHTMLCommand(_this.base.selectedDocument,selectionUpdated);return noteData};var createNotificationData=function(annotation,options){options=options||{};var notificationType,notificationObject,notificationContext,notificationTarget,notificationStatements;var noteIRI=options.relativeObject?"#"+id:annotation["noteIRI"];notificationStatements='    <dl about="'+noteIRI+'">\n  <dt>Object type</dt><dd><a about="'+noteIRI+'" typeof="oa:Annotation" href="'+DO.C.Vocab["oaAnnotation"]["@id"]+'">Annotation</a></dd>\n  <dt>Motivation</dt><dd><a href="'+DO.C.Prefixes[motivatedBy.split(":")[0]]+motivatedBy.split(":")[1]+'" property="oa:motivation">'+motivatedBy.split(":")[1]+"</a></dd>\n</dl>\n";switch(_this.action){default:case"article":case"specificity":notificationType=["as:Create"];notificationObject=noteIRI;notificationTarget=targetIRI;break;case"approve":notificationType=["as:Like"];notificationObject=targetIRI;notificationContext=noteIRI;break;case"disapprove":notificationType=["as:Dislike"];notificationObject=targetIRI;notificationContext=noteIRI;break;case"bookmark":notificationType=["as:Add"];notificationObject=noteIRI;notificationTarget=annotation["containerIRI"];break}var notificationData={type:notificationType,slug:id,object:notificationObject,license:opts.license};if(typeof notificationContext!=="undefined"){notificationData["context"]=notificationContext}if(typeof notificationTarget!=="undefined"){notificationData["target"]=notificationTarget}notificationData["statements"]=notificationStatements;return notificationData};var positionActivity=function(annotation,options){if(!annotation["canonical"]){return Promise.resolve()}if("profile"in annotation&&annotation.profile=="https://www.w3.org/ns/activitystreams"){return DO.U.showActivities(annotation["noteIRI"]).catch(()=>{return Promise.resolve()})}else{return DO.U.positionInteraction(annotation["noteIRI"],document.body,options).catch(()=>{return Promise.resolve()})}};var sendNotification=function(annotation,options){if(!annotation["canonical"]){return Promise.resolve()}var inboxPromise;if(annotation.annotationInbox){inboxPromise=Promise.resolve([annotation.annotationInbox])}else{inboxPromise=fetcher.getLinkRelation(DO.C.Vocab["ldpinbox"]["@id"])}return inboxPromise.catch(error=>{console.log("Error fetching ldp:inbox endpoint:",error);throw error}).then(inboxes=>{if(inboxes.length>0){var notificationData=createNotificationData(annotation);notificationData["inbox"]=inboxes[0];return inbox.notifyInbox(notificationData).catch(error=>{console.log("Error notifying the inbox:",error)})}})};switch(this.action){case"article":case"approve":case"disapprove":case"specificity":case"bookmark":annotationDistribution.forEach(annotation=>{var data="";var notificationData=createNotificationData(annotation,{relativeObject:true});var noteData=createNoteData(annotation);if("profile"in annotation&&annotation.profile=="https://www.w3.org/ns/activitystreams"){notificationData["statements"]=DO.U.createNoteDataHTML(noteData);note=doc.createActivityHTML(notificationData)}else{note=DO.U.createNoteDataHTML(noteData)}data=doc.createHTML("",note);fetcher.postActivity(annotation["containerIRI"],id,data,annotation).catch(error=>{throw error}).then(response=>{var location=response.headers.get("Location");if(location){location=uri.getAbsoluteIRI(annotation["containerIRI"],location);annotation["noteIRI"]=annotation["noteURL"]=location}return positionActivity(annotation,options)}).then(()=>{if(this.action!="bookmark"){return sendNotification(annotation,options)}}).catch(()=>{})});break;case"note":var noteData=createNoteData({id:id});note=DO.U.createNoteDataHTML(noteData);var asideNote='\n<aside class="note">\n'+note+"\n</aside>";var asideNode=util.fragmentFromString(asideNote);var parentSection=doc.getClosestSectionNode(selectedParentElement);parentSection.appendChild(asideNode);DO.U.positionNote(refId,id);break;case"selector":window.history.replaceState({},null,selectorIRI);doc.showActionMessage(document.documentElement,"Copy URL from address bar");break;case"cite":var noteData=createNoteData({id:id});note=DO.U.createNoteDataHTML(noteData);switch(opts.citationType){case"ref-footnote":default:var nES=selectedParentElement.nextElementSibling;var asideNote='\n<aside class="note">\n'+note+"\n</aside>";var asideNode=util.fragmentFromString(asideNote);var parentSection=doc.getClosestSectionNode(selectedParentElement);parentSection.appendChild(asideNode);DO.U.positionNote(refId,id);break;case"ref-reference":var options=opts;options["citationId"]=opts.url;options["refId"]=refId;DO.U.getCitation(opts.url,options).then(function(citationGraph){var citationURI="";if(opts.url.match(/^10\.\d+\//)){citationURI="http://dx.doi.org/"+opts.url;options.citationId=citationURI}else if(opts.url.toLowerCase().indexOf("//dx.doi.org/")>=0){citationURI=opts.url;if(opts.url.toLowerCase().startsWith("https:")){citationURI=opts.url.replace(/^https/,"http")}}else{citationURI=options.citationId}var citation=DO.U.getCitationHTML(citationGraph,citationURI,options);var node=document.querySelector("#references ol");doc.buildReferences(node,id,citation);options["showRobustLinksDecoration"]=true;var node=document.querySelector('[id="'+id+'"] a[about]');var robustLink=DO.U.createRobustLink(citationURI,node,options);var s=citationGraph.child(citationURI);if(s.ldpinbox._array.length==0){s=citationGraph.child(options.citationId)}if(s.ldpinbox._array.length>0){var inboxURL=s.ldpinbox.at(0);var citedBy=location.href.split(location.search||location.hash||/[?#]/)[0]+"#"+options.refId;var notificationStatements='    <dl about="'+citedBy+'">\n      <dt>Action</dt><dd>Citation</dd>\n      <dt>Cited by</dt><dd><a href="'+citedBy+'">'+citedBy+'</a></dd>\n      <dt>Citation type</dt><dd><a href="'+options.url+'">'+DO.C.Citation[options.citationRelation]+'</a></dd>\n      <dt>Cites</dt><dd><a href="'+options.url+'" property="'+options.citationRelation+'">'+options.url+"</a></dd>\n    </dl>\n";var notificationData={type:["as:Announce"],inbox:inboxURL,object:citedBy,target:options.url,statements:notificationStatements};inbox.notifyInbox(notificationData).then(function(s){console.log("Sent Linked Data Notification to "+inboxURL)})}});break}break;case"rdfa":var noteData=createNoteData({id:id});break}this.window.getSelection().removeAllRanges();this.base.checkSelection()},checkLinkFormat:function(value){var re=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(re.test(value)?"":"http://")+value},doFormCancel:function(){this.base.restoreSelection();this.base.checkSelection()},attachFormEvents:function(form){var close=form.querySelector(".medium-editor-toolbar-close"),save=form.querySelector(".medium-editor-toolbar-save");this.on(form,"click",this.handleFormClick.bind(this));this.on(close,"click",this.handleCloseClick.bind(this));this.on(save,"click",this.handleSaveClick.bind(this),true)},createForm:function(){var doc=this.document,form=doc.createElement("div");form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-textarea-"+this.getEditorId();form.innerHTML=this.getTemplate();this.attachFormEvents(form);return form},getInput:function(){var r={};switch(this.action){case"rdfa":r.about=this.getForm().querySelector("#rdfa-about.medium-editor-toolbar-input");r.rel=this.getForm().querySelector("#rdfa-rel.medium-editor-toolbar-input");r.href=this.getForm().querySelector("#rdfa-href.medium-editor-toolbar-input");r.typeOf=this.getForm().querySelector("#rdfa-typeof.medium-editor-toolbar-input");r.resource=this.getForm().querySelector("#rdfa-resource.medium-editor-toolbar-input");r.property=this.getForm().querySelector("#rdfa-property.medium-editor-toolbar-input");r.content=this.getForm().querySelector("#rdfa-content.medium-editor-toolbar-input");r.datatype=this.getForm().querySelector("#rdfa-datatype.medium-editor-toolbar-input");r.language=this.getForm().querySelector("#rdfa-language.medium-editor-toolbar-input");break;case"article":r.content=this.getForm().querySelector("#article-content.medium-editor-toolbar-textarea");r.annotationLocationService=this.getForm().querySelector("#annotation-location-service");r.annotationLocationPersonalStorage=this.getForm().querySelector("#annotation-location-personal-storage");r.annotationInboxLocation=this.getForm().querySelector("#annotation-inbox");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");r.license=this.getForm().querySelector("#article-license.medium-editor-toolbar-select");break;case"note":r.content=this.getForm().querySelector("#article-content.medium-editor-toolbar-textarea");r.tagging=this.getForm().querySelector("#bookmark-tagging.medium-editor-toolbar-input");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");r.license=this.getForm().querySelector("#article-license.medium-editor-toolbar-select");break;case"approve":r.content=this.getForm().querySelector("#approve-content.medium-editor-toolbar-textarea");r.annotationLocationService=this.getForm().querySelector("#annotation-location-service");r.annotationLocationPersonalStorage=this.getForm().querySelector("#annotation-location-personal-storage");r.annotationInboxLocation=this.getForm().querySelector("#annotation-inbox");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");r.license=this.getForm().querySelector("#approve-license.medium-editor-toolbar-select");break;case"disapprove":r.content=this.getForm().querySelector("#disapprove-content.medium-editor-toolbar-textarea");r.annotationLocationService=this.getForm().querySelector("#annotation-location-service");r.annotationLocationPersonalStorage=this.getForm().querySelector("#annotation-location-personal-storage");r.annotationInboxLocation=this.getForm().querySelector("#annotation-inbox");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");r.license=this.getForm().querySelector("#disapprove-license.medium-editor-toolbar-select");break;case"specificity":r.content=this.getForm().querySelector("#specificity-content.medium-editor-toolbar-textarea");r.annotationLocationService=this.getForm().querySelector("#annotation-location-service");r.annotationLocationPersonalStorage=this.getForm().querySelector("#annotation-location-personal-storage");r.annotationInboxLocation=this.getForm().querySelector("#annotation-inbox");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");r.license=this.getForm().querySelector("#specificity-license.medium-editor-toolbar-select");break;case"cite":r.citationType=this.getForm().querySelector('input[name="citation-type"]:checked');r.citationRelation=this.getForm().querySelector("#citation-relation.medium-editor-toolbar-select");r.url=this.getForm().querySelector("#citation-url.medium-editor-toolbar-input");r.content=this.getForm().querySelector("#citation-content.medium-editor-toolbar-textarea");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");break;case"bookmark":r.content=this.getForm().querySelector("#bookmark-content.medium-editor-toolbar-textarea");r.tagging=this.getForm().querySelector("#bookmark-tagging.medium-editor-toolbar-input");r.language=this.getForm().querySelector("#article-language.medium-editor-toolbar-select");break;case"sparkline":r.search=this.getForm().querySelector("#sparkline-search.medium-editor-toolbar-input");r.select=this.getForm().querySelector("#sparkline-select");r.sparkline=this.getForm().querySelector("#sparkline-graph .sparkline");r.selectionDataSet=this.getForm().querySelector("#sparkline-selection-dataset");r.selectionRefArea=this.getForm().querySelector("#sparkline-selection-refarea");break;default:r=this.getForm().querySelector("textarea.medium-editor-toolbar-textarea");break}return r},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-textarea-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-textarea-button")},handleTextboxKeyup:function(event){if(event.keyCode===MediumEditor.util.keyCode.ENTER){event.preventDefault();this.doFormSave();return}if(event.keyCode===MediumEditor.util.keyCode.ESCAPE){event.preventDefault();this.doFormCancel()}},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}})}}()}}};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(){DO.C.init()})}else{window.addEventListener("load",function(){DO.C.init()})}}module.exports=DO},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const ld=__webpack_require__(2);const SimpleRDF=ld.SimpleRDF;const Config=__webpack_require__(112);const util=__webpack_require__(114);const doc=__webpack_require__(115);const uri=__webpack_require__(116);const graph=__webpack_require__(117);const fetch=__webpack_require__(118);const solidAuth=__webpack_require__(119);const DEFAULT_CONTENT_TYPE="text/html; charset=utf-8";const LDP_RESOURCE='<http://www.w3.org/ns/ldp#Resource>; rel="type"';module.exports={setAcceptRDFTypes:setAcceptRDFTypes,getLinkRelation:getLinkRelation,getLinkRelationFromHead:getLinkRelationFromHead,getLinkRelationFromRDF:getLinkRelationFromRDF,copyResource:copyResource,currentLocation:currentLocation,deleteResource:deleteResource,getAcceptPostPreference:getAcceptPostPreference,getAcceptPatchPreference:getAcceptPatchPreference,getResource:getResource,getResourceHead:getResourceHead,getResourceGraph:getResourceGraph,getTriplesFromGraph:getTriplesFromGraph,getResourceOptions:getResourceOptions,parseLinkHeader:parseLinkHeader,patchResource:patchResource,patchResourceGraph:patchResourceGraph,postResource:postResource,putResource:putResource,putResourceACL:putResourceACL,postActivity:postActivity,processSave:processSave,updateTimeMap:updateTimeMap};function setAcceptRDFTypes(options){options=options||{};return Config.AvailableMediaTypes.map(i=>{if(i=="application/xhtml+xml"||i=="text/html"){return i+";q=0.9"}return i}).join(",")}function getLinkRelation(property,url){if(url){return getLinkRelationFromHead(property,url).catch(()=>getLinkRelationFromRDF(property,url))}else{var subjectURI=window.location.href.split(window.location.search||window.location.hash||/[?#]/)[0];var options={contentType:"text/html",subjectURI:subjectURI};return graph.getGraphFromData(doc.getDocument(),options).then(function(result){var endpoints=result.match(subjectURI,property).toArray();if(endpoints.length>0){return endpoints.map(function(t){return t.object.nominalValue})}return getLinkRelationFromHead(property,subjectURI)})}}function getLinkRelationFromHead(property,url){var pIRI=uri.getProxyableIRI(url);return getResourceHead(pIRI).then(function(i){var linkHeaders=parseLinkHeader(i.headers.get("Link"));if(property in linkHeaders){return linkHeaders[property]}return Promise.reject({message:property+" endpoint was not found in 'Link' header"})},function(reason){return Promise.reject({message:"'Link' header not found"})})}function getLinkRelationFromRDF(property,url,subjectIRI){url=url||window.location.origin+window.location.pathname;subjectIRI=subjectIRI||url;return getResourceGraph(subjectIRI).then(function(i){var s=i.child(subjectIRI);switch(property){case Config.Vocab["ldpinbox"]["@id"]:if(s.ldpinbox._array.length>0){return[s.ldpinbox.at(0)]}break;case Config.Vocab["oaannotationService"]["@id"]:if(s.oaannotationService._array.length>0){return[s.oaannotationService.at(0)]}break;default:if(s[property]._array.length>0){return[s[property].at(0)]}break}return Promise.reject({message:property+" endpoint was not found in message body"})})}function copyResource(fromURL,toURL,options={}){let headers={Accept:"*/*"};let contentType;if(!fromURL||!toURL){return Promise.reject(new Error("Missing fromURL or toURL in copyResource"))}return getResource(fromURL,headers,options).then(response=>{contentType=response.headers.get("Content-Type");return Config.AcceptBinaryTypes.indexOf(contentType)?response.arrayBuffer():response.text()}).then(contents=>{return putResource(toURL,contents,contentType,null,options).catch(error=>{if(error.status===0){options.noCredentials=true;return putResource(toURL,contents,contentType,null,options)}throw error})})}function currentLocation(){return window.location.origin+window.location.pathname}function deleteResource(url,options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;if(!url){return Promise.reject(new Error("Cannot DELETE resource - missing url"))}if(!options.noCredentials){options.credentials="include"}options.method="DELETE";return _fetch(url,options).then(response=>{if(!response.ok){let error=new Error("Error deleting resource: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}return response})}function getAcceptPostPreference(url){const pIRI=uri.getProxyableIRI(url);return getResourceOptions(pIRI,{header:"Accept-Post"}).catch(error=>{return{headers:"application/ld+json"}}).then(result=>{let header=result.headers.trim().split(/\s*,\s*/);if(header.indexOf("text/html")>-1||header.indexOf("application/xhtml+xml")>-1){return"text/html"}else if(header.indexOf("text/turtle")>-1||header.indexOf("*/*")>-1){return"text/turtle"}else if(header.indexOf("application/ld+json")>-1||header.indexOf("application/json")>-1){return"application/ld+json"}else{console.log("Accept-Post contains unrecognised media-range; "+result.headers);return result.headers}})}function getAcceptPatchPreference(url){const pIRI=url||uri.getProxyableIRI(url);return getResourceOptions(pIRI,{header:"Accept-Patch"}).catch(error=>{return{headers:"text/n3"}}).then(result=>{let header=result.headers.trim().split(/\s*,\s*/);if(header.indexOf("text/html")>-1||header.indexOf("application/xhtml+xml")>-1){return"text/html"}else if(header.indexOf("text/n3")>-1||header.indexOf("*/*")>-1){return"text/n3"}else if(header.indexOf("application/sparql-update")>-1){return"application/sparql-update"}else{console.log("Accept-Patch contains unrecognised media-range; "+result.headers);return result.headers}})}function getResource(url,headers={},options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;url=url||currentLocation();options.method="GET";if(!headers["Accept"]){headers["Accept"]="text/turtle"}if(!options.noCredentials){options.credentials="include"}options.headers=Object.assign({},headers);return _fetch(url,options).catch(error=>{if(!options.noCredentials){options.noCredentials=true;options.credentials="omit";return getResource(url,headers,options)}throw error}).then(response=>{if(!response.ok){let error=new Error("Error fetching resource: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}return response})}function getResourceHead(url,options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;url=url||currentLocation();options.method="HEAD";if(!options.noCredentials){options.credentials="include"}return _fetch(url,options).then(response=>{if(!response.ok){let error=new Error("Error fetching resource HEAD: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}return response})}function getResourceGraph(iri,headers,options={}){let defaultHeaders={Accept:setAcceptRDFTypes()};headers=headers||defaultHeaders;if(!("Accept"in headers)){Object.assign(headers,defaultHeaders)}if(iri.slice(0,5).toLowerCase()==="http:"){options["noCredentials"]=true;if(document.domain!==iri.split("/")[2]){options["forceProxy"]=true}}let pIRI=uri.getProxyableIRI(iri,options);return getResource(pIRI,headers,options).then(response=>{let cT=response.headers.get("Content-Type");options["contentType"]=cT?cT.split(";")[0].trim():"text/turtle";options["subjectURI"]=uri.stripFragmentFromString(iri);return response.text()}).then(data=>{return graph.getGraphFromData(data,options)}).then(g=>{let fragment=iri.lastIndexOf("#")>=0?iri.substr(iri.lastIndexOf("#")):"";return SimpleRDF(Config.Vocab,options["subjectURI"],g,ld.store).child(pIRI+fragment)}).catch(e=>{console.log(e)})}function getTriplesFromGraph(url){return getResourceGraph(url).then(function(i){return i.graph()}).catch(function(error){throw error})}function getResourceOptions(url,options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;url=url||currentLocation();options.method="OPTIONS";if(!options.noCredentials){options.credentials="include"}return _fetch(url,options).then(response=>{if(!response.ok){let error=new Error("Error fetching resource OPTIONS: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}else if(options.header&&!response.headers.get(options.header)){let error=new Error("OPTIONS without "+options.header+" header: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}if(options.header){return{headers:response.headers.get(options.header)}}return{headers:response.headers}})}function parseLinkHeader(link){if(!link){return{}}var linkexp=/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g;var paramexp=/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g;var matches=link.match(linkexp);var rels={};for(var i=0;i<matches.length;i++){var split=matches[i].split(">");var href=split[0].substring(1);var ps=split[1];var s=ps.match(paramexp);for(var j=0;j<s.length;j++){var p=s[j];var paramsplit=p.split("=");var rel=paramsplit[1].replace(/["']/g,"");if(!rels[rel]){rels[rel]=[]}rels[rel].push(href);if(rels[rel].length>1){rels[rel].sort()}}}return rels}function patchResourceGraph(url,patches,options={}){options.headers=options.headers||{};options.headers["Content-Type"]=options.headers["Content-Type"]||"text/n3";patches=Array.isArray(patches)?patches:[patches];var data="@prefix solid: <http://www.w3.org/ns/solid/terms#> .\n@prefix acl: <http://www.w3.org/ns/auth/acl#> .\n";switch(options.headers["Content-Type"]){case"application/sparql-update":if(patches[0].delete){data+="DELETE DATA { "+patches[0].delete+" };\n"}if(patches[0].insert){data+="INSERT DATA { "+patches[0].insert+" };\n"}if(patches[0].where){data+="WHERE { "+patches[0].where+" };\n"}break;case"text/n3":default:patches.forEach(function(patch){var patchId="_:"+util.generateUUID();data+="\n"+patchId+" a solid:Patch, solid:InsertDeletePatch .\n";if(patch.delete){data+=patchId+" solid:deletes { "+patch.delete+" } .\n"}if(patch.insert){data+=patchId+" solid:inserts { "+patch.insert+" } .\n"}if(patch.where){data+=patchId+" solid:where { "+patch.where+" } .\n"}});break}return patchResource(url,data,options)}function patchResource(url,data,options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;options.headers=options.headers||{};options.headers["Content-Type"]=options.headers["Content-Type"]||"text/n3";options.body=data;options.method="PATCH";if(!options.noCredentials){options.credentials="include"}return _fetch(url,options).then(response=>{if(!response.ok){let error=new Error("Error patching resource: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}return response})}function postResource(url,slug,data,contentType,links,options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;if(!url){return Promise.reject(new Error("Cannot POST resource - missing url"))}options.method="POST";options.body=data;if(!options.noCredentials){options.credentials="include"}options.headers=options.headers||{};options.headers["Content-Type"]=contentType||DEFAULT_CONTENT_TYPE;links=links?LDP_RESOURCE+", "+links:LDP_RESOURCE;options.headers["Link"]=links;if(slug){options.headers["Slug"]=slug}return _fetch(url,options).catch(error=>{if(error.status===0&&!options.noCredentials){options.noCredentials=true;return postResource(url,slug,data,contentType,options)}throw error}).then(response=>{if(!response.ok){let error=new Error("Error creating resource: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}return response})}function putResource(url,data,contentType,links,options={}){var _fetch=Config.User.OIDC?solidAuth.fetch:fetch;if(!url){return Promise.reject(new Error("Cannot PUT resource - missing url"))}options.method="PUT";options.body=data;if(!options.noCredentials){options.credentials="include"}options.headers=options.headers||{};options.headers["Content-Type"]=contentType||DEFAULT_CONTENT_TYPE;links=links?LDP_RESOURCE+", "+links:LDP_RESOURCE;options.headers["Link"]=links;return _fetch(url,options).then(response=>{if(!response.ok){let error=new Error("Error writing resource: "+response.status+" "+response.statusText);error.status=response.status;error.response=response;throw error}return response})}function putResourceACL(accessToURL,aclURL,acl){if(!Config.User.IRI){console.log('Go through sign-in or do: DO.C.User.IRI = "https://example.org/#i";');return Promise.resolve(null)}acl=acl||{u:{iri:[Config.User.IRI],mode:["acl:Control","acl:Read","acl:Write"]},g:{iri:["http://xmlns.com/foaf/0.1/Agent"],mode:["acl:Read"]},o:{iri:[],mode:[]}};let agent,agentClass,mode;if("u"in acl&&"iri"in acl.u&&"mode"in acl.u){agent="<"+acl.u.iri.join("> , <")+">";mode=acl.u.mode.join(" , ")}else{agent="<"+Config.User.IRI+">";mode="acl:Control , acl:Read , acl:Write"}let authorizations=[];authorizations.push("[ a acl:Authorization ; acl:accessTo <"+accessToURL+"> ; acl:accessTo <"+aclURL+"> ; acl:mode "+mode+" ; acl:agent "+agent+" ] .");if("g"in acl&&"iri"in acl.g&&acl.g.iri.length>=0){agentClass="<"+acl.g.iri.join("> , <")+">";mode=acl.g.mode.join(" , ");authorizations.push("[ a acl:Authorization ; acl:accessTo <"+accessToURL+"> ; acl:mode "+mode+" ; acl:agentClass "+agentClass+" ] .")}let data="@prefix acl: <http://www.w3.org/ns/auth/acl#> .\n"+authorizations.join("\n")+"\n";return putResource(aclURL,data,"text/turtle; charset=utf-8")}function postActivity(url,slug,data,options){return getAcceptPostPreference(url).then(preferredContentType=>{switch(preferredContentType){case"text/html":case"application/xhtml+xml":return postResource(url,slug,data,"text/html; charset=utf-8");case"text/turtle":return graph.serializeData(data,options["contentType"],"text/turtle",options).then(data=>{return postResource(url,slug,data,"text/turtle")});case"application/ld+json":case"application/json":case"*/*":default:return graph.serializeData(data,options["contentType"],"application/ld+json",options).then(data=>{if(!options["canonical"]){let x=JSON.parse(data);if("id"in x){x["via"]=x["id"];x["id"]="";data=JSON.stringify(x)}}var profile="profile"in options?'; profile="'+options.profile+'"':"";return postResource(url,slug,data,preferredContentType+profile)})}})}function processSave(url,slug,data,options){options=options||{};var request=slug?postResource(url,slug,data):putResource(url,data);return request.then(response=>{doc.showActionMessage(document.documentElement,"Saved");return response}).catch(error=>{console.log(error);let message;switch(error.status){case 401:message="Need to authenticate before saving";break;case 403:message="You are not authorized to save";break;case 405:default:message="Server doesn't allow this resource to be rewritten";break}doc.showActionMessage(document.documentElement,message)})}function updateTimeMap(url,patch,options){return getAcceptPatchPreference(url).then(preferredContentType=>{options=options||{};options["headers"]=options["headers"]||{};options.headers["Content-Type"]=options.headers["Content-Type"]||preferredContentType;return patchResourceGraph(url,patch,options)})}},(__unused_webpack_module,exports,__webpack_require__)=>{var LdpStore=__webpack_require__(3);var SimpleRDF=__webpack_require__(43);var N3Parser=__webpack_require__(87);var JsonLdParser=__webpack_require__(46);var RdfaParser=__webpack_require__(107);var RdfXmlParser=__webpack_require__(98);var SimpleRDFParse=__webpack_require__(111);var formats={parsers:{}};formats.parsers["text/turtle"]=N3Parser;formats.parsers["application/ld+json"]=JsonLdParser;formats.parsers["application/activity+json"]=JsonLdParser;formats.parsers["application/xhtml+xml"]=RdfaParser;formats.parsers["text/html"]=RdfaParser;formats.parsers["application/rdf+xml"]=RdfXmlParser;var parser=SimpleRDFParse(formats.parsers);SimpleRDF.parse=parser.parse.bind(parser);var storeFormats={parsers:{}};storeFormats.parsers["text/turtle"]=N3Parser;storeFormats.parsers["application/ld+json"]=JsonLdParser;storeFormats.parsers["application/activity+json"]=JsonLdParser;storeFormats.parsers["application/xhtml+xml"]=RdfaParser;storeFormats.parsers["text/html"]=RdfaParser;storeFormats.parsers["application/rdf+xml"]=RdfXmlParser;exports.store=new LdpStore(storeFormats);exports.SimpleRDF=SimpleRDF},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var inherits=__webpack_require__(31);var AbstractStore=__webpack_require__(33);function httpSuccess(statusCode){return statusCode>=200&&statusCode<300}function LdpStore(options){options=options||{};this.parsers=options.parsers?new rdf.Parsers(options.parsers):rdf.parsers;this.serializers=options.serializers?new rdf.Serializers(options.serializers):rdf.serializers;this.defaultParser=options.defaultParser||"text/turtle";this.defaultSerializer=options.defaultSerializer||"text/turtle";this.defaultPatchSerializer=options.defaultPatchSerializer||options.defaultSerializer||"text/turtle";this.request=options.request||rdf.defaultRequest}inherits(LdpStore,AbstractStore);LdpStore.prototype.add=function(iri,graph,callback,options){var self=this;return new Promise(function(resolve,reject){callback=callback||function(){};options=options||{};var method="PUT";var contentType=self.defaultSerializer;var headers={};headers["Content-Type"]=contentType;if(options.method){method=options.method}if(options.etag){headers["If-Match"]=options.etag}if(options.useEtag&&graph.etag){headers["If-Match"]=graph.etag}self.serializers.serialize(contentType,graph).then(function(data){return self.request(method,iri,headers,data,null,options).then(function(res){if(!httpSuccess(res.statusCode)){callback("status code error: "+res.statusCode);return Promise.reject("status code error: "+res.statusCode)}callback(null,graph);resolve(graph)})}).catch(function(error){callback(error);reject(error)})})};LdpStore.prototype.delete=function(iri,callback,options){var self=this;return new Promise(function(resolve,reject){callback=callback||function(){};self.request("DELETE",iri,{},null,null,options).then(function(res){if(!httpSuccess(res.statusCode)){callback("status code error: "+res.statusCode);return Promise.reject("status code error: "+res.statusCode)}callback();resolve()}).catch(function(error){callback(error);reject(error)})})};LdpStore.prototype.graph=function(iri,callback,options){var self=this;return new Promise(function(resolve,reject){callback=callback||function(){};options=options||{};self.request("GET",iri,{Accept:self.parsers.list().join(", ")},null,null,options).then(function(res){if(!httpSuccess(res.statusCode)&&res.statusCode!==0){callback("status code error: "+res.statusCode);return Promise.reject("status code error: "+res.statusCode)}var contentType;if(options.contentType){contentType=options.contentType}else{if("content-type"in res.headers){contentType=res.headers["content-type"].split(";")[0]}if(!contentType||!(contentType in self.parsers)){contentType=self.defaultParser}}return self.parsers.parse(contentType,res.content,null,iri).then(function(graph){if(options.useEtag&&"etag"in res.headers){graph.etag=res.headers.etag}callback(null,graph);resolve(graph)})}).catch(function(error){callback(error);reject(error)})})};LdpStore.prototype.merge=function(iri,graph,callback,options){var self=this;return new Promise(function(resolve,reject){var contentType=self.defaultPatchSerializer;var headers={};callback=callback||function(){};options=options||{};headers["Content-Type"]=contentType;if("etag"in options){headers["If-Match"]=options.etag}if("useEtag"in options&&options.useEtag&&"etag"in graph){headers["If-Match"]=graph.etag}self.serializers.serialize(contentType,graph).then(function(data){return self.request("PATCH",iri,headers,data,null,options).then(function(res){if(!httpSuccess(res.statusCode)){callback("status code error: "+res.statusCode);return Promise.reject("status code error: "+res.statusCode)}callback(null,graph);resolve(graph)})}).catch(function(error){callback(error);reject(error)})})};module.exports=LdpStore},(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__(11);var rdf=__webpack_require__(5);var InMemoryStore=__webpack_require__(32);var Parsers=__webpack_require__(34);var Serializers=__webpack_require__(35);var mixin=function(rdf,options){options=options||{};__webpack_require__(36)(rdf);if(typeof window!=="undefined"){window.rdf=rdf}rdf.defaultRequest=null;rdf.corsProxyRequest=null;__webpack_require__(37)(rdf);if(typeof process!=="undefined"&&process.versions&&process.versions.node){__webpack_require__(38)(rdf)}else{__webpack_require__(42)(rdf)}rdf.createBlankNode=function(){return new rdf.BlankNode};rdf.createNamedNode=function(iri){return new rdf.NamedNode(iri)};rdf.createLiteral=function(value,language,datatype){return new rdf.Literal(value,language,datatype)};rdf.createTriple=function(subject,predicate,object){return new rdf.Triple(subject,predicate,object)};rdf.createQuad=function(subject,predicate,object,graph){return new rdf.Quad(subject,predicate,object,graph)};rdf.createGraph=function(triples){return new rdf.Graph(triples)};rdf.createStore=function(options){options=options||{};options.rdf=options.rdf||rdf;return new InMemoryStore(options)};rdf.Parsers=Parsers;rdf.parsers=new Parsers;rdf.Serializers=Serializers;rdf.serializers=new Serializers;return rdf};mixin(rdf);module.exports=rdf},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(6);var util=__webpack_require__(10);rdf.NamedNode=function(iri){this.interfaceName="NamedNode";this.nominalValue=iri};rdf.NamedNode.prototype.equals=function(other){if(typeof other==="string"){return this.nominalValue===other}if(typeof other==="object"){if(other.constructor.name==="RegExp"){return other.test(this.nominalValue)}if(other.interfaceName===this.interfaceName){return this.nominalValue===other.nominalValue}}return false};rdf.NamedNode.prototype.toNT=function(){return"<"+rdf.encodeString(this.nominalValue)+">"};rdf.NamedNode.prototype.toString=function(){return this.nominalValue};rdf.NamedNode.prototype.valueOf=function(){return this.nominalValue};rdf.BlankNode=function(){this.interfaceName="BlankNode";this.nominalValue="b"+ ++rdf.BlankNode.nextId};rdf.BlankNode.prototype.equals=function(other){if(typeof other==="string"){return this.nominalValue===other}if(typeof other==="object"){if(other.constructor.name==="RegExp"){return other.test(this.nominalValue)}if(other.interfaceName===this.interfaceName){return this.nominalValue===other.nominalValue}}return false};rdf.BlankNode.prototype.toNT=function(){return"_:"+rdf.encodeString(this.nominalValue)};rdf.BlankNode.prototype.toString=function(){return"_:"+this.nominalValue};rdf.BlankNode.prototype.valueOf=function(){return this.nominalValue};rdf.BlankNode.nextId=0;rdf.Literal=function(value,language,datatype,native){this.interfaceName="Literal";this.nominalValue=value;if(language){this.language=language;this.datatype=rdf.Literal.langString}else{this.language=null;if(datatype){this.datatype=new rdf.NamedNode(datatype.toString())}else{this.datatype=rdf.Literal.string}}this.native=native};rdf.Literal.prototype.equals=function(other){if(typeof other==="string"){return this.nominalValue===other}if(typeof other==="object"){if(other.constructor.name==="RegExp"){return other.test(this.nominalValue)}if(other.interfaceName===this.interfaceName){if(this.nominalValue.toString()!==other.nominalValue.toString()){return false}if(this.language!==other.language){return false}if(this.datatype&&!this.datatype.equals(other.datatype)){return false}return true}}return false};rdf.Literal.prototype.toNT=function(){var string='"'+rdf.encodeString(this.nominalValue.toString())+'"';if(this.language){string+="@"+this.language}if(this.datatype&&!rdf.Literal.string.equals(this.datatype)&&!rdf.Literal.langString.equals(this.datatype)){string+="^^"+this.datatype.toNT()}return string};rdf.Literal.prototype.toString=function(){return this.nominalValue};rdf.Literal.langString=new rdf.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");rdf.Literal.string=new rdf.NamedNode("http://www.w3.org/2001/XMLSchema#string");rdf.Triple=function(subject,predicate,object){this.subject=subject;this.predicate=predicate;this.object=object};rdf.Triple.prototype.equals=function(other){return this.subject.equals(other.subject)&&this.predicate.equals(other.predicate)&&this.object.equals(other.object)};rdf.Triple.prototype.toNT=function(){return this.toString()};rdf.Triple.prototype.toQuad=function(graph){return new rdf.Quad(this.subject,this.predicate,this.object,graph)};rdf.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" ."};rdf.Quad=function(subject,predicate,object,graph){this.subject=subject;this.predicate=predicate;this.object=object;this.graph=graph};rdf.Quad.prototype.equals=function(other){return this.subject.equals(other.subject)&&this.predicate.equals(other.predicate)&&this.object.equals(other.object)&&this.graph.equals(other.graph)};rdf.Quad.prototype.toNT=function(){return this.toString()};rdf.Quad.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" "+this.graph.toNT()+" ."};rdf.Quad.prototype.toTriple=function(){return new rdf.Triple(this.subject,this.predicate,this.object)};rdf.Graph=function(other){this.actions=[];this._graph=[];this._gspo={};rdf.AbstractGraph.call(this,rdf.Graph,other)};util.inherits(rdf.Graph,rdf.AbstractGraph);rdf.Graph.prototype.add=function(quad){var i=rdf.Graph.index(quad);this._gspo[i.g]=this._gspo[i.g]||{};this._gspo[i.g][i.s]=this._gspo[i.g][i.s]||{};this._gspo[i.g][i.s][i.p]=this._gspo[i.g][i.s][i.p]||{};if(!this._gspo[i.g][i.s][i.p][i.o]){this._gspo[i.g][i.s][i.p][i.o]=quad;this._graph.push(quad);this.actions.forEach(function(action){action.run(quad)})}return this};rdf.Graph.prototype.addAction=function(action){};rdf.Graph.prototype.remove=function(quad){var i=rdf.Graph.index(quad);if(this._gspo[i.g][i.s][i.p][i.o]){delete this._gspo[i.g][i.s][i.p][i.o];this._graph.splice(this._graph.indexOf(quad),1)}};rdf.Graph.prototype.toArray=function(){return this._graph.slice(0)};rdf.Graph.index=function(quad){return{g:quad.graph?quad.graph.toString():null,s:quad.subject.toString(),p:quad.predicate.toString(),o:quad.object.toString()}};module.exports=rdf},(module,__unused_webpack_exports,__webpack_require__)=>{var normalize=__webpack_require__(7);var rdf={};rdf.encodeString=function(s){var out="";var skip=false;var _g1=0;var _g=s.length;while(_g1<_g){var i=_g1++;if(!skip){var code=s.charCodeAt(i);if(code>=55296&&code<=56319){var low=s.charCodeAt(i+1);code=(code-55296)*1024+(low-56320)+65536;skip=true}if(code>1114111){throw new Error("Char out of range")}var hex="00000000".concat(Number(code).toString(16).toUpperCase());if(code>=65536){out+="\\"+hex.slice(-8)}else{if(code>=127||code<=31){switch(code){case 9:out+="\\t";break;case 10:out+="\\n";break;case 13:out+="\\r";break;default:out+="\\u"+hex.slice(-4);break}}else{switch(code){case 34:out+='\\"';break;case 92:out+="\\\\";break;default:out+=s.charAt(i);break}}}}else{skip=!skip}}return out};rdf.AbstractGraph=function(constructor,other){this.constructor=constructor;Object.defineProperty(this,"length",{get:function(){return this.toArray().length}});if(other){this.addAll(other)}};rdf.AbstractGraph.prototype.addAll=function(other){var self=this;other.forEach(function(quad){self.add(quad)});return this};rdf.AbstractGraph.prototype.clone=function(){return new this.constructor(this)};rdf.AbstractGraph.prototype.difference=function(other){var difference=new this.constructor;this.forEach(function(quad){if(!other.includes(quad)){difference.add(quad)}});return difference};rdf.AbstractGraph.prototype.equals=function(other){return normalize(this)===normalize(other)};rdf.AbstractGraph.prototype.every=function(callback){return this.toArray().every(callback)};rdf.AbstractGraph.prototype.filter=function(callback){return new this.constructor(this.toArray().filter(callback))};rdf.AbstractGraph.prototype.forEach=function(callback){var self=this;self.toArray().forEach(function(quad){callback(quad,self)})};rdf.AbstractGraph.prototype.includes=function(quad){return this.match(quad.subject,quad.predicate,quad.object,quad.graph).length===1};rdf.AbstractGraph.prototype.intersection=function(other){var intersection=new this.constructor;this.forEach(function(quad){if(other.includes(quad)){intersection.add(quad)}});return intersection};rdf.AbstractGraph.prototype.map=function(callback){var self=this;return self.toArray().map(function(quad){return callback(quad,self)})};rdf.AbstractGraph.prototype.match=function(subject,predicate,object,graph){return new rdf.Graph(this.toArray().filter(function(quad){if(graph&&(!quad.graph||!quad.graph.equals(graph))){return false}if(subject&&!quad.subject.equals(subject)){return false}if(predicate&&!quad.predicate.equals(predicate)){return false}if(object&&!quad.object.equals(object)){return false}return true}))};rdf.AbstractGraph.prototype.merge=function(other){return this.clone().addAll(other)};rdf.AbstractGraph.prototype.removeMatches=function(subject,predicate,object,graph){var self=this;var matches=self.match(subject,predicate,object,graph);matches.forEach(function(quad){self.remove(quad)});return self};rdf.AbstractGraph.prototype.some=function(callback){return this.toArray().some(callback)};rdf.AbstractGraph.prototype.toString=function(){return this.toArray().map(function(quad){return quad.toString()}).join("\n")};module.exports=rdf},(module,__unused_webpack_exports,__webpack_require__)=>{var jsonldNormalize=__webpack_require__(8);function createPlainNode(node){if(!node){return null}var plain={};if(node.interfaceName==="NamedNode"){plain.type="IRI";plain.value=node.nominalValue}else if(node.interfaceName==="BlankNode"){plain.type="blank node";plain.value=node.toString()}else if(node.interfaceName==="Literal"){plain.type="literal";plain.value=node.nominalValue;plain.datatype=node.datatype.nominalValue;plain.language=node.language}return plain}function createPlainTriple(triple){return{subject:createPlainNode(triple.subject),predicate:createPlainNode(triple.predicate),object:createPlainNode(triple.object)}}function createPlainDataset(graph){var dataset={};graph.forEach(function(quad){var name="@default";if("graph"in quad&&quad.graph.nominalValue){name=quad.graph.nominalValue}if(!(name in dataset)){dataset[name]=[]}dataset[name].push(createPlainTriple(quad))});return dataset}function normalize(graph){return jsonldNormalize(createPlainDataset(graph))}module.exports=normalize},(module,__unused_webpack_exports,__webpack_require__)=>{var XSD_STRING="http://www.w3.org/2001/XMLSchema#string";var RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";var RDF_LANGSTRING=RDF+"langString";var Processor=function(){};Processor.prototype.normalize=function(dataset,options,callback){var quads=[];var bnodes={};for(var graphName in dataset){var triples=dataset[graphName];if(graphName==="@default"){graphName=null}for(var ti=0;ti<triples.length;++ti){var quad=triples[ti];if(graphName!==null){if(graphName.indexOf("_:")===0){quad.name={type:"blank node",value:graphName}}else{quad.name={type:"IRI",value:graphName}}}quads.push(quad);var attrs=["subject","object","name"];for(var ai=0;ai<attrs.length;++ai){var attr=attrs[ai];if(quad[attr]&&quad[attr].type==="blank node"){var id=quad[attr].value;if(id in bnodes){bnodes[id].quads.push(quad)}else{bnodes[id]={quads:[quad]}}}}}}var namer=new UniqueNamer("_:c14n");return hashBlankNodes(Object.keys(bnodes));function hashBlankNodes(unnamed){var nextUnnamed=[];var duplicates={};var unique={};return hashUnnamed(0);function hashUnnamed(i){if(i===unnamed.length){return nameBlankNodes(unique,duplicates,nextUnnamed)}var bnode=unnamed[i];var hash=_hashQuads(bnode,bnodes);if(hash in duplicates){duplicates[hash].push(bnode);nextUnnamed.push(bnode)}else if(hash in unique){duplicates[hash]=[unique[hash],bnode];nextUnnamed.push(unique[hash]);nextUnnamed.push(bnode);delete unique[hash]}else{unique[hash]=bnode}return hashUnnamed(i+1)}}function nameBlankNodes(unique,duplicates,unnamed){var named=false;var hashes=Object.keys(unique).sort();for(var i=0;i<hashes.length;++i){var bnode=unique[hashes[i]];namer.getName(bnode);named=true}if(named){return hashBlankNodes(unnamed)}else{return nameDuplicates(duplicates)}}function nameDuplicates(duplicates){var hashes=Object.keys(duplicates).sort();return processGroup(0);function processGroup(i){if(i===hashes.length){return createArray()}var group=duplicates[hashes[i]];var results=[];return nameGroupMember(group,0);function nameGroupMember(group,n){if(n===group.length){results.sort(function(a,b){a=a.hash;b=b.hash;return a<b?-1:a>b?1:0});for(var r=0;r<results.length;++r){for(var key in results[r].pathNamer.existing){namer.getName(key)}}return processGroup(i+1)}var bnode=group[n];if(namer.isNamed(bnode)){return nameGroupMember(group,n+1)}var pathNamer=new UniqueNamer("_:b");pathNamer.getName(bnode);return _hashPaths(bnode,bnodes,namer,pathNamer,function(err,result){if(err){return callback(err)}results.push(result);return nameGroupMember(group,n+1)})}}}function createArray(){var normalized=[];for(var i=0;i<quads.length;++i){var quad=quads[i];var attrs=["subject","object","name"];for(var ai=0;ai<attrs.length;++ai){var attr=attrs[ai];if(quad[attr]&&quad[attr].type==="blank node"&&quad[attr].value.indexOf("_:c14n")!==0){quad[attr].value=namer.getName(quad[attr].value)}}normalized.push(_toNQuad(quad,quad.name?quad.name.value:null))}return normalized.sort().join("")}};function _hashQuads(id,bnodes){if("hash"in bnodes[id]){return bnodes[id].hash}var quads=bnodes[id].quads;var nquads=[];for(var i=0;i<quads.length;++i){nquads.push(_toNQuad(quads[i],quads[i].name?quads[i].name.value:null,id))}nquads.sort();var hash=bnodes[id].hash=sha1.hash(nquads);return hash}function _hashPaths(id,bnodes,namer,pathNamer,callback){var md=sha1.create();var groups={};var groupHashes;var quads=bnodes[id].quads;return groupNodes(0);function groupNodes(i){if(i===quads.length){groupHashes=Object.keys(groups).sort();return hashGroup(0)}var quad=quads[i];var bnode=_getAdjacentBlankNodeName(quad.subject,id);var direction=null;if(bnode!==null){direction="p"}else{bnode=_getAdjacentBlankNodeName(quad.object,id);if(bnode!==null){direction="r"}}if(bnode!==null){var name;if(namer.isNamed(bnode)){name=namer.getName(bnode)}else if(pathNamer.isNamed(bnode)){name=pathNamer.getName(bnode)}else{name=_hashQuads(bnode,bnodes)}var md=sha1.create();md.update(direction);md.update(quad.predicate.value);md.update(name);var groupHash=md.digest();if(groupHash in groups){groups[groupHash].push(bnode)}else{groups[groupHash]=[bnode]}}return groupNodes(i+1)}function hashGroup(i){if(i===groupHashes.length){return callback(null,{hash:md.digest(),pathNamer:pathNamer})}var groupHash=groupHashes[i];md.update(groupHash);var chosenPath=null;var chosenNamer=null;var permutator=new Permutator(groups[groupHash]);return permutate();function permutate(){var permutation=permutator.next();var pathNamerCopy=pathNamer.clone();var path="";var recurse=[];for(var n in permutation){var bnode=permutation[n];if(namer.isNamed(bnode)){path+=namer.getName(bnode)}else{if(!pathNamerCopy.isNamed(bnode)){recurse.push(bnode)}path+=pathNamerCopy.getName(bnode)}if(chosenPath!==null&&path.length>=chosenPath.length&&path>chosenPath){return nextPermutation(true)}}return nextRecursion(0);function nextRecursion(n){if(n===recurse.length){return nextPermutation(false)}var bnode=recurse[n];return _hashPaths(bnode,bnodes,namer,pathNamerCopy,function(err,result){if(err){return callback(err)}path+=pathNamerCopy.getName(bnode)+"<"+result.hash+">";pathNamerCopy=result.pathNamer;if(chosenPath!==null&&path.length>=chosenPath.length&&path>chosenPath){return nextPermutation(true)}return nextRecursion(n+1)})}function nextPermutation(skipped){if(!skipped&&(chosenPath===null||path<chosenPath)){chosenPath=path;chosenNamer=pathNamerCopy}if(permutator.hasNext()){return permutate()}else{md.update(chosenPath);pathNamer=chosenNamer;return hashGroup(i+1)}}}}}function _getAdjacentBlankNodeName(node,id){return node.type==="blank node"&&node.value!==id?node.value:null}function _clone(value){if(value&&typeof value==="object"){var rval;if(Array.isArray(value)){rval=[];for(var i=0;i<value.length;++i){rval[i]=_clone(value[i])}}else if(typeof value==="object"){rval={};for(var key in value){rval[key]=_clone(value[key])}}else{rval=value.toString()}return rval}return value}function _toNQuad(triple,graphName,bnode){var s=triple.subject;var p=triple.predicate;var o=triple.object;var g=graphName;var quad="";if(s.type==="IRI"){quad+="<"+s.value+">"}else if(bnode){quad+=s.value===bnode?"_:a":"_:z"}else{quad+=s.value}quad+=" ";if(p.type==="IRI"){quad+="<"+p.value+">"}else if(bnode){quad+="_:p"}else{quad+=p.value}quad+=" ";if(o.type==="IRI"){quad+="<"+o.value+">"}else if(o.type==="blank node"){if(bnode){quad+=o.value===bnode?"_:a":"_:z"}else{quad+=o.value}}else{var escaped=o.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');quad+='"'+escaped+'"';if(o.datatype===RDF_LANGSTRING){if(o.language){quad+="@"+o.language}}else if(o.datatype!==XSD_STRING){quad+="^^<"+o.datatype+">"}}if(g!==null){if(g.indexOf("_:")!==0){quad+=" <"+g+">"}else if(bnode){quad+=" _:g"}else{quad+=" "+g}}quad+=" .\n";return quad}function UniqueNamer(prefix){this.prefix=prefix;this.counter=0;this.existing={}}UniqueNamer.prototype.clone=function(){var copy=new UniqueNamer(this.prefix);copy.counter=this.counter;copy.existing=_clone(this.existing);return copy};UniqueNamer.prototype.getName=function(oldName){if(oldName&&oldName in this.existing){return this.existing[oldName]}var name=this.prefix+this.counter;this.counter+=1;if(oldName){this.existing[oldName]=name}return name};UniqueNamer.prototype.isNamed=function(oldName){return oldName in this.existing};var Permutator=function(list){this.list=list.sort();this.done=false;this.left={};for(var i=0;i<list.length;++i){this.left[list[i]]=true}};Permutator.prototype.hasNext=function(){return!this.done};Permutator.prototype.next=function(){var rval=this.list.slice();var k=null;var pos=0;var length=this.list.length;for(var i=0;i<length;++i){var element=this.list[i];var left=this.left[element];if((k===null||element>k)&&(left&&i>0&&element>this.list[i-1]||!left&&i<length-1&&element>this.list[i+1])){k=element;pos=i}}if(k===null){this.done=true}else{var swap=this.left[k]?pos-1:pos+1;this.list[pos]=this.list[swap];this.list[swap]=k;for(var i=0;i<length;++i){if(this.list[i]>k){this.left[this.list[i]]=!this.left[this.list[i]]}}}return rval};var sha1={};var crypto=__webpack_require__(9);sha1.create=function(){var md=crypto.createHash("sha1");return{update:function(data){md.update(data,"utf8")},digest:function(){return md.digest("hex")}}};sha1.hash=function(nquads){var md=sha1.create();for(var i=0;i<nquads.length;++i){md.update(nquads[i])}return md.digest()};function normalize(dataset){var processor=new Processor;return processor.normalize(dataset)}module.exports=normalize},()=>{},(__unused_webpack_module,exports,__webpack_require__)=>{var process=__webpack_require__(11);var getOwnPropertyDescriptors=Object.getOwnPropertyDescriptors||function getOwnPropertyDescriptors(obj){var keys=Object.keys(obj);var descriptors={};for(var i=0;i<keys.length;i++){descriptors[keys[i]]=Object.getOwnPropertyDescriptor(obj,keys[i])}return descriptors};var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]))}return objects.join(" ")}var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==="%%")return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=" "+x}else{str+=" "+inspect(x)}}return str};exports.deprecate=function(fn,msg){if(typeof process!=="undefined"&&process.noDeprecation===true){return fn}if(typeof process==="undefined"){return function(){return exports.deprecate(fn,msg).apply(this,arguments)}}var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg)}else if(process.traceDeprecation){console.trace(msg)}else{console.error(msg)}warned=true}return fn.apply(this,arguments)}return deprecated};var debugs={};var debugEnvRegex=/^$/;if(process.env.NODE_DEBUG){var debugEnv=process.env.NODE_DEBUG;debugEnv=debugEnv.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase();debugEnvRegex=new RegExp("^"+debugEnv+"$","i")}exports.debuglog=function(set){set=set.toUpperCase();if(!debugs[set]){if(debugEnvRegex.test(set)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else{debugs[set]=function(){}}}return debugs[set]};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts}else if(opts){exports._extend(ctx,opts)}if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth)}exports.inspect=inspect;inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return"["+inspect.colors[style][0]+"m"+str+"["+inspect.colors[style][1]+"m"}else{return str}}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true});return hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes)}return ret}var primitive=formatPrimitive(ctx,value);if(primitive){return primitive}var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value)}if(isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0)){return formatError(value)}if(keys.length===0){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),"date")}if(isError(value)){return formatError(value)}}var base="",array=false,braces=["{","}"];if(isArray(value)){array=true;braces=["[","]"]}if(isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)){base=" "+RegExp.prototype.toString.call(value)}if(isDate(value)){base=" "+Date.prototype.toUTCString.call(value)}if(isError(value)){base=" "+formatError(value)}if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1]}if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),"regexp")}else{return ctx.stylize("[Object]","special")}}ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys)}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)})}ctx.seen.pop();return reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}if(isNumber(value))return ctx.stylize(""+value,"number");if(isBoolean(value))return ctx.stylize(""+value,"boolean");if(isNull(value))return ctx.stylize("null","null")}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true))}else{output.push("")}}keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true))}});return output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize("[Getter/Setter]","special")}else{str=ctx.stylize("[Getter]","special")}}else{if(desc.set){str=ctx.stylize("[Setter]","special")}}if(!hasOwnProperty(visibleKeys,key)){name="["+key+"]"}if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null)}else{str=formatValue(ctx,desc.value,recurseTimes-1)}if(str.indexOf("\n")>-1){if(array){str=str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2)}else{str="\n"+str.split("\n").map(function(line){return"   "+line}).join("\n")}}}else{str=ctx.stylize("[Circular]","special")}}if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str}name=JSON.stringify(""+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,"name")}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,"string")}}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf("\n")>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(length>60){return braces[0]+(base===""?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]}return braces[0]+base+" "+output.join(", ")+" "+braces[1]}exports.types=__webpack_require__(12);function isArray(ar){return Array.isArray(ar)}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;exports.types.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==="[object Date]"}exports.isDate=isDate;exports.types.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==="[object Error]"||e instanceof Error)}exports.isError=isError;exports.types.isNativeError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=__webpack_require__(30);function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp(){var d=new Date;var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))};exports.inherits=__webpack_require__(31);exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]]}return origin};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var kCustomPromisifiedSymbol=typeof Symbol!=="undefined"?Symbol("util.promisify.custom"):undefined;exports.promisify=function promisify(original){if(typeof original!=="function")throw new TypeError('The "original" argument must be of type Function');if(kCustomPromisifiedSymbol&&original[kCustomPromisifiedSymbol]){var fn=original[kCustomPromisifiedSymbol];if(typeof fn!=="function"){throw new TypeError('The "util.promisify.custom" argument must be of type Function')}Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return fn}function fn(){var promiseResolve,promiseReject;var promise=new Promise(function(resolve,reject){promiseResolve=resolve;promiseReject=reject});var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}args.push(function(err,value){if(err){promiseReject(err)}else{promiseResolve(value)}});try{original.apply(this,args)}catch(err){promiseReject(err)}return promise}Object.setPrototypeOf(fn,Object.getPrototypeOf(original));if(kCustomPromisifiedSymbol)Object.defineProperty(fn,kCustomPromisifiedSymbol,{value:fn,enumerable:false,writable:false,configurable:true});return Object.defineProperties(fn,getOwnPropertyDescriptors(original))};exports.promisify.custom=kCustomPromisifiedSymbol;function callbackifyOnRejected(reason,cb){if(!reason){var newReason=new Error("Promise was rejected with a falsy value");newReason.reason=reason;reason=newReason}return cb(reason)}function callbackify(original){if(typeof original!=="function"){throw new TypeError('The "original" argument must be of type Function')}function callbackified(){var args=[];for(var i=0;i<arguments.length;i++){args.push(arguments[i])}var maybeCb=args.pop();if(typeof maybeCb!=="function"){throw new TypeError("The last argument must be of type Function")}var self=this;var cb=function(){return maybeCb.apply(self,arguments)};original.apply(this,args).then(function(ret){process.nextTick(cb.bind(null,null,ret))},function(rej){process.nextTick(callbackifyOnRejected.bind(null,rej,cb))})}Object.setPrototypeOf(callbackified,Object.getPrototypeOf(original));Object.defineProperties(callbackified,getOwnPropertyDescriptors(original));return callbackified}exports.callbackify=callbackify},module=>{var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var isArgumentsObject=__webpack_require__(13);var isGeneratorFunction=__webpack_require__(23);var whichTypedArray=__webpack_require__(24);var isTypedArray=__webpack_require__(29);function uncurryThis(f){return f.call.bind(f)}var BigIntSupported=typeof BigInt!=="undefined";var SymbolSupported=typeof Symbol!=="undefined";var ObjectToString=uncurryThis(Object.prototype.toString);var numberValue=uncurryThis(Number.prototype.valueOf);var stringValue=uncurryThis(String.prototype.valueOf);var booleanValue=uncurryThis(Boolean.prototype.valueOf);if(BigIntSupported){var bigIntValue=uncurryThis(BigInt.prototype.valueOf)}if(SymbolSupported){var symbolValue=uncurryThis(Symbol.prototype.valueOf)}function checkBoxedPrimitive(value,prototypeValueOf){if(typeof value!=="object"){return false}try{prototypeValueOf(value);return true}catch(e){return false}}exports.isArgumentsObject=isArgumentsObject;exports.isGeneratorFunction=isGeneratorFunction;exports.isTypedArray=isTypedArray;function isPromise(input){return typeof Promise!=="undefined"&&input instanceof Promise||input!==null&&typeof input==="object"&&typeof input.then==="function"&&typeof input.catch==="function"}exports.isPromise=isPromise;function isArrayBufferView(value){if(typeof ArrayBuffer!=="undefined"&&ArrayBuffer.isView){return ArrayBuffer.isView(value)}return isTypedArray(value)||isDataView(value)}exports.isArrayBufferView=isArrayBufferView;function isUint8Array(value){return whichTypedArray(value)==="Uint8Array"}exports.isUint8Array=isUint8Array;function isUint8ClampedArray(value){return whichTypedArray(value)==="Uint8ClampedArray"}exports.isUint8ClampedArray=isUint8ClampedArray;function isUint16Array(value){return whichTypedArray(value)==="Uint16Array"}exports.isUint16Array=isUint16Array;function isUint32Array(value){return whichTypedArray(value)==="Uint32Array"}exports.isUint32Array=isUint32Array;function isInt8Array(value){return whichTypedArray(value)==="Int8Array"}exports.isInt8Array=isInt8Array;function isInt16Array(value){return whichTypedArray(value)==="Int16Array"}exports.isInt16Array=isInt16Array;function isInt32Array(value){return whichTypedArray(value)==="Int32Array"}exports.isInt32Array=isInt32Array;function isFloat32Array(value){return whichTypedArray(value)==="Float32Array"}exports.isFloat32Array=isFloat32Array;function isFloat64Array(value){return whichTypedArray(value)==="Float64Array"}exports.isFloat64Array=isFloat64Array;function isBigInt64Array(value){return whichTypedArray(value)==="BigInt64Array"}exports.isBigInt64Array=isBigInt64Array;function isBigUint64Array(value){return whichTypedArray(value)==="BigUint64Array"}exports.isBigUint64Array=isBigUint64Array;function isMapToString(value){return ObjectToString(value)==="[object Map]"}isMapToString.working=typeof Map!=="undefined"&&isMapToString(new Map);function isMap(value){if(typeof Map==="undefined"){return false}return isMapToString.working?isMapToString(value):value instanceof Map}exports.isMap=isMap;function isSetToString(value){return ObjectToString(value)==="[object Set]"}isSetToString.working=typeof Set!=="undefined"&&isSetToString(new Set);function isSet(value){if(typeof Set==="undefined"){return false}return isSetToString.working?isSetToString(value):value instanceof Set}exports.isSet=isSet;function isWeakMapToString(value){return ObjectToString(value)==="[object WeakMap]"}isWeakMapToString.working=typeof WeakMap!=="undefined"&&isWeakMapToString(new WeakMap);function isWeakMap(value){if(typeof WeakMap==="undefined"){return false}return isWeakMapToString.working?isWeakMapToString(value):value instanceof WeakMap}exports.isWeakMap=isWeakMap;function isWeakSetToString(value){return ObjectToString(value)==="[object WeakSet]"}isWeakSetToString.working=typeof WeakSet!=="undefined"&&isWeakSetToString(new WeakSet);function isWeakSet(value){return isWeakSetToString(value)}exports.isWeakSet=isWeakSet;function isArrayBufferToString(value){return ObjectToString(value)==="[object ArrayBuffer]"}isArrayBufferToString.working=typeof ArrayBuffer!=="undefined"&&isArrayBufferToString(new ArrayBuffer);function isArrayBuffer(value){if(typeof ArrayBuffer==="undefined"){return false}return isArrayBufferToString.working?isArrayBufferToString(value):value instanceof ArrayBuffer}exports.isArrayBuffer=isArrayBuffer;function isDataViewToString(value){return ObjectToString(value)==="[object DataView]"}isDataViewToString.working=typeof ArrayBuffer!=="undefined"&&typeof DataView!=="undefined"&&isDataViewToString(new DataView(new ArrayBuffer(1),0,1));function isDataView(value){if(typeof DataView==="undefined"){return false}return isDataViewToString.working?isDataViewToString(value):value instanceof DataView}exports.isDataView=isDataView;var SharedArrayBufferCopy=typeof SharedArrayBuffer!=="undefined"?SharedArrayBuffer:undefined;function isSharedArrayBufferToString(value){return ObjectToString(value)==="[object SharedArrayBuffer]"}function isSharedArrayBuffer(value){if(typeof SharedArrayBufferCopy==="undefined"){return false}if(typeof isSharedArrayBufferToString.working==="undefined"){isSharedArrayBufferToString.working=isSharedArrayBufferToString(new SharedArrayBufferCopy)}return isSharedArrayBufferToString.working?isSharedArrayBufferToString(value):value instanceof SharedArrayBufferCopy}exports.isSharedArrayBuffer=isSharedArrayBuffer;function isAsyncFunction(value){return ObjectToString(value)==="[object AsyncFunction]"}exports.isAsyncFunction=isAsyncFunction;function isMapIterator(value){return ObjectToString(value)==="[object Map Iterator]"}exports.isMapIterator=isMapIterator;function isSetIterator(value){return ObjectToString(value)==="[object Set Iterator]"}exports.isSetIterator=isSetIterator;function isGeneratorObject(value){return ObjectToString(value)==="[object Generator]"}exports.isGeneratorObject=isGeneratorObject;function isWebAssemblyCompiledModule(value){return ObjectToString(value)==="[object WebAssembly.Module]"}exports.isWebAssemblyCompiledModule=isWebAssemblyCompiledModule;function isNumberObject(value){return checkBoxedPrimitive(value,numberValue)}exports.isNumberObject=isNumberObject;function isStringObject(value){return checkBoxedPrimitive(value,stringValue)}exports.isStringObject=isStringObject;function isBooleanObject(value){return checkBoxedPrimitive(value,booleanValue)}exports.isBooleanObject=isBooleanObject;function isBigIntObject(value){return BigIntSupported&&checkBoxedPrimitive(value,bigIntValue)}exports.isBigIntObject=isBigIntObject;function isSymbolObject(value){return SymbolSupported&&checkBoxedPrimitive(value,symbolValue)}exports.isSymbolObject=isSymbolObject;function isBoxedPrimitive(value){return isNumberObject(value)||isStringObject(value)||isBooleanObject(value)||isBigIntObject(value)||isSymbolObject(value)}exports.isBoxedPrimitive=isBoxedPrimitive;function isAnyArrayBuffer(value){return typeof Uint8Array!=="undefined"&&(isArrayBuffer(value)||isSharedArrayBuffer(value))}exports.isAnyArrayBuffer=isAnyArrayBuffer;["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(method){Object.defineProperty(exports,method,{enumerable:false,value:function(){throw new Error(method+" is not supported in userland")}})})},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasToStringTag=__webpack_require__(14)();var callBound=__webpack_require__(16);var $toString=callBound("Object.prototype.toString");var isStandardArguments=function isArguments(value){if(hasToStringTag&&value&&typeof value==="object"&&Symbol.toStringTag in value){return false}return $toString(value)==="[object Arguments]"};var isLegacyArguments=function isArguments(value){if(isStandardArguments(value)){return true}return value!==null&&typeof value==="object"&&typeof value.length==="number"&&value.length>=0&&$toString(value)!=="[object Array]"&&$toString(value.callee)==="[object Function]"};var supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;module.exports=supportsStandardArguments?isStandardArguments:isLegacyArguments},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var hasSymbols=__webpack_require__(15);module.exports=function hasToStringTagShams(){return hasSymbols()&&!!Symbol.toStringTag}},module=>{"use strict";module.exports=function hasSymbols(){if(typeof Symbol!=="function"||typeof Object.getOwnPropertySymbols!=="function"){return false}if(typeof Symbol.iterator==="symbol"){return true}var obj={};var sym=Symbol("test");var symObj=Object(sym);if(typeof sym==="string"){return false}if(Object.prototype.toString.call(sym)!=="[object Symbol]"){return false}if(Object.prototype.toString.call(symObj)!=="[object Symbol]"){return false}var symVal=42;obj[sym]=symVal;for(sym in obj){return false}if(typeof Object.keys==="function"&&Object.keys(obj).length!==0){return false}if(typeof Object.getOwnPropertyNames==="function"&&Object.getOwnPropertyNames(obj).length!==0){return false}var syms=Object.getOwnPropertySymbols(obj);if(syms.length!==1||syms[0]!==sym){return false}if(!Object.prototype.propertyIsEnumerable.call(obj,sym)){return false}if(typeof Object.getOwnPropertyDescriptor==="function"){var descriptor=Object.getOwnPropertyDescriptor(obj,sym);if(descriptor.value!==symVal||descriptor.enumerable!==true){return false}}return true}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__(17);var callBind=__webpack_require__(22);var $indexOf=callBind(GetIntrinsic("String.prototype.indexOf"));module.exports=function callBoundIntrinsic(name,allowMissing){var intrinsic=GetIntrinsic(name,!!allowMissing);if(typeof intrinsic==="function"&&$indexOf(name,".prototype.")>-1){return callBind(intrinsic)}return intrinsic}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var undefined;var $SyntaxError=SyntaxError;var $Function=Function;var $TypeError=TypeError;var getEvalledConstructor=function(expressionSyntax){try{return $Function('"use strict"; return ('+expressionSyntax+").constructor;")()}catch(e){}};var $gOPD=Object.getOwnPropertyDescriptor;if($gOPD){try{$gOPD({},"")}catch(e){$gOPD=null}}var throwTypeError=function(){throw new $TypeError};var ThrowTypeError=$gOPD?function(){try{arguments.callee;return throwTypeError}catch(calleeThrows){try{return $gOPD(arguments,"callee").get}catch(gOPDthrows){return throwTypeError}}}():throwTypeError;var hasSymbols=__webpack_require__(18)();var getProto=Object.getPrototypeOf||function(x){return x.__proto__};var needsEval={};var TypedArray=typeof Uint8Array==="undefined"?undefined:getProto(Uint8Array);var INTRINSICS={"%AggregateError%":typeof AggregateError==="undefined"?undefined:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer==="undefined"?undefined:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols?getProto([][Symbol.iterator]()):undefined,"%AsyncFromSyncIteratorPrototype%":undefined,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics==="undefined"?undefined:Atomics,"%BigInt%":typeof BigInt==="undefined"?undefined:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView==="undefined"?undefined:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array==="undefined"?undefined:Float32Array,"%Float64Array%":typeof Float64Array==="undefined"?undefined:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry==="undefined"?undefined:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array==="undefined"?undefined:Int8Array,"%Int16Array%":typeof Int16Array==="undefined"?undefined:Int16Array,"%Int32Array%":typeof Int32Array==="undefined"?undefined:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols?getProto(getProto([][Symbol.iterator]())):undefined,"%JSON%":typeof JSON==="object"?JSON:undefined,"%Map%":typeof Map==="undefined"?undefined:Map,"%MapIteratorPrototype%":typeof Map==="undefined"||!hasSymbols?undefined:getProto((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise==="undefined"?undefined:Promise,"%Proxy%":typeof Proxy==="undefined"?undefined:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect==="undefined"?undefined:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set==="undefined"?undefined:Set,"%SetIteratorPrototype%":typeof Set==="undefined"||!hasSymbols?undefined:getProto((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer==="undefined"?undefined:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols?getProto(""[Symbol.iterator]()):undefined,"%Symbol%":hasSymbols?Symbol:undefined,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":typeof Uint8Array==="undefined"?undefined:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray==="undefined"?undefined:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array==="undefined"?undefined:Uint16Array,"%Uint32Array%":typeof Uint32Array==="undefined"?undefined:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap==="undefined"?undefined:WeakMap,"%WeakRef%":typeof WeakRef==="undefined"?undefined:WeakRef,"%WeakSet%":typeof WeakSet==="undefined"?undefined:WeakSet};var doEval=function doEval(name){var value;if(name==="%AsyncFunction%"){value=getEvalledConstructor("async function () {}")}else if(name==="%GeneratorFunction%"){value=getEvalledConstructor("function* () {}")}else if(name==="%AsyncGeneratorFunction%"){value=getEvalledConstructor("async function* () {}")}else if(name==="%AsyncGenerator%"){var fn=doEval("%AsyncGeneratorFunction%");if(fn){value=fn.prototype}}else if(name==="%AsyncIteratorPrototype%"){var gen=doEval("%AsyncGenerator%");if(gen){value=getProto(gen.prototype)}}INTRINSICS[name]=value;return value};var LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]};var bind=__webpack_require__(19);var hasOwn=__webpack_require__(21);var $concat=bind.call(Function.call,Array.prototype.concat);var $spliceApply=bind.call(Function.apply,Array.prototype.splice);var $replace=bind.call(Function.call,String.prototype.replace);var $strSlice=bind.call(Function.call,String.prototype.slice);var $exec=bind.call(Function.call,RegExp.prototype.exec);var rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g;var reEscapeChar=/\\(\\)?/g;var stringToPath=function stringToPath(string){var first=$strSlice(string,0,1);var last=$strSlice(string,-1);if(first==="%"&&last!=="%"){throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`")}else if(last==="%"&&first!=="%"){throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`")}var result=[];$replace(string,rePropName,function(match,number,quote,subString){result[result.length]=quote?$replace(subString,reEscapeChar,"$1"):number||match});return result};var getBaseIntrinsic=function getBaseIntrinsic(name,allowMissing){var intrinsicName=name;var alias;if(hasOwn(LEGACY_ALIASES,intrinsicName)){alias=LEGACY_ALIASES[intrinsicName];intrinsicName="%"+alias[0]+"%"}if(hasOwn(INTRINSICS,intrinsicName)){var value=INTRINSICS[intrinsicName];if(value===needsEval){value=doEval(intrinsicName)}if(typeof value==="undefined"&&!allowMissing){throw new $TypeError("intrinsic "+name+" exists, but is not available. Please file an issue!")}return{alias:alias,name:intrinsicName,value:value}}throw new $SyntaxError("intrinsic "+name+" does not exist!")};module.exports=function GetIntrinsic(name,allowMissing){if(typeof name!=="string"||name.length===0){throw new $TypeError("intrinsic name must be a non-empty string")}if(arguments.length>1&&typeof allowMissing!=="boolean"){throw new $TypeError('"allowMissing" argument must be a boolean')}if($exec(/^%?[^%]*%?$/g,name)===null){throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name")}var parts=stringToPath(name);var intrinsicBaseName=parts.length>0?parts[0]:"";var intrinsic=getBaseIntrinsic("%"+intrinsicBaseName+"%",allowMissing);var intrinsicRealName=intrinsic.name;var value=intrinsic.value;var skipFurtherCaching=false;var alias=intrinsic.alias;if(alias){intrinsicBaseName=alias[0];$spliceApply(parts,$concat([0,1],alias))}for(var i=1,isOwn=true;i<parts.length;i+=1){var part=parts[i];var first=$strSlice(part,0,1);var last=$strSlice(part,-1);if((first==='"'||first==="'"||first==="`"||(last==='"'||last==="'"||last==="`"))&&first!==last){throw new $SyntaxError("property names with quotes must have matching quotes")}if(part==="constructor"||!isOwn){skipFurtherCaching=true}intrinsicBaseName+="."+part;intrinsicRealName="%"+intrinsicBaseName+"%";if(hasOwn(INTRINSICS,intrinsicRealName)){value=INTRINSICS[intrinsicRealName]}else if(value!=null){if(!(part in value)){if(!allowMissing){throw new $TypeError("base intrinsic for "+name+" exists, but the property is not available.")}return void undefined}if($gOPD&&i+1>=parts.length){var desc=$gOPD(value,part);isOwn=!!desc;if(isOwn&&"get"in desc&&!("originalValue"in desc.get)){value=desc.get}else{value=value[part]}}else{isOwn=hasOwn(value,part);value=value[part]}if(isOwn&&!skipFurtherCaching){INTRINSICS[intrinsicRealName]=value}}}return value}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var origSymbol=typeof Symbol!=="undefined"&&Symbol;var hasSymbolSham=__webpack_require__(15);module.exports=function hasNativeSymbols(){if(typeof origSymbol!=="function"){return false}if(typeof Symbol!=="function"){return false}if(typeof origSymbol("foo")!=="symbol"){return false}if(typeof Symbol("bar")!=="symbol"){return false}return hasSymbolSham()}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var implementation=__webpack_require__(20);module.exports=Function.prototype.bind||implementation},module=>{"use strict";var ERROR_MESSAGE="Function.prototype.bind called on incompatible ";var slice=Array.prototype.slice;var toStr=Object.prototype.toString;var funcType="[object Function]";module.exports=function bind(that){var target=this;if(typeof target!=="function"||toStr.call(target)!==funcType){throw new TypeError(ERROR_MESSAGE+target)}var args=slice.call(arguments,1);var bound;var binder=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,args.concat(slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this,arguments); }")(binder);if(target.prototype){var Empty=function Empty(){};Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__(19);module.exports=bind.call(Function.call,Object.prototype.hasOwnProperty)},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var bind=__webpack_require__(19);var GetIntrinsic=__webpack_require__(17);var $apply=GetIntrinsic("%Function.prototype.apply%");var $call=GetIntrinsic("%Function.prototype.call%");var $reflectApply=GetIntrinsic("%Reflect.apply%",true)||bind.call($call,$apply);var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",true);var $defineProperty=GetIntrinsic("%Object.defineProperty%",true);var $max=GetIntrinsic("%Math.max%");if($defineProperty){try{$defineProperty({},"a",{value:1})}catch(e){$defineProperty=null}}module.exports=function callBind(originalFunction){var func=$reflectApply(bind,$call,arguments);if($gOPD&&$defineProperty){var desc=$gOPD(func,"length");if(desc.configurable){$defineProperty(func,"length",{value:1+$max(0,originalFunction.length-(arguments.length-1))})}}return func};var applyBind=function applyBind(){return $reflectApply(bind,$apply,arguments)};if($defineProperty){$defineProperty(module.exports,"apply",{value:applyBind})}else{module.exports.apply=applyBind}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var toStr=Object.prototype.toString;var fnToStr=Function.prototype.toString;var isFnRegex=/^\s*(?:function)?\*/;var hasToStringTag=__webpack_require__(14)();var getProto=Object.getPrototypeOf;var getGeneratorFunc=function(){if(!hasToStringTag){return false}try{return Function("return function*() {}")()}catch(e){}};var GeneratorFunction;module.exports=function isGeneratorFunction(fn){if(typeof fn!=="function"){return false}if(isFnRegex.test(fnToStr.call(fn))){return true}if(!hasToStringTag){var str=toStr.call(fn);return str==="[object GeneratorFunction]"}if(!getProto){return false}if(typeof GeneratorFunction==="undefined"){var generatorFunc=getGeneratorFunc();GeneratorFunction=generatorFunc?getProto(generatorFunc):false}return getProto(fn)===GeneratorFunction}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var forEach=__webpack_require__(25);var availableTypedArrays=__webpack_require__(27);var callBound=__webpack_require__(16);var $toString=callBound("Object.prototype.toString");var hasToStringTag=__webpack_require__(14)();var g=typeof globalThis==="undefined"?__webpack_require__.g:globalThis;var typedArrays=availableTypedArrays();var $slice=callBound("String.prototype.slice");var toStrTags={};var gOPD=__webpack_require__(28);var getPrototypeOf=Object.getPrototypeOf;if(hasToStringTag&&gOPD&&getPrototypeOf){forEach(typedArrays,function(typedArray){if(typeof g[typedArray]==="function"){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr);var descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}toStrTags[typedArray]=descriptor.get}}})}var tryTypedArrays=function tryAllTypedArrays(value){var foundName=false;forEach(toStrTags,function(getter,typedArray){if(!foundName){try{var name=getter.call(value);if(name===typedArray){foundName=name}}catch(e){}}});return foundName};var isTypedArray=__webpack_require__(29);module.exports=function whichTypedArray(value){if(!isTypedArray(value)){return false}if(!hasToStringTag||!(Symbol.toStringTag in value)){return $slice($toString(value),8,-1)}return tryTypedArrays(value)}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var isCallable=__webpack_require__(26);var toStr=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var forEachArray=function forEachArray(array,iterator,receiver){for(var i=0,len=array.length;i<len;i++){if(hasOwnProperty.call(array,i)){if(receiver==null){iterator(array[i],i,array)}else{iterator.call(receiver,array[i],i,array)}}}};var forEachString=function forEachString(string,iterator,receiver){for(var i=0,len=string.length;i<len;i++){if(receiver==null){iterator(string.charAt(i),i,string)}else{iterator.call(receiver,string.charAt(i),i,string)}}};var forEachObject=function forEachObject(object,iterator,receiver){for(var k in object){if(hasOwnProperty.call(object,k)){if(receiver==null){iterator(object[k],k,object)}else{iterator.call(receiver,object[k],k,object)}}}};var forEach=function forEach(list,iterator,thisArg){if(!isCallable(iterator)){throw new TypeError("iterator must be a function")}var receiver;if(arguments.length>=3){receiver=thisArg}if(toStr.call(list)==="[object Array]"){forEachArray(list,iterator,receiver)}else if(typeof list==="string"){forEachString(list,iterator,receiver)}else{forEachObject(list,iterator,receiver)}};module.exports=forEach},module=>{"use strict";var fnToStr=Function.prototype.toString;var reflectApply=typeof Reflect==="object"&&Reflect!==null&&Reflect.apply;var badArrayLike;var isCallableMarker;if(typeof reflectApply==="function"&&typeof Object.defineProperty==="function"){try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}});isCallableMarker={};reflectApply(function(){throw 42},null,badArrayLike)}catch(_){if(_!==isCallableMarker){reflectApply=null}}}else{reflectApply=null}var constructorRegex=/^\s*class\b/;var isES6ClassFn=function isES6ClassFunction(value){try{var fnStr=fnToStr.call(value);return constructorRegex.test(fnStr)}catch(e){return false}};var tryFunctionObject=function tryFunctionToStr(value){try{if(isES6ClassFn(value)){return false}fnToStr.call(value);return true}catch(e){return false}};var toStr=Object.prototype.toString;var fnClass="[object Function]";var genClass="[object GeneratorFunction]";var hasToStringTag=typeof Symbol==="function"&&!!Symbol.toStringTag;var documentDotAll=typeof document==="object"&&typeof document.all==="undefined"&&document.all!==undefined?document.all:{};module.exports=reflectApply?function isCallable(value){if(value===documentDotAll){return true}if(!value){return false}if(typeof value!=="function"&&typeof value!=="object"){return false}if(typeof value==="function"&&!value.prototype){return true}try{reflectApply(value,null,badArrayLike)}catch(e){if(e!==isCallableMarker){return false}}return!isES6ClassFn(value)}:function isCallable(value){if(value===documentDotAll){return true}if(!value){return false}if(typeof value!=="function"&&typeof value!=="object"){return false}if(typeof value==="function"&&!value.prototype){return true}if(hasToStringTag){return tryFunctionObject(value)}if(isES6ClassFn(value)){return false}var strClass=toStr.call(value);return strClass===fnClass||strClass===genClass}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];var g=typeof globalThis==="undefined"?__webpack_require__.g:globalThis;module.exports=function availableTypedArrays(){var out=[];for(var i=0;i<possibleNames.length;i++){if(typeof g[possibleNames[i]]==="function"){out[out.length]=possibleNames[i]}}return out}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var GetIntrinsic=__webpack_require__(17);var $gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",true);if($gOPD){try{$gOPD([],"length")}catch(e){$gOPD=null}}module.exports=$gOPD},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var forEach=__webpack_require__(25);var availableTypedArrays=__webpack_require__(27);var callBound=__webpack_require__(16);var $toString=callBound("Object.prototype.toString");var hasToStringTag=__webpack_require__(14)();var g=typeof globalThis==="undefined"?__webpack_require__.g:globalThis;var typedArrays=availableTypedArrays();var $indexOf=callBound("Array.prototype.indexOf",true)||function indexOf(array,value){for(var i=0;i<array.length;i+=1){if(array[i]===value){return i}}return-1};var $slice=callBound("String.prototype.slice");var toStrTags={};var gOPD=__webpack_require__(28);var getPrototypeOf=Object.getPrototypeOf;if(hasToStringTag&&gOPD&&getPrototypeOf){forEach(typedArrays,function(typedArray){var arr=new g[typedArray];if(Symbol.toStringTag in arr){var proto=getPrototypeOf(arr);var descriptor=gOPD(proto,Symbol.toStringTag);if(!descriptor){var superProto=getPrototypeOf(proto);descriptor=gOPD(superProto,Symbol.toStringTag)}toStrTags[typedArray]=descriptor.get}})}var tryTypedArrays=function tryAllTypedArrays(value){var anyTrue=false;forEach(toStrTags,function(getter,typedArray){if(!anyTrue){try{anyTrue=getter.call(value)===typedArray}catch(e){}}});return anyTrue};module.exports=function isTypedArray(value){if(!value||typeof value!=="object"){return false}if(!hasToStringTag||!(Symbol.toStringTag in value)){var tag=$slice($toString(value),8,-1);return $indexOf(typedArrays,tag)>-1}if(!gOPD){return false}return tryTypedArrays(value)}},module=>{module.exports=function isBuffer(arg){return arg&&typeof arg==="object"&&typeof arg.copy==="function"&&typeof arg.fill==="function"&&typeof arg.readUInt8==="function"}},module=>{if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}}else{module.exports=function inherits(ctor,superCtor){if(superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}}},(module,__unused_webpack_exports,__webpack_require__)=>{var util=__webpack_require__(10);var AbstractStore=__webpack_require__(33);function iriToKey(iri){if(iri===true){return iri}if(!iri){return null}return iri.toString()}function InMemoryStore(options){options=options||{};this.rdf=options.rdf||__webpack_require__(4);this.graphs={};AbstractStore.call(this)}util.inherits(InMemoryStore,AbstractStore);InMemoryStore.prototype.add=function(iri,graph,callback){var self=this;iri=iriToKey(iri);callback=callback||function(){};return new Promise(function(resolve){self.graphs[iri]=self.rdf.createGraph();self.graphs[iri].addAll(graph);callback(null,graph);resolve(graph)})};InMemoryStore.prototype.delete=function(iri,callback){var self=this;iri=iriToKey(iri);callback=callback||function(){};return new Promise(function(resolve){if(iri in self.graphs){delete self.graphs[iri]}callback();resolve()})};InMemoryStore.prototype.graph=function(iri,callback){var self=this;iri=iriToKey(iri);callback=callback||function(){};return new Promise(function(resolve){var graph=null;if(iri){graph=self.graphs[iri]}else{graph=self.rdf.createGraph();Object.keys(self.graphs).forEach(function(iri){graph.addAll(self.graphs[iri])})}callback(null,graph);resolve(graph)})};module.exports=InMemoryStore},module=>{function AbstractStore(){}AbstractStore.prototype.add=function(){throw new Error("not implemented")};AbstractStore.prototype.delete=function(){throw new Error("not implemented")};AbstractStore.prototype.graph=function(){throw new Error("not implemented")};AbstractStore.prototype.match=function(subject,predicate,object,iri,callback,limit){var self=this;callback=callback||function(){};return self.graph(iri).then(function(graph){if(graph){graph=graph.match(subject,predicate,object,limit)}callback(null,graph);return graph})};AbstractStore.prototype.merge=function(iri,graph,callback){var self=this;callback=callback||function(){};return self.graph(iri).then(function(existing){if(existing){existing.addAll(graph)}else{existing=graph}return self.add(iri,existing,callback)}).then(function(){return graph})};AbstractStore.prototype.remove=function(iri,graph,callback){var self=this;callback=callback||function(){};return self.graph(iri).then(function(existing){if(existing){return self.add(iri,existing.difference(graph))}}).then(callback)};AbstractStore.prototype.removeMatches=function(subject,predicate,object,iri,callback){var self=this;callback=callback||function(){};return self.graph(iri).then(function(existing){if(existing){return self.add(iri,existing.removeMatches(subject,predicate,object))}}).then(callback)};module.exports=AbstractStore},module=>{function Parsers(parsers){var self=this;if(parsers){Object.keys(parsers).forEach(function(mediaType){self[mediaType]=parsers[mediaType]})}}Parsers.prototype.list=function(){var propertyBlackList=["list","findParsers","parse","process","stream"];return Object.keys(this).filter(function(property){return propertyBlackList.indexOf(property)===-1})};Parsers.prototype.findParsers=function(mediaType){if(!(mediaType in this)){return null}var parsers=this[mediaType];if(!Array.isArray(parsers)){parsers=[parsers]}return parsers};Parsers.prototype.parse=function(mediaType,data,callback,base,filter,graph){var parsers=this.findParsers(mediaType);if(!parsers){return Promise.reject("no parser for mime type: "+mediaType+" found")}return parsers.shift().parse(data,callback,base,filter,graph)};Parsers.prototype.process=function(mediaType,data,callback,base,filter,done){var parsers=this.findParsers(mediaType);if(!parsers){return Promise.reject("no parser for mime type: "+mediaType+" found")}return parsers.shift().process(data,callback,base,filter,done)};Parsers.prototype.stream=function(mediaType,inputStream,base,filter){var parsers=this.findParsers(mediaType);if(!parsers){return null}return parsers.shift().stream(inputStream,base,filter)};module.exports=Parsers},module=>{function Serializers(serializers){var self=this;if(serializers){Object.keys(serializers).forEach(function(mediaType){self[mediaType]=serializers[mediaType]})}}Serializers.prototype.list=function(){var propertyBlackList=["list","findSerializer","serialize","stream"];return Object.keys(this).filter(function(property){return propertyBlackList.indexOf(property)===-1})};Serializers.prototype.findSerializer=function(mediaType){if(!(mediaType in this)){return null}return this[mediaType]};Serializers.prototype.serialize=function(mediaType,graph,callback){var serializer=this.findSerializer(mediaType);if(!serializer){return Promise.reject("no serializer for mime type: "+mediaType+" found")}return serializer.serialize(graph,callback)};Serializers.prototype.stream=function(mediaType,inputStream,base,filter){var serializer=this.findSerializer(mediaType);if(!serializer){return null}return serializer.stream(inputStream,base,filter)};module.exports=Serializers},module=>{function mixin(rdf){rdf.PrefixMap=function(prefixes){this.addAll(prefixes)};rdf.PrefixMap.prototype.addAll=function(prefixes){for(var prefix in prefixes){this[prefix]=prefixes[prefix]}};rdf.PrefixMap.prototype.resolve=function(curie){if(curie.indexOf("://")!==-1){throw new Error("string looks like an IRI")}var separator=curie.indexOf(":");if(separator===-1){throw new Error("separator not found")}var prefix=curie.substr(0,separator).toLowerCase();if(!(prefix in this)){throw new Error("prefix is not defined")}return this[prefix].concat(curie.substr(separator+1))};rdf.PrefixMap.prototype.setDefault=function(namespace){this[""]=namespace};rdf.PrefixMap.prototype.shrink=function(iri){var reserved=["addAll","resolve","setDefault","shrink"];for(var prefix in this){if(reserved.indexOf(prefix)!==-1){continue}var namespace=this[prefix];if(iri.substr(0,namespace.length)===namespace){return prefix+":"+iri.substr(namespace.length)}}return iri};rdf.TermMap=function(i){return Object.defineProperties({},{resolve:{writable:false,configurable:false,enumerable:true,value:function(term){if(this[term]){return this[term]}if(this[""]){return this[""].concat(term)}return null}},shrink:{writable:false,configurable:false,enumerable:true,value:function(iri){for(var t in this){if(this[t]===iri){return t}}return iri}},setDefault:{writable:false,configurable:false,enumerable:true,value:function(iri){this[""]=iri}},addAll:{writable:false,configurable:false,enumerable:true,value:function(terms,override){for(var t in terms){if(!this[t]||override){this[t]=terms[t]}}return this}}}).addAll(i)};rdf.Profile=function(i){return Object.defineProperties({},{prefixes:{writable:false,configurable:false,enumerable:true,value:new rdf.PrefixMap},terms:{writable:false,configurable:false,enumerable:true,value:new rdf.TermMap},resolve:{writable:false,configurable:false,enumerable:true,value:function(tp){return tp.indexOf(":")>=0?this.prefixes.resolve(tp):this.terms.resolve(tp)}},setDefaultVocabulary:{writable:false,configurable:false,enumerable:true,value:function(iri){this.terms.setDefault(iri)}},setDefaultPrefix:{writable:false,configurable:false,enumerable:true,value:function(iri){this.prefixes.setDefault(iri)}},setTerm:{writable:false,configurable:false,enumerable:true,value:function(term,iri){this.terms[term]=iri}},setPrefix:{writable:false,configurable:false,enumerable:true,value:function(prefix,iri){this.prefixes[prefix]=iri}},importProfile:{writable:false,configurable:false,enumerable:true,value:function(profile,override){if(!profile){return this}this.prefixes.addAll(profile.prefixes,override);this.terms.addAll(profile.terms,override);return this}}}).importProfile(i)};rdf.RDFEnvironment=function(){var rp={terms:{},prefixes:{owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdfa:"http://www.w3.org/ns/rdfa#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#"}};var xsd={};var x=["string","boolean","dateTime","date","time","int","double","float","decimal","integer","nonPositiveInteger","negativeInteger","long","int","short","byte","nonNegativeInteger","unsignedLong","unsignedInt","unsignedShort","unsignedByte","positiveInteger"];for(var v in x){xsd[x[v]]=rp.prefixes.xsd.concat(x[v])}return Object.defineProperties(new rdf.Profile(rp),{createBlankNode:{writable:false,configurable:false,enumerable:true,value:function(){return new rdf.BlankNode}},createNamedNode:{writable:false,configurable:false,enumerable:true,value:function(iri){return new rdf.NamedNode(iri)}},createLiteral:{writable:false,configurable:false,enumerable:true,value:function(value,language,datatype){return new rdf.Literal(value,language,datatype)}},createTriple:{writable:false,configurable:false,enumerable:true,value:function(s,p,o){return new rdf.Triple(s,p,o)}},createGraph:{writable:false,configurable:true,enumerable:true,value:function(a){return new rdf.Graph(a)}},createAction:{writable:false,configurable:false,enumerable:true,value:function(t,a){return new rdf.TripleAction(t,a)}},createProfile:{writable:false,configurable:false,enumerable:true,value:function(empty){return new rdf.Profile(!empty?this:null)}},createTermMap:{writable:false,configurable:false,enumerable:true,value:function(empty){return new rdf.TermMap(!empty?this.terms:null)}},createPrefixMap:{writable:false,configurable:false,enumerable:true,value:function(empty){return new rdf.PrefixMap(!empty?this.prefixes:null)}}})};var singleton=new rdf.RDFEnvironment;Object.keys(singleton).forEach(function(property){rdf[property]=singleton[property]})}module.exports=mixin},module=>{var utils={};utils.filter={};utils.filter.namedNode=function(node){return node.interfaceName==="NamedNode"};utils.filter.blankNode=function(node){return node.interfaceName==="BlankNode"};utils.filter.literal=function(node){return node.interfaceName==="Literal"};utils.filter.namedNodeSubject=function(subject){return function(triple){return triple.subject.interfaceName!=="NamedNode"||triple.subject.equals(subject)}};utils.list={};utils.list.tripleParts=function(graph,part,filter){var nodes={};filter=filter||function(){return true};graph.forEach(function(triple){nodes[triple[part].toString()]=triple[part]});nodes=Object.keys(nodes).map(function(key){return nodes[key]}).filter(function(node){return filter(node)});return nodes};utils.list.subjects=function(graph,filter){return utils.list.tripleParts(graph,"subject",filter)};utils.list.predicates=function(graph,filter){return utils.list.tripleParts(graph,"predicate",filter)};utils.list.objects=function(graph,filter){return utils.list.tripleParts(graph,"object",filter)};utils.createSubGraph=function(rdf,graph,entry,filter){var processedEntries={};var subGraph=rdf.createGraph();var processSubject=function(entries){if(entries.length===0){return}var newEntries=[];var matches=rdf.createGraph();entries.forEach(function(entry){matches.addAll(graph.match(entry))});if(filter){matches=matches.filter(filter)}matches.forEach(function(match){var key=match.object.toString();if(!(key in processedEntries)){newEntries.push(match.object);processedEntries[key]=true}});subGraph.addAll(matches);processSubject(newEntries)};processSubject([entry]);return subGraph};utils.createSubGraphByNamedNodeSubject=function(rdf,graph,subject){return rdf.utils.createSubGraph(graph,subject,utils.filter.namedNodeSubject(subject))};utils.splitGraphByNamedNodeSubject=function(rdf,graph,store){store=store||rdf.createStore();var adds=[];utils.list.subjects(graph,utils.filter.namedNode).forEach(function(subject){adds.push(store.add(subject,utils.createSubGraphByNamedNodeSubject(rdf,graph,subject)))});return Promise.all(adds).then(function(){return store})};utils.mapNamespaceNode=function(rdf,node,search,replace){if(node.interfaceName!=="NamedNode"){return node}if(node.nominalValue.toString().indexOf(search)!==0){return node}return rdf.createNamedNode(replace+node.nominalValue.toString().substr(search.length))};utils.mapNamespaceTriple=function(rdf,triple,search,replace){return rdf.createTriple(utils.mapNamespaceNode(rdf,triple.subject,search,replace),utils.mapNamespaceNode(rdf,triple.predicate,search,replace),utils.mapNamespaceNode(rdf,triple.object,search,replace))};utils.mapNamespaceGraph=function(rdf,graph,search,replace){var mappedGraph=rdf.createGraph();graph.forEach(function(triple){mappedGraph.add(utils.mapNamespaceTriple(rdf,triple,search,replace))});return mappedGraph};utils.mixin=function(rdf){rdf.utils={};rdf.utils.filter=utils.filter;rdf.utils.list=utils.list;rdf.utils.createSubGraph=utils.createSubGraph.bind(null,rdf);rdf.utils.createSubGraphByNamedNodeSubject=utils.createSubGraphByNamedNodeSubject.bind(null,rdf);rdf.utils.splitGraphByNamedNodeSubject=utils.splitGraphByNamedNodeSubject.bind(null,rdf);rdf.utils.mapNamespaceNode=utils.mapNamespaceNode.bind(null,rdf);rdf.utils.mapNamespaceTriple=utils.mapNamespaceTriple.bind(null,rdf);rdf.utils.mapNamespaceGraph=utils.mapNamespaceGraph.bind(null,rdf);rdf.utils.mimeTypeParserMap=utils.mimeTypeParserMap;rdf.utils.mimeTypeSerializerMap=utils.mimeTypeSerializerMap;rdf.utils.parse=utils.parse;rdf.utils.serialize=utils.serialize};module.exports=utils.mixin},(module,__unused_webpack_exports,__webpack_require__)=>{var http=__webpack_require__(39);var https=__webpack_require__(40);var url=__webpack_require__(41);var utils={};utils.defaultRequest=function(method,requestUrl,headers,content,callback){if(typeof method==="object"){callback=requestUrl;requestUrl=method.url;headers=method.headers;content=method.body;method=method.method}return new Promise(function(resolve,reject){callback=callback||function(){};var options=url.parse(requestUrl);var client=http;options.hash=null;options.method=method;options.headers=headers;if(options.protocol==="https:"){client=https}var req=client.request(options,function(res){var resContent="";res.setEncoding("utf8");res.on("data",function(chunk){resContent+=chunk});res.on("end",function(){callback(res.statusCode,res.headers,resContent);resolve({statusCode:res.statusCode,headers:res.headers,content:resContent})})});req.on("error",function(error){callback(null,null,null,error);reject(error)});if(content){req.write(content)}req.end()})};utils.mixin=function(rdf){rdf.defaultRequest=utils.defaultRequest};module.exports=utils.mixin},()=>{},()=>{},()=>{},module=>{var utils={};utils.defaultRequest=function(method,requestUrl,headers,content,callback){if(typeof method==="object"){callback=requestUrl;requestUrl=method.url;headers=method.headers;content=method.body;method=method.method}return new Promise(function(resolve,reject){callback=callback||function(){};var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(xhr.readyState===xhr.DONE){var headerLines=xhr.getAllResponseHeaders().split("\r\n");var resHeaders={};for(var i=0;i<headerLines.length;i++){var headerLine=headerLines[i].split(": ",2);resHeaders[headerLine[0].toLowerCase()]=headerLine[1]}callback(xhr.status,resHeaders,xhr.responseText);resolve({statusCode:xhr.status,headers:resHeaders,content:xhr.responseText})}};xhr.open(method,requestUrl,true);for(var header in headers){xhr.setRequestHeader(header,headers[header])}xhr.send(content)})};utils.corsProxyRequest=function(proxyUrl,method,requestUrl,headers,content,callback){var url=proxyUrl+"?url="+encodeURIComponent(requestUrl);return utils.defaultRequest(method,url,headers,content,callback)};utils.mixin=function(rdf){rdf.defaultRequest=utils.defaultRequest;rdf.corsProxyRequest=utils.corsProxyRequest};module.exports=utils.mixin},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var LdpStore=__webpack_require__(44);var lite=__webpack_require__(104);var SimpleRDF=function(_lite$SimpleRDF){_inherits(SimpleRDF,_lite$SimpleRDF);function SimpleRDF(context,iri,graph,store){_classCallCheck(this,SimpleRDF);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(SimpleRDF).call(this,context,iri,graph));_this._store=store||new LdpStore;return _this}_createClass(SimpleRDF,[{key:"child",value:function child(iri){return new SimpleRDF(this._context,iri,this._graph,this._store)}},{key:"get",value:function get(iri,options){var _this2=this;if(typeof iri!=="string"){options=iri;iri=null}if(iri){this.iri(iri)}return this._store.graph(this._iri.toString(),null,options).then(function(graph){_this2.graph(graph);return _this2})}},{key:"save",value:function save(iri,options){var _this3=this;if(typeof iri!=="string"){options=iri;iri=null}if(iri){this.iri(iri)}return this._store.add(this._iri.toString(),this._graph,null,options).then(function(){return _this3})}}]);return SimpleRDF}(lite.SimpleRDF);module.exports=function(context,iri,graph,store){return new SimpleRDF(context,iri,graph,store)};module.exports.isArray=lite.isArray;module.exports.SimpleRDF=SimpleRDF},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);__webpack_require__(45)(rdf);module.exports=__webpack_require__(3)},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var JsonLdParser=__webpack_require__(46);var MicrodataParser=__webpack_require__(76);var N3Parser=__webpack_require__(87);var RdfXmlParser=__webpack_require__(98);var JsonLdSerializer=__webpack_require__(99);var N3Serializer=__webpack_require__(101);var NTriplesSerializer=__webpack_require__(102);var SparqlUpdateSerializer=__webpack_require__(103);function register(handler,format,instance){if(!(format in handler)){handler[format]=instance}}function mixin(object){object=object||{};object.parsers=object.parsers||new rdf.Parsers;object.serializers=object.serializers||new rdf.Serializers;register(object.parsers,"application/ld+json",JsonLdParser);register(object.parsers,"application/n-triples",N3Parser);register(object.parsers,"application/rdf+xml",RdfXmlParser);register(object.parsers,"application/xhtml+xml",MicrodataParser);register(object.parsers,"text/html",MicrodataParser);register(object.parsers,"text/n3",N3Parser);register(object.parsers,"text/turtle",N3Parser);register(object.serializers,"application/ld+json",new JsonLdSerializer({outputString:true}));register(object.serializers,"application/n-triples",NTriplesSerializer);register(object.serializers,"application/sparql-update",SparqlUpdateSerializer);register(object.serializers,"text/n3",N3Serializer);register(object.serializers,"text/turtle",N3Serializer);return object}module.exports=mixin},(module,__unused_webpack_exports,__webpack_require__)=>{var jsonld=__webpack_require__(47);var rdf=__webpack_require__(4);var inherits=__webpack_require__(31);var AbstractParser=__webpack_require__(51);var JsonLdParser=function(options){AbstractParser.call(this,rdf);options=options||{};if(!("importPrefixMap"in options)){options.importPrefixMap=true}var expandAndFlatten=function(data,base,callback){jsonld.expand(data,{base:base},function(error,expanded){if(error){return callback(error)}jsonld.flatten(expanded,{},function(error,flattened){if(error){return callback(error)}if(!("@graph"in flattened)){return callback(new Error("no @graph property in flattened JSON-LD"))}callback(null,flattened["@graph"])})})};var toArray=function(object){object=object||[];if(Array.isArray(object)){return object}return[object]};this.process=function(data,callback,base,filter,done){return new Promise(function(resolve,reject){if(typeof data==="string"){data=JSON.parse(data)}base=base||"";filter=filter||function(){return true};done=done||function(){};var getLiteral=function(jsonNode){var type=null;var lang=null;if("@type"in jsonNode){type=getNode(jsonNode["@type"])}if("@language"in jsonNode){lang=jsonNode["@language"]}return rdf.createLiteral(jsonNode["@value"],lang,type)};var nodeCache={};var getNode=function(jsonNode){if(jsonNode in nodeCache){return nodeCache[jsonNode]}if(!jsonNode){return rdf.createBlankNode()}if(jsonNode.indexOf("_:")===0){return nodeCache[jsonNode]=rdf.createBlankNode()}return nodeCache[jsonNode]=rdf.createNamedNode(jsonNode)};var pushTriple=function(subject,predicate,object){var triple=rdf.createTriple(subject,predicate,object);if(filter(triple)){callback(triple)}};var processSubject=function(jsonSubject){var subject=jsonSubject["@id"];var types=toArray(jsonSubject["@type"]);types.forEach(function(type){pushTriple(getNode(subject),getNode(rdf.resolve("rdf:type")),getNode(type))});for(var predicate in jsonSubject){if(predicate.indexOf("@")===0){continue}processPredicate(subject,predicate,toArray(jsonSubject[predicate]))}};var processPredicate=function(subject,predicate,jsonObjects){jsonObjects.forEach(function(jsonObject){pushTriple(getNode(subject),getNode(predicate),processObject(jsonObject))})};var processObject=function(jsonObject){if(typeof jsonObject!=="object"){if(typeof jsonObject==="boolean"){return rdf.createLiteral(jsonObject,null,rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#boolean"))}else if(typeof jsonObject==="number"){if(String(jsonObject).indexOf(".")!==-1){return rdf.createLiteral(jsonObject.toString(),null,rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#double"))}else{return rdf.createLiteral(jsonObject.toString(),null,rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#integer"))}}else{return rdf.createLiteral(jsonObject.toString())}}if("@id"in jsonObject){return getNode(jsonObject["@id"])}if("@list"in jsonObject){return processList(jsonObject["@list"])}return getLiteral(jsonObject)};var processList=function(jsonList){var entry=getNode();var subject=entry;var rest;jsonList.forEach(function(jItem,index){if(index!==jsonList.length-1){rest=getNode()}else{rest=getNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}pushTriple(subject,getNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),getNode(jItem["@id"]));pushTriple(subject,getNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),rest);subject=rest});return entry};if(options.importPrefixMap&&"@context"in data&&typeof data["@context"]==="object"){var context=data["@context"];Object.keys(context).forEach(function(key){if(key.slice(0,1)!=="@"&&typeof context[key]==="string"){rdf.prefixes[key]=context[key]}})}expandAndFlatten(data,base,function(error,jsonGraph){if(error){if(done){done(error)}return reject(error)}if(jsonGraph){jsonGraph.forEach(function(jsonSubject){if(jsonSubject["@graph"]){jsonSubject=jsonSubject["@graph"].shift()}processSubject(jsonSubject)})}if(done){done()}resolve()})})}};inherits(JsonLdParser,AbstractParser);var instance=new JsonLdParser;for(var property in instance){JsonLdParser[property]=instance[property]}module.exports=JsonLdParser},(module,exports,__webpack_require__)=>{var __dirname="/";var process=__webpack_require__(11);var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;(function(){var _nodejs=typeof process!=="undefined"&&process.versions&&process.versions.node;var _browser=!_nodejs&&(typeof window!=="undefined"||typeof self!=="undefined");if(_browser){if(typeof __webpack_require__.g==="undefined"){if(typeof window!=="undefined"){__webpack_require__.g=window}else if(typeof self!=="undefined"){__webpack_require__.g=self}else if(typeof $!=="undefined"){__webpack_require__.g=$}}}var wrapper=function(jsonld){jsonld.compact=function(input,ctx,options,callback){if(arguments.length<2){return jsonld.nextTick(function(){callback(new TypeError("Could not compact, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(ctx===null){return jsonld.nextTick(function(){callback(new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))})}if(input===null){return jsonld.nextTick(function(){callback(null,null)})}if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("compactArrays"in options)){options.compactArrays=true}if(!("graph"in options)){options.graph=false}if(!("skipExpansion"in options)){options.skipExpansion=false}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}if(!("link"in options)){options.link=false}if(options.link){options.skipExpansion=true}var expand=function(input,options,callback){if(options.skipExpansion){return jsonld.nextTick(function(){callback(null,input)})}jsonld.expand(input,options,callback)};expand(input,options,function(err,expanded){if(err){return callback(new JsonLdError("Could not expand input before compaction.","jsonld.CompactError",{cause:err}))}var activeCtx=_getInitialContext(options);jsonld.processContext(activeCtx,ctx,options,function(err,activeCtx){if(err){return callback(new JsonLdError("Could not process context before compaction.","jsonld.CompactError",{cause:err}))}var compacted;try{compacted=(new Processor).compact(activeCtx,null,expanded,options)}catch(ex){return callback(ex)}cleanup(null,compacted,activeCtx,options)})});function cleanup(err,compacted,activeCtx,options){if(err){return callback(err)}if(options.compactArrays&&!options.graph&&_isArray(compacted)){if(compacted.length===1){compacted=compacted[0]}else if(compacted.length===0){compacted={}}}else if(options.graph&&_isObject(compacted)){compacted=[compacted]}if(_isObject(ctx)&&"@context"in ctx){ctx=ctx["@context"]}ctx=_clone(ctx);if(!_isArray(ctx)){ctx=[ctx]}var tmp=ctx;ctx=[];for(var i=0;i<tmp.length;++i){if(!_isObject(tmp[i])||Object.keys(tmp[i]).length>0){ctx.push(tmp[i])}}var hasContext=ctx.length>0;if(ctx.length===1){ctx=ctx[0]}if(_isArray(compacted)){var kwgraph=_compactIri(activeCtx,"@graph");var graph=compacted;compacted={};if(hasContext){compacted["@context"]=ctx}compacted[kwgraph]=graph}else if(_isObject(compacted)&&hasContext){var graph=compacted;compacted={"@context":ctx};for(var key in graph){compacted[key]=graph[key]}}callback(null,compacted,activeCtx)}};jsonld.expand=function(input,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not expand, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}if(!("keepFreeFloatingNodes"in options)){options.keepFreeFloatingNodes=false}jsonld.nextTick(function(){if(typeof input==="string"){var done=function(err,remoteDoc){if(err){return callback(err)}try{if(!remoteDoc.document){throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument")}if(typeof remoteDoc.document==="string"){remoteDoc.document=JSON.parse(remoteDoc.document)}}catch(ex){return callback(new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL "+"dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ex,remoteDoc:remoteDoc}))}expand(remoteDoc)};var promise=options.documentLoader(input,done);if(promise&&"then"in promise){promise.then(done.bind(null,null),done)}return}expand({contextUrl:null,documentUrl:null,document:input})});function expand(remoteDoc){if(!("base"in options)){options.base=remoteDoc.documentUrl||""}var input={document:_clone(remoteDoc.document),remoteContext:{"@context":remoteDoc.contextUrl}};if("expandContext"in options){var expandContext=_clone(options.expandContext);if(typeof expandContext==="object"&&"@context"in expandContext){input.expandContext=expandContext}else{input.expandContext={"@context":expandContext}}}_retrieveContextUrls(input,options,function(err,input){if(err){return callback(err)}var expanded;try{var processor=new Processor;var activeCtx=_getInitialContext(options);var document=input.document;var remoteContext=input.remoteContext["@context"];if(input.expandContext){activeCtx=processor.processContext(activeCtx,input.expandContext["@context"],options)}if(remoteContext){activeCtx=processor.processContext(activeCtx,remoteContext,options)}expanded=processor.expand(activeCtx,null,document,options,false);if(_isObject(expanded)&&"@graph"in expanded&&Object.keys(expanded).length===1){expanded=expanded["@graph"]}else if(expanded===null){expanded=[]}if(!_isArray(expanded)){expanded=[expanded]}}catch(ex){return callback(ex)}callback(null,expanded)})}};jsonld.flatten=function(input,ctx,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not flatten, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}else if(typeof ctx==="function"){callback=ctx;ctx=null;options={}}options=options||{};if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}jsonld.expand(input,options,function(err,_input){if(err){return callback(new JsonLdError("Could not expand input before flattening.","jsonld.FlattenError",{cause:err}))}var flattened;try{flattened=(new Processor).flatten(_input)}catch(ex){return callback(ex)}if(ctx===null){return callback(null,flattened)}options.graph=true;options.skipExpansion=true;jsonld.compact(flattened,ctx,options,function(err,compacted){if(err){return callback(new JsonLdError("Could not compact flattened output.","jsonld.FlattenError",{cause:err}))}callback(null,compacted)})})};jsonld.frame=function(input,frame,options,callback){if(arguments.length<2){return jsonld.nextTick(function(){callback(new TypeError("Could not frame, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}if(!("embed"in options)){options.embed="@last"}options.explicit=options.explicit||false;if(!("requireAll"in options)){options.requireAll=true}options.omitDefault=options.omitDefault||false;jsonld.nextTick(function(){if(typeof frame==="string"){var done=function(err,remoteDoc){if(err){return callback(err)}try{if(!remoteDoc.document){throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument")}if(typeof remoteDoc.document==="string"){remoteDoc.document=JSON.parse(remoteDoc.document)}}catch(ex){return callback(new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL "+"dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ex,remoteDoc:remoteDoc}))}doFrame(remoteDoc)};var promise=options.documentLoader(frame,done);if(promise&&"then"in promise){promise.then(done.bind(null,null),done)}return}doFrame({contextUrl:null,documentUrl:null,document:frame})});function doFrame(remoteFrame){var frame=remoteFrame.document;var ctx;if(frame){ctx=frame["@context"];if(remoteFrame.contextUrl){if(!ctx){ctx=remoteFrame.contextUrl}else if(_isArray(ctx)){ctx.push(remoteFrame.contextUrl)}else{ctx=[ctx,remoteFrame.contextUrl]}frame["@context"]=ctx}else{ctx=ctx||{}}}else{ctx={}}jsonld.expand(input,options,function(err,expanded){if(err){return callback(new JsonLdError("Could not expand input before framing.","jsonld.FrameError",{cause:err}))}var opts=_clone(options);opts.isFrame=true;opts.keepFreeFloatingNodes=true;jsonld.expand(frame,opts,function(err,expandedFrame){if(err){return callback(new JsonLdError("Could not expand frame before framing.","jsonld.FrameError",{cause:err}))}var framed;try{framed=(new Processor).frame(expanded,expandedFrame,opts)}catch(ex){return callback(ex)}opts.graph=true;opts.skipExpansion=true;opts.link={};jsonld.compact(framed,ctx,opts,function(err,compacted,ctx){if(err){return callback(new JsonLdError("Could not compact framed output.","jsonld.FrameError",{cause:err}))}var graph=_compactIri(ctx,"@graph");opts.link={};compacted[graph]=_removePreserve(ctx,compacted[graph],opts);callback(null,compacted)})})})}};jsonld.link=function(input,ctx,options,callback){var frame={};if(ctx){frame["@context"]=ctx}frame["@embed"]="@link";jsonld.frame(input,frame,options,callback)};jsonld.objectify=function(input,ctx,options,callback){if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}jsonld.expand(input,options,function(err,_input){if(err){return callback(new JsonLdError("Could not expand input before linking.","jsonld.LinkError",{cause:err}))}var flattened;try{flattened=(new Processor).flatten(_input)}catch(ex){return callback(ex)}options.graph=true;options.skipExpansion=true;jsonld.compact(flattened,ctx,options,function(err,compacted,ctx){if(err){return callback(new JsonLdError("Could not compact flattened output before linking.","jsonld.LinkError",{cause:err}))}var graph=_compactIri(ctx,"@graph");var top=compacted[graph][0];var recurse=function(subject){if(!_isObject(subject)&&!_isArray(subject)){return}if(_isObject(subject)){if(recurse.visited[subject["@id"]]){return}recurse.visited[subject["@id"]]=true}for(var k in subject){var obj=subject[k];var isid=jsonld.getContextValue(ctx,k,"@type")==="@id";if(!_isArray(obj)&&!_isObject(obj)&&!isid){continue}if(_isString(obj)&&isid){subject[k]=obj=top[obj];recurse(obj)}else if(_isArray(obj)){for(var i=0;i<obj.length;++i){if(_isString(obj[i])&&isid){obj[i]=top[obj[i]]}else if(_isObject(obj[i])&&"@id"in obj[i]){obj[i]=top[obj[i]["@id"]]}recurse(obj[i])}}else if(_isObject(obj)){var sid=obj["@id"];subject[k]=obj=top[sid];recurse(obj)}}};recurse.visited={};recurse(top);compacted.of_type={};for(var s in top){if(!("@type"in top[s])){continue}var types=top[s]["@type"];if(!_isArray(types)){types=[types]}for(var t=0;t<types.length;++t){if(!(types[t]in compacted.of_type)){compacted.of_type[types[t]]=[]}compacted.of_type[types[t]].push(top[s])}}callback(null,compacted)})})};jsonld.normalize=function(input,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not normalize, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("algorithm"in options)){options.algorithm="URGNA2012"}if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}if("inputFormat"in options){if(options.inputFormat!=="application/nquads"){return callback(new JsonLdError("Unknown normalization input format.","jsonld.NormalizeError"))}var parsedInput=_parseNQuads(input);(new Processor).normalize(parsedInput,options,callback)}else{var opts=_clone(options);delete opts.format;opts.produceGeneralizedRdf=false;jsonld.toRDF(input,opts,function(err,dataset){if(err){return callback(new JsonLdError("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:err}))}(new Processor).normalize(dataset,options,callback)})}};jsonld.fromRDF=function(dataset,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not convert from RDF, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("useRdfType"in options)){options.useRdfType=false}if(!("useNativeTypes"in options)){options.useNativeTypes=false}if(!("format"in options)&&_isString(dataset)){if(!("format"in options)){options.format="application/nquads"}}jsonld.nextTick(function(){var rdfParser;if(options.format){rdfParser=options.rdfParser||_rdfParsers[options.format];if(!rdfParser){return callback(new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format:options.format}))}}else{rdfParser=function(){return dataset}}var callbackCalled=false;try{dataset=rdfParser(dataset,function(err,dataset){callbackCalled=true;if(err){return callback(err)}fromRDF(dataset,options,callback)})}catch(e){if(!callbackCalled){return callback(e)}throw e}if(dataset){if("then"in dataset){return dataset.then(function(dataset){fromRDF(dataset,options,callback)},callback)}fromRDF(dataset,options,callback)}function fromRDF(dataset,options,callback){(new Processor).fromRDF(dataset,options,callback)}})};jsonld.toRDF=function(input,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not convert to RDF, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}jsonld.expand(input,options,function(err,expanded){if(err){return callback(new JsonLdError("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:err}))}var dataset;try{dataset=Processor.prototype.toRDF(expanded,options);if(options.format){if(options.format==="application/nquads"){return callback(null,_toNQuads(dataset))}throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:options.format})}}catch(ex){return callback(ex)}callback(null,dataset)})};jsonld.createNodeMap=function(input,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not create node map, too few arguments."))})}if(typeof options==="function"){callback=options;options={}}options=options||{};if(!("base"in options)){options.base=typeof input==="string"?input:""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}jsonld.expand(input,options,function(err,_input){if(err){return callback(new JsonLdError("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:err}))}var nodeMap;try{nodeMap=(new Processor).createNodeMap(_input,options)}catch(ex){return callback(ex)}callback(null,nodeMap)})};jsonld.merge=function(docs,ctx,options,callback){if(arguments.length<1){return jsonld.nextTick(function(){callback(new TypeError("Could not merge, too few arguments."))})}if(!_isArray(docs)){return jsonld.nextTick(function(){callback(new TypeError('Could not merge, "docs" must be an array.'))})}if(typeof options==="function"){callback=options;options={}}else if(typeof ctx==="function"){callback=ctx;ctx=null;options={}}options=options||{};var expanded=[];var error=null;var count=docs.length;for(var i=0;i<docs.length;++i){var opts={};for(var key in options){opts[key]=options[key]}jsonld.expand(docs[i],opts,expandComplete)}function expandComplete(err,_input){if(error){return}if(err){error=err;return callback(new JsonLdError("Could not expand input before flattening.","jsonld.FlattenError",{cause:err}))}expanded.push(_input);if(--count===0){merge(expanded)}}function merge(expanded){var mergeNodes=true;if("mergeNodes"in options){mergeNodes=options.mergeNodes}var issuer=options.namer||options.issuer||new IdentifierIssuer("_:b");var graphs={"@default":{}};var defaultGraph;try{for(var i=0;i<expanded.length;++i){var doc=expanded[i];doc=jsonld.relabelBlankNodes(doc,{issuer:new IdentifierIssuer("_:b"+i+"-")});var _graphs=mergeNodes||i===0?graphs:{"@default":{}};_createNodeMap(doc,_graphs,"@default",issuer);if(_graphs!==graphs){for(var graphName in _graphs){var _nodeMap=_graphs[graphName];if(!(graphName in graphs)){graphs[graphName]=_nodeMap;continue}var nodeMap=graphs[graphName];for(var key in _nodeMap){if(!(key in nodeMap)){nodeMap[key]=_nodeMap[key]}}}}}defaultGraph=_mergeNodeMaps(graphs)}catch(ex){return callback(ex)}var flattened=[];var keys=Object.keys(defaultGraph).sort();for(var ki=0;ki<keys.length;++ki){var node=defaultGraph[keys[ki]];if(!_isSubjectReference(node)){flattened.push(node)}}if(ctx===null){return callback(null,flattened)}options.graph=true;options.skipExpansion=true;jsonld.compact(flattened,ctx,options,function(err,compacted){if(err){return callback(new JsonLdError("Could not compact merged output.","jsonld.MergeError",{cause:err}))}callback(null,compacted)})}};jsonld.relabelBlankNodes=function(input,options){options=options||{};var issuer=options.namer||options.issuer||new IdentifierIssuer("_:b");return _labelBlankNodes(issuer,input)};jsonld.prependBase=function(base,iri){return _prependBase(base,iri)};jsonld.documentLoader=function(url,callback){var err=new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL "+"dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});if(_nodejs){return callback(err,{contextUrl:null,documentUrl:url,document:null})}return jsonld.promisify(function(callback){callback(err)})};jsonld.loadDocument=function(url,callback){var promise=jsonld.documentLoader(url,callback);if(promise&&"then"in promise){promise.then(callback.bind(null,null),callback)}};jsonld.promises=function(options){options=options||{};var slice=Array.prototype.slice;var promisify=jsonld.promisify;var api=options.api||{};var version=options.version||"jsonld.js";if(typeof options.api==="string"){if(!options.version){version=options.api}api={}}api.expand=function(input){if(arguments.length<1){throw new TypeError("Could not expand, too few arguments.")}return promisify.apply(null,[jsonld.expand].concat(slice.call(arguments)))};api.compact=function(input,ctx){if(arguments.length<2){throw new TypeError("Could not compact, too few arguments.")}var compact=function(input,ctx,options,callback){if(typeof options==="function"){callback=options;options={}}options=options||{};jsonld.compact(input,ctx,options,function(err,compacted){callback(err,compacted)})};return promisify.apply(null,[compact].concat(slice.call(arguments)))};api.flatten=function(input){if(arguments.length<1){throw new TypeError("Could not flatten, too few arguments.")}return promisify.apply(null,[jsonld.flatten].concat(slice.call(arguments)))};api.frame=function(input,frame){if(arguments.length<2){throw new TypeError("Could not frame, too few arguments.")}return promisify.apply(null,[jsonld.frame].concat(slice.call(arguments)))};api.fromRDF=function(dataset){if(arguments.length<1){throw new TypeError("Could not convert from RDF, too few arguments.")}return promisify.apply(null,[jsonld.fromRDF].concat(slice.call(arguments)))};api.toRDF=function(input){if(arguments.length<1){throw new TypeError("Could not convert to RDF, too few arguments.")}return promisify.apply(null,[jsonld.toRDF].concat(slice.call(arguments)))};api.normalize=function(input){if(arguments.length<1){throw new TypeError("Could not normalize, too few arguments.")}return promisify.apply(null,[jsonld.normalize].concat(slice.call(arguments)))};if(version==="jsonld.js"){api.link=function(input,ctx){if(arguments.length<2){throw new TypeError("Could not link, too few arguments.")}return promisify.apply(null,[jsonld.link].concat(slice.call(arguments)))};api.objectify=function(input){return promisify.apply(null,[jsonld.objectify].concat(slice.call(arguments)))};api.createNodeMap=function(input){return promisify.apply(null,[jsonld.createNodeMap].concat(slice.call(arguments)))};api.merge=function(input){return promisify.apply(null,[jsonld.merge].concat(slice.call(arguments)))}}try{jsonld.Promise=__webpack_require__.g.Promise||__webpack_require__(48).Promise}catch(e){var f=function(){throw new Error("Unable to find a Promise implementation.")};for(var method in api){api[method]=f}}return api};jsonld.promisify=function(op){if(!jsonld.Promise){try{jsonld.Promise=__webpack_require__.g.Promise||__webpack_require__(48).Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}}var args=Array.prototype.slice.call(arguments,1);return new jsonld.Promise(function(resolve,reject){op.apply(null,args.concat(function(err,value){if(!err){resolve(value)}else{reject(err)}}))})};jsonld.promises({api:jsonld.promises});function JsonLdProcessor(){}JsonLdProcessor.prototype=jsonld.promises({version:"json-ld-1.0"});JsonLdProcessor.prototype.toString=function(){if(this instanceof JsonLdProcessor){return"[object JsonLdProcessor]"}return"[object JsonLdProcessorPrototype]"};jsonld.JsonLdProcessor=JsonLdProcessor;var canDefineProperty=!!Object.defineProperty;if(canDefineProperty){try{Object.defineProperty({},"x",{})}catch(e){canDefineProperty=false}}if(canDefineProperty){Object.defineProperty(JsonLdProcessor,"prototype",{writable:false,enumerable:false});Object.defineProperty(JsonLdProcessor.prototype,"constructor",{writable:true,enumerable:false,configurable:true,value:JsonLdProcessor})}if(_browser&&typeof __webpack_require__.g.JsonLdProcessor==="undefined"){if(canDefineProperty){Object.defineProperty(__webpack_require__.g,"JsonLdProcessor",{writable:true,enumerable:false,configurable:true,value:JsonLdProcessor})}else{__webpack_require__.g.JsonLdProcessor=JsonLdProcessor}}var _setImmediate=typeof setImmediate==="function"&&setImmediate;var _delay=_setImmediate?function(fn){_setImmediate(fn)}:function(fn){setTimeout(fn,0)};if(typeof process==="object"&&typeof process.nextTick==="function"){jsonld.nextTick=process.nextTick}else{jsonld.nextTick=_delay}jsonld.setImmediate=_setImmediate?_delay:jsonld.nextTick;jsonld.parseLinkHeader=function(header){var rval={};var entries=header.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g);var rLinkHeader=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/;for(var i=0;i<entries.length;++i){var match=entries[i].match(rLinkHeader);if(!match){continue}var result={target:match[1]};var params=match[2];var rParams=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;while(match=rParams.exec(params)){result[match[1]]=match[2]===undefined?match[3]:match[2]}var rel=result["rel"]||"";if(_isArray(rval[rel])){rval[rel].push(result)}else if(rel in rval){rval[rel]=[rval[rel],result]}else{rval[rel]=result}}return rval};jsonld.RequestQueue=function(){this._requests={}};jsonld.RequestQueue.prototype.wrapLoader=function(loader){this._loader=loader;this._usePromise=loader.length===1;return this.add.bind(this)};jsonld.RequestQueue.prototype.add=function(url,callback){var self=this;if(!callback&&!self._usePromise){throw new Error("callback must be specified.")}if(self._usePromise){return new jsonld.Promise(function(resolve,reject){var load=self._requests[url];if(!load){load=self._requests[url]=self._loader(url).then(function(remoteDoc){delete self._requests[url];return remoteDoc}).catch(function(err){delete self._requests[url];throw err})}load.then(function(remoteDoc){resolve(remoteDoc)}).catch(function(err){reject(err)})})}if(url in self._requests){self._requests[url].push(callback)}else{self._requests[url]=[callback];self._loader(url,function(err,remoteDoc){var callbacks=self._requests[url];delete self._requests[url];for(var i=0;i<callbacks.length;++i){callbacks[i](err,remoteDoc)}})}};jsonld.DocumentCache=function(size){this.order=[];this.cache={};this.size=size||50;this.expires=30*1e3};jsonld.DocumentCache.prototype.get=function(url){if(url in this.cache){var entry=this.cache[url];if(entry.expires>=+new Date){return entry.ctx}delete this.cache[url];this.order.splice(this.order.indexOf(url),1)}return null};jsonld.DocumentCache.prototype.set=function(url,ctx){if(this.order.length===this.size){delete this.cache[this.order.shift()]}this.order.push(url);this.cache[url]={ctx:ctx,expires:+new Date+this.expires}};jsonld.ActiveContextCache=function(size){this.order=[];this.cache={};this.size=size||100};jsonld.ActiveContextCache.prototype.get=function(activeCtx,localCtx){var key1=JSON.stringify(activeCtx);var key2=JSON.stringify(localCtx);var level1=this.cache[key1];if(level1&&key2 in level1){return level1[key2]}return null};jsonld.ActiveContextCache.prototype.set=function(activeCtx,localCtx,result){if(this.order.length===this.size){var entry=this.order.shift();delete this.cache[entry.activeCtx][entry.localCtx]}var key1=JSON.stringify(activeCtx);var key2=JSON.stringify(localCtx);this.order.push({activeCtx:key1,localCtx:key2});if(!(key1 in this.cache)){this.cache[key1]={}}this.cache[key1][key2]=_clone(result)};jsonld.cache={activeCtx:new jsonld.ActiveContextCache};jsonld.documentLoaders={};jsonld.documentLoaders.jquery=function($,options){options=options||{};var queue=new jsonld.RequestQueue;var usePromise="usePromise"in options?options.usePromise:typeof Promise!=="undefined";if(usePromise){return queue.wrapLoader(function(url){return jsonld.promisify(loader,url)})}return queue.wrapLoader(loader);function loader(url,callback){if(url.indexOf("http:")!==0&&url.indexOf("https:")!==0){return callback(new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are '+"supported.","jsonld.InvalidUrl",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})}if(options.secure&&url.indexOf("https")!==0){return callback(new JsonLdError("URL could not be dereferenced; secure mode is enabled and "+'the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})}$.ajax({url:url,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:true,success:function(data,textStatus,jqXHR){var doc={contextUrl:null,documentUrl:url,document:data};var contentType=jqXHR.getResponseHeader("Content-Type");var linkHeader=jqXHR.getResponseHeader("Link");if(linkHeader&&contentType!=="application/ld+json"){linkHeader=jsonld.parseLinkHeader(linkHeader)[LINK_HEADER_REL];if(_isArray(linkHeader)){return callback(new JsonLdError("URL could not be dereferenced, it has more than one "+"associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:url}),doc)}if(linkHeader){doc.contextUrl=linkHeader.target}}callback(null,doc)},error:function(jqXHR,textStatus,err){callback(new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:url,cause:err}),{contextUrl:null,documentUrl:url,document:null})}})}};jsonld.documentLoaders.node=function(options){options=options||{};var strictSSL="strictSSL"in options?options.strictSSL:true;var maxRedirects="maxRedirects"in options?options.maxRedirects:-1;var request="request"in options?options.request:__webpack_require__(50);var acceptHeader="application/ld+json, application/json";var http=__webpack_require__(50);var queue=new jsonld.RequestQueue;if(options.usePromise){return queue.wrapLoader(function(url){return jsonld.promisify(loadDocument,url,[])})}var headers=options.headers||{};if("Accept"in headers||"accept"in headers){throw new RangeError('Accept header may not be specified as an option; only "'+acceptHeader+'" is supported.')}return queue.wrapLoader(function(url,callback){loadDocument(url,[],callback)});function loadDocument(url,redirects,callback){if(url.indexOf("http:")!==0&&url.indexOf("https:")!==0){return callback(new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are '+"supported.","jsonld.InvalidUrl",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})}if(options.secure&&url.indexOf("https")!==0){return callback(new JsonLdError("URL could not be dereferenced; secure mode is enabled and "+'the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})}var doc=null;if(doc!==null){return callback(null,doc)}var headers={Accept:acceptHeader};for(var k in options.headers){headers[k]=options.headers[k]}request({url:url,headers:headers,strictSSL:strictSSL,followRedirect:false},handleResponse);function handleResponse(err,res,body){doc={contextUrl:null,documentUrl:url,document:body||null};if(err){return callback(new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:url,cause:err}),doc)}var statusText=http.STATUS_CODES[res.statusCode];if(res.statusCode>=400){return callback(new JsonLdError("URL could not be dereferenced: "+statusText,"jsonld.InvalidUrl",{code:"loading document failed",url:url,httpStatusCode:res.statusCode}),doc)}if(res.headers.link&&res.headers["content-type"]!=="application/ld+json"){var linkHeader=jsonld.parseLinkHeader(res.headers.link)[LINK_HEADER_REL];if(_isArray(linkHeader)){return callback(new JsonLdError("URL could not be dereferenced, it has more than one associated "+"HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:url}),doc)}if(linkHeader){doc.contextUrl=linkHeader.target}}if(res.statusCode>=300&&res.statusCode<400&&res.headers.location){if(redirects.length===maxRedirects){return callback(new JsonLdError("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:url,httpStatusCode:res.statusCode,redirects:redirects}),doc)}if(redirects.indexOf(url)!==-1){return callback(new JsonLdError("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:url,httpStatusCode:res.statusCode,redirects:redirects}),doc)}redirects.push(url);return loadDocument(res.headers.location,redirects,callback)}redirects.push(url);callback(err,doc)}}};jsonld.documentLoaders.xhr=function(options){options=options||{};var rlink=/(^|(\r\n))link:/i;var queue=new jsonld.RequestQueue;var usePromise="usePromise"in options?options.usePromise:typeof Promise!=="undefined";if(usePromise){return queue.wrapLoader(function(url){return jsonld.promisify(loader,url)})}return queue.wrapLoader(loader);function loader(url,callback){if(url.indexOf("http:")!==0&&url.indexOf("https:")!==0){return callback(new JsonLdError('URL could not be dereferenced; only "http" and "https" URLs are '+"supported.","jsonld.InvalidUrl",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})}if(options.secure&&url.indexOf("https")!==0){return callback(new JsonLdError("URL could not be dereferenced; secure mode is enabled and "+'the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})}var xhr=options.xhr||XMLHttpRequest;var req=new xhr;req.onload=function(){if(req.status>=400){return callback(new JsonLdError("URL could not be dereferenced: "+req.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:url,httpStatusCode:req.status}),{contextUrl:null,documentUrl:url,document:null})}var doc={contextUrl:null,documentUrl:url,document:req.response};var contentType=req.getResponseHeader("Content-Type");var linkHeader;if(rlink.test(req.getAllResponseHeaders())){linkHeader=req.getResponseHeader("Link")}if(linkHeader&&contentType!=="application/ld+json"){linkHeader=jsonld.parseLinkHeader(linkHeader)[LINK_HEADER_REL];if(_isArray(linkHeader)){return callback(new JsonLdError("URL could not be dereferenced, it has more than one "+"associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:url}),doc)}if(linkHeader){doc.contextUrl=linkHeader.target}}callback(null,doc)};req.onerror=function(){callback(new JsonLdError("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:url}),{contextUrl:null,documentUrl:url,document:null})};req.open("GET",url,true);req.setRequestHeader("Accept","application/ld+json, application/json");req.send()}};jsonld.useDocumentLoader=function(type){if(!(type in jsonld.documentLoaders)){throw new JsonLdError('Unknown document loader type: "'+type+'"',"jsonld.UnknownDocumentLoader",{type:type})}jsonld.documentLoader=jsonld.documentLoaders[type].apply(jsonld,Array.prototype.slice.call(arguments,1))};jsonld.processContext=function(activeCtx,localCtx){var options={};var callbackArg=2;if(arguments.length>3){options=arguments[2]||{};callbackArg+=1}var callback=arguments[callbackArg];if(!("base"in options)){options.base=""}if(!("documentLoader"in options)){options.documentLoader=jsonld.loadDocument}if(localCtx===null){return callback(null,_getInitialContext(options))}localCtx=_clone(localCtx);if(!(_isObject(localCtx)&&"@context"in localCtx)){localCtx={"@context":localCtx}}_retrieveContextUrls(localCtx,options,function(err,ctx){if(err){return callback(err)}try{ctx=(new Processor).processContext(activeCtx,ctx,options)}catch(ex){return callback(ex)}callback(null,ctx)})};jsonld.hasProperty=function(subject,property){var rval=false;if(property in subject){var value=subject[property];rval=!_isArray(value)||value.length>0}return rval};jsonld.hasValue=function(subject,property,value){var rval=false;if(jsonld.hasProperty(subject,property)){var val=subject[property];var isList=_isList(val);if(_isArray(val)||isList){if(isList){val=val["@list"]}for(var i=0;i<val.length;++i){if(jsonld.compareValues(value,val[i])){rval=true;break}}}else if(!_isArray(value)){rval=jsonld.compareValues(value,val)}}return rval};jsonld.addValue=function(subject,property,value,options){options=options||{};if(!("propertyIsArray"in options)){options.propertyIsArray=false}if(!("allowDuplicate"in options)){options.allowDuplicate=true}if(_isArray(value)){if(value.length===0&&options.propertyIsArray&&!(property in subject)){subject[property]=[]}for(var i=0;i<value.length;++i){jsonld.addValue(subject,property,value[i],options)}}else if(property in subject){var hasValue=!options.allowDuplicate&&jsonld.hasValue(subject,property,value);if(!_isArray(subject[property])&&(!hasValue||options.propertyIsArray)){subject[property]=[subject[property]]}if(!hasValue){subject[property].push(value)}}else{subject[property]=options.propertyIsArray?[value]:value}};jsonld.getValues=function(subject,property){var rval=subject[property]||[];if(!_isArray(rval)){rval=[rval]}return rval};jsonld.removeProperty=function(subject,property){delete subject[property]};jsonld.removeValue=function(subject,property,value,options){options=options||{};if(!("propertyIsArray"in options)){options.propertyIsArray=false}var values=jsonld.getValues(subject,property).filter(function(e){return!jsonld.compareValues(e,value)});if(values.length===0){jsonld.removeProperty(subject,property)}else if(values.length===1&&!options.propertyIsArray){subject[property]=values[0]}else{subject[property]=values}};jsonld.compareValues=function(v1,v2){if(v1===v2){return true}if(_isValue(v1)&&_isValue(v2)&&v1["@value"]===v2["@value"]&&v1["@type"]===v2["@type"]&&v1["@language"]===v2["@language"]&&v1["@index"]===v2["@index"]){return true}if(_isObject(v1)&&"@id"in v1&&_isObject(v2)&&"@id"in v2){return v1["@id"]===v2["@id"]}return false};jsonld.getContextValue=function(ctx,key,type){var rval=null;if(key===null){return rval}if(type==="@language"&&type in ctx){rval=ctx[type]}if(ctx.mappings[key]){var entry=ctx.mappings[key];if(_isUndefined(type)){rval=entry}else if(type in entry){rval=entry[type]}}return rval};var _rdfParsers={};jsonld.registerRDFParser=function(contentType,parser){_rdfParsers[contentType]=parser};jsonld.unregisterRDFParser=function(contentType){delete _rdfParsers[contentType]};if(_nodejs){if(typeof XMLSerializer==="undefined"){var XMLSerializer=null}if(typeof Node==="undefined"){var Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}}var XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean";var XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double";var XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer";var XSD_STRING="http://www.w3.org/2001/XMLSchema#string";var RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";var RDF_LIST=RDF+"List";var RDF_FIRST=RDF+"first";var RDF_REST=RDF+"rest";var RDF_NIL=RDF+"nil";var RDF_TYPE=RDF+"type";var RDF_PLAIN_LITERAL=RDF+"PlainLiteral";var RDF_XML_LITERAL=RDF+"XMLLiteral";var RDF_OBJECT=RDF+"object";var RDF_LANGSTRING=RDF+"langString";var LINK_HEADER_REL="http://www.w3.org/ns/json-ld#context";var MAX_CONTEXT_URLS=10;var JsonLdError=function(msg,type,details){if(_nodejs){Error.call(this);Error.captureStackTrace(this,this.constructor)}else if(typeof Error!=="undefined"){this.stack=(new Error).stack}this.name=type||"jsonld.Error";this.message=msg||"An unspecified JSON-LD error occurred.";this.details=details||{}};if(_nodejs){__webpack_require__(50).inherits(JsonLdError,Error)}else if(typeof Error!=="undefined"){JsonLdError.prototype=new Error}var Processor=function(){};Processor.prototype.compact=function(activeCtx,activeProperty,element,options){if(_isArray(element)){var rval=[];for(var i=0;i<element.length;++i){var compacted=this.compact(activeCtx,activeProperty,element[i],options);if(compacted!==null){rval.push(compacted)}}if(options.compactArrays&&rval.length===1){var container=jsonld.getContextValue(activeCtx,activeProperty,"@container");if(container===null){rval=rval[0]}}return rval}if(_isObject(element)){if(options.link&&"@id"in element&&element["@id"]in options.link){var linked=options.link[element["@id"]];for(var i=0;i<linked.length;++i){if(linked[i].expanded===element){return linked[i].compacted}}}if(_isValue(element)||_isSubjectReference(element)){var rval=_compactValue(activeCtx,activeProperty,element);if(options.link&&_isSubjectReference(element)){if(!(element["@id"]in options.link)){options.link[element["@id"]]=[]}options.link[element["@id"]].push({expanded:element,compacted:rval})}return rval}var insideReverse=activeProperty==="@reverse";var rval={};if(options.link&&"@id"in element){if(!(element["@id"]in options.link)){options.link[element["@id"]]=[]}options.link[element["@id"]].push({expanded:element,compacted:rval})}var keys=Object.keys(element).sort();for(var ki=0;ki<keys.length;++ki){var expandedProperty=keys[ki];var expandedValue=element[expandedProperty];if(expandedProperty==="@id"||expandedProperty==="@type"){var compactedValue;if(_isString(expandedValue)){compactedValue=_compactIri(activeCtx,expandedValue,null,{vocab:expandedProperty==="@type"})}else{compactedValue=[];for(var vi=0;vi<expandedValue.length;++vi){compactedValue.push(_compactIri(activeCtx,expandedValue[vi],null,{vocab:true}))}}var alias=_compactIri(activeCtx,expandedProperty);var isArray=_isArray(compactedValue)&&expandedValue.length===0;jsonld.addValue(rval,alias,compactedValue,{propertyIsArray:isArray});continue}if(expandedProperty==="@reverse"){var compactedValue=this.compact(activeCtx,"@reverse",expandedValue,options);for(var compactedProperty in compactedValue){if(activeCtx.mappings[compactedProperty]&&activeCtx.mappings[compactedProperty].reverse){var value=compactedValue[compactedProperty];var container=jsonld.getContextValue(activeCtx,compactedProperty,"@container");var useArray=container==="@set"||!options.compactArrays;jsonld.addValue(rval,compactedProperty,value,{propertyIsArray:useArray});delete compactedValue[compactedProperty]}}if(Object.keys(compactedValue).length>0){var alias=_compactIri(activeCtx,expandedProperty);jsonld.addValue(rval,alias,compactedValue)}continue}if(expandedProperty==="@index"){var container=jsonld.getContextValue(activeCtx,activeProperty,"@container");if(container==="@index"){continue}var alias=_compactIri(activeCtx,expandedProperty);jsonld.addValue(rval,alias,expandedValue);continue}if(expandedProperty!=="@graph"&&expandedProperty!=="@list"&&_isKeyword(expandedProperty)){var alias=_compactIri(activeCtx,expandedProperty);jsonld.addValue(rval,alias,expandedValue);continue}if(expandedValue.length===0){var itemActiveProperty=_compactIri(activeCtx,expandedProperty,expandedValue,{vocab:true},insideReverse);jsonld.addValue(rval,itemActiveProperty,expandedValue,{propertyIsArray:true})}for(var vi=0;vi<expandedValue.length;++vi){var expandedItem=expandedValue[vi];var itemActiveProperty=_compactIri(activeCtx,expandedProperty,expandedItem,{vocab:true},insideReverse);var container=jsonld.getContextValue(activeCtx,itemActiveProperty,"@container");var isList=_isList(expandedItem);var list=null;if(isList){list=expandedItem["@list"]}var compactedItem=this.compact(activeCtx,itemActiveProperty,isList?list:expandedItem,options);if(isList){if(!_isArray(compactedItem)){compactedItem=[compactedItem]}if(container!=="@list"){var wrapper={};wrapper[_compactIri(activeCtx,"@list")]=compactedItem;compactedItem=wrapper;if("@index"in expandedItem){compactedItem[_compactIri(activeCtx,"@index")]=expandedItem["@index"]}}else if(itemActiveProperty in rval){throw new JsonLdError('JSON-LD compact error; property has a "@list" @container '+"rule but there is more than a single @list that matches "+"the compacted term in the document. Compaction might mix "+"unwanted items into the list.","jsonld.SyntaxError",{code:"compaction to list of lists"})}}if(container==="@language"||container==="@index"){var mapObject;if(itemActiveProperty in rval){mapObject=rval[itemActiveProperty]}else{rval[itemActiveProperty]=mapObject={}}if(container==="@language"&&_isValue(compactedItem)){compactedItem=compactedItem["@value"]}jsonld.addValue(mapObject,expandedItem[container],compactedItem)}else{var isArray=!options.compactArrays||container==="@set"||container==="@list"||_isArray(compactedItem)&&compactedItem.length===0||expandedProperty==="@list"||expandedProperty==="@graph";jsonld.addValue(rval,itemActiveProperty,compactedItem,{propertyIsArray:isArray})}}}return rval}return element};Processor.prototype.expand=function(activeCtx,activeProperty,element,options,insideList){var self=this;if(element===null||element===undefined){return null}if(!_isArray(element)&&!_isObject(element)){if(!insideList&&(activeProperty===null||_expandIri(activeCtx,activeProperty,{vocab:true})==="@graph")){return null}return _expandValue(activeCtx,activeProperty,element)}if(_isArray(element)){var rval=[];var container=jsonld.getContextValue(activeCtx,activeProperty,"@container");insideList=insideList||container==="@list";for(var i=0;i<element.length;++i){var e=self.expand(activeCtx,activeProperty,element[i],options);if(insideList&&(_isArray(e)||_isList(e))){throw new JsonLdError("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}if(e!==null){if(_isArray(e)){rval=rval.concat(e)}else{rval.push(e)}}}return rval}if("@context"in element){activeCtx=self.processContext(activeCtx,element["@context"],options)}var expandedActiveProperty=_expandIri(activeCtx,activeProperty,{vocab:true});var rval={};var keys=Object.keys(element).sort();for(var ki=0;ki<keys.length;++ki){var key=keys[ki];var value=element[key];var expandedValue;if(key==="@context"){continue}var expandedProperty=_expandIri(activeCtx,key,{vocab:true});if(expandedProperty===null||!(_isAbsoluteIri(expandedProperty)||_isKeyword(expandedProperty))){continue}if(_isKeyword(expandedProperty)){if(expandedActiveProperty==="@reverse"){throw new JsonLdError("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse "+"property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:value})}if(expandedProperty in rval){throw new JsonLdError("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:expandedProperty})}}if(expandedProperty==="@id"&&!_isString(value)){if(!options.isFrame){throw new JsonLdError('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:value})}if(!_isObject(value)){throw new JsonLdError('Invalid JSON-LD syntax; "@id" value must be a string or an '+"object.","jsonld.SyntaxError",{code:"invalid @id value",value:value})}}if(expandedProperty==="@type"){_validateTypeValue(value)}if(expandedProperty==="@graph"&&!(_isObject(value)||_isArray(value))){throw new JsonLdError('Invalid JSON-LD syntax; "@graph" value must not be an '+"object or an array.","jsonld.SyntaxError",{code:"invalid @graph value",value:value})}if(expandedProperty==="@value"&&(_isObject(value)||_isArray(value))){throw new JsonLdError('Invalid JSON-LD syntax; "@value" value must not be an '+"object or an array.","jsonld.SyntaxError",{code:"invalid value object value",value:value})}if(expandedProperty==="@language"){if(value===null){continue}if(!_isString(value)){throw new JsonLdError('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:value})}value=value.toLowerCase()}if(expandedProperty==="@index"){if(!_isString(value)){throw new JsonLdError('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:value})}}if(expandedProperty==="@reverse"){if(!_isObject(value)){throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:value})}expandedValue=self.expand(activeCtx,"@reverse",value,options);if("@reverse"in expandedValue){for(var property in expandedValue["@reverse"]){jsonld.addValue(rval,property,expandedValue["@reverse"][property],{propertyIsArray:true})}}var reverseMap=rval["@reverse"]||null;for(var property in expandedValue){if(property==="@reverse"){continue}if(reverseMap===null){reverseMap=rval["@reverse"]={}}jsonld.addValue(reverseMap,property,[],{propertyIsArray:true});var items=expandedValue[property];for(var ii=0;ii<items.length;++ii){var item=items[ii];if(_isValue(item)||_isList(item)){throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a '+"@value or an @list.","jsonld.SyntaxError",{code:"invalid reverse property value",value:expandedValue})}jsonld.addValue(reverseMap,property,item,{propertyIsArray:true})}}continue}var container=jsonld.getContextValue(activeCtx,key,"@container");if(container==="@language"&&_isObject(value)){expandedValue=_expandLanguageMap(value)}else if(container==="@index"&&_isObject(value)){expandedValue=function _expandIndexMap(activeProperty){var rval=[];var keys=Object.keys(value).sort();for(var ki=0;ki<keys.length;++ki){var key=keys[ki];var val=value[key];if(!_isArray(val)){val=[val]}val=self.expand(activeCtx,activeProperty,val,options,false);for(var vi=0;vi<val.length;++vi){var item=val[vi];if(!("@index"in item)){item["@index"]=key}rval.push(item)}}return rval}(key)}else{var isList=expandedProperty==="@list";if(isList||expandedProperty==="@set"){var nextActiveProperty=activeProperty;if(isList&&expandedActiveProperty==="@graph"){nextActiveProperty=null}expandedValue=self.expand(activeCtx,nextActiveProperty,value,options,isList);if(isList&&_isList(expandedValue)){throw new JsonLdError("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}}else{expandedValue=self.expand(activeCtx,key,value,options,false)}}if(expandedValue===null&&expandedProperty!=="@value"){continue}if(expandedProperty!=="@list"&&!_isList(expandedValue)&&container==="@list"){expandedValue=_isArray(expandedValue)?expandedValue:[expandedValue];expandedValue={"@list":expandedValue}}if(activeCtx.mappings[key]&&activeCtx.mappings[key].reverse){var reverseMap=rval["@reverse"]=rval["@reverse"]||{};if(!_isArray(expandedValue)){expandedValue=[expandedValue]}for(var ii=0;ii<expandedValue.length;++ii){var item=expandedValue[ii];if(_isValue(item)||_isList(item)){throw new JsonLdError('Invalid JSON-LD syntax; "@reverse" value must not be a '+"@value or an @list.","jsonld.SyntaxError",{code:"invalid reverse property value",value:expandedValue})}jsonld.addValue(reverseMap,expandedProperty,item,{propertyIsArray:true})}continue}var useArray=["@index","@id","@type","@value","@language"].indexOf(expandedProperty)===-1;jsonld.addValue(rval,expandedProperty,expandedValue,{propertyIsArray:useArray})}keys=Object.keys(rval);var count=keys.length;if("@value"in rval){if("@type"in rval&&"@language"in rval){throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may not '+'contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:rval})}var validCount=count-1;if("@type"in rval){validCount-=1}if("@index"in rval){validCount-=1}if("@language"in rval){validCount-=1}if(validCount!==0){throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" may only '+'have an "@index" property and at most one other property '+'which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:rval})}if(rval["@value"]===null){rval=null}else if("@language"in rval&&!_isString(rval["@value"])){throw new JsonLdError("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:rval})}else if("@type"in rval&&(!_isAbsoluteIri(rval["@type"])||rval["@type"].indexOf("_:")===0)){throw new JsonLdError('Invalid JSON-LD syntax; an element containing "@value" and "@type" '+'must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:rval})}}else if("@type"in rval&&!_isArray(rval["@type"])){rval["@type"]=[rval["@type"]]}else if("@set"in rval||"@list"in rval){if(count>1&&!(count===2&&"@index"in rval)){throw new JsonLdError('Invalid JSON-LD syntax; if an element has the property "@set" '+'or "@list", then it can have at most one other property that is '+'"@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:rval})}if("@set"in rval){rval=rval["@set"];keys=Object.keys(rval);count=keys.length}}else if(count===1&&"@language"in rval){rval=null}if(_isObject(rval)&&!options.keepFreeFloatingNodes&&!insideList&&(activeProperty===null||expandedActiveProperty==="@graph")){if(count===0||"@value"in rval||"@list"in rval||count===1&&"@id"in rval){rval=null}}return rval};Processor.prototype.createNodeMap=function(input,options){options=options||{};var issuer=options.namer||options.issuer||new IdentifierIssuer("_:b");var graphs={"@default":{}};_createNodeMap(input,graphs,"@default",issuer);return _mergeNodeMaps(graphs)};Processor.prototype.flatten=function(input){var defaultGraph=this.createNodeMap(input);var flattened=[];var keys=Object.keys(defaultGraph).sort();for(var ki=0;ki<keys.length;++ki){var node=defaultGraph[keys[ki]];if(!_isSubjectReference(node)){flattened.push(node)}}return flattened};Processor.prototype.frame=function(input,frame,options){var state={options:options,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}};var issuer=new IdentifierIssuer("_:b");_createNodeMap(input,state.graphs,"@merged",issuer);state.subjects=state.graphs["@merged"];var framed=[];_frame(state,Object.keys(state.subjects).sort(),frame,framed,null);return framed};Processor.prototype.normalize=function(dataset,options,callback){if(options.algorithm==="URDNA2015"){return new URDNA2015(options).main(dataset,callback)}if(options.algorithm==="URGNA2012"){return new URGNA2012(options).main(dataset,callback)}callback(new Error("Invalid RDF Dataset Normalization algorithm: "+options.algorithm))};Processor.prototype.fromRDF=function(dataset,options,callback){var defaultGraph={};var graphMap={"@default":defaultGraph};var referencedOnce={};for(var name in dataset){var graph=dataset[name];if(!(name in graphMap)){graphMap[name]={}}if(name!=="@default"&&!(name in defaultGraph)){defaultGraph[name]={"@id":name}}var nodeMap=graphMap[name];for(var ti=0;ti<graph.length;++ti){var triple=graph[ti];var s=triple.subject.value;var p=triple.predicate.value;var o=triple.object;if(!(s in nodeMap)){nodeMap[s]={"@id":s}}var node=nodeMap[s];var objectIsId=o.type==="IRI"||o.type==="blank node";if(objectIsId&&!(o.value in nodeMap)){nodeMap[o.value]={"@id":o.value}}if(p===RDF_TYPE&&!options.useRdfType&&objectIsId){jsonld.addValue(node,"@type",o.value,{propertyIsArray:true});continue}var value=_RDFToObject(o,options.useNativeTypes);jsonld.addValue(node,p,value,{propertyIsArray:true});if(objectIsId){if(o.value===RDF_NIL){var object=nodeMap[o.value];if(!("usages"in object)){object.usages=[]}object.usages.push({node:node,property:p,value:value})}else if(o.value in referencedOnce){referencedOnce[o.value]=false}else{referencedOnce[o.value]={node:node,property:p,value:value}}}}}for(var name in graphMap){var graphObject=graphMap[name];if(!(RDF_NIL in graphObject)){continue}var nil=graphObject[RDF_NIL];for(var i=0;i<nil.usages.length;++i){var usage=nil.usages[i];var node=usage.node;var property=usage.property;var head=usage.value;var list=[];var listNodes=[];var nodeKeyCount=Object.keys(node).length;while(property===RDF_REST&&_isObject(referencedOnce[node["@id"]])&&_isArray(node[RDF_FIRST])&&node[RDF_FIRST].length===1&&_isArray(node[RDF_REST])&&node[RDF_REST].length===1&&(nodeKeyCount===3||nodeKeyCount===4&&_isArray(node["@type"])&&node["@type"].length===1&&node["@type"][0]===RDF_LIST)){list.push(node[RDF_FIRST][0]);listNodes.push(node["@id"]);usage=referencedOnce[node["@id"]];node=usage.node;property=usage.property;head=usage.value;nodeKeyCount=Object.keys(node).length;if(node["@id"].indexOf("_:")!==0){break}}if(property===RDF_FIRST){if(node["@id"]===RDF_NIL){continue}head=graphObject[head["@id"]][RDF_REST][0];list.pop();listNodes.pop()}delete head["@id"];head["@list"]=list.reverse();for(var j=0;j<listNodes.length;++j){delete graphObject[listNodes[j]]}}delete nil.usages}var result=[];var subjects=Object.keys(defaultGraph).sort();for(var i=0;i<subjects.length;++i){var subject=subjects[i];var node=defaultGraph[subject];if(subject in graphMap){var graph=node["@graph"]=[];var graphObject=graphMap[subject];var subjects_=Object.keys(graphObject).sort();for(var si=0;si<subjects_.length;++si){var node_=graphObject[subjects_[si]];if(!_isSubjectReference(node_)){graph.push(node_)}}}if(!_isSubjectReference(node)){result.push(node)}}callback(null,result)};Processor.prototype.toRDF=function(input,options){var issuer=new IdentifierIssuer("_:b");var nodeMap={"@default":{}};_createNodeMap(input,nodeMap,"@default",issuer);var dataset={};var graphNames=Object.keys(nodeMap).sort();for(var i=0;i<graphNames.length;++i){var graphName=graphNames[i];if(graphName==="@default"||_isAbsoluteIri(graphName)){dataset[graphName]=_graphToRDF(nodeMap[graphName],issuer,options)}}return dataset};Processor.prototype.processContext=function(activeCtx,localCtx,options){if(_isObject(localCtx)&&"@context"in localCtx&&_isArray(localCtx["@context"])){localCtx=localCtx["@context"]}var ctxs=_isArray(localCtx)?localCtx:[localCtx];if(ctxs.length===0){return activeCtx.clone()}var rval=activeCtx;for(var i=0;i<ctxs.length;++i){var ctx=ctxs[i];if(ctx===null){rval=activeCtx=_getInitialContext(options);continue}if(_isObject(ctx)&&"@context"in ctx){ctx=ctx["@context"]}if(!_isObject(ctx)){throw new JsonLdError("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ctx})}if(jsonld.cache.activeCtx){var cached=jsonld.cache.activeCtx.get(activeCtx,ctx);if(cached){rval=activeCtx=cached;continue}}activeCtx=rval;rval=rval.clone();var defined={};if("@base"in ctx){var base=ctx["@base"];if(base===null){base=null}else if(!_isString(base)){throw new JsonLdError('Invalid JSON-LD syntax; the value of "@base" in a '+"@context must be a string or null.","jsonld.SyntaxError",{code:"invalid base IRI",context:ctx})}else if(base!==""&&!_isAbsoluteIri(base)){throw new JsonLdError('Invalid JSON-LD syntax; the value of "@base" in a '+"@context must be an absolute IRI or the empty string.","jsonld.SyntaxError",{code:"invalid base IRI",context:ctx})}if(base!==null){base=jsonld.url.parse(base||"")}rval["@base"]=base;defined["@base"]=true}if("@vocab"in ctx){var value=ctx["@vocab"];if(value===null){delete rval["@vocab"]}else if(!_isString(value)){throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a '+"@context must be a string or null.","jsonld.SyntaxError",{code:"invalid vocab mapping",context:ctx})}else if(!_isAbsoluteIri(value)){throw new JsonLdError('Invalid JSON-LD syntax; the value of "@vocab" in a '+"@context must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid vocab mapping",context:ctx})}else{rval["@vocab"]=value}defined["@vocab"]=true}if("@language"in ctx){var value=ctx["@language"];if(value===null){delete rval["@language"]}else if(!_isString(value)){throw new JsonLdError('Invalid JSON-LD syntax; the value of "@language" in a '+"@context must be a string or null.","jsonld.SyntaxError",{code:"invalid default language",context:ctx})}else{rval["@language"]=value.toLowerCase()}defined["@language"]=true}for(var key in ctx){_createTermDefinition(rval,ctx,key,defined)}if(jsonld.cache.activeCtx){jsonld.cache.activeCtx.set(activeCtx,ctx,rval)}}return rval};function _expandLanguageMap(languageMap){var rval=[];var keys=Object.keys(languageMap).sort();for(var ki=0;ki<keys.length;++ki){var key=keys[ki];var val=languageMap[key];if(!_isArray(val)){val=[val]}for(var vi=0;vi<val.length;++vi){var item=val[vi];if(item===null){continue}if(!_isString(item)){throw new JsonLdError("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:languageMap})}rval.push({"@value":item,"@language":key.toLowerCase()})}}return rval}function _labelBlankNodes(issuer,element){if(_isArray(element)){for(var i=0;i<element.length;++i){element[i]=_labelBlankNodes(issuer,element[i])}}else if(_isList(element)){element["@list"]=_labelBlankNodes(issuer,element["@list"])}else if(_isObject(element)){if(_isBlankNode(element)){element["@id"]=issuer.getId(element["@id"])}var keys=Object.keys(element).sort();for(var ki=0;ki<keys.length;++ki){var key=keys[ki];if(key!=="@id"){element[key]=_labelBlankNodes(issuer,element[key])}}}return element}function _expandValue(activeCtx,activeProperty,value){if(value===null||value===undefined){return null}var expandedProperty=_expandIri(activeCtx,activeProperty,{vocab:true});if(expandedProperty==="@id"){return _expandIri(activeCtx,value,{base:true})}else if(expandedProperty==="@type"){return _expandIri(activeCtx,value,{vocab:true,base:true})}var type=jsonld.getContextValue(activeCtx,activeProperty,"@type");if(type==="@id"||expandedProperty==="@graph"&&_isString(value)){return{"@id":_expandIri(activeCtx,value,{base:true})}}if(type==="@vocab"){return{"@id":_expandIri(activeCtx,value,{vocab:true,base:true})}}if(_isKeyword(expandedProperty)){return value}var rval={};if(type!==null){rval["@type"]=type}else if(_isString(value)){var language=jsonld.getContextValue(activeCtx,activeProperty,"@language");if(language!==null){rval["@language"]=language}}if(["boolean","number","string"].indexOf(typeof value)===-1){value=value.toString()}rval["@value"]=value;return rval}function _graphToRDF(graph,issuer,options){var rval=[];var ids=Object.keys(graph).sort();for(var i=0;i<ids.length;++i){var id=ids[i];var node=graph[id];var properties=Object.keys(node).sort();for(var pi=0;pi<properties.length;++pi){var property=properties[pi];var items=node[property];if(property==="@type"){property=RDF_TYPE}else if(_isKeyword(property)){continue}for(var ii=0;ii<items.length;++ii){var item=items[ii];var subject={};subject.type=id.indexOf("_:")===0?"blank node":"IRI";subject.value=id;if(!_isAbsoluteIri(id)){continue}var predicate={};predicate.type=property.indexOf("_:")===0?"blank node":"IRI";predicate.value=property;if(!_isAbsoluteIri(property)){continue}if(predicate.type==="blank node"&&!options.produceGeneralizedRdf){continue}if(_isList(item)){_listToRDF(item["@list"],issuer,subject,predicate,rval)}else{var object=_objectToRDF(item);if(object){rval.push({subject:subject,predicate:predicate,object:object})}}}}}return rval}function _listToRDF(list,issuer,subject,predicate,triples){var first={type:"IRI",value:RDF_FIRST};var rest={type:"IRI",value:RDF_REST};var nil={type:"IRI",value:RDF_NIL};for(var i=0;i<list.length;++i){var item=list[i];var blankNode={type:"blank node",value:issuer.getId()};triples.push({subject:subject,predicate:predicate,object:blankNode});subject=blankNode;predicate=first;var object=_objectToRDF(item);if(object){triples.push({subject:subject,predicate:predicate,object:object})}predicate=rest}triples.push({subject:subject,predicate:predicate,object:nil})}function _objectToRDF(item){var object={};if(_isValue(item)){object.type="literal";var value=item["@value"];var datatype=item["@type"]||null;if(_isBoolean(value)){object.value=value.toString();object.datatype=datatype||XSD_BOOLEAN}else if(_isDouble(value)||datatype===XSD_DOUBLE){if(!_isDouble(value)){value=parseFloat(value)}object.value=value.toExponential(15).replace(/(\d)0*e\+?/,"$1E");object.datatype=datatype||XSD_DOUBLE}else if(_isNumber(value)){object.value=value.toFixed(0);object.datatype=datatype||XSD_INTEGER}else if("@language"in item){object.value=value;object.datatype=datatype||RDF_LANGSTRING;object.language=item["@language"]}else{object.value=value;object.datatype=datatype||XSD_STRING}}else{var id=_isObject(item)?item["@id"]:item;object.type=id.indexOf("_:")===0?"blank node":"IRI";object.value=id}if(object.type==="IRI"&&!_isAbsoluteIri(object.value)){return null}return object}function _RDFToObject(o,useNativeTypes){if(o.type==="IRI"||o.type==="blank node"){return{"@id":o.value}}var rval={"@value":o.value};if(o.language){rval["@language"]=o.language}else{var type=o.datatype;if(!type){type=XSD_STRING}if(useNativeTypes){if(type===XSD_BOOLEAN){if(rval["@value"]==="true"){rval["@value"]=true}else if(rval["@value"]==="false"){rval["@value"]=false}}else if(_isNumeric(rval["@value"])){if(type===XSD_INTEGER){var i=parseInt(rval["@value"],10);if(i.toFixed(0)===rval["@value"]){rval["@value"]=i}}else if(type===XSD_DOUBLE){rval["@value"]=parseFloat(rval["@value"])}}if([XSD_BOOLEAN,XSD_INTEGER,XSD_DOUBLE,XSD_STRING].indexOf(type)===-1){rval["@type"]=type}}else if(type!==XSD_STRING){rval["@type"]=type}}return rval}function _compareRDFTriples(t1,t2){var attrs=["subject","predicate","object"];for(var i=0;i<attrs.length;++i){var attr=attrs[i];if(t1[attr].type!==t2[attr].type||t1[attr].value!==t2[attr].value){return false}}if(t1.object.language!==t2.object.language){return false}if(t1.object.datatype!==t2.object.datatype){return false}return true}var URDNA2015=function(){var POSITIONS={subject:"s",object:"o",name:"g"};var Normalize=function(options){options=options||{};this.name="URDNA2015";this.options=options;this.blankNodeInfo={};this.hashToBlankNodes={};this.canonicalIssuer=new IdentifierIssuer("_:c14n");this.quads=[];this.schedule={};if("maxCallStackDepth"in options){this.schedule.MAX_DEPTH=options.maxCallStackDepth}else{this.schedule.MAX_DEPTH=500}if("maxTotalCallStackDepth"in options){this.schedule.MAX_TOTAL_DEPTH=options.maxCallStackDepth}else{this.schedule.MAX_TOTAL_DEPTH=4294967295}this.schedule.depth=0;this.schedule.totalDepth=0;if("timeSlice"in options){this.schedule.timeSlice=options.timeSlice}else{this.schedule.timeSlice=10}};Normalize.prototype.doWork=function(fn,callback){var schedule=this.schedule;if(schedule.totalDepth>=schedule.MAX_TOTAL_DEPTH){return callback(new Error("Maximum total call stack depth exceeded; normalization aborting."))}(function work(){if(schedule.depth===schedule.MAX_DEPTH){schedule.depth=0;schedule.running=false;return jsonld.nextTick(work)}var now=(new Date).getTime();if(!schedule.running){schedule.start=(new Date).getTime();schedule.deadline=schedule.start+schedule.timeSlice}if(now<schedule.deadline){schedule.running=true;schedule.depth++;schedule.totalDepth++;return fn(function(err,result){schedule.depth--;schedule.totalDepth--;callback(err,result)})}schedule.depth=0;schedule.running=false;jsonld.setImmediate(work)})()};Normalize.prototype.forEach=function(iterable,fn,callback){var self=this;var iterator;var idx=0;var length;if(_isArray(iterable)){length=iterable.length;iterator=function(){if(idx===length){return false}iterator.value=iterable[idx++];iterator.key=idx;return true}}else{var keys=Object.keys(iterable);length=keys.length;iterator=function(){if(idx===length){return false}iterator.key=keys[idx++];iterator.value=iterable[iterator.key];return true}}(function iterate(err,result){if(err){return callback(err)}if(iterator()){return self.doWork(function(){fn(iterator.value,iterator.key,iterate)})}callback()})()};Normalize.prototype.waterfall=function(fns,callback){var self=this;self.forEach(fns,function(fn,idx,callback){self.doWork(fn,callback)},callback)};Normalize.prototype.whilst=function(condition,fn,callback){var self=this;(function loop(err){if(err){return callback(err)}if(!condition()){return callback()}self.doWork(fn,loop)})()};Normalize.prototype.main=function(dataset,callback){var self=this;self.schedule.start=(new Date).getTime();var result;if(self.options.format){if(self.options.format!=="application/nquads"){return callback(new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:self.options.format}))}}var nonNormalized={};self.waterfall([function(callback){self.forEach(dataset,function(triples,graphName,callback){if(graphName==="@default"){graphName=null}self.forEach(triples,function(quad,idx,callback){if(graphName!==null){if(graphName.indexOf("_:")===0){quad.name={type:"blank node",value:graphName}}else{quad.name={type:"IRI",value:graphName}}}self.quads.push(quad);self.forEachComponent(quad,function(component){if(component.type!=="blank node"){return}var id=component.value;if(id in self.blankNodeInfo){self.blankNodeInfo[id].quads.push(quad)}else{nonNormalized[id]=true;self.blankNodeInfo[id]={quads:[quad]}}});callback()},callback)},callback)},function(callback){var simple=true;self.whilst(function(){return simple},function(callback){simple=false;self.hashToBlankNodes={};self.waterfall([function(callback){self.forEach(nonNormalized,function(value,id,callback){self.hashFirstDegreeQuads(id,function(err,hash){if(err){return callback(err)}if(hash in self.hashToBlankNodes){self.hashToBlankNodes[hash].push(id)}else{self.hashToBlankNodes[hash]=[id]}callback()})},callback)},function(callback){var hashes=Object.keys(self.hashToBlankNodes).sort();self.forEach(hashes,function(hash,i,callback){var idList=self.hashToBlankNodes[hash];if(idList.length>1){return callback()}var id=idList[0];self.canonicalIssuer.getId(id);delete nonNormalized[id];delete self.hashToBlankNodes[hash];simple=true;callback()},callback)}],callback)},callback)},function(callback){var hashes=Object.keys(self.hashToBlankNodes).sort();self.forEach(hashes,function(hash,idx,callback){var hashPathList=[];var idList=self.hashToBlankNodes[hash];self.waterfall([function(callback){self.forEach(idList,function(id,idx,callback){if(self.canonicalIssuer.hasId(id)){return callback()}var issuer=new IdentifierIssuer("_:b");issuer.getId(id);self.hashNDegreeQuads(id,issuer,function(err,result){if(err){return callback(err)}hashPathList.push(result);callback()})},callback)},function(callback){hashPathList.sort(function(a,b){return a.hash<b.hash?-1:a.hash>b.hash?1:0});self.forEach(hashPathList,function(result,idx,callback){for(var existing in result.issuer.existing){self.canonicalIssuer.getId(existing)}callback()},callback)}],callback)},callback)},function(callback){var normalized=[];self.waterfall([function(callback){self.forEach(self.quads,function(quad,idx,callback){self.forEachComponent(quad,function(component){if(component.type==="blank node"&&component.value.indexOf(self.canonicalIssuer.prefix)!==0){component.value=self.canonicalIssuer.getId(component.value)}});normalized.push(_toNQuad(quad));callback()},callback)},function(callback){normalized.sort();if(self.options.format==="application/nquads"){result=normalized.join("");return callback()}result=_parseNQuads(normalized.join(""));callback()}],callback)}],function(err){callback(err,result)})};Normalize.prototype.hashFirstDegreeQuads=function(id,callback){var self=this;var info=self.blankNodeInfo[id];if("hash"in info){return callback(null,info.hash)}var nquads=[];var quads=info.quads;self.forEach(quads,function(quad,idx,callback){var copy={predicate:quad.predicate};self.forEachComponent(quad,function(component,key){copy[key]=self.modifyFirstDegreeComponent(id,component,key)});nquads.push(_toNQuad(copy));callback()},function(err){if(err){return callback(err)}nquads.sort();info.hash=NormalizeHash.hashNQuads(self.name,nquads);callback(null,info.hash)})};Normalize.prototype.modifyFirstDegreeComponent=function(id,component){if(component.type!=="blank node"){return component}component=_clone(component);component.value=component.value===id?"_:a":"_:z";return component};Normalize.prototype.hashRelatedBlankNode=function(related,quad,issuer,position,callback){var self=this;var id;self.waterfall([function(callback){if(self.canonicalIssuer.hasId(related)){id=self.canonicalIssuer.getId(related);return callback()}if(issuer.hasId(related)){id=issuer.getId(related);return callback()}self.hashFirstDegreeQuads(related,function(err,hash){if(err){return callback(err)}id=hash;callback()})}],function(err){if(err){return callback(err)}var md=new NormalizeHash(self.name);md.update(position);if(position!=="g"){md.update(self.getRelatedPredicate(quad))}md.update(id);return callback(null,md.digest())})};Normalize.prototype.getRelatedPredicate=function(quad){return"<"+quad.predicate.value+">"};Normalize.prototype.hashNDegreeQuads=function(id,issuer,callback){var self=this;var hashToRelated;var md=new NormalizeHash(self.name);self.waterfall([function(callback){self.createHashToRelated(id,issuer,function(err,result){if(err){return callback(err)}hashToRelated=result;callback()})},function(callback){var hashes=Object.keys(hashToRelated).sort();self.forEach(hashes,function(hash,idx,callback){md.update(hash);var chosenPath="";var chosenIssuer;var permutator=new Permutator(hashToRelated[hash]);self.whilst(function(){return permutator.hasNext()},function(nextPermutation){var permutation=permutator.next();var issuerCopy=issuer.clone();var path="";var recursionList=[];self.waterfall([function(callback){self.forEach(permutation,function(related,idx,callback){if(self.canonicalIssuer.hasId(related)){path+=self.canonicalIssuer.getId(related)}else{if(!issuerCopy.hasId(related)){recursionList.push(related)}path+=issuerCopy.getId(related)}if(chosenPath.length!==0&&path.length>=chosenPath.length&&path>chosenPath){return nextPermutation()}callback()},callback)},function(callback){self.forEach(recursionList,function(related,idx,callback){self.hashNDegreeQuads(related,issuerCopy,function(err,result){if(err){return callback(err)}path+=issuerCopy.getId(related);path+="<"+result.hash+">";issuerCopy=result.issuer;if(chosenPath.length!==0&&path.length>=chosenPath.length&&path>chosenPath){return nextPermutation()}callback()})},callback)},function(callback){if(chosenPath.length===0||path<chosenPath){chosenPath=path;chosenIssuer=issuerCopy}callback()}],nextPermutation)},function(err){if(err){return callback(err)}md.update(chosenPath);issuer=chosenIssuer;callback()})},callback)}],function(err){callback(err,{hash:md.digest(),issuer:issuer})})};Normalize.prototype.createHashToRelated=function(id,issuer,callback){var self=this;var hashToRelated={};var quads=self.blankNodeInfo[id].quads;self.forEach(quads,function(quad,idx,callback){self.forEach(quad,function(component,key,callback){if(key==="predicate"||!(component.type==="blank node"&&component.value!==id)){return callback()}var related=component.value;var position=POSITIONS[key];self.hashRelatedBlankNode(related,quad,issuer,position,function(err,hash){if(err){return callback(err)}if(hash in hashToRelated){hashToRelated[hash].push(related)}else{hashToRelated[hash]=[related]}callback()})},callback)},function(err){callback(err,hashToRelated)})};Normalize.prototype.forEachComponent=function(quad,op){for(var key in quad){if(key==="predicate"){continue}op(quad[key],key,quad)}};return Normalize}();var URGNA2012=function(){var Normalize=function(options){URDNA2015.call(this,options);this.name="URGNA2012"};Normalize.prototype=new URDNA2015;Normalize.prototype.modifyFirstDegreeComponent=function(id,component,key){if(component.type!=="blank node"){return component}component=_clone(component);if(key==="name"){component.value="_:g"}else{component.value=component.value===id?"_:a":"_:z"}return component};Normalize.prototype.getRelatedPredicate=function(quad){return quad.predicate.value};Normalize.prototype.createHashToRelated=function(id,issuer,callback){var self=this;var hashToRelated={};var quads=self.blankNodeInfo[id].quads;self.forEach(quads,function(quad,idx,callback){var position;var related;if(quad.subject.type==="blank node"&&quad.subject.value!==id){related=quad.subject.value;position="p"}else if(quad.object.type==="blank node"&&quad.object.value!==id){related=quad.object.value;position="r"}else{return callback()}self.hashRelatedBlankNode(related,quad,issuer,position,function(err,hash){if(hash in hashToRelated){hashToRelated[hash].push(related)}else{hashToRelated[hash]=[related]}callback()})},function(err){callback(err,hashToRelated)})};return Normalize}();function _createNodeMap(input,graphs,graph,issuer,name,list){if(_isArray(input)){for(var i=0;i<input.length;++i){_createNodeMap(input[i],graphs,graph,issuer,undefined,list)}return}if(!_isObject(input)){if(list){list.push(input)}return}if(_isValue(input)){if("@type"in input){var type=input["@type"];if(type.indexOf("_:")===0){input["@type"]=type=issuer.getId(type)}}if(list){list.push(input)}return}if("@type"in input){var types=input["@type"];for(var i=0;i<types.length;++i){var type=types[i];if(type.indexOf("_:")===0){issuer.getId(type)}}}if(_isUndefined(name)){name=_isBlankNode(input)?issuer.getId(input["@id"]):input["@id"]}if(list){list.push({"@id":name})}var subjects=graphs[graph];var subject=subjects[name]=subjects[name]||{};subject["@id"]=name;var properties=Object.keys(input).sort();for(var pi=0;pi<properties.length;++pi){var property=properties[pi];if(property==="@id"){continue}if(property==="@reverse"){var referencedNode={"@id":name};var reverseMap=input["@reverse"];for(var reverseProperty in reverseMap){var items=reverseMap[reverseProperty];for(var ii=0;ii<items.length;++ii){var item=items[ii];var itemName=item["@id"];if(_isBlankNode(item)){itemName=issuer.getId(itemName)}_createNodeMap(item,graphs,graph,issuer,itemName);jsonld.addValue(subjects[itemName],reverseProperty,referencedNode,{propertyIsArray:true,allowDuplicate:false})}}continue}if(property==="@graph"){if(!(name in graphs)){graphs[name]={}}var g=graph==="@merged"?graph:name;_createNodeMap(input[property],graphs,g,issuer);continue}if(property!=="@type"&&_isKeyword(property)){if(property==="@index"&&property in subject&&(input[property]!==subject[property]||input[property]["@id"]!==subject[property]["@id"])){throw new JsonLdError("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:subject})}subject[property]=input[property];continue}var objects=input[property];if(property.indexOf("_:")===0){property=issuer.getId(property)}if(objects.length===0){jsonld.addValue(subject,property,[],{propertyIsArray:true});continue}for(var oi=0;oi<objects.length;++oi){var o=objects[oi];if(property==="@type"){o=o.indexOf("_:")===0?issuer.getId(o):o}if(_isSubject(o)||_isSubjectReference(o)){var id=_isBlankNode(o)?issuer.getId(o["@id"]):o["@id"];jsonld.addValue(subject,property,{"@id":id},{propertyIsArray:true,allowDuplicate:false});_createNodeMap(o,graphs,graph,issuer,id)}else if(_isList(o)){var _list=[];_createNodeMap(o["@list"],graphs,graph,issuer,name,_list);o={"@list":_list};jsonld.addValue(subject,property,o,{propertyIsArray:true,allowDuplicate:false})}else{_createNodeMap(o,graphs,graph,issuer,name);jsonld.addValue(subject,property,o,{propertyIsArray:true,allowDuplicate:false})}}}}function _mergeNodeMaps(graphs){var defaultGraph=graphs["@default"];var graphNames=Object.keys(graphs).sort();for(var i=0;i<graphNames.length;++i){var graphName=graphNames[i];if(graphName==="@default"){continue}var nodeMap=graphs[graphName];var subject=defaultGraph[graphName];if(!subject){defaultGraph[graphName]=subject={"@id":graphName,"@graph":[]}}else if(!("@graph"in subject)){subject["@graph"]=[]}var graph=subject["@graph"];var ids=Object.keys(nodeMap).sort();for(var ii=0;ii<ids.length;++ii){var node=nodeMap[ids[ii]];if(!_isSubjectReference(node)){graph.push(node)}}}return defaultGraph}function _frame(state,subjects,frame,parent,property){_validateFrame(frame);frame=frame[0];var options=state.options;var flags={embed:_getFrameFlag(frame,options,"embed"),explicit:_getFrameFlag(frame,options,"explicit"),requireAll:_getFrameFlag(frame,options,"requireAll")};var matches=_filterSubjects(state,subjects,frame,flags);var ids=Object.keys(matches).sort();for(var idx=0;idx<ids.length;++idx){var id=ids[idx];var subject=matches[id];if(flags.embed==="@link"&&id in state.link){_addFrameOutput(parent,property,state.link[id]);continue}if(property===null){state.uniqueEmbeds={}}var output={};output["@id"]=id;state.link[id]=output;if(flags.embed==="@never"||_createsCircularReference(subject,state.subjectStack)){_addFrameOutput(parent,property,output);continue}if(flags.embed==="@last"){if(id in state.uniqueEmbeds){_removeEmbed(state,id)}state.uniqueEmbeds[id]={parent:parent,property:property}}state.subjectStack.push(subject);var props=Object.keys(subject).sort();for(var i=0;i<props.length;i++){var prop=props[i];if(_isKeyword(prop)){output[prop]=_clone(subject[prop]);continue}if(flags.explicit&&!(prop in frame)){continue}var objects=subject[prop];for(var oi=0;oi<objects.length;++oi){var o=objects[oi];if(_isList(o)){var list={"@list":[]};_addFrameOutput(output,prop,list);var src=o["@list"];for(var n in src){o=src[n];if(_isSubjectReference(o)){var subframe=prop in frame?frame[prop][0]["@list"]:_createImplicitFrame(flags);_frame(state,[o["@id"]],subframe,list,"@list")}else{_addFrameOutput(list,"@list",_clone(o))}}continue}if(_isSubjectReference(o)){var subframe=prop in frame?frame[prop]:_createImplicitFrame(flags);_frame(state,[o["@id"]],subframe,output,prop)}else{_addFrameOutput(output,prop,_clone(o))}}}var props=Object.keys(frame).sort();for(var i=0;i<props.length;++i){var prop=props[i];if(_isKeyword(prop)){continue}var next=frame[prop][0];var omitDefaultOn=_getFrameFlag(next,options,"omitDefault");if(!omitDefaultOn&&!(prop in output)){var preserve="@null";if("@default"in next){preserve=_clone(next["@default"])}if(!_isArray(preserve)){preserve=[preserve]}output[prop]=[{"@preserve":preserve}]}}_addFrameOutput(parent,property,output);state.subjectStack.pop()}}function _createImplicitFrame(flags){var frame={};for(var key in flags){if(flags[key]!==undefined){frame["@"+key]=[flags[key]]}}return[frame]}function _createsCircularReference(subjectToEmbed,subjectStack){for(var i=subjectStack.length-1;i>=0;--i){if(subjectStack[i]["@id"]===subjectToEmbed["@id"]){return true}}return false}function _getFrameFlag(frame,options,name){var flag="@"+name;var rval=flag in frame?frame[flag][0]:options[name];if(name==="embed"){if(rval===true){rval="@last"}else if(rval===false){rval="@never"}else if(rval!=="@always"&&rval!=="@never"&&rval!=="@link"){rval="@last"}}return rval}function _validateFrame(frame){if(!_isArray(frame)||frame.length!==1||!_isObject(frame[0])){throw new JsonLdError("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:frame})}}function _filterSubjects(state,subjects,frame,flags){var rval={};for(var i=0;i<subjects.length;++i){var id=subjects[i];var subject=state.subjects[id];if(_filterSubject(subject,frame,flags)){rval[id]=subject}}return rval}function _filterSubject(subject,frame,flags){if("@type"in frame&&!(frame["@type"].length===1&&_isObject(frame["@type"][0]))){var types=frame["@type"];for(var i=0;i<types.length;++i){if(jsonld.hasValue(subject,"@type",types[i])){return true}}return false}var wildcard=true;var matchesSome=false;for(var key in frame){if(_isKeyword(key)){if(key!=="@id"&&key!=="@type"){continue}wildcard=false;if(key==="@id"&&_isString(frame[key])){if(subject[key]!==frame[key]){return false}matchesSome=true;continue}}wildcard=false;if(key in subject){if(_isArray(frame[key])&&frame[key].length===0&&subject[key]!==undefined){return false}matchesSome=true;continue}var hasDefault=_isArray(frame[key])&&_isObject(frame[key][0])&&"@default"in frame[key][0];if(flags.requireAll&&!hasDefault){return false}}return wildcard||matchesSome}function _removeEmbed(state,id){var embeds=state.uniqueEmbeds;var embed=embeds[id];var parent=embed.parent;var property=embed.property;var subject={"@id":id};if(_isArray(parent)){for(var i=0;i<parent.length;++i){if(jsonld.compareValues(parent[i],subject)){parent[i]=subject;break}}}else{var useArray=_isArray(parent[property]);jsonld.removeValue(parent,property,subject,{propertyIsArray:useArray});jsonld.addValue(parent,property,subject,{propertyIsArray:useArray})}var removeDependents=function(id){var ids=Object.keys(embeds);for(var i=0;i<ids.length;++i){var next=ids[i];if(next in embeds&&_isObject(embeds[next].parent)&&embeds[next].parent["@id"]===id){delete embeds[next];removeDependents(next)}}};removeDependents(id)}function _addFrameOutput(parent,property,output){if(_isObject(parent)){jsonld.addValue(parent,property,output,{propertyIsArray:true})}else{parent.push(output)}}function _removePreserve(ctx,input,options){if(_isArray(input)){var output=[];for(var i=0;i<input.length;++i){var result=_removePreserve(ctx,input[i],options);if(result!==null){output.push(result)}}input=output}else if(_isObject(input)){if("@preserve"in input){if(input["@preserve"]==="@null"){return null}return input["@preserve"]}if(_isValue(input)){return input}if(_isList(input)){input["@list"]=_removePreserve(ctx,input["@list"],options);return input}var idAlias=_compactIri(ctx,"@id");if(idAlias in input){var id=input[idAlias];if(id in options.link){var idx=options.link[id].indexOf(input);if(idx===-1){options.link[id].push(input)}else{return options.link[id][idx]}}else{options.link[id]=[input]}}for(var prop in input){var result=_removePreserve(ctx,input[prop],options);var container=jsonld.getContextValue(ctx,prop,"@container");if(options.compactArrays&&_isArray(result)&&result.length===1&&container===null){result=result[0]}input[prop]=result}}return input}function _compareShortestLeast(a,b){if(a.length<b.length){return-1}if(b.length<a.length){return 1}if(a===b){return 0}return a<b?-1:1}function _selectTerm(activeCtx,iri,value,containers,typeOrLanguage,typeOrLanguageValue){if(typeOrLanguageValue===null){typeOrLanguageValue="@null"}var prefs=[];if((typeOrLanguageValue==="@id"||typeOrLanguageValue==="@reverse")&&_isSubjectReference(value)){if(typeOrLanguageValue==="@reverse"){prefs.push("@reverse")}var term=_compactIri(activeCtx,value["@id"],null,{vocab:true});if(term in activeCtx.mappings&&activeCtx.mappings[term]&&activeCtx.mappings[term]["@id"]===value["@id"]){prefs.push.apply(prefs,["@vocab","@id"])}else{prefs.push.apply(prefs,["@id","@vocab"])}}else{prefs.push(typeOrLanguageValue)}prefs.push("@none");var containerMap=activeCtx.inverse[iri];for(var ci=0;ci<containers.length;++ci){var container=containers[ci];if(!(container in containerMap)){continue}var typeOrLanguageValueMap=containerMap[container][typeOrLanguage];for(var pi=0;pi<prefs.length;++pi){var pref=prefs[pi];if(!(pref in typeOrLanguageValueMap)){continue}return typeOrLanguageValueMap[pref]}}return null}function _compactIri(activeCtx,iri,value,relativeTo,reverse){if(iri===null){return iri}if(_isUndefined(value)){value=null}if(_isUndefined(reverse)){reverse=false}relativeTo=relativeTo||{};var inverseCtx=activeCtx.getInverse();if(_isKeyword(iri)){if(iri in inverseCtx){return inverseCtx[iri]["@none"]["@type"]["@none"]}return iri}if(relativeTo.vocab&&iri in inverseCtx){var defaultLanguage=activeCtx["@language"]||"@none";var containers=[];if(_isObject(value)&&"@index"in value){containers.push("@index")}var typeOrLanguage="@language";var typeOrLanguageValue="@null";if(reverse){typeOrLanguage="@type";typeOrLanguageValue="@reverse";containers.push("@set")}else if(_isList(value)){if(!("@index"in value)){containers.push("@list")}var list=value["@list"];var commonLanguage=list.length===0?defaultLanguage:null;var commonType=null;for(var i=0;i<list.length;++i){var item=list[i];var itemLanguage="@none";var itemType="@none";if(_isValue(item)){if("@language"in item){itemLanguage=item["@language"]}else if("@type"in item){itemType=item["@type"]}else{itemLanguage="@null"}}else{itemType="@id"}if(commonLanguage===null){commonLanguage=itemLanguage}else if(itemLanguage!==commonLanguage&&_isValue(item)){commonLanguage="@none"}if(commonType===null){commonType=itemType}else if(itemType!==commonType){commonType="@none"}if(commonLanguage==="@none"&&commonType==="@none"){break}}commonLanguage=commonLanguage||"@none";commonType=commonType||"@none";if(commonType!=="@none"){typeOrLanguage="@type";typeOrLanguageValue=commonType}else{typeOrLanguageValue=commonLanguage}}else{if(_isValue(value)){if("@language"in value&&!("@index"in value)){containers.push("@language");typeOrLanguageValue=value["@language"]}else if("@type"in value){typeOrLanguage="@type";typeOrLanguageValue=value["@type"]}}else{typeOrLanguage="@type";typeOrLanguageValue="@id"}containers.push("@set")}containers.push("@none");var term=_selectTerm(activeCtx,iri,value,containers,typeOrLanguage,typeOrLanguageValue);if(term!==null){return term}}if(relativeTo.vocab){if("@vocab"in activeCtx){var vocab=activeCtx["@vocab"];if(iri.indexOf(vocab)===0&&iri!==vocab){var suffix=iri.substr(vocab.length);if(!(suffix in activeCtx.mappings)){return suffix}}}}var choice=null;var idx=0;var partialMatches=[];var iriMap=activeCtx.fastCurieMap;var maxPartialLength=iri.length-1;for(;idx<maxPartialLength&&iri[idx]in iriMap;++idx){iriMap=iriMap[iri[idx]];if(""in iriMap){partialMatches.push(iriMap[""][0])}}for(var i=partialMatches.length-1;i>=0;--i){var entry=partialMatches[i];var terms=entry.terms;for(var ti=0;ti<terms.length;++ti){var curie=terms[ti]+":"+iri.substr(entry.iri.length);var isUsableCurie=!(curie in activeCtx.mappings)||value===null&&activeCtx.mappings[curie]["@id"]===iri;if(isUsableCurie&&(choice===null||_compareShortestLeast(curie,choice)<0)){choice=curie}}}if(choice!==null){return choice}if(!relativeTo.vocab){return _removeBase(activeCtx["@base"],iri)}return iri}function _compactValue(activeCtx,activeProperty,value){if(_isValue(value)){var type=jsonld.getContextValue(activeCtx,activeProperty,"@type");var language=jsonld.getContextValue(activeCtx,activeProperty,"@language");var container=jsonld.getContextValue(activeCtx,activeProperty,"@container");var preserveIndex="@index"in value&&container!=="@index";if(!preserveIndex){if(value["@type"]===type||value["@language"]===language){return value["@value"]}}var keyCount=Object.keys(value).length;var isValueOnlyKey=keyCount===1||keyCount===2&&"@index"in value&&!preserveIndex;var hasDefaultLanguage="@language"in activeCtx;var isValueString=_isString(value["@value"]);var hasNullMapping=activeCtx.mappings[activeProperty]&&activeCtx.mappings[activeProperty]["@language"]===null;if(isValueOnlyKey&&(!hasDefaultLanguage||!isValueString||hasNullMapping)){return value["@value"]}var rval={};if(preserveIndex){rval[_compactIri(activeCtx,"@index")]=value["@index"]}if("@type"in value){rval[_compactIri(activeCtx,"@type")]=_compactIri(activeCtx,value["@type"],null,{vocab:true})}else if("@language"in value){rval[_compactIri(activeCtx,"@language")]=value["@language"]}rval[_compactIri(activeCtx,"@value")]=value["@value"];return rval}var expandedProperty=_expandIri(activeCtx,activeProperty,{vocab:true});var type=jsonld.getContextValue(activeCtx,activeProperty,"@type");var compacted=_compactIri(activeCtx,value["@id"],null,{vocab:type==="@vocab"});if(type==="@id"||type==="@vocab"||expandedProperty==="@graph"){return compacted}var rval={};rval[_compactIri(activeCtx,"@id")]=compacted;return rval}function _createTermDefinition(activeCtx,localCtx,term,defined){if(term in defined){if(defined[term]){return}throw new JsonLdError("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:localCtx,term:term})}defined[term]=false;if(_isKeyword(term)){throw new JsonLdError("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:localCtx,term:term})}if(term===""){throw new JsonLdError("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:localCtx})}if(activeCtx.mappings[term]){delete activeCtx.mappings[term]}var value=localCtx[term];if(value===null||_isObject(value)&&value["@id"]===null){activeCtx.mappings[term]=null;defined[term]=true;return}if(_isString(value)){value={"@id":value}}if(!_isObject(value)){throw new JsonLdError("Invalid JSON-LD syntax; @context property values must be "+"strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:localCtx})}var mapping=activeCtx.mappings[term]={};mapping.reverse=false;if("@reverse"in value){if("@id"in value){throw new JsonLdError("Invalid JSON-LD syntax; a @reverse term definition must not "+"contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:localCtx})}var reverse=value["@reverse"];if(!_isString(reverse)){throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx})}var id=_expandIri(activeCtx,reverse,{vocab:true,base:false},localCtx,defined);if(!_isAbsoluteIri(id)){throw new JsonLdError("Invalid JSON-LD syntax; a @context @reverse value must be an "+"absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx})}mapping["@id"]=id;mapping.reverse=true}else if("@id"in value){var id=value["@id"];if(!_isString(id)){throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an array "+"of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx})}if(id!==term){id=_expandIri(activeCtx,id,{vocab:true,base:false},localCtx,defined);if(!_isAbsoluteIri(id)&&!_isKeyword(id)){throw new JsonLdError("Invalid JSON-LD syntax; a @context @id value must be an "+"absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx})}mapping["@id"]=id}}var colon=term.indexOf(":");mapping._termHasColon=colon!==-1;if(!("@id"in mapping)){if(mapping._termHasColon){var prefix=term.substr(0,colon);if(prefix in localCtx){_createTermDefinition(activeCtx,localCtx,prefix,defined)}if(activeCtx.mappings[prefix]){var suffix=term.substr(colon+1);mapping["@id"]=activeCtx.mappings[prefix]["@id"]+suffix}else{mapping["@id"]=term}}else{if(!("@vocab"in activeCtx)){throw new JsonLdError("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx,term:term})}mapping["@id"]=activeCtx["@vocab"]+term}}defined[term]=true;if("@type"in value){var type=value["@type"];if(!_isString(type)){throw new JsonLdError("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx})}if(type!=="@id"&&type!=="@vocab"){type=_expandIri(activeCtx,type,{vocab:true,base:false},localCtx,defined);if(!_isAbsoluteIri(type)){throw new JsonLdError("Invalid JSON-LD syntax; an @context @type value must be an "+"absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx})}if(type.indexOf("_:")===0){throw new JsonLdError("Invalid JSON-LD syntax; an @context @type values must be an IRI, "+"not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx})}}mapping["@type"]=type}if("@container"in value){var container=value["@container"];if(container!=="@list"&&container!=="@set"&&container!=="@index"&&container!=="@language"){throw new JsonLdError("Invalid JSON-LD syntax; @context @container value must be "+"one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:localCtx})}if(mapping.reverse&&container!=="@index"&&container!=="@set"&&container!==null){throw new JsonLdError("Invalid JSON-LD syntax; @context @container value for a @reverse "+"type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:localCtx})}mapping["@container"]=container}if("@language"in value&&!("@type"in value)){var language=value["@language"];if(language!==null&&!_isString(language)){throw new JsonLdError("Invalid JSON-LD syntax; @context @language value must be "+"a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:localCtx})}if(language!==null){language=language.toLowerCase()}mapping["@language"]=language}var id=mapping["@id"];if(id==="@context"||id==="@preserve"){throw new JsonLdError("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:localCtx})}}function _expandIri(activeCtx,value,relativeTo,localCtx,defined){if(value===null||_isKeyword(value)){return value}value=String(value);if(localCtx&&value in localCtx&&defined[value]!==true){_createTermDefinition(activeCtx,localCtx,value,defined)}relativeTo=relativeTo||{};if(relativeTo.vocab){var mapping=activeCtx.mappings[value];if(mapping===null){return null}if(mapping){return mapping["@id"]}}var colon=value.indexOf(":");if(colon!==-1){var prefix=value.substr(0,colon);var suffix=value.substr(colon+1);if(prefix==="_"||suffix.indexOf("//")===0){return value}if(localCtx&&prefix in localCtx){_createTermDefinition(activeCtx,localCtx,prefix,defined)}var mapping=activeCtx.mappings[prefix];if(mapping){return mapping["@id"]+suffix}return value}if(relativeTo.vocab&&"@vocab"in activeCtx){return activeCtx["@vocab"]+value}var rval=value;if(relativeTo.base){rval=jsonld.prependBase(activeCtx["@base"],rval)}return rval}function _prependBase(base,iri){if(base===null){return iri}if(iri.indexOf(":")!==-1){return iri}if(_isString(base)){base=jsonld.url.parse(base||"")}var rel=jsonld.url.parse(iri);var transform={protocol:base.protocol||""};if(rel.authority!==null){transform.authority=rel.authority;transform.path=rel.path;transform.query=rel.query}else{transform.authority=base.authority;if(rel.path===""){transform.path=base.path;if(rel.query!==null){transform.query=rel.query}else{transform.query=base.query}}else{if(rel.path.indexOf("/")===0){transform.path=rel.path}else{var path=base.path;if(rel.path!==""){path=path.substr(0,path.lastIndexOf("/")+1);if(path.length>0&&path.substr(-1)!=="/"){path+="/"}path+=rel.path}transform.path=path}transform.query=rel.query}}transform.path=_removeDotSegments(transform.path,!!transform.authority);var rval=transform.protocol;if(transform.authority!==null){rval+="//"+transform.authority}rval+=transform.path;if(transform.query!==null){rval+="?"+transform.query}if(rel.fragment!==null){rval+="#"+rel.fragment}if(rval===""){rval="./"}return rval}function _removeBase(base,iri){if(base===null){return iri}if(_isString(base)){base=jsonld.url.parse(base||"")}var root="";if(base.href!==""){root+=(base.protocol||"")+"//"+(base.authority||"")}else if(iri.indexOf("//")){root+="//"}if(iri.indexOf(root)!==0){return iri}var rel=jsonld.url.parse(iri.substr(root.length));var baseSegments=base.normalizedPath.split("/");var iriSegments=rel.normalizedPath.split("/");var last=rel.fragment||rel.query?0:1;while(baseSegments.length>0&&iriSegments.length>last){if(baseSegments[0]!==iriSegments[0]){break}baseSegments.shift();iriSegments.shift()}var rval="";if(baseSegments.length>0){baseSegments.pop();for(var i=0;i<baseSegments.length;++i){rval+="../"}}rval+=iriSegments.join("/");if(rel.query!==null){rval+="?"+rel.query}if(rel.fragment!==null){rval+="#"+rel.fragment}if(rval===""){rval="./"}return rval}function _getInitialContext(options){var base=jsonld.url.parse(options.base||"");return{"@base":base,mappings:{},inverse:null,getInverse:_createInverseContext,clone:_cloneActiveContext};function _createInverseContext(){var activeCtx=this;if(activeCtx.inverse){return activeCtx.inverse}var inverse=activeCtx.inverse={};var fastCurieMap=activeCtx.fastCurieMap={};var irisToTerms={};var defaultLanguage=activeCtx["@language"]||"@none";var mappings=activeCtx.mappings;var terms=Object.keys(mappings).sort(_compareShortestLeast);for(var i=0;i<terms.length;++i){var term=terms[i];var mapping=mappings[term];if(mapping===null){continue}var container=mapping["@container"]||"@none";var ids=mapping["@id"];if(!_isArray(ids)){ids=[ids]}for(var ii=0;ii<ids.length;++ii){var iri=ids[ii];var entry=inverse[iri];var isKeyword=_isKeyword(iri);if(!entry){inverse[iri]=entry={};if(!isKeyword&&!mapping._termHasColon){irisToTerms[iri]=[term];var fastCurieEntry={iri:iri,terms:irisToTerms[iri]};if(iri[0]in fastCurieMap){fastCurieMap[iri[0]].push(fastCurieEntry)}else{fastCurieMap[iri[0]]=[fastCurieEntry]}}}else if(!isKeyword&&!mapping._termHasColon){irisToTerms[iri].push(term)}if(!entry[container]){entry[container]={"@language":{},"@type":{}}}entry=entry[container];if(mapping.reverse){_addPreferredTerm(mapping,term,entry["@type"],"@reverse")}else if("@type"in mapping){_addPreferredTerm(mapping,term,entry["@type"],mapping["@type"])}else if("@language"in mapping){var language=mapping["@language"]||"@null";_addPreferredTerm(mapping,term,entry["@language"],language)}else{_addPreferredTerm(mapping,term,entry["@language"],defaultLanguage);_addPreferredTerm(mapping,term,entry["@type"],"@none");_addPreferredTerm(mapping,term,entry["@language"],"@none")}}}for(var key in fastCurieMap){_buildIriMap(fastCurieMap,key,1)}return inverse}function _buildIriMap(iriMap,key,idx){var entries=iriMap[key];var next=iriMap[key]={};var iri;var letter;for(var i=0;i<entries.length;++i){iri=entries[i].iri;if(idx>=iri.length){letter=""}else{letter=iri[idx]}if(letter in next){next[letter].push(entries[i])}else{next[letter]=[entries[i]]}}for(var key in next){if(key===""){continue}_buildIriMap(next,key,idx+1)}}function _addPreferredTerm(mapping,term,entry,typeOrLanguageValue){if(!(typeOrLanguageValue in entry)){entry[typeOrLanguageValue]=term}}function _cloneActiveContext(){var child={};child["@base"]=this["@base"];child.mappings=_clone(this.mappings);child.clone=this.clone;child.inverse=null;child.getInverse=this.getInverse;if("@language"in this){child["@language"]=this["@language"]}if("@vocab"in this){child["@vocab"]=this["@vocab"]}return child}}function _isKeyword(v){if(!_isString(v)){return false}switch(v){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return true}return false}function _isObject(v){return Object.prototype.toString.call(v)==="[object Object]"}function _isEmptyObject(v){return _isObject(v)&&Object.keys(v).length===0}function _isArray(v){return Array.isArray(v)}function _validateTypeValue(v){if(_isString(v)||_isEmptyObject(v)){return}var isValid=false;if(_isArray(v)){isValid=true;for(var i=0;i<v.length;++i){if(!_isString(v[i])){isValid=false;break}}}if(!isValid){throw new JsonLdError('Invalid JSON-LD syntax; "@type" value must a string, an array of '+"strings, or an empty object.","jsonld.SyntaxError",{code:"invalid type value",value:v})}}function _isString(v){return typeof v==="string"||Object.prototype.toString.call(v)==="[object String]"}function _isNumber(v){return typeof v==="number"||Object.prototype.toString.call(v)==="[object Number]"}function _isDouble(v){return _isNumber(v)&&String(v).indexOf(".")!==-1}function _isNumeric(v){return!isNaN(parseFloat(v))&&isFinite(v)}function _isBoolean(v){return typeof v==="boolean"||Object.prototype.toString.call(v)==="[object Boolean]"}function _isUndefined(v){return typeof v==="undefined"}function _isSubject(v){var rval=false;if(_isObject(v)&&!("@value"in v||"@set"in v||"@list"in v)){var keyCount=Object.keys(v).length;rval=keyCount>1||!("@id"in v)}return rval}function _isSubjectReference(v){return _isObject(v)&&Object.keys(v).length===1&&"@id"in v}function _isValue(v){return _isObject(v)&&"@value"in v}function _isList(v){return _isObject(v)&&"@list"in v}function _isBlankNode(v){var rval=false;if(_isObject(v)){if("@id"in v){rval=v["@id"].indexOf("_:")===0}else{rval=Object.keys(v).length===0||!("@value"in v||"@set"in v||"@list"in v)}}return rval}function _isAbsoluteIri(v){return _isString(v)&&v.indexOf(":")!==-1}function _clone(value){if(value&&typeof value==="object"){var rval;if(_isArray(value)){rval=[];for(var i=0;i<value.length;++i){rval[i]=_clone(value[i])}}else if(_isObject(value)){rval={};for(var key in value){rval[key]=_clone(value[key])}}else{rval=value.toString()}return rval}return value}function _findContextUrls(input,urls,replace,base){var count=Object.keys(urls).length;if(_isArray(input)){for(var i=0;i<input.length;++i){_findContextUrls(input[i],urls,replace,base)}return count<Object.keys(urls).length}else if(_isObject(input)){for(var key in input){if(key!=="@context"){_findContextUrls(input[key],urls,replace,base);continue}var ctx=input[key];if(_isArray(ctx)){var length=ctx.length;for(var i=0;i<length;++i){var _ctx=ctx[i];if(_isString(_ctx)){_ctx=jsonld.prependBase(base,_ctx);if(replace){_ctx=urls[_ctx];if(_isArray(_ctx)){Array.prototype.splice.apply(ctx,[i,1].concat(_ctx));i+=_ctx.length-1;length=ctx.length}else{ctx[i]=_ctx}}else if(!(_ctx in urls)){urls[_ctx]=false}}}}else if(_isString(ctx)){ctx=jsonld.prependBase(base,ctx);if(replace){input[key]=urls[ctx]}else if(!(ctx in urls)){urls[ctx]=false}}}return count<Object.keys(urls).length}return false}function _retrieveContextUrls(input,options,callback){var error=null;var documentLoader=options.documentLoader;var retrieve=function(input,cycles,documentLoader,base,callback){if(Object.keys(cycles).length>MAX_CONTEXT_URLS){error=new JsonLdError("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:MAX_CONTEXT_URLS});return callback(error)}var urls={};var finished=function(){_findContextUrls(input,urls,true,base);callback(null,input)};if(!_findContextUrls(input,urls,false,base)){return finished()}var queue=[];for(var url in urls){if(urls[url]===false){queue.push(url)}}var count=queue.length;for(var i=0;i<queue.length;++i){(function(url){if(url in cycles){error=new JsonLdError("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:url});return callback(error)}var _cycles=_clone(cycles);_cycles[url]=true;var done=function(err,remoteDoc){if(error){return}var ctx=remoteDoc?remoteDoc.document:null;if(!err&&_isString(ctx)){try{ctx=JSON.parse(ctx)}catch(ex){err=ex}}if(err){err=new JsonLdError("Dereferencing a URL did not result in a valid JSON-LD object. "+"Possible causes are an inaccessible URL perhaps due to "+"a same-origin policy (ensure the server uses CORS if you are "+"using client-side JavaScript), too many redirects, a "+"non-JSON response, or more than one HTTP Link Header was "+"provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:url,cause:err})}else if(!_isObject(ctx)){err=new JsonLdError("Dereferencing a URL did not result in a JSON object. The "+"response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:url,cause:err})}if(err){error=err;return callback(error)}if(!("@context"in ctx)){ctx={"@context":{}}}else{ctx={"@context":ctx["@context"]}}if(remoteDoc.contextUrl){if(!_isArray(ctx["@context"])){ctx["@context"]=[ctx["@context"]]}ctx["@context"].push(remoteDoc.contextUrl)}retrieve(ctx,_cycles,documentLoader,url,function(err,ctx){if(err){return callback(err)}urls[url]=ctx["@context"];count-=1;if(count===0){finished()}})};var promise=documentLoader(url,done);if(promise&&"then"in promise){promise.then(done.bind(null,null),done)}})(queue[i])}};retrieve(input,{},documentLoader,options.base,callback)}if(!Object.keys){Object.keys=function(o){if(o!==Object(o)){throw new TypeError("Object.keys called on non-object")}var rval=[];for(var p in o){if(Object.prototype.hasOwnProperty.call(o,p)){rval.push(p)}}return rval}}function _parseNQuads(input){var iri="(?:<([^:]+:[^>]*)>)";var bnode="(_:(?:[A-Za-z0-9]+))";var plain='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"';var datatype="(?:\\^\\^"+iri+")";var language="(?:@([a-z]+(?:-[a-z0-9]+)*))";var literal="(?:"+plain+"(?:"+datatype+"|"+language+")?)";var comment="(?:#.*)?";var ws="[ \\t]+";var wso="[ \\t]*";var eoln=/(?:\r\n)|(?:\n)|(?:\r)/g;var empty=new RegExp("^"+wso+comment+"$");var subject="(?:"+iri+"|"+bnode+")"+ws;var property=iri+ws;var object="(?:"+iri+"|"+bnode+"|"+literal+")"+wso;var graphName="(?:\\.|(?:(?:"+iri+"|"+bnode+")"+wso+"\\.))";var quad=new RegExp("^"+wso+subject+property+object+graphName+wso+comment+"$");var dataset={};var lines=input.split(eoln);var lineNumber=0;for(var li=0;li<lines.length;++li){var line=lines[li];lineNumber++;if(empty.test(line)){continue}var match=line.match(quad);if(match===null){throw new JsonLdError("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:lineNumber})}var triple={};if(!_isUndefined(match[1])){triple.subject={type:"IRI",value:match[1]}}else{triple.subject={type:"blank node",value:match[2]}}triple.predicate={type:"IRI",value:match[3]};if(!_isUndefined(match[4])){triple.object={type:"IRI",value:match[4]}}else if(!_isUndefined(match[5])){triple.object={type:"blank node",value:match[5]}}else{triple.object={type:"literal"};if(!_isUndefined(match[7])){triple.object.datatype=match[7]}else if(!_isUndefined(match[8])){triple.object.datatype=RDF_LANGSTRING;triple.object.language=match[8]}else{triple.object.datatype=XSD_STRING}var unescaped=match[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");triple.object.value=unescaped}var name="@default";if(!_isUndefined(match[9])){name=match[9]}else if(!_isUndefined(match[10])){name=match[10]}if(!(name in dataset)){dataset[name]=[triple]}else{var unique=true;var triples=dataset[name];for(var ti=0;unique&&ti<triples.length;++ti){if(_compareRDFTriples(triples[ti],triple)){unique=false}}if(unique){triples.push(triple)}}}return dataset}jsonld.registerRDFParser("application/nquads",_parseNQuads);function _toNQuads(dataset){var quads=[];for(var graphName in dataset){var triples=dataset[graphName];for(var ti=0;ti<triples.length;++ti){var triple=triples[ti];if(graphName==="@default"){graphName=null}quads.push(_toNQuad(triple,graphName))}}return quads.sort().join("")}function _toNQuad(triple,graphName){var s=triple.subject;var p=triple.predicate;var o=triple.object;var g=graphName||null;if("name"in triple&&triple.name){g=triple.name.value}var quad="";if(s.type==="IRI"){quad+="<"+s.value+">"}else{quad+=s.value}quad+=" ";if(p.type==="IRI"){quad+="<"+p.value+">"}else{quad+=p.value}quad+=" ";if(o.type==="IRI"){quad+="<"+o.value+">"}else if(o.type==="blank node"){quad+=o.value}else{var escaped=o.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');quad+='"'+escaped+'"';if(o.datatype===RDF_LANGSTRING){if(o.language){quad+="@"+o.language}}else if(o.datatype!==XSD_STRING){quad+="^^<"+o.datatype+">"}}if(g!==null&&g!==undefined){if(g.indexOf("_:")!==0){quad+=" <"+g+">"}else{quad+=" "+g}}quad+=" .\n";return quad}function _parseRdfaApiData(data){var dataset={};dataset["@default"]=[];var subjects=data.getSubjects();for(var si=0;si<subjects.length;++si){var subject=subjects[si];if(subject===null){continue}var triples=data.getSubjectTriples(subject);if(triples===null){continue}var predicates=triples.predicates;for(var predicate in predicates){var objects=predicates[predicate].objects;for(var oi=0;oi<objects.length;++oi){var object=objects[oi];var triple={};if(subject.indexOf("_:")===0){triple.subject={type:"blank node",value:subject}}else{triple.subject={type:"IRI",value:subject}}if(predicate.indexOf("_:")===0){triple.predicate={type:"blank node",value:predicate}}else{triple.predicate={type:"IRI",value:predicate}}var value=object.value;if(object.type===RDF_XML_LITERAL){if(!XMLSerializer){_defineXMLSerializer()}var serializer=new XMLSerializer;value="";for(var x=0;x<object.value.length;x++){if(object.value[x].nodeType===Node.ELEMENT_NODE){value+=serializer.serializeToString(object.value[x])}else if(object.value[x].nodeType===Node.TEXT_NODE){value+=object.value[x].nodeValue}}}triple.object={};if(object.type===RDF_OBJECT){if(object.value.indexOf("_:")===0){triple.object.type="blank node"}else{triple.object.type="IRI"}}else{triple.object.type="literal";if(object.type===RDF_PLAIN_LITERAL){if(object.language){triple.object.datatype=RDF_LANGSTRING;triple.object.language=object.language}else{triple.object.datatype=XSD_STRING}}else{triple.object.datatype=object.type}}triple.object.value=value;dataset["@default"].push(triple)}}}return dataset}jsonld.registerRDFParser("rdfa-api",_parseRdfaApiData);function IdentifierIssuer(prefix){this.prefix=prefix;this.counter=0;this.existing={}}jsonld.IdentifierIssuer=IdentifierIssuer;jsonld.UniqueNamer=IdentifierIssuer;IdentifierIssuer.prototype.clone=function(){var copy=new IdentifierIssuer(this.prefix);copy.counter=this.counter;copy.existing=_clone(this.existing);return copy};IdentifierIssuer.prototype.getId=function(old){if(old&&old in this.existing){return this.existing[old]}var identifier=this.prefix+this.counter;this.counter+=1;if(old){this.existing[old]=identifier}return identifier};IdentifierIssuer.prototype.getName=IdentifierIssuer.prototype.getName;IdentifierIssuer.prototype.hasId=function(old){return old in this.existing};IdentifierIssuer.prototype.isNamed=IdentifierIssuer.prototype.hasId;var Permutator=function(list){this.list=list.sort();this.done=false;this.left={};for(var i=0;i<list.length;++i){this.left[list[i]]=true}};Permutator.prototype.hasNext=function(){return!this.done};Permutator.prototype.next=function(){var rval=this.list.slice();var k=null;var pos=0;var length=this.list.length;for(var i=0;i<length;++i){var element=this.list[i];var left=this.left[element];if((k===null||element>k)&&(left&&i>0&&element>this.list[i-1]||!left&&i<length-1&&element>this.list[i+1])){k=element;pos=i}}if(k===null){this.done=true}else{var swap=this.left[k]?pos-1:pos+1;this.list[pos]=this.list[swap];this.list[swap]=k;for(var i=0;i<length;++i){if(this.list[i]>k){this.left[this.list[i]]=!this.left[this.list[i]]}}}return rval};var NormalizeHash=function(algorithm){if(!(this instanceof NormalizeHash)){return new NormalizeHash(algorithm)}if(["URDNA2015","URGNA2012"].indexOf(algorithm)===-1){throw new Error("Invalid RDF Dataset Normalization algorithm: "+algorithm)}NormalizeHash._init.call(this,algorithm)};NormalizeHash.hashNQuads=function(algorithm,nquads){var md=new NormalizeHash(algorithm);for(var i=0;i<nquads.length;++i){md.update(nquads[i])}return md.digest()};(function(_nodejs){if(_nodejs){var crypto=__webpack_require__(50);NormalizeHash._init=function(algorithm){if(algorithm==="URDNA2015"){algorithm="sha256"}else{algorithm="sha1"}this.md=crypto.createHash(algorithm)};NormalizeHash.prototype.update=function(msg){return this.md.update(msg,"utf8")};NormalizeHash.prototype.digest=function(){return this.md.digest("hex")};return}NormalizeHash._init=function(algorithm){if(algorithm==="URDNA2015"){algorithm=new sha256.Algorithm}else{algorithm=new sha1.Algorithm}this.md=new MessageDigest(algorithm)};NormalizeHash.prototype.update=function(msg){return this.md.update(msg)};NormalizeHash.prototype.digest=function(){return this.md.digest().toHex()};var MessageDigest=function(algorithm){if(!(this instanceof MessageDigest)){return new MessageDigest(algorithm)}this._algorithm=algorithm;if(!MessageDigest._padding||MessageDigest._padding.length<this._algorithm.blockSize){MessageDigest._padding=String.fromCharCode(128);var c=String.fromCharCode(0);var n=64;while(n>0){if(n&1){MessageDigest._padding+=c}n>>>=1;if(n>0){c+=c}}}this.start()};MessageDigest.prototype.start=function(){this.messageLength=0;this.fullMessageLength=[];var int32s=this._algorithm.messageLengthSize/4;for(var i=0;i<int32s;++i){this.fullMessageLength.push(0)}this._input=new MessageDigest.ByteBuffer;this.state=this._algorithm.start();return this};MessageDigest.prototype.update=function(msg){msg=new MessageDigest.ByteBuffer(unescape(encodeURIComponent(msg)));this.messageLength+=msg.length();var len=msg.length();len=[len/4294967296>>>0,len>>>0];for(var i=this.fullMessageLength.length-1;i>=0;--i){this.fullMessageLength[i]+=len[1];len[1]=len[0]+(this.fullMessageLength[i]/4294967296>>>0);this.fullMessageLength[i]=this.fullMessageLength[i]>>>0;len[0]=len[1]/4294967296>>>0}this._input.putBytes(msg.bytes());while(this._input.length()>=this._algorithm.blockSize){this.state=this._algorithm.digest(this.state,this._input)}if(this._input.read>2048||this._input.length()===0){this._input.compact()}return this};MessageDigest.prototype.digest=function(){var finalBlock=new MessageDigest.ByteBuffer;finalBlock.putBytes(this._input.bytes());var remaining=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize;var overflow=remaining&this._algorithm.blockSize-1;finalBlock.putBytes(MessageDigest._padding.substr(0,this._algorithm.blockSize-overflow));var messageLength=new MessageDigest.ByteBuffer;for(var i=0;i<this.fullMessageLength.length;++i){messageLength.putInt32(this.fullMessageLength[i]<<3|this.fullMessageLength[i+1]>>>28)}this._algorithm.writeMessageLength(finalBlock,messageLength);var state=this._algorithm.digest(this.state.copy(),finalBlock);var rval=new MessageDigest.ByteBuffer;state.write(rval);return rval};MessageDigest.ByteBuffer=function(data){if(typeof data==="string"){this.data=data}else{this.data=""}this.read=0};MessageDigest.ByteBuffer.prototype.putInt32=function(i){this.data+=String.fromCharCode(i>>24&255)+String.fromCharCode(i>>16&255)+String.fromCharCode(i>>8&255)+String.fromCharCode(i&255)};MessageDigest.ByteBuffer.prototype.getInt32=function(){var rval=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);this.read+=4;return rval};MessageDigest.ByteBuffer.prototype.putBytes=function(bytes){this.data+=bytes};MessageDigest.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)};MessageDigest.ByteBuffer.prototype.length=function(){return this.data.length-this.read};MessageDigest.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read);this.read=0};MessageDigest.ByteBuffer.prototype.toHex=function(){var rval="";for(var i=this.read;i<this.data.length;++i){var b=this.data.charCodeAt(i);if(b<16){rval+="0"}rval+=b.toString(16)}return rval};var sha1={_w:null};sha1.Algorithm=function(){this.name="sha1",this.blockSize=64;this.digestLength=20;this.messageLengthSize=8};sha1.Algorithm.prototype.start=function(){if(!sha1._w){sha1._w=new Array(80)}return sha1._createState()};sha1.Algorithm.prototype.writeMessageLength=function(finalBlock,messageLength){finalBlock.putBytes(messageLength.bytes())};sha1.Algorithm.prototype.digest=function(s,input){var t,a,b,c,d,e,f,i;var len=input.length();var _w=sha1._w;while(len>=64){a=s.h0;b=s.h1;c=s.h2;d=s.h3;e=s.h4;for(i=0;i<16;++i){t=input.getInt32();_w[i]=t;f=d^b&(c^d);t=(a<<5|a>>>27)+f+e+1518500249+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t}for(;i<20;++i){t=_w[i-3]^_w[i-8]^_w[i-14]^_w[i-16];t=t<<1|t>>>31;_w[i]=t;f=d^b&(c^d);t=(a<<5|a>>>27)+f+e+1518500249+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t}for(;i<32;++i){t=_w[i-3]^_w[i-8]^_w[i-14]^_w[i-16];t=t<<1|t>>>31;_w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+1859775393+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t}for(;i<40;++i){t=_w[i-6]^_w[i-16]^_w[i-28]^_w[i-32];t=t<<2|t>>>30;_w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+1859775393+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t}for(;i<60;++i){t=_w[i-6]^_w[i-16]^_w[i-28]^_w[i-32];t=t<<2|t>>>30;_w[i]=t;f=b&c|d&(b^c);t=(a<<5|a>>>27)+f+e+2400959708+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t}for(;i<80;++i){t=_w[i-6]^_w[i-16]^_w[i-28]^_w[i-32];t=t<<2|t>>>30;_w[i]=t;f=b^c^d;t=(a<<5|a>>>27)+f+e+3395469782+t;e=d;d=c;c=b<<30|b>>>2;b=a;a=t}s.h0=s.h0+a|0;s.h1=s.h1+b|0;s.h2=s.h2+c|0;s.h3=s.h3+d|0;s.h4=s.h4+e|0;len-=64}return s};sha1._createState=function(){var state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};state.copy=function(){var rval=sha1._createState();rval.h0=state.h0;rval.h1=state.h1;rval.h2=state.h2;rval.h3=state.h3;rval.h4=state.h4;return rval};state.write=function(buffer){buffer.putInt32(state.h0);buffer.putInt32(state.h1);buffer.putInt32(state.h2);buffer.putInt32(state.h3);buffer.putInt32(state.h4)};return state};var sha256={_k:null,_w:null};sha256.Algorithm=function(){this.name="sha256",this.blockSize=64;this.digestLength=32;this.messageLengthSize=8};sha256.Algorithm.prototype.start=function(){if(!sha256._k){sha256._init()}return sha256._createState()};sha256.Algorithm.prototype.writeMessageLength=function(finalBlock,messageLength){finalBlock.putBytes(messageLength.bytes())};sha256.Algorithm.prototype.digest=function(s,input){var t1,t2,s0,s1,ch,maj,i,a,b,c,d,e,f,g,h;var len=input.length();var _k=sha256._k;var _w=sha256._w;while(len>=64){for(i=0;i<16;++i){_w[i]=input.getInt32()}for(;i<64;++i){t1=_w[i-2];t1=(t1>>>17|t1<<15)^(t1>>>19|t1<<13)^t1>>>10;t2=_w[i-15];t2=(t2>>>7|t2<<25)^(t2>>>18|t2<<14)^t2>>>3;_w[i]=t1+_w[i-7]+t2+_w[i-16]|0}a=s.h0;b=s.h1;c=s.h2;d=s.h3;e=s.h4;f=s.h5;g=s.h6;h=s.h7;for(i=0;i<64;++i){s1=(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7);ch=g^e&(f^g);s0=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10);maj=a&b|c&(a^b);t1=h+s1+ch+_k[i]+_w[i];t2=s0+maj;h=g;g=f;f=e;e=d+t1|0;d=c;c=b;b=a;a=t1+t2|0}s.h0=s.h0+a|0;s.h1=s.h1+b|0;s.h2=s.h2+c|0;s.h3=s.h3+d|0;s.h4=s.h4+e|0;s.h5=s.h5+f|0;s.h6=s.h6+g|0;s.h7=s.h7+h|0;len-=64}return s};sha256._createState=function(){var state={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};state.copy=function(){var rval=sha256._createState();rval.h0=state.h0;rval.h1=state.h1;rval.h2=state.h2;rval.h3=state.h3;rval.h4=state.h4;rval.h5=state.h5;rval.h6=state.h6;rval.h7=state.h7;return rval};state.write=function(buffer){buffer.putInt32(state.h0);buffer.putInt32(state.h1);buffer.putInt32(state.h2);buffer.putInt32(state.h3);buffer.putInt32(state.h4);buffer.putInt32(state.h5);buffer.putInt32(state.h6);buffer.putInt32(state.h7)};return state};sha256._init=function(){sha256._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];sha256._w=new Array(64)}})(_nodejs);if(!XMLSerializer){var _defineXMLSerializer=function(){XMLSerializer=__webpack_require__(50).XMLSerializer}}jsonld.url={};jsonld.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};jsonld.url.parse=function(str,parser){var parsed={};var o=jsonld.url.parsers[parser||"full"];var m=o.regex.exec(str);var i=o.keys.length;while(i--){parsed[o.keys[i]]=m[i]===undefined?null:m[i]}parsed.normalizedPath=_removeDotSegments(parsed.path,!!parsed.authority);return parsed};function _removeDotSegments(path,hasAuthority){var rval="";if(path.indexOf("/")===0){rval="/"}var input=path.split("/");var output=[];while(input.length>0){if(input[0]==="."||input[0]===""&&input.length>1){input.shift();continue}if(input[0]===".."){input.shift();if(hasAuthority||output.length>0&&output[output.length-1]!==".."){output.pop()}else{output.push("..")}continue}output.push(input.shift())}return rval+output.join("/")}if(_nodejs){jsonld.useDocumentLoader("node")}else if(typeof XMLHttpRequest!=="undefined"){jsonld.useDocumentLoader("xhr")}if(_nodejs){jsonld.use=function(extension){switch(extension){case"request":jsonld.request=__webpack_require__(50);break;default:throw new JsonLdError("Unknown extension.","jsonld.UnknownExtension",{extension:extension})}};var _module={exports:{},filename:__dirname};__webpack_require__(50)(_module,"version");jsonld.version=_module.exports.version}return jsonld};var factory=function(){return wrapper(function(){return factory()})};if(!_nodejs&&(true&&__webpack_require__.amdO)){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){wrapper(factory);return factory}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{wrapper(factory);if(true&&module.exports){module.exports=factory}if(_browser){if(typeof jsonld==="undefined"){jsonld=jsonldjs=factory}else{jsonldjs=factory}}}return factory})()},function(module,__unused_webpack_exports,__webpack_require__){var process=__webpack_require__(11);(function(global,factory){true?module.exports=factory():0})(this,function(){"use strict";function objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function isFunction(x){return typeof x==="function"}var _isArray=undefined;if(!Array.isArray){_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{_isArray=Array.isArray}var isArray=_isArray;var len=0;var vertxNext=undefined;var customSchedulerFn=undefined;var asap=function asap(callback,arg){queue[len]=callback;queue[len+1]=arg;len+=2;if(len===2){if(customSchedulerFn){customSchedulerFn(flush)}else{scheduleFlush()}}};function setScheduler(scheduleFn){customSchedulerFn=scheduleFn}function setAsap(asapFn){asap=asapFn}var browserWindow=typeof window!=="undefined"?window:undefined;var browserGlobal=browserWindow||{};var BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver;var isNode=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function useNextTick(){return function(){return process.nextTick(flush)}}function useVertxTimer(){return function(){vertxNext(flush)}}function useMutationObserver(){var iterations=0;var observer=new BrowserMutationObserver(flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=flush;return function(){return channel.port2.postMessage(0)}}function useSetTimeout(){var globalSetTimeout=setTimeout;return function(){return globalSetTimeout(flush,1)}}var queue=new Array(1e3);function flush(){for(var i=0;i<len;i+=2){var callback=queue[i];var arg=queue[i+1];callback(arg);queue[i]=undefined;queue[i+1]=undefined}len=0}function attemptVertx(){try{var r=undefined;var vertx=__webpack_require__(49);vertxNext=vertx.runOnLoop||vertx.runOnContext;return useVertxTimer()}catch(e){return useSetTimeout()}}var scheduleFlush=undefined;if(isNode){scheduleFlush=useNextTick()}else if(BrowserMutationObserver){scheduleFlush=useMutationObserver()}else if(isWorker){scheduleFlush=useMessageChannel()}else if(browserWindow===undefined&&"function"==="function"){scheduleFlush=attemptVertx()}else{scheduleFlush=useSetTimeout()}function then(onFulfillment,onRejection){var _arguments=arguments;var parent=this;var child=new this.constructor(noop);if(child[PROMISE_ID]===undefined){makePromise(child)}var _state=parent._state;if(_state){(function(){var callback=_arguments[_state-1];asap(function(){return invokeCallback(_state,child,callback,parent._result)})})()}else{subscribe(parent,child,onFulfillment,onRejection)}return child}function resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(noop);_resolve(promise,object);return promise}var PROMISE_ID=Math.random().toString(36).substring(16);function noop(){}var PENDING=void 0;var FULFILLED=1;var REJECTED=2;var GET_THEN_ERROR=new ErrorObject;function selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function getThen(promise){try{return promise.then}catch(error){GET_THEN_ERROR.error=error;return GET_THEN_ERROR}}function tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function handleForeignThenable(promise,thenable,then){asap(function(promise){var sealed=false;var error=tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){_resolve(promise,value)}else{fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;_reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;_reject(promise,error)}},promise)}function handleOwnThenable(promise,thenable){if(thenable._state===FULFILLED){fulfill(promise,thenable._result)}else if(thenable._state===REJECTED){_reject(promise,thenable._result)}else{subscribe(thenable,undefined,function(value){return _resolve(promise,value)},function(reason){return _reject(promise,reason)})}}function handleMaybeThenable(promise,maybeThenable,then$$){if(maybeThenable.constructor===promise.constructor&&then$$===then&&maybeThenable.constructor.resolve===resolve){handleOwnThenable(promise,maybeThenable)}else{if(then$$===GET_THEN_ERROR){_reject(promise,GET_THEN_ERROR.error)}else if(then$$===undefined){fulfill(promise,maybeThenable)}else if(isFunction(then$$)){handleForeignThenable(promise,maybeThenable,then$$)}else{fulfill(promise,maybeThenable)}}}function _resolve(promise,value){if(promise===value){_reject(promise,selfFulfillment())}else if(objectOrFunction(value)){handleMaybeThenable(promise,value,getThen(value))}else{fulfill(promise,value)}}function publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}publish(promise)}function fulfill(promise,value){if(promise._state!==PENDING){return}promise._result=value;promise._state=FULFILLED;if(promise._subscribers.length!==0){asap(publish,promise)}}function _reject(promise,reason){if(promise._state!==PENDING){return}promise._state=REJECTED;promise._result=reason;asap(publishRejection,promise)}function subscribe(parent,child,onFulfillment,onRejection){var _subscribers=parent._subscribers;var length=_subscribers.length;parent._onerror=null;_subscribers[length]=child;_subscribers[length+FULFILLED]=onFulfillment;_subscribers[length+REJECTED]=onRejection;if(length===0&&parent._state){asap(publish,parent)}}function publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child=undefined,callback=undefined,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function ErrorObject(){this.error=null}var TRY_CATCH_ERROR=new ErrorObject;function tryCatch(callback,detail){try{return callback(detail)}catch(e){TRY_CATCH_ERROR.error=e;return TRY_CATCH_ERROR}}function invokeCallback(settled,promise,callback,detail){var hasCallback=isFunction(callback),value=undefined,error=undefined,succeeded=undefined,failed=undefined;if(hasCallback){value=tryCatch(callback,detail);if(value===TRY_CATCH_ERROR){failed=true;error=value.error;value=null}else{succeeded=true}if(promise===value){_reject(promise,cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==PENDING){}else if(hasCallback&&succeeded){_resolve(promise,value)}else if(failed){_reject(promise,error)}else if(settled===FULFILLED){fulfill(promise,value)}else if(settled===REJECTED){_reject(promise,value)}}function initializePromise(promise,resolver){try{resolver(function resolvePromise(value){_resolve(promise,value)},function rejectPromise(reason){_reject(promise,reason)})}catch(e){_reject(promise,e)}}var id=0;function nextId(){return id++}function makePromise(promise){promise[PROMISE_ID]=id++;promise._state=undefined;promise._result=undefined;promise._subscribers=[]}function Enumerator(Constructor,input){this._instanceConstructor=Constructor;this.promise=new Constructor(noop);if(!this.promise[PROMISE_ID]){makePromise(this.promise)}if(isArray(input)){this._input=input;this.length=input.length;this._remaining=input.length;this._result=new Array(this.length);if(this.length===0){fulfill(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){fulfill(this.promise,this._result)}}}else{_reject(this.promise,validationError())}}function validationError(){return new Error("Array Methods must be provided an Array")}Enumerator.prototype._enumerate=function(){var length=this.length;var _input=this._input;for(var i=0;this._state===PENDING&&i<length;i++){this._eachEntry(_input[i],i)}};Enumerator.prototype._eachEntry=function(entry,i){var c=this._instanceConstructor;var resolve$$=c.resolve;if(resolve$$===resolve){var _then=getThen(entry);if(_then===then&&entry._state!==PENDING){this._settledAt(entry._state,i,entry._result)}else if(typeof _then!=="function"){this._remaining--;this._result[i]=entry}else if(c===Promise){var promise=new c(noop);handleMaybeThenable(promise,entry,_then);this._willSettleAt(promise,i)}else{this._willSettleAt(new c(function(resolve$$){return resolve$$(entry)}),i)}}else{this._willSettleAt(resolve$$(entry),i)}};Enumerator.prototype._settledAt=function(state,i,value){var promise=this.promise;if(promise._state===PENDING){this._remaining--;if(state===REJECTED){_reject(promise,value)}else{this._result[i]=value}}if(this._remaining===0){fulfill(promise,this._result)}};Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;subscribe(promise,undefined,function(value){return enumerator._settledAt(FULFILLED,i,value)},function(reason){return enumerator._settledAt(REJECTED,i,reason)})};function all(entries){return new Enumerator(this,entries).promise}function race(entries){var Constructor=this;if(!isArray(entries)){return new Constructor(function(_,reject){return reject(new TypeError("You must pass an array to race."))})}else{return new Constructor(function(resolve,reject){var length=entries.length;for(var i=0;i<length;i++){Constructor.resolve(entries[i]).then(resolve,reject)}})}}function reject(reason){var Constructor=this;var promise=new Constructor(noop);_reject(promise,reason);return promise}function needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function Promise(resolver){this[PROMISE_ID]=nextId();this._result=this._state=undefined;this._subscribers=[];if(noop!==resolver){typeof resolver!=="function"&&needsResolver();this instanceof Promise?initializePromise(this,resolver):needsNew()}}Promise.all=all;Promise.race=race;Promise.resolve=resolve;Promise.reject=reject;Promise._setScheduler=setScheduler;Promise._setAsap=setAsap;Promise._asap=asap;Promise.prototype={constructor:Promise,then:then,catch:function _catch(onRejection){return this.then(null,onRejection)}};function polyfill(){var local=undefined;if(typeof __webpack_require__.g!=="undefined"){local=__webpack_require__.g}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P){var promiseToString=null;try{promiseToString=Object.prototype.toString.call(P.resolve())}catch(e){}if(promiseToString==="[object Promise]"&&!P.cast){return}}local.Promise=Promise}polyfill();Promise.polyfill=polyfill;Promise.Promise=Promise;return Promise})},()=>{},()=>{},(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__(11);var concatStream=__webpack_require__(52);var inherits=__webpack_require__(31);var Readable=__webpack_require__(53).Readable;function AbstractParser(rdf){this.rdf=rdf}AbstractParser.prototype.parse=function(data,callback,base,filter,graph){var self=this;graph=graph||self.rdf.createGraph();var pushTriple=function(triple){graph.add(triple)};return new Promise(function(resolve,reject){self.process(data,pushTriple,base,filter).then(function(){if(callback){process.nextTick(function(){callback(null,graph)})}resolve(graph)}).catch(function(error){if(callback){process.nextTick(function(){callback(error)})}reject(error)})})};AbstractParser.prototype.stream=function(inputStream,base,filter){var self=this;var outputStream=new AbstractParser.TripleReadStream;AbstractParser.streamToData(inputStream).then(function(data){self.process(data,function(triple){outputStream.push(triple)},base,filter,function(error){if(error){outputStream.emit("error",error)}else{outputStream.emit("end")}})}).catch(function(error){outputStream.emit("error",error)});return outputStream};AbstractParser.streamToData=function(stream){return new Promise(function(resolve,reject){if(typeof stream!=="object"||typeof stream.read!=="function"){return resolve(stream)}stream.on("error",function(error){reject(error)});stream.pipe(concatStream(function(data){resolve(data)}))})};AbstractParser.TripleReadStream=function(){Readable.call(this,{objectMode:true});this._read=function(){return 0}};inherits(AbstractParser.TripleReadStream,Readable);module.exports=AbstractParser},(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__(60)["Buffer"];var Writable=__webpack_require__(53).Writable;var inherits=__webpack_require__(31);var bufferFrom=__webpack_require__(74);if(typeof Uint8Array==="undefined"){var U8=__webpack_require__(75).Uint8Array}else{var U8=Uint8Array}function ConcatStream(opts,cb){if(!(this instanceof ConcatStream))return new ConcatStream(opts,cb);if(typeof opts==="function"){cb=opts;opts={}}if(!opts)opts={};var encoding=opts.encoding;var shouldInferEncoding=false;if(!encoding){shouldInferEncoding=true}else{encoding=String(encoding).toLowerCase();if(encoding==="u8"||encoding==="uint8"){encoding="uint8array"}}Writable.call(this,{objectMode:true});this.encoding=encoding;this.shouldInferEncoding=shouldInferEncoding;if(cb)this.on("finish",function(){cb(this.getBody())});this.body=[]}module.exports=ConcatStream;inherits(ConcatStream,Writable);ConcatStream.prototype._write=function(chunk,enc,next){this.body.push(chunk);next()};ConcatStream.prototype.inferEncoding=function(buff){var firstBuffer=buff===undefined?this.body[0]:buff;if(Buffer.isBuffer(firstBuffer))return"buffer";if(typeof Uint8Array!=="undefined"&&firstBuffer instanceof Uint8Array)return"uint8array";if(Array.isArray(firstBuffer))return"array";if(typeof firstBuffer==="string")return"string";if(Object.prototype.toString.call(firstBuffer)==="[object Object]")return"object";return"buffer"};ConcatStream.prototype.getBody=function(){if(!this.encoding&&this.body.length===0)return[];if(this.shouldInferEncoding)this.encoding=this.inferEncoding();if(this.encoding==="array")return arrayConcat(this.body);if(this.encoding==="string")return stringConcat(this.body);if(this.encoding==="buffer")return bufferConcat(this.body);if(this.encoding==="uint8array")return u8Concat(this.body);return this.body};var isArray=Array.isArray||function(arr){return Object.prototype.toString.call(arr)=="[object Array]"};function isArrayish(arr){return/Array\]$/.test(Object.prototype.toString.call(arr))}function isBufferish(p){return typeof p==="string"||isArrayish(p)||p&&typeof p.subarray==="function"}function stringConcat(parts){var strings=[];var needsToString=false;for(var i=0;i<parts.length;i++){var p=parts[i];if(typeof p==="string"){strings.push(p)}else if(Buffer.isBuffer(p)){strings.push(p)}else if(isBufferish(p)){strings.push(bufferFrom(p))}else{strings.push(bufferFrom(String(p)))}}if(Buffer.isBuffer(parts[0])){strings=Buffer.concat(strings);strings=strings.toString("utf8")}else{strings=strings.join("")}return strings}function bufferConcat(parts){var bufs=[];for(var i=0;i<parts.length;i++){var p=parts[i];if(Buffer.isBuffer(p)){bufs.push(p)}else if(isBufferish(p)){bufs.push(bufferFrom(p))}else{bufs.push(bufferFrom(String(p)))}}return Buffer.concat(bufs)}function arrayConcat(parts){var res=[];for(var i=0;i<parts.length;i++){res.push.apply(res,parts[i])}return res}function u8Concat(parts){var len=0;for(var i=0;i<parts.length;i++){if(typeof parts[i]==="string"){parts[i]=bufferFrom(parts[i])}len+=parts[i].length}var u8=new U8(len);for(var i=0,offset=0;i<parts.length;i++){var part=parts[i];for(var j=0;j<part.length;j++){u8[offset++]=part[j]}}return u8}},(module,exports,__webpack_require__)=>{exports=module.exports=__webpack_require__(54);exports.Stream=exports;exports.Readable=exports;exports.Writable=__webpack_require__(69);exports.Duplex=__webpack_require__(68);exports.Transform=__webpack_require__(72);exports.PassThrough=__webpack_require__(73)},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__(11);var pna=__webpack_require__(55);module.exports=Readable;var isArray=__webpack_require__(56);var Duplex;Readable.ReadableState=ReadableState;var EE=__webpack_require__(57).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length};var Stream=__webpack_require__(58);var Buffer=__webpack_require__(59).Buffer;var OurUint8Array=__webpack_require__.g.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var util=Object.create(__webpack_require__(63));util.inherits=__webpack_require__(31);var debugUtil=__webpack_require__(64);var debug=void 0;if(debugUtil&&debugUtil.debuglog){debug=debugUtil.debuglog("stream")}else{debug=function(){}}var BufferList=__webpack_require__(65);var destroyImpl=__webpack_require__(67);var StringDecoder;util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function prependListener(emitter,event,fn){if(typeof emitter.prependListener==="function")return emitter.prependListener(event,fn);if(!emitter._events||!emitter._events[event])emitter.on(event,fn);else if(isArray(emitter._events[event]))emitter._events[event].unshift(fn);else emitter._events[event]=[fn,emitter._events[event]]}function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(68);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.readableObjectMode;var hwm=options.highWaterMark;var readableHwm=options.readableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(readableHwm||readableHwm===0))this.highWaterMark=readableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.buffer=new BufferList;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.destroyed=false;this.defaultEncoding=options.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(options.encoding){if(!StringDecoder)StringDecoder=__webpack_require__(71).StringDecoder;this.decoder=new StringDecoder(options.encoding);this.encoding=options.encoding}}function Readable(options){Duplex=Duplex||__webpack_require__(68);if(!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this);this.readable=true;if(options){if(typeof options.read==="function")this._read=options.read;if(typeof options.destroy==="function")this._destroy=options.destroy}Stream.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function(value){if(!this._readableState){return}this._readableState.destroyed=value}});Readable.prototype.destroy=destroyImpl.destroy;Readable.prototype._undestroy=destroyImpl.undestroy;Readable.prototype._destroy=function(err,cb){this.push(null);cb(err)};Readable.prototype.push=function(chunk,encoding){var state=this._readableState;var skipChunkCheck;if(!state.objectMode){if(typeof chunk==="string"){encoding=encoding||state.defaultEncoding;if(encoding!==state.encoding){chunk=Buffer.from(chunk,encoding);encoding=""}skipChunkCheck=true}}else{skipChunkCheck=true}return readableAddChunk(this,chunk,encoding,false,skipChunkCheck)};Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,true,false)};function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state=stream._readableState;if(chunk===null){state.reading=false;onEofChunk(stream,state)}else{var er;if(!skipChunkCheck)er=chunkInvalid(state,chunk);if(er){stream.emit("error",er)}else if(state.objectMode||chunk&&chunk.length>0){if(typeof chunk!=="string"&&!state.objectMode&&Object.getPrototypeOf(chunk)!==Buffer.prototype){chunk=_uint8ArrayToBuffer(chunk)}if(addToFront){if(state.endEmitted)stream.emit("error",new Error("stream.unshift() after end event"));else addChunk(stream,state,chunk,true)}else if(state.ended){stream.emit("error",new Error("stream.push() after EOF"))}else{state.reading=false;if(state.decoder&&!encoding){chunk=state.decoder.write(chunk);if(state.objectMode||chunk.length!==0)addChunk(stream,state,chunk,false);else maybeReadMore(stream,state)}else{addChunk(stream,state,chunk,false)}}}else if(!addToFront){state.reading=false}}return needMoreData(state)}function addChunk(stream,state,chunk,addToFront){if(state.flowing&&state.length===0&&!state.sync){stream.emit("data",chunk);stream.read(0)}else{state.length+=state.objectMode?1:chunk.length;if(addToFront)state.buffer.unshift(chunk);else state.buffer.push(chunk);if(state.needReadable)emitReadable(stream)}maybeReadMore(stream,state)}function chunkInvalid(state,chunk){var er;if(!_isUint8Array(chunk)&&typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}return er}function needMoreData(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||state.length===0)}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(enc){if(!StringDecoder)StringDecoder=__webpack_require__(71).StringDecoder;this._readableState.decoder=new StringDecoder(enc);this._readableState.encoding=enc;return this};var MAX_HWM=8388608;function computeNewHighWaterMark(n){if(n>=MAX_HWM){n=MAX_HWM}else{n--;n|=n>>>1;n|=n>>>2;n|=n>>>4;n|=n>>>8;n|=n>>>16;n++}return n}function howMuchToRead(n,state){if(n<=0||state.length===0&&state.ended)return 0;if(state.objectMode)return 1;if(n!==n){if(state.flowing&&state.length)return state.buffer.head.data.length;else return state.length}if(n>state.highWaterMark)state.highWaterMark=computeNewHighWaterMark(n);if(n<=state.length)return n;if(!state.ended){state.needReadable=true;return 0}return state.length}Readable.prototype.read=function(n){debug("read",n);n=parseInt(n,10);var state=this._readableState;var nOrig=n;if(n!==0)state.emittedReadable=false;if(n===0&&state.needReadable&&(state.length>=state.highWaterMark||state.ended)){debug("read: emitReadable",state.length,state.ended);if(state.length===0&&state.ended)endReadable(this);else emitReadable(this);return null}n=howMuchToRead(n,state);if(n===0&&state.ended){if(state.length===0)endReadable(this);return null}var doRead=state.needReadable;debug("need readable",doRead);if(state.length===0||state.length-n<state.highWaterMark){doRead=true;debug("length less than watermark",doRead)}if(state.ended||state.reading){doRead=false;debug("reading or ended",doRead)}else if(doRead){debug("do read");state.reading=true;state.sync=true;if(state.length===0)state.needReadable=true;this._read(state.highWaterMark);state.sync=false;if(!state.reading)n=howMuchToRead(nOrig,state)}var ret;if(n>0)ret=fromList(n,state);else ret=null;if(ret===null){state.needReadable=true;n=0}else{state.length-=n}if(state.length===0){if(!state.ended)state.needReadable=true;if(nOrig!==n&&state.ended)endReadable(this)}if(ret!==null)this.emit("data",ret);return ret};function onEofChunk(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();if(chunk&&chunk.length){state.buffer.push(chunk);state.length+=state.objectMode?1:chunk.length}}state.ended=true;emitReadable(stream)}function emitReadable(stream){var state=stream._readableState;state.needReadable=false;if(!state.emittedReadable){debug("emitReadable",state.flowing);state.emittedReadable=true;if(state.sync)pna.nextTick(emitReadable_,stream);else emitReadable_(stream)}}function emitReadable_(stream){debug("emit readable");stream.emit("readable");flow(stream)}function maybeReadMore(stream,state){if(!state.readingMore){state.readingMore=true;pna.nextTick(maybeReadMore_,stream,state)}}function maybeReadMore_(stream,state){var len=state.length;while(!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark){debug("maybeReadMore read 0");stream.read(0);if(len===state.length)break;else len=state.length}state.readingMore=false}Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))};Readable.prototype.pipe=function(dest,pipeOpts){var src=this;var state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest);break}state.pipesCount+=1;debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var doEnd=(!pipeOpts||pipeOpts.end!==false)&&dest!==process.stdout&&dest!==process.stderr;var endFn=doEnd?onend:unpipe;if(state.endEmitted)pna.nextTick(endFn);else src.once("end",endFn);dest.on("unpipe",onunpipe);function onunpipe(readable,unpipeInfo){debug("onunpipe");if(readable===src){if(unpipeInfo&&unpipeInfo.hasUnpiped===false){unpipeInfo.hasUnpiped=true;cleanup()}}}function onend(){debug("onend");dest.end()}var ondrain=pipeOnDrain(src);dest.on("drain",ondrain);var cleanedUp=false;function cleanup(){debug("cleanup");dest.removeListener("close",onclose);dest.removeListener("finish",onfinish);dest.removeListener("drain",ondrain);dest.removeListener("error",onerror);dest.removeListener("unpipe",onunpipe);src.removeListener("end",onend);src.removeListener("end",unpipe);src.removeListener("data",ondata);cleanedUp=true;if(state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain))ondrain()}var increasedAwaitDrain=false;src.on("data",ondata);function ondata(chunk){debug("ondata");increasedAwaitDrain=false;var ret=dest.write(chunk);if(false===ret&&!increasedAwaitDrain){if((state.pipesCount===1&&state.pipes===dest||state.pipesCount>1&&indexOf(state.pipes,dest)!==-1)&&!cleanedUp){debug("false write response, pause",src._readableState.awaitDrain);src._readableState.awaitDrain++;increasedAwaitDrain=true}src.pause()}}function onerror(er){debug("onerror",er);unpipe();dest.removeListener("error",onerror);if(EElistenerCount(dest,"error")===0)dest.emit("error",er)}prependListener(dest,"error",onerror);function onclose(){dest.removeListener("finish",onfinish);unpipe()}dest.once("close",onclose);function onfinish(){debug("onfinish");dest.removeListener("close",onclose);unpipe()}dest.once("finish",onfinish);function unpipe(){debug("unpipe");src.unpipe(dest)}dest.emit("pipe",src);if(!state.flowing){debug("pipe resume");src.resume()}return dest};function pipeOnDrain(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain);if(state.awaitDrain)state.awaitDrain--;if(state.awaitDrain===0&&EElistenerCount(src,"data")){state.flowing=true;flow(src)}}}Readable.prototype.unpipe=function(dest){var state=this._readableState;var unpipeInfo={hasUnpiped:false};if(state.pipesCount===0)return this;if(state.pipesCount===1){if(dest&&dest!==state.pipes)return this;if(!dest)dest=state.pipes;state.pipes=null;state.pipesCount=0;state.flowing=false;if(dest)dest.emit("unpipe",this,unpipeInfo);return this}if(!dest){var dests=state.pipes;var len=state.pipesCount;state.pipes=null;state.pipesCount=0;state.flowing=false;for(var i=0;i<len;i++){dests[i].emit("unpipe",this,unpipeInfo)}return this}var index=indexOf(state.pipes,dest);if(index===-1)return this;state.pipes.splice(index,1);state.pipesCount-=1;if(state.pipesCount===1)state.pipes=state.pipes[0];dest.emit("unpipe",this,unpipeInfo);return this};Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if(ev==="data"){if(this._readableState.flowing!==false)this.resume()}else if(ev==="readable"){var state=this._readableState;if(!state.endEmitted&&!state.readableListening){state.readableListening=state.needReadable=true;state.emittedReadable=false;if(!state.reading){pna.nextTick(nReadingNextTick,this)}else if(state.length){emitReadable(this)}}}return res};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(self){debug("readable nexttick read 0");self.read(0)}Readable.prototype.resume=function(){var state=this._readableState;if(!state.flowing){debug("resume");state.flowing=true;resume(this,state)}return this};function resume(stream,state){if(!state.resumeScheduled){state.resumeScheduled=true;pna.nextTick(resume_,stream,state)}}function resume_(stream,state){if(!state.reading){debug("resume read 0");stream.read(0)}state.resumeScheduled=false;state.awaitDrain=0;stream.emit("resume");flow(stream);if(state.flowing&&!state.reading)stream.read(0)}Readable.prototype.pause=function(){debug("call pause flowing=%j",this._readableState.flowing);if(false!==this._readableState.flowing){debug("pause");this._readableState.flowing=false;this.emit("pause")}return this};function flow(stream){var state=stream._readableState;debug("flow",state.flowing);while(state.flowing&&stream.read()!==null){}}Readable.prototype.wrap=function(stream){var _this=this;var state=this._readableState;var paused=false;stream.on("end",function(){debug("wrapped end");if(state.decoder&&!state.ended){var chunk=state.decoder.end();if(chunk&&chunk.length)_this.push(chunk)}_this.push(null)});stream.on("data",function(chunk){debug("wrapped data");if(state.decoder)chunk=state.decoder.write(chunk);if(state.objectMode&&(chunk===null||chunk===undefined))return;else if(!state.objectMode&&(!chunk||!chunk.length))return;var ret=_this.push(chunk);if(!ret){paused=true;stream.pause()}});for(var i in stream){if(this[i]===undefined&&typeof stream[i]==="function"){this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i)}}for(var n=0;n<kProxyEvents.length;n++){stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]))}this._read=function(n){debug("wrapped _read",n);if(paused){paused=false;stream.resume()}};return this};Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function(){return this._readableState.highWaterMark}});Readable._fromList=fromList;function fromList(n,state){if(state.length===0)return null;var ret;if(state.objectMode)ret=state.buffer.shift();else if(!n||n>=state.length){if(state.decoder)ret=state.buffer.join("");else if(state.buffer.length===1)ret=state.buffer.head.data;else ret=state.buffer.concat(state.length);state.buffer.clear()}else{ret=fromListPartial(n,state.buffer,state.decoder)}return ret}function fromListPartial(n,list,hasStrings){var ret;if(n<list.head.data.length){ret=list.head.data.slice(0,n);list.head.data=list.head.data.slice(n)}else if(n===list.head.data.length){ret=list.shift()}else{ret=hasStrings?copyFromBufferString(n,list):copyFromBuffer(n,list)}return ret}function copyFromBufferString(n,list){var p=list.head;var c=1;var ret=p.data;n-=ret.length;while(p=p.next){var str=p.data;var nb=n>str.length?str.length:n;if(nb===str.length)ret+=str;else ret+=str.slice(0,n);n-=nb;if(n===0){if(nb===str.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null}else{list.head=p;p.data=str.slice(nb)}break}++c}list.length-=c;return ret}function copyFromBuffer(n,list){var ret=Buffer.allocUnsafe(n);var p=list.head;var c=1;p.data.copy(ret);n-=p.data.length;while(p=p.next){var buf=p.data;var nb=n>buf.length?buf.length:n;buf.copy(ret,ret.length-n,0,nb);n-=nb;if(n===0){if(nb===buf.length){++c;if(p.next)list.head=p.next;else list.head=list.tail=null}else{list.head=p;p.data=buf.slice(nb)}break}++c}list.length-=c;return ret}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw new Error('"endReadable()" called on non-empty stream');if(!state.endEmitted){state.ended=true;pna.nextTick(endReadableNT,state,stream)}}function endReadableNT(state,stream){if(!state.endEmitted&&state.length===0){state.endEmitted=true;stream.readable=false;stream.emit("end")}}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++){if(xs[i]===x)return i}return-1}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__(11);if(typeof process==="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0){module.exports={nextTick:nextTick}}else{module.exports=process}function nextTick(fn,arg1,arg2,arg3){if(typeof fn!=="function"){throw new TypeError('"callback" argument must be a function')}var len=arguments.length;var args,i;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function afterTickOne(){fn.call(null,arg1)});case 3:return process.nextTick(function afterTickTwo(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function afterTickThree(){fn.call(null,arg1,arg2,arg3)});default:args=new Array(len-1);i=0;while(i<args.length){args[i++]=arguments[i]}return process.nextTick(function afterTick(){fn.apply(null,args)})}}},module=>{var toString={}.toString;module.exports=Array.isArray||function(arr){return toString.call(arr)=="[object Array]"}},module=>{"use strict";var R=typeof Reflect==="object"?Reflect:null;var ReflectApply=R&&typeof R.apply==="function"?R.apply:function ReflectApply(target,receiver,args){return Function.prototype.apply.call(target,receiver,args)};var ReflectOwnKeys;if(R&&typeof R.ownKeys==="function"){ReflectOwnKeys=R.ownKeys}else if(Object.getOwnPropertySymbols){ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target))}}else{ReflectOwnKeys=function ReflectOwnKeys(target){return Object.getOwnPropertyNames(target)}}function ProcessEmitWarning(warning){if(console&&console.warn)console.warn(warning)}var NumberIsNaN=Number.isNaN||function NumberIsNaN(value){return value!==value};function EventEmitter(){EventEmitter.init.call(this)}module.exports=EventEmitter;module.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;function checkListener(listener){if(typeof listener!=="function"){throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof listener)}}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||NumberIsNaN(arg)){throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+arg+".")}defaultMaxListeners=arg}});EventEmitter.init=function(){if(this._events===undefined||this._events===Object.getPrototypeOf(this)._events){this._events=Object.create(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined};EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||NumberIsNaN(n)){throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".")}this._maxListeners=n;return this};function _getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function emit(type){var args=[];for(var i=1;i<arguments.length;i++)args.push(arguments[i]);var doError=type==="error";var events=this._events;if(events!==undefined)doError=doError&&events.error===undefined;else if(!doError)return false;if(doError){var er;if(args.length>0)er=args[0];if(er instanceof Error){throw er}var err=new Error("Unhandled error."+(er?" ("+er.message+")":""));err.context=er;throw err}var handler=events[type];if(handler===undefined)return false;if(typeof handler==="function"){ReflectApply(handler,this,args)}else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)ReflectApply(listeners[i],this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;checkListener(listener);events=target._events;if(events===undefined){events=target._events=Object.create(null);target._eventsCount=0}else{if(events.newListener!==undefined){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(existing===undefined){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else if(prepend){existing.unshift(listener)}else{existing.push(listener)}m=_getMaxListeners(target);if(m>0&&existing.length>m&&!existing.warned){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+" "+String(type)+" listeners "+"added. Use emitter.setMaxListeners() to "+"increase limit");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;ProcessEmitWarning(w)}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;if(arguments.length===0)return this.listener.call(this.target);return this.listener.apply(this.target,arguments)}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=onceWrapper.bind(state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){checkListener(listener);this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){checkListener(listener);this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;checkListener(listener);events=this._events;if(events===undefined)return this;list=events[type];if(list===undefined)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=Object.create(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else{spliceOne(list,position)}if(list.length===1)events[type]=list[0];if(events.removeListener!==undefined)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(events===undefined)return this;if(events.removeListener===undefined){if(arguments.length===0){this._events=Object.create(null);this._eventsCount=0}else if(events[type]!==undefined){if(--this._eventsCount===0)this._events=Object.create(null);else delete events[type]}return this}if(arguments.length===0){var keys=Object.keys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=Object.create(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners!==undefined){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(events===undefined)return[];var evlistener=events[type];if(evlistener===undefined)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events!==undefined){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener!==undefined){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function spliceOne(list,index){for(;index+1<list.length;index++)list[index]=list[index+1];list.pop()}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function once(emitter,name){return new Promise(function(resolve,reject){function errorListener(err){emitter.removeListener(name,resolver);reject(err)}function resolver(){if(typeof emitter.removeListener==="function"){emitter.removeListener("error",errorListener)}resolve([].slice.call(arguments))}eventTargetAgnosticAddListener(emitter,name,resolver,{once:true});if(name!=="error"){addErrorHandlerIfEventEmitter(emitter,errorListener,{once:true})}})}function addErrorHandlerIfEventEmitter(emitter,handler,flags){if(typeof emitter.on==="function"){eventTargetAgnosticAddListener(emitter,"error",handler,flags)}}function eventTargetAgnosticAddListener(emitter,name,listener,flags){if(typeof emitter.on==="function"){if(flags.once){emitter.once(name,listener)}else{emitter.on(name,listener)}}else if(typeof emitter.addEventListener==="function"){emitter.addEventListener(name,function wrapListener(arg){if(flags.once){emitter.removeEventListener(name,wrapListener)}listener(arg)})}else{throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof emitter)}}},(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__(57).EventEmitter},(module,exports,__webpack_require__)=>{var buffer=__webpack_require__(60);var Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src){dst[key]=src[key]}}if(Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow){module.exports=buffer}else{copyProps(buffer,exports);exports.Buffer=SafeBuffer}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}copyProps(Buffer,SafeBuffer);SafeBuffer.from=function(arg,encodingOrOffset,length){if(typeof arg==="number"){throw new TypeError("Argument must not be a number")}return Buffer(arg,encodingOrOffset,length)};SafeBuffer.alloc=function(size,fill,encoding){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}var buf=Buffer(size);if(fill!==undefined){if(typeof encoding==="string"){buf.fill(fill,encoding)}else{buf.fill(fill)}}else{buf.fill(0)}return buf};SafeBuffer.allocUnsafe=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return Buffer(size)};SafeBuffer.allocUnsafeSlow=function(size){if(typeof size!=="number"){throw new TypeError("Argument must be a number")}return buffer.SlowBuffer(size)}},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";const base64=__webpack_require__(61);const ieee754=__webpack_require__(62);const customInspectSymbol=typeof Symbol==="function"&&typeof Symbol["for"]==="function"?Symbol["for"]("nodejs.util.inspect.custom"):null;exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;const K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{const arr=new Uint8Array(1);const proto={foo:function(){return 42}};Object.setPrototypeOf(proto,Uint8Array.prototype);Object.setPrototypeOf(arr,proto);return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}const buf=new Uint8Array(length);Object.setPrototypeOf(buf,Buffer.prototype);return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayView(value)}if(value==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof SharedArrayBuffer!=="undefined"&&(isInstance(value,SharedArrayBuffer)||value&&isInstance(value.buffer,SharedArrayBuffer))){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}const valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}const b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}const length=byteLength(string,encoding)|0;let buf=createBuffer(length);const actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){const length=array.length<0?0:checked(array.length)|0;const buf=createBuffer(length);for(let i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayView(arrayView){if(isInstance(arrayView,Uint8Array)){const copy=new Uint8Array(arrayView);return fromArrayBuffer(copy.buffer,copy.byteOffset,copy.byteLength)}return fromArrayLike(arrayView)}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}let buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}Object.setPrototypeOf(buf,Buffer.prototype);return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){const len=checked(obj.length)|0;const buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;let x=a.length;let y=b.length;for(let i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}let i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}const buffer=Buffer.allocUnsafe(length);let pos=0;for(i=0;i<list.length;++i){let buf=list[i];if(isInstance(buf,Uint8Array)){if(pos+buf.length>buffer.length){if(!Buffer.isBuffer(buf))buf=Buffer.from(buf);buf.copy(buffer,pos)}else{Uint8Array.prototype.set.call(buffer,buf,pos)}}else if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}else{buf.copy(buffer,pos)}pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}const len=string.length;const mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;let loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){let loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){const i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){const len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(let i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){const len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(let i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){const len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(let i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){const length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){let str="";const max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};if(customInspectSymbol){Buffer.prototype[customInspectSymbol]=Buffer.prototype.inspect}Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;let x=thisEnd-thisStart;let y=end-start;const len=Math.min(x,y);const thisCopy=this.slice(thisStart,thisEnd);const targetCopy=target.slice(start,end);for(let i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){let indexSize=1;let arrLength=arr.length;let valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}let i;if(dir){let foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){let found=true;for(let j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;const remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}const strLen=string.length;if(length>strLen/2){length=strLen/2}let i;for(i=0;i<length;++i){const parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}const remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";let loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":case"latin1":case"binary":return asciiWrite(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);const res=[];let i=start;while(i<end){const firstByte=buf[i];let codePoint=null;let bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){let secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){const len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}let res="";let i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){let ret="";end=Math.min(buf.length,end);for(let i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){let ret="";end=Math.min(buf.length,end);for(let i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){const len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;let out="";for(let i=start;i<end;++i){out+=hexSliceLookupTable[buf[i]]}return out}function utf16leSlice(buf,start,end){const bytes=buf.slice(start,end);let res="";for(let i=0;i<bytes.length-1;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){const len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;const newBuf=this.subarray(start,end);Object.setPrototypeOf(newBuf,Buffer.prototype);return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);let val=this[offset];let mul=1;let i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}let val=this[offset+--byteLength];let mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readBigUInt64LE=defineBigIntMethod(function readBigUInt64LE(offset){offset=offset>>>0;validateNumber(offset,"offset");const first=this[offset];const last=this[offset+7];if(first===undefined||last===undefined){boundsError(offset,this.length-8)}const lo=first+this[++offset]*2**8+this[++offset]*2**16+this[++offset]*2**24;const hi=this[++offset]+this[++offset]*2**8+this[++offset]*2**16+last*2**24;return BigInt(lo)+(BigInt(hi)<<BigInt(32))});Buffer.prototype.readBigUInt64BE=defineBigIntMethod(function readBigUInt64BE(offset){offset=offset>>>0;validateNumber(offset,"offset");const first=this[offset];const last=this[offset+7];if(first===undefined||last===undefined){boundsError(offset,this.length-8)}const hi=first*2**24+this[++offset]*2**16+this[++offset]*2**8+this[++offset];const lo=this[++offset]*2**24+this[++offset]*2**16+this[++offset]*2**8+last;return(BigInt(hi)<<BigInt(32))+BigInt(lo)});Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);let val=this[offset];let mul=1;let i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);let i=byteLength;let mul=1;let val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);const val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);const val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readBigInt64LE=defineBigIntMethod(function readBigInt64LE(offset){offset=offset>>>0;validateNumber(offset,"offset");const first=this[offset];const last=this[offset+7];if(first===undefined||last===undefined){boundsError(offset,this.length-8)}const val=this[offset+4]+this[offset+5]*2**8+this[offset+6]*2**16+(last<<24);return(BigInt(val)<<BigInt(32))+BigInt(first+this[++offset]*2**8+this[++offset]*2**16+this[++offset]*2**24)});Buffer.prototype.readBigInt64BE=defineBigIntMethod(function readBigInt64BE(offset){offset=offset>>>0;validateNumber(offset,"offset");const first=this[offset];const last=this[offset+7];if(first===undefined||last===undefined){boundsError(offset,this.length-8)}const val=(first<<24)+this[++offset]*2**16+this[++offset]*2**8+this[++offset];return(BigInt(val)<<BigInt(32))+BigInt(this[++offset]*2**24+this[++offset]*2**16+this[++offset]*2**8+last)});Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){const maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}let mul=1;let i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){const maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}let i=byteLength-1;let mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function wrtBigUInt64LE(buf,value,offset,min,max){checkIntBI(value,min,max,buf,offset,7);let lo=Number(value&BigInt(4294967295));buf[offset++]=lo;lo=lo>>8;buf[offset++]=lo;lo=lo>>8;buf[offset++]=lo;lo=lo>>8;buf[offset++]=lo;let hi=Number(value>>BigInt(32)&BigInt(4294967295));buf[offset++]=hi;hi=hi>>8;buf[offset++]=hi;hi=hi>>8;buf[offset++]=hi;hi=hi>>8;buf[offset++]=hi;return offset}function wrtBigUInt64BE(buf,value,offset,min,max){checkIntBI(value,min,max,buf,offset,7);let lo=Number(value&BigInt(4294967295));buf[offset+7]=lo;lo=lo>>8;buf[offset+6]=lo;lo=lo>>8;buf[offset+5]=lo;lo=lo>>8;buf[offset+4]=lo;let hi=Number(value>>BigInt(32)&BigInt(4294967295));buf[offset+3]=hi;hi=hi>>8;buf[offset+2]=hi;hi=hi>>8;buf[offset+1]=hi;hi=hi>>8;buf[offset]=hi;return offset+8}Buffer.prototype.writeBigUInt64LE=defineBigIntMethod(function writeBigUInt64LE(value,offset=0){return wrtBigUInt64LE(this,value,offset,BigInt(0),BigInt("0xffffffffffffffff"))});Buffer.prototype.writeBigUInt64BE=defineBigIntMethod(function writeBigUInt64BE(value,offset=0){return wrtBigUInt64BE(this,value,offset,BigInt(0),BigInt("0xffffffffffffffff"))});Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){const limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}let i=0;let mul=1;let sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){const limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}let i=byteLength-1;let mul=1;let sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeBigInt64LE=defineBigIntMethod(function writeBigInt64LE(value,offset=0){return wrtBigUInt64LE(this,value,offset,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Buffer.prototype.writeBigInt64BE=defineBigIntMethod(function writeBigInt64BE(value,offset=0){return wrtBigUInt64BE(this,value,offset,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,3.4028234663852886e38,-3.4028234663852886e38)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,1.7976931348623157e308,-1.7976931348623157e308)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}const len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){const code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}else if(typeof val==="boolean"){val=Number(val)}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;let i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{const bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);const len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};const errors={};function E(sym,getMessage,Base){errors[sym]=class NodeError extends Base{constructor(){super();Object.defineProperty(this,"message",{value:getMessage.apply(this,arguments),writable:true,configurable:true});this.name=`${this.name} [${sym}]`;this.stack;delete this.name}get code(){return sym}set code(value){Object.defineProperty(this,"code",{configurable:true,enumerable:true,value:value,writable:true})}toString(){return`${this.name} [${sym}]: ${this.message}`}}}E("ERR_BUFFER_OUT_OF_BOUNDS",function(name){if(name){return`${name} is outside of buffer bounds`}return"Attempt to access memory outside buffer bounds"},RangeError);E("ERR_INVALID_ARG_TYPE",function(name,actual){return`The "${name}" argument must be of type number. Received type ${typeof actual}`},TypeError);E("ERR_OUT_OF_RANGE",function(str,range,input){let msg=`The value of "${str}" is out of range.`;let received=input;if(Number.isInteger(input)&&Math.abs(input)>2**32){received=addNumericalSeparator(String(input))}else if(typeof input==="bigint"){received=String(input);if(input>BigInt(2)**BigInt(32)||input<-(BigInt(2)**BigInt(32))){received=addNumericalSeparator(received)}received+="n"}msg+=` It must be ${range}. Received ${received}`;return msg},RangeError);function addNumericalSeparator(val){let res="";let i=val.length;const start=val[0]==="-"?1:0;for(;i>=start+4;i-=3){res=`_${val.slice(i-3,i)}${res}`}return`${val.slice(0,i)}${res}`}function checkBounds(buf,offset,byteLength){validateNumber(offset,"offset");if(buf[offset]===undefined||buf[offset+byteLength]===undefined){boundsError(offset,buf.length-(byteLength+1))}}function checkIntBI(value,min,max,buf,offset,byteLength){if(value>max||value<min){const n=typeof min==="bigint"?"n":"";let range;if(byteLength>3){if(min===0||min===BigInt(0)){range=`>= 0${n} and < 2${n} ** ${(byteLength+1)*8}${n}`}else{range=`>= -(2${n} ** ${(byteLength+1)*8-1}${n}) and < 2 ** `+`${(byteLength+1)*8-1}${n}`}}else{range=`>= ${min}${n} and <= ${max}${n}`}throw new errors.ERR_OUT_OF_RANGE("value",range,value)}checkBounds(buf,offset,byteLength)}function validateNumber(value,name){if(typeof value!=="number"){throw new errors.ERR_INVALID_ARG_TYPE(name,"number",value)}}function boundsError(value,length,type){if(Math.floor(value)!==value){validateNumber(value,type);throw new errors.ERR_OUT_OF_RANGE(type||"offset","an integer",value)}if(length<0){throw new errors.ERR_BUFFER_OUT_OF_BOUNDS}throw new errors.ERR_OUT_OF_RANGE(type||"offset",`>= ${type?1:0} and <= ${length}`,value)}const INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function utf8ToBytes(string,units){units=units||Infinity;let codePoint;const length=string.length;let leadSurrogate=null;const bytes=[];for(let i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){const byteArray=[];for(let i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){let c,hi,lo;const byteArray=[];for(let i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){let i;for(i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}const hexSliceLookupTable=function(){const alphabet="0123456789abcdef";const table=new Array(256);for(let i=0;i<16;++i){const i16=i*16;for(let j=0;j<16;++j){table[i16+j]=alphabet[i]+alphabet[j]}}return table}();function defineBigIntMethod(fn){return typeof BigInt==="undefined"?BufferBigIntNotDefined:fn}function BufferBigIntNotDefined(){throw new Error("BigInt not supported")}},(__unused_webpack_module,exports)=>{"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},(__unused_webpack_module,exports)=>{exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},(__unused_webpack_module,exports,__webpack_require__)=>{function isArray(arg){if(Array.isArray){return Array.isArray(arg)}return objectToString(arg)==="[object Array]"}exports.isArray=isArray;function isBoolean(arg){return typeof arg==="boolean"}exports.isBoolean=isBoolean;function isNull(arg){return arg===null}exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null}exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==="number"}exports.isNumber=isNumber;function isString(arg){return typeof arg==="string"}exports.isString=isString;function isSymbol(arg){return typeof arg==="symbol"}exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0}exports.isUndefined=isUndefined;function isRegExp(re){return objectToString(re)==="[object RegExp]"}exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==="object"&&arg!==null}exports.isObject=isObject;function isDate(d){return objectToString(d)==="[object Date]"}exports.isDate=isDate;function isError(e){return objectToString(e)==="[object Error]"||e instanceof Error}exports.isError=isError;function isFunction(arg){return typeof arg==="function"}exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==="boolean"||typeof arg==="number"||typeof arg==="string"||typeof arg==="symbol"||typeof arg==="undefined"}exports.isPrimitive=isPrimitive;exports.isBuffer=__webpack_require__(60).Buffer.isBuffer;function objectToString(o){return Object.prototype.toString.call(o)}},()=>{},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Buffer=__webpack_require__(59).Buffer;var util=__webpack_require__(66);function copyBuffer(src,target,offset){src.copy(target,offset)}module.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}BufferList.prototype.push=function push(v){var entry={data:v,next:null};if(this.length>0)this.tail.next=entry;else this.head=entry;this.tail=entry;++this.length};BufferList.prototype.unshift=function unshift(v){var entry={data:v,next:this.head};if(this.length===0)this.tail=entry;this.head=entry;++this.length};BufferList.prototype.shift=function shift(){if(this.length===0)return;var ret=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return ret};BufferList.prototype.clear=function clear(){this.head=this.tail=null;this.length=0};BufferList.prototype.join=function join(s){if(this.length===0)return"";var p=this.head;var ret=""+p.data;while(p=p.next){ret+=s+p.data}return ret};BufferList.prototype.concat=function concat(n){if(this.length===0)return Buffer.alloc(0);if(this.length===1)return this.head.data;var ret=Buffer.allocUnsafe(n>>>0);var p=this.head;var i=0;while(p){copyBuffer(p.data,ret,i);i+=p.data.length;p=p.next}return ret};return BufferList}();if(util&&util.inspect&&util.inspect.custom){module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj}}},()=>{},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var pna=__webpack_require__(55);function destroy(err,cb){var _this=this;var readableDestroyed=this._readableState&&this._readableState.destroyed;var writableDestroyed=this._writableState&&this._writableState.destroyed;if(readableDestroyed||writableDestroyed){if(cb){cb(err)}else if(err&&(!this._writableState||!this._writableState.errorEmitted)){pna.nextTick(emitErrorNT,this,err)}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(err||null,function(err){if(!cb&&err){pna.nextTick(emitErrorNT,_this,err);if(_this._writableState){_this._writableState.errorEmitted=true}}else if(cb){cb(err)}});return this}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:destroy,undestroy:undestroy}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var pna=__webpack_require__(55);var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){keys.push(key)}return keys};module.exports=Duplex;var util=Object.create(__webpack_require__(63));util.inherits=__webpack_require__(31);var Readable=__webpack_require__(54);var Writable=__webpack_require__(69);util.inherits(Duplex,Readable);{var keys=objectKeys(Writable.prototype);for(var v=0;v<keys.length;v++){var method=keys[v];if(!Duplex.prototype[method])Duplex.prototype[method]=Writable.prototype[method]}}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options);Writable.call(this,options);if(options&&options.readable===false)this.readable=false;if(options&&options.writable===false)this.writable=false;this.allowHalfOpen=true;if(options&&options.allowHalfOpen===false)this.allowHalfOpen=false;this.once("end",onend)}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function(){return this._writableState.highWaterMark}});function onend(){if(this.allowHalfOpen||this._writableState.ended)return;pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function(value){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=value;this._writableState.destroyed=value}});Duplex.prototype._destroy=function(err,cb){this.push(null);this.end();pna.nextTick(cb,err)}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var process=__webpack_require__(11);var pna=__webpack_require__(55);module.exports=Writable;function WriteReq(chunk,encoding,cb){this.chunk=chunk;this.encoding=encoding;this.callback=cb;this.next=null}function CorkedRequest(state){var _this=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(_this,state)}}var asyncWrite=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:pna.nextTick;var Duplex;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__(63));util.inherits=__webpack_require__(31);var internalUtil={deprecate:__webpack_require__(70)};var Stream=__webpack_require__(58);var Buffer=__webpack_require__(59).Buffer;var OurUint8Array=__webpack_require__.g.Uint8Array||function(){};function _uint8ArrayToBuffer(chunk){return Buffer.from(chunk)}function _isUint8Array(obj){return Buffer.isBuffer(obj)||obj instanceof OurUint8Array}var destroyImpl=__webpack_require__(67);util.inherits(Writable,Stream);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(68);options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode;if(isDuplex)this.objectMode=this.objectMode||!!options.writableObjectMode;var hwm=options.highWaterMark;var writableHwm=options.writableHighWaterMark;var defaultHwm=this.objectMode?16:16*1024;if(hwm||hwm===0)this.highWaterMark=hwm;else if(isDuplex&&(writableHwm||writableHwm===0))this.highWaterMark=writableHwm;else this.highWaterMark=defaultHwm;this.highWaterMark=Math.floor(this.highWaterMark);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var noDecode=options.decodeStrings===false;this.decodeStrings=!noDecode;this.defaultEncoding=options.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(er){onwrite(stream,er)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var current=this.bufferedRequest;var out=[];while(current){out.push(current);current=current.next}return out};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(_){}})();var realHasInstance;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){realHasInstance=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){if(realHasInstance.call(this,object))return true;if(this!==Writable)return false;return object&&object._writableState instanceof WritableState}})}else{realHasInstance=function(object){return object instanceof this}}function Writable(options){Duplex=Duplex||__webpack_require__(68);if(!realHasInstance.call(Writable,this)&&!(this instanceof Duplex)){return new Writable(options)}this._writableState=new WritableState(options,this);this.writable=true;if(options){if(typeof options.write==="function")this._write=options.write;if(typeof options.writev==="function")this._writev=options.writev;if(typeof options.destroy==="function")this._destroy=options.destroy;if(typeof options.final==="function")this._final=options.final}Stream.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(stream,cb){var er=new Error("write after end");stream.emit("error",er);pna.nextTick(cb,er)}function validChunk(stream,state,chunk,cb){var valid=true;var er=false;if(chunk===null){er=new TypeError("May not write null values to stream")}else if(typeof chunk!=="string"&&chunk!==undefined&&!state.objectMode){er=new TypeError("Invalid non-string/buffer chunk")}if(er){stream.emit("error",er);pna.nextTick(cb,er);valid=false}return valid}Writable.prototype.write=function(chunk,encoding,cb){var state=this._writableState;var ret=false;var isBuf=!state.objectMode&&_isUint8Array(chunk);if(isBuf&&!Buffer.isBuffer(chunk)){chunk=_uint8ArrayToBuffer(chunk)}if(typeof encoding==="function"){cb=encoding;encoding=null}if(isBuf)encoding="buffer";else if(!encoding)encoding=state.defaultEncoding;if(typeof cb!=="function")cb=nop;if(state.ended)writeAfterEnd(this,cb);else if(isBuf||validChunk(this,state,chunk,cb)){state.pendingcb++;ret=writeOrBuffer(this,state,isBuf,chunk,encoding,cb)}return ret};Writable.prototype.cork=function(){var state=this._writableState;state.corked++};Writable.prototype.uncork=function(){var state=this._writableState;if(state.corked){state.corked--;if(!state.writing&&!state.corked&&!state.finished&&!state.bufferProcessing&&state.bufferedRequest)clearBuffer(this,state)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(encoding){if(typeof encoding==="string")encoding=encoding.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+encoding);this._writableState.defaultEncoding=encoding;return this};function decodeChunk(state,chunk,encoding){if(!state.objectMode&&state.decodeStrings!==false&&typeof chunk==="string"){chunk=Buffer.from(chunk,encoding)}return chunk}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function(){return this._writableState.highWaterMark}});function writeOrBuffer(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=decodeChunk(state,chunk,encoding);if(chunk!==newChunk){isBuf=true;encoding="buffer";chunk=newChunk}}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(!ret)state.needDrain=true;if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null};if(last){last.next=state.lastBufferedRequest}else{state.bufferedRequest=state.lastBufferedRequest}state.bufferedRequestCount+=1}else{doWrite(stream,state,false,len,chunk,encoding,cb)}return ret}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len;state.writecb=cb;state.writing=true;state.sync=true;if(writev)stream._writev(chunk,state.onwrite);else stream._write(chunk,encoding,state.onwrite);state.sync=false}function onwriteError(stream,state,sync,er,cb){--state.pendingcb;if(sync){pna.nextTick(cb,er);pna.nextTick(finishMaybe,stream,state);stream._writableState.errorEmitted=true;stream.emit("error",er)}else{cb(er);stream._writableState.errorEmitted=true;stream.emit("error",er);finishMaybe(stream,state)}}function onwriteStateUpdate(state){state.writing=false;state.writecb=null;state.length-=state.writelen;state.writelen=0}function onwrite(stream,er){var state=stream._writableState;var sync=state.sync;var cb=state.writecb;onwriteStateUpdate(state);if(er)onwriteError(stream,state,sync,er,cb);else{var finished=needFinish(state);if(!finished&&!state.corked&&!state.bufferProcessing&&state.bufferedRequest){clearBuffer(stream,state)}if(sync){asyncWrite(afterWrite,stream,state,finished,cb)}else{afterWrite(stream,state,finished,cb)}}}function afterWrite(stream,state,finished,cb){if(!finished)onwriteDrain(stream,state);state.pendingcb--;cb();finishMaybe(stream,state)}function onwriteDrain(stream,state){if(state.length===0&&state.needDrain){state.needDrain=false;stream.emit("drain")}}function clearBuffer(stream,state){state.bufferProcessing=true;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount;var buffer=new Array(l);var holder=state.corkedRequestsFree;holder.entry=entry;var count=0;var allBuffers=true;while(entry){buffer[count]=entry;if(!entry.isBuf)allBuffers=false;entry=entry.next;count+=1}buffer.allBuffers=allBuffers;doWrite(stream,state,true,state.length,buffer,"",holder.finish);state.pendingcb++;state.lastBufferedRequest=null;if(holder.next){state.corkedRequestsFree=holder.next;holder.next=null}else{state.corkedRequestsFree=new CorkedRequest(state)}state.bufferedRequestCount=0}else{while(entry){var chunk=entry.chunk;var encoding=entry.encoding;var cb=entry.callback;var len=state.objectMode?1:chunk.length;doWrite(stream,state,false,len,chunk,encoding,cb);entry=entry.next;state.bufferedRequestCount--;if(state.writing){break}}if(entry===null)state.lastBufferedRequest=null}state.bufferedRequest=entry;state.bufferProcessing=false}Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;if(typeof chunk==="function"){cb=chunk;chunk=null;encoding=null}else if(typeof encoding==="function"){cb=encoding;encoding=null}if(chunk!==null&&chunk!==undefined)this.write(chunk,encoding);if(state.corked){state.corked=1;this.uncork()}if(!state.ending&&!state.finished)endWritable(this,state,cb)};function needFinish(state){return state.ending&&state.length===0&&state.bufferedRequest===null&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--;if(err){stream.emit("error",err)}state.prefinished=true;stream.emit("prefinish");finishMaybe(stream,state)})}function prefinish(stream,state){if(!state.prefinished&&!state.finalCalled){if(typeof stream._final==="function"){state.pendingcb++;state.finalCalled=true;pna.nextTick(callFinal,stream,state)}else{state.prefinished=true;stream.emit("prefinish")}}}function finishMaybe(stream,state){var need=needFinish(state);if(need){prefinish(stream,state);if(state.pendingcb===0){state.finished=true;stream.emit("finish")}}return need}function endWritable(stream,state,cb){state.ending=true;finishMaybe(stream,state);if(cb){if(state.finished)pna.nextTick(cb);else stream.once("finish",cb)}state.ended=true;stream.writable=false}function onCorkedFinish(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;while(entry){var cb=entry.callback;state.pendingcb--;cb(err);entry=entry.next}if(state.corkedRequestsFree){state.corkedRequestsFree.next=corkReq}else{state.corkedRequestsFree=corkReq}}Object.defineProperty(Writable.prototype,"destroyed",{get:function(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function(value){if(!this._writableState){return}this._writableState.destroyed=value}});Writable.prototype.destroy=destroyImpl.destroy;Writable.prototype._undestroy=destroyImpl.undestroy;Writable.prototype._destroy=function(err,cb){this.end();cb(err)}},(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=deprecate;function deprecate(fn,msg){if(config("noDeprecation")){return fn}var warned=false;function deprecated(){if(!warned){if(config("throwDeprecation")){throw new Error(msg)}else if(config("traceDeprecation")){console.trace(msg)}else{console.warn(msg)}warned=true}return fn.apply(this,arguments)}return deprecated}function config(name){try{if(!__webpack_require__.g.localStorage)return false}catch(_){return false}var val=__webpack_require__.g.localStorage[name];if(null==val)return false;return String(val).toLowerCase()==="true"}},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";var Buffer=__webpack_require__(59).Buffer;var isEncoding=Buffer.isEncoding||function(encoding){encoding=""+encoding;switch(encoding&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(enc){if(!enc)return"utf8";var retried;while(true){switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase();retried=true}}}function normalizeEncoding(enc){var nenc=_normalizeEncoding(enc);if(typeof nenc!=="string"&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}exports.StringDecoder=StringDecoder;function StringDecoder(encoding){this.encoding=normalizeEncoding(encoding);var nb;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;nb=4;break;case"utf8":this.fillLast=utf8FillLast;nb=4;break;case"base64":this.text=base64Text;this.end=base64End;nb=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=Buffer.allocUnsafe(nb)}StringDecoder.prototype.write=function(buf){if(buf.length===0)return"";var r;var i;if(this.lastNeed){r=this.fillLast(buf);if(r===undefined)return"";i=this.lastNeed;this.lastNeed=0}else{i=0}if(i<buf.length)return r?r+this.text(buf,i):this.text(buf,i);return r||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length){buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length);this.lastNeed-=buf.length};function utf8CheckByte(byte){if(byte<=127)return 0;else if(byte>>5===6)return 2;else if(byte>>4===14)return 3;else if(byte>>3===30)return 4;return byte>>6===2?-1:-2}function utf8CheckIncomplete(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-1;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0)self.lastNeed=nb-2;return nb}if(--j<i||nb===-2)return 0;nb=utf8CheckByte(buf[j]);if(nb>=0){if(nb>0){if(nb===2)nb=0;else self.lastNeed=nb-3}return nb}return 0}function utf8CheckExtraBytes(self,buf,p){if((buf[0]&192)!==128){self.lastNeed=0;return"�"}if(self.lastNeed>1&&buf.length>1){if((buf[1]&192)!==128){self.lastNeed=1;return"�"}if(self.lastNeed>2&&buf.length>2){if((buf[2]&192)!==128){self.lastNeed=2;return"�"}}}}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed;var r=utf8CheckExtraBytes(this,buf,p);if(r!==undefined)return r;if(this.lastNeed<=buf.length){buf.copy(this.lastChar,p,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}buf.copy(this.lastChar,p,0,buf.length);this.lastNeed-=buf.length}function utf8Text(buf,i){var total=utf8CheckIncomplete(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);buf.copy(this.lastChar,0,end);return buf.toString("utf8",i,end)}function utf8End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+"�";return r}function utf16Text(buf,i){if((buf.length-i)%2===0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1];return r.slice(0,-1)}}return r}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=buf[buf.length-1];return buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;if(n===0)return buf.toString("base64",i);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=buf[buf.length-1]}else{this.lastChar[0]=buf[buf.length-2];this.lastChar[1]=buf[buf.length-1]}return buf.toString("base64",i,buf.length-n)}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed)return r+this.lastChar.toString("base64",0,3-this.lastNeed);return r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=Transform;var Duplex=__webpack_require__(68);var util=Object.create(__webpack_require__(63));util.inherits=__webpack_require__(31);util.inherits(Transform,Duplex);function afterTransform(er,data){var ts=this._transformState;ts.transforming=false;var cb=ts.writecb;if(!cb){return this.emit("error",new Error("write callback called multiple times"))}ts.writechunk=null;ts.writecb=null;if(data!=null)this.push(data);cb(er);var rs=this._readableState;rs.reading=false;if(rs.needReadable||rs.length<rs.highWaterMark){this._read(rs.highWaterMark)}}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(options){if(typeof options.transform==="function")this._transform=options.transform;if(typeof options.flush==="function")this._flush=options.flush}this.on("prefinish",prefinish)}function prefinish(){var _this=this;if(typeof this._flush==="function"){this._flush(function(er,data){done(_this,er,data)})}else{done(this,null,null)}}Transform.prototype.push=function(chunk,encoding){this._transformState.needTransform=false;return Duplex.prototype.push.call(this,chunk,encoding)};Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")};Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;ts.writecb=cb;ts.writechunk=chunk;ts.writeencoding=encoding;if(!ts.transforming){var rs=this._readableState;if(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)this._read(rs.highWaterMark)}};Transform.prototype._read=function(n){var ts=this._transformState;if(ts.writechunk!==null&&ts.writecb&&!ts.transforming){ts.transforming=true;this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)}else{ts.needTransform=true}};Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2);_this2.emit("close")})};function done(stream,er,data){if(er)return stream.emit("error",er);if(data!=null)stream.push(data);if(stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";module.exports=PassThrough;var Transform=__webpack_require__(72);var util=Object.create(__webpack_require__(63));util.inherits=__webpack_require__(31);util.inherits(PassThrough,Transform);function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},(module,__unused_webpack_exports,__webpack_require__)=>{var Buffer=__webpack_require__(60)["Buffer"];var toString=Object.prototype.toString;var isModern=typeof Buffer!=="undefined"&&typeof Buffer.alloc==="function"&&typeof Buffer.allocUnsafe==="function"&&typeof Buffer.from==="function";function isArrayBuffer(input){return toString.call(input).slice(8,-1)==="ArrayBuffer"}function fromArrayBuffer(obj,byteOffset,length){byteOffset>>>=0;var maxLength=obj.byteLength-byteOffset;if(maxLength<0){throw new RangeError("'offset' is out of bounds")}if(length===undefined){length=maxLength}else{length>>>=0;if(length>maxLength){throw new RangeError("'length' is out of bounds")}}return isModern?Buffer.from(obj.slice(byteOffset,byteOffset+length)):new Buffer(new Uint8Array(obj.slice(byteOffset,byteOffset+length)))}function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError('"encoding" must be a valid string encoding')}return isModern?Buffer.from(string,encoding):new Buffer(string,encoding)}function bufferFrom(value,encodingOrOffset,length){if(typeof value==="number"){throw new TypeError('"value" argument must not be a number')}if(isArrayBuffer(value)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="string"){return fromString(value,encodingOrOffset)}return isModern?Buffer.from(value):new Buffer(value)}module.exports=bufferFrom},(__unused_webpack_module,exports)=>{var undefined=void 0;var MAX_ARRAY_LENGTH=1e5;var ECMAScript=function(){var opts=Object.prototype.toString,ophop=Object.prototype.hasOwnProperty;return{Class:function(v){return opts.call(v).replace(/^\[object *|\]$/g,"")},HasProperty:function(o,p){return p in o},HasOwnProperty:function(o,p){return ophop.call(o,p)},IsCallable:function(o){return typeof o==="function"},ToInt32:function(v){return v>>0},ToUint32:function(v){return v>>>0}}}();var LN2=Math.LN2,abs=Math.abs,floor=Math.floor,log=Math.log,min=Math.min,pow=Math.pow,round=Math.round;function configureProperties(obj){if(getOwnPropNames&&defineProp){var props=getOwnPropNames(obj),i;for(i=0;i<props.length;i+=1){defineProp(obj,props[i],{value:obj[props[i]],writable:false,enumerable:false,configurable:false})}}}var defineProp;if(Object.defineProperty&&function(){try{Object.defineProperty({},"x",{});return true}catch(e){return false}}()){defineProp=Object.defineProperty}else{defineProp=function(o,p,desc){if(!o===Object(o))throw new TypeError("Object.defineProperty called on non-object");if(ECMAScript.HasProperty(desc,"get")&&Object.prototype.__defineGetter__){Object.prototype.__defineGetter__.call(o,p,desc.get)}if(ECMAScript.HasProperty(desc,"set")&&Object.prototype.__defineSetter__){Object.prototype.__defineSetter__.call(o,p,desc.set)}if(ECMAScript.HasProperty(desc,"value")){o[p]=desc.value}return o}}var getOwnPropNames=Object.getOwnPropertyNames||function(o){if(o!==Object(o))throw new TypeError("Object.getOwnPropertyNames called on non-object");var props=[],p;for(p in o){if(ECMAScript.HasOwnProperty(o,p)){props.push(p)}}return props};function makeArrayAccessors(obj){if(!defineProp){return}if(obj.length>MAX_ARRAY_LENGTH)throw new RangeError("Array too large for polyfill");function makeArrayAccessor(index){defineProp(obj,index,{get:function(){return obj._getter(index)},set:function(v){obj._setter(index,v)},enumerable:true,configurable:false})}var i;for(i=0;i<obj.length;i+=1){makeArrayAccessor(i)}}function as_signed(value,bits){var s=32-bits;return value<<s>>s}function as_unsigned(value,bits){var s=32-bits;return value<<s>>>s}function packI8(n){return[n&255]}function unpackI8(bytes){return as_signed(bytes[0],8)}function packU8(n){return[n&255]}function unpackU8(bytes){return as_unsigned(bytes[0],8)}function packU8Clamped(n){n=round(Number(n));return[n<0?0:n>255?255:n&255]}function packI16(n){return[n>>8&255,n&255]}function unpackI16(bytes){return as_signed(bytes[0]<<8|bytes[1],16)}function packU16(n){return[n>>8&255,n&255]}function unpackU16(bytes){return as_unsigned(bytes[0]<<8|bytes[1],16)}function packI32(n){return[n>>24&255,n>>16&255,n>>8&255,n&255]}function unpackI32(bytes){return as_signed(bytes[0]<<24|bytes[1]<<16|bytes[2]<<8|bytes[3],32)}function packU32(n){return[n>>24&255,n>>16&255,n>>8&255,n&255]}function unpackU32(bytes){return as_unsigned(bytes[0]<<24|bytes[1]<<16|bytes[2]<<8|bytes[3],32)}function packIEEE754(v,ebits,fbits){var bias=(1<<ebits-1)-1,s,e,f,ln,i,bits,str,bytes;function roundToEven(n){var w=floor(n),f=n-w;if(f<.5)return w;if(f>.5)return w+1;return w%2?w+1:w}if(v!==v){e=(1<<ebits)-1;f=pow(2,fbits-1);s=0}else if(v===Infinity||v===-Infinity){e=(1<<ebits)-1;f=0;s=v<0?1:0}else if(v===0){e=0;f=0;s=1/v===-Infinity?1:0}else{s=v<0;v=abs(v);if(v>=pow(2,1-bias)){e=min(floor(log(v)/LN2),1023);f=roundToEven(v/pow(2,e)*pow(2,fbits));if(f/pow(2,fbits)>=2){e=e+1;f=1}if(e>bias){e=(1<<ebits)-1;f=0}else{e=e+bias;f=f-pow(2,fbits)}}else{e=0;f=roundToEven(v/pow(2,1-bias-fbits))}}bits=[];for(i=fbits;i;i-=1){bits.push(f%2?1:0);f=floor(f/2)}for(i=ebits;i;i-=1){bits.push(e%2?1:0);e=floor(e/2)}bits.push(s?1:0);bits.reverse();str=bits.join("");bytes=[];while(str.length){bytes.push(parseInt(str.substring(0,8),2));str=str.substring(8)}return bytes}function unpackIEEE754(bytes,ebits,fbits){var bits=[],i,j,b,str,bias,s,e,f;for(i=bytes.length;i;i-=1){b=bytes[i-1];for(j=8;j;j-=1){bits.push(b%2?1:0);b=b>>1}}bits.reverse();str=bits.join("");bias=(1<<ebits-1)-1;s=parseInt(str.substring(0,1),2)?-1:1;e=parseInt(str.substring(1,1+ebits),2);f=parseInt(str.substring(1+ebits),2);if(e===(1<<ebits)-1){return f!==0?NaN:s*Infinity}else if(e>0){return s*pow(2,e-bias)*(1+f/pow(2,fbits))}else if(f!==0){return s*pow(2,-(bias-1))*(f/pow(2,fbits))}else{return s<0?-0:0}}function unpackF64(b){return unpackIEEE754(b,11,52)}function packF64(v){return packIEEE754(v,11,52)}function unpackF32(b){return unpackIEEE754(b,8,23)}function packF32(v){return packIEEE754(v,8,23)}(function(){var ArrayBuffer=function ArrayBuffer(length){length=ECMAScript.ToInt32(length);if(length<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=length;this._bytes=[];this._bytes.length=length;var i;for(i=0;i<this.byteLength;i+=1){this._bytes[i]=0}configureProperties(this)};exports.ArrayBuffer=exports.ArrayBuffer||ArrayBuffer;var ArrayBufferView=function ArrayBufferView(){};function makeConstructor(bytesPerElement,pack,unpack){var ctor;ctor=function(buffer,byteOffset,length){var array,sequence,i,s;if(!arguments.length||typeof arguments[0]==="number"){this.length=ECMAScript.ToInt32(arguments[0]);if(length<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0}else if(typeof arguments[0]==="object"&&arguments[0].constructor===ctor){array=arguments[0];this.length=array.length;this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0;for(i=0;i<this.length;i+=1){this._setter(i,array._getter(i))}}else if(typeof arguments[0]==="object"&&!(arguments[0]instanceof ArrayBuffer||ECMAScript.Class(arguments[0])==="ArrayBuffer")){sequence=arguments[0];this.length=ECMAScript.ToUint32(sequence.length);this.byteLength=this.length*this.BYTES_PER_ELEMENT;this.buffer=new ArrayBuffer(this.byteLength);this.byteOffset=0;for(i=0;i<this.length;i+=1){s=sequence[i];this._setter(i,Number(s))}}else if(typeof arguments[0]==="object"&&(arguments[0]instanceof ArrayBuffer||ECMAScript.Class(arguments[0])==="ArrayBuffer")){this.buffer=buffer;this.byteOffset=ECMAScript.ToUint32(byteOffset);if(this.byteOffset>this.buffer.byteLength){throw new RangeError("byteOffset out of range")}if(this.byteOffset%this.BYTES_PER_ELEMENT){throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.")}if(arguments.length<3){this.byteLength=this.buffer.byteLength-this.byteOffset;if(this.byteLength%this.BYTES_PER_ELEMENT){throw new RangeError("length of buffer minus byteOffset not a multiple of the element size")}this.length=this.byteLength/this.BYTES_PER_ELEMENT}else{this.length=ECMAScript.ToUint32(length);this.byteLength=this.length*this.BYTES_PER_ELEMENT}if(this.byteOffset+this.byteLength>this.buffer.byteLength){throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}}else{throw new TypeError("Unexpected argument type(s)")}this.constructor=ctor;configureProperties(this);makeArrayAccessors(this)};ctor.prototype=new ArrayBufferView;ctor.prototype.BYTES_PER_ELEMENT=bytesPerElement;ctor.prototype._pack=pack;ctor.prototype._unpack=unpack;ctor.BYTES_PER_ELEMENT=bytesPerElement;ctor.prototype._getter=function(index){if(arguments.length<1)throw new SyntaxError("Not enough arguments");index=ECMAScript.ToUint32(index);if(index>=this.length){return undefined}var bytes=[],i,o;for(i=0,o=this.byteOffset+index*this.BYTES_PER_ELEMENT;i<this.BYTES_PER_ELEMENT;i+=1,o+=1){bytes.push(this.buffer._bytes[o])}return this._unpack(bytes)};ctor.prototype.get=ctor.prototype._getter;ctor.prototype._setter=function(index,value){if(arguments.length<2)throw new SyntaxError("Not enough arguments");index=ECMAScript.ToUint32(index);if(index>=this.length){return undefined}var bytes=this._pack(value),i,o;for(i=0,o=this.byteOffset+index*this.BYTES_PER_ELEMENT;i<this.BYTES_PER_ELEMENT;i+=1,o+=1){this.buffer._bytes[o]=bytes[i]}};ctor.prototype.set=function(index,value){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var array,sequence,offset,len,i,s,d,byteOffset,byteLength,tmp;if(typeof arguments[0]==="object"&&arguments[0].constructor===this.constructor){array=arguments[0];offset=ECMAScript.ToUint32(arguments[1]);if(offset+array.length>this.length){throw new RangeError("Offset plus length of array is out of range")}byteOffset=this.byteOffset+offset*this.BYTES_PER_ELEMENT;byteLength=array.length*this.BYTES_PER_ELEMENT;if(array.buffer===this.buffer){tmp=[];for(i=0,s=array.byteOffset;i<byteLength;i+=1,s+=1){tmp[i]=array.buffer._bytes[s]}for(i=0,d=byteOffset;i<byteLength;i+=1,d+=1){this.buffer._bytes[d]=tmp[i]}}else{for(i=0,s=array.byteOffset,d=byteOffset;i<byteLength;i+=1,s+=1,d+=1){this.buffer._bytes[d]=array.buffer._bytes[s]}}}else if(typeof arguments[0]==="object"&&typeof arguments[0].length!=="undefined"){sequence=arguments[0];len=ECMAScript.ToUint32(sequence.length);offset=ECMAScript.ToUint32(arguments[1]);if(offset+len>this.length){throw new RangeError("Offset plus length of array is out of range")}for(i=0;i<len;i+=1){s=sequence[i];this._setter(offset+i,Number(s))}}else{throw new TypeError("Unexpected argument type(s)")}};ctor.prototype.subarray=function(start,end){function clamp(v,min,max){return v<min?min:v>max?max:v}start=ECMAScript.ToInt32(start);end=ECMAScript.ToInt32(end);if(arguments.length<1){start=0}if(arguments.length<2){end=this.length}if(start<0){start=this.length+start}if(end<0){end=this.length+end}start=clamp(start,0,this.length);end=clamp(end,0,this.length);var len=end-start;if(len<0){len=0}return new this.constructor(this.buffer,this.byteOffset+start*this.BYTES_PER_ELEMENT,len)};return ctor}var Int8Array=makeConstructor(1,packI8,unpackI8);var Uint8Array=makeConstructor(1,packU8,unpackU8);var Uint8ClampedArray=makeConstructor(1,packU8Clamped,unpackU8);var Int16Array=makeConstructor(2,packI16,unpackI16);var Uint16Array=makeConstructor(2,packU16,unpackU16);var Int32Array=makeConstructor(4,packI32,unpackI32);var Uint32Array=makeConstructor(4,packU32,unpackU32);var Float32Array=makeConstructor(4,packF32,unpackF32);var Float64Array=makeConstructor(8,packF64,unpackF64);exports.Int8Array=exports.Int8Array||Int8Array;exports.Uint8Array=exports.Uint8Array||Uint8Array;exports.Uint8ClampedArray=exports.Uint8ClampedArray||Uint8ClampedArray;exports.Int16Array=exports.Int16Array||Int16Array;exports.Uint16Array=exports.Uint16Array||Uint16Array;exports.Int32Array=exports.Int32Array||Int32Array;exports.Uint32Array=exports.Uint32Array||Uint32Array;exports.Float32Array=exports.Float32Array||Float32Array;exports.Float64Array=exports.Float64Array||Float64Array})();(function(){function r(array,index){return ECMAScript.IsCallable(array.get)?array.get(index):array[index]}var IS_BIG_ENDIAN=function(){var u16array=new exports.Uint16Array([4660]),u8array=new exports.Uint8Array(u16array.buffer);return r(u8array,0)===18}();var DataView=function DataView(buffer,byteOffset,byteLength){if(arguments.length===0){buffer=new exports.ArrayBuffer(0)}else if(!(buffer instanceof exports.ArrayBuffer||ECMAScript.Class(buffer)==="ArrayBuffer")){throw new TypeError("TypeError")}this.buffer=buffer||new exports.ArrayBuffer(0);this.byteOffset=ECMAScript.ToUint32(byteOffset);if(this.byteOffset>this.buffer.byteLength){throw new RangeError("byteOffset out of range")}if(arguments.length<3){this.byteLength=this.buffer.byteLength-this.byteOffset}else{this.byteLength=ECMAScript.ToUint32(byteLength)}if(this.byteOffset+this.byteLength>this.buffer.byteLength){throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}configureProperties(this)};function makeGetter(arrayType){return function(byteOffset,littleEndian){byteOffset=ECMAScript.ToUint32(byteOffset);if(byteOffset+arrayType.BYTES_PER_ELEMENT>this.byteLength){throw new RangeError("Array index out of range")}byteOffset+=this.byteOffset;var uint8Array=new exports.Uint8Array(this.buffer,byteOffset,arrayType.BYTES_PER_ELEMENT),bytes=[],i;for(i=0;i<arrayType.BYTES_PER_ELEMENT;i+=1){bytes.push(r(uint8Array,i))}if(Boolean(littleEndian)===Boolean(IS_BIG_ENDIAN)){bytes.reverse()}return r(new arrayType(new exports.Uint8Array(bytes).buffer),0)}}DataView.prototype.getUint8=makeGetter(exports.Uint8Array);DataView.prototype.getInt8=makeGetter(exports.Int8Array);DataView.prototype.getUint16=makeGetter(exports.Uint16Array);DataView.prototype.getInt16=makeGetter(exports.Int16Array);DataView.prototype.getUint32=makeGetter(exports.Uint32Array);DataView.prototype.getInt32=makeGetter(exports.Int32Array);DataView.prototype.getFloat32=makeGetter(exports.Float32Array);DataView.prototype.getFloat64=makeGetter(exports.Float64Array);function makeSetter(arrayType){return function(byteOffset,value,littleEndian){byteOffset=ECMAScript.ToUint32(byteOffset);if(byteOffset+arrayType.BYTES_PER_ELEMENT>this.byteLength){throw new RangeError("Array index out of range")}var typeArray=new arrayType([value]),byteArray=new exports.Uint8Array(typeArray.buffer),bytes=[],i,byteView;for(i=0;i<arrayType.BYTES_PER_ELEMENT;i+=1){bytes.push(r(byteArray,i))}if(Boolean(littleEndian)===Boolean(IS_BIG_ENDIAN)){bytes.reverse()}byteView=new exports.Uint8Array(this.buffer,byteOffset,arrayType.BYTES_PER_ELEMENT);byteView.set(bytes)}}DataView.prototype.setUint8=makeSetter(exports.Uint8Array);DataView.prototype.setInt8=makeSetter(exports.Int8Array);DataView.prototype.setUint16=makeSetter(exports.Uint16Array);DataView.prototype.setInt16=makeSetter(exports.Int16Array);DataView.prototype.setUint32=makeSetter(exports.Uint32Array);DataView.prototype.setInt32=makeSetter(exports.Int32Array);DataView.prototype.setFloat32=makeSetter(exports.Float32Array);DataView.prototype.setFloat64=makeSetter(exports.Float64Array);exports.DataView=exports.DataView||DataView})()},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var util=__webpack_require__(10);var DomParser=__webpack_require__(77);var URIResolver=__webpack_require__(86);var MicrodataProcessor=function(){this.blankCounter=0;this.vocabularies=[{namespaceURI:"http://schema.org/",isMember:function(uri){return uri.indexOf(this.namespaceURI)===0},getProperty:function(name){return this.namespaceURI+name}}]};MicrodataProcessor.prototype=new URIResolver;MicrodataProcessor.prototype.constructor=MicrodataProcessor;MicrodataProcessor.typeNode=rdf.createNamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type");MicrodataProcessor.integerNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#integer");MicrodataProcessor.doubleNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#double");MicrodataProcessor.timeNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#time");MicrodataProcessor.dateTimeNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#dateTime");MicrodataProcessor.durationNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#duration");MicrodataProcessor.absoluteURIRE=/[\w\_\-]+:\S+/;MicrodataProcessor.prototype.resolve=function(uri){return uri};MicrodataProcessor.trim=function(str){str=str||"";return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};MicrodataProcessor.tokenize=function(str){return MicrodataProcessor.trim(str).split(/\s+/).reduce(function(tokens,token){if(token){tokens.push(token)}return tokens},[])};MicrodataProcessor.prototype.getVocabulary=function(uri){for(var i=0;i<this.vocabularies.length;i++){if(this.vocabularies[i].isMember(uri)){return this.vocabularies[i]}}var makeVocab=function(ns){return{namespaceURI:ns,getProperty:function(name){return this.namespaceURI+name}}};var hash=uri.indexOf("#");if(hash>=0){return makeVocab(uri.substring(0,hash+1))}var lastSlash=uri.lastIndexOf("/");if(lastSlash>=0){return makeVocab(uri.substring(0,lastSlash+1))}return makeVocab(uri)};MicrodataProcessor.prototype.getProperty=function(value,vocabulary){if(MicrodataProcessor.absoluteURIRE.exec(value)){return value}return vocabulary?vocabulary.getProperty(value):base.resolve("#"+value)};MicrodataProcessor.valueMappings={link:function(node,base){return rdf.createNamedNode(base.resolve(node.getAttribute("href")))},media:function(node,base){return rdf.createNamedNode(base.resolve(node.getAttribute("src")))},meta:function(node){var value=node.getAttribute("content"),lang=node.getAttribute("lang");return rdf.createLiteral(value,lang?lang:null)},number:function(node){var value=node.getAttribute("value");if(value===parseInt(value).toString()){return rdf.createLiteral(value,null,MicrodataProcessor.integerNode)}else if(value===parseFloat(value).toString()){return rdf.createLiteral(value,null,MicrodataProcessor.doubleNode)}else{return rdf.createLiteral(value)}},object:function(node,base){return rdf.createNamedNode(base.resolve(node.getAttribute("data")))},time:function(node){var value=node.getAttribute("datetime"),lang=node.getAttribute("lang");if(value.length===9){return rdf.createLiteral(value,null,MicrodataProcessor.timeNode)}else if(value.length===20){return rdf.createLiteral(value,null,MicrodataProcessor.dateTimeNode)}else if(value.substr(0,1)==="P"){return rdf.createLiteral(value,null,MicrodataProcessor.durationNode)}else{return rdf.createLiteral(value,lang?lang:null)}}};MicrodataProcessor.valueMappings.a=MicrodataProcessor.valueMappings.link;MicrodataProcessor.valueMappings.area=MicrodataProcessor.valueMappings.a;MicrodataProcessor.valueMappings.audio=MicrodataProcessor.valueMappings.media;MicrodataProcessor.valueMappings.data=MicrodataProcessor.valueMappings.number;MicrodataProcessor.valueMappings.embed=MicrodataProcessor.valueMappings.media;MicrodataProcessor.valueMappings.iframe=MicrodataProcessor.valueMappings.media;MicrodataProcessor.valueMappings.img=MicrodataProcessor.valueMappings.media;MicrodataProcessor.valueMappings.meter=MicrodataProcessor.valueMappings.number;MicrodataProcessor.valueMappings.source=MicrodataProcessor.valueMappings.media;MicrodataProcessor.valueMappings.track=MicrodataProcessor.valueMappings.media;MicrodataProcessor.valueMappings.video=MicrodataProcessor.valueMappings.media;MicrodataProcessor.prototype.getValue=function(node,base){var converter=MicrodataProcessor.valueMappings[node.localName];if(converter){return converter(node,base)}return rdf.createLiteral(node.textContent)};MicrodataProcessor.prototype.process=function(node,callback,base){var self=this;if(node.nodeType===node.DOCUMENT_NODE){node=node.documentElement}base=self.parseURI(base);var createContext=function(memory,subject,type,vocabulary){return{memory:memory?memory:{},subject:subject,type:type,vocabulary:vocabulary}};var processChildren=function(current,type){var context,itemProp,itemScope,predicate,subject,value;for(var child=current.item.firstChild;child;child=child.nextSibling){if(child.nodeType!==child.ELEMENT_NODE){continue}itemProp=child.getAttribute("itemprop");itemScope=child.hasAttribute("itemscope");context=createContext(current.context.memory,current.context.subject,type,current.context.vocabulary);subject=generateTriple({item:child,context:context});if(itemProp){MicrodataProcessor.tokenize(itemProp).forEach(function(token){if(MicrodataProcessor.absoluteURIRE.test(token)){predicate=rdf.createNamedNode(token)}else if(context.vocabulary){predicate=rdf.createNamedNode(context.vocabulary+token)}else{predicate=rdf.createNamedNode(base.resolve("#"+token))}value=self.getValue(child,base);if(itemScope){value=subject}callback(rdf.createTriple(current.context.subject,predicate,value))})}}};var processSubject=function(current){var itemType=current.item.getAttribute("itemtype"),type,vocab;MicrodataProcessor.tokenize(itemType).forEach(function(token){if(!MicrodataProcessor.absoluteURIRE.test(token)){return}if(!type){type=token}callback(rdf.createTriple(current.context.subject,MicrodataProcessor.typeNode,rdf.createNamedNode(base.resolve(token))))});if(!type){type=current.context.type}if(type){vocab=self.getVocabulary(type);vocab=vocab?vocab.namespaceURI:null}if(vocab){current.context.vocabulary=vocab}processChildren(current,type)};var generateTriple=function(current){var id=current.item.getAttribute("id"),itemId=current.item.getAttribute("itemid"),itemRef=current.item.getAttribute("itemref"),itemScope=current.item.hasAttribute("itemscope");if(id in current.context.memory){current.context.memory[id].forEach(function(context){processSubject({item:current.item,context:context})})}else{if(itemScope){if(itemId){current.context.subject=rdf.createNamedNode(base.resolve(itemId))}else{current.context.subject=rdf.createBlankNode()}MicrodataProcessor.tokenize(itemRef).forEach(function(token){if(!(token in current.context.memory)){current.context.memory[token]=[]}current.context.memory[token].push(current.context)})}processSubject(current)}return current.context.subject};generateTriple({item:node,context:createContext(null,null,null,null)})};var MicrodataParser=function(){DomParser.call(this,rdf);var self=this;var processor=new MicrodataProcessor;this.process=function(data,callback,base,filter,done){return new Promise(function(resolve,reject){base=base||"http://localhost/";filter=filter||function(){return true};done=done||function(){};try{processor.process(self.parseHtmlDom(data,base),function(triple){if(filter(triple)){callback(triple)}},base)}catch(error){done(error);reject(error)}done();resolve()})}};util.inherits(MicrodataParser,DomParser);var instance=new MicrodataParser;for(var property in instance){MicrodataParser[property]=instance[property]}module.exports=MicrodataParser},(module,__unused_webpack_exports,__webpack_require__)=>{var process=__webpack_require__(11);if(process.browser){module.exports=__webpack_require__(78)}else{module.exports=__webpack_require__(79)}},(module,__unused_webpack_exports,__webpack_require__)=>{var util=__webpack_require__(10);var AbstractParser=__webpack_require__(51);function DomParser(rdf){AbstractParser.call(this,rdf)}util.inherits(DomParser,AbstractParser);DomParser.prototype.parseHtmlDom=function(toparse,base){var parser=new DOMParser;return parser.parseFromString(toparse,"text/html")};DomParser.prototype.parseXmlDom=function(toparse,base){var parser=new DOMParser;return parser.parseFromString(toparse,"application/xml")};module.exports=DomParser},(module,__unused_webpack_exports,__webpack_require__)=>{var util=__webpack_require__(10);var xmldom=__webpack_require__(80);var AbstractParser=__webpack_require__(51);function DomParser(rdf){AbstractParser.call(this,rdf)}util.inherits(DomParser,AbstractParser);DomParser.prototype.parseHtmlDom=function(toparse,base){var parser=new xmldom.DOMParser;parser.options.errorHandler={warning:function(){},error:function(){},fatalError:function(){}};return parser.parseFromString(toparse,"text/html")};DomParser.prototype.parseXmlDom=function(toparse,base){var parser=new xmldom.DOMParser;parser.options.errorHandler={warning:function(){},error:function(){},fatalError:function(){}};return parser.parseFromString(toparse,"application/xml")};module.exports=DomParser},(__unused_webpack_module,exports,__webpack_require__)=>{var dom=__webpack_require__(81);exports.DOMImplementation=dom.DOMImplementation;exports.XMLSerializer=dom.XMLSerializer;exports.DOMParser=__webpack_require__(83).DOMParser},(__unused_webpack_module,exports,__webpack_require__)=>{var conventions=__webpack_require__(82);var NAMESPACE=conventions.NAMESPACE;function notEmptyString(input){return input!==""}function splitOnASCIIWhitespace(input){return input?input.split(/[\t\n\f\r ]+/).filter(notEmptyString):[]}function orderedSetReducer(current,element){if(!current.hasOwnProperty(element)){current[element]=true}return current}function toOrderedSet(input){if(!input)return[];var list=splitOnASCIIWhitespace(input);return Object.keys(list.reduce(orderedSetReducer,{}))}function arrayIncludes(list){return function(element){return list&&list.indexOf(element)!==-1}}function copy(src,dest){for(var p in src){dest[p]=src[p]}}function _extends(Class,Super){var pt=Class.prototype;if(!(pt instanceof Super)){function t(){}t.prototype=Super.prototype;t=new t;copy(pt,t);Class.prototype=pt=t}if(pt.constructor!=Class){if(typeof Class!="function"){console.error("unknown Class:"+Class)}pt.constructor=Class}}var NodeType={};var ELEMENT_NODE=NodeType.ELEMENT_NODE=1;var ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2;var TEXT_NODE=NodeType.TEXT_NODE=3;var CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4;var ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5;var ENTITY_NODE=NodeType.ENTITY_NODE=6;var PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7;var COMMENT_NODE=NodeType.COMMENT_NODE=8;var DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9;var DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10;var DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11;var NOTATION_NODE=NodeType.NOTATION_NODE=12;var ExceptionCode={};var ExceptionMessage={};var INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1);var DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2);var HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3);var WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4);var INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5);var NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6);var NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7);var NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8);var NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9);var INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10);var INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11);var SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12);var INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13);var NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14);var INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(code,message){if(message instanceof Error){var error=message}else{error=this;Error.call(this,ExceptionMessage[code]);this.message=ExceptionMessage[code];if(Error.captureStackTrace)Error.captureStackTrace(this,DOMException)}error.code=code;if(message)this.message=this.message+": "+message;return error}DOMException.prototype=Error.prototype;copy(ExceptionCode,DOMException);function NodeList(){}NodeList.prototype={length:0,item:function(index){return this[index]||null},toString:function(isHTML,nodeFilter){for(var buf=[],i=0;i<this.length;i++){serializeToString(this[i],buf,isHTML,nodeFilter)}return buf.join("")}};function LiveNodeList(node,refresh){this._node=node;this._refresh=refresh;_updateLiveList(this)}function _updateLiveList(list){var inc=list._node._inc||list._node.ownerDocument._inc;if(list._inc!=inc){var ls=list._refresh(list._node);__set__(list,"length",ls.length);copy(ls,list);list._inc=inc}}LiveNodeList.prototype.item=function(i){_updateLiveList(this);return this[i]};_extends(LiveNodeList,NodeList);function NamedNodeMap(){}function _findNodeIndex(list,node){var i=list.length;while(i--){if(list[i]===node){return i}}}function _addNamedNode(el,list,newAttr,oldAttr){if(oldAttr){list[_findNodeIndex(list,oldAttr)]=newAttr}else{list[list.length++]=newAttr}if(el){newAttr.ownerElement=el;var doc=el.ownerDocument;if(doc){oldAttr&&_onRemoveAttribute(doc,el,oldAttr);_onAddAttribute(doc,el,newAttr)}}}function _removeNamedNode(el,list,attr){var i=_findNodeIndex(list,attr);if(i>=0){var lastIndex=list.length-1;while(i<lastIndex){list[i]=list[++i]}list.length=lastIndex;if(el){var doc=el.ownerDocument;if(doc){_onRemoveAttribute(doc,el,attr);attr.ownerElement=null}}}else{throw DOMException(NOT_FOUND_ERR,new Error(el.tagName+"@"+attr))}}NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(key){var i=this.length;while(i--){var attr=this[i];if(attr.nodeName==key){return attr}}},setNamedItem:function(attr){var el=attr.ownerElement;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR)}var oldAttr=this.getNamedItem(attr.nodeName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},setNamedItemNS:function(attr){var el=attr.ownerElement,oldAttr;if(el&&el!=this._ownerElement){throw new DOMException(INUSE_ATTRIBUTE_ERR)}oldAttr=this.getNamedItemNS(attr.namespaceURI,attr.localName);_addNamedNode(this._ownerElement,this,attr,oldAttr);return oldAttr},removeNamedItem:function(key){var attr=this.getNamedItem(key);_removeNamedNode(this._ownerElement,this,attr);return attr},removeNamedItemNS:function(namespaceURI,localName){var attr=this.getNamedItemNS(namespaceURI,localName);_removeNamedNode(this._ownerElement,this,attr);return attr},getNamedItemNS:function(namespaceURI,localName){var i=this.length;while(i--){var node=this[i];if(node.localName==localName&&node.namespaceURI==namespaceURI){return node}}return null}};function DOMImplementation(){}DOMImplementation.prototype={hasFeature:function(feature,version){return true},createDocument:function(namespaceURI,qualifiedName,doctype){var doc=new Document;doc.implementation=this;doc.childNodes=new NodeList;doc.doctype=doctype||null;if(doctype){doc.appendChild(doctype)}if(qualifiedName){var root=doc.createElementNS(namespaceURI,qualifiedName);doc.appendChild(root)}return doc},createDocumentType:function(qualifiedName,publicId,systemId){var node=new DocumentType;node.name=qualifiedName;node.nodeName=qualifiedName;node.publicId=publicId||"";node.systemId=systemId||"";return node}};function Node(){}Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(newChild,refChild){return _insertBefore(this,newChild,refChild)},replaceChild:function(newChild,oldChild){this.insertBefore(newChild,oldChild);if(oldChild){this.removeChild(oldChild)}},removeChild:function(oldChild){return _removeChild(this,oldChild)},appendChild:function(newChild){return this.insertBefore(newChild,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(deep){return cloneNode(this.ownerDocument||this,this,deep)},normalize:function(){var child=this.firstChild;while(child){var next=child.nextSibling;if(next&&next.nodeType==TEXT_NODE&&child.nodeType==TEXT_NODE){this.removeChild(next);child.appendData(next.data)}else{child.normalize();child=next}}},isSupported:function(feature,version){return this.ownerDocument.implementation.hasFeature(feature,version)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(namespaceURI){var el=this;while(el){var map=el._nsMap;if(map){for(var n in map){if(map[n]==namespaceURI){return n}}}el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},lookupNamespaceURI:function(prefix){var el=this;while(el){var map=el._nsMap;if(map){if(prefix in map){return map[prefix]}}el=el.nodeType==ATTRIBUTE_NODE?el.ownerDocument:el.parentNode}return null},isDefaultNamespace:function(namespaceURI){var prefix=this.lookupPrefix(namespaceURI);return prefix==null}};function _xmlEncoder(c){return c=="<"&&"&lt;"||c==">"&&"&gt;"||c=="&"&&"&amp;"||c=='"'&&"&quot;"||"&#"+c.charCodeAt()+";"}copy(NodeType,Node);copy(NodeType,Node.prototype);function _visitNode(node,callback){if(callback(node)){return true}if(node=node.firstChild){do{if(_visitNode(node,callback)){return true}}while(node=node.nextSibling)}}function Document(){}function _onAddAttribute(doc,el,newAttr){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns===NAMESPACE.XMLNS){el._nsMap[newAttr.prefix?newAttr.localName:""]=newAttr.value}}function _onRemoveAttribute(doc,el,newAttr,remove){doc&&doc._inc++;var ns=newAttr.namespaceURI;if(ns===NAMESPACE.XMLNS){delete el._nsMap[newAttr.prefix?newAttr.localName:""]}}function _onUpdateChild(doc,el,newChild){if(doc&&doc._inc){doc._inc++;var cs=el.childNodes;if(newChild){cs[cs.length++]=newChild}else{var child=el.firstChild;var i=0;while(child){cs[i++]=child;child=child.nextSibling}cs.length=i;delete cs[cs.length]}}}function _removeChild(parentNode,child){var previous=child.previousSibling;var next=child.nextSibling;if(previous){previous.nextSibling=next}else{parentNode.firstChild=next}if(next){next.previousSibling=previous}else{parentNode.lastChild=previous}child.parentNode=null;child.previousSibling=null;child.nextSibling=null;_onUpdateChild(parentNode.ownerDocument,parentNode);return child}function _insertBefore(parentNode,newChild,nextChild){var cp=newChild.parentNode;if(cp){cp.removeChild(newChild)}if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){var newFirst=newChild.firstChild;if(newFirst==null){return newChild}var newLast=newChild.lastChild}else{newFirst=newLast=newChild}var pre=nextChild?nextChild.previousSibling:parentNode.lastChild;newFirst.previousSibling=pre;newLast.nextSibling=nextChild;if(pre){pre.nextSibling=newFirst}else{parentNode.firstChild=newFirst}if(nextChild==null){parentNode.lastChild=newLast}else{nextChild.previousSibling=newLast}do{newFirst.parentNode=parentNode}while(newFirst!==newLast&&(newFirst=newFirst.nextSibling));_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){newChild.firstChild=newChild.lastChild=null}return newChild}function _appendSingleChild(parentNode,newChild){if(newChild.parentNode){newChild.parentNode.removeChild(newChild)}newChild.parentNode=parentNode;newChild.previousSibling=parentNode.lastChild;newChild.nextSibling=null;if(newChild.previousSibling){newChild.previousSibling.nextSibling=newChild}else{parentNode.firstChild=newChild}parentNode.lastChild=newChild;_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);return newChild}Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(newChild,refChild){if(newChild.nodeType==DOCUMENT_FRAGMENT_NODE){var child=newChild.firstChild;while(child){var next=child.nextSibling;this.insertBefore(child,refChild);child=next}return newChild}if(this.documentElement==null&&newChild.nodeType==ELEMENT_NODE){this.documentElement=newChild}return _insertBefore(this,newChild,refChild),newChild.ownerDocument=this,newChild},removeChild:function(oldChild){if(this.documentElement==oldChild){this.documentElement=null}return _removeChild(this,oldChild)},importNode:function(importedNode,deep){return importNode(this,importedNode,deep)},getElementById:function(id){var rtv=null;_visitNode(this.documentElement,function(node){if(node.nodeType==ELEMENT_NODE){if(node.getAttribute("id")==id){rtv=node;return true}}});return rtv},getElementsByClassName:function(classNames){var classNamesSet=toOrderedSet(classNames);return new LiveNodeList(this,function(base){var ls=[];if(classNamesSet.length>0){_visitNode(base.documentElement,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE){var nodeClassNames=node.getAttribute("class");if(nodeClassNames){var matches=classNames===nodeClassNames;if(!matches){var nodeClassNamesSet=toOrderedSet(nodeClassNames);matches=classNamesSet.every(arrayIncludes(nodeClassNamesSet))}if(matches){ls.push(node)}}}})}return ls})},createElement:function(tagName){var node=new Element;node.ownerDocument=this;node.nodeName=tagName;node.tagName=tagName;node.localName=tagName;node.childNodes=new NodeList;var attrs=node.attributes=new NamedNodeMap;attrs._ownerElement=node;return node},createDocumentFragment:function(){var node=new DocumentFragment;node.ownerDocument=this;node.childNodes=new NodeList;return node},createTextNode:function(data){var node=new Text;node.ownerDocument=this;node.appendData(data);return node},createComment:function(data){var node=new Comment;node.ownerDocument=this;node.appendData(data);return node},createCDATASection:function(data){var node=new CDATASection;node.ownerDocument=this;node.appendData(data);return node},createProcessingInstruction:function(target,data){var node=new ProcessingInstruction;node.ownerDocument=this;node.tagName=node.target=target;node.nodeValue=node.data=data;return node},createAttribute:function(name){var node=new Attr;node.ownerDocument=this;node.name=name;node.nodeName=name;node.localName=name;node.specified=true;return node},createEntityReference:function(name){var node=new EntityReference;node.ownerDocument=this;node.nodeName=name;return node},createElementNS:function(namespaceURI,qualifiedName){var node=new Element;var pl=qualifiedName.split(":");var attrs=node.attributes=new NamedNodeMap;node.childNodes=new NodeList;node.ownerDocument=this;node.nodeName=qualifiedName;node.tagName=qualifiedName;node.namespaceURI=namespaceURI;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else{node.localName=qualifiedName}attrs._ownerElement=node;return node},createAttributeNS:function(namespaceURI,qualifiedName){var node=new Attr;var pl=qualifiedName.split(":");node.ownerDocument=this;node.nodeName=qualifiedName;node.name=qualifiedName;node.namespaceURI=namespaceURI;node.specified=true;if(pl.length==2){node.prefix=pl[0];node.localName=pl[1]}else{node.localName=qualifiedName}return node}};_extends(Document,Node);function Element(){this._nsMap={}}Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(name){return this.getAttributeNode(name)!=null},getAttribute:function(name){var attr=this.getAttributeNode(name);return attr&&attr.value||""},getAttributeNode:function(name){return this.attributes.getNamedItem(name)},setAttribute:function(name,value){var attr=this.ownerDocument.createAttribute(name);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},removeAttribute:function(name){var attr=this.getAttributeNode(name);attr&&this.removeAttributeNode(attr)},appendChild:function(newChild){if(newChild.nodeType===DOCUMENT_FRAGMENT_NODE){return this.insertBefore(newChild,null)}else{return _appendSingleChild(this,newChild)}},setAttributeNode:function(newAttr){return this.attributes.setNamedItem(newAttr)},setAttributeNodeNS:function(newAttr){return this.attributes.setNamedItemNS(newAttr)},removeAttributeNode:function(oldAttr){return this.attributes.removeNamedItem(oldAttr.nodeName)},removeAttributeNS:function(namespaceURI,localName){var old=this.getAttributeNodeNS(namespaceURI,localName);old&&this.removeAttributeNode(old)},hasAttributeNS:function(namespaceURI,localName){return this.getAttributeNodeNS(namespaceURI,localName)!=null},getAttributeNS:function(namespaceURI,localName){var attr=this.getAttributeNodeNS(namespaceURI,localName);return attr&&attr.value||""},setAttributeNS:function(namespaceURI,qualifiedName,value){var attr=this.ownerDocument.createAttributeNS(namespaceURI,qualifiedName);attr.value=attr.nodeValue=""+value;this.setAttributeNode(attr)},getAttributeNodeNS:function(namespaceURI,localName){return this.attributes.getNamedItemNS(namespaceURI,localName)},getElementsByTagName:function(tagName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType==ELEMENT_NODE&&(tagName==="*"||node.tagName==tagName)){ls.push(node)}});return ls})},getElementsByTagNameNS:function(namespaceURI,localName){return new LiveNodeList(this,function(base){var ls=[];_visitNode(base,function(node){if(node!==base&&node.nodeType===ELEMENT_NODE&&(namespaceURI==="*"||node.namespaceURI===namespaceURI)&&(localName==="*"||node.localName==localName)){ls.push(node)}});return ls})}};Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName;Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS;_extends(Element,Node);function Attr(){}Attr.prototype.nodeType=ATTRIBUTE_NODE;_extends(Attr,Node);function CharacterData(){}CharacterData.prototype={data:"",substringData:function(offset,count){return this.data.substring(offset,offset+count)},appendData:function(text){text=this.data+text;this.nodeValue=this.data=text;this.length=text.length},insertData:function(offset,text){this.replaceData(offset,0,text)},appendChild:function(newChild){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(offset,count){this.replaceData(offset,count,"")},replaceData:function(offset,count,text){var start=this.data.substring(0,offset);var end=this.data.substring(offset+count);text=start+text+end;this.nodeValue=this.data=text;this.length=text.length}};_extends(CharacterData,Node);function Text(){}Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(offset){var text=this.data;var newText=text.substring(offset);text=text.substring(0,offset);this.data=this.nodeValue=text;this.length=text.length;var newNode=this.ownerDocument.createTextNode(newText);if(this.parentNode){this.parentNode.insertBefore(newNode,this.nextSibling)}return newNode}};_extends(Text,CharacterData);function Comment(){}Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE};_extends(Comment,CharacterData);function CDATASection(){}CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE};_extends(CDATASection,CharacterData);function DocumentType(){}DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE;_extends(DocumentType,Node);function Notation(){}Notation.prototype.nodeType=NOTATION_NODE;_extends(Notation,Node);function Entity(){}Entity.prototype.nodeType=ENTITY_NODE;_extends(Entity,Node);function EntityReference(){}EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE;_extends(EntityReference,Node);function DocumentFragment(){}DocumentFragment.prototype.nodeName="#document-fragment";DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE;_extends(DocumentFragment,Node);function ProcessingInstruction(){}ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE;_extends(ProcessingInstruction,Node);function XMLSerializer(){}XMLSerializer.prototype.serializeToString=function(node,isHtml,nodeFilter){return nodeSerializeToString.call(node,isHtml,nodeFilter)};Node.prototype.toString=nodeSerializeToString;function nodeSerializeToString(isHtml,nodeFilter){var buf=[];var refNode=this.nodeType==9&&this.documentElement||this;var prefix=refNode.prefix;var uri=refNode.namespaceURI;if(uri&&prefix==null){var prefix=refNode.lookupPrefix(uri);if(prefix==null){var visibleNamespaces=[{namespace:uri,prefix:null}]}}serializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);return buf.join("")}function needNamespaceDefine(node,isHTML,visibleNamespaces){var prefix=node.prefix||"";var uri=node.namespaceURI;if(!uri){return false}if(prefix==="xml"&&uri===NAMESPACE.XML||uri===NAMESPACE.XMLNS){return false}var i=visibleNamespaces.length;while(i--){var ns=visibleNamespaces[i];if(ns.prefix===prefix){return ns.namespace!==uri}}return true}function addSerializedAttribute(buf,qualifiedName,value){buf.push(" ",qualifiedName,'="',value.replace(/[<>&"\t\n\r]/g,_xmlEncoder),'"')}function serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){if(!visibleNamespaces){visibleNamespaces=[]}if(nodeFilter){node=nodeFilter(node);if(node){if(typeof node=="string"){buf.push(node);return}}else{return}}switch(node.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var len=attrs.length;var child=node.firstChild;var nodeName=node.tagName;isHTML=NAMESPACE.isHTML(node.namespaceURI)||isHTML;var prefixedNodeName=nodeName;if(!isHTML&&!node.prefix&&node.namespaceURI){var defaultNS;for(var ai=0;ai<attrs.length;ai++){if(attrs.item(ai).name==="xmlns"){defaultNS=attrs.item(ai).value;break}}if(!defaultNS){for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace=visibleNamespaces[nsi];if(namespace.prefix===""&&namespace.namespace===node.namespaceURI){defaultNS=namespace.namespace;break}}}if(defaultNS!==node.namespaceURI){for(var nsi=visibleNamespaces.length-1;nsi>=0;nsi--){var namespace=visibleNamespaces[nsi];if(namespace.namespace===node.namespaceURI){if(namespace.prefix){prefixedNodeName=namespace.prefix+":"+nodeName}break}}}}buf.push("<",prefixedNodeName);for(var i=0;i<len;i++){var attr=attrs.item(i);if(attr.prefix=="xmlns"){visibleNamespaces.push({prefix:attr.localName,namespace:attr.value})}else if(attr.nodeName=="xmlns"){visibleNamespaces.push({prefix:"",namespace:attr.value})}}for(var i=0;i<len;i++){var attr=attrs.item(i);if(needNamespaceDefine(attr,isHTML,visibleNamespaces)){var prefix=attr.prefix||"";var uri=attr.namespaceURI;addSerializedAttribute(buf,prefix?"xmlns:"+prefix:"xmlns",uri);visibleNamespaces.push({prefix:prefix,namespace:uri})}serializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces)}if(nodeName===prefixedNodeName&&needNamespaceDefine(node,isHTML,visibleNamespaces)){var prefix=node.prefix||"";var uri=node.namespaceURI;addSerializedAttribute(buf,prefix?"xmlns:"+prefix:"xmlns",uri);visibleNamespaces.push({prefix:prefix,namespace:uri})}if(child||isHTML&&!/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){buf.push(">");if(isHTML&&/^script$/i.test(nodeName)){while(child){if(child.data){buf.push(child.data)}else{serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice())}child=child.nextSibling}}else{while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice());child=child.nextSibling}}buf.push("</",prefixedNodeName,">")}else{buf.push("/>")}return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var child=node.firstChild;while(child){serializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces.slice());child=child.nextSibling}return;case ATTRIBUTE_NODE:return addSerializedAttribute(buf,node.name,node.value);case TEXT_NODE:return buf.push(node.data.replace(/[<&>]/g,_xmlEncoder));case CDATA_SECTION_NODE:return buf.push("<![CDATA[",node.data,"]]>");case COMMENT_NODE:return buf.push("\x3c!--",node.data,"--\x3e");case DOCUMENT_TYPE_NODE:var pubid=node.publicId;var sysid=node.systemId;buf.push("<!DOCTYPE ",node.name);if(pubid){buf.push(" PUBLIC ",pubid);if(sysid&&sysid!="."){buf.push(" ",sysid)}buf.push(">")}else if(sysid&&sysid!="."){buf.push(" SYSTEM ",sysid,">")}else{var sub=node.internalSubset;if(sub){buf.push(" [",sub,"]")}buf.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return buf.push("<?",node.target," ",node.data,"?>");case ENTITY_REFERENCE_NODE:return buf.push("&",node.nodeName,";");default:buf.push("??",node.nodeName)}}function importNode(doc,node,deep){var node2;switch(node.nodeType){case ELEMENT_NODE:node2=node.cloneNode(false);node2.ownerDocument=doc;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:deep=true;break}if(!node2){node2=node.cloneNode(false)}node2.ownerDocument=doc;node2.parentNode=null;if(deep){var child=node.firstChild;while(child){node2.appendChild(importNode(doc,child,deep));child=child.nextSibling}}return node2}function cloneNode(doc,node,deep){var node2=new node.constructor;for(var n in node){var v=node[n];if(typeof v!="object"){if(v!=node2[n]){node2[n]=v}}}if(node.childNodes){node2.childNodes=new NodeList}node2.ownerDocument=doc;switch(node2.nodeType){case ELEMENT_NODE:var attrs=node.attributes;var attrs2=node2.attributes=new NamedNodeMap;var len=attrs.length;attrs2._ownerElement=node2;for(var i=0;i<len;i++){node2.setAttributeNode(cloneNode(doc,attrs.item(i),true))}break;case ATTRIBUTE_NODE:deep=true}if(deep){var child=node.firstChild;while(child){node2.appendChild(cloneNode(doc,child,deep));child=child.nextSibling}}return node2}function __set__(object,key,value){object[key]=value}try{if(Object.defineProperty){Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){_updateLiveList(this);return this.$$length}});Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(data){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:while(this.firstChild){this.removeChild(this.firstChild)}if(data||String(data)){this.appendChild(this.ownerDocument.createTextNode(data))}break;default:this.data=data;this.value=data;this.nodeValue=data}}});function getTextContent(node){switch(node.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var buf=[];node=node.firstChild;while(node){if(node.nodeType!==7&&node.nodeType!==8){buf.push(getTextContent(node))}node=node.nextSibling}return buf.join("");default:return node.nodeValue}}__set__=function(object,key,value){object["$$"+key]=value}}}catch(e){}exports.DocumentType=DocumentType;exports.DOMException=DOMException;exports.DOMImplementation=DOMImplementation;exports.Element=Element;exports.Node=Node;exports.NodeList=NodeList;exports.XMLSerializer=XMLSerializer},(__unused_webpack_module,exports)=>{"use strict";function freeze(object,oc){if(oc===undefined){oc=Object}return oc&&typeof oc.freeze==="function"?oc.freeze(object):object}function assign(target,source){if(target===null||typeof target!=="object"){throw new TypeError("target is not an object")}for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}return target}var MIME_TYPE=freeze({HTML:"text/html",isHTML:function(value){return value===MIME_TYPE.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"});var NAMESPACE=freeze({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(uri){return uri===NAMESPACE.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});exports.assign=assign;exports.freeze=freeze;exports.MIME_TYPE=MIME_TYPE;exports.NAMESPACE=NAMESPACE},(__unused_webpack_module,exports,__webpack_require__)=>{var conventions=__webpack_require__(82);var dom=__webpack_require__(81);var entities=__webpack_require__(84);var sax=__webpack_require__(85);var DOMImplementation=dom.DOMImplementation;var NAMESPACE=conventions.NAMESPACE;var ParseError=sax.ParseError;var XMLReader=sax.XMLReader;function normalizeLineEndings(input){return input.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function DOMParser(options){this.options=options||{locator:{}}}DOMParser.prototype.parseFromString=function(source,mimeType){var options=this.options;var sax=new XMLReader;var domBuilder=options.domBuilder||new DOMHandler;var errorHandler=options.errorHandler;var locator=options.locator;var defaultNSMap=options.xmlns||{};var isHTML=/\/x?html?$/.test(mimeType);var entityMap=isHTML?entities.HTML_ENTITIES:entities.XML_ENTITIES;if(locator){domBuilder.setDocumentLocator(locator)}sax.errorHandler=buildErrorHandler(errorHandler,domBuilder,locator);sax.domBuilder=options.domBuilder||domBuilder;if(isHTML){defaultNSMap[""]=NAMESPACE.HTML}defaultNSMap.xml=defaultNSMap.xml||NAMESPACE.XML;var normalize=options.normalizeLineEndings||normalizeLineEndings;if(source&&typeof source==="string"){sax.parse(normalize(source),defaultNSMap,entityMap)}else{sax.errorHandler.error("invalid doc source")}return domBuilder.doc};function buildErrorHandler(errorImpl,domBuilder,locator){if(!errorImpl){if(domBuilder instanceof DOMHandler){return domBuilder}errorImpl=domBuilder}var errorHandler={};var isCallback=errorImpl instanceof Function;locator=locator||{};function build(key){var fn=errorImpl[key];if(!fn&&isCallback){fn=errorImpl.length==2?function(msg){errorImpl(key,msg)}:errorImpl}errorHandler[key]=fn&&function(msg){fn("[xmldom "+key+"]\t"+msg+_locator(locator))}||function(){}}build("warning");build("error");build("fatalError");return errorHandler}function DOMHandler(){this.cdata=false}function position(locator,node){node.lineNumber=locator.lineNumber;node.columnNumber=locator.columnNumber}DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null);if(this.locator){this.doc.documentURI=this.locator.systemId}},startElement:function(namespaceURI,localName,qName,attrs){var doc=this.doc;var el=doc.createElementNS(namespaceURI,qName||localName);var len=attrs.length;appendElement(this,el);this.currentElement=el;this.locator&&position(this.locator,el);for(var i=0;i<len;i++){var namespaceURI=attrs.getURI(i);var value=attrs.getValue(i);var qName=attrs.getQName(i);var attr=doc.createAttributeNS(namespaceURI,qName);this.locator&&position(attrs.getLocator(i),attr);attr.value=attr.nodeValue=value;el.setAttributeNode(attr)}},endElement:function(namespaceURI,localName,qName){var current=this.currentElement;var tagName=current.tagName;this.currentElement=current.parentNode},startPrefixMapping:function(prefix,uri){},endPrefixMapping:function(prefix){},processingInstruction:function(target,data){var ins=this.doc.createProcessingInstruction(target,data);this.locator&&position(this.locator,ins);appendElement(this,ins)},ignorableWhitespace:function(ch,start,length){},characters:function(chars,start,length){chars=_toString.apply(this,arguments);if(chars){if(this.cdata){var charNode=this.doc.createCDATASection(chars)}else{var charNode=this.doc.createTextNode(chars)}if(this.currentElement){this.currentElement.appendChild(charNode)}else if(/^\s*$/.test(chars)){this.doc.appendChild(charNode)}this.locator&&position(this.locator,charNode)}},skippedEntity:function(name){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(locator){if(this.locator=locator){locator.lineNumber=0}},comment:function(chars,start,length){chars=_toString.apply(this,arguments);var comm=this.doc.createComment(chars);this.locator&&position(this.locator,comm);appendElement(this,comm)},startCDATA:function(){this.cdata=true},endCDATA:function(){this.cdata=false},startDTD:function(name,publicId,systemId){var impl=this.doc.implementation;if(impl&&impl.createDocumentType){var dt=impl.createDocumentType(name,publicId,systemId);this.locator&&position(this.locator,dt);appendElement(this,dt);this.doc.doctype=dt}},warning:function(error){console.warn("[xmldom warning]\t"+error,_locator(this.locator))},error:function(error){console.error("[xmldom error]\t"+error,_locator(this.locator))},fatalError:function(error){throw new ParseError(error,this.locator)}};function _locator(l){if(l){return"\n@"+(l.systemId||"")+"#[line:"+l.lineNumber+",col:"+l.columnNumber+"]"}}function _toString(chars,start,length){if(typeof chars=="string"){return chars.substr(start,length)}else{if(chars.length>=start+length||start){return new java.lang.String(chars,start,length)+""}return chars}}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(key){DOMHandler.prototype[key]=function(){return null}});function appendElement(hander,node){if(!hander.currentElement){hander.doc.appendChild(node)}else{hander.currentElement.appendChild(node)}}exports.__DOMHandler=DOMHandler;exports.normalizeLineEndings=normalizeLineEndings;exports.DOMParser=DOMParser},(__unused_webpack_module,exports,__webpack_require__)=>{var freeze=__webpack_require__(82).freeze;exports.XML_ENTITIES=freeze({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});exports.HTML_ENTITIES=freeze({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"});exports.entityMap=exports.HTML_ENTITIES},(__unused_webpack_module,exports,__webpack_require__)=>{var NAMESPACE=__webpack_require__(82).NAMESPACE;var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;var nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]");var tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$");var S_TAG=0;var S_ATTR=1;var S_ATTR_SPACE=2;var S_EQ=3;var S_ATTR_NOQUOT_VALUE=4;var S_ATTR_END=5;var S_TAG_SPACE=6;var S_TAG_CLOSE=7;function ParseError(message,locator){this.message=message;this.locator=locator;if(Error.captureStackTrace)Error.captureStackTrace(this,ParseError)}ParseError.prototype=new Error;ParseError.prototype.name=ParseError.name;function XMLReader(){}XMLReader.prototype={parse:function(source,defaultNSMap,entityMap){var domBuilder=this.domBuilder;domBuilder.startDocument();_copy(defaultNSMap,defaultNSMap={});parse(source,defaultNSMap,entityMap,domBuilder,this.errorHandler);domBuilder.endDocument()}};function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){function fixedFromCharCode(code){if(code>65535){code-=65536;var surrogate1=55296+(code>>10),surrogate2=56320+(code&1023);return String.fromCharCode(surrogate1,surrogate2)}else{return String.fromCharCode(code)}}function entityReplacer(a){var k=a.slice(1,-1);if(Object.hasOwnProperty.call(entityMap,k)){return entityMap[k]}else if(k.charAt(0)==="#"){return fixedFromCharCode(parseInt(k.substr(1).replace("x","0x")))}else{errorHandler.error("entity not found:"+a);return a}}function appendText(end){if(end>start){var xt=source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);locator&&position(start);domBuilder.characters(xt,0,end-start);start=end}}function position(p,m){while(p>=lineEnd&&(m=linePattern.exec(source))){lineStart=m.index;lineEnd=lineStart+m[0].length;locator.lineNumber++}locator.columnNumber=p-lineStart+1}var lineStart=0;var lineEnd=0;var linePattern=/.*(?:\r\n?|\n)|.*$/g;var locator=domBuilder.locator;var parseStack=[{currentNSMap:defaultNSMapCopy}];var closeMap={};var start=0;while(true){try{var tagStart=source.indexOf("<",start);if(tagStart<0){if(!source.substr(start).match(/^\s*$/)){var doc=domBuilder.doc;var text=doc.createTextNode(source.substr(start));doc.appendChild(text);domBuilder.currentElement=text}return}if(tagStart>start){appendText(tagStart)}switch(source.charAt(tagStart+1)){case"/":var end=source.indexOf(">",tagStart+3);var tagName=source.substring(tagStart+2,end).replace(/[ \t\n\r]+$/g,"");var config=parseStack.pop();if(end<0){tagName=source.substring(tagStart+2).replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" is not complete:"+config.tagName);end=tagStart+1+tagName.length}else if(tagName.match(/\s</)){tagName=tagName.replace(/[\s<].*/,"");errorHandler.error("end tag name: "+tagName+" maybe not complete");end=tagStart+1+tagName.length}var localNSMap=config.localNSMap;var endMatch=config.tagName==tagName;var endIgnoreCaseMach=endMatch||config.tagName&&config.tagName.toLowerCase()==tagName.toLowerCase();if(endIgnoreCaseMach){domBuilder.endElement(config.uri,config.localName,tagName);if(localNSMap){for(var prefix in localNSMap){domBuilder.endPrefixMapping(prefix)}}if(!endMatch){errorHandler.fatalError("end tag name: "+tagName+" is not match the current start tagName:"+config.tagName)}}else{parseStack.push(config)}end++;break;case"?":locator&&position(tagStart);end=parseInstruction(source,tagStart,domBuilder);break;case"!":locator&&position(tagStart);end=parseDCC(source,tagStart,domBuilder,errorHandler);break;default:locator&&position(tagStart);var el=new ElementAttributes;var currentNSMap=parseStack[parseStack.length-1].currentNSMap;var end=parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);var len=el.length;if(!el.closed&&fixSelfClosed(source,end,el.tagName,closeMap)){el.closed=true;if(!entityMap.nbsp){errorHandler.warning("unclosed xml attribute")}}if(locator&&len){var locator2=copyLocator(locator,{});for(var i=0;i<len;i++){var a=el[i];position(a.offset);a.locator=copyLocator(locator,{})}domBuilder.locator=locator2;if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el)}domBuilder.locator=locator}else{if(appendElement(el,domBuilder,currentNSMap)){parseStack.push(el)}}if(NAMESPACE.isHTML(el.uri)&&!el.closed){end=parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)}else{end++}}}catch(e){if(e instanceof ParseError){throw e}errorHandler.error("element parse error: "+e);end=-1}if(end>start){start=end}else{appendText(Math.max(tagStart,start)+1)}}}function copyLocator(f,t){t.lineNumber=f.lineNumber;t.columnNumber=f.columnNumber;return t}function parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){function addAttribute(qname,value,startIndex){if(el.attributeNames.hasOwnProperty(qname)){errorHandler.fatalError("Attribute "+qname+" redefined")}el.addValue(qname,value.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,entityReplacer),startIndex)}var attrName;var value;var p=++start;var s=S_TAG;while(true){var c=source.charAt(p);switch(c){case"=":if(s===S_ATTR){attrName=source.slice(start,p);s=S_EQ}else if(s===S_ATTR_SPACE){s=S_EQ}else{throw new Error("attribute equal must after attrName")}break;case"'":case'"':if(s===S_EQ||s===S_ATTR){if(s===S_ATTR){errorHandler.warning('attribute value must after "="');attrName=source.slice(start,p)}start=p+1;p=source.indexOf(c,start);if(p>0){value=source.slice(start,p);addAttribute(attrName,value,start-1);s=S_ATTR_END}else{throw new Error("attribute value no end '"+c+"' match")}}else if(s==S_ATTR_NOQUOT_VALUE){value=source.slice(start,p);addAttribute(attrName,value,start);errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+")!!");start=p+1;s=S_ATTR_END}else{throw new Error('attribute value must after "="')}break;case"/":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:s=S_TAG_CLOSE;el.closed=true;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":errorHandler.error("unexpected end of input");if(s==S_TAG){el.setTagName(source.slice(start,p))}return p;case">":switch(s){case S_TAG:el.setTagName(source.slice(start,p));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:value=source.slice(start,p);if(value.slice(-1)==="/"){el.closed=true;value=value.slice(0,-1)}case S_ATTR_SPACE:if(s===S_ATTR_SPACE){value=attrName}if(s==S_ATTR_NOQUOT_VALUE){errorHandler.warning('attribute "'+value+'" missed quot(")!');addAttribute(attrName,value,start)}else{if(!NAMESPACE.isHTML(currentNSMap[""])||!value.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!')}addAttribute(value,value,start)}break;case S_EQ:throw new Error("attribute value missed!!")}return p;case"":c=" ";default:if(c<=" "){switch(s){case S_TAG:el.setTagName(source.slice(start,p));s=S_TAG_SPACE;break;case S_ATTR:attrName=source.slice(start,p);s=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var value=source.slice(start,p);errorHandler.warning('attribute "'+value+'" missed quot(")!!');addAttribute(attrName,value,start);case S_ATTR_END:s=S_TAG_SPACE;break}}else{switch(s){case S_ATTR_SPACE:var tagName=el.tagName;if(!NAMESPACE.isHTML(currentNSMap[""])||!attrName.match(/^(?:disabled|checked|selected)$/i)){errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead2!!')}addAttribute(attrName,attrName,start);start=p;s=S_ATTR;break;case S_ATTR_END:errorHandler.warning('attribute space is required"'+attrName+'"!!');case S_TAG_SPACE:s=S_ATTR;start=p;break;case S_EQ:s=S_ATTR_NOQUOT_VALUE;start=p;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}}p++}}function appendElement(el,domBuilder,currentNSMap){var tagName=el.tagName;var localNSMap=null;var i=el.length;while(i--){var a=el[i];var qName=a.qName;var value=a.value;var nsp=qName.indexOf(":");if(nsp>0){var prefix=a.prefix=qName.slice(0,nsp);var localName=qName.slice(nsp+1);var nsPrefix=prefix==="xmlns"&&localName}else{localName=qName;prefix=null;nsPrefix=qName==="xmlns"&&""}a.localName=localName;if(nsPrefix!==false){if(localNSMap==null){localNSMap={};_copy(currentNSMap,currentNSMap={})}currentNSMap[nsPrefix]=localNSMap[nsPrefix]=value;a.uri=NAMESPACE.XMLNS;domBuilder.startPrefixMapping(nsPrefix,value)}}var i=el.length;while(i--){a=el[i];var prefix=a.prefix;if(prefix){if(prefix==="xml"){a.uri=NAMESPACE.XML}if(prefix!=="xmlns"){a.uri=currentNSMap[prefix||""]}}}var nsp=tagName.indexOf(":");if(nsp>0){prefix=el.prefix=tagName.slice(0,nsp);localName=el.localName=tagName.slice(nsp+1)}else{prefix=null;localName=el.localName=tagName}var ns=el.uri=currentNSMap[prefix||""];domBuilder.startElement(ns,localName,tagName,el);if(el.closed){domBuilder.endElement(ns,localName,tagName);if(localNSMap){for(prefix in localNSMap){domBuilder.endPrefixMapping(prefix)}}}else{el.currentNSMap=currentNSMap;el.localNSMap=localNSMap;return true}}function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){if(/^(?:script|textarea)$/i.test(tagName)){var elEndStart=source.indexOf("</"+tagName+">",elStartEnd);var text=source.substring(elStartEnd+1,elEndStart);if(/[&<]/.test(text)){if(/^script$/i.test(tagName)){domBuilder.characters(text,0,text.length);return elEndStart}text=text.replace(/&#?\w+;/g,entityReplacer);domBuilder.characters(text,0,text.length);return elEndStart}}return elStartEnd+1}function fixSelfClosed(source,elStartEnd,tagName,closeMap){var pos=closeMap[tagName];if(pos==null){pos=source.lastIndexOf("</"+tagName+">");if(pos<elStartEnd){pos=source.lastIndexOf("</"+tagName)}closeMap[tagName]=pos}return pos<elStartEnd}function _copy(source,target){for(var n in source){target[n]=source[n]}}function parseDCC(source,start,domBuilder,errorHandler){var next=source.charAt(start+2);switch(next){case"-":if(source.charAt(start+3)==="-"){var end=source.indexOf("--\x3e",start+4);if(end>start){domBuilder.comment(source,start+4,end-start-4);return end+3}else{errorHandler.error("Unclosed comment");return-1}}else{return-1}default:if(source.substr(start+3,6)=="CDATA["){var end=source.indexOf("]]>",start+9);domBuilder.startCDATA();domBuilder.characters(source,start+9,end-start-9);domBuilder.endCDATA();return end+3}var matchs=split(source,start);var len=matchs.length;if(len>1&&/!doctype/i.test(matchs[0][0])){var name=matchs[1][0];var pubid=false;var sysid=false;if(len>3){if(/^public$/i.test(matchs[2][0])){pubid=matchs[3][0];sysid=len>4&&matchs[4][0]}else if(/^system$/i.test(matchs[2][0])){sysid=matchs[3][0]}}var lastMatch=matchs[len-1];domBuilder.startDTD(name,pubid,sysid);domBuilder.endDTD();return lastMatch.index+lastMatch[0].length}}return-1}function parseInstruction(source,start,domBuilder){var end=source.indexOf("?>",start);if(end){var match=source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(match){var len=match[0].length;domBuilder.processingInstruction(match[1],match[2]);return end+2}else{return-1}}return-1}function ElementAttributes(){this.attributeNames={}}ElementAttributes.prototype={setTagName:function(tagName){if(!tagNamePattern.test(tagName)){throw new Error("invalid tagName:"+tagName)}this.tagName=tagName},addValue:function(qName,value,offset){if(!tagNamePattern.test(qName)){throw new Error("invalid attribute:"+qName)}this.attributeNames[qName]=this.length;this[this.length++]={qName:qName,value:value,offset:offset}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function split(source,start){var match;var buf=[];var reg=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;reg.lastIndex=start;reg.exec(source);while(match=reg.exec(source)){buf.push(match);if(match[1])return buf}}exports.XMLReader=XMLReader;exports.ParseError=ParseError},module=>{"use strict";var URIResolver=function(){};URIResolver.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/;URIResolver.prototype.parseURI=function(uri){var match=URIResolver.SCHEME.exec(uri);if(!match){throw"Bad URI value, no scheme: "+uri}var parsed={spec:uri};parsed.scheme=match[0].substring(0,match[0].length-1);parsed.schemeSpecificPart=parsed.spec.substring(match[0].length);if(parsed.schemeSpecificPart.charAt(0)=="/"&&parsed.schemeSpecificPart.charAt(1)=="/"){this.parseGeneric(parsed)}else{parsed.isGeneric=false}parsed.normalize=function(){if(!this.isGeneric){return}if(this.segments.length==0){return}if(this.path.length>1&&this.path.substring(this.path.length-2)=="/."){this.path=this.path.substring(0,this.path.length-1);this.segments.splice(this.segments.length-1,1);this.schemeSpecificPart="//"+this.authority+this.path;if(typeof this.query!="undefined"){this.schemeSpecificPart+="?"+this.query}if(typeof this.fragment!="undefined"){this.schemeSpecificPart+="#"+this.fragment}this.spec=this.scheme+":"+this.schemeSpecificPart;return}var end=this.path.charAt(this.path.length-1);if(end!="/"){end=""}for(var i=0;i<this.segments.length;i++){if(i>0&&this.segments[i]==".."){this.segments.splice(i-1,2);i-=2}if(this.segments[i]=="."){this.segments.splice(i,1);i--}}this.path=this.segments.length==0?"/":"/"+this.segments.join("/")+end;this.schemeSpecificPart="//"+this.authority+this.path;if(typeof this.query!="undefined"){this.schemeSpecificPart+="?"+this.query}if(typeof this.fragment!="undefined"){this.schemeSpecificPart+="#"+this.fragment}this.spec=this.scheme+":"+this.schemeSpecificPart};parsed.resolve=function(href){if(!href){return this.spec}if(href.charAt(0)=="#"){var lastHash=this.spec.lastIndexOf("#");return lastHash<0?this.spec+href:this.spec.substring(0,lastHash)+href}if(!this.isGeneric){throw"Cannot resolve uri against non-generic URI: "+this.spec}var colon=href.indexOf(":");if(href.charAt(0)=="/"){return this.scheme+"://"+this.authority+href}else if(href.charAt(0)=="."&&href.charAt(1)=="/"){if(this.path.charAt(this.path.length-1)=="/"){return this.scheme+"://"+this.authority+this.path+href.substring(2)}else{var last=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,last)+href.substring(1)}}else if(URIResolver.SCHEME.test(href)){return href}else if(href.charAt(0)=="?"){return this.scheme+"://"+this.authority+this.path+href}else{if(this.path.charAt(this.path.length-1)=="/"){return this.scheme+"://"+this.authority+this.path+href}else{var last=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,last+1)+href}}};parsed.relativeTo=function(otherURI){if(otherURI.scheme!=this.scheme){return this.spec}if(!this.isGeneric){throw"A non generic URI cannot be made relative: "+this.spec}if(!otherURI.isGeneric){throw"Cannot make a relative URI against a non-generic URI: "+otherURI.spec}if(otherURI.authority!=this.authority){return this.spec}var i=0;for(;i<this.segments.length&&i<otherURI.segments.length;i++){if(this.segments[i]!=otherURI.segments[i]){var relative="";for(var j=i;j<otherURI.segments.length;j++){relative+="../"}for(var j=i;j<this.segments.length;j++){relative+=this.segments[j];if(j+1<this.segments.length){relative+="/"}}if(this.path.charAt(this.path.length-1)=="/"){relative+="/"}return relative}}if(this.segments.length==otherURI.segments.length){return this.hash?this.hash:this.query?this.query:""}else if(i<this.segments.length){var relative="";for(var j=i;j<this.segments.length;j++){relative+=this.segments[j];if(j+1<this.segments.length){relative+="/"}}if(this.path.charAt(this.path.length-1)=="/"){relative+="/"}return relative}else{throw"Cannot calculate a relative URI for "+this.spec+" against "+otherURI.spec}};return parsed};URIResolver.prototype.parseGeneric=function(parsed){if(parsed.schemeSpecificPart.charAt(0)!="/"||parsed.schemeSpecificPart.charAt(1)!="/"){throw"Generic URI values should start with '//':"+parsed.spec}var work=parsed.schemeSpecificPart.substring(2);var pathStart=work.indexOf("/");parsed.authority=pathStart<0?work:work.substring(0,pathStart);parsed.path=pathStart<0?"":work.substring(pathStart);var hash=parsed.path.indexOf("#");if(hash>=0){parsed.fragment=parsed.path.substring(hash+1);parsed.path=parsed.path.substring(0,hash)}var questionMark=parsed.path.indexOf("?");if(questionMark>=0){parsed.query=parsed.path.substring(questionMark+1);parsed.path=parsed.path.substring(0,questionMark)}if(parsed.path=="/"||parsed.path==""){parsed.segments=[]}else{parsed.segments=parsed.path.split(/\//);if(parsed.segments.length>0&&parsed.segments[0]==""&&parsed.path.length>1&&parsed.path.charAt(1)!="/"){parsed.segments.shift()}if(parsed.segments.length>0&&parsed.path.length>0&&parsed.path.charAt(parsed.path.length-1)=="/"&&parsed.segments[parsed.segments.length-1]==""){if(parsed.path.length>1&&parsed.path.charAt(parsed.path.length-2)!="/"){parsed.segments.pop()}}for(var i=0;i<parsed.segments.length;i++){var check=parsed.segments[i].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/);for(var j=0;j<check.length;j++){if(check[j].length>0){throw"Unecaped character "+check[j].charAt(0)+" ("+check[j].charCodeAt(0)+") in URI "+parsed.spec}}}}parsed.isGeneric=true};module.exports=URIResolver},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var util=__webpack_require__(10);var AbstractParser=__webpack_require__(51);var N3=__webpack_require__(88);function N3Parser(options){AbstractParser.call(this,rdf);this.options=options||{};if(!("importPrefixMap"in this.options)){this.options.importPrefixMap=true}}util.inherits(N3Parser,AbstractParser);N3Parser.prototype.process=function(data,callback,base,filter,done){var self=this;return new Promise(function(resolve,reject){filter=filter||function(){return true};var parser=N3.Parser({documentIRI:base});var blankNodes={};parser.parse(data,function(error,n3Triple,n3Prefixes){if(error){if(done){done(error)}return reject(error)}if(self.options.importPrefixMap&&n3Prefixes){for(var prefix in n3Prefixes){self.rdf.prefixes[prefix]=n3Prefixes[prefix]}}if(!n3Triple){if(done){done()}return resolve()}var toRdfNode=function(n3Node){if(N3.Util.isIRI(n3Node)){return self.rdf.createNamedNode(n3Node)}else if(N3.Util.isBlank(n3Node)){if(n3Node in blankNodes){return blankNodes[n3Node]}else{return blankNodes[n3Node]=self.rdf.createBlankNode()}}else{var lang=N3.Util.getLiteralLanguage(n3Node);var type=N3.Util.getLiteralType(n3Node);if(lang===""){lang=null}if(type==="http://www.w3.org/2001/XMLSchema#string"){type=null}return self.rdf.createLiteral(N3.Util.getLiteralValue(n3Node),lang,type?self.rdf.createNamedNode(type):null)}};var pushTriple=function(n3Triple){var triple=self.rdf.createTriple(toRdfNode(n3Triple.subject),toRdfNode(n3Triple.predicate),toRdfNode(n3Triple.object));if(filter(triple)){callback(triple)}};pushTriple(n3Triple)})})};var instance=new N3Parser;for(var property in instance){N3Parser[property]=instance[property]}module.exports=N3Parser},(module,__unused_webpack_exports,__webpack_require__)=>{var require;var globalRequire=undefined;require=function(){};var exports=module.exports={Lexer:__webpack_require__(89),Parser:__webpack_require__(90),Writer:__webpack_require__(91),Store:__webpack_require__(92),StreamParser:__webpack_require__(94),StreamWriter:__webpack_require__(96),Util:__webpack_require__(93)};Object.keys(exports).forEach(function(submodule){Object.defineProperty(exports,submodule,{configurable:true,enumerable:true,get:function(){delete exports[submodule];return exports[submodule]=__webpack_require__(97)("./N3"+submodule)}})})},module=>{var fromCharCode=String.fromCharCode;var immediately=typeof setImmediate==="function"?setImmediate:function setImmediate(func){setTimeout(func,0)};var escapeSequence=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g;var escapeReplacements={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"};var illegalIriChars=/[\x00-\x20<>\\"\{\}\|\^\`]/;function N3Lexer(options){if(!(this instanceof N3Lexer))return new N3Lexer(options);if(options&&options.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var self=this;this._tokenize=this.tokenize;this.tokenize=function(input,callback){this._tokenize(input,function(error,token){if(!error&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(token.type))callback&&callback(error,token);else callback&&callback(error||self._syntaxError(token.type,callback=null))})}}}N3Lexer.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(callback,inputFinished){var input=this._input;while(true){var whiteSpaceMatch;while(whiteSpaceMatch=this._newline.exec(input))input=input.substr(whiteSpaceMatch[0].length,input.length),this._line++;if(whiteSpaceMatch=this._whitespace.exec(input))input=input.substr(whiteSpaceMatch[0].length,input.length);if(this._endOfFile.test(input)){if(inputFinished)callback(input=null,{line:this._line,type:"eof",value:"",prefix:""});return this._input=input}var line=this._line,type="",value="",prefix="",firstChar=input[0],match=null,matchLength=0,unescaped,inconclusive=false;switch(firstChar){case"^":if(input.length===1)break;else if(input[1]!=="^")return reportSyntaxError(this);this._prevTokenType="^";input=input.substr(2);if(input[0]!=="<"){inconclusive=true;break}case"<":if(match=this._unescapedIri.exec(input))type="IRI",value=match[1];else if(match=this._iri.exec(input)){unescaped=this._unescape(match[1]);if(unescaped===null||illegalIriChars.test(unescaped))return reportSyntaxError(this);type="IRI",value=unescaped}break;case"_":if((match=this._blank.exec(input))||inputFinished&&(match=this._blank.exec(input+" ")))type="prefixed",prefix="_",value=match[1];break;case'"':case"'":if(match=this._unescapedString.exec(input))type="literal",value=match[0];else if(match=this._singleQuotedString.exec(input)){unescaped=this._unescape(match[0]);if(unescaped===null)return reportSyntaxError(this);type="literal",value=unescaped.replace(/^'|'$/g,'"')}else if(match=this._tripleQuotedString.exec(input)){unescaped=match[1]||match[2];this._line+=unescaped.split(/\r\n|\r|\n/).length-1;unescaped=this._unescape(unescaped);if(unescaped===null)return reportSyntaxError(this);type="literal",value=unescaped.replace(/^'|'$/g,'"')}break;case"@":if(this._prevTokenType==="literal"&&(match=this._langcode.exec(input)))type="langcode",value=match[1];else if(match=this._keyword.exec(input))type=match[0];break;case".":if(input.length===1?inputFinished:input[1]<"0"||input[1]>"9"){type=".";matchLength=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":if(match=this._number.exec(input)){type="literal";value='"'+match[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(match[1]?"double":/^[+\-]?\d+$/.test(match[0])?"integer":"decimal")}break;case"B":case"b":case"p":case"P":case"G":case"g":if(match=this._sparqlKeyword.exec(input))type=match[0].toUpperCase();else inconclusive=true;break;case"f":case"t":if(match=this._boolean.exec(input))type="literal",value='"'+match[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean';else inconclusive=true;break;case"a":if(match=this._shortPredicates.exec(input))type="abbreviation",value="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";else inconclusive=true;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":matchLength=1;type=firstChar;break;default:inconclusive=true}if(inconclusive){if((this._prevTokenType==="@prefix"||this._prevTokenType==="PREFIX")&&(match=this._prefix.exec(input)))type="prefix",value=match[1]||"";else if((match=this._prefixed.exec(input))||inputFinished&&(match=this._prefixed.exec(input+" ")))type="prefixed",prefix=match[1]||"",value=this._unescape(match[2])}if(this._prevTokenType==="^")type=type==="IRI"||type==="prefixed"?"type":"";if(!type){if(inputFinished||!/^'''|^"""/.test(input)&&/\n|\r/.test(input))return reportSyntaxError(this);else return this._input=input}callback(null,{line:line,type:type,value:value,prefix:prefix});this._prevTokenType=type;input=input.substr(matchLength||match[0].length,input.length)}function reportSyntaxError(self){callback(self._syntaxError(/^\S*/.exec(input)[0]))}},_unescape:function(item){try{return item.replace(escapeSequence,function(sequence,unicode4,unicode8,escapedChar){var charCode;if(unicode4){charCode=parseInt(unicode4,16);if(isNaN(charCode))throw new Error;return fromCharCode(charCode)}else if(unicode8){charCode=parseInt(unicode8,16);if(isNaN(charCode))throw new Error;if(charCode<=65535)return fromCharCode(charCode);return fromCharCode(55296+(charCode-=65536)/1024,56320+(charCode&1023))}else{var replacement=escapeReplacements[escapedChar];if(!replacement)throw new Error;return replacement}})}catch(error){return null}},_syntaxError:function(issue){this._input=null;return new Error('Syntax error: unexpected "'+issue+'" on line '+this._line+".")},tokenize:function(input,callback){var self=this;this._line=1;if(typeof input==="string"){this._input=input;immediately(function(){self._tokenizeToEnd(callback,true)})}else{this._input="";if(!input||typeof input==="function"){this.addChunk=addChunk;this.end=end;if(!callback)callback=input}else{if(typeof input.setEncoding==="function")input.setEncoding("utf8");input.on("data",addChunk);input.on("end",end)}}function addChunk(data){if(self._input!==null){self._input+=data;self._tokenizeToEnd(callback,false)}}function end(){if(self._input!==null)self._tokenizeToEnd(callback,true)}}};module.exports=N3Lexer},(module,__unused_webpack_exports,__webpack_require__)=>{var N3Lexer=__webpack_require__(89);var RDF_PREFIX="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_NIL=RDF_PREFIX+"nil",RDF_FIRST=RDF_PREFIX+"first",RDF_REST=RDF_PREFIX+"rest";var absoluteIRI=/^[a-z][a-z0-9+.-]*:/i,schemeAuthority=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,dotSegments=/(?:^|\/)\.\.?(?:$|[\/#?])/;var blankNodePrefix=0,blankNodeCount=0;function N3Parser(options){if(!(this instanceof N3Parser))return new N3Parser(options);this._tripleStack=[];this._graph=null;options=options||{};this._setBase(options.documentIRI);var format=typeof options.format==="string"&&options.format.match(/\w*$/)[0].toLowerCase(),isTurtle=format==="turtle",isTriG=format==="trig",isNTriples=/triple/.test(format),isNQuads=/quad/.test(format),isLineMode=isNTriples||isNQuads;if(!(this._supportsNamedGraphs=!isTurtle))this._readPredicateOrNamedGraph=this._readPredicate;this._supportsQuads=!(isTurtle||isTriG||isNTriples);if(isLineMode){this._base="";this._resolveIRI=function(token){this._error("Disallowed relative IRI",token);return this._callback=noop,this._subject=null}}this._blankNodePrefix=typeof options.blankNodePrefix!=="string"?"":"_:"+options.blankNodePrefix.replace(/^_:/,"");this._lexer=options.lexer||new N3Lexer({lineMode:isLineMode})}N3Parser._resetBlankNodeIds=function(){blankNodePrefix=blankNodeCount=0};N3Parser.prototype={_setBase:function(baseIRI){if(!baseIRI)baseIRI=null;else if(baseIRI.indexOf("#")>=0)throw new Error("Invalid base IRI "+baseIRI);if(this._base=baseIRI){this._basePath=baseIRI.replace(/[^\/?]*(?:\?.*)?$/,"");baseIRI=baseIRI.match(schemeAuthority);this._baseRoot=baseIRI[0];this._baseScheme=baseIRI[1]}},_readInTopContext:function(token){switch(token.type){case"eof":if(this._graph!==null)return this._error("Unclosed graph",token);delete this._prefixes._;return this._callback(null,null,this._prefixes);case"@prefix":this._sparqlStyle=false;return this._readPrefix;case"PREFIX":this._sparqlStyle=true;return this._readPrefix;case"@base":this._sparqlStyle=false;return this._readBaseIRI;case"BASE":this._sparqlStyle=true;return this._readBaseIRI;case"{":if(this._supportsNamedGraphs){this._graph="";this._subject=null;return this._readSubject}case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(token)}},_readSubject:function(token){this._predicate=null;switch(token.type){case"IRI":if(this._base===null||absoluteIRI.test(token.value))this._subject=token.value;else this._subject=this._resolveIRI(token);break;case"prefixed":var prefix=this._prefixes[token.prefix];if(prefix===undefined)return this._error('Undefined prefix "'+token.prefix+':"',token);this._subject=prefix+token.value;break;case"[":this._subject="_:b"+blankNodeCount++;this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"});return this._readBlankNodeHead;case"(":this._tripleStack.push({subject:RDF_NIL,predicate:null,object:null,type:"list"});this._subject=null;return this._readListItem;case"}":return this._readPunctuation(token);default:return this._error("Expected subject but got "+token.type,token)}return this._readPredicateOrNamedGraph},_readPredicate:function(token){var type=token.type;switch(type){case"IRI":case"abbreviation":if(this._base===null||absoluteIRI.test(token.value))this._predicate=token.value;else this._predicate=this._resolveIRI(token);break;case"prefixed":if(token.prefix==="_")return this._error("Disallowed blank node as predicate",token);var prefix=this._prefixes[token.prefix];if(prefix===undefined)return this._error('Undefined prefix "'+token.prefix+':"',token);this._predicate=prefix+token.value;break;case".":case"]":case"}":if(this._predicate===null)return this._error("Unexpected "+type,token);this._subject=null;return type==="]"?this._readBlankNodeTail(token):this._readPunctuation(token);case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',token)}return this._readObject},_readObject:function(token){switch(token.type){case"IRI":if(this._base===null||absoluteIRI.test(token.value))this._object=token.value;else this._object=this._resolveIRI(token);break;case"prefixed":var prefix=this._prefixes[token.prefix];if(prefix===undefined)return this._error('Undefined prefix "'+token.prefix+':"',token);this._object=prefix+token.value;break;case"literal":this._object=token.value;return this._readDataTypeOrLang;case"[":var blank="_:b"+blankNodeCount++;this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:blank,type:"blank"});this._subject=blank;return this._readBlankNodeHead;case"(":this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:RDF_NIL,type:"list"});this._subject=null;return this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',token)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(token){return token.type==="{"?this._readGraph(token):this._readPredicate(token)},_readGraph:function(token){if(token.type!=="{")return this._error("Expected graph but got "+token.type,token);this._graph=this._subject,this._subject=null;return this._readSubject},_readBlankNodeHead:function(token){if(token.type==="]"){this._subject=null;return this._readBlankNodeTail(token)}else{this._predicate=null;return this._readPredicate(token)}},_readBlankNodeTail:function(token){if(token.type!=="]")return this._readBlankNodePunctuation(token);if(this._subject!==null)this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var triple=this._tripleStack.pop();this._subject=triple.subject;if(triple.object!==null){this._predicate=triple.predicate;this._object=triple.object;return this._getTripleEndReader()}return this._predicate!==null?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(token){switch(token.type){case"type":var value;if(token.prefix===""){if(this._base===null||absoluteIRI.test(token.value))value=token.value;else value=this._resolveIRI(token)}else{var prefix=this._prefixes[token.prefix];if(prefix===undefined)return this._error('Undefined prefix "'+token.prefix+':"',token);value=prefix+token.value}this._object+="^^"+value;return this._getTripleEndReader();case"langcode":this._object+="@"+token.value.toLowerCase();return this._getTripleEndReader();default:return this._getTripleEndReader().call(this,token)}},_readListItem:function(token){var item=null,itemHead=null,prevItemHead=this._subject,stack=this._tripleStack,parentTriple=stack[stack.length-1],next=this._readListItem;switch(token.type){case"IRI":if(this._base===null||absoluteIRI.test(token.value))item=token.value;else item=this._resolveIRI(token);break;case"prefixed":var prefix=this._prefixes[token.prefix];if(prefix===undefined)return this._error('Undefined prefix "'+token.prefix+':"',token);item=prefix+token.value;break;case"literal":item=token.value;next=this._readDataTypeOrLang;break;case"[":itemHead="_:b"+blankNodeCount++;item="_:b"+blankNodeCount++;stack.push({subject:itemHead,predicate:RDF_FIRST,object:item,type:"blank"});this._subject=item;next=this._readBlankNodeHead;break;case"(":itemHead="_:b"+blankNodeCount++;stack.push({subject:itemHead,predicate:RDF_FIRST,object:RDF_NIL,type:"list"});this._subject=null;next=this._readListItem;break;case")":stack.pop();if(stack.length!==0&&stack[stack.length-1].type==="list")this._callback(null,{subject:parentTriple.subject,predicate:parentTriple.predicate,object:parentTriple.object,graph:this._graph||""});this._subject=parentTriple.subject;if(parentTriple.predicate===null){next=this._readPredicate;if(parentTriple.subject===RDF_NIL)return next}else{this._predicate=parentTriple.predicate;this._object=parentTriple.object;next=this._getTripleEndReader();if(parentTriple.object===RDF_NIL)return next}itemHead=RDF_NIL;break;default:return this._error('Expected list item instead of "'+token.type+'"',token)}if(itemHead===null)this._subject=itemHead="_:b"+blankNodeCount++;if(prevItemHead===null){if(parentTriple.object===RDF_NIL)parentTriple.object=itemHead;else parentTriple.subject=itemHead}else{this._callback(null,{subject:prevItemHead,predicate:RDF_REST,object:itemHead,graph:this._graph||""})}if(item!==null)this._callback(null,{subject:itemHead,predicate:RDF_FIRST,object:item,graph:this._graph||""});return next},_readPunctuation:function(token){var next,subject=this._subject,graph=this._graph;switch(token.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",token);this._graph=null;case".":this._subject=null;next=this._readInTopContext;break;case";":next=this._readPredicate;break;case",":next=this._readObject;break;case"IRI":if(this._supportsQuads&&this._graph===null){if(this._base===null||absoluteIRI.test(token.value))graph=token.value;else graph=this._resolveIRI(token);subject=this._subject;next=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&this._graph===null){var prefix=this._prefixes[token.prefix];if(prefix===undefined)return this._error('Undefined prefix "'+token.prefix+':"',token);graph=prefix+token.value;next=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',token)}if(subject!==null)this._callback(null,{subject:subject,predicate:this._predicate,object:this._object,graph:graph||""});return next},_readBlankNodePunctuation:function(token){var next;switch(token.type){case";":next=this._readPredicate;break;case",":next=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',token)}this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});return next},_readQuadPunctuation:function(token){if(token.type!==".")return this._error("Expected dot to follow quad",token);return this._readInTopContext},_readPrefix:function(token){if(token.type!=="prefix")return this._error("Expected prefix to follow @prefix",token);this._prefix=token.value;return this._readPrefixIRI},_readPrefixIRI:function(token){if(token.type!=="IRI")return this._error('Expected IRI to follow prefix "'+this._prefix+':"',token);var prefixIRI;if(this._base===null||absoluteIRI.test(token.value))prefixIRI=token.value;else prefixIRI=this._resolveIRI(token);this._prefixes[this._prefix]=prefixIRI;this._prefixCallback(this._prefix,prefixIRI);return this._readDeclarationPunctuation},_readBaseIRI:function(token){if(token.type!=="IRI")return this._error("Expected IRI to follow base declaration",token);try{this._setBase(this._base===null||absoluteIRI.test(token.value)?token.value:this._resolveIRI(token))}catch(error){this._error(error.message,token)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(token){switch(token.type){case"IRI":case"prefixed":return this._readSubject(token),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",token)}},_readNamedGraphBlankLabel:function(token){if(token.type!=="]")return this._error("Invalid graph label",token);this._subject="_:b"+blankNodeCount++;return this._readGraph},_readDeclarationPunctuation:function(token){if(this._sparqlStyle)return this._readInTopContext(token);if(token.type!==".")return this._error("Expected declaration to end with a dot",token);return this._readInTopContext},_getTripleEndReader:function(){var stack=this._tripleStack;if(stack.length===0)return this._readPunctuation;switch(stack[stack.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(message,token){this._callback(new Error(message+" at line "+token.line+"."))},_resolveIRI:function(token){var iri=token.value;switch(iri[0]){case undefined:return this._base;case"#":return this._base+iri;case"?":return this._base.replace(/(?:\?.*)?$/,iri);case"/":return(iri[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(iri);default:return this._removeDotSegments(this._basePath+iri)}},_removeDotSegments:function(iri){if(!dotSegments.test(iri))return iri;var result="",length=iri.length,i=-1,pathStart=-1,segmentStart=0,next="/";while(i<length){switch(next){case":":if(pathStart<0){if(iri[++i]==="/"&&iri[++i]==="/")while((pathStart=i+1)<length&&iri[pathStart]!=="/")i=pathStart}break;case"?":case"#":i=length;break;case"/":if(iri[i+1]==="."){next=iri[++i+1];switch(next){case"/":result+=iri.substring(segmentStart,i-1);segmentStart=i+1;break;case undefined:case"?":case"#":return result+iri.substring(segmentStart,i)+iri.substr(i+1);case".":next=iri[++i+1];if(next===undefined||next==="/"||next==="?"||next==="#"){result+=iri.substring(segmentStart,i-2);if((segmentStart=result.lastIndexOf("/"))>=pathStart)result=result.substr(0,segmentStart);if(next!=="/")return result+"/"+iri.substr(i+1);segmentStart=i+1}}}}next=iri[++i]}return result+iri.substring(segmentStart)},parse:function(input,tripleCallback,prefixCallback){this._readCallback=this._readInTopContext;this._prefixes=Object.create(null);this._prefixes._=this._blankNodePrefix||"_:b"+blankNodePrefix+++"_";if(typeof input==="function")prefixCallback=tripleCallback,tripleCallback=input,input=null;this._callback=tripleCallback||noop;this._prefixCallback=prefixCallback||noop;var self=this;this._lexer.tokenize(input,function(error,token){if(error!==null)self._callback(error),self._callback=noop;else if(self._readCallback!==undefined)self._readCallback=self._readCallback(token)});if(!input){this.addChunk=this._lexer.addChunk;this.end=this._lexer.end}}};function noop(){}module.exports=N3Parser},module=>{var N3LiteralMatcher=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i;var RDF_PREFIX="http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDF_TYPE=RDF_PREFIX+"type";var escape=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,escapeAll=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,escapeReplacements={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function N3Writer(outputStream,options){if(!(this instanceof N3Writer))return new N3Writer(outputStream,options);if(outputStream&&typeof outputStream.write!=="function")options=outputStream,outputStream=null;options=options||{};if(!outputStream){var output="";this._outputStream={write:function(chunk,encoding,done){output+=chunk;done&&done()},end:function(done){done&&done(null,output)}};this._endStream=true}else{this._outputStream=outputStream;this._endStream=options.end===undefined?true:!!options.end}this._subject=null;if(!/triple|quad/i.test(options.format)){this._graph="";this._prefixIRIs=Object.create(null);options.prefixes&&this.addPrefixes(options.prefixes)}else{this._writeTriple=this._writeTripleLine}}N3Writer.prototype={_write:function(string,callback){this._outputStream.write(string,"utf8",callback)},_writeTriple:function(subject,predicate,object,graph,done){try{if(this._graph!==graph){this._write((this._subject===null?"":this._graph?"\n}\n":".\n")+(graph?this._encodeIriOrBlankNode(graph)+" {\n":""));this._subject=null;this._graph=graph[0]!=="["?graph:"]"}if(this._subject===subject){if(this._predicate===predicate)this._write(", "+this._encodeObject(object),done);else this._write(";\n    "+this._encodePredicate(this._predicate=predicate)+" "+this._encodeObject(object),done)}else this._write((this._subject===null?"":".\n")+this._encodeSubject(this._subject=subject)+" "+this._encodePredicate(this._predicate=predicate)+" "+this._encodeObject(object),done)}catch(error){done&&done(error)}},_writeTripleLine:function(subject,predicate,object,graph,done){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(subject)+" "+this._encodeIriOrBlankNode(predicate)+" "+this._encodeObject(object)+(graph?" "+this._encodeIriOrBlankNode(graph)+".\n":".\n"),done)}catch(error){done&&done(error)}},_encodeIriOrBlankNode:function(entity){var firstChar=entity[0];if(firstChar==="["||firstChar==="("||firstChar==="_"&&entity[1]===":")return entity;if(escape.test(entity))entity=entity.replace(escapeAll,characterReplacer);var prefixMatch=this._prefixRegex.exec(entity);return!prefixMatch?"<"+entity+">":!prefixMatch[1]?entity:this._prefixIRIs[prefixMatch[1]]+prefixMatch[2]},_encodeLiteral:function(value,type,language){if(escape.test(value))value=value.replace(escapeAll,characterReplacer);if(language)return'"'+value+'"@'+language;else if(type)return'"'+value+'"^^'+this._encodeIriOrBlankNode(type);else return'"'+value+'"'},_encodeSubject:function(subject){if(subject[0]==='"')throw new Error("A literal as subject is not allowed: "+subject);if(subject[0]==="[")this._subject="]";return this._encodeIriOrBlankNode(subject)},_encodePredicate:function(predicate){if(predicate[0]==='"')throw new Error("A literal as predicate is not allowed: "+predicate);return predicate===RDF_TYPE?"a":this._encodeIriOrBlankNode(predicate)},_encodeObject:function(object){if(object[0]!=='"')return this._encodeIriOrBlankNode(object);var match=N3LiteralMatcher.exec(object);if(!match)throw new Error("Invalid literal: "+object);return this._encodeLiteral(match[1],match[2],match[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(subject,predicate,object,graph,done){if(object===undefined)this._writeTriple(subject.subject,subject.predicate,subject.object,subject.graph||"",predicate);else if(typeof graph!=="string")this._writeTriple(subject,predicate,object,"",graph);else this._writeTriple(subject,predicate,object,graph,done)},addTriples:function(triples){for(var i=0;i<triples.length;i++)this.addTriple(triples[i])},addPrefix:function(prefix,iri,done){var prefixes={};prefixes[prefix]=iri;this.addPrefixes(prefixes,done)},addPrefixes:function(prefixes,done){var prefixIRIs=this._prefixIRIs,hasPrefixes=false;for(var prefix in prefixes){var iri=prefixes[prefix];if(/[#\/]$/.test(iri)&&prefixIRIs[iri]!==(prefix+=":")){hasPrefixes=true;prefixIRIs[iri]=prefix;if(this._subject!==null){this._write(this._graph?"\n}\n":".\n");this._subject=null,this._graph=""}this._write("@prefix "+prefix+" <"+iri+">.\n")}}if(hasPrefixes){var IRIlist="",prefixList="";for(var prefixIRI in prefixIRIs){IRIlist+=IRIlist?"|"+prefixIRI:prefixIRI;prefixList+=(prefixList?"|":"")+prefixIRIs[prefixIRI]}IRIlist=IRIlist.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^(?:"+prefixList+")[^/]*$|"+"^("+IRIlist+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(hasPrefixes?"\n":"",done)},blank:function(predicate,object){var children=predicate,child,length;if(predicate===undefined)children=[];else if(typeof predicate==="string")children=[{predicate:predicate,object:object}];else if(!("length"in predicate))children=[predicate];switch(length=children.length){case 0:return"[]";case 1:child=children[0];if(child.object[0]!=="[")return"[ "+this._encodePredicate(child.predicate)+" "+this._encodeObject(child.object)+" ]";default:var contents="[";for(var i=0;i<length;i++){child=children[i];if(child.predicate===predicate)contents+=", "+this._encodeObject(child.object);else{contents+=(i?";\n  ":"\n  ")+this._encodePredicate(child.predicate)+" "+this._encodeObject(child.object);predicate=child.predicate}}return contents+"\n]"}},list:function(elements){var length=elements&&elements.length||0,contents=new Array(length);for(var i=0;i<length;i++)contents[i]=this._encodeObject(elements[i]);return"("+contents.join(" ")+")"},_prefixRegex:/$0^/,end:function(done){if(this._subject!==null){this._write(this._graph?"\n}\n":".\n");this._subject=null}this._write=this._blockedWrite;var singleDone=done&&function(error,result){singleDone=null,done(error,result)};if(this._endStream){try{return this._outputStream.end(singleDone)}catch(error){}}singleDone&&singleDone()}};function characterReplacer(character){var result=escapeReplacements[character];if(result===undefined){if(character.length===1){result=character.charCodeAt(0).toString(16);result="\\u0000".substr(0,6-result.length)+result}else{result=((character.charCodeAt(0)-55296)*1024+character.charCodeAt(1)+9216).toString(16);result="\\U00000000".substr(0,10-result.length)+result}}return result}module.exports=N3Writer},(module,__unused_webpack_exports,__webpack_require__)=>{var expandPrefixedName=__webpack_require__(93).expandPrefixedName;function N3Store(triples,options){if(!(this instanceof N3Store))return new N3Store(triples,options);this._size=0;this._graphs=Object.create(null);this._entities=Object.create(null);this._entities["><"]=0;this._entityCount=0;this._blankNodeIndex=0;if(!options&&triples&&!triples[0])options=triples,triples=null;this._prefixes=Object.create(null);if(options&&options.prefixes)this.addPrefixes(options.prefixes);if(triples)this.addTriples(triples)}N3Store.prototype={get size(){var size=this._size;if(size!==null)return size;var graphs=this._graphs,subjects,subject;for(var graphKey in graphs)for(var subjectKey in subjects=graphs[graphKey].subjects)for(var predicateKey in subject=subjects[subjectKey])size+=Object.keys(subject[predicateKey]).length;return this._size=size},_addToIndex:function(index0,key0,key1,key2){var index1=index0[key0]||(index0[key0]={});var index2=index1[key1]||(index1[key1]={});index2[key2]=null},_removeFromIndex:function(index0,key0,key1,key2){var index1=index0[key0],index2=index1[key1],key;delete index2[key2];for(key in index2)return;delete index1[key1];for(key in index1)return;delete index0[key0]},_findInIndex:function(index0,key0,key1,key2,name0,name1,name2,graph){var results=[],entityKeys=Object.keys(this._entities),tmp,index1,index2;if(key0)(tmp=index0,index0={})[key0]=tmp[key0];for(var value0 in index0){var entity0=entityKeys[value0];if(index1=index0[value0]){if(key1)(tmp=index1,index1={})[key1]=tmp[key1];for(var value1 in index1){var entity1=entityKeys[value1];if(index2=index1[value1]){var values=key2?key2 in index2?[key2]:[]:Object.keys(index2);for(var l=values.length-1;l>=0;l--){var result={subject:"",predicate:"",object:"",graph:graph};result[name0]=entity0;result[name1]=entity1;result[name2]=entityKeys[values[l]];results.push(result)}}}}}return results},_countInIndex:function(index0,key0,key1,key2){var count=0,tmp,index1,index2;if(key0)(tmp=index0,index0={})[key0]=tmp[key0];for(var value0 in index0){if(index1=index0[value0]){if(key1)(tmp=index1,index1={})[key1]=tmp[key1];for(var value1 in index1){if(index2=index1[value1]){if(key2)key2 in index2&&count++;else count+=Object.keys(index2).length}}}}return count},addTriple:function(subject,predicate,object,graph){if(!predicate)graph=subject.graph,object=subject.object,predicate=subject.predicate,subject=subject.subject;graph=graph||"";var graphItem=this._graphs[graph];if(!graphItem){graphItem=this._graphs[graph]={subjects:{},predicates:{},objects:{}};Object.freeze(graphItem)}var entities=this._entities;subject=entities[subject]||(entities[subject]=++this._entityCount);predicate=entities[predicate]||(entities[predicate]=++this._entityCount);object=entities[object]||(entities[object]=++this._entityCount);this._addToIndex(graphItem.subjects,subject,predicate,object);this._addToIndex(graphItem.predicates,predicate,object,subject);this._addToIndex(graphItem.objects,object,subject,predicate);this._size=null},addTriples:function(triples){for(var i=triples.length-1;i>=0;i--)this.addTriple(triples[i])},addPrefix:function(prefix,iri){this._prefixes[prefix]=iri},addPrefixes:function(prefixes){for(var prefix in prefixes)this.addPrefix(prefix,prefixes[prefix])},removeTriple:function(subject,predicate,object,graph){if(!predicate)graph=subject.graph,object=subject.object,predicate=subject.predicate,subject=subject.subject;graph=graph||"";var graphItem,entities=this._entities,graphs=this._graphs;if(!(subject=entities[subject]))return;if(!(predicate=entities[predicate]))return;if(!(object=entities[object]))return;if(!(graphItem=graphs[graph]))return;var subjects,predicates;if(!(subjects=graphItem.subjects[subject]))return;if(!(predicates=subjects[predicate]))return;if(!(object in predicates))return;this._removeFromIndex(graphItem.subjects,subject,predicate,object);this._removeFromIndex(graphItem.predicates,predicate,object,subject);this._removeFromIndex(graphItem.objects,object,subject,predicate);if(this._size!==null)this._size--;for(subject in graphItem.subjects)return;delete graphs[graph]},removeTriples:function(triples){for(var i=triples.length-1;i>=0;i--)this.removeTriple(triples[i])},find:function(subject,predicate,object,graph){var prefixes=this._prefixes;return this.findByIRI(expandPrefixedName(subject,prefixes),expandPrefixedName(predicate,prefixes),expandPrefixedName(object,prefixes),expandPrefixedName(graph,prefixes))},findByIRI:function(subject,predicate,object,graph){graph=graph||"";var graphItem=this._graphs[graph],entities=this._entities;if(!graphItem)return[];if(subject&&!(subject=entities[subject]))return[];if(predicate&&!(predicate=entities[predicate]))return[];if(object&&!(object=entities[object]))return[];if(subject){if(object)return this._findInIndex(graphItem.objects,object,subject,predicate,"object","subject","predicate",graph);else return this._findInIndex(graphItem.subjects,subject,predicate,null,"subject","predicate","object",graph)}else if(predicate)return this._findInIndex(graphItem.predicates,predicate,object,null,"predicate","object","subject",graph);else if(object)return this._findInIndex(graphItem.objects,object,null,null,"object","subject","predicate",graph);else return this._findInIndex(graphItem.subjects,null,null,null,"subject","predicate","object",graph)},count:function(subject,predicate,object,graph){var prefixes=this._prefixes;return this.countByIRI(expandPrefixedName(subject,prefixes),expandPrefixedName(predicate,prefixes),expandPrefixedName(object,prefixes),expandPrefixedName(graph,prefixes))},countByIRI:function(subject,predicate,object,graph){graph=graph||"";var graphItem=this._graphs[graph],entities=this._entities;if(!graphItem)return 0;if(subject&&!(subject=entities[subject]))return 0;if(predicate&&!(predicate=entities[predicate]))return 0;if(object&&!(object=entities[object]))return 0;if(subject){if(object)return this._countInIndex(graphItem.objects,object,subject,predicate);else return this._countInIndex(graphItem.subjects,subject,predicate,object)}else if(predicate){return this._countInIndex(graphItem.predicates,predicate,object,subject)}else{return this._countInIndex(graphItem.objects,object,subject,predicate)}},createBlankNode:function(suggestedName){var name,index;if(suggestedName){name=suggestedName="_:"+suggestedName,index=1;while(this._entities[name])name=suggestedName+index++}else{do{name="_:b"+this._blankNodeIndex++}while(this._entities[name])}this._entities[name]=++this._entityCount;return name}};module.exports=N3Store},module=>{var Xsd="http://www.w3.org/2001/XMLSchema#";var XsdString=Xsd+"string";var XsdInteger=Xsd+"integer";var XsdDecimal=Xsd+"decimal";var XsdBoolean=Xsd+"boolean";var RdfLangString="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString";var N3Util={isIRI:function(entity){if(!entity)return entity;var firstChar=entity[0];return firstChar!=='"'&&firstChar!=="_"},isLiteral:function(entity){return entity&&entity[0]==='"'},isBlank:function(entity){return entity&&entity.substr(0,2)==="_:"},getLiteralValue:function(literal){var match=/^"([^]*)"/.exec(literal);if(!match)throw new Error(literal+" is not a literal");return match[1]},getLiteralType:function(literal){var match=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(literal);if(!match)throw new Error(literal+" is not a literal");return match[1]||(match[2]?RdfLangString:XsdString)},getLiteralLanguage:function(literal){var match=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(literal);if(!match)throw new Error(literal+" is not a literal");return match[1]?match[1].toLowerCase():""},isPrefixedName:function(entity){return entity&&/^[^:\/"']*:[^:\/"']+$/.test(entity)},expandPrefixedName:function(prefixedName,prefixes){var match=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(prefixedName),prefix,base,index;if(match)prefix=match[1],base=prefixes[prefix],index=match.index;if(base===undefined)return prefixedName;return index===0?base+prefixedName.substr(prefix.length+1):prefixedName.substr(0,index+3)+base+prefixedName.substr(index+prefix.length+4)},createIRI:function(iri){return iri&&iri[0]==='"'?N3Util.getLiteralValue(iri):iri},createLiteral:function(value,modifier){if(!modifier){switch(typeof value){case"boolean":modifier=XsdBoolean;break;case"number":if(isFinite(value)){modifier=value%1===0?XsdInteger:XsdDecimal;break}default:return'"'+value+'"'}}return'"'+value+(/^[a-z]+(-[a-z0-9]+)*$/i.test(modifier)?'"@'+modifier.toLowerCase():'"^^'+modifier)}};function addN3Util(parent,toPrototype){for(var name in N3Util)if(!toPrototype)parent[name]=N3Util[name];else parent.prototype[name]=applyToThis(N3Util[name]);return parent}function applyToThis(f){return function(a){return f(this,a)}}module.exports=addN3Util(addN3Util)},(module,__unused_webpack_exports,__webpack_require__)=>{var Transform=__webpack_require__(95).Transform,util=__webpack_require__(10),N3Parser=__webpack_require__(90);function N3StreamParser(options){if(!(this instanceof N3StreamParser))return new N3StreamParser(options);Transform.call(this,{decodeStrings:true});this._readableState.objectMode=true;var self=this,parser=new N3Parser(options);parser.parse(function(error,triple){triple&&self.push(triple)||error&&self.emit("error",error)},this.emit.bind(this,"prefix"));this._transform=function(chunk,encoding,done){parser.addChunk(chunk);done()};this._flush=function(done){parser.end();done()}}util.inherits(N3StreamParser,Transform);module.exports=N3StreamParser},()=>{},(module,__unused_webpack_exports,__webpack_require__)=>{var Transform=__webpack_require__(95).Transform,util=__webpack_require__(10),N3Writer=__webpack_require__(91);function N3StreamWriter(options){if(!(this instanceof N3StreamWriter))return new N3StreamWriter(options);Transform.call(this,{encoding:"utf8"});this._writableState.objectMode=true;var self=this;var writer=new N3Writer({write:function(chunk,encoding,callback){self.push(chunk);callback&&callback()},end:function(callback){self.push(null);callback&&callback()}},options);this._transform=function(triple,encoding,done){writer.addTriple(triple,done)};this._flush=function(done){writer.end(done)}}util.inherits(N3StreamWriter,Transform);module.exports=N3StreamWriter},(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./N3Lexer":89,"./N3Lexer.js":89,"./N3Parser":90,"./N3Parser.js":90,"./N3Store":92,"./N3Store.js":92,"./N3StreamParser":94,"./N3StreamParser.js":94,"./N3StreamWriter":96,"./N3StreamWriter.js":96,"./N3Util":93,"./N3Util.js":93,"./N3Writer":91,"./N3Writer.js":91};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");e.code="MODULE_NOT_FOUND";throw e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)};webpackContext.resolve=webpackContextResolve;module.exports=webpackContext;webpackContext.id=97},(module,__unused_webpack_exports,__webpack_require__)=>{var RdfLibParser=function(store){var RDFParser={};RDFParser.ns={RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"};RDFParser.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};this.frameFactory=function(parser,parent,element){return{NODE:1,ARC:2,parent:parent,parser:parser,store:parser.store,element:element,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:false,terminateFrame:function(){if(this.collection){this.node.close()}},addSymbol:function(type,uri){uri=uriJoin(uri,this.base);this.node=this.store.sym(uri);this.nodeType=type},loadTriple:function(){if(this.parent.parent.collection){this.parent.parent.node.append(this.node)}else{this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why)}if(this.parent.rdfid!=null){var triple=this.store.sym(uriJoin("#"+this.parent.rdfid,this.base));this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"type"),this.store.sym(RDFParser.ns.RDF+"Statement"),this.parser.why);this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"subject"),this.parent.parent.node,this.parser.why);this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"predicate"),this.parent.node,this.parser.why);this.store.add(triple,this.store.sym(RDFParser.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return this.parent!=null&&this.parent.parent!=null&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(uri){this.addSymbol(this.NODE,uri);if(this.isTripleToLoad()){this.loadTriple()}},addCollection:function(){this.nodeType=this.NODE;this.node=this.store.collection();this.collection=true;if(this.isTripleToLoad()){this.loadTriple()}},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(id){if(id!=null){if(this.parser.bnodes[id]!=null){this.node=this.parser.bnodes[id]}else{this.node=this.parser.bnodes[id]=this.store.bnode()}}else{this.node=this.store.bnode()}this.nodeType=this.NODE;if(this.isTripleToLoad()){this.loadTriple()}},addArc:function(uri){if(uri===RDFParser.ns.RDF+"li"){uri=RDFParser.ns.RDF+"_"+this.parent.listIndex;this.parent.listIndex++}this.addSymbol(this.ARC,uri)},addLiteral:function(value){if(this.parent.datatype){this.node=this.store.literal(value,"",this.store.sym(this.parent.datatype))}else{this.node=this.store.literal(value,this.lang)}this.nodeType=this.NODE;if(this.isTripleToLoad()){this.loadTriple()}}}};this.getAttributeNodeNS=function(node,uri,name){var attributeNode=null;if(node.getAttributeNodeNS){attributeNode=node.getAttributeNodeNS(uri,name)}else{var attributes=node.attributes;var potentialNode,fullName;for(var i=0;i<attributes.length;++i){potentialNode=attributes[i];if(potentialNode.namespaceURI===uri){fullName=potentialNode.prefix?potentialNode.prefix+":"+name:name;if(fullName===potentialNode.nodeName){attributeNode=potentialNode;break}}}}return attributeNode};this.store=store;this.bnodes={};this.why=null;this.reify=false;this.parse=function(document,base,why){var children=document.childNodes;this.cleanParser();var root;if(document.nodeType===RDFParser.nodeType.DOCUMENT){for(var c=0;c<children.length;c++){if(children[c].nodeType===RDFParser.nodeType.ELEMENT){root=children[c];break}}}else if(document.nodeType===RDFParser.nodeType.ELEMENT){root=document}else{throw new Error("RDFParser: can't find root in "+base+". Halting. ")}this.why=why;var f=this.frameFactory(this);this.base=base;f.base=base;f.lang="";this.parseDOM(this.buildFrame(f,root));return true};this.parseDOM=function(frame){var rdfid;var elementURI=function(el){var result="";if(el.namespaceURI==null){throw new Error("RDF/XML syntax error: No namespace for "+el.localName+" in "+this.base)}if(el.namespaceURI){result=result+el.namespaceURI}if(el.localName){result=result+el.localName}else if(el.nodeName){if(el.nodeName.indexOf(":")>=0)result=result+el.nodeName.split(":")[1];else result=result+el.nodeName}return result}.bind(this);var dig=true;while(frame.parent){var dom=frame.element;var attrs=dom.attributes;if(dom.nodeType===RDFParser.nodeType.TEXT||dom.nodeType===RDFParser.nodeType.CDATA_SECTION){if(frame.parent.nodeType==frame.NODE){frame.addArc(RDFParser.ns.RDF+"value");frame=this.buildFrame(frame)}frame.addLiteral(dom.nodeValue)}else if(elementURI(dom)!==RDFParser.ns.RDF+"RDF"){if(frame.parent&&frame.parent.collection){frame.addCollectionArc();frame=this.buildFrame(frame,frame.element);frame.parent.element=null}if(!frame.parent||!frame.parent.nodeType||frame.parent.nodeType===frame.ARC){var about=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"about")||this.getAttributeNodeNS(dom,null,"about");rdfid=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"ID");if(about&&rdfid){throw new Error("RDFParser: "+dom.nodeName+" has both rdf:id and rdf:about."+" Halting. Only one of these"+" properties may be specified on a"+" node.")}if(!about&&rdfid){frame.addNode("#"+rdfid.nodeValue);dom.removeAttributeNode(rdfid)}else if(about==null&&rdfid==null){var bnid=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"nodeID");if(bnid){frame.addBNode(bnid.nodeValue);dom.removeAttributeNode(bnid)}else{frame.addBNode()}}else{frame.addNode(about.nodeValue);dom.removeAttributeNode(about)}var rdftype=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"type");if(RDFParser.ns.RDF+"Description"!==elementURI(dom)){rdftype={nodeValue:elementURI(dom)}}if(rdftype!=null){this.store.add(frame.node,this.store.sym(RDFParser.ns.RDF+"type"),this.store.sym(uriJoin(rdftype.nodeValue,frame.base)),this.why);if(rdftype.nodeName){dom.removeAttributeNode(rdftype)}}for(var x=attrs.length-1;x>=0;x--){this.store.add(frame.node,this.store.sym(elementURI(attrs[x])),this.store.literal(attrs[x].nodeValue,frame.lang),this.why)}}else{frame.addArc(elementURI(dom));if(this.reify){rdfid=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"ID");if(rdfid){frame.rdfid=rdfid.nodeValue;dom.removeAttributeNode(rdfid)}}var parsetype=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"parseType");var datatype=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"datatype");if(datatype){frame.datatype=datatype.nodeValue;dom.removeAttributeNode(datatype)}if(parsetype){var nv=parsetype.nodeValue;if(nv==="Literal"){frame.datatype=RDFParser.ns.RDF+"XMLLiteral";frame=this.buildFrame(frame);frame.addLiteral(dom);dig=false}else if(nv==="Resource"){frame=this.buildFrame(frame,frame.element);frame.parent.element=null;frame.addBNode()}else if(nv==="Collection"){frame=this.buildFrame(frame,frame.element);frame.parent.element=null;frame.addCollection()}dom.removeAttributeNode(parsetype)}if(attrs.length!==0){var resource=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"resource");var bnid2=this.getAttributeNodeNS(dom,RDFParser.ns.RDF,"nodeID");frame=this.buildFrame(frame);if(resource){frame.addNode(resource.nodeValue);dom.removeAttributeNode(resource)}else{if(bnid2){frame.addBNode(bnid2.nodeValue);dom.removeAttributeNode(bnid2)}else{frame.addBNode()}}for(var x1=attrs.length-1;x1>=0;x1--){var f=this.buildFrame(frame);f.addArc(elementURI(attrs[x1]));if(elementURI(attrs[x1])===RDFParser.ns.RDF+"type"){this.buildFrame(f).addNode(attrs[x1].nodeValue)}else{this.buildFrame(f).addLiteral(attrs[x1].nodeValue)}}}else if(dom.childNodes.length===0){this.buildFrame(frame).addLiteral("")}}}dom=frame.element;while(frame.parent){var pframe=frame;while(dom==null){frame=frame.parent;dom=frame.element}var candidate=dom.childNodes&&dom.childNodes[frame.lastChild];if(!candidate||!dig){frame.terminateFrame();if(!(frame=frame.parent)){break}dom=frame.element;dig=true}else if(candidate.nodeType!==RDFParser.nodeType.ELEMENT&&candidate.nodeType!==RDFParser.nodeType.TEXT&&candidate.nodeType!==RDFParser.nodeType.CDATA_SECTION||(candidate.nodeType===RDFParser.nodeType.TEXT||candidate.nodeType===RDFParser.nodeType.CDATA_SECTION)&&dom.childNodes.length!==1){frame.lastChild++}else{frame.lastChild++;frame=this.buildFrame(pframe,dom.childNodes[frame.lastChild-1]);break}}}};this.cleanParser=function(){this.bnodes={};this.why=null};this.buildFrame=function(parent,element){var frame=this.frameFactory(this,parent,element);if(parent){frame.base=parent.base;frame.lang=parent.lang}if(!element||element.nodeType===RDFParser.nodeType.TEXT||element.nodeType===RDFParser.nodeType.CDATA_SECTION){return frame}var attrs=element.attributes;var base=element.getAttributeNode("xml:base");if(base!=null){frame.base=base.nodeValue;element.removeAttribute("xml:base")}var lang=element.getAttributeNode("xml:lang");if(lang!=null){frame.lang=lang.nodeValue;element.removeAttribute("xml:lang")}for(var x=attrs.length-1;x>=0;x--){if(attrs[x].nodeName.substr(0,3)==="xml"){if(attrs[x].name.slice(0,6)==="xmlns:"){var uri=attrs[x].nodeValue;if(this.base)uri=uriJoin(uri,this.base);this.store.setPrefixForURI(attrs[x].name.slice(6),uri)}element.removeAttributeNode(attrs[x])}}return frame}};var uriJoin=function(given,base){var baseColon,baseHash,baseScheme,baseSingle,colon,lastSlash,path;baseHash=base.indexOf("#");if(baseHash>0){base=base.slice(0,baseHash)}if(given.length===0){return base}if(given.indexOf("#")===0){return base+given}colon=given.indexOf(":");if(colon>=0){return given}baseColon=base.indexOf(":");if(base.length===0){return given}if(baseColon<0){alert("Invalid base: "+base+" in join with given: "+given);return given}baseScheme=base.slice(0,+baseColon+1||9e9);if(given.indexOf("//")===0){return baseScheme+given}if(base.indexOf("//",baseColon)===baseColon+1){baseSingle=base.indexOf("/",baseColon+3);if(baseSingle<0){if(base.length-baseColon-3>0){return base+"/"+given}else{return baseScheme+given}}}else{baseSingle=base.indexOf("/",baseColon+1);if(baseSingle<0){if(base.length-baseColon-1>0){return base+"/"+given}else{return baseScheme+given}}}if(given.indexOf("/")===0){return base.slice(0,baseSingle)+given}path=base.slice(baseSingle);lastSlash=path.lastIndexOf("/");if(lastSlash<0){return baseScheme+given}if(lastSlash>=0&&lastSlash<path.length-1){path=path.slice(0,+lastSlash+1||9e9)}path+=given;while(path.match(/[^\/]*\/\.\.\//)){path=path.replace(/[^\/]*\/\.\.\//,"")}path=path.replace(/\.\//g,"");path=path.replace(/\/\.$/,"/");return base.slice(0,baseSingle)+path};var rdf=__webpack_require__(4);var util=__webpack_require__(10);var DomParser=__webpack_require__(77);var RdfXmlParser=function(){DomParser.call(this,rdf)};util.inherits(RdfXmlParser,DomParser);RdfXmlParser.prototype.process=function(toparse,callback,base,filter,done){var self=this;return new Promise(function(resolve,reject){base=base||"";filter=filter||function(){return true};done=done||function(){};var domNodesToString=function(nodes){var xmlString="";for(var i=0;i<nodes.length;i++){xmlString+=nodes[i].toString()}return xmlString};var store={};store.add=function(s,p,o){var triple=self.rdf.createTriple(s,p,o);if(filter(triple)){callback(triple)}};store.bnode=function(){return self.rdf.createBlankNode()};store.literal=function(value,language,type){if(type&&type.toString()==="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"){value=domNodesToString(value.childNodes)}return self.rdf.createLiteral(value,language,type)};store.setPrefixForURI=function(){};store.sym=function(iri){return self.rdf.createNamedNode(iri)};try{if(typeof toparse==="string"){toparse=self.parseXmlDom(toparse)}new RdfLibParser(store).parse(toparse,base)}catch(error){done(error);reject(error)}done();resolve()})};var instance=new RdfXmlParser;for(var property in instance){RdfXmlParser[property]=instance[property]}module.exports=RdfXmlParser},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var util=__webpack_require__(10);var AbstractSerializer=__webpack_require__(100);function JsonLdSerializer(options){this.options=options||{};AbstractSerializer.call(this,rdf)}util.inherits(JsonLdSerializer,AbstractSerializer);JsonLdSerializer.prototype.serialize=function(graph,done){var self=this;return new Promise(function(resolve){done=done||function(){};var jsonGraph=[];var subjects={};var subjectIndex=function(subject){var value=subject.nominalValue;if(typeof subjects[value]==="undefined"){if(subject.interfaceName==="BlankNode"){jsonGraph.push({"@id":"_:"+value})}else{jsonGraph.push({"@id":value})}subjects[value]=jsonGraph.length-1}return subjects[value]};var objectValue=function(object){var value=object.nominalValue;if(object.interfaceName==="NamedNode"){return{"@id":value}}else if(object.interfaceName==="BlankNode"){return{"@id":"_:"+value}}else{if(object.language){return{"@language":object.language,"@value":value}}else if(object.datatype&&!object.datatype.equals("http://www.w3.org/2001/XMLSchema#string")){return{"@type":object.datatype.nominalValue,"@value":value}}else{return value}}};graph.forEach(function(triple){var index=subjectIndex(triple.subject);var predicateValue=triple.predicate.nominalValue;if(predicateValue==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"){if(typeof jsonGraph[index]["@type"]==="undefined"){jsonGraph[index]["@type"]=[]}jsonGraph[index]["@type"].push(triple.object.nominalValue)}else{if(typeof jsonGraph[index][predicateValue]==="undefined"){jsonGraph[index][predicateValue]=objectValue(triple.object)}else{if(!Array.isArray(jsonGraph[index][predicateValue])){jsonGraph[index][predicateValue]=[jsonGraph[index][predicateValue]]}jsonGraph[index][predicateValue].push(objectValue(triple.object))}}});if(self.options.outputString){jsonGraph=JSON.stringify(jsonGraph)}done(null,jsonGraph);resolve(jsonGraph)})};var instance=new JsonLdSerializer;for(var property in instance){JsonLdSerializer[property]=instance[property]}module.exports=JsonLdSerializer},(module,__unused_webpack_exports,__webpack_require__)=>{var inherits=__webpack_require__(31);var Readable=__webpack_require__(53).Readable;function AbstractSerializer(rdf){this.rdf=rdf}AbstractSerializer.prototype.stream=function(inputStream,base,filter){var self=this;var outputStream=new AbstractSerializer.DataReadStream;AbstractSerializer.streamToGraph(inputStream,this.rdf.createGraph()).then(function(graph){self.serialize(graph,function(error,data){if(error){outputStream.emit("error",error)}else{outputStream.push(data);outputStream.emit("end")}})}).catch(function(error){outputStream.emit("error",error)});return outputStream};AbstractSerializer.streamToGraph=function(stream,graph){return new Promise(function(resolve,reject){if(typeof stream!=="object"||typeof stream.read!=="function"){return resolve(stream)}stream.on("data",function(triple){graph.add(triple)});stream.on("end",function(){resolve(graph)});stream.on("error",function(error){reject(error)})})};AbstractSerializer.DataReadStream=function(){Readable.call(this,{objectMode:true});this._read=function(){return 0}};inherits(AbstractSerializer.DataReadStream,Readable);module.exports=AbstractSerializer},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var util=__webpack_require__(10);var AbstractSerializer=__webpack_require__(100);var N3=__webpack_require__(88);function N3Serializer(options){this.options=options||{};this.options.usePrefixMap="usePrefixMap"in this.options?this.options.usePrefixMap:true;AbstractSerializer.call(this,rdf)}util.inherits(N3Serializer,AbstractSerializer);N3Serializer.prototype.serialize=function(graph,done){var self=this;return new Promise(function(resolve,reject){done=done||function(){};var writerOptions={};var writer;if(self.options.usePrefixMap){writerOptions.prefixes={};Object.keys(rdf.prefixes).forEach(function(prefix){if(typeof rdf.prefixes[prefix]!=="string"){return}writerOptions.prefixes[prefix]=rdf.prefixes[prefix]})}writer=N3.Writer(writerOptions);var createN3Node=function(node){if(node.interfaceName.toString()==="NamedNode"){return node.nominalValue}else if(node.interfaceName.toString()==="BlankNode"){return"_:"+node.nominalValue}else{if(node.language){return'"'+node.nominalValue+'"@'+node.language}else if(node.datatype&&!node.datatype.equals("http://www.w3.org/2001/XMLSchema#string")){return'"'+node.nominalValue+'"^^'+node.datatype.nominalValue}else{return'"'+node.nominalValue+'"'}}};graph.forEach(function(triple){writer.addTriple(createN3Node(triple.subject),createN3Node(triple.predicate),createN3Node(triple.object))});writer.end(function(error,result){if(error){done(error);reject(error)}else{done(null,result);resolve(result)}})})};var instance=new N3Serializer;for(var property in instance){N3Serializer[property]=instance[property]}module.exports=N3Serializer},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var util=__webpack_require__(10);var AbstractSerializer=__webpack_require__(100);function NTriplesSerializer(){AbstractSerializer.call(this,rdf)}util.inherits(NTriplesSerializer,AbstractSerializer);NTriplesSerializer.prototype.serialize=function(graph,done){return new Promise(function(resolve){done=done||function(){};var nTriples="";graph.forEach(function(triple){nTriples+=triple.toString()+"\n"});done(null,nTriples);resolve(nTriples)})};var instance=new NTriplesSerializer;for(var property in instance){NTriplesSerializer[property]=instance[property]}module.exports=NTriplesSerializer},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var util=__webpack_require__(10);var AbstractSerializer=__webpack_require__(100);function SparqlUpdateSerializer(){AbstractSerializer.call(this,rdf)}util.inherits(SparqlUpdateSerializer,AbstractSerializer);SparqlUpdateSerializer.prototype.serialize=function(graph,done){return new Promise(function(resolve){done=done||function(){};var nTriples="INSERT DATA { ";graph.forEach(function(triple){nTriples+=triple.toString()+"\n"});nTriples+=" }";done(null,nTriples);resolve(nTriples)})};var instance=new SparqlUpdateSerializer;for(var property in instance){SparqlUpdateSerializer[property]=instance[property]}module.exports=SparqlUpdateSerializer},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var rdf=__webpack_require__(4);var SimpleArray=__webpack_require__(105);var SimpleContext=__webpack_require__(106);var SimpleRDF=function(){function SimpleRDF(context,iri,graph){_classCallCheck(this,SimpleRDF);this._iri=buildIri(iri);this._objects={};this.context(context);this.graph(graph||rdf.createGraph())}_createClass(SimpleRDF,[{key:"toString",value:function toString(){return this._graph.toString()}},{key:"context",value:function context(_context){var _this=this;if(_context){this._context=_context instanceof SimpleContext?_context:new SimpleContext(_context);this._context.descriptions().forEach(function(description){addProperty.call(_this,description.predicate,description.predicate,description.options);addProperty.call(_this,description.property,description.predicate,description.options)})}return this._context}},{key:"iri",value:function iri(_iri){if(_iri){_iri=buildIri(_iri);updateSubject(this._graph,this._iri,_iri);updateObject(this._graph,this._iri,_iri);this._iri=_iri}return this._iri}},{key:"graph",value:function graph(_graph){var _this2=this;if(_graph){this._graph=_graph;this._graph.match(this._iri).forEach(function(triple){var predicate=triple.predicate.toString();var descriptor=Object.getOwnPropertyDescriptor(_this2,predicate);if(!descriptor){addProperty.call(_this2,triple.predicate.toString(),predicate)}})}return this._graph}},{key:"child",value:function child(iri){return new SimpleRDF(this._context,iri,this._graph)}}]);return SimpleRDF}();function buildIri(iri){if(typeof iri==="string"){return rdf.createNamedNode(iri)}else{return iri||rdf.createBlankNode()}}function updateSubject(graph,oldSubject,newSubject){graph.match(oldSubject).forEach(function(triple){graph.remove(triple);graph.add(rdf.createTriple(newSubject,triple.predicate,triple.object))})}function updateObject(graph,oldObject,newObject){graph.match(null,null,oldObject).forEach(function(triple){graph.remove(triple);graph.add(rdf.createTriple(triple.subject,triple.predicate,newObject))})}function addValues(self,predicate,options,values){if(!Array.isArray(values)){values=[values]}values.forEach(function(value){if(typeof value==="string"){if(options.namedNode){self._graph.add(rdf.createTriple(self._iri,predicate,rdf.createNamedNode(value)))}else{self._graph.add(rdf.createTriple(self._iri,predicate,rdf.createLiteral(value)))}}else if((typeof value==="undefined"?"undefined":_typeof(value))==="object"){if(value.interfaceName){self._graph.add(rdf.createTriple(self._iri,predicate,value))}else{self._graph.add(rdf.createTriple(self._iri,predicate,value._iri));if(!options.array){self._objects[predicate]=value}}}else if(typeof value==="boolean"){self._graph.add(rdf.createTriple(self._iri,predicate,rdf.createLiteral(value,null,"http://www.w3.org/2001/XMLSchema#boolean")))}else if(typeof value==="number"){self._graph.add(rdf.createTriple(self._iri,predicate,rdf.createLiteral(value,null,rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#double"))))}else{console.warn("unsupported type: "+(typeof value==="undefined"?"undefined":_typeof(value)))}})}function getValuesArray(self,predicate,options){return self._graph.match(self._iri,predicate).map(function(triple){if(triple.object.interfaceName!=="Literal"){if(options.namedNode){return triple.object.toString()}else{return self.child(triple.object)}}else{return triple.object.toString()}})}function getValues(self,predicate,options){if(predicate in self._objects){return self._objects[predicate]}var values=getValuesArray(self,predicate,options);if(!options.array){values=values.shift()}else{values=self._objects[predicate]=new SimpleArray(addValues.bind(null,self,predicate,options),getValues.bind(null,self,predicate,options),removeValues.bind(null,self,predicate,options),getValuesArray(self,predicate,options))}return values}function removeValues(self,predicate,options){self._graph.removeMatches(self._iri,predicate)}function addProperty(property,predicate,options){var _this3=this;options=options||{};predicate=rdf.createNamedNode(predicate.toString());Object.defineProperty(this,property,{configurable:true,get:function get(){return getValues(_this3,predicate,options)},set:function set(values){removeValues(_this3,predicate,options);addValues(_this3,predicate,options,values)}})}module.exports=function(context,iri,graph,store){return new SimpleRDF(context,iri,graph,store)};module.exports.isArray=function(obj){return obj instanceof SimpleArray};module.exports.SimpleRDF=SimpleRDF},module=>{"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var SimpleArray=function(){function SimpleArray(addValue,getValue,removeValue,array){_classCallCheck(this,SimpleArray);this._addValue=addValue;this._getValue=getValue;this._removeValue=removeValue;this._array=array||[]}_createClass(SimpleArray,[{key:"at",value:function at(index,value){if(value!==undefined){if(this._array[index]!==undefined){this._removeValue(this._array[index])}this._addValue(this._array[index]=value)}return this._array[index]}},{key:"indexOf",value:function indexOf(searchElement,fromIndex){return this._array.indexOf(searchElement,fromIndex)}},{key:"forEach",value:function forEach(callback,thisArg){return this._array.forEach(callback,thisArg)}},{key:"map",value:function map(callback,thisArg){return this._array.map(callback,thisArg)}},{key:"reduce",value:function reduce(callback,initialValue){return this._array.reduce(callback,initialValue)}},{key:"reduceRight",value:function reduceRight(callback,initialValue){return this._array.reduceRight(callback,initialValue)}},{key:"push",value:function push(value){var index=this._array.push(value);this._addValue(value);return index}},{key:"pop",value:function pop(){var popped=this._array.pop();this._removeValue(popped);return popped}}]);return SimpleArray}();module.exports=SimpleArray},module=>{"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Context=function(){function Context(json){_classCallCheck(this,Context);this._json=json}_createClass(Context,[{key:"description",value:function description(property){if(!(property in this._json)){return null}var json=this._json[property];var description={};description.property=property;description.options={array:false,namedNode:false};if(typeof json==="string"){description.predicate=json}else{description.predicate=json["@id"];description.options.array="@container"in json&&json["@container"]==="@set"||"@array"in json&&json["@array"];description.options.namedNode="@type"in json&&json["@type"]==="@id"}return description}},{key:"descriptions",value:function descriptions(){var _this=this;return this.properties().map(function(property){return _this.description(property)})}},{key:"properties",value:function properties(){return Object.keys(this._json)}}]);return Context}();module.exports=Context},(module,__unused_webpack_exports,__webpack_require__)=>{var rdf=__webpack_require__(4);var inherits=__webpack_require__(31);var DomParser=__webpack_require__(77);var RDFaProcessor=__webpack_require__(108).RDFaProcessor;var RdfaParser=function(){DomParser.call(this,rdf)};inherits(RdfaParser,DomParser);RdfaParser.prototype.process=function(data,callback,base,filter,done){var self=this;return new Promise(function(resolve,reject){base=base||"http://localhost/";filter=filter||function(){return true};done=done||function(){};try{var blankNodeMap={};var createNode=function(value){if(!value){return null}if(typeof value==="string"){if(value.substring(0,2)==="_:"){if(!(value in blankNodeMap)){blankNodeMap[value]=rdf.createBlankNode()}return blankNodeMap[value]}else{return rdf.createNamedNode(value)}}else{if(value.type==="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML"){if(value.value.length===0){return rdf.createLiteral("",null,rdf.createNamedNode(value.type))}return rdf.createLiteral(value.value[0].parentNode.textContent,value.language,rdf.createNamedNode(value.type))}if(value.type==="http://www.w3.org/1999/02/22-rdf-syntax-ns#object"){return createNode(value.value)}else{var datatype=createNode(value.type);return rdf.createLiteral(value.value,value.language,datatype)}}};var processor=new RDFaProcessor;processor.finishedHandlers.push(function(){done();resolve()});processor.addTriple=function(greenOrigin,greenSubject,greenPredicate,greenObject){var subject=createNode(greenSubject);var predicate=createNode(greenPredicate);var object=createNode(greenObject);if(subject&&predicate&&object){var triple=rdf.createTriple(subject,predicate,object);if(filter(triple)){callback(triple)}}};if(typeof data==="string"){data=self.parseHtmlDom(data,base)}processor.process(data,{baseURI:base})}catch(error){done(error);reject(error)}})};var instance=new RdfaParser;for(var property in instance){RdfaParser[property]=instance[property]}module.exports=RdfaParser},(module,__unused_webpack_exports,__webpack_require__)=>{module.exports={RDFaProcessor:__webpack_require__(109)}},(module,__unused_webpack_exports,__webpack_require__)=>{if(true){var URIResolver=__webpack_require__(110)}RDFaProcessor.prototype=new URIResolver;RDFaProcessor.prototype.constructor=RDFaProcessor;function RDFaProcessor(targetObject){if(targetObject){this.target=targetObject}else{this.target={graph:{subjects:{},prefixes:{},terms:{}}}}this.theOne="_:"+(new Date).getTime();this.language=null;this.vocabulary=null;this.blankCounter=0;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.inXHTMLMode=false;this.absURIRE=/[\w\_\-]+:\S+/;this.finishedHandlers=[];this.init()}RDFaProcessor.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};RDFaProcessor.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";RDFaProcessor.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";RDFaProcessor.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";RDFaProcessor.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";RDFaProcessor.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";RDFaProcessor.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]";RDFaProcessor.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]";RDFaProcessor.NCNAME=new RegExp("^"+RDFaProcessor.nameStartChar+RDFaProcessor.nameChar+"*$");RDFaProcessor.trim=function(str){return str.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};RDFaProcessor.prototype.tokenize=function(str){return RDFaProcessor.trim(str).split(/\s+/)};RDFaProcessor.prototype.parseSafeCURIEOrCURIEOrURI=function(value,prefixes,base){value=RDFaProcessor.trim(value);if(value.charAt(0)=="["&&value.charAt(value.length-1)=="]"){value=value.substring(1,value.length-1);value=value.trim(value);if(value.length==0){return null}if(value=="_:"){return this.theOne}return this.parseCURIE(value,prefixes,base)}else{return this.parseCURIEOrURI(value,prefixes,base)}};RDFaProcessor.prototype.parseCURIE=function(value,prefixes,base){var colon=value.indexOf(":");if(colon>=0){var prefix=value.substring(0,colon);if(prefix==""){var uri=prefixes[""];return uri?uri+value.substring(colon+1):null}else if(prefix=="_"){return"_:"+value.substring(colon+1)}else if(RDFaProcessor.NCNAME.test(prefix)){var uri=prefixes[prefix];if(uri){return uri+value.substring(colon+1)}}}return null};RDFaProcessor.prototype.parseCURIEOrURI=function(value,prefixes,base){var curie=this.parseCURIE(value,prefixes,base);if(curie){return curie}return this.resolveAndNormalize(base,value)};RDFaProcessor.prototype.parsePredicate=function(value,defaultVocabulary,terms,prefixes,base,ignoreTerms){if(value==""){return null}var predicate=this.parseTermOrCURIEOrAbsURI(value,defaultVocabulary,ignoreTerms?null:terms,prefixes,base);if(predicate&&predicate.indexOf("_:")==0){return null}return predicate};RDFaProcessor.prototype.parseTermOrCURIEOrURI=function(value,defaultVocabulary,terms,prefixes,base){value=RDFaProcessor.trim(value);var curie=this.parseCURIE(value,prefixes,base);if(curie){return curie}else{var term=terms[value];if(term){return term}var lcvalue=value.toLowerCase();term=terms[lcvalue];if(term){return term}if(defaultVocabulary&&!this.absURIRE.exec(value)){return defaultVocabulary+value}}return this.resolveAndNormalize(base,value)};RDFaProcessor.prototype.parseTermOrCURIEOrAbsURI=function(value,defaultVocabulary,terms,prefixes,base){value=RDFaProcessor.trim(value);var curie=this.parseCURIE(value,prefixes,base);if(curie){return curie}else if(terms){if(defaultVocabulary&&!this.absURIRE.exec(value)){return defaultVocabulary+value}var term=terms[value];if(term){return term}var lcvalue=value.toLowerCase();term=terms[lcvalue];if(term){return term}}if(this.absURIRE.exec(value)){return this.resolveAndNormalize(base,value)}return null};RDFaProcessor.prototype.resolveAndNormalize=function(base,href){var u=base.resolve(href);var parsed=this.parseURI(u);parsed.normalize();return parsed.spec};RDFaProcessor.prototype.parsePrefixMappings=function(str,target){var values=this.tokenize(str);var prefix=null;var uri=null;for(var i=0;i<values.length;i++){if(values[i][values[i].length-1]==":"){prefix=values[i].substring(0,values[i].length-1)}else if(prefix){target[prefix]=this.target.baseURI?this.target.baseURI.resolve(values[i]):values[i];prefix=null}}};RDFaProcessor.prototype.copyMappings=function(mappings){var newMappings={};for(var k in mappings){newMappings[k]=mappings[k]}return newMappings};RDFaProcessor.prototype.ancestorPath=function(node){var path="";while(node&&node.nodeType!=9){path="/"+node.localName+path;node=node.parentNode}return path};RDFaProcessor.prototype.setContext=function(node){if(node.localName=="html"&&node.getAttribute("version")=="XHTML+RDFa 1.1"){this.setXHTMLContext()}else if(node.localName=="html"||node.namespaceURI=="http://www.w3.org/1999/xhtml"){if(node.ownerDocument.doctype){if(document.doctype.publicId=="-//W3C//DTD XHTML+RDFa 1.0//EN"&&document.doctype.systemId=="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"){console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode.");this.setHTMLContext()}else if(document.doctype.publicId=="-//W3C//DTD XHTML+RDFa 1.1//EN"&&document.doctype.systemId=="http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"){this.setXHTMLContext()}else{this.setHTMLContext()}}else{this.setHTMLContext()}}else{this.setXMLContext()}};RDFaProcessor.prototype.setInitialContext=function(){this.vocabulary=null;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]};RDFaProcessor.prototype.setXMLContext=function(){this.setInitialContext();this.inXHTMLMode=false;this.inHTMLMode=false};RDFaProcessor.prototype.setHTMLContext=function(){this.setInitialContext();this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.inXHTMLMode=false;this.inHTMLMode=true};RDFaProcessor.prototype.setXHTMLContext=function(){this.setInitialContext();this.inXHTMLMode=true;this.inHTMLMode=false;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.target.graph.terms["alternate"]="http://www.w3.org/1999/xhtml/vocab#alternate";this.target.graph.terms["appendix"]="http://www.w3.org/1999/xhtml/vocab#appendix";this.target.graph.terms["bookmark"]="http://www.w3.org/1999/xhtml/vocab#bookmark";this.target.graph.terms["cite"]="http://www.w3.org/1999/xhtml/vocab#cite";this.target.graph.terms["chapter"]="http://www.w3.org/1999/xhtml/vocab#chapter";this.target.graph.terms["contents"]="http://www.w3.org/1999/xhtml/vocab#contents";this.target.graph.terms["copyright"]="http://www.w3.org/1999/xhtml/vocab#copyright";this.target.graph.terms["first"]="http://www.w3.org/1999/xhtml/vocab#first";this.target.graph.terms["glossary"]="http://www.w3.org/1999/xhtml/vocab#glossary";this.target.graph.terms["help"]="http://www.w3.org/1999/xhtml/vocab#help";this.target.graph.terms["icon"]="http://www.w3.org/1999/xhtml/vocab#icon";this.target.graph.terms["index"]="http://www.w3.org/1999/xhtml/vocab#index";this.target.graph.terms["last"]="http://www.w3.org/1999/xhtml/vocab#last";this.target.graph.terms["license"]="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms["meta"]="http://www.w3.org/1999/xhtml/vocab#meta";this.target.graph.terms["next"]="http://www.w3.org/1999/xhtml/vocab#next";this.target.graph.terms["prev"]="http://www.w3.org/1999/xhtml/vocab#prev";this.target.graph.terms["previous"]="http://www.w3.org/1999/xhtml/vocab#previous";this.target.graph.terms["section"]="http://www.w3.org/1999/xhtml/vocab#section";this.target.graph.terms["stylesheet"]="http://www.w3.org/1999/xhtml/vocab#stylesheet";this.target.graph.terms["subsection"]="http://www.w3.org/1999/xhtml/vocab#subsection";this.target.graph.terms["start"]="http://www.w3.org/1999/xhtml/vocab#start";this.target.graph.terms["top"]="http://www.w3.org/1999/xhtml/vocab#top";this.target.graph.terms["up"]="http://www.w3.org/1999/xhtml/vocab#up";this.target.graph.terms["p3pv1"]="http://www.w3.org/1999/xhtml/vocab#p3pv1";this.target.graph.terms["related"]="http://www.w3.org/1999/xhtml/vocab#related";this.target.graph.terms["role"]="http://www.w3.org/1999/xhtml/vocab#role";this.target.graph.terms["transformation"]="http://www.w3.org/1999/xhtml/vocab#transformation"};RDFaProcessor.prototype.init=function(){};RDFaProcessor.prototype.newSubjectOrigin=function(origin,subject){};RDFaProcessor.prototype.addTriple=function(origin,subject,predicate,object){};RDFaProcessor.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];RDFaProcessor.deriveDateTimeType=function(value){for(var i=0;i<RDFaProcessor.dateTimeTypes.length;i++){var matched=RDFaProcessor.dateTimeTypes[i].pattern.exec(value);if(matched&&matched[0].length==value.length){return RDFaProcessor.dateTimeTypes[i].type}}return null};RDFaProcessor.prototype.process=function(node,options){if(node.nodeType==9){node=node.documentElement;this.setContext(node)}else if(node.parentNode.nodeType==9){this.setContext(node)}var queue=[];var removeHash=function(baseURI){if(!baseURI&&options&&options.baseURI){return options.baseURI}var hash=baseURI.indexOf("#");if(hash>=0){baseURI=baseURI.substring(0,hash)}if(options&&options.baseURIMap){baseURI=options.baseURIMap(baseURI)}return baseURI};queue.push({current:node,context:this.push(null,removeHash(node.baseURI))});while(queue.length>0){var item=queue.shift();if(item.parent){if(item.context.parent&&item.context.parent.listMapping==item.listMapping){continue}for(var predicate in item.listMapping){var list=item.listMapping[predicate];if(list.length==0){this.addTriple(item.parent,item.subject,predicate,{type:RDFaProcessor.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});continue}var bnodes=[];for(var i=0;i<list.length;i++){bnodes.push(this.newBlankNode())}for(var i=0;i<bnodes.length;i++){this.addTriple(item.parent,bnodes[i],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",list[i]);this.addTriple(item.parent,bnodes[i],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:RDFaProcessor.objectURI,value:i+1<bnodes.length?bnodes[i+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}this.addTriple(item.parent,item.subject,predicate,{type:RDFaProcessor.objectURI,value:bnodes[0]})}continue}var current=item.current;var context=item.context;var skip=false;var newSubject=null;var currentObjectResource=null;var typedResource=null;var prefixes=context.prefixes;var prefixesCopied=false;var incomplete=[];var listMapping=context.listMapping;var listMappingDifferent=context.parent?false:true;var language=context.language;var vocabulary=context.vocabulary;var base=this.parseURI(removeHash(current.baseURI));current.item=null;var vocabAtt=current.getAttributeNode("vocab");if(vocabAtt){var value=RDFaProcessor.trim(vocabAtt.value);if(value.length>0){vocabulary=value;var baseSubject=base.spec;this.addTriple(current,baseSubject,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:RDFaProcessor.objectURI,value:vocabulary})}else{vocabulary=this.vocabulary}}for(var i=0;i<current.attributes.length;i++){var att=current.attributes[i];if(att.nodeName.charAt(0)=="x"&&att.nodeName.indexOf("xmlns:")==0){if(!prefixesCopied){prefixes=this.copyMappings(prefixes);prefixesCopied=true}var prefix=att.nodeName.substring(6);var ref=RDFaProcessor.trim(att.value);prefixes[prefix]=this.target.baseURI?this.target.baseURI.resolve(ref):ref}}var prefixAtt=current.getAttributeNode("prefix");if(prefixAtt){if(!prefixesCopied){prefixes=this.copyMappings(prefixes);prefixesCopied=true}this.parsePrefixMappings(prefixAtt.value,prefixes)}var xmlLangAtt=null;for(var i=0;!xmlLangAtt&&i<this.langAttributes.length;i++){xmlLangAtt=current.getAttributeNodeNS(this.langAttributes[i].namespaceURI,this.langAttributes[i].localName)}if(xmlLangAtt){var value=RDFaProcessor.trim(xmlLangAtt.value);if(value.length>0){language=value}else{language=null}}var relAtt=current.getAttributeNode("rel");var revAtt=current.getAttributeNode("rev");var typeofAtt=current.getAttributeNode("typeof");var propertyAtt=current.getAttributeNode("property");var datatypeAtt=current.getAttributeNode("datatype");var datetimeAtt=this.inHTMLMode?current.getAttributeNode("datetime"):null;var contentAtt=current.getAttributeNode("content");var aboutAtt=current.getAttributeNode("about");var srcAtt=current.getAttributeNode("src");var resourceAtt=current.getAttributeNode("resource");var hrefAtt=current.getAttributeNode("href");var inlistAtt=current.getAttributeNode("inlist");var relAttPredicates=[];if(relAtt){var values=this.tokenize(relAtt.value);for(var i=0;i<values.length;i++){var predicate=this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base,this.inHTMLMode&&propertyAtt!=null);if(predicate){relAttPredicates.push(predicate)}}}var revAttPredicates=[];if(revAtt){var values=this.tokenize(revAtt.value);for(var i=0;i<values.length;i++){var predicate=this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base,this.inHTMLMode&&propertyAtt!=null);if(predicate){revAttPredicates.push(predicate)}}}if(this.inHTMLMode&&(relAtt!=null||revAtt!=null)&&propertyAtt!=null){if(relAttPredicates.length==0){relAtt=null}if(revAttPredicates.length==0){revAtt=null}}if(relAtt||revAtt){if(aboutAtt){newSubject=this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base)}if(typeofAtt){typedResource=newSubject}if(!newSubject){if(current.parentNode.nodeType==9){newSubject=removeHash(current.baseURI)}else if(context.parentObject){newSubject=removeHash(current.parentNode.baseURI)==context.parentObject?removeHash(current.baseURI):context.parentObject}}if(resourceAtt){currentObjectResource=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)}if(!currentObjectResource){if(hrefAtt){currentObjectResource=this.resolveAndNormalize(base,encodeURI(hrefAtt.value))}else if(srcAtt){currentObjectResource=this.resolveAndNormalize(base,encodeURI(srcAtt.value))}else if(typeofAtt&&!aboutAtt&&!(this.inXHTMLMode&&(current.localName=="head"||current.localName=="body"))){currentObjectResource=this.newBlankNode()}}if(typeofAtt&&!aboutAtt&&this.inXHTMLMode&&(current.localName=="head"||current.localName=="body")){typedResource=newSubject}else if(typeofAtt&&!aboutAtt){typedResource=currentObjectResource}}else if(propertyAtt&&!contentAtt&&!datatypeAtt){if(aboutAtt){newSubject=this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base);if(typeofAtt){typedResource=newSubject}}if(!newSubject&&current.parentNode.nodeType==9){newSubject=removeHash(current.baseURI);if(typeofAtt){typedResource=newSubject}}else if(!newSubject&&context.parentObject){newSubject=removeHash(current.parentNode.baseURI)==context.parentObject?removeHash(current.baseURI):context.parentObject}if(typeofAtt&&!typedResource){if(resourceAtt){typedResource=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)}if(!typedResource&&hrefAtt){typedResource=this.resolveAndNormalize(base,encodeURI(hrefAtt.value))}if(!typedResource&&srcAtt){typedResource=this.resolveAndNormalize(base,encodeURI(srcAtt.value))}if(!typedResource&&(this.inXHTMLMode||this.inHTMLMode)&&(current.localName=="head"||current.localName=="body")){typedResource=newSubject}if(!typedResource){typedResource=this.newBlankNode()}currentObjectResource=typedResource}}else{if(aboutAtt){newSubject=this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base)}if(!newSubject&&resourceAtt){newSubject=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)}if(!newSubject&&hrefAtt){newSubject=this.resolveAndNormalize(base,encodeURI(hrefAtt.value))}if(!newSubject&&srcAtt){newSubject=this.resolveAndNormalize(base,encodeURI(srcAtt.value))}if(!newSubject){if(current.parentNode.nodeType==9){newSubject=removeHash(current.baseURI)}else if((this.inXHTMLMode||this.inHTMLMode)&&(current.localName=="head"||current.localName=="body")){newSubject=removeHash(current.parentNode.baseURI)==context.parentObject?removeHash(current.baseURI):context.parentObject}else if(typeofAtt){newSubject=this.newBlankNode()}else if(context.parentObject){newSubject=removeHash(current.parentNode.baseURI)==context.parentObject?removeHash(current.baseURI):context.parentObject;if(!propertyAtt){skip=true}}}if(typeofAtt){typedResource=newSubject}}var rdfaData=null;if(newSubject){if(aboutAtt||resourceAtt||typedResource){var id=newSubject;if(typeofAtt&&!aboutAtt&&!resourceAtt&&currentObjectResource){id=currentObjectResource}this.newSubjectOrigin(current,id)}}if(typedResource){var values=this.tokenize(typeofAtt.value);for(var i=0;i<values.length;i++){var object=this.parseTermOrCURIEOrAbsURI(values[i],vocabulary,context.terms,prefixes,base);if(object){this.addTriple(current,typedResource,RDFaProcessor.typeURI,{type:RDFaProcessor.objectURI,value:object})}}}if(newSubject&&newSubject!=context.parentObject){listMapping={};listMappingDifferent=true}if(currentObjectResource){if(relAtt&&inlistAtt){for(var i=0;i<relAttPredicates.length;i++){var list=listMapping[relAttPredicates[i]];if(!list){list=[];listMapping[relAttPredicates[i]]=list}list.push({type:RDFaProcessor.objectURI,value:currentObjectResource})}}else if(relAtt){for(var i=0;i<relAttPredicates.length;i++){this.addTriple(current,newSubject,relAttPredicates[i],{type:RDFaProcessor.objectURI,value:currentObjectResource})}}if(revAtt){for(var i=0;i<revAttPredicates.length;i++){this.addTriple(current,currentObjectResource,revAttPredicates[i],{type:RDFaProcessor.objectURI,value:newSubject})}}}else{if(newSubject&&!currentObjectResource&&(relAtt||revAtt)){currentObjectResource=this.newBlankNode()}if(relAtt&&inlistAtt){for(var i=0;i<relAttPredicates.length;i++){var list=listMapping[relAttPredicates[i]];if(!list){list=[];listMapping[predicate]=list}incomplete.push({predicate:relAttPredicates[i],list:list})}}else if(relAtt){for(var i=0;i<relAttPredicates.length;i++){incomplete.push({predicate:relAttPredicates[i],forward:true})}}if(revAtt){for(var i=0;i<revAttPredicates.length;i++){incomplete.push({predicate:revAttPredicates[i],forward:false})}}}if(propertyAtt){var datatype=null;var content=null;if(datatypeAtt){datatype=datatypeAtt.value==""?RDFaProcessor.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(datatypeAtt.value,vocabulary,context.terms,prefixes,base);if(datetimeAtt&&!contentAtt){content=datetimeAtt.value}else{content=datatype==RDFaProcessor.XMLLiteralURI||datatype==RDFaProcessor.HTMLLiteralURI?null:contentAtt?contentAtt.value:current.textContent}}else if(contentAtt){datatype=RDFaProcessor.PlainLiteralURI;content=contentAtt.value}else if(datetimeAtt){content=datetimeAtt.value;datatype=RDFaProcessor.deriveDateTimeType(content);if(!datatype){datatype=RDFaProcessor.PlainLiteralURI}}else if(!relAtt&&!revAtt){if(resourceAtt){content=this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base)}if(!content&&hrefAtt){content=this.resolveAndNormalize(base,encodeURI(hrefAtt.value))}else if(!content&&srcAtt){content=this.resolveAndNormalize(base,encodeURI(srcAtt.value))}if(content){datatype=RDFaProcessor.objectURI}}if(!datatype){if(typeofAtt&&!aboutAtt){datatype=RDFaProcessor.objectURI;content=typedResource}else{content=current.textContent;if(this.inHTMLMode&&current.localName=="time"){datatype=RDFaProcessor.deriveDateTimeType(content)}if(!datatype){datatype=RDFaProcessor.PlainLiteralURI}}}var values=this.tokenize(propertyAtt.value);for(var i=0;i<values.length;i++){var predicate=this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base);if(predicate){if(inlistAtt){var list=listMapping[predicate];if(!list){list=[];listMapping[predicate]=list}list.push(datatype==RDFaProcessor.XMLLiteralURI||datatype==RDFaProcessor.HTMLLiteralURI?{type:datatype,value:current.childNodes}:{type:datatype?datatype:RDFaProcessor.PlainLiteralURI,value:content,language:language})}else{if(datatype==RDFaProcessor.XMLLiteralURI||datatype==RDFaProcessor.HTMLLiteralURI){this.addTriple(current,newSubject,predicate,{type:datatype,value:current.childNodes})}else{this.addTriple(current,newSubject,predicate,{type:datatype?datatype:RDFaProcessor.PlainLiteralURI,value:content,language:language})}}}}}if(newSubject&&!skip){for(var i=0;i<context.incomplete.length;i++){if(context.incomplete[i].list){context.incomplete[i].list.push({type:RDFaProcessor.objectURI,value:newSubject})}else if(context.incomplete[i].forward){this.addTriple(current,context.subject,context.incomplete[i].predicate,{type:RDFaProcessor.objectURI,value:newSubject})}else{this.addTriple(current,newSubject,context.incomplete[i].predicate,{type:RDFaProcessor.objectURI,value:context.subject})}}}var childContext=null;var listSubject=newSubject;if(skip){childContext=this.push(context,context.subject);childContext.parentObject=removeHash(current.parentNode.baseURI)==context.parentObject?removeHash(current.baseURI):context.parentObject;childContext.incomplete=context.incomplete;childContext.language=language;childContext.prefixes=prefixes;childContext.vocabulary=vocabulary}else{childContext=this.push(context,newSubject);childContext.parentObject=currentObjectResource?currentObjectResource:newSubject?newSubject:context.subject;childContext.prefixes=prefixes;childContext.incomplete=incomplete;if(currentObjectResource){listSubject=currentObjectResource;listMapping={};listMappingDifferent=true}childContext.listMapping=listMapping;childContext.language=language;childContext.vocabulary=vocabulary}if(listMappingDifferent){queue.unshift({parent:current,context:context,subject:listSubject,listMapping:listMapping})}for(var child=current.lastChild;child;child=child.previousSibling){if(child.nodeType==1){queue.unshift({current:child,context:childContext})}}}if(this.inHTMLMode){this.copyProperties()}for(var i=0;i<this.finishedHandlers.length;i++){this.finishedHandlers[i](node)}};RDFaProcessor.prototype.copyProperties=function(){};RDFaProcessor.prototype.push=function(parent,subject){return{parent:parent,subject:subject?subject:parent?parent.subject:null,parentObject:null,incomplete:[],listMapping:parent?parent.listMapping:{},language:parent?parent.language:this.language,prefixes:parent?parent.prefixes:this.target.graph.prefixes,terms:parent?parent.terms:this.target.graph.terms,vocabulary:parent?parent.vocabulary:this.vocabulary}};if(true){module.exports=RDFaProcessor}},module=>{function URIResolver(){}URIResolver.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/;URIResolver.prototype.parseURI=function(uri){var match=URIResolver.SCHEME.exec(uri);if(!match){throw"Bad URI value, no scheme: "+uri}var parsed={spec:uri};parsed.scheme=match[0].substring(0,match[0].length-1);parsed.schemeSpecificPart=parsed.spec.substring(match[0].length);if(parsed.schemeSpecificPart.charAt(0)=="/"&&parsed.schemeSpecificPart.charAt(1)=="/"){this.parseGeneric(parsed)}else{parsed.isGeneric=false}parsed.normalize=function(){if(!this.isGeneric){return}if(this.segments.length==0){return}if(this.path.length>1&&this.path.substring(this.path.length-2)=="/."){this.path=this.path.substring(0,this.path.length-1);this.segments.splice(this.segments.length-1,1);this.schemeSpecificPart="//"+this.authority+this.path;if(typeof this.query!="undefined"){this.schemeSpecificPart+="?"+this.query}if(typeof this.fragment!="undefined"){this.schemeSpecificPart+="#"+this.fragment}this.spec=this.scheme+":"+this.schemeSpecificPart;return}var end=this.path.charAt(this.path.length-1);if(end!="/"){end=""}for(var i=0;i<this.segments.length;i++){if(i>0&&this.segments[i]==".."){this.segments.splice(i-1,2);i-=2}if(this.segments[i]=="."){this.segments.splice(i,1);i--}}this.path=this.segments.length==0?"/":"/"+this.segments.join("/")+end;this.schemeSpecificPart="//"+this.authority+this.path;if(typeof this.query!="undefined"){this.schemeSpecificPart+="?"+this.query}if(typeof this.fragment!="undefined"){this.schemeSpecificPart+="#"+this.fragment}this.spec=this.scheme+":"+this.schemeSpecificPart};parsed.resolve=function(href){if(!href){return this.spec}if(href.charAt(0)=="#"){var lastHash=this.spec.lastIndexOf("#");return lastHash<0?this.spec+href:this.spec.substring(0,lastHash)+href}if(!this.isGeneric){throw"Cannot resolve uri against non-generic URI: "+this.spec}var colon=href.indexOf(":");if(href.charAt(0)=="/"){return this.scheme+"://"+this.authority+href}else if(href.charAt(0)=="."&&href.charAt(1)=="/"){if(this.path.charAt(this.path.length-1)=="/"){return this.scheme+"://"+this.authority+this.path+href.substring(2)}else{var last=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,last)+href.substring(1)}}else if(URIResolver.SCHEME.test(href)){return href}else if(href.charAt(0)=="?"){return this.scheme+"://"+this.authority+this.path+href}else{if(this.path.charAt(this.path.length-1)=="/"){return this.scheme+"://"+this.authority+this.path+href}else{var last=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,last+1)+href}}};parsed.relativeTo=function(otherURI){if(otherURI.scheme!=this.scheme){return this.spec}if(!this.isGeneric){throw"A non generic URI cannot be made relative: "+this.spec}if(!otherURI.isGeneric){throw"Cannot make a relative URI against a non-generic URI: "+otherURI.spec}if(otherURI.authority!=this.authority){return this.spec}var i=0;for(;i<this.segments.length&&i<otherURI.segments.length;i++){if(this.segments[i]!=otherURI.segments[i]){var offset=otherURI.path.charAt(otherURI.path.length-1)=="/"?0:-1;var relative="";for(var j=i;j<otherURI.segments.length+offset;j++){relative+="../"}for(var j=i;j<this.segments.length;j++){relative+=this.segments[j];if(j+1<this.segments.length){relative+="/"}}if(this.path.charAt(this.path.length-1)=="/"){relative+="/"}return relative}}if(this.segments.length==otherURI.segments.length){return this.hash?this.hash:this.query?this.query:""}else if(i<this.segments.length){var relative="";for(var j=i;j<this.segments.length;j++){relative+=this.segments[j];if(j+1<this.segments.length){relative+="/"}}if(this.path.charAt(this.path.length-1)=="/"){relative+="/"}return relative}else{throw"Cannot calculate a relative URI for "+this.spec+" against "+otherURI.spec}};return parsed};URIResolver.prototype.parseGeneric=function(parsed){if(parsed.schemeSpecificPart.charAt(0)!="/"||parsed.schemeSpecificPart.charAt(1)!="/"){throw"Generic URI values should start with '//':"+parsed.spec}var work=parsed.schemeSpecificPart.substring(2);var pathStart=work.indexOf("/");parsed.authority=pathStart<0?work:work.substring(0,pathStart);parsed.path=pathStart<0?"":work.substring(pathStart);var hash=parsed.path.indexOf("#");if(hash>=0){parsed.fragment=parsed.path.substring(hash+1);parsed.path=parsed.path.substring(0,hash)}var questionMark=parsed.path.indexOf("?");if(questionMark>=0){parsed.query=parsed.path.substring(questionMark+1);parsed.path=parsed.path.substring(0,questionMark)}if(parsed.path=="/"||parsed.path==""){parsed.segments=[]}else{parsed.segments=parsed.path.split(/\//);if(parsed.segments.length>0&&parsed.segments[0]==""&&parsed.path.length>1&&parsed.path.charAt(1)!="/"){parsed.segments.shift()}if(parsed.segments.length>0&&parsed.path.length>0&&parsed.path.charAt(parsed.path.length-1)=="/"&&parsed.segments[parsed.segments.length-1]==""){if(parsed.path.length>1&&parsed.path.charAt(parsed.path.length-2)!="/"){parsed.segments.pop()}}for(var i=0;i<parsed.segments.length;i++){var check=parsed.segments[i].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/);for(var j=0;j<check.length;j++){if(check[j].length>0){throw"Unecaped character "+check[j].charAt(0)+" ("+check[j].charCodeAt(0)+") in URI "+parsed.spec}}}}parsed.isGeneric=true};if(true){module.exports=URIResolver}},module=>{module.exports=Parser;function Parser(parsers){if(!(this instanceof Parser)){return new Parser(parsers)}this.parsers=parsers}Parser.prototype.parse=function(data,contentType,subjectUri){return this.parsers[contentType].parse(data)}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const template=__webpack_require__(113);module.exports={init:function(){if(document.body){DO.U.setPolyfill();DO.U.initUser();DO.U.initCurrentStylesheet();DO.U.setDocRefType();DO.U.showRefs();DO.U.highlightItems();DO.U.showAsTabs();DO.U.initDocumentActions();DO.U.showTextQuoteSelector();DO.U.showDocumentInfo();DO.U.showFragment();DO.U.setDocumentMode();DO.U.showInboxNotifications();DO.U.initMath();DO.U.initSlideshow()}},Inbox:{},Notification:{},Activity:{},Lang:document.documentElement.lang,DocRefType:"",RefType:{LNCS:{InlineOpen:"[",InlineClose:"]"},ACM:{InlineOpen:"[",InlineClose:"]"}},VerifyCitation:true,Stylesheets:[],User:{IRI:null,Role:null,UI:{},OIDC:false,WebIdDelegate:null},OidcPopupUrl:"https://dokie.li/popup.html",LocalDocument:document.location.protocol=="file:",UseLocalStorage:false,AutoSave:{Methods:["localStorage","http"],Timer:6e4,Items:{}},ActionMessage:{Timer:1500},AvatarSize:48,DisableLocalStorageButtons:'<button class="local-storage-disable-html" title="Disable local storage (temporary) in the browser">'+template.Icon[".fas.fa-database.fa-2x"]+"Local Storage</button>",EnableLocalStorageButtons:'<button class="local-storage-enable-html" title="Enable local storage (temporary) in the browser">'+template.Icon[".fas.fa-database.fa-2x"]+"Local Storage</button>",CDATAStart:"//<![CDATA[",CDATAEnd:"//]]>",SortableList:false,GraphViewerAvailable:true,MathAvailable:typeof MathJax!=="undefined",EditorAvailable:true,EditorEnabled:false,ContentEditable:false,WebExtension:window.chrome&&chrome.runtime&&chrome.runtime.id||typeof browser!=="undefined"&&browser.runtime&&browser.runtime.id,Editor:{headings:["h1","h2","h3","h4","h5","h6"],regexEmptyHTMLTags:/<[^\/>][^>]*><\/[^>]+>/gim,ButtonLabelType:"fontawesome",DisableEditorButton:'<button class="editor-disable" title="Disable editor">'+template.Icon[".fas.fa-i-cursor.fa-2x"]+"Edit</button>",EnableEditorButton:'<button class="editor-enable" title="Enable editor">'+template.Icon[".fas.fa-i-cursor.fa-2x"]+"Edit</button>"},Button:{Close:'<button class="close" title="Close">'+template.Icon[".fas.fa-times.fa-2x"]+"</button>",Delete:'<button class="delete" title="Delete">'+template.Icon[".fas.fa-trash-alt"]+"</button>"},DOMNormalisation:{selfClosing:["area","base","basefont","br","circle","col","colgroup","ellipse","embed","hr","img","input","isindex","line","link","meta","param","path","polygon","polyline","rect","source","use","wbr"],skipAttributes:["aria-multiline","contenteditable","data-medium-editor-editor-index","data-medium-editor-element","data-medium-focused","data-placeholder","medium-editor-index","role","spellcheck","style"],sortAttributes:true,skipNodeWithClass:"do",classWithChildText:{class:".do.ref",element:"mark"},replaceClassItemWith:{source:["medium-editor-element","medium-editor-placeholder","on-document-menu"],target:""},skipClassWithValue:""},ArticleNodeSelectors:["main > article","main","body"],SelectorSign:{"*":"🔗",aside:"|",audio:"🔊",code:"#",dl:"☝","dl#document-annotation-service":"※","dl#document-cited-by":"※","dl#document-created":"📅","dl#document-in-reply-to":"⮪","dl#document-identifier":"🚩","dl#document-inbox":"📥","dl#document-latest-version":"∼","dl#document-language":"🗺","dl#document-license":"🌻","dl#document-memento":"⛰","dl#document-modified":"📅","dl#document-original":"♁","dl#document-predecessor-version":"≺","dl#document-published":"📅","dl#document-rights":"📜","dl#document-resource-state":"🙊","dl#document-see-also":"🙈","dl#document-status":"🎆","dl#document-timemap":"⌚",dfn:"📇",figure:"❦",footer:"⸙",img:"🖼",nav:"☛",p:"¶",pre:"🖩",section:"§","section#acknowledgements":"☺","section#conclusions":"∴","section#keywords":"🏷","section#references":"※","section#related-work":"⌘","section#results":"∞",table:"𝄜",video:"🎞"},MotivationSign:{"oa:assessing":"✪","oa:bookmarking":"🔖","oa:commenting":"🗨","oa:describing":"※","oa:highlighting":"#","oa:linking":"※","oa:questioning":"?","oa:replying":"💬"},DocumentDoItems:["document-items","embed-data-entry","create-new-document","open-document","source-view","save-as-document","user-identity-input","resource-browser","share-resource","reply-to-resource","memento-document","graph-view","robustify-links"],DocumentItems:["authors","document-identifier","document-created","document-modified","document-published","document-original","document-memento","document-latest-version","document-predecessor-version","document-timegate","document-timemap","document-derived-from","document-derived-on","document-language","document-license","document-inbox","document-annotation-service","document-in-reply-to","document-rights","document-resource-state","document-status","document-see-also","document-cited-by","table-of-contents","list-of-figures","list-of-tables","list-of-abbreviations","list-of-quotations","abstract","categories-and-subject-descriptors","keywords","general-terms","introduction"],ListOfStuff:{"table-of-contents":{label:"Contents",selector:"content",titleSelector:"h1"},"list-of-figures":{label:"Figures",selector:"figure",titleSelector:"figcaption"},"list-of-tables":{label:"Tables",selector:"table",titleSelector:"caption"},"list-of-abbreviations":{label:"Abbreviations",selector:"abbr",titleSelector:"title"},"list-of-quotations":{label:"Quotations",selector:"q",titleSelector:"cite"},references:{label:"References",selector:"cite a",titleSelector:"h2"}},CollectionItemsLimit:20,ContextLength:32,ProxyURL:window.location.hostname=="localhost"||!navigator.onLine?window.location.protocol+"//"+window.location.host+"/proxy?uri=":"https://dokie.li/proxy?uri=",AuthEndpoint:window.location.hostname=="localhost"||!navigator.onLine?window.location.protocol+"//"+window.location.host+"/":"https://dokie.li/",NotificationLicense:"https://creativecommons.org/publicdomain/zero/1.0/",License:{"https://creativecommons.org/publicdomain/zero/1.0/":{name:"CC0 1.0",description:"Creative Commons CC0 1.0 Universal"},"https://creativecommons.org/licenses/by/4.0/":{name:"CC BY 4.0",description:"Creative Commons Attribution 4.0 International"},"https://creativecommons.org/licenses/by-sa/4.0/":{name:"CC BY-SA 4.0",description:"Creative Commons Attribution-ShareAlike 4.0 International"},"https://creativecommons.org/licenses/by-nc/4.0/":{name:"CC BY-NC 4.0",description:"Creative Commons Attribution-NonCommercial 4.0 International"},"https://creativecommons.org/licenses/by-nd/4.0/":{name:"CC BY-ND 4.0",description:"Creative Commons Attribution-NoDerivatives 4.0 International"},"https://creativecommons.org/licenses/by-nc-sa/4.0/":{name:"CC BY-NC-SA 4.0",description:"Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International"},"https://creativecommons.org/licenses/by-nc-nd/4.0/":{name:"CC BY-NC-ND 4.0",description:"Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International"}},PublicationStatus:{"http://purl.org/spar/pso/draft":{name:"Draft",description:"The status of a work (for example a document or a dataset) prior to completion and publication."},"http://purl.org/spar/pso/published":{name:"Published",description:"The status of material (for example a document or a dataset) that has been published, i.e. made available for people to access, read or use, either freely or for a purchase price or an access fee."}},Citation:{"http://purl.org/spar/cito/agreesWith":"agrees with","http://purl.org/spar/cito/cites":"cites","http://purl.org/spar/cito/citesAsAuthority":"cites as authority","http://purl.org/spar/cito/citesAsDataSource":"cites as data source","http://purl.org/spar/cito/citesAsEvidence":"cites as evidence","http://purl.org/spar/cito/citesAsMetadataDocument":"cites as metadata document","http://purl.org/spar/cito/citesAsPotentialSolution":"cites as potential solution","http://purl.org/spar/cito/citesAsRecommendedReading":"cites as potential reading","http://purl.org/spar/cito/citesAsRelated":"cites as related","http://purl.org/spar/cito/citesAsSourceDocument":"cites as source document","http://purl.org/spar/cito/citesForInformation":"cites for information","http://purl.org/spar/cito/compiles":"compiles","http://purl.org/spar/cito/confirms":"confirms","http://purl.org/spar/cito/containsAssertionFrom":"contains assertion from","http://purl.org/spar/cito/corrects":"corrects","http://purl.org/spar/cito/credits":"credits","http://purl.org/spar/cito/critiques":"critiques","http://purl.org/spar/cito/derides":"derides","http://purl.org/spar/cito/describes":"describes","http://purl.org/spar/cito/disagreesWith":"disagrees with","http://purl.org/spar/cito/discusses":"discusses","http://purl.org/spar/cito/disputes":"disputes","http://purl.org/spar/cito/documents":"documents","http://purl.org/spar/cito/extends":"extends","http://purl.org/spar/cito/includesExcerptFrom":"includes excerpt from","http://purl.org/spar/cito/includesQuotationFrom":"includes quotation from","http://purl.org/spar/cito/linksTo":"links to","http://purl.org/spar/cito/obtainsBackgroundFrom":"obtains background from","http://purl.org/spar/cito/obtainsSupportFrom":"obtains support from","http://purl.org/spar/cito/parodies":"parodies","http://purl.org/spar/cito/plagiarizes":"plagiarizes","http://purl.org/spar/cito/qualifies":"qualifies","http://purl.org/spar/cito/refutes":"refutes","http://purl.org/spar/cito/repliesTo":"replies to","http://purl.org/spar/cito/retracts":"retracts","http://purl.org/spar/cito/reviews":"reviews","http://purl.org/spar/cito/ridicules":"ridicules","http://purl.org/spar/cito/speculatesOn":"speculates on","http://purl.org/spar/cito/supports":"supports","http://purl.org/spar/cito/updates":"updates","http://purl.org/spar/cito/usesConclusionsFrom":"uses conclusions from","http://purl.org/spar/cito/usesDataFrom":"uses data from","http://purl.org/spar/cito/usesMethodIn":"uses method in"},AvailableMediaTypes:["text/turtle","application/ld+json","application/rdf+xml","application/xhtml+xml","text/html"],AcceptBinaryTypes:["image/png","image/jpeg","image/gif"],Prefixes:{xsd:"http://www.w3.org/2001/XMLSchema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",as:"https://www.w3.org/ns/activitystreams#",oa:"http://www.w3.org/ns/oa#",schema:"http://schema.org/",cito:"http://purl.org/spar/cito/"},Vocab:{rdftype:{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","@type":"@id","@array":true},rdffirst:{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#first","@type":"@id"},rdfrest:{"@id":"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest","@type":"@id"},rdfvalue:"http://www.w3.org/1999/02/22-rdf-syntax-ns#value",rdfslabel:{"@id":"http://www.w3.org/2000/01/rdf-schema#label"},rdfsseeAlso:{"@id":"http://www.w3.org/2000/01/rdf-schema#seeAlso","@type":"@id","@array":true},owlsameAs:{"@id":"http://www.w3.org/2002/07/owl#sameAs","@type":"@id","@array":true},foafAgent:{"@id":"http://xmlns.com/foaf/0.1/Agent","@type":"@id"},foafPerson:{"@id":"http://xmlns.com/foaf/0.1/Person","@type":"@id"},foafGroup:{"@id":"http://xmlns.com/foaf/0.1/Group","@type":"@id"},foafOrganization:{"@id":"http://xmlns.com/foaf/0.1/Organization","@type":"@id"},foafname:"http://xmlns.com/foaf/0.1/name",foaffamilyName:"http://xmlns.com/foaf/0.1/familyName",foafgivenName:"http://xmlns.com/foaf/0.1/givenName",foafhomepage:{"@id":"http://xmlns.com/foaf/0.1/homepage","@type":"@id"},foafweblog:{"@id":"http://xmlns.com/foaf/0.1/weblog","@type":"@id"},foafimg:{"@id":"http://xmlns.com/foaf/0.1/img","@type":"@id"},foafdepiction:{"@id":"http://xmlns.com/foaf/0.1/depiction","@type":"@id"},foafnick:"http://xmlns.com/foaf/0.1/nick",foafmaker:{"@id":"http://xmlns.com/foaf/0.1/maker","@type":"@id"},foafknows:{"@id":"http://xmlns.com/foaf/0.1/knows","@type":"@id","@array":true},foafprimaryTopic:{"@id":"http://xmlns.com/foaf/0.1/primaryTopic","@type":"@id"},vcardVCard:{"@id":"http://www.w3.org/2006/vcard/ns#VCard","@type":"@id"},vcardIndividual:{"@id":"http://www.w3.org/2006/vcard/ns#Individual","@type":"@id"},vcardGroup:{"@id":"http://www.w3.org/2006/vcard/ns#Group","@type":"@id"},vcardOrganization:{"@id":"http://www.w3.org/2006/vcard/ns#Organization","@type":"@id"},vcardfn:"http://www.w3.org/2006/vcard/ns#fn",vcardfamilyname:"http://www.w3.org/2006/vcard/ns#family-name",vcardgivenname:"http://www.w3.org/2006/vcard/ns#given-name",vcardnickname:"http://www.w3.org/2006/vcard/ns#nickname",vcardurl:{"@id":"http://www.w3.org/2006/vcard/ns#url","@type":"@id"},vcardphoto:{"@id":"http://www.w3.org/2006/vcard/ns#photo","@type":"@id"},vcardhasPhoto:{"@id":"http://www.w3.org/2006/vcard/ns#hasPhoto","@type":"@id"},schemaPerson:{"@id":"http://schema.org/Person","@type":"@id"},schemaOrganization:{"@id":"http://schema.org/Person","@type":"@id"},schemaDataset:{"@id":"http://schema.org/Dataset","@type":"@id"},schemaname:"http://schema.org/name",schemafamilyName:"http://schema.org/familyName",schemagivenName:"http://schema.org/givenName",schemaurl:{"@id":"http://schema.org/url","@type":"@id"},schemaimage:{"@id":"http://schema.org/image","@type":"@id"},schemacreator:{"@id":"http://schema.org/creator","@type":"@id","@array":true},schemaauthor:{"@id":"http://schema.org/author","@type":"@id","@array":true},schemacontributor:{"@id":"http://schema.org/contributor","@type":"@id","@array":true},schemaeditor:{"@id":"http://schema.org/editor","@type":"@id","@array":true},schemainLanguage:"http://schema.org/inLanguage",schemalicense:{"@id":"http://schema.org/license","@type":"@id"},schemacitation:{"@id":"http://schema.org/citation","@type":"@id","@array":true},schemaknows:{"@id":"http://schema.org/knows","@type":"@id","@array":true},schemadateCreated:"http://schema.org/dateCreated",schemadateModified:"http://schema.org/dateModified",schemadatePublished:"http://schema.org/datePublished",schemaabstract:"http://schema.org/abstract",schemadescription:"http://schema.org/description",schemahasPart:{"@id":"http://schema.org/hasPart","@type":"@id","@array":true},schemaisPartOf:{"@id":"http://schema.org/isPartOf","@type":"@id","@array":true},schemaScholarlyArticle:{"@id":"http://schema.org/ScholarlyArticle"},schemapotentialAction:{"@id":"http://schema.org/potentialAction","@type":"@id","@array":true},schemaViewAction:{"@id":"http://schema.org/ViewAction"},schematarget:{"@id":"http://schema.org/target"},schemaobject:{"@id":"http://schema.org/object"},dctermsAgent:{"@id":"http://purl.org/dc/terms/Agent","@type":"@id"},dctermstitle:"http://purl.org/dc/terms/title",dctermsdescription:"http://purl.org/dc/terms/description",dctermscreator:{"@id":"http://purl.org/dc/terms/creator","@type":"@id","@array":true},dctermsdate:"http://purl.org/dc/terms/date",dctermsissued:"http://purl.org/dc/terms/issued",dctermscreated:"http://purl.org/dc/terms/created",dctermslanguage:"http://purl.org/dc/terms/language",dctermsrights:{"@id":"http://purl.org/dc/terms/rights","@type":"@id"},dctermsconformsTo:{"@id":"http://purl.org/dc/terms/conformsTo","@type":"@id"},dctermshasPart:{"@id":"http://purl.org/dc/terms/hasPart","@type":"@id","@array":true},dctermsisPartOf:{"@id":"http://purl.org/dc/terms/isPartOf","@type":"@id","@array":true},skosprefLabel:{"@id":"http://www.w3.org/2004/02/skos/core#prefLabel","@type":"@id","@array":true},provgeneratedAtTime:"http://www.w3.org/ns/prov#generatedAtTime",refPeriod:"http://purl.org/linked-data/sdmx/2009/dimension#refPeriod",obsValue:"http://purl.org/linked-data/sdmx/2009/measure#obsValue",biboauthorList:{"@id":"http://purl.org/ontology/bibo/authorList","@type":"@id"},pimstorage:{"@id":"http://www.w3.org/ns/pim/space#storage","@type":"@id","@array":true},pimpreferencesFile:{"@id":"http://www.w3.org/ns/pim/space#preferencesFile","@type":"@id"},pimpersistencePolicy:{"@id":"http://www.w3.org/2000/10/swap/pim/doc#persistencePolicy","@type":"@id","@array":true},aclAuthorization:{"@id":"http://www.w3.org/ns/auth/acl#Authorization","@type":"@id"},aclRead:{"@id":"http://www.w3.org/ns/auth/acl#Read","@type":"@id"},aclWrite:{"@id":"http://www.w3.org/ns/auth/acl#Write","@type":"@id"},aclAppend:{"@id":"http://www.w3.org/ns/auth/acl#Append","@type":"@id"},aclControl:{"@id":"http://www.w3.org/ns/auth/acl#Control","@type":"@id"},aclaccessTo:{"@id":"http://www.w3.org/ns/auth/acl#accessTo","@type":"@id","@array":true},acldefault:{"@id":"http://www.w3.org/ns/auth/acl#default","@type":"@id","@array":true},aclagent:{"@id":"http://www.w3.org/ns/auth/acl#agent","@type":"@id","@array":true},aclmode:{"@id":"http://www.w3.org/ns/auth/acl#mode","@type":"@id","@array":true},acldelegates:{"@id":"http://www.w3.org/ns/auth/acl#delegates","@type":"@id","@array":true},solidpreferredProxy:"http://www.w3.org/ns/solid/terms#preferredProxy",solidpreferredPolicy:{"@id":"http://www.w3.org/ns/solid/terms#preferredPolicy","@type":"@id"},solidforClass:{"@id":"http://www.w3.org/ns/solid/terms#forClass","@type":"@id"},solidinstanceContainer:{"@id":"http://www.w3.org/ns/solid/terms#instanceContainer","@type":"@id"},solidpublicTypeIndex:{"@id":"http://www.w3.org/ns/solid/terms#publicTypeIndex","@type":"@id"},solidprivateTypeIndex:{"@id":"http://www.w3.org/ns/solid/terms#privateTypeIndex","@type":"@id"},solidowner:{"@id":"http://www.w3.org/ns/solid/terms#owner","@type":"@id","@array":true},solidstorageDescription:{"@id":"http://www.w3.org/ns/solid/terms#storageDescription","@type":"@id","@array":true},oaAnnotation:{"@id":"http://www.w3.org/ns/oa#Annotation","@type":"@id"},oahasBody:{"@id":"http://www.w3.org/ns/oa#hasBody","@type":"@id"},oahasTarget:{"@id":"http://www.w3.org/ns/oa#hasTarget","@type":"@id"},oahasSource:{"@id":"http://www.w3.org/ns/oa#hasSource","@type":"@id"},oahasSelector:{"@id":"http://www.w3.org/ns/oa#hasSelector","@type":"@id"},oarefinedBy:{"@id":"http://www.w3.org/ns/oa#refinedBy","@type":"@id"},oaexact:"http://www.w3.org/ns/oa#exact",oaprefix:"http://www.w3.org/ns/oa#prefix",oasuffix:"http://www.w3.org/ns/oa#suffix",oamotivatedBy:{"@id":"http://www.w3.org/ns/oa#motivatedBy","@type":"@id"},oaannotationService:{"@id":"http://www.w3.org/ns/oa#annotationService","@type":"@id","@array":true},asApplication:{"@id":"https://www.w3.org/ns/activitystreams#Application","@type":"@id"},asGroup:{"@id":"https://www.w3.org/ns/activitystreams#Group","@type":"@id"},asOrganization:{"@id":"https://www.w3.org/ns/activitystreams#Organization","@type":"@id"},asPerson:{"@id":"https://www.w3.org/ns/activitystreams#Person","@type":"@id"},asService:{"@id":"https://www.w3.org/ns/activitystreams#Service","@type":"@id"},asinbox:{"@id":"https://www.w3.org/ns/activitystreams#inbox","@type":"@id","@array":true},assubject:{"@id":"https://www.w3.org/ns/activitystreams#subject","@type":"@id","@array":true},asobject:{"@id":"https://www.w3.org/ns/activitystreams#object","@type":"@id","@array":true},astarget:{"@id":"https://www.w3.org/ns/activitystreams#target","@type":"@id","@array":true},asrelationship:{"@id":"https://www.w3.org/ns/activitystreams#relationship","@type":"@id","@array":true},ascontext:{"@id":"https://www.w3.org/ns/activitystreams#context","@type":"@id","@array":true},asinReplyTo:{"@id":"https://www.w3.org/ns/activitystreams#inReplyTo","@type":"@id","@array":true},asactor:{"@id":"https://www.w3.org/ns/activitystreams#actor","@type":"@id"},asupdated:"https://www.w3.org/ns/activitystreams#updated",aspublished:"https://www.w3.org/ns/activitystreams#published",assummary:"https://www.w3.org/ns/activitystreams#summary",ascontent:"https://www.w3.org/ns/activitystreams#content",asname:"https://www.w3.org/ns/activitystreams#name",asimage:{"@id":"https://www.w3.org/ns/activitystreams#image","@type":"@id"},asoutbox:{"@id":"https://www.w3.org/ns/activitystreams#outbox","@type":"@id","@array":true},asitems:{"@id":"https://www.w3.org/ns/activitystreams#items","@type":"@id","@array":true},asorderedItems:{"@id":"https://www.w3.org/ns/activitystreams#orderedItems","@type":"@id","@array":true},astotalItems:"https://www.w3.org/ns/activitystreams#totalItems",asfirst:{"@id":"https://www.w3.org/ns/activitystreams#first","@type":"@id"},asnext:{"@id":"https://www.w3.org/ns/activitystreams#next","@type":"@id"},asCollection:{"@id":"https://www.w3.org/ns/activitystreams#Collection","@type":"@id"},asOrderedCollection:{"@id":"https://www.w3.org/ns/activitystreams#OrderedCollection","@type":"@id"},asAnnounce:{"@id":"https://www.w3.org/ns/activitystreams#Announce","@type":"@id"},siocreplyof:{"@id":"http://rdfs.org/sioc/ns#reply_of","@type":"@id","@array":true},siocavatar:{"@id":"http://rdfs.org/sioc/ns#avatar","@type":"@id"},ldpinbox:{"@id":"http://www.w3.org/ns/ldp#inbox","@type":"@id","@array":true},ldpcontains:{"@id":"http://www.w3.org/ns/ldp#contains","@type":"@id","@array":true},ldpResource:{"@id":"http://www.w3.org/ns/ldp#Resource","@type":"@id"},ldpContainer:{"@id":"http://www.w3.org/ns/ldp#Container","@type":"@id"},ldpBasicContainer:{"@id":"http://www.w3.org/ns/ldp#BasicContainer","@type":"@id"},ldpRDFSource:{"@id":"http://www.w3.org/ns/ldp#RDFSource","@type":"@id"},ldpNonRDFSource:{"@id":"http://www.w3.org/ns/ldp#NonRDFSource","@type":"@id"},memOriginalResource:{"@id":"http://mementoweb.org/ns#OriginalResource","@type":"@id"},memMemento:{"@id":"http://mementoweb.org/ns#Memento","@type":"@id"},memoriginal:{"@id":"http://mementoweb.org/ns#original","@type":"@id"},memmemento:{"@id":"http://mementoweb.org/ns#memento","@type":"@id"},memtimegate:{"@id":"http://mementoweb.org/ns#timegate","@type":"@id"},memtimemap:{"@id":"http://mementoweb.org/ns#timemap","@type":"@id"},memmementoDateTime:"http://mementoweb.org/ns#mementoDateTime",notifyWebSocketSubscription2021:{"@id":"http://www.w3.org/ns/solid/notifications#WebSocketSubscription2021","@type":"@id"},notifynotificationChannel:{"@id":"http://www.w3.org/ns/solid/notifications#notificationChannel","@type":"@id","@array":true},notifysubscription:{"@id":"http://www.w3.org/ns/solid/notifications#subscription","@type":"@id"},notifyfeature:{"@id":"http://www.w3.org/ns/solid/notifications#feature","@type":"@id","@array":true},notifyaccept:{"@id":"http://www.w3.org/ns/solid/notifications#accept","@type":"@id"},notifyexpiration:{"@id":"http://www.w3.org/ns/solid/notifications#expiration","@type":"@id"},notifyrate:{"@id":"http://www.w3.org/ns/solid/notifications#rate","@type":"@id"},notifystate:{"@id":"http://www.w3.org/ns/solid/notifications#state","@type":"@id"},odrlAgreement:{"@id":"http://www.w3.org/ns/odrl/2/Agreement","@type":"@id"},odrlAssertion:{"@id":"http://www.w3.org/ns/odrl/2/Assertion","@type":"@id"},odrlOffer:{"@id":"http://www.w3.org/ns/odrl/2/Offer","@type":"@id"},odrlPolicy:{"@id":"http://www.w3.org/ns/odrl/2/Policy","@type":"@id"},odrlPrivacy:{"@id":"http://www.w3.org/ns/odrl/2/Privacy","@type":"@id"},odrlRequest:{"@id":"http://www.w3.org/ns/odrl/2/Request","@type":"@id"},odrlSet:{"@id":"http://www.w3.org/ns/odrl/2/Set","@type":"@id"},odrlTicket:{"@id":"http://www.w3.org/ns/odrl/2/Ticket","@type":"@id"},odrlaction:{"@id":"http://www.w3.org/ns/odrl/2/action","@type":"@id","@array":true},odrlassignee:{"@id":"http://www.w3.org/ns/odrl/2/assignee","@type":"@id","@array":true},odrlassigner:{"@id":"http://www.w3.org/ns/odrl/2/assigner","@type":"@id","@array":true},odrlhasPolicy:{"@id":"http://www.w3.org/ns/odrl/2/hasPolicy","@type":"@id","@array":true},odrlpermission:{"@id":"http://www.w3.org/ns/odrl/2/permission","@type":"@id","@array":true},odrlprohibition:{"@id":"http://www.w3.org/ns/odrl/2/prohibition","@type":"@id","@array":true},odrltarget:{"@id":"http://www.w3.org/ns/odrl/2/target","@type":"@id"},odrluid:{"@id":"http://www.w3.org/ns/odrl/2/uid","@type":"@id"},relpredecessorversion:{"@id":"https://www.w3.org/ns/iana/link-relations/relation#predecessor-version","@type":"@id"},rellatestversion:{"@id":"https://www.w3.org/ns/iana/link-relations/relation#latest-version","@type":"@id"},qbDataSet:{"@id":"http://purl.org/linked-data/cube#DataSet","@type":"@id"},dcatDataset:{"@id":"http://www.w3.org/ns/dcat#Dataset","@type":"@id"},voidDataset:{"@id":"http://rdfs.org/ns/void#Dataset","@type":"@id"},psodraft:{"@id":"http://purl.org/spar/pso/draft","@type":"@id"},psopublished:{"@id":"http://purl.org/spar/pso/published","@type":"@id"},citoagreesWith:{"@id":"http://purl.org/spar/cito/agreesWith","@type":"@id"},citocites:{"@id":"http://purl.org/spar/cito/cites","@type":"@id"},citocitesAsAuthority:{"@id":"http://purl.org/spar/cito/citesAsAuthority","@type":"@id"},citocitesAsDataSource:{"@id":"http://purl.org/spar/cito/citesAsDataSource","@type":"@id"},citocitesAsEvidence:{"@id":"http://purl.org/spar/cito/citesAsEvidence","@type":"@id"},citocitesAsMetadataDocument:{"@id":"http://purl.org/spar/cito/citesAsMetadataDocument","@type":"@id"},citocitesAsPotentialSolution:{"@id":"http://purl.org/spar/cito/citesAsPotentialSolution","@type":"@id"},citocitesAsRecommendedReading:{"@id":"http://purl.org/spar/cito/citesAsRecommendedReading","@type":"@id"},citocitesAsRelated:{"@id":"http://purl.org/spar/cito/citesAsRelated","@type":"@id"},citocitesAsSourceDocument:{"@id":"http://purl.org/spar/cito/citesAsSourceDocument","@type":"@id"},citocitesForInformation:{"@id":"http://purl.org/spar/cito/citesForInformation","@type":"@id"},citocompiles:{"@id":"http://purl.org/spar/cito/compiles","@type":"@id"},citoconfirms:{"@id":"http://purl.org/spar/cito/confirms","@type":"@id"},citocontainsAssertionFrom:{"@id":"http://purl.org/spar/cito/containsAssertionFrom","@type":"@id"},citocorrects:{"@id":"http://purl.org/spar/cito/corrects","@type":"@id"},citocredits:{"@id":"http://purl.org/spar/cito/credits","@type":"@id"},citocritiques:{"@id":"http://purl.org/spar/cito/critiques","@type":"@id"},citoderides:{"@id":"http://purl.org/spar/cito/derides","@type":"@id"},citodescribes:{"@id":"http://purl.org/spar/cito/describes","@type":"@id"},citodisagreesWith:{"@id":"http://purl.org/spar/cito/disagreesWith","@type":"@id"},citodiscusses:{"@id":"http://purl.org/spar/cito/discusses","@type":"@id"},citodisputes:{"@id":"http://purl.org/spar/cito/disputes","@type":"@id"},citodocuments:{"@id":"http://purl.org/spar/cito/documents","@type":"@id"},citoextends:{"@id":"http://purl.org/spar/cito/extends","@type":"@id"},citoincludesExcerptFrom:{"@id":"http://purl.org/spar/cito/includesExcerptFrom","@type":"@id"},citoincludesQuotationFrom:{"@id":"http://purl.org/spar/cito/includesQuotationFrom","@type":"@id"},citolinksTo:{"@id":"http://purl.org/spar/cito/linksTo","@type":"@id"},citoobtainsBackgroundFrom:{"@id":"http://purl.org/spar/cito/obtainsBackgroundFrom","@type":"@id"},citoobtainsSupportFrom:{"@id":"http://purl.org/spar/cito/obtainsSupportFrom","@type":"@id"},citoparodies:{"@id":"http://purl.org/spar/cito/parodies","@type":"@id"},citoplagiarizes:{"@id":"http://purl.org/spar/cito/plagiarizes","@type":"@id"},citoqualifies:{"@id":"http://purl.org/spar/cito/qualifies","@type":"@id"},citorefutes:{"@id":"http://purl.org/spar/cito/refutes","@type":"@id"},citorepliesTo:{"@id":"http://purl.org/spar/cito/repliesTo","@type":"@id"},citoretracts:{"@id":"http://purl.org/spar/cito/retracts","@type":"@id"},citoreviews:{"@id":"http://purl.org/spar/cito/reviews","@type":"@id"},citoridicules:{"@id":"http://purl.org/spar/cito/ridicules","@type":"@id"},citospeculatesOn:{"@id":"http://purl.org/spar/cito/speculatesOn","@type":"@id"},citosupports:{"@id":"http://purl.org/spar/cito/supports","@type":"@id"},citoupdates:{"@id":"http://purl.org/spar/cito/updates","@type":"@id"},citousesConclusionsFrom:{"@id":"http://purl.org/spar/cito/usesConclusionsFrom","@type":"@id"},citousesDataFrom:{"@id":"http://purl.org/spar/cito/usesDataFrom","@type":"@id"},citousesMethodIn:{"@id":"http://purl.org/spar/cito/usesMethodIn","@type":"@id"},specrequirement:{"@id":"http://www.w3.org/ns/spec#requirement","@type":"@id"}},SecretAgentNames:["Abraham Lincoln","Admiral Awesome","Anonymous Coward","Believe it or not","Creative Monkey","Senegoid","Dog from the Web","Ekrub","Elegant Banana","Foo Bar","Lbmit","Lunatic Scholar","NahuLcm","Noslen","Okie Dokie","Samurai Cat","Vegan Superstar"],RefAreas:{AF:"Afghanistan",A9:"Africa",AL:"Albania",DZ:"Algeria",AS:"American Samoa",L5:"Andean Region",AD:"Andorra",AO:"Angola",AG:"Antigua and Barbuda","1A":"Arab World",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas, The",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia and Herzegovina",BW:"Botswana",BR:"Brazil",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cabo Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",S3:"Caribbean small states",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",JG:"Channel Islands",CL:"Chile",CN:"China",CO:"Colombia",KM:"Comoros",CD:"Congo, Dem. Rep.",CG:"Congo, Rep.",CR:"Costa Rica",CI:"Cote d'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curacao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",Z4:"East Asia & Pacific (all income levels)","4E":"East Asia & Pacific (developing only)",C4:"East Asia and the Pacific (IFC classification)",EC:"Ecuador",EG:"Egypt, Arab Rep.",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",XC:"Euro area",Z7:"Europe & Central Asia (all income levels)","7E":"Europe & Central Asia (developing only)",C5:"Europe and Central Asia (IFC classification)",EU:"European Union",FO:"Faeroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",PF:"French Polynesia",GA:"Gabon",GM:"Gambia, The",GE:"Georgia",DE:"Germany",GH:"Ghana",GR:"Greece",GL:"Greenland",GD:"Grenada",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",XE:"Heavily indebted poor countries (HIPC)",XD:"High income",XS:"High income: OECD",XR:"High income: nonOECD",HN:"Honduras",HK:"Hong Kong SAR, China",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Rep.",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Korea, Dem. Rep.",KR:"Korea, Rep.",KV:"Kosovo",KW:"Kuwait",KG:"Kyrgyz Republic",LA:"Lao PDR",ZJ:"Latin America & Caribbean (all income levels)",XJ:"Latin America & Caribbean (developing only)",L4:"Latin America and the Caribbean",C6:"Latin America and the Caribbean (IFC classification)",LV:"Latvia",XL:"Least developed countries: UN classification",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",XO:"Low & middle income",XM:"Low income",XN:"Lower middle income",LU:"Luxembourg",MO:"Macao SAR, China",MK:"Macedonia, FYR",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MR:"Mauritania",MU:"Mauritius",MX:"Mexico",L6:"Mexico and Central America",FM:"Micronesia, Fed. Sts.",ZQ:"Middle East & North Africa (all income levels)",XQ:"Middle East & North Africa (developing only)",C7:"Middle East and North Africa (IFC classification)",XP:"Middle income",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",M2:"North Africa",XU:"North America",MP:"Northern Mariana Islands",NO:"Norway",XY:"Not classified",OE:"OECD members",OM:"Oman",S4:"Other small states",S2:"Pacific island small states",PK:"Pakistan",PW:"Palau",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch part)",SK:"Slovak Republic",SI:"Slovenia",S1:"Small states",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa","8S":"South Asia",C8:"South Asia (IFC classification)",SS:"South Sudan",L7:"Southern Cone Extended",ES:"Spain",LK:"Sri Lanka",KN:"St. Kitts and Nevis",LC:"St. Lucia",MF:"St. Martin (French part)",VC:"St. Vincent and the Grenadines",C9:"Sub-Saharan Africa (IFC classification)",ZG:"Sub-Saharan Africa (all income levels)",ZF:"Sub-Saharan Africa (developing only)",A4:"Sub-Saharan Africa excluding South Africa",A5:"Sub-Saharan Africa excluding South Africa and Nigeria",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",XT:"Upper middle income",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela, RB",VN:"Vietnam",VI:"Virgin Islands (U.S.)",PS:"West Bank and Gaza","1W":"World",YE:"Yemen, Rep.",ZM:"Zambia",ZW:"Zimbabwe"},Languages:{ab:"аҧсуа",aa:"Afaraf",af:"Afrikaans",ak:"Akan",sq:"Shqip",am:"አማርኛ",ar:"العربية",an:"Aragonés",hy:"Հայերեն",as:"অসমীয়া",av:"Aвар",ae:"Avesta",ay:"Aymar",az:"Azərbaycanca",bm:"Bamanankan",ba:"башҡорт",eu:"Euskara",be:"Беларуская",bn:"বাংলা",bh:"भोजपुरी",bi:"Bislama",bs:"Bosanski",br:"Brezhoneg",bg:"български",my:"ဗမာစာ",ca:"Català",ch:"Chamoru",ce:"нохчийн мотт",ny:"chiCheŵa",zh:"中文",cv:"чӑваш чӗлхи",kw:"Kernewek",co:"Corsu",cr:"ᓀᐦᐃᔭᐍᐏᐣ",hr:"Hrvatski",cs:"Čeština",da:"Dansk",dv:"ދިވެހި",nl:"Nederlands",en:"English",eo:"Esperanto",et:"Eesti",ee:"Eʋegbe",fo:"Føroyskt",fj:"Vosa Vakaviti",fi:"Suomi",fr:"Français",ff:"Fulfulde",gl:"Galego",ka:"ქართული",de:"Deutsch",el:"Ελληνικά",gn:"Avañeẽ",gu:"ગુજરાતી",ht:"Kreyòl ayisyen",ha:"Hausa, هَوُسَ",he:"עברית",hz:"Otjiherero",hi:"हिन्दी",ho:"Hiri Motu",hu:"Magyar",ia:"Interlingua",id:"Bahasa Indonesia",ie:"Interlingue",ga:"Gaeilge",ig:"Asụsụ Igbo",ik:"Iñupiaq",io:"Ido",is:"Íslenska",it:"Italiano",iu:"ᐃᓄᒃᑎᑐᑦ",ja:"日本語",jv:"Basa Jawa",kl:"Kalaallisut",kn:"ಕನ್ನಡ",kr:"Kanuri",ks:"कश्मीरी",kk:"Қазақ тілі",km:"ភាសាខ្មែរ",ki:"Gĩkũyũ",rw:"Ikinyarwanda",ky:"кыргыз",kv:"коми кыв",kg:"KiKongo",ko:"한국어",ku:"Kurdî",kj:"Kuanyama",la:"Latina",lb:"Lëtzebuergesch",lg:"Luganda",li:"Limburgs",ln:"Lingála",lo:"ພາສາລາວ",lt:"Lietuvių",lu:"Luba-Katanga",lv:"Latviešu",gv:"Gaelg",mk:"македонски",mg:"Malagasy",ms:"Bahasa Melayu",ml:"മലയാളം",mt:"Malti",mi:"te reo Māori",mr:"मराठी",mh:"Kajin M̧ajeļ",mn:"монгол",na:"Naoero",nv:"Diné bizaad",nb:"Norsk bokmål",nd:"isiNdebele",ne:"नेपाली",ng:"Owambo",nn:"Nynorsk",no:"Norsk",ii:"Sichuan Yi",nr:"isiNdebele",oc:"Occitan",oj:"ᐊᓂᔑᓈᐯᒧᐎᓐ",cu:"Словѣньскъ",om:"Afaan Oromoo",or:"ଓଡ଼ିଆ",os:"ирон æвзаг",pa:"ਪੰਜਾਬੀ",pi:"पाऴि",fa:"فارسی",pl:"Polski",ps:"پښتو",pt:"Português",qu:"Runa Simi",rm:"Rumantsch",rn:"kiRundi",ro:"Română",ru:"русский язык",sa:"संस्कृतम्",sc:"sardu",sd:"सिन्धी",se:"Davvisámegiella",sm:"Gagana Samoa",sg:"Sängö",sr:"српски",gd:"Gàidhlig",sn:"chiShona",si:"සිංහල",sk:"slovenčina",sl:"slovenščina",so:"Soomaaliga",st:"Sesotho",es:"Español",su:"Basa Sunda",sw:"Kiswahili",ss:"SiSwati",sv:"Svenska",ta:"தமிழ்",te:"తెలుగు",tg:"тоҷикӣ",th:"ไทย",ti:"ትግርኛ",bo:"བོད་ཡིག",tk:"Türkmen",tl:"Tagalog",tn:"Setswana",to:"faka Tonga",tr:"Türkçe",ts:"Xitsonga",tt:"татарча",tw:"Twi",ty:"Reo Tahiti",ug:"ئۇيغۇرچە‎",uk:"українська",ur:"اردو",uz:"O‘zbek",ve:"Tshivenḓa",vi:"Tiếng Việt",vo:"Volapük",wa:"Walon",cy:"Cymraeg",wo:"Wollof",fy:"Frysk",xh:"IsiXhosa",yi:"ייִדיש",yo:"Yorùbá",za:"Saɯ cueŋƅ"}}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const util=__webpack_require__(114);module.exports={Icon:{".fas.fa-anchor":'<svg class="fas fa-anchor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M12.971 352h32.394C67.172 454.735 181.944 512 288 512c106.229 0 220.853-57.38 242.635-160h32.394c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h35.146c-20.29 54.317-84.963 86.588-144.117 94.015V256h52c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-52v-5.47c37.281-13.178 63.995-48.725 64-90.518C384.005 43.772 341.605.738 289.37.01 235.723-.739 192 42.525 192 96c0 41.798 26.716 77.35 64 90.53V192h-52c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h52v190.015c-58.936-7.399-123.82-39.679-144.117-94.015h35.146c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.029c-4.686-4.686-12.284-4.686-16.971 0L4.485 331.515C-3.074 339.074 2.28 352 12.971 352zM288 64c17.645 0 32 14.355 32 32s-14.355 32-32 32-32-14.355-32-32 14.355-32 32-32z"/></svg>',".fas.fa-bolt.fa-2x":'<svg class="fas fa-bolt fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"/></svg>',".fas.fa-bookmark":'<svg class="fas fa-bookmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M0 512V48C0 21.49 21.49 0 48 0h288c26.51 0 48 21.49 48 48v464L192 400 0 512z"/></svg>',".fas.fa-bullhorn":'<svg class="fas fa-bullhorn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"/></svg>',".fas.fa-bullhorn.fa-2x":'<svg class="fas fa-bullhorn fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"/></svg>',".fas.fa-chart-line":'<svg class="fas fa-chart-line" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"/></svg>',".fas.fa-check":'<svg class="fas fa-check" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"/></svg>',".fas.fa-crosshairs":'<svg class="fas fa-crosshairs" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"/></svg>',".fas.fa-hashtag":'<svg class="fas fa-hashtag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 0 0-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 0 0-11.813 9.891L132.528 128H53.432a12 12 0 0 0-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 0 0-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0 0 11.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0 0 11.813-9.891L315.472 384h79.096a12 12 0 0 0 11.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0 0 11.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></svg>',".fas.fa-reply.fa-2x":'<svg class="fas fa-reply fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M8.309 189.836L184.313 37.851C199.719 24.546 224 35.347 224 56.015v80.053c160.629 1.839 288 34.032 288 186.258 0 61.441-39.581 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 45.344-145.012-21.507-183.51-176.59-185.742V360c0 20.7-24.3 31.453-39.687 18.164l-176.004-152c-11.071-9.562-11.086-26.753 0-36.328z"/></svg>',".fas.fa-rocket":'<svg class="fas fa-rocket" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M505.1 19.1C503.8 13 499 8.2 492.9 6.9 460.7 0 435.5 0 410.4 0 307.2 0 245.3 55.2 199.1 128H94.9c-18.2 0-34.8 10.3-42.9 26.5L2.6 253.3c-8 16 3.6 34.7 21.5 34.7h95.1c-5.9 12.8-11.9 25.5-18 37.7-3.1 6.2-1.9 13.6 3 18.5l63.6 63.6c4.9 4.9 12.3 6.1 18.5 3 12.2-6.1 24.9-12 37.7-17.9V488c0 17.8 18.8 29.4 34.7 21.5l98.7-49.4c16.3-8.1 26.5-24.8 26.5-42.9V312.8c72.6-46.3 128-108.4 128-211.1.1-25.2.1-50.4-6.8-82.6zM400 160c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"/></svg>',".fas.fa-sticky-note":'<svg class="fas fa-sticky-note" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M312 320h136V56c0-13.3-10.7-24-24-24H24C10.7 32 0 42.7 0 56v400c0 13.3 10.7 24 24 24h264V344c0-13.2 10.8-24 24-24zm129 55l-98 98c-4.5 4.5-10.6 7-17 7h-6V352h128v6.1c0 6.3-2.5 12.4-7 16.9z"/></svg>',".fas.fa-thumbs-down":'<svg class="fas fa-thumbs-down" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"/></svg>',".fas.fa-thumbs-up":'<svg class="fas fa-thumbs-up" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"/></svg>',".fas.fa-times":'<svg class="fas fa-times" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',".fab.fa-osi":'<svg class="fab fa-osi" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 495.8 512"><path d="M0 259.2C2.3 123.4 97.4 26.8 213.8 11.1c138.8-18.6 255.6 75.8 278 201.1 21.3 118.8-44 230-151.6 274-9.3 3.8-14.4 1.7-18-7.7-17.8-46.3-35.6-92.7-53.4-139-3.1-8.1-1-13.2 7-16.8 24.2-11 39.3-29.4 43.3-55.8 6.4-42.4-24.5-78.7-64.5-82.2-39-3.4-71.8 23.7-77.5 59.7-5.2 33 11.1 63.7 41.9 77.7 9.6 4.4 11.5 8.6 7.8 18.4-17.9 46.6-35.8 93.2-53.7 139.9-2.6 6.9-8.3 9.3-15.5 6.5-52.6-20.3-101.4-61-130.8-119C1.9 318.7 1.6 280.2 0 259.2zm20.9-1.9c.4 6.6.6 14.3 1.3 22.1 6.3 71.9 49.6 143.5 131 183.1 3.2 1.5 4.4.8 5.6-2.3 14.9-39.1 29.9-78.2 45-117.3 1.3-3.3.6-4.8-2.4-6.7-31.6-19.9-47.3-48.5-45.6-86 1-21.6 9.3-40.5 23.8-56.3 30-32.7 77-39.8 115.5-17.6 31.9 18.4 49.5 53.8 45.2 90.4-3.6 30.6-19.3 53.9-45.7 69.8-2.7 1.6-3.5 2.9-2.3 6 15.2 39.2 30.2 78.4 45.2 117.7 1.2 3.1 2.4 3.8 5.6 2.3 35.5-16.6 65.2-40.3 88.1-72 34.8-48.2 49.1-101.9 42.3-161C459.8 112 354.1 14.7 218 31.5 111.9 44.5 22.7 134 20.9 257.3z"/></svg>',".far.fa-address-book":'<svg class="far fa-address-book" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M436 160c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h320c26.5 0 48-21.5 48-48v-48h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12h-20v-64h20zm-68 304H48V48h320v416zM208 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm-89.6 128h179.2c12.4 0 22.4-8.6 22.4-19.2v-19.2c0-31.8-30.1-57.6-67.2-57.6-10.8 0-18.7 8-44.8 8-26.9 0-33.4-8-44.8-8-37.1 0-67.2 25.8-67.2 57.6v19.2c0 10.6 10 19.2 22.4 19.2z"/></svg>',".far.fa-clock.fa-2x":'<svg class="far fa-clock fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>',".far.fa-lightbulb.fa-2x":'<svg class="far fa-lightbulb fa-2x" viewBox="0 0 352 512"><path d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"/></svg>',".far.fa-paper-plane.fa-2x":'<svg class="far fa-paper-plane fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1 111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6 8.2 0 16.3-2.1 23.6-6.2 12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6 48 288 464 48l-59.4 387.3z"/></svg>',".far.fa-snowflake.fa-2x":'<svg class="far fa-snowflake fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M440.1 355.2l-39.2-23 34.1-9.3c8.4-2.3 13.4-11.1 11.1-19.6l-4.1-15.5c-2.2-8.5-10.9-13.6-19.3-11.3L343 298.2 271.2 256l71.9-42.2 79.7 21.7c8.4 2.3 17-2.8 19.3-11.3l4.1-15.5c2.2-8.5-2.7-17.3-11.1-19.6l-34.1-9.3 39.2-23c7.5-4.4 10.1-14.2 5.8-21.9l-7.9-13.9c-4.3-7.7-14-10.3-21.5-5.9l-39.2 23 9.1-34.7c2.2-8.5-2.7-17.3-11.1-19.6l-15.2-4.1c-8.4-2.3-17 2.8-19.3 11.3l-21.3 81-71.9 42.2v-84.5L306 70.4c6.1-6.2 6.1-16.4 0-22.6l-11.1-11.3c-6.1-6.2-16.1-6.2-22.2 0l-24.9 25.4V16c0-8.8-7-16-15.7-16h-15.7c-8.7 0-15.7 7.2-15.7 16v46.1l-24.9-25.4c-6.1-6.2-16.1-6.2-22.2 0L142.1 48c-6.1 6.2-6.1 16.4 0 22.6l58.3 59.3v84.5l-71.9-42.2-21.3-81c-2.2-8.5-10.9-13.6-19.3-11.3L72.7 84c-8.4 2.3-13.4 11.1-11.1 19.6l9.1 34.7-39.2-23c-7.5-4.4-17.1-1.8-21.5 5.9l-7.9 13.9c-4.3 7.7-1.8 17.4 5.8 21.9l39.2 23-34.1 9.1c-8.4 2.3-13.4 11.1-11.1 19.6L6 224.2c2.2 8.5 10.9 13.6 19.3 11.3l79.7-21.7 71.9 42.2-71.9 42.2-79.7-21.7c-8.4-2.3-17 2.8-19.3 11.3l-4.1 15.5c-2.2 8.5 2.7 17.3 11.1 19.6l34.1 9.3-39.2 23c-7.5 4.4-10.1 14.2-5.8 21.9L10 391c4.3 7.7 14 10.3 21.5 5.9l39.2-23-9.1 34.7c-2.2 8.5 2.7 17.3 11.1 19.6l15.2 4.1c8.4 2.3 17-2.8 19.3-11.3l21.3-81 71.9-42.2v84.5l-58.3 59.3c-6.1 6.2-6.1 16.4 0 22.6l11.1 11.3c6.1 6.2 16.1 6.2 22.2 0l24.9-25.4V496c0 8.8 7 16 15.7 16h15.7c8.7 0 15.7-7.2 15.7-16v-46.1l24.9 25.4c6.1 6.2 16.1 6.2 22.2 0l11.1-11.3c6.1-6.2 6.1-16.4 0-22.6l-58.3-59.3v-84.5l71.9 42.2 21.3 81c2.2 8.5 10.9 13.6 19.3 11.3L375 428c8.4-2.3 13.4-11.1 11.1-19.6l-9.1-34.7 39.2 23c7.5 4.4 17.1 1.8 21.5-5.9l7.9-13.9c4.6-7.5 2.1-17.3-5.5-21.7z"/></svg>',".fas.fa-plus":'<svg class="fas fa-plus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>',".fas.fa-archive":'<svg class="fas fa-archive" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg>',".fas.fa-archive.fa-2x":'<svg class="fas fa-archive fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg>',".fas.fa-bars":'<svg class="fas fa-bars" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>',".fas.fa-bold":'<svg class="fas fa-bold" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M304.793 243.891c33.639-18.537 53.657-54.16 53.657-95.693 0-48.236-26.25-87.626-68.626-104.179C265.138 34.01 240.849 32 209.661 32H24c-8.837 0-16 7.163-16 16v33.049c0 8.837 7.163 16 16 16h33.113v318.53H24c-8.837 0-16 7.163-16 16V464c0 8.837 7.163 16 16 16h195.69c24.203 0 44.834-1.289 66.866-7.584C337.52 457.193 376 410.647 376 350.014c0-52.168-26.573-91.684-71.207-106.123zM142.217 100.809h67.444c16.294 0 27.536 2.019 37.525 6.717 15.828 8.479 24.906 26.502 24.906 49.446 0 35.029-20.32 56.79-53.029 56.79h-76.846V100.809zm112.642 305.475c-10.14 4.056-22.677 4.907-31.409 4.907h-81.233V281.943h84.367c39.645 0 63.057 25.38 63.057 63.057.001 28.425-13.66 52.483-34.782 61.284z"/></svg>',".fas.fa-calculator":'<svg class="fas fa-calculator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"/></svg>',"fas.fa-circle-exclamation":'<svg class="fas fa-circle-exclamation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z"/></svg>',".fas.fa-circle-notch.fa-spin.fa-fw":'<svg class="fas fa-circle-notch fa-spin fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"/></svg>',".fas.fa-circle.fa-2x":'<svg class="fas fa-circle fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"/></svg>',".fas.fa-code":'<svg class="fas fa-code" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg>',".fas.fa-code-branch.fa-2x":'<svg class="fas fa-code-branch fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',".fas.fa-code.fa-2x":'<svg class="fas fa-code fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"/></svg>',".fas.fa-coffee.fa-2x":'<svg class="fas fa-coffee fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M192 384h192c53 0 96-43 96-96h32c70.6 0 128-57.4 128-128S582.6 32 512 32H120c-13.3 0-24 10.7-24 24v232c0 53 43 96 96 96zM512 96c35.3 0 64 28.7 64 64s-28.7 64-64 64h-32V96h32zm47.7 384H48.3c-47.6 0-61-64-36-64h583.3c25 0 11.8 64-35.9 64z"/></svg>',".fas.fa-comments":'<svg class="fas fa-comments" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"/></svg>',".fas.fa-database.fa-2x":'<svg class="fas fa-database fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"/></svg>',".fas.fa-external-link-alt.fa-2x":'<svg class="fas fa-external-link-alt fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M576 24v127.984c0 21.461-25.96 31.98-40.971 16.971l-35.707-35.709-243.523 243.523c-9.373 9.373-24.568 9.373-33.941 0l-22.627-22.627c-9.373-9.373-9.373-24.569 0-33.941L442.756 76.676l-35.703-35.705C391.982 25.9 402.656 0 424.024 0H552c13.255 0 24 10.745 24 24zM407.029 270.794l-16 16A23.999 23.999 0 0 0 384 303.765V448H64V128h264a24.003 24.003 0 0 0 16.97-7.029l16-16C376.089 89.851 365.381 64 344 64H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V287.764c0-21.382-25.852-32.09-40.971-16.97z"/></svg>',".fas.fa-flask":'<svg class="fas fa-flask" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M437.2 403.5L320 215V64h8c13.3 0 24-10.7 24-24V24c0-13.3-10.7-24-24-24H120c-13.3 0-24 10.7-24 24v16c0 13.3 10.7 24 24 24h8v151L10.8 403.5C-18.5 450.6 15.3 512 70.9 512h306.2c55.7 0 89.4-61.5 60.1-108.5zM137.9 320l48.2-77.6c3.7-5.2 5.8-11.6 5.8-18.4V64h64v160c0 6.9 2.2 13.2 5.8 18.4l48.2 77.6h-172z"/></svg>',".fas.fa-header":'<svg class="fas fa-header" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M496 80V48c0-8.837-7.163-16-16-16H320c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h37.621v128H154.379V96H192c8.837 0 16-7.163 16-16V48c0-8.837-7.163-16-16-16H32c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h37.275v320H32c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h160c8.837 0 16-7.163 16-16v-32c0-8.837-7.163-16-16-16h-37.621V288H357.62v128H320c-8.837 0-16 7.163-16 16v32c0 8.837 7.163 16 16 16h160c8.837 0 16-7.163 16-16v-32c0-8.837-7.163-16-16-16h-37.275V96H480c8.837 0 16-7.163 16-16z"/></svg>',".fas.fa-i-cursor.fa-2x":'<svg class="fas fa-i-cursor fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path d="M256 52.048V12.065C256 5.496 250.726.148 244.158.066 211.621-.344 166.469.011 128 37.959 90.266.736 46.979-.114 11.913.114 5.318.157 0 5.519 0 12.114v39.645c0 6.687 5.458 12.078 12.145 11.998C38.111 63.447 96 67.243 96 112.182V224H60c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h36v112c0 44.932-56.075 48.031-83.95 47.959C5.404 447.942 0 453.306 0 459.952v39.983c0 6.569 5.274 11.917 11.842 11.999 32.537.409 77.689.054 116.158-37.894 37.734 37.223 81.021 38.073 116.087 37.845 6.595-.043 11.913-5.405 11.913-12V460.24c0-6.687-5.458-12.078-12.145-11.998C217.889 448.553 160 444.939 160 400V288h36c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-36V112.182c0-44.932 56.075-48.213 83.95-48.142 6.646.018 12.05-5.346 12.05-11.992z"/></svg>',".fas.fa-image":'<svg class="fas fa-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"/></svg>',".fas.fa-inbox":'<svg class="fas fa-inbox" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M567.938 243.908L462.25 85.374A48.003 48.003 0 0 0 422.311 64H153.689a48 48 0 0 0-39.938 21.374L8.062 243.908A47.994 47.994 0 0 0 0 270.533V400c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V270.533a47.994 47.994 0 0 0-8.062-26.625zM162.252 128h251.497l85.333 128H376l-32 64H232l-32-64H76.918l85.334-128z"/></svg>',".fas.fa-italic":'<svg class="fas fa-italic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M204.758 416h-33.849l62.092-320h40.725a16 16 0 0 0 15.704-12.937l6.242-32C297.599 41.184 290.034 32 279.968 32H120.235a16 16 0 0 0-15.704 12.937l-6.242 32C96.362 86.816 103.927 96 113.993 96h33.846l-62.09 320H46.278a16 16 0 0 0-15.704 12.935l-6.245 32C22.402 470.815 29.967 480 40.034 480h158.479a16 16 0 0 0 15.704-12.935l6.245-32c1.927-9.88-5.638-19.065-15.704-19.065z"/></svg>',".fas.fa-life-ring.fa-2x":'<svg class="fas fa-life-ring fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 504c136.967 0 248-111.033 248-248S392.967 8 256 8 8 119.033 8 256s111.033 248 248 248zm-103.398-76.72l53.411-53.411c31.806 13.506 68.128 13.522 99.974 0l53.411 53.411c-63.217 38.319-143.579 38.319-206.796 0zM336 256c0 44.112-35.888 80-80 80s-80-35.888-80-80 35.888-80 80-80 80 35.888 80 80zm91.28 103.398l-53.411-53.411c13.505-31.806 13.522-68.128 0-99.974l53.411-53.411c38.319 63.217 38.319 143.579 0 206.796zM359.397 84.72l-53.411 53.411c-31.806-13.505-68.128-13.522-99.973 0L152.602 84.72c63.217-38.319 143.579-38.319 206.795 0zM84.72 152.602l53.411 53.411c-13.506 31.806-13.522 68.128 0 99.974L84.72 359.398c-38.319-63.217-38.319-143.579 0-206.796z"/></svg>',".fas.fa-link":'<svg class="fas fa-link" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg>',".fas.fa-link-ol":'<svg class="fas fa-link-ol" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M3.263 139.527c0-7.477 3.917-11.572 11.573-11.572h15.131V88.078c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.938C32.815 33.602 36.732 32 42.785 32H54.89c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572H14.836c-7.656 0-11.573-4.095-11.573-11.572v-8.902zM2.211 304.591c0-47.278 50.955-56.383 50.955-69.165 0-7.18-5.954-8.755-9.28-8.755-3.153 0-6.479 1.051-9.455 3.852-5.079 4.903-10.507 7.004-16.111 2.451l-8.579-6.829c-5.779-4.553-7.18-9.805-2.803-15.409C13.592 201.981 26.025 192 47.387 192c19.437 0 44.476 10.506 44.476 39.573 0 38.347-46.753 46.402-48.679 56.909h39.049c7.529 0 11.557 4.027 11.557 11.382v8.755c0 7.354-4.028 11.382-11.557 11.382h-67.94c-7.005 0-12.083-4.028-12.083-11.382v-4.028zM5.654 454.61l5.603-9.28c3.853-6.654 9.105-7.004 15.584-3.152 4.903 2.101 9.63 3.152 14.359 3.152 10.155 0 14.358-3.502 14.358-8.23 0-6.654-5.604-9.106-15.934-9.106h-4.728c-5.954 0-9.28-2.101-12.258-7.88l-1.05-1.926c-2.451-4.728-1.226-9.806 2.801-14.884l5.604-7.004c6.829-8.405 12.257-13.483 12.257-13.483v-.35s-4.203 1.051-12.608 1.051H16.685c-7.53 0-11.383-4.028-11.383-11.382v-8.755c0-7.53 3.853-11.382 11.383-11.382h58.484c7.529 0 11.382 4.027 11.382 11.382v3.327c0 5.778-1.401 9.806-5.079 14.183l-17.509 20.137c19.611 5.078 28.716 20.487 28.716 34.845 0 21.363-14.358 44.126-48.503 44.126-16.636 0-28.192-4.728-35.896-9.455-5.779-4.202-6.304-9.805-2.626-15.934zM144 132h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>',".fas.fa-link-ul":'<svg class="fas fa-link-ul" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg>',".fas.fa-link.fa-2x":'<svg class="fas fa-link fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg>',".fas.fa-magic":'<svg class="fas fa-magic" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg>',".fas.fa-minus":'<svg class="fas fa-minus" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/></svg>',".fas.fa-print.fa-2x":'<svg class="fas fa-print fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"/></svg>',".fas.fa-quote-right":'<svg class="fas fa-quote-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 32H336c-26.5 0-48 21.5-48 48v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48zm-288 0H48C21.5 32 0 53.5 0 80v128c0 26.5 21.5 48 48 48h80v64c0 35.3-28.7 64-64 64h-8c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h8c88.4 0 160-71.6 160-160V80c0-26.5-21.5-48-48-48z"/></svg>',".fas.fa-fist-raised":'<svg class="fas fa-fist-raised" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M255.98 160V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v146.93c5.02-1.78 10.34-2.93 15.97-2.93h48.03zm128 95.99c-.01-35.34-28.66-63.99-63.99-63.99H207.85c-8.78 0-15.9 7.07-15.9 15.85v.56c0 26.27 21.3 47.59 47.57 47.59h35.26c9.68 0 13.2 3.58 13.2 8v16.2c0 4.29-3.59 7.78-7.88 8-44.52 2.28-64.16 24.71-96.05 72.55l-6.31 9.47a7.994 7.994 0 0 1-11.09 2.22l-13.31-8.88a7.994 7.994 0 0 1-2.22-11.09l6.31-9.47c15.73-23.6 30.2-43.26 47.31-58.08-17.27-5.51-31.4-18.12-38.87-34.45-6.59 3.41-13.96 5.52-21.87 5.52h-32c-12.34 0-23.49-4.81-32-12.48C71.48 251.19 60.33 256 48 256H16c-5.64 0-10.97-1.15-16-2.95v77.93c0 33.95 13.48 66.5 37.49 90.51L63.99 448v64h255.98v-63.96l35.91-35.92A96.035 96.035 0 0 0 384 344.21l-.02-88.22zm-32.01-90.09V48c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v112h32c11.28 0 21.94 2.31 32 5.9zM16 224h32c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v128c0 8.84 7.16 16 16 16zm95.99 0h32c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v160c0 8.84 7.16 16 16 16z"/></svg>',".fas.fa-recycle":'<svg class="fas fa-recycle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M184.561 261.903c3.232 13.997-12.123 24.635-24.068 17.168l-40.736-25.455-50.867 81.402C55.606 356.273 70.96 384 96.012 384H148c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12H96.115c-75.334 0-121.302-83.048-81.408-146.88l50.822-81.388-40.725-25.448c-12.081-7.547-8.966-25.961 4.879-29.158l110.237-25.45c8.611-1.988 17.201 3.381 19.189 11.99l25.452 110.237zm98.561-182.915l41.289 66.076-40.74 25.457c-12.051 7.528-9 25.953 4.879 29.158l110.237 25.45c8.672 1.999 17.215-3.438 19.189-11.99l25.45-110.237c3.197-13.844-11.99-24.719-24.068-17.168l-40.687 25.424-41.263-66.082c-37.521-60.033-125.209-60.171-162.816 0l-17.963 28.766c-3.51 5.62-1.8 13.021 3.82 16.533l33.919 21.195c5.62 3.512 13.024 1.803 16.536-3.817l17.961-28.743c12.712-20.341 41.973-19.676 54.257-.022zM497.288 301.12l-27.515-44.065c-3.511-5.623-10.916-7.334-16.538-3.821l-33.861 21.159c-5.62 3.512-7.33 10.915-3.818 16.536l27.564 44.112c13.257 21.211-2.057 48.96-27.136 48.96H320V336.02c0-14.213-17.242-21.383-27.313-11.313l-80 79.981c-6.249 6.248-6.249 16.379 0 22.627l80 79.989C302.689 517.308 320 510.3 320 495.989V448h95.88c75.274 0 121.335-82.997 81.408-146.88z"/></svg>',".fas.fa-table.fa-2x":'<svg class="fas fa-table fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"/></svg>',".fas.fa-times-circle":'<svg class="fas fa-times-circle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',".fas.fa-times-circle.fa-fw":'<svg class="fas fa-times-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',".fas.fa-times.fa-2x":'<svg class="fas fa-times fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',".fas.fa-trash-alt":'<svg class="fas fa-trash-alt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 84V56c0-13.3 10.7-24 24-24h112l9.4-18.7c4-8.2 12.3-13.3 21.4-13.3h114.3c9.1 0 17.4 5.1 21.5 13.3L312 32h112c13.3 0 24 10.7 24 24v28c0 6.6-5.4 12-12 12H12C5.4 96 0 90.6 0 84zm416 56v324c0 26.5-21.5 48-48 48H80c-26.5 0-48-21.5-48-48V140c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12zm-272 68c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208z"/></svg>'},createRDFaHTML:createRDFaHTML};function createRDFaHTML(r,mode){var s="",about="",property="",rel="",resource="",href="",content="",langDatatype="",typeOf="",idValue="",id="";if("rel"in r&&r.rel!=""){rel=' rel="'+r.rel+'"'}if("href"in r&&r.href!=""){href=' href="'+r.href+'"'}if(mode=="expanded"){idValue=util.generateAttributeId();id=' id="'+idValue+'"';if("about"in r&&r.about!=""){about=' about="'+r.about+'"'}else{about=' about="#'+idValue+'"'}if("property"in r&&r.property!=""){property=' property="'+r.property+'"'}else{property=' property="rdfs:label"'}if("resource"in r&&r.resource!=""){resource=' resource="'+r.resource+'"'}if("content"in r&&r.content!=""){content=' content="'+r.content+'"'}if("lang"in r&&r.lang!=""){langDatatype=' lang="'+r.lang+'" xml:lang="'+r.lang+'"'}else{if("datatype"in r&&r.datatype!=""){langDatatype=' datatype="'+r.datatype+'"'}}if("typeOf"in r&&r.typeOf!=""){typeOf=' typeof="'+r.typeOf+'"'}}var element="datatype"in r&&r.datatype=="xsd:dateTime"?"time":href==""?"span":"a";var textContent=r.textContent||r.href||"";s="<"+element+about+content+href+id+langDatatype+property+rel+resource+typeOf+">"+textContent+"</"+element+">";return s}},module=>{"use strict";module.exports={uniqueArray:uniqueArray,getDateTimeISO:getDateTimeISO,removeChildren:removeChildren,copyTextToClipboard:copyTextToClipboard,escapeRegExp:escapeRegExp,sleep:sleep,fragmentFromString:fragmentFromString,generateUUID:generateUUID,generateAttributeId:generateAttributeId,getHash:getHash,hashCode:hashCode,sortTriples:sortTriples};function uniqueArray(a){var n={};var r=[];for(var i=0;i<a.length;i++){if(!n[a[i]]){n[a[i]]=true;r.push(a[i])}}return r}function getDateTimeISO(){var date=new Date;return date.toISOString()}function removeChildren(node){while(node.firstChild){node.removeChild(node.firstChild)}}function copyTextToClipboard(text){console.log(text);if(!navigator.clipboard){try{var successful=document.execCommand("copy")}catch(err){}return}navigator.clipboard.writeText(text).then(function(){},function(err){})}function escapeRegExp(string){return string.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sleep(ms){return new Promise(resolve=>setTimeout(resolve,ms))}function fragmentFromString(strHTML){return document.createRange().createContextualFragment(strHTML)}function generateUUID(){var lut=[];for(var i=0;i<256;i++){lut[i]=(i<16?"0":"")+i.toString(16)}var s=function(){var d0=Math.random()*4294967295|0;var d1=Math.random()*4294967295|0;var d2=Math.random()*4294967295|0;var d3=Math.random()*4294967295|0;return lut[d0&255]+lut[d0>>8&255]+lut[d0>>16&255]+lut[d0>>24&255]+"-"+lut[d1&255]+lut[d1>>8&255]+"-"+lut[d1>>16&15|64]+lut[d1>>24&255]+"-"+lut[d2&63|128]+lut[d2>>8&255]+"-"+lut[d2>>16&255]+lut[d2>>24&255]+lut[d3&255]+lut[d3>>8&255]+lut[d3>>16&255]+lut[d3>>24&255]};return s()}function generateAttributeId(prefix,string){prefix=prefix||"";if(string){string=string.trim();string=string.replace(/\W/g,"-");var s1=string.substr(0,1);string=prefix===""&&s1==parseInt(s1)?"x-"+string:prefix+string;return document.getElementById(string)?string+"-x":string}else{return generateUUID()}}function getHash(message,algo="SHA-256"){var buffer=new TextEncoder("utf-8").encode(message);return window.crypto.subtle.digest(algo,buffer).then(function(hash){var hexCodes=[];var view=new DataView(hash);for(var i=0;i<view.byteLength;i+=4){var value=view.getUint32(i);var stringValue=value.toString(16);var padding="00000000";var paddedValue=(padding+stringValue).slice(-padding.length);hexCodes.push(paddedValue)}return hexCodes.join("")})}function hashCode(s){var hash=0;if(s.length==0)return hash;for(var i=0;i<s.length;i++){var char=s.charCodeAt(i);hash=(hash<<5)-hash+char;hash=hash&hash}return hash}function sortTriples(triples,options){options=options||{};if(!("sortBy"in options)){options["sortBy"]="object"}triples._graph.sort(function(a,b){return a[options.sortBy].nominalValue.toLowerCase().localeCompare(b[options.sortBy].nominalValue.toLowerCase())});return triples}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Config=__webpack_require__(112);const util=__webpack_require__(114);const uri=__webpack_require__(116);const ld=__webpack_require__(2);const SimpleRDF=ld.SimpleRDF;const graph=__webpack_require__(117);const template=__webpack_require__(113);module.exports={domToString:domToString,dumpNode:dumpNode,getDoctype:getDoctype,getDocument:getDocument,createHTML:createHTML,createActivityHTML:createActivityHTML,getClosestSectionNode:getClosestSectionNode,removeSelectorFromNode:removeSelectorFromNode,removeNodesWithIds:removeNodesWithIds,getNodeLanguage:getNodeLanguage,showActionMessage:showActionMessage,selectArticleNode:selectArticleNode,insertDocumentLevelHTML:insertDocumentLevelHTML,setDate:setDate,createDateHTML:createDateHTML,setEditSelections:setEditSelections,getRDFaPrefixHTML:getRDFaPrefixHTML,setDocumentRelation:setDocumentRelation,setDocumentStatus:setDocumentStatus,getDocumentStatusHTML:getDocumentStatusHTML,buttonRemoveAside:buttonRemoveAside,buttonClose:buttonClose,getButtonDisabledHTML:getButtonDisabledHTML,showTimeMap:showTimeMap,getResourceInfo:getResourceInfo,getResourceInfoODRLPolicies:getResourceInfoODRLPolicies,setFeatureStatesOfResourceInfo:setFeatureStatesOfResourceInfo,createImmutableResource:createImmutableResource,createMutableResource:createMutableResource,updateMutableResource:updateMutableResource,removeReferences:removeReferences,buildReferences:buildReferences,updateReferences:updateReferences,showRobustLinksDecoration:showRobustLinksDecoration,getCitationLabelsFromTerms:getCitationLabelsFromTerms};function domToString(node,options={}){var selfClosing=options.selfClosing||[];var skipAttributes=options.skipAttributes||[];var noEsc=[false];return dumpNode(node,options,skipAttributes,selfClosing,noEsc)}function dumpNode(node,options,skipAttributes,selfClosing,noEsc){var out="";if(typeof node.nodeType==="undefined")return out;if(node.nodeType===1){if(node.hasAttribute("class")&&"classWithChildText"in options&&node.matches(options.classWithChildText.class)){out+=node.querySelector(options.classWithChildText.element).textContent}else if(!(options.skipNodeWithClass&&node.matches("."+options.skipNodeWithClass))){var ename=node.nodeName.toLowerCase();out+="<"+ename;var attrList=[];for(let i=node.attributes.length-1;i>=0;i--){var atn=node.attributes[i];if(skipAttributes.indexOf(atn.name)>-1)continue;if(/^\d+$/.test(atn.name))continue;if(atn.name==="class"&&"replaceClassItemWith"in options){atn.value.split(" ").forEach(function(aValue){if(options.replaceClassItemWith.source.indexOf(aValue)>-1){var re=new RegExp(aValue,"g");atn.value=atn.value.replace(re,options.replaceClassItemWith.target).trim()}})}if(!(atn.name==="class"&&"skipClassWithValue"in options&&options.skipClassWithValue===atn.value)){attrList.push(atn.name+'="'+atn.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}if(attrList.length>0){if("sortAttributes"in options&&options.sortAttributes){attrList.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase())})}out+=" "+attrList.join(" ")}if(selfClosing.indexOf(ename)>-1){out+=" />"}else{out+=">";out+=ename==="html"?"\n  ":"";noEsc.push(ename==="style"||ename==="script"||ename==="pre"||ename==="code"||ename==="samp");for(var i=0;i<node.childNodes.length;i++){out+=dumpNode(node.childNodes[i],options,skipAttributes,selfClosing,noEsc)}noEsc.pop();out+=ename==="body"||ename==="html"?"</"+ename+">"+"\n":"</"+ename+">"}}}else if(node.nodeType===8){out+="\n\x3c!--"+node.nodeValue+"--\x3e"}else if(node.nodeType===3||node.nodeType===4){let nl=node.nodeValue;out+=noEsc.indexOf(true)>-1?nl.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):nl}else{console.log("Warning; Cannot handle serialising nodes of type: "+node.nodeType)}return out}function getDoctype(){var node=document.doctype;var doctype="";if(node!==null){doctype="<!DOCTYPE "+node.name+(node.publicId?' PUBLIC "'+node.publicId+'"':"")+(!node.publicId&&node.systemId?" SYSTEM":"")+(node.systemId?' "'+node.systemId+'"':"")+">"}return doctype}function getDocument(cn,options){let node=cn||document.documentElement.cloneNode(true);options=options||Config.DOMNormalisation;let doctype=getDoctype();let s=doctype.length>0?doctype+"\n":"";s+=domToString(node,options);return s}function createHTML(title,main,options){title=title||"";options=options||{};var prefix="prefixes"in options&&Object.keys(options.prefixes).length>0?' prefix="'+getRDFaPrefixHTML(options.prefixes)+'"':"";return'<!DOCTYPE html>\n<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">\n  <head>\n    <meta charset="utf-8" />\n    <title>'+title+"</title>\n  </head>\n  <body"+prefix+">\n    <main>\n"+main+"\n    </main>\n  </body>\n</html>\n"}function createActivityHTML(o){var prefixes=' prefix="rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns# schema: http://schema.org/ oa: http://www.w3.org/ns/oa# as: https://www.w3.org/ns/activitystreams#"';var types="<dt>Types</dt>";o.type.forEach(function(t){types+='<dd><a about="" href="'+Config.Prefixes[t.split(":")[0]]+t.split(":")[1]+'" typeof="'+t+'">'+t.split(":")[1]+"</a></dd>"});var asObjectTypes="";if("object"in o&&"objectTypes"in o&&o.objectTypes.length>0){asObjectTypes="<dl><dt>Types</dt>";o.objectTypes.forEach(function(t){asObjectTypes+='<dd><a about="'+o.object+'" href="'+t+'" typeof="'+t+'">'+t+"</a></dd>"});asObjectTypes+="</dl>"}var asObjectLicense="";if("object"in o&&"objectLicense"in o&&o.objectLicense.length>0){asObjectLicense='<dl><dt>License</dt><dd><a about="'+o.object+'" href="'+o.objectLicense+'" property="schema:license">'+o.objectLicense+"</a></dd></dl>"}var asobject="object"in o?'<dt>Object</dt><dd><a href="'+o.object+'" property="as:object">'+o.object+"</a>"+asObjectTypes+asObjectLicense+"</dd>":"";var asinReplyTo="inReplyTo"in o?'<dt>In reply to</dt><dd><a href="'+o.inReplyTo+'" property="as:inReplyTo">'+o.inReplyTo+"</a></dd>":"";var ascontext="context"in o&&o.context.length>0?'<dt>Context</dt><dd><a href="'+o.context+'" property="as:context">'+o.context+"</a></dd>":"";var astarget="target"in o&&o.target.length>0?'<dt>Target</dt><dd><a href="'+o.target+'" property="as:target">'+o.target+"</a></dd>":"";var datetime=util.getDateTimeISO();var asupdated='<dt>Updated</dt><dd><time datetime="'+datetime+'" datatype="xsd:dateTime" property="as:updated" content="'+datetime+'">'+datetime.substr(0,19).replace("T"," ")+"</time></dd>";var assummary="summary"in o&&o.summary.length>0?'<dt>Summary</dt><dd property="as:summary" datatype="rdf:HTML">'+o.summary+"</dd>":"";var ascontent="content"in o&&o.content.length>0?'<dt>Content</dt><dd property="as:content" datatype="rdf:HTML">'+o.content+"</dd>":"";var asactor=Config.User.IRI?'<dt>Actor</dt><dd><a href="'+Config.User.IRI+'" property="as:actor">'+Config.User.IRI+"</a></dd>":"";var license='<dt>License</dt><dd><a href="'+Config.NotificationLicense+'" property="schema:license">'+Config.NotificationLicense+"</a></dd>";var asto="to"in o&&o.to.length>0&&!o.to.match(/\s/g)&&o.to.match(/^https?:\/\//gi)?'<dt>To</dt><dd><a href="'+o.to+'" property="as:to">'+o.to+"</a></dd>":"";var statements="statements"in o?o.statements:"";var dl=[types,asobject,ascontext,astarget,asupdated,assummary,ascontent,asactor,license,asto].map(function(n){if(n!==""){return"      "+n+"\n"}}).join("");var title="Notification";if(types.indexOf("as:Announce")>-1){title+=": Announced"}else if(types.indexOf("as:Create")>-1){title+=": Created"}else if(types.indexOf("as:Like")>-1){title+=": Liked"}else if(types.indexOf("as:Dislike")>-1){title+=": Disliked"}else if(types.indexOf("as:Add")>-1){title+=": Added"}var data="<article"+prefixes+">\n  <h1>"+title+'</h1>\n  <section>\n    <dl about="">\n'+dl+"    </dl>\n  </section>\n  <section>\n"+statements+"\n  </section>\n</article>";return data}function getClosestSectionNode(node){return node.closest("section")||node.closest("div")||node.closest("article")||node.closest("main")||node.closest("body")}function removeSelectorFromNode(node,selector){var clone=node.cloneNode(true);var x=clone.querySelectorAll(selector);x.forEach(function(i){i.parentNode.removeChild(i)});return clone}function getNodeLanguage(node){node=node||document.body;var lang="";var closestLang=node.closest("[lang], [xml\\:lang]");if(closestLang){lang=closestLang.getAttribute("lang")||closestLang.getAttributeNS("","xml:lang")}return lang}function showActionMessage(node,message,options){options=options||{};options["timer"]="timer"in options?options.timer:Config.ActionMessage.Timer;var message='<aside id="document-action-message" class="do on"><p>'+message+"</p></aside>";node.appendChild(util.fragmentFromString(message));window.setTimeout(function(){var dam=document.getElementById("document-action-message");dam.parentNode.removeChild(dam)},options.timer)}function selectArticleNode(node){var x=node.querySelectorAll(Config.ArticleNodeSelectors.join(","));return x&&x.length>0?x[x.length-1]:document.body}function insertDocumentLevelHTML(rootNode,h,options){rootNode=rootNode||document;options=options||{};options["id"]="id"in options?options.id:Config.DocumentItems[Config.DocumentItems.length-1];var item=Config.DocumentItems.indexOf(options.id);var article=selectArticleNode(rootNode);h="\n"+h;if(item>-1){for(var i=item;i>=0;i--){var node=rootNode.querySelector("#"+Config.DocumentItems[i]);if(node){node.insertAdjacentHTML("afterend",h);break}else if(i==0){var a=article.querySelector("h1");if(a){a.insertAdjacentHTML("afterend",h)}else{article.insertAdjacentHTML("afterbegin",h)}break}}}else{article.insertAdjacentHTML("afterbegin",h)}return rootNode}function setDate(rootNode,options){rootNode=rootNode||document;options=options||{};var title="title"in options?options.title:"Created";var id=options.id?options.id:"document-"+title.toLowerCase().replace(/\W/g,"-");var node="property"in options?rootNode.querySelector("#"+id+' [property="'+options.property+'"]'):rootNode.querySelector("#"+id+" time");if(node){var datetime="datetime"in options?options.datetime.toISOString():util.getDateTimeISO();if(node.getAttribute("datetime")){node.setAttribute("datetime",datetime)}if(node.getAttribute("content")){node.setAttribute("content",datetime)}node.textContent=datetime.substr(0,datetime.indexOf("T"))}else{rootNode=insertDocumentLevelHTML(rootNode,createDateHTML(options),{id:id})}return rootNode}function createDateHTML(options){options=options||{};var title="title"in options?options.title:"Created";var id="id"in options&&options.id.length>0?' id="'+options.id+'"':' id="document-'+title.toLowerCase().replace(/\W/g,"-")+'"';var c="class"in options&&options.class.length>0?' class="'+options.class+'"':"";var datetime="datetime"in options?options.datetime.toISOString():util.getDateTimeISO();var datetimeLabel=datetime.substr(0,datetime.indexOf("T"));var time="property"in options?'<time content="'+datetime+'" datatype="xsd:dateTime" datetime="'+datetime+'" property="'+options.property+'">'+datetimeLabel+"</time>":'<time datetime="'+datetime+'">'+datetimeLabel+"</time>";var date="        <dl"+c+id+">\n      <dt>"+title+"</dt>\n      <dd>"+time+"</dd>\n    </dl>\n";return date}function setEditSelections(options){var options=options||{};if(!("datetime"in options)){options["datetime"]=new Date}var documentAuthor="authors";var documentAuthorName="author-name";var dA=document.getElementById(documentAuthor);if(dA){if(dA.classList&&dA.classList.contains("do")>-1){dA.removeAttribute("class")}dA.removeAttribute("contenteditable")}var dANS=document.querySelectorAll("#"+documentAuthorName+" .selected");dANS.forEach(function(authorNameSelected){authorNameSelected.removeAttribute("class");authorNameSelected.removeAttribute("contenteditable")});var dANE=document.querySelectorAll("#"+documentAuthorName+" .do");dANE.forEach(function(i){i.parentNode.removeChild(i)});var dd=document.querySelectorAll("#"+documentAuthorName+" dd");if(dA&&dd.length==0){dA=document.getElementById(documentAuthor);dA.parentNode.removeChild(dA)}var documentLanguage="document-language";var dLangS=document.querySelector("#"+documentLanguage+" option:checked");if(dLangS){var languageValue=dLangS.value;var dl=dLangS.closest("#"+documentLanguage);dl.removeAttribute("contenteditable");if(languageValue==""){dl.parentNode.removeChild(dl)}else{dl.removeAttribute("class");var dd=dLangS.closest("dd");dd.parentNode.removeChild(dd);dd='<dd><span content="'+languageValue+'" lang="" property="dcterms:language" xml:lang="">'+Config.Languages[languageValue]+"</span></dd>";dl.insertAdjacentHTML("beforeend",dd)}}var documentLicense="document-license";var dLS=document.querySelector("#"+documentLicense+" option:checked");if(dLS){var licenseIRI=dLS.value;var dl=dLS.closest("#"+documentLicense);dl.removeAttribute("contenteditable");if(licenseIRI==""){dl.parentNode.removeChild(dl)}else{dl.removeAttribute("class");var dd=dLS.closest("dd");dd.parentNode.removeChild(dd);dd='<dd><a href="'+licenseIRI+'" rel="schema:license" title="'+Config.License[licenseIRI].description+'">'+Config.License[licenseIRI].name+"</a></dd>";dl.insertAdjacentHTML("beforeend",dd)}}var documentStatus="document-status";var dLS=document.querySelector("#"+documentStatus+" option:checked");if(dLS){var statusIRI=dLS.value;var dl=dLS.closest("#"+documentStatus);dl.removeAttribute("contenteditable");if(statusIRI==""){dl.parentNode.removeChild(dl)}else{dl.removeAttribute("class");var dd=dLS.closest("dd");dd.parentNode.removeChild(dd);dd='<dd prefix="pso: http://purl.org/spar/pso/" rel="pso:holdsStatusInTime" resource="#'+util.generateAttributeId()+'"><span rel="pso:withStatus" resource="'+statusIRI+'" typeof="pso:PublicationStatus">'+Config.PublicationStatus[statusIRI].name+"</span></dd>";dl.insertAdjacentHTML("beforeend",dd);if(statusIRI=="http://purl.org/spar/pso/published"){setDate(document,{id:"document-published",property:"schema:datePublished",title:"Published",datetime:options.datetime})}}}}function getRDFaPrefixHTML(prefixes){return Object.keys(prefixes).map(function(i){return i+": "+prefixes[i]}).join(" ")}function setDocumentRelation(rootNode,data,options){rootNode=rootNode||document;if(!data||!options){return}var h=[];var dl=rootNode.querySelector("#"+options.id);var dd;data.forEach(function(d){var documentRelation="<dd>"+template.createRDFaHTML(d)+"</dd>";if(dl){if(Config.DocumentItems.indexOf(options.id)>-1){dd=dl.querySelector("dd");dl.removeChild(dd)}else{var relation=dl.querySelector('[rel="'+d.rel+'"][href="'+d.href+'"]');if(relation){dd=relation.closest("dd");if(dd){dl.removeChild(dd)}}}dl.insertAdjacentHTML("beforeend",documentRelation)}else{h.push(documentRelation)}});if(h.length>0){var html='<dl id="'+options.id+'"><dt>'+options.title+"</dt>"+h.join("")+"</dl>";rootNode=insertDocumentLevelHTML(rootNode,html,{id:options.id})}return rootNode}function showTimeMap(node,url){url=url||Config.OriginalResourceInfo["timemap"];if(!url){return}var elementId="memento-document";var displayMemento="";fetcher.getTriplesFromGraph(url).then(triples=>{if(!node){node=document.getElementById(elementId);if(!node){document.documentElement.appendChild(util.fragmentFromString('<aside id="'+elementId+'" class="do on"><h2>Memento</h2>'+Config.Button.Close+'<dl><dt>TimeMap</dt><dd><a href="'+url+'">'+url+"</a></dd></dl></aside>"));node=document.getElementById(elementId)}}var timemap=node.querySelector(".memento");if(timemap){node.removeChild(timemap)}triples=util.sortTriples(triples,{sortBy:"object"});var items=[];triples.forEach(function(t){var s=t.subject.nominalValue;var p=t.predicate.nominalValue;var o=t.object.nominalValue;if(p===Config.Vocab["memmementoDateTime"]){items.push('<li><a href="'+s+'" target="_blank">'+o+"</a></li>")}});var html='<dl class="memento"><dt>Memento</dt><dd><ul>'+items.join("")+"</ul></dd></dl>";node.insertAdjacentHTML("beforeend",html)}).catch(error=>{})}function setDocumentStatus(rootNode,options){rootNode=rootNode||document;options=options||{};var s=getDocumentStatusHTML(rootNode,options);rootNode=insertDocumentLevelHTML(rootNode,s,options);return rootNode}function getDocumentStatusHTML(rootNode,options){rootNode=rootNode||document;options=options||{};options["mode"]="mode"in options?options.mode:"";options["id"]="id"in options?options.id:"document-status";var subjectURI="subjectURI"in options?' about="'+options.subjectURI+'"':"";var typeLabel="",typeOf="";var definitionTitle;switch(options.type){default:definitionTitle="Document Status";break;case"mem:Memento":definitionTitle="Resource State";typeLabel="Memento";typeOf=' typeof="'+options.type+'"';break}var id=' id="'+options.id+'"';var c="class"in options&&options.class.length>0?' class="'+options.class+'"':"";var dd="<dd><span"+subjectURI+typeOf+">"+typeLabel+"</span></dd>";var s="";var dl=rootNode.querySelector("#"+options.id);switch(options.mode){case"create":default:s="<dl"+c+id+"><dt>"+definitionTitle+"</dt>"+dd+"</dl>";break;case"update":if(dl){var clone=dl.cloneNode(true);dl.parentNode.removeChild(dl);clone.insertAdjacentHTML("beforeend",dd);s=clone.outerHTML}else{s="<dl"+c+id+"><dt>"+definitionTitle+"</dt>"+dd+"</dl>"}break;case"delete":if(dl){var clone=dl.cloneNode(true);dl.parentNode.removeChild(dl);var t=clone.querySelector('[typeof="'+options.type+'"]');if(t){t.closest("dl").removeChild(t.parentNode)}var cloneDD=clone.querySelectorAll("#"+options.id+" dd");if(cloneDD.length>0){s=clone.outerHTML}}break}return s}function buttonRemoveAside(){var ids=document.querySelectorAll("aside.note article[id]");for(var i=0;i<ids.length;i++){if(!ids[i].querySelector("button.delete")){var buttonDelete='<button class="delete do" title="Delete item">'+template.Icon[".fas.fa-trash-alt"]+"</button>";ids[i].insertAdjacentHTML("afterbegin",buttonDelete)}}document.addEventListener("click",function(e){var button=e.target.closest("button.delete");if(button){var noteArticle=button.closest("article[id]");if(noteArticle){var refId="r-"+noteArticle.id;var aside=noteArticle.closest("aside.note");aside.parentNode.removeChild(aside);var span=document.querySelector('span[resource="#'+refId+'"]');span.outerHTML=span.querySelector("mark").textContent}}})}function buttonClose(){document.addEventListener("click",function(e){var button=e.target.closest("button.close");if(button){var parent=button.parentNode;parent.parentNode.removeChild(parent)}})}function getButtonDisabledHTML(id){var html="";if(document.location.protocol==="file:"||!Config.ResourceInfo.buttonStates[id]){html=' disabled="disabled"'}if(id=="export-as-html"&&Config.ResourceInfo.buttonStates[id]){html=""}return html}function getResourceInfo(data,options){data=data||getDocument();Config["ResourceInfo"]=Config["ResourceInfo"]||{};var documentURL=uri.stripFragmentFromString(document.location.href);var info={state:Config.Vocab["ldpRDFSource"]["@id"],profile:Config.Vocab["ldpRDFSource"]["@id"]};options=options||{};options["contentType"]="contentType"in options?options.contentType:"text/html";options["subjectURI"]="subjectURI"in options?options.subjectURI:documentURL;var getResourceData=function(data,options){return graph.getGraphFromData(data,options).then(function(i){var s=SimpleRDF(Config.Vocab,options["subjectURI"],i,ld.store).child(options["subjectURI"]);info["graph"]=s;info["rdftype"]=s.rdftype._array;info["profile"]=Config.Vocab["ldpRDFSource"]["@id"];s.rdftype.forEach(function(resource){if(resource==Config.Vocab["memMemento"]["@id"]){info["state"]=Config.Vocab["memMemento"]["@id"]}});if(s.reloriginal){info["state"]=Config.Vocab["memMemento"]["@id"];info["original"]=s.memoriginal;if(s.reloriginal==options["subjectURI"]){info["profile"]=Config.Vocab["memOriginalResource"]["@id"]}else{info["profile"]=Config.Vocab["memMemento"]["@id"]}}if(s.memmemento){info["profile"]=Config.Vocab["memOriginalResource"]["@id"];info["memento"]=s.memmemento}if(s.memoriginal&&s.memmemento&&s.memoriginal!=s.memmemento){info["profile"]=Config.Vocab["memMemento"]["@id"];info["original"]=s.memoriginal;info["memento"]=s.memmemento}if(s.rellatestversion){info["latest-version"]=s.rellatestversion}if(s.relpredecessorversion){info["predecessor-version"]=s.relpredecessorversion}if(s.memtimemap){info["timemap"]=s.memtimemap}if(s.memtimegate){info["timegate"]=s.memtimegate}if(!Config.OriginalResourceInfo||"mode"in options&&options.mode=="update"){Config["OriginalResourceInfo"]=info}if(s.odrlhasPolicy&&s.odrlhasPolicy.at(0)&&s.iri().toString()==documentURL){info["odrl"]=getResourceInfoODRLPolicies(s)}info["buttonStates"]=setFeatureStatesOfResourceInfo(info);if("headers"in Config["ResourceInfo"]){Config["ResourceInfo"]=Object.assign(info,Config["ResourceInfo"]["headers"])}else{Config["ResourceInfo"]=info}return info})};var promises=[];if("header"in options){promises.push(fetcher.getResourceHead(documentURL,options))}promises.push(getResourceData(data,options));return Promise.all(promises).then(function(resolvedPromises){var info={};resolvedPromises.forEach(function(promise){if("state"in promise){info=Object.assign(info,promise)}else if("headers"in promise&&"header"in options){var headers=promise.headers;info["headers"]=headers;Config["ResourceInfo"]["headers"]={};Config["ResourceInfo"]["headers"]["response"]=headers;var optionsHeader=promise.headers.get(options.header);if(optionsHeader){Config["ResourceInfo"]["headers"][options.header]={"field-value":optionsHeader};if(options.header.toLowerCase()=="wac-allow"){var permissionGroups=DO.C.ResourceInfo["headers"]["wac-allow"]["field-value"];var wacAllowRegex=new RegExp(/(\w+)\s*=\s*"?\s*((?:\s*[^",\s]+)*)\s*"?/,"ig");var wacAllowMatches=DO.U.matchAllIndex(permissionGroups,wacAllowRegex);Config["ResourceInfo"]["headers"]["wac-allow"]["permissionGroup"]={};wacAllowMatches.forEach(function(match){var modesString=match[2]||"";var accessModes=util.uniqueArray(modesString.toLowerCase().split(/\s+/));Config["ResourceInfo"]["headers"]["wac-allow"]["permissionGroup"][match[1]]=accessModes})}}}});return info})}function getResourceInfoODRLPolicies(s){var info={};info["odrl"]={};s.odrlhasPolicy.forEach(function(policyIRI){info["odrl"][policyIRI]={};var policyGraph=s.child(policyIRI);var policyTypes=policyGraph.rdftype;info["odrl"][policyIRI]["rdftype"]=policyTypes._array;policyTypes.forEach(function(pT){if(pT==DO.C.Vocab["odrlOffer"]["@id"]){var permissions=policyGraph.odrlpermission;permissions.forEach(function(permissionIRI){info["odrl"][policyIRI]["permission"]={};info["odrl"][policyIRI]["permission"][permissionIRI]={};var permissionGraph=s.child(permissionIRI);var permissionAssigner=permissionGraph.odrlassigner;info["odrl"][policyIRI]["permission"][permissionIRI]["action"]=info["odrl"]["permissionAssigner"]=permissionAssigner;var permissionActions=permissionGraph.odrlaction;info["odrl"][policyIRI]["permission"][permissionIRI]["action"]=info["odrl"]["permissionActions"]=permissionActions._array})}if(pT==DO.C.Vocab["odrlAgreement"]["@id"]){var prohibition=policyGraph.odrlprohibition;prohibition.forEach(function(prohibitionIRI){info["odrl"][policyIRI]["prohibition"]={};info["odrl"][policyIRI]["prohibition"][prohibitionIRI]={};var prohibitionGraph=s.child(prohibitionIRI);var prohibitionAssigner=prohibitionGraph.odrlassigner;info["odrl"][policyIRI]["prohibition"][prohibitionIRI]["action"]=info["odrl"]["prohibitionAssigner"]=prohibitionAssigner;var prohibitionAssignee=prohibitionGraph.odrlassignee;info["odrl"][policyIRI]["prohibition"][prohibitionIRI]["action"]=info["odrl"]["prohibitionAssignee"]=prohibitionAssignee;var prohibitionActions=prohibitionGraph.odrlaction;info["odrl"][policyIRI]["prohibition"][prohibitionIRI]["action"]=info["odrl"]["prohibitionActions"]=prohibitionActions._array})}})});return info["odrl"]}function setFeatureStatesOfResourceInfo(info){var buttonState={"create-immutable":true,"create-version":true,"export-as-html":true,"resource-print":true,"resource-save-as":true,"robustify-links":true,"snapshot-internet-archive":true};if(info["odrl"]&&info["odrl"]["prohibitionActions"]&&info["odrl"]["prohibitionAssignee"]==DO.C.User.IRI){if(info["odrl"]["prohibitionActions"].indexOf("http://www.w3.org/ns/odrl/2/archive")>-1){buttonState["snapshot-internet-archive"]=false}if(info["odrl"]["prohibitionActions"].indexOf("http://www.w3.org/ns/odrl/2/derive")>-1){buttonState["resource-save-as"]=false}if(info["odrl"]["prohibitionActions"].indexOf("http://www.w3.org/ns/odrl/2/print")>-1){buttonState["resource-print"]=false}if(info["odrl"]["prohibitionActions"].indexOf("http://www.w3.org/ns/odrl/2/reproduce")>-1){buttonState["create-immutable"]=false;buttonState["create-version"]=false;buttonState["export-as-html"]=false;buttonState["resource-save-as"]=false;buttonState["robustify-links"]=false;buttonState["snapshot-internet-archive"]=false}if(info["odrl"]["prohibitionActions"].indexOf("http://www.w3.org/ns/odrl/2/transform")>-1){buttonState["export-as-html"]=false}}return buttonState}function createImmutableResource(url,data,options){if(!url)return;var uuid=util.generateUUID();var containerIRI=url.substr(0,url.lastIndexOf("/")+1);var immutableURL=containerIRI+uuid;var rootNode=document.documentElement.cloneNode(true);var date=new Date;rootNode=setDate(rootNode,{id:"document-created",property:"schema:dateCreated",title:"Created",datetime:date});var resourceState=rootNode.querySelector("#"+"document-resource-state");if(!resourceState){var rSO={id:"document-resource-state",subjectURI:"",type:"mem:Memento",mode:"create"};rootNode=setDocumentStatus(rootNode,rSO)}var r,o;o={id:"document-identifier",title:"Identifier"};r={rel:"owl:sameAs",href:immutableURL};rootNode=setDocumentRelation(rootNode,[r],o);o={id:"document-original",title:"Original resource"};if(Config.OriginalResourceInfo["state"]==Config.Vocab["memMemento"]["@id"]&&Config.OriginalResourceInfo["profile"]==Config.Vocab["memOriginalResource"]["@id"]){r={rel:"mem:original",href:immutableURL}}else{r={rel:"mem:original",href:url}}rootNode=setDocumentRelation(rootNode,[r],o);var timeMapURL=Config.OriginalResourceInfo["timemap"]||url+".timemap";o={id:"document-timemap",title:"TimeMap"};r={rel:"mem:timemap",href:timeMapURL};rootNode=setDocumentRelation(rootNode,[r],o);data=getDocument(rootNode);fetcher.processSave(containerIRI,uuid,data,options);getResourceInfo(null,{mode:"update"});var timeMapURL=Config.OriginalResourceInfo["timemap"]||url+".timemap";if(Config.OriginalResourceInfo["state"]!=Config.Vocab["memMemento"]["@id"]){setDate(document,{id:"document-created",property:"schema:dateCreated",title:"Created",datetime:date});o={id:"document-identifier",title:"Identifier"};r={rel:"owl:sameAs",href:url};setDocumentRelation(document,[r],o);o={id:"document-latest-version",title:"Latest Version"};r={rel:"mem:memento rel:latest-version",href:immutableURL};setDocumentRelation(document,[r],o);if(Config.OriginalResourceInfo["latest-version"]){o={id:"document-predecessor-version",title:"Predecessor Version"};r={rel:"mem:memento rel:predecessor-version",href:Config.OriginalResourceInfo["latest-version"]};setDocumentRelation(document,[r],o)}o={id:"document-timemap",title:"TimeMap"};r={rel:"mem:timemap",href:timeMapURL};setDocumentRelation(document,[r],o);data=getDocument();fetcher.processSave(url,null,data,options)}var insertG="<"+url+"> <http://mementoweb.org/ns#memento> <"+immutableURL+"> .\n<"+immutableURL+'> <http://mementoweb.org/ns#mementoDateTime> "'+date.toISOString()+'"^^<http://www.w3.org/2001/XMLSchema#dateTime> .';var patch={insert:insertG};fetcher.updateTimeMap(timeMapURL,patch).then(()=>{showTimeMap(null,timeMapURL)})}function createMutableResource(url,data,options){if(!url)return;setDate(document,{id:"document-created",property:"schema:dateCreated",title:"Created"});var uuid=util.generateUUID();var containerIRI=url.substr(0,url.lastIndexOf("/")+1);var mutableURL=containerIRI+uuid;var r,o;o={id:"document-identifier",title:"Identifier"};r={rel:"owl:sameAs",href:mutableURL};setDocumentRelation(document,[r],o);o={id:"document-latest-version",title:"Latest Version"};r={rel:"rel:latest-version",href:mutableURL};setDocumentRelation(document,[r],o);if(Config.OriginalResourceInfo["latest-version"]){o={id:"document-predecessor-version",title:"Predecessor Version"};r={rel:"rel:predecessor-version",href:Config.OriginalResourceInfo["latest-version"]};setDocumentRelation(document,[r],o)}data=getDocument();fetcher.processSave(containerIRI,uuid,data,options);o={id:"document-identifier",title:"Identifier"};r={rel:"owl:sameAs",href:url};setDocumentRelation(document,[r],o);data=getDocument();fetcher.processSave(url,null,data,options).then(()=>{getResourceInfo(data,{mode:"update"})})}function updateMutableResource(url,data,options){if(!url)return;options=options||{};var rootNode=data?util.fragmentFromString(data).cloneNode(true):document;if(!("datetime"in options)){options["datetime"]=new Date}setDate(rootNode,{id:"document-modified",property:"schema:dateModified",title:"Modified",datetime:options.datetime});setEditSelections(options);data=getDocument();fetcher.processSave(url,null,data,options).then(()=>{getResourceInfo(data,{mode:"update"})})}function removeNodesWithIds(ids){if(typeof ids==="undefined"){return}ids=Array.isArray(ids)?ids:[ids];ids.forEach(function(id){var node=document.getElementById(id);if(node){node.parentNode.removeChild(node)}})}function removeReferences(){var refs=document.querySelectorAll('body *:not([id="references"]) cite + .ref:not(.do)');refs.forEach(r=>{r.parentNode.removeChild(r)})}function buildReferences(node,id,citation){if(!node){var nodeInsertLocation=selectArticleNode(document);var section='<section id="references"><h2>References</h2><div><ol></ol></div></section>';nodeInsertLocation.insertAdjacentHTML("beforeend",section)}updateReferences();node=document.querySelector("#references ol");if(citation){var citationItem='<li id="'+id+'">'+citation+"</li>";node.insertAdjacentHTML("beforeend",citationItem)}}function updateReferences(options){options=options||{};options["external"]=options.external||true;options["internal"]=options.internal||false;var references=document.querySelector("#references");var referencesOl=references.querySelector("ol");var citeA=document.querySelectorAll('body *:not([id="references"]) cite > a');var uniqueCitations={};var lis=[];var docURL=document.location.origin+document.location.pathname;var insertRef=function(cite,rId,refId,refLabel){var ref='<span class="ref"> <span class="ref-reference" id="'+rId+'">'+Config.RefType[Config.DocRefType].InlineOpen+'<a href="#'+refId+'">'+refLabel+"</a>"+Config.RefType[Config.DocRefType].InlineClose+"</span></span>";cite.insertAdjacentHTML("afterend",ref)};citeA.forEach(function(a){var ref,refId,refLabel,rId;var cite=a.parentNode;var jumpLink;if(options.external&&!a.href.startsWith(docURL+"#")||options.internal&&a.href.startsWith(docURL+"#")){refId=uniqueCitations[a.outerHTML];rId="r-"+util.generateAttributeId();if(refId){refLabel=refId;refId="ref-"+refId;jumpLink=document.querySelector("#"+refId+" .jumplink");if(jumpLink){var supAs=jumpLink.querySelectorAll("sup a");var newJumpLink=[];supAs.forEach((a,key)=>{newJumpLink.push(' <sup><a href="#'+uri.getFragmentFromString(a.href)+'">'+String.fromCharCode(key+97)+"</a></sup>")});newJumpLink.push(' <sup><a href="#'+rId+'">'+String.fromCharCode(supAs.length+97)+"</a></sup>");newJumpLink=util.fragmentFromString('<span class="jumplink"><sup>^</sup>'+newJumpLink.join(" ")+"</span>");jumpLink.parentNode.replaceChild(newJumpLink,jumpLink);insertRef(cite,rId,refId,refLabel)}}else{var length=Object.keys(uniqueCitations).length;uniqueCitations[a.outerHTML]=length+1;refLabel=length+1;refId="ref-"+(length+1);var rel=a.getAttribute("rel");var versionDate=a.getAttribute("data-versiondate")||"";var versionURL=a.getAttribute("data-versionurl")||"";var title=a.getAttribute("title");title=title?' title="'+title+'"':"";if(versionDate&&versionURL){versionDate=' data-versiondate="'+versionDate+'"';versionURL=' data-versionurl="'+versionURL+'"'}var anchor="<a "+versionDate+versionURL+' href="'+a.href+'"'+title+">"+a.href+"</a>";var jumpLink='<span class="jumplink"><sup><a href="#'+rId+'">^</a></sup></span>';var li='<li id="'+refId+'">'+jumpLink+" <cite>"+a.textContent+"</cite>, <cite>"+anchor+"</cite></li>";referencesOl.insertAdjacentHTML("beforeend",li);insertRef(cite,rId,refId,refLabel)}}})}function showRobustLinksDecoration(node){node=node||document;var nodes=node.querySelectorAll("[data-versionurl], [data-originalurl]");nodes.forEach(function(i){if(i.nextElementSibling&&i.nextElementSibling.classList.contains("do")&&i.nextElementSibling.classList.contains("robustlinks")){return}var href=i.getAttribute("href");var originalurl=i.getAttribute("data-originalurl");originalurl=originalurl?originalurl.trim():undefined;originalurl=originalurl?'<span>Original</span><span><a href="'+originalurl+'" target="_blank">'+originalurl+"</a></span>":"";var versionurl=i.getAttribute("data-versionurl");versionurl=versionurl?versionurl.trim():undefined;var versiondate=i.getAttribute("data-versiondate");var nearlinkdateurl="";if(versiondate){versiondate=versiondate.trim();nearlinkdateurl="http://timetravel.mementoweb.org/memento/"+versiondate.replace(/\D/g,"")+"/"+href;nearlinkdateurl='<span>Near Link Date</span><span><a href="'+nearlinkdateurl+'" target="_blank">'+versiondate+"</a></span>"}else if(versionurl){versiondate=versionurl}versionurl=versionurl?'<span>Version</span><span><a href="'+versionurl+'" target="_blank">'+versiondate+"</a></span>":"";var citation="";var citationLabels=[];var iri;var citationType;var rel=i.getAttribute("rel");if(rel){citationLabels=getCitationLabelsFromTerms(rel);if(citationLabels.length>0){var citationType=citationLabels.join(", ");citation="<span>Citation Reason</span><span>"+citationType+"</span>"}}i.insertAdjacentHTML("afterend",'<span class="do robustlinks"><button title="Show Robust Links">🔗</button><span>'+citation+originalurl+versionurl+nearlinkdateurl+"</span></span>")});document.querySelectorAll(".do.robustlinks").forEach(function(i){i.addEventListener("click",function(e){if(e.target.closest("button")){var pN=e.target.parentNode;if(pN.classList.contains("on")){pN.classList.remove("on")}else{pN.classList.add("on")}}})})}function getCitationLabelsFromTerms(rel,citations){citations=citations||Object.keys(Config.Citation);var citationLabels=[];rel.split(" ").forEach(term=>{if(Config.Citation[term]){citationLabels.push(Config.Citation[term])}else{var s=term.split(":");if(s.length==2){citations.forEach(c=>{if(s[1]==uri.getFragmentFromString(c)||s[1]==uri.getURLLastPath(c)){citationLabels.push(Config.Citation[c])}})}}});return citationLabels}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Config=__webpack_require__(112);module.exports={encodeString:encodeString,decodeString:decodeString,getAbsoluteIRI:getAbsoluteIRI,getProxyableIRI:getProxyableIRI,getProxyURL:getProxyURL,stripFragmentFromString:stripFragmentFromString,getFragmentFromString:getFragmentFromString,getBaseURL:getBaseURL,getPathURL:getPathURL,getURLLastPath:getURLLastPath,getParentURLPath:getParentURLPath,forceTrailingSlash:forceTrailingSlash};function encodeString(string){return encodeURIComponent(string).replace(/'/g,"%27").replace(/"/g,"%22")}function decodeString(string){return decodeURIComponent(string.replace(/\+/g," "))}function getAbsoluteIRI(base,location){var iri=location;if(location.toLowerCase().slice(0,4)!=="http"){if(location.startsWith("/")){var x=base.toLowerCase().trim().split("/");iri=x[0]+"//"+x[2]+location}else if(!base.endsWith("/")){iri=base.substr(0,base.lastIndexOf("/")+1)+location}else{iri=base+location}}return iri}function getProxyableIRI(url,options={}){var pIRI=stripFragmentFromString(url);if(typeof document!=="undefined"&&document.location.protocol==="https:"&&pIRI.slice(0,5).toLowerCase()==="http:"||"forceProxy"in options){var proxyURL=getProxyURL(options);pIRI=proxyURL+encodeString(pIRI)}return pIRI}function getProxyURL(options){return typeof options!=="undefined"&&"proxyURL"in options?options.proxyURL:Config.User.ProxyURL?Config.User.ProxyURL:Config.ProxyURL}function stripFragmentFromString(string){if(typeof string==="string"){let stringIndexFragment=string.indexOf("#");if(stringIndexFragment>=0){string=string.substring(0,stringIndexFragment)}}return string}function getFragmentFromString(string){if(typeof string==="string"){let match=string.split("#")[1];string=match?match:""}return string}function getBaseURL(url){if(typeof url==="string"){url=url.substr(0,url.lastIndexOf("/")+1)}return url}function getPathURL(url){if(typeof url==="string"){var i=url.indexOf("?");if(i>-1){url=url.substr(0,i)}i=url.indexOf("#");if(i>-1){url=url.substr(0,i)}}return url}function getURLLastPath(url){if(typeof url==="string"){url=getPathURL(url);url=url.substr(url.lastIndexOf("/")+1)}return url}function getParentURLPath(url){if(typeof url==="string"){var u=new URL(url);var pathname=u.pathname;if(pathname=="/"){return undefined}else{var p=pathname.split("/");p.splice(-2);var parentPath=forceTrailingSlash(p.join("/"));url=u.origin+parentPath}}return url}function forceTrailingSlash(string){if(string.slice(-1)=="/")return string;return string+"/"}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const ld=__webpack_require__(2);const SimpleRDF=ld.SimpleRDF;const Config=__webpack_require__(112);const doc=__webpack_require__(115);const uri=__webpack_require__(116);module.exports={getGraph:getGraph,getGraphFromData:getGraphFromData,getMatchFromData:getMatchFromData,serializeData:serializeData,serializeGraph:serializeGraph,applyParserSerializerFixes:applyParserSerializerFixes,setDocumentBase:setDocumentBase};function getGraph(url){return SimpleRDF(Config.Vocab,url,null,ld.store).get()}function getGraphFromData(data,options={}){if(!("contentType"in options)){options["contentType"]="text/turtle"}options.contentType=options.contentType=="text/plain"?"text/html":options.contentType;if(!("subjectURI"in options)){options["subjectURI"]="http://localhost/d79351f4-cdb8-4228-b24f-3e9ac74a840d"}if(options.contentType=="text/html"||options.contentType=="application/xhtml+xml"||options.contentType=="text/turtle"||options.contentType=="application/ld+json"){data=setDocumentBase(data,options.subjectURI,options.contentType)}return SimpleRDF.parse(data,options["contentType"],options["subjectURI"])}function getMatchFromData(data,spo={},options={}){if(!data){return Promise.resolve({})}spo["subject"]=spo.subject||window.location.origin+window.location.pathname;spo["predicate"]=spo.predicate||Config.Vocab["rdfslabel"];options["contentType"]=options.contentType||"text/html";options["subjectURI"]=options.subjectURI||spo.subject;return getGraphFromData(data,options).then(g=>{let s=SimpleRDF(Config.Vocab,spo.subject,g,ld.store).child(spo.subject);return s[spo.predicate]}).catch(()=>{return undefined})}function serializeData(data,fromContentType,toContentType,options){if(fromContentType===toContentType){return Promise.resolve(data)}options.contentType=fromContentType;return getGraphFromData(data,options).then(g=>{options.contentType=toContentType;switch(toContentType){case"application/ld+json":return serializeGraph(g,options).then(subjectTriples=>{subjectTriples=JSON.parse(subjectTriples);var data={};if(options["@context"]){data["@context"]=options["@context"]}var subjectsChecked=[];var subjectsList=[];var rootIndex=0;for(var i=0;i<subjectTriples.length;i++){subjectsList.push(subjectTriples[i]["@id"]);if("@id"in subjectTriples[i]&&subjectTriples[i]["@id"]==options.subjectURI){Object.assign(data,subjectTriples[i]);subjectsChecked.push(options.subjectURI);rootIndex=i}}var processObject=function(subject){var properties=Object.keys(subject);properties.forEach(property=>{if(typeof subject[property]==="object"){if("@id"in subject[property]&&subjectsChecked.indexOf(subject[property]["@id"])<0&&subjectsList.indexOf(subject[property]["@id"])>-1){subjectTriples.forEach(o=>{if(o["@id"]==subject[property]["@id"]){subject[property]=o;subjectsChecked.push(subject[property]["@id"])}})}return Object.assign({},processObject(subject[property]))}});return subject};var subject=subjectTriples[rootIndex];Object.assign(data,processObject(subject));return JSON.stringify(data)+"\n"});default:return serializeGraph(g,options)}}).then(data=>{switch(toContentType){default:break;case"application/ld+json":if(options["@context"]){var context=typeof options["@context"]==="string"?[options["@context"]]:options["@context"];data=JSON.parse(data);delete data["@context"];data=JSON.stringify(data);data=data.replace(new RegExp('"@id"',"g"),'"id"');data=data.replace(new RegExp('"@type"',"g"),'"type"');context.forEach(function(c){var search="";var replace="";if(typeof c==="string"){switch(c){case"http://www.w3.org/ns/anno.jsonld":data=data.replace(new RegExp("http://www.w3.org/ns/oa#autoDirection","g"),"auto");data=data.replace(new RegExp("http://www.w3.org/ns/oa#cachedSource","g"),"cached");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasBody","g"),"body");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasEndSelector","g"),"endSelector");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasPurpose","g"),"purpose");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasScope","g"),"scope");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasSelector","g"),"selector");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasSource","g"),"source");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasStartSelector","g"),"startSelector");data=data.replace(new RegExp("http://www.w3.org/ns/oa#hasTarget","g"),"target");data=data.replace(new RegExp("http://www.w3.org/ns/oa#ltrDirection","g"),"ltr");data=data.replace(new RegExp("http://www.w3.org/ns/oa#motivatedBy","g"),"motivation");data=data.replace(new RegExp("http://www.w3.org/ns/oa#rtlDirection","g"),"rtl");data=data.replace(new RegExp("http://www.w3.org/ns/oa#styledBy","g"),"stylesheet");data=data.replace(new RegExp('"oa:',"g"),'"');search="http://www.w3.org/ns/oa#";break;case"https://www.w3.org/ns/activitystreams":data=data.replace(new RegExp('"as:',"g"),'"');search="https://www.w3.org/ns/activitystreams#";break;case"http://schema.org/":data=data.replace(new RegExp('"schema:',"g"),'"');search="http:/schema.org/";break}}else{replace=Object.keys(c)[0];switch(replace){case"oa":search="http://www.w3.org/ns/oa#";break;case"as":search="https://www.w3.org/ns/activitystreams#";break;case"schema":search="http://schema.org/";break}replace=replace+":"}data=data.replace(new RegExp(search,"g"),replace)});data=JSON.parse(data);data=Object.assign({"@context":options["@context"]},data);data=JSON.stringify(data)}break}return data})}function serializeGraph(g,options={}){if(!("contentType"in options)){options["contentType"]="text/turtle"}return ld.store.serializers[options.contentType].serialize(g._graph).then(data=>{data=applyParserSerializerFixes(data,options.contentType);return data})}function applyParserSerializerFixes(data,contentType){data=data.replace(/http:\/\/localhost\/d79351f4-cdb8-4228-b24f-3e9ac74a840d/g,"");switch(contentType){case"text/turtle":data=data.replace(/Z"@en;/,'Z"^^<http://www.w3.org/2001/XMLSchema#dateTime>;');data=data.replace(/start> "(\d+)"@en;/,'start> "$1"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger>;');data=data.replace(/end> "(\d+)"@en;/,'end> "$1"^^<http://www.w3.org/2001/XMLSchema#nonNegativeInteger>;');data=data.replace(/\%2523/,"%23");break;case"application/ld+json":var x=JSON.parse(data);var properties=["https://www.w3.org/ns/activitystreams#published","https://www.w3.org/ns/activitystreams#updated","http://schema.org/dateCreated","http://schema.org/datePublished","http://schema.org/dateModified","http://www.w3.org/ns/oa#start","http://www.w3.org/ns/oa#end"];for(var i=0;i<x.length;i++){for(var j=0;j<properties.length;j++){if(properties[j]in x[i]){if(properties[j]=="http://www.w3.org/ns/oa#start"||properties[j]=="http://www.w3.org/ns/oa#end"){x[i][properties[j]]={"@type":"http://www.w3.org/2001/XMLSchema#nonNegativeInteger","@value":x[i][properties[j]]["@value"]}}else{x[i][properties[j]]={"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":x[i][properties[j]]["@value"]}}}}}data=JSON.stringify(x);break}return data}function setDocumentBase(data,baseURI,contentType){baseURI=uri.stripFragmentFromString(baseURI);switch(contentType){case"text/html":case"application/xhtml+xml":let template=document.implementation.createHTMLDocument();template.documentElement.innerHTML=data;let base=template.querySelector("head base[href]");if(!base){template.querySelector("head").insertAdjacentHTML("afterbegin",'<base href="'+baseURI+'" />');data=template.documentElement.outerHTML}break;case"text/turtle":data=`@base <`+baseURI+`> .\n`+data;break;case"application/json":case"application/ld+json":data=JSON.parse(data);data["@context"]=data["@context"]?data["@context"]:{"@base":baseURI};if(Array.isArray(data["@context"])){var found=false;data["@context"].forEach(function(a){if(typeof a==="object"&&"@base"in a){found=true}});if(!found){data["@context"].push({"@base":baseURI})}}else if(typeof data["@context"]==="object"&&!("@base"in data["@context"])){data["@context"]["@base"]=baseURI}data=JSON.stringify(data);break;default:break}return data}},module=>{"use strict";module.exports=window["fetch"]},module=>{"use strict";module.exports=window["solid"]["auth"]},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const util=__webpack_require__(114);const doc=__webpack_require__(115);const uri=__webpack_require__(116);const graph=__webpack_require__(117);const fetcher=__webpack_require__(1);const Config=__webpack_require__(112);module.exports={sendNotifications:sendNotifications,inboxResponse:inboxResponse,notifyInbox:notifyInbox};function sendNotifications(tos,note,iri,shareResource){return new Promise((resolve,reject)=>{var notificationData={type:["as:Announce"],object:iri,summary:note,license:"https://creativecommons.org/licenses/by/4.0/"};let data=doc.getDocument();let options={contentType:"text/html",subjectURI:iri};var spo={subject:iri,predicate:Config.Vocab["rdftype"]["@id"]};graph.getMatchFromData(data,spo,options).then(supplementalData=>{if(typeof supplementalData!=="undefined"&&supplementalData._array.length>0){notificationData["objectTypes"]=supplementalData._array}let spo={subject:iri,predicate:Config.Vocab["schemalicense"]["@id"]};return graph.getMatchFromData(data,spo,options).then(data=>{if(typeof data!=="undefined"&&data.length>0){notificationData["objectLicense"]=data}})}).then(()=>{tos.forEach(to=>{notificationData["to"]=to;var toInput=shareResource.querySelector('[value="'+to+'"]')||shareResource.querySelector("#share-resource-to");toInput.parentNode.insertAdjacentHTML("beforeend",'<span class="progress" data-to="'+to+'"><svg class="fas fa-circle-notch fa-spin fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"/></svg></span>');inboxResponse(to,toInput).then(inboxURL=>{notificationData["inbox"]=inboxURL;notifyInbox(notificationData).then(response=>{var location=response.headers.get("Location");if(location){location=uri.getAbsoluteIRI(inboxURL,location);toInput.parentNode.querySelector('.progress[data-to="'+to+'"]').innerHTML='<a target="_blank" href="'+location+'"><svg class="fas fa-check-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg></a>'}}).catch(error=>{toInput.parentNode.querySelector('.progress[data-to="'+to+'"]').innerHTML='<svg class="fas fa-times-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg> Unable to notify. Try later.'})})})})})}function inboxResponse(to,toInput){return fetcher.getLinkRelation(Config.Vocab["ldpinbox"]["@id"],to).then(inboxes=>inboxes[0]).catch(error=>{toInput.parentNode.querySelector('.progress[data-to="'+to+'"]').innerHTML='<svg class="fas fa-times-circle fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg> Inbox not responding. Try later.'})}function notifyInbox(o){var slug,inboxURL;if("slug"in o){slug=o.slug}if("inbox"in o){inboxURL=o.inbox}if(!inboxURL){return Promise.reject(new Error("No inbox to send notification to"))}var title="";var data=doc.createActivityHTML(o);data=doc.createHTML(title,data,{prefixes:Config.Prefixes});var options={contentType:"text/html",profile:"https://www.w3.org/ns/activitystreams"};var pIRI=uri.getProxyableIRI(inboxURL);return fetcher.postActivity(pIRI,slug,data,options)}},function(module,exports,__webpack_require__){var process=__webpack_require__(11);var __WEBPACK_AMD_DEFINE_RESULT__;if(!("classList"in document.createElement("_"))){(function(view){"use strict";if(!("Element"in view))return;var classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"")},arrIndexOf=Array[protoProp].indexOf||function(item){var i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i}}return-1},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character")}return arrIndexOf.call(classList,token)},ClassList=function(elem){var trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i])}this._updateClassName=function(){elem.setAttribute("class",this.toString())}},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this)};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1};classListProto.add=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=false;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=true}}while(++i<l);if(updated){this._updateClassName()}};classListProto.remove=function(){var tokens=arguments,i=0,l=tokens.length,token,updated=false,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=true;index=checkTokenAndGetIndex(this,token)}}while(++i<l);if(updated){this._updateClassName()}};classListProto.toggle=function(token,force){token+="";var result=this.contains(token),method=result?force!==true&&"remove":force!==false&&"add";if(method){this[method](token)}if(force===true||force===false){return force}else{return!result}};classListProto.toString=function(){return this.join(" ")};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:true,configurable:true};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}catch(ex){if(ex.number===-2146823252){classListPropDesc.enumerable=false;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc)}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter)}})(self)}(function(view){"use strict";view.URL=view.URL||view.webkitURL;if(view.Blob&&view.URL){try{new Blob;return}catch(e){}}var BlobBuilder=view.BlobBuilder||view.WebKitBlobBuilder||view.MozBlobBuilder||function(view){var get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]},FakeBlobBuilder=function BlobBuilder(){this.data=[]},FakeBlob=function Blob(data,type,encoding){this.data=data;this.size=data.length;this.type=type;this.encoding=encoding},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type]},file_ex_codes=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR "+"NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;FakeBlob.fake=FB_proto.fake=true;while(file_ex_code--){FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1}if(!real_URL.createObjectURL){URL=view.URL=function(uri){var uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a"),uri_origin;uri_info.href=uri;if(!("origin"in uri_info)){if(uri_info.protocol.toLowerCase()==="data:"){uri_info.origin=null}else{uri_origin=uri.match(origin);uri_info.origin=uri_origin&&uri_origin[1]}}return uri_info}}URL.createObjectURL=function(blob){var type=blob.type,data_URI_header;if(type===null){type="application/octet-stream"}if(blob instanceof FakeBlob){data_URI_header="data:"+type;if(blob.encoding==="base64"){return data_URI_header+";base64,"+blob.data}else if(blob.encoding==="URI"){return data_URI_header+","+decodeURIComponent(blob.data)}if(btoa){return data_URI_header+";base64,"+btoa(blob.data)}else{return data_URI_header+","+encodeURIComponent(blob.data)}}else if(real_create_object_URL){return real_create_object_URL.call(real_URL,blob)}};URL.revokeObjectURL=function(object_URL){if(object_URL.substring(0,5)!=="data:"&&real_revoke_object_URL){real_revoke_object_URL.call(real_URL,object_URL)}};FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){var str="",buf=new Uint8Array(data),i=0,buf_len=buf.length;for(;i<buf_len;i++){str+=String.fromCharCode(buf[i])}bb.push(str)}else if(get_class(data)==="Blob"||get_class(data)==="File"){if(FileReaderSync){var fr=new FileReaderSync;bb.push(fr.readAsBinaryString(data))}else{throw new FileException("NOT_READABLE_ERR")}}else if(data instanceof FakeBlob){if(data.encoding==="base64"&&atob){bb.push(atob(data.data))}else if(data.encoding==="URI"){bb.push(decodeURIComponent(data.data))}else if(data.encoding==="raw"){bb.push(data.data)}}else{if(typeof data!=="string"){data+=""}bb.push(unescape(encodeURIComponent(data)))}};FBB_proto.getBlob=function(type){if(!arguments.length){type=null}return new FakeBlob(this.data.join(""),type,"raw")};FBB_proto.toString=function(){return"[object BlobBuilder]"};FB_proto.slice=function(start,end,type){var args=arguments.length;if(args<3){type=null}return new FakeBlob(this.data.slice(start,args>1?end:this.data.length),type,this.encoding)};FB_proto.toString=function(){return"[object Blob]"};FB_proto.close=function(){this.size=0;delete this.data};return FakeBlobBuilder}(view);view.Blob=function(blobParts,options){var type=options?options.type||"":"";var builder=new BlobBuilder;if(blobParts){for(var i=0,len=blobParts.length;i<len;i++){if(Uint8Array&&blobParts[i]instanceof Uint8Array){builder.append(blobParts[i].buffer)}else{builder.append(blobParts[i])}}}var blob=builder.getBlob(type);if(!blob.slice&&blob.webkitSlice){blob.slice=blob.webkitSlice}return blob};var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__};view.Blob.prototype=getPrototypeOf(new view.Blob)})(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content||this);(function(root,factory){"use strict";var isElectron=true&&typeof process!=="undefined"&&process&&process.versions&&process.versions.electron;if(!isElectron&&"object"==="object"){module.exports=factory}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this,function(){"use strict";function MediumEditor(elements,options){"use strict";return this.init(elements,options)}MediumEditor.extensions={};(function(window){"use strict";function copyInto(overwrite,dest){var prop,sources=Array.prototype.slice.call(arguments,2);dest=dest||{};for(var i=0;i<sources.length;i++){var source=sources[i];if(source){for(prop in source){if(source.hasOwnProperty(prop)&&typeof source[prop]!=="undefined"&&(overwrite||dest.hasOwnProperty(prop)===false)){dest[prop]=source[prop]}}}}return dest}var nodeContainsWorksWithTextNodes=false;try{var testParent=document.createElement("div"),testText=document.createTextNode(" ");testParent.appendChild(testText);nodeContainsWorksWithTextNodes=testParent.contains(testText)}catch(exc){}var Util={isIE:navigator.appName==="Microsoft Internet Explorer"||navigator.appName==="Netscape"&&new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent)!==null,isEdge:/Edge\/\d+/.exec(navigator.userAgent)!==null,isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:window.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(event){if(Util.isMac&&event.metaKey||!Util.isMac&&event.ctrlKey){return true}return false},isKey:function(event,keys){var keyCode=Util.getKeyCode(event);if(false===Array.isArray(keys)){return keyCode===keys}if(-1===keys.indexOf(keyCode)){return false}return true},getKeyCode:function(event){var keyCode=event.which;if(null===keyCode){keyCode=event.charCode!==null?event.charCode:event.keyCode}return keyCode},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function extend(){var args=[true].concat(Array.prototype.slice.call(arguments));return copyInto.apply(this,args)},defaults:function defaults(){var args=[false].concat(Array.prototype.slice.call(arguments));return copyInto.apply(this,args)},createLink:function(document,textNodes,href,target){var anchor=document.createElement("a");Util.moveTextRangeIntoElement(textNodes[0],textNodes[textNodes.length-1],anchor);anchor.setAttribute("href",href);if(target){if(target==="_blank"){anchor.setAttribute("rel","noopener noreferrer")}anchor.setAttribute("target",target)}return anchor},findOrCreateMatchingTextNodes:function(document,element,match){var treeWalker=document.createTreeWalker(element,NodeFilter.SHOW_ALL,null,false),matchedNodes=[],currentTextIndex=0,startReached=false,currentNode=null,newNode=null;while((currentNode=treeWalker.nextNode())!==null){if(currentNode.nodeType>3){continue}else if(currentNode.nodeType===3){if(!startReached&&match.start<currentTextIndex+currentNode.nodeValue.length){startReached=true;newNode=Util.splitStartNodeIfNeeded(currentNode,match.start,currentTextIndex)}if(startReached){Util.splitEndNodeIfNeeded(currentNode,newNode,match.end,currentTextIndex)}if(startReached&&currentTextIndex===match.end){break}else if(startReached&&currentTextIndex>match.end+1){throw new Error("PerformLinking overshot the target!")}if(startReached){matchedNodes.push(newNode||currentNode)}currentTextIndex+=currentNode.nodeValue.length;if(newNode!==null){currentTextIndex+=newNode.nodeValue.length;treeWalker.nextNode()}newNode=null}else if(currentNode.tagName.toLowerCase()==="img"){if(!startReached&&match.start<=currentTextIndex){startReached=true}if(startReached){matchedNodes.push(currentNode)}}}return matchedNodes},splitStartNodeIfNeeded:function(currentNode,matchStartIndex,currentTextIndex){if(matchStartIndex!==currentTextIndex){return currentNode.splitText(matchStartIndex-currentTextIndex)}return null},splitEndNodeIfNeeded:function(currentNode,newNode,matchEndIndex,currentTextIndex){var textIndexOfEndOfFarthestNode,endSplitPoint;textIndexOfEndOfFarthestNode=currentTextIndex+currentNode.nodeValue.length+(newNode?newNode.nodeValue.length:0)-1;endSplitPoint=matchEndIndex-currentTextIndex-(newNode?currentNode.nodeValue.length:0);if(textIndexOfEndOfFarthestNode>=matchEndIndex&&currentTextIndex!==textIndexOfEndOfFarthestNode&&endSplitPoint!==0){(newNode||currentNode).splitText(endSplitPoint)}},splitByBlockElements:function(element){if(element.nodeType!==3&&element.nodeType!==1){return[]}var toRet=[],blockElementQuery=MediumEditor.util.blockContainerElementNames.join(",");if(element.nodeType===3||element.querySelectorAll(blockElementQuery).length===0){return[element]}for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];if(child.nodeType===3){toRet.push(child)}else if(child.nodeType===1){var blockElements=child.querySelectorAll(blockElementQuery);if(blockElements.length===0){toRet.push(child)}else{toRet=toRet.concat(MediumEditor.util.splitByBlockElements(child))}}}return toRet},findAdjacentTextNodeWithContent:function findAdjacentTextNodeWithContent(rootNode,targetNode,ownerDocument){var pastTarget=false,nextNode,nodeIterator=ownerDocument.createNodeIterator(rootNode,NodeFilter.SHOW_TEXT,null,false);nextNode=nodeIterator.nextNode();while(nextNode){if(nextNode===targetNode){pastTarget=true}else if(pastTarget){if(nextNode.nodeType===3&&nextNode.nodeValue&&nextNode.nodeValue.trim().length>0){break}}nextNode=nodeIterator.nextNode()}return nextNode},findPreviousSibling:function(node){if(!node||Util.isMediumEditorElement(node)){return false}var previousSibling=node.previousSibling;while(!previousSibling&&!Util.isMediumEditorElement(node.parentNode)){node=node.parentNode;previousSibling=node.previousSibling}return previousSibling},isDescendant:function isDescendant(parent,child,checkEquality){if(!parent||!child){return false}if(parent===child){return!!checkEquality}if(parent.nodeType!==1){return false}if(nodeContainsWorksWithTextNodes||child.nodeType!==3){return parent.contains(child)}var node=child.parentNode;while(node!==null){if(node===parent){return true}node=node.parentNode}return false},isElement:function isElement(obj){return!!(obj&&obj.nodeType===1)},throttle:function(func,wait){var THROTTLE_INTERVAL=50,context,args,result,timeout=null,previous=0,later=function(){previous=Date.now();timeout=null;result=func.apply(context,args);if(!timeout){context=args=null}};if(!wait&&wait!==0){wait=THROTTLE_INTERVAL}return function(){var now=Date.now(),remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null}previous=now;result=func.apply(context,args);if(!timeout){context=args=null}}else if(!timeout){timeout=setTimeout(later,remaining)}return result}},traverseUp:function(current,testElementFunction){if(!current){return false}do{if(current.nodeType===1){if(testElementFunction(current)){return current}if(Util.isMediumEditorElement(current)){return false}}current=current.parentNode}while(current);return false},htmlEntities:function(str){return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(doc,html){var selection,range,el,fragment,node,lastNode,toReplace,res=false,ecArgs=["insertHTML",false,html];if(!MediumEditor.util.isEdge&&doc.queryCommandSupported("insertHTML")){try{return doc.execCommand.apply(doc,ecArgs)}catch(ignore){}}selection=doc.getSelection();if(selection.rangeCount){range=selection.getRangeAt(0);toReplace=range.commonAncestorContainer;if(Util.isMediumEditorElement(toReplace)&&!toReplace.firstChild){range.selectNode(toReplace.appendChild(doc.createTextNode("")))}else if(toReplace.nodeType===3&&range.startOffset===0&&range.endOffset===toReplace.nodeValue.length||toReplace.nodeType!==3&&toReplace.innerHTML===range.toString()){while(!Util.isMediumEditorElement(toReplace)&&toReplace.parentNode&&toReplace.parentNode.childNodes.length===1&&!Util.isMediumEditorElement(toReplace.parentNode)){toReplace=toReplace.parentNode}range.selectNode(toReplace)}range.deleteContents();el=doc.createElement("div");el.innerHTML=html;fragment=doc.createDocumentFragment();while(el.firstChild){node=el.firstChild;lastNode=fragment.appendChild(node)}range.insertNode(fragment);if(lastNode){range=range.cloneRange();range.setStartAfter(lastNode);range.collapse(true);MediumEditor.selection.selectRange(doc,range)}res=true}if(doc.execCommand.callListeners){doc.execCommand.callListeners(ecArgs,res)}return res},execFormatBlock:function(doc,tagName){var blockContainer=Util.getTopBlockContainer(MediumEditor.selection.getSelectionStart(doc)),childNodes;if(tagName==="blockquote"){if(blockContainer){childNodes=Array.prototype.slice.call(blockContainer.childNodes);if(childNodes.some(function(childNode){return Util.isBlockContainer(childNode)})){return doc.execCommand("outdent",false,null)}}if(Util.isIE){return doc.execCommand("indent",false,tagName)}}if(blockContainer&&tagName===blockContainer.nodeName.toLowerCase()){tagName="p"}if(Util.isIE){tagName="<"+tagName+">"}if(blockContainer&&blockContainer.nodeName.toLowerCase()==="blockquote"){if(Util.isIE&&tagName==="<p>"){return doc.execCommand("outdent",false,tagName)}if((Util.isFF||Util.isEdge)&&tagName==="p"){childNodes=Array.prototype.slice.call(blockContainer.childNodes);if(childNodes.some(function(childNode){return!Util.isBlockContainer(childNode)})){doc.execCommand("formatBlock",false,tagName)}return doc.execCommand("outdent",false,tagName)}}return doc.execCommand("formatBlock",false,tagName)},setTargetBlank:function(el,anchorUrl){var i,url=anchorUrl||false;if(el.nodeName.toLowerCase()==="a"){el.target="_blank";el.rel="noopener noreferrer"}else{el=el.getElementsByTagName("a");for(i=0;i<el.length;i+=1){if(false===url||url===el[i].attributes.href.value){el[i].target="_blank";el[i].rel="noopener noreferrer"}}}},removeTargetBlank:function(el,anchorUrl){var i;if(el.nodeName.toLowerCase()==="a"){el.removeAttribute("target");el.removeAttribute("rel")}else{el=el.getElementsByTagName("a");for(i=0;i<el.length;i+=1){if(anchorUrl===el[i].attributes.href.value){el[i].removeAttribute("target");el[i].removeAttribute("rel")}}}},addClassToAnchors:function(el,buttonClass){var classes=buttonClass.split(" "),i,j;if(el.nodeName.toLowerCase()==="a"){for(j=0;j<classes.length;j+=1){el.classList.add(classes[j])}}else{var aChildren=el.getElementsByTagName("a");if(aChildren.length===0){var parentAnchor=Util.getClosestTag(el,"a");el=parentAnchor?[parentAnchor]:[]}else{el=aChildren}for(i=0;i<el.length;i+=1){for(j=0;j<classes.length;j+=1){el[i].classList.add(classes[j])}}}},isListItem:function(node){if(!node){return false}if(node.nodeName.toLowerCase()==="li"){return true}var parentNode=node.parentNode,tagName=parentNode.nodeName.toLowerCase();while(tagName==="li"||!Util.isBlockContainer(parentNode)&&tagName!=="div"){if(tagName==="li"){return true}parentNode=parentNode.parentNode;if(parentNode){tagName=parentNode.nodeName.toLowerCase()}else{return false}}return false},cleanListDOM:function(ownerDocument,element){if(element.nodeName.toLowerCase()!=="li"){return}var list=element.parentElement;if(list.parentElement.nodeName.toLowerCase()==="p"){Util.unwrap(list.parentElement,ownerDocument);MediumEditor.selection.moveCursor(ownerDocument,element.firstChild,element.firstChild.textContent.length)}},splitOffDOMTree:function(rootNode,leafNode,splitLeft){var splitOnNode=leafNode,createdNode=null,splitRight=!splitLeft;while(splitOnNode!==rootNode){var currParent=splitOnNode.parentNode,newParent=currParent.cloneNode(false),targetNode=splitRight?splitOnNode:currParent.firstChild,appendLast;if(createdNode){if(splitRight){newParent.appendChild(createdNode)}else{appendLast=createdNode}}createdNode=newParent;while(targetNode){var sibling=targetNode.nextSibling;if(targetNode===splitOnNode){if(!targetNode.hasChildNodes()){targetNode.parentNode.removeChild(targetNode)}else{targetNode=targetNode.cloneNode(false)}if(targetNode.textContent){createdNode.appendChild(targetNode)}targetNode=splitRight?sibling:null}else{targetNode.parentNode.removeChild(targetNode);if(targetNode.hasChildNodes()||targetNode.textContent){createdNode.appendChild(targetNode)}targetNode=sibling}}if(appendLast){createdNode.appendChild(appendLast)}splitOnNode=currParent}return createdNode},moveTextRangeIntoElement:function(startNode,endNode,newElement){if(!startNode||!endNode){return false}var rootNode=Util.findCommonRoot(startNode,endNode);if(!rootNode){return false}if(endNode===startNode){var temp=startNode.parentNode,sibling=startNode.nextSibling;temp.removeChild(startNode);newElement.appendChild(startNode);if(sibling){temp.insertBefore(newElement,sibling)}else{temp.appendChild(newElement)}return newElement.hasChildNodes()}var rootChildren=[],firstChild,lastChild,nextNode;for(var i=0;i<rootNode.childNodes.length;i++){nextNode=rootNode.childNodes[i];if(!firstChild){if(Util.isDescendant(nextNode,startNode,true)){firstChild=nextNode}}else{if(Util.isDescendant(nextNode,endNode,true)){lastChild=nextNode;break}else{rootChildren.push(nextNode)}}}var afterLast=lastChild.nextSibling,fragment=rootNode.ownerDocument.createDocumentFragment();if(firstChild===startNode){firstChild.parentNode.removeChild(firstChild);fragment.appendChild(firstChild)}else{fragment.appendChild(Util.splitOffDOMTree(firstChild,startNode))}rootChildren.forEach(function(element){element.parentNode.removeChild(element);fragment.appendChild(element)});if(lastChild===endNode){lastChild.parentNode.removeChild(lastChild);fragment.appendChild(lastChild)}else{fragment.appendChild(Util.splitOffDOMTree(lastChild,endNode,true))}newElement.appendChild(fragment);if(lastChild.parentNode===rootNode){rootNode.insertBefore(newElement,lastChild)}else if(afterLast){rootNode.insertBefore(newElement,afterLast)}else{rootNode.appendChild(newElement)}return newElement.hasChildNodes()},depthOfNode:function(inNode){var theDepth=0,node=inNode;while(node.parentNode!==null){node=node.parentNode;theDepth++}return theDepth},findCommonRoot:function(inNode1,inNode2){var depth1=Util.depthOfNode(inNode1),depth2=Util.depthOfNode(inNode2),node1=inNode1,node2=inNode2;while(depth1!==depth2){if(depth1>depth2){node1=node1.parentNode;depth1-=1}else{node2=node2.parentNode;depth2-=1}}while(node1!==node2){node1=node1.parentNode;node2=node2.parentNode}return node1},isElementAtBeginningOfBlock:function(node){var textVal,sibling;while(!Util.isBlockContainer(node)&&!Util.isMediumEditorElement(node)){sibling=node;while(sibling=sibling.previousSibling){textVal=sibling.nodeType===3?sibling.nodeValue:sibling.textContent;if(textVal.length>0){return false}}node=node.parentNode}return true},isMediumEditorElement:function(element){return element&&element.getAttribute&&!!element.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(element){return Util.traverseUp(element,function(node){return Util.isMediumEditorElement(node)})},isBlockContainer:function(element){return element&&element.nodeType!==3&&Util.blockContainerElementNames.indexOf(element.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(node){return Util.traverseUp(node,function(node){return Util.isBlockContainer(node)||Util.isMediumEditorElement(node)})},getTopBlockContainer:function(element){var topBlock=Util.isBlockContainer(element)?element:false;Util.traverseUp(element,function(el){if(Util.isBlockContainer(el)){topBlock=el}if(!topBlock&&Util.isMediumEditorElement(el)){topBlock=el;return true}return false});return topBlock},getFirstSelectableLeafNode:function(element){while(element&&element.firstChild){element=element.firstChild}element=Util.traverseUp(element,function(el){return Util.emptyElementNames.indexOf(el.nodeName.toLowerCase())===-1});if(element.nodeName.toLowerCase()==="table"){var firstCell=element.querySelector("th, td");if(firstCell){element=firstCell}}return element},getFirstTextNode:function(element){Util.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0");return Util._getFirstTextNode(element)},_getFirstTextNode:function(element){if(element.nodeType===3){return element}for(var i=0;i<element.childNodes.length;i++){var textNode=Util._getFirstTextNode(element.childNodes[i]);if(textNode!==null){return textNode}}return null},ensureUrlHasProtocol:function(url){if(url.indexOf("://")===-1){return"http://"+url}return url},warn:function(){if(window.console!==undefined&&typeof window.console.warn==="function"){window.console.warn.apply(window.console,arguments)}},deprecated:function(oldName,newName,version){var m=oldName+" is deprecated, please use "+newName+" instead.";if(version){m+=" Will be removed in "+version}Util.warn(m)},deprecatedMethod:function(oldName,newName,args,version){Util.deprecated(oldName,newName,version);if(typeof this[newName]==="function"){this[newName].apply(this,args)}},cleanupAttrs:function(el,attrs){attrs.forEach(function(attr){el.removeAttribute(attr)})},cleanupTags:function(el,tags){if(tags.indexOf(el.nodeName.toLowerCase())!==-1){el.parentNode.removeChild(el)}},unwrapTags:function(el,tags){if(tags.indexOf(el.nodeName.toLowerCase())!==-1){MediumEditor.util.unwrap(el,document)}},getClosestTag:function(el,tag){return Util.traverseUp(el,function(element){return element.nodeName.toLowerCase()===tag.toLowerCase()})},unwrap:function(el,doc){var fragment=doc.createDocumentFragment(),nodes=Array.prototype.slice.call(el.childNodes);for(var i=0;i<nodes.length;i++){fragment.appendChild(nodes[i])}if(fragment.childNodes.length){el.parentNode.replaceChild(fragment,el)}else{el.parentNode.removeChild(el)}},guid:function(){function _s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return _s4()+_s4()+"-"+_s4()+"-"+_s4()+"-"+_s4()+"-"+_s4()+_s4()+_s4()}};MediumEditor.util=Util})(window);(function(){"use strict";var Extension=function(options){MediumEditor.util.extend(this,options)};Extension.extend=function(protoProps){var parent=this,child;if(protoProps&&protoProps.hasOwnProperty("constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}MediumEditor.util.extend(child,parent);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps){MediumEditor.util.extend(child.prototype,protoProps)}return child};Extension.prototype={init:function(){},base:undefined,name:undefined,checkState:undefined,destroy:undefined,queryCommandState:undefined,isActive:undefined,isAlreadyApplied:undefined,setActive:undefined,setInactive:undefined,getInteractionElements:undefined,window:undefined,document:undefined,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(option){return this.base.options[option]}};["execAction","on","off","subscribe","trigger"].forEach(function(helper){Extension.prototype[helper]=function(){return this.base[helper].apply(this.base,arguments)}});MediumEditor.Extension=Extension})();(function(){"use strict";function filterOnlyParentElements(node){if(MediumEditor.util.isBlockContainer(node)){return NodeFilter.FILTER_ACCEPT}else{return NodeFilter.FILTER_SKIP}}var Selection={findMatchingSelectionParent:function(testElementFunction,contentWindow){var selection=contentWindow.getSelection(),range,current;if(selection.rangeCount===0){return false}range=selection.getRangeAt(0);current=range.commonAncestorContainer;return MediumEditor.util.traverseUp(current,testElementFunction)},getSelectionElement:function(contentWindow){return this.findMatchingSelectionParent(function(el){return MediumEditor.util.isMediumEditorElement(el)},contentWindow)},exportSelection:function(root,doc){if(!root){return null}var selectionState=null,selection=doc.getSelection();if(selection.rangeCount>0){var range=selection.getRangeAt(0),preSelectionRange=range.cloneRange(),start;preSelectionRange.selectNodeContents(root);preSelectionRange.setEnd(range.startContainer,range.startOffset);start=preSelectionRange.toString().length;selectionState={start:start,end:start+range.toString().length};if(this.doesRangeStartWithImages(range,doc)){selectionState.startsWithImage=true}var trailingImageCount=this.getTrailingImageCount(root,selectionState,range.endContainer,range.endOffset);if(trailingImageCount){selectionState.trailingImageCount=trailingImageCount}if(start!==0){var emptyBlocksIndex=this.getIndexRelativeToAdjacentEmptyBlocks(doc,root,range.startContainer,range.startOffset);if(emptyBlocksIndex!==-1){selectionState.emptyBlocksIndex=emptyBlocksIndex}}}return selectionState},importSelection:function(selectionState,root,doc,favorLaterSelectionAnchor){if(!selectionState||!root){return}var range=doc.createRange();range.setStart(root,0);range.collapse(true);var node=root,nodeStack=[],charIndex=0,foundStart=false,foundEnd=false,trailingImageCount=0,stop=false,nextCharIndex,allowRangeToStartAtEndOfNode=false,lastTextNode=null;if(favorLaterSelectionAnchor||selectionState.startsWithImage||typeof selectionState.emptyBlocksIndex!=="undefined"){allowRangeToStartAtEndOfNode=true}while(!stop&&node){if(node.nodeType>3){node=nodeStack.pop();continue}if(node.nodeType===3&&!foundEnd){nextCharIndex=charIndex+node.length;if(!foundStart&&selectionState.start>=charIndex&&selectionState.start<=nextCharIndex){if(allowRangeToStartAtEndOfNode||selectionState.start<nextCharIndex){range.setStart(node,selectionState.start-charIndex);foundStart=true}else{lastTextNode=node}}if(foundStart&&selectionState.end>=charIndex&&selectionState.end<=nextCharIndex){if(!selectionState.trailingImageCount){range.setEnd(node,selectionState.end-charIndex);stop=true}else{foundEnd=true}}charIndex=nextCharIndex}else{if(selectionState.trailingImageCount&&foundEnd){if(node.nodeName.toLowerCase()==="img"){trailingImageCount++}if(trailingImageCount===selectionState.trailingImageCount){var endIndex=0;while(node.parentNode.childNodes[endIndex]!==node){endIndex++}range.setEnd(node.parentNode,endIndex+1);stop=true}}if(!stop&&node.nodeType===1){var i=node.childNodes.length-1;while(i>=0){nodeStack.push(node.childNodes[i]);i-=1}}}if(!stop){node=nodeStack.pop()}}if(!foundStart&&lastTextNode){range.setStart(lastTextNode,lastTextNode.length);range.setEnd(lastTextNode,lastTextNode.length)}if(typeof selectionState.emptyBlocksIndex!=="undefined"){range=this.importSelectionMoveCursorPastBlocks(doc,root,selectionState.emptyBlocksIndex,range)}if(favorLaterSelectionAnchor){range=this.importSelectionMoveCursorPastAnchor(selectionState,range)}this.selectRange(doc,range)},importSelectionMoveCursorPastAnchor:function(selectionState,range){var nodeInsideAnchorTagFunction=function(node){return node.nodeName.toLowerCase()==="a"};if(selectionState.start===selectionState.end&&range.startContainer.nodeType===3&&range.startOffset===range.startContainer.nodeValue.length&&MediumEditor.util.traverseUp(range.startContainer,nodeInsideAnchorTagFunction)){var prevNode=range.startContainer,currentNode=range.startContainer.parentNode;while(currentNode!==null&&currentNode.nodeName.toLowerCase()!=="a"){if(currentNode.childNodes[currentNode.childNodes.length-1]!==prevNode){currentNode=null}else{prevNode=currentNode;currentNode=currentNode.parentNode}}if(currentNode!==null&&currentNode.nodeName.toLowerCase()==="a"){var currentNodeIndex=null;for(var i=0;currentNodeIndex===null&&i<currentNode.parentNode.childNodes.length;i++){if(currentNode.parentNode.childNodes[i]===currentNode){currentNodeIndex=i}}range.setStart(currentNode.parentNode,currentNodeIndex+1);range.collapse(true)}}return range},importSelectionMoveCursorPastBlocks:function(doc,root,index,range){var treeWalker=doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filterOnlyParentElements,false),startContainer=range.startContainer,startBlock,targetNode,currIndex=0;index=index||1;if(startContainer.nodeType===3&&MediumEditor.util.isBlockContainer(startContainer.previousSibling)){startBlock=startContainer.previousSibling}else{startBlock=MediumEditor.util.getClosestBlockContainer(startContainer)}while(treeWalker.nextNode()){if(!targetNode){if(startBlock===treeWalker.currentNode){targetNode=treeWalker.currentNode}}else{targetNode=treeWalker.currentNode;currIndex++;if(currIndex===index){break}if(targetNode.textContent.length>0){break}}}if(!targetNode){targetNode=startBlock}range.setStart(MediumEditor.util.getFirstSelectableLeafNode(targetNode),0);return range},getIndexRelativeToAdjacentEmptyBlocks:function(doc,root,cursorContainer,cursorOffset){if(cursorContainer.textContent.length>0&&cursorOffset>0){return-1}var node=cursorContainer;if(node.nodeType!==3){node=cursorContainer.childNodes[cursorOffset]}if(node){if(!MediumEditor.util.isElementAtBeginningOfBlock(node)){return-1}var previousSibling=MediumEditor.util.findPreviousSibling(node);if(!previousSibling){return-1}else if(previousSibling.nodeValue){return-1}}var closestBlock=MediumEditor.util.getClosestBlockContainer(cursorContainer),treeWalker=doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filterOnlyParentElements,false),emptyBlocksCount=0;while(treeWalker.nextNode()){var blockIsEmpty=treeWalker.currentNode.textContent==="";if(blockIsEmpty||emptyBlocksCount>0){emptyBlocksCount+=1}if(treeWalker.currentNode===closestBlock){return emptyBlocksCount}if(!blockIsEmpty){emptyBlocksCount=0}}return emptyBlocksCount},doesRangeStartWithImages:function(range,doc){if(range.startOffset!==0||range.startContainer.nodeType!==1){return false}if(range.startContainer.nodeName.toLowerCase()==="img"){return true}var img=range.startContainer.querySelector("img");if(!img){return false}var treeWalker=doc.createTreeWalker(range.startContainer,NodeFilter.SHOW_ALL,null,false);while(treeWalker.nextNode()){var next=treeWalker.currentNode;if(next===img){break}if(next.nodeValue){return false}}return true},getTrailingImageCount:function(root,selectionState,endContainer,endOffset){if(endOffset===0||endContainer.nodeType!==1){return 0}if(endContainer.nodeName.toLowerCase()!=="img"&&!endContainer.querySelector("img")){return 0}var lastNode=endContainer.childNodes[endOffset-1];while(lastNode.hasChildNodes()){lastNode=lastNode.lastChild}var node=root,nodeStack=[],charIndex=0,foundStart=false,foundEnd=false,stop=false,nextCharIndex,trailingImages=0;while(!stop&&node){if(node.nodeType>3){node=nodeStack.pop();continue}if(node.nodeType===3&&!foundEnd){trailingImages=0;nextCharIndex=charIndex+node.length;if(!foundStart&&selectionState.start>=charIndex&&selectionState.start<=nextCharIndex){foundStart=true}if(foundStart&&selectionState.end>=charIndex&&selectionState.end<=nextCharIndex){foundEnd=true}charIndex=nextCharIndex}else{if(node.nodeName.toLowerCase()==="img"){trailingImages++}if(node===lastNode){stop=true}else if(node.nodeType===1){var i=node.childNodes.length-1;while(i>=0){nodeStack.push(node.childNodes[i]);i-=1}}}if(!stop){node=nodeStack.pop()}}return trailingImages},selectionContainsContent:function(doc){var sel=doc.getSelection();if(!sel||sel.isCollapsed||!sel.rangeCount){return false}if(sel.toString().trim()!==""){return true}var selectionNode=this.getSelectedParentElement(sel.getRangeAt(0));if(selectionNode){if(selectionNode.nodeName.toLowerCase()==="img"||selectionNode.nodeType===1&&selectionNode.querySelector("img")){return true}}return false},selectionInContentEditableFalse:function(contentWindow){var sawtrue,sawfalse=this.findMatchingSelectionParent(function(el){var ce=el&&el.getAttribute("contenteditable");if(ce==="true"){sawtrue=true}return el.nodeName!=="#text"&&ce==="false"},contentWindow);return!sawtrue&&sawfalse},getSelectionHtml:function getSelectionHtml(doc){var i,html="",sel=doc.getSelection(),len,container;if(sel.rangeCount){container=doc.createElement("div");for(i=0,len=sel.rangeCount;i<len;i+=1){container.appendChild(sel.getRangeAt(i).cloneContents())}html=container.innerHTML}return html},getCaretOffsets:function getCaretOffsets(element,range){var preCaretRange,postCaretRange;if(!range){range=window.getSelection().getRangeAt(0)}preCaretRange=range.cloneRange();postCaretRange=range.cloneRange();preCaretRange.selectNodeContents(element);preCaretRange.setEnd(range.endContainer,range.endOffset);postCaretRange.selectNodeContents(element);postCaretRange.setStart(range.endContainer,range.endOffset);return{left:preCaretRange.toString().length,right:postCaretRange.toString().length}},rangeSelectsSingleNode:function(range){var startNode=range.startContainer;return startNode===range.endContainer&&startNode.hasChildNodes()&&range.endOffset===range.startOffset+1},getSelectedParentElement:function(range){if(!range){return null}if(this.rangeSelectsSingleNode(range)&&range.startContainer.childNodes[range.startOffset].nodeType!==3){return range.startContainer.childNodes[range.startOffset]}if(range.startContainer.nodeType===3){return range.startContainer.parentNode}return range.startContainer},getSelectedElements:function(doc){var selection=doc.getSelection(),range,toRet,currNode;if(!selection.rangeCount||selection.isCollapsed||!selection.getRangeAt(0).commonAncestorContainer){return[]}range=selection.getRangeAt(0);if(range.commonAncestorContainer.nodeType===3){toRet=[];currNode=range.commonAncestorContainer;while(currNode.parentNode&&currNode.parentNode.childNodes.length===1){toRet.push(currNode.parentNode);currNode=currNode.parentNode}return toRet}return[].filter.call(range.commonAncestorContainer.getElementsByTagName("*"),function(el){return typeof selection.containsNode==="function"?selection.containsNode(el,true):true})},selectNode:function(node,doc){var range=doc.createRange();range.selectNodeContents(node);this.selectRange(doc,range)},select:function(doc,startNode,startOffset,endNode,endOffset){var range=doc.createRange();range.setStart(startNode,startOffset);if(endNode){range.setEnd(endNode,endOffset)}else{range.collapse(true)}this.selectRange(doc,range);return range},clearSelection:function(doc,moveCursorToStart){if(moveCursorToStart){doc.getSelection().collapseToStart()}else{doc.getSelection().collapseToEnd()}},moveCursor:function(doc,node,offset){this.select(doc,node,offset)},getSelectionRange:function(ownerDocument){var selection=ownerDocument.getSelection();if(selection.rangeCount===0){return null}return selection.getRangeAt(0)},selectRange:function(ownerDocument,range){var selection=ownerDocument.getSelection();selection.removeAllRanges();selection.addRange(range)},getSelectionStart:function(ownerDocument){var node=ownerDocument.getSelection().anchorNode,startNode=node&&node.nodeType===3?node.parentNode:node;return startNode}};MediumEditor.selection=Selection})();(function(){"use strict";function isElementDescendantOfExtension(extensions,element){if(!extensions){return false}return extensions.some(function(extension){if(typeof extension.getInteractionElements!=="function"){return false}var extensionElements=extension.getInteractionElements();if(!extensionElements){return false}if(!Array.isArray(extensionElements)){extensionElements=[extensionElements]}return extensionElements.some(function(el){return MediumEditor.util.isDescendant(el,element,true)})})}var Events=function(instance){this.base=instance;this.options=this.base.options;this.events=[];this.disabledEvents={};this.customEvents={};this.listeners={}};Events.prototype={InputEventOnContenteditableSupported:!MediumEditor.util.isIE&&!MediumEditor.util.isEdge,attachDOMEvent:function(targets,event,listener,useCapture){var win=this.base.options.contentWindow,doc=this.base.options.ownerDocument;targets=MediumEditor.util.isElement(targets)||[win,doc].indexOf(targets)>-1?[targets]:targets;Array.prototype.forEach.call(targets,function(target){target.addEventListener(event,listener,useCapture);this.events.push([target,event,listener,useCapture])}.bind(this))},detachDOMEvent:function(targets,event,listener,useCapture){var index,e,win=this.base.options.contentWindow,doc=this.base.options.ownerDocument;if(targets){targets=MediumEditor.util.isElement(targets)||[win,doc].indexOf(targets)>-1?[targets]:targets;Array.prototype.forEach.call(targets,function(target){index=this.indexOfListener(target,event,listener,useCapture);if(index!==-1){e=this.events.splice(index,1)[0];e[0].removeEventListener(e[1],e[2],e[3])}}.bind(this))}},indexOfListener:function(target,event,listener,useCapture){var i,n,item;for(i=0,n=this.events.length;i<n;i=i+1){item=this.events[i];if(item[0]===target&&item[1]===event&&item[2]===listener&&item[3]===useCapture){return i}}return-1},detachAllDOMEvents:function(){var e=this.events.pop();while(e){e[0].removeEventListener(e[1],e[2],e[3]);e=this.events.pop()}},detachAllEventsFromElement:function(element){var filtered=this.events.filter(function(e){return e&&e[0].getAttribute&&e[0].getAttribute("medium-editor-index")===element.getAttribute("medium-editor-index")});for(var i=0,len=filtered.length;i<len;i++){var e=filtered[i];this.detachDOMEvent(e[0],e[1],e[2],e[3])}},attachAllEventsToElement:function(element){if(this.listeners["editableInput"]){this.contentCache[element.getAttribute("medium-editor-index")]=element.innerHTML}if(this.eventsCache){this.eventsCache.forEach(function(e){this.attachDOMEvent(element,e["name"],e["handler"].bind(this))},this)}},enableCustomEvent:function(event){if(this.disabledEvents[event]!==undefined){delete this.disabledEvents[event]}},disableCustomEvent:function(event){this.disabledEvents[event]=true},attachCustomEvent:function(event,listener){this.setupListener(event);if(!this.customEvents[event]){this.customEvents[event]=[]}this.customEvents[event].push(listener)},detachCustomEvent:function(event,listener){var index=this.indexOfCustomListener(event,listener);if(index!==-1){this.customEvents[event].splice(index,1)}},indexOfCustomListener:function(event,listener){if(!this.customEvents[event]||!this.customEvents[event].length){return-1}return this.customEvents[event].indexOf(listener)},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(name,data,editable){if(this.customEvents[name]&&!this.disabledEvents[name]){this.customEvents[name].forEach(function(listener){listener(data,editable)})}},destroy:function(){this.detachAllDOMEvents();this.detachAllCustomEvents();this.detachExecCommand();if(this.base.elements){this.base.elements.forEach(function(element){element.removeAttribute("data-medium-focused")})}},attachToExecCommand:function(){if(this.execCommandListener){return}this.execCommandListener=function(execInfo){this.handleDocumentExecCommand(execInfo)}.bind(this);this.wrapExecCommand();this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener)},detachExecCommand:function(){var doc=this.options.ownerDocument;if(!this.execCommandListener||!doc.execCommand.listeners){return}var index=doc.execCommand.listeners.indexOf(this.execCommandListener);if(index!==-1){doc.execCommand.listeners.splice(index,1)}if(!doc.execCommand.listeners.length){this.unwrapExecCommand()}},wrapExecCommand:function(){var doc=this.options.ownerDocument;if(doc.execCommand.listeners){return}var callListeners=function(args,result){if(doc.execCommand.listeners){doc.execCommand.listeners.forEach(function(listener){listener({command:args[0],value:args[2],args:args,result:result})})}},wrapper=function(){var result=doc.execCommand.orig.apply(this,arguments);if(!doc.execCommand.listeners){return result}var args=Array.prototype.slice.call(arguments);callListeners(args,result);return result};wrapper.orig=doc.execCommand;wrapper.listeners=[];wrapper.callListeners=callListeners;doc.execCommand=wrapper},unwrapExecCommand:function(){var doc=this.options.ownerDocument;if(!doc.execCommand.orig){return}doc.execCommand=doc.execCommand.orig},setupListener:function(name){if(this.listeners[name]){return}switch(name){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),true);this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),true);this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),true);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={};this.base.elements.forEach(function(element){this.contentCache[element.getAttribute("medium-editor-index")]=element.innerHTML},this);if(this.InputEventOnContenteditableSupported){this.attachToEachElement("input",this.handleInput)}if(!this.InputEventOnContenteditableSupported){this.setupListener("editableKeypress");this.keypressUpdateInput=true;this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this));this.attachToExecCommand()}break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging);this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste);break}this.listeners[name]=true},attachToEachElement:function(name,handler){if(!this.eventsCache){this.eventsCache=[]}this.base.elements.forEach(function(element){this.attachDOMEvent(element,name,handler.bind(this))},this);this.eventsCache.push({name:name,handler:handler})},cleanupElement:function(element){var index=element.getAttribute("medium-editor-index");if(index){this.detachAllEventsFromElement(element);if(this.contentCache){delete this.contentCache[index]}}},focusElement:function(element){element.focus();this.updateFocus(element,{target:element,type:"focus"})},updateFocus:function(target,eventObj){var hadFocus=this.base.getFocusedElement(),toFocus;if(hadFocus&&eventObj.type==="click"&&this.lastMousedownTarget&&(MediumEditor.util.isDescendant(hadFocus,this.lastMousedownTarget,true)||isElementDescendantOfExtension(this.base.extensions,this.lastMousedownTarget))){toFocus=hadFocus}if(!toFocus){this.base.elements.some(function(element){if(!toFocus&&MediumEditor.util.isDescendant(element,target,true)){toFocus=element}return!!toFocus},this)}var externalEvent=!MediumEditor.util.isDescendant(hadFocus,target,true)&&!isElementDescendantOfExtension(this.base.extensions,target);if(toFocus!==hadFocus){if(hadFocus&&externalEvent){hadFocus.removeAttribute("data-medium-focused");this.triggerCustomEvent("blur",eventObj,hadFocus)}if(toFocus){toFocus.setAttribute("data-medium-focused",true);this.triggerCustomEvent("focus",eventObj,toFocus)}}if(externalEvent){this.triggerCustomEvent("externalInteraction",eventObj)}},updateInput:function(target,eventObj){if(!this.contentCache){return}var index=target.getAttribute("medium-editor-index"),html=target.innerHTML;if(html!==this.contentCache[index]){this.triggerCustomEvent("editableInput",eventObj,target)}this.contentCache[index]=html},handleDocumentSelectionChange:function(event){if(event.currentTarget&&event.currentTarget.activeElement){var activeElement=event.currentTarget.activeElement,currentTarget;this.base.elements.some(function(element){if(MediumEditor.util.isDescendant(element,activeElement,true)){currentTarget=element;return true}return false},this);if(currentTarget){this.updateInput(currentTarget,{target:activeElement,currentTarget:currentTarget})}}},handleDocumentExecCommand:function(){var target=this.base.getFocusedElement();if(target){this.updateInput(target,{target:target,currentTarget:target})}},handleBodyClick:function(event){this.updateFocus(event.target,event)},handleBodyFocus:function(event){this.updateFocus(event.target,event)},handleBodyMousedown:function(event){this.lastMousedownTarget=event.target},handleInput:function(event){this.updateInput(event.currentTarget,event)},handleClick:function(event){this.triggerCustomEvent("editableClick",event,event.currentTarget)},handleBlur:function(event){this.triggerCustomEvent("editableBlur",event,event.currentTarget)},handleKeypress:function(event){this.triggerCustomEvent("editableKeypress",event,event.currentTarget);if(this.keypressUpdateInput){var eventObj={target:event.target,currentTarget:event.currentTarget};setTimeout(function(){this.updateInput(eventObj.currentTarget,eventObj)}.bind(this),0)}},handleKeyup:function(event){this.triggerCustomEvent("editableKeyup",event,event.currentTarget)},handleMouseover:function(event){this.triggerCustomEvent("editableMouseover",event,event.currentTarget)},handleDragging:function(event){this.triggerCustomEvent("editableDrag",event,event.currentTarget)},handleDrop:function(event){this.triggerCustomEvent("editableDrop",event,event.currentTarget)},handlePaste:function(event){this.triggerCustomEvent("editablePaste",event,event.currentTarget)},handleKeydown:function(event){this.triggerCustomEvent("editableKeydown",event,event.currentTarget);if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.SPACE)){return this.triggerCustomEvent("editableKeydownSpace",event,event.currentTarget)}if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)||event.ctrlKey&&MediumEditor.util.isKey(event,MediumEditor.util.keyCode.M)){return this.triggerCustomEvent("editableKeydownEnter",event,event.currentTarget)}if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.TAB)){return this.triggerCustomEvent("editableKeydownTab",event,event.currentTarget)}if(MediumEditor.util.isKey(event,[MediumEditor.util.keyCode.DELETE,MediumEditor.util.keyCode.BACKSPACE])){return this.triggerCustomEvent("editableKeydownDelete",event,event.currentTarget)}}};MediumEditor.Events=Events})();(function(){"use strict";var Button=MediumEditor.Extension.extend({action:undefined,aria:undefined,tagNames:undefined,style:undefined,useQueryState:undefined,contentDefault:undefined,contentFA:undefined,classList:undefined,attrs:undefined,constructor:function(options){if(Button.isBuiltInButton(options)){MediumEditor.Extension.call(this,this.defaults[options])}else{MediumEditor.Extension.call(this,options)}},init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.button=this.createButton();this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return typeof this.action==="function"?this.action(this.base.options):this.action},getAria:function(){return typeof this.aria==="function"?this.aria(this.base.options):this.aria},getTagNames:function(){return typeof this.tagNames==="function"?this.tagNames(this.base.options):this.tagNames},createButton:function(){var button=this.document.createElement("button"),content=this.contentDefault,ariaLabel=this.getAria(),buttonLabels=this.getEditorOption("buttonLabels");button.classList.add("medium-editor-action");button.classList.add("medium-editor-action-"+this.name);if(this.classList){this.classList.forEach(function(className){button.classList.add(className)})}button.setAttribute("data-action",this.getAction());if(ariaLabel){button.setAttribute("title",ariaLabel);button.setAttribute("aria-label",ariaLabel)}if(this.attrs){Object.keys(this.attrs).forEach(function(attr){button.setAttribute(attr,this.attrs[attr])},this)}if(buttonLabels==="fontawesome"&&this.contentFA){content=this.contentFA}button.innerHTML=content;return button},handleClick:function(event){event.preventDefault();event.stopPropagation();var action=this.getAction();if(action){this.execAction(action)}},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass"));delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass"));delete this.knownState},queryCommandState:function(){var queryState=null;if(this.useQueryState){queryState=this.base.queryCommandState(this.getAction())}return queryState},isAlreadyApplied:function(node){var isMatch=false,tagNames=this.getTagNames(),styleVals,computedStyle;if(this.knownState===false||this.knownState===true){return this.knownState}if(tagNames&&tagNames.length>0){isMatch=tagNames.indexOf(node.nodeName.toLowerCase())!==-1}if(!isMatch&&this.style){styleVals=this.style.value.split("|");computedStyle=this.window.getComputedStyle(node,null).getPropertyValue(this.style.prop);styleVals.forEach(function(val){if(!this.knownState){isMatch=computedStyle.indexOf(val)!==-1;if(isMatch||this.style.prop!=="text-decoration"){this.knownState=isMatch}}},this)}return isMatch}});Button.isBuiltInButton=function(name){return typeof name==="string"&&MediumEditor.extensions.button.prototype.defaults.hasOwnProperty(name)};MediumEditor.extensions.button=Button})();(function(){"use strict";MediumEditor.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:true,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:true,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:true,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:true,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},html:{name:"html",action:"html",aria:"evaluate html",tagNames:["iframe","object"],contentDefault:"<b>html</b>",contentFA:'<i class="fa fa-code"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:true,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:true,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}})();(function(){"use strict";var FormExtension=MediumEditor.extensions.button.extend({init:function(){MediumEditor.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:true,getForm:function(){},isDisplayed:function(){if(this.hasForm){return this.getForm().classList.contains(this.activeClass)}return false},showForm:function(){if(this.hasForm){this.getForm().classList.add(this.activeClass)}},hideForm:function(){if(this.hasForm){this.getForm().classList.remove(this.activeClass)}},showToolbarDefaultActions:function(){var toolbar=this.base.getExtensionByName("toolbar");if(toolbar){toolbar.showToolbarDefaultActions()}},hideToolbarDefaultActions:function(){var toolbar=this.base.getExtensionByName("toolbar");if(toolbar){toolbar.hideToolbarDefaultActions()}},setToolbarPosition:function(){var toolbar=this.base.getExtensionByName("toolbar");if(toolbar){toolbar.setToolbarPosition()}}});MediumEditor.extensions.form=FormExtension})();(function(){"use strict";var AnchorForm=MediumEditor.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:false,placeholderText:"Paste or type a link",targetCheckbox:false,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(event){event.preventDefault();event.stopPropagation();var range=MediumEditor.selection.getSelectionRange(this.document);if(range.startContainer.nodeName.toLowerCase()==="a"||range.endContainer.nodeName.toLowerCase()==="a"||MediumEditor.util.getClosestTag(MediumEditor.selection.getSelectedParentElement(range),"a")){return this.execAction("unlink")}if(!this.isDisplayed()){this.showForm()}return false},handleKeydown:function(event){if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.K)&&MediumEditor.util.isMetaCtrlKey(event)&&!event.shiftKey){this.handleClick(event)}},getForm:function(){if(!this.form){this.form=this.createForm()}return this.form},getTemplate:function(){var template=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];template.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>");template.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>");if(this.targetCheckbox){template.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target" id="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">','<label for="medium-editor-toolbar-anchor-target-field-'+this.getEditorId()+'">',this.targetCheckboxText,"</label>","</div>")}if(this.customClassOption){template.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>")}return template.join("")},isDisplayed:function(){return MediumEditor.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){MediumEditor.extensions.form.prototype.hideForm.apply(this);this.getInput().value=""},showForm:function(opts){var input=this.getInput(),targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox();opts=opts||{value:""};if(typeof opts==="string"){opts={value:opts}}this.base.saveSelection();this.hideToolbarDefaultActions();MediumEditor.extensions.form.prototype.showForm.apply(this);this.setToolbarPosition();input.value=opts.value;input.focus();if(targetCheckbox){targetCheckbox.checked=opts.target==="_blank"}if(buttonCheckbox){var classList=opts.buttonClass?opts.buttonClass.split(" "):[];buttonCheckbox.checked=classList.indexOf(this.customClassOption)!==-1}},destroy:function(){if(!this.form){return false}if(this.form.parentNode){this.form.parentNode.removeChild(this.form)}delete this.form},getFormOpts:function(){var targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox(),opts={value:this.getInput().value.trim()};if(this.linkValidation){opts.value=this.checkLinkFormat(opts.value)}opts.target="_self";if(targetCheckbox&&targetCheckbox.checked){opts.target="_blank"}if(buttonCheckbox&&buttonCheckbox.checked){opts.buttonClass=this.customClassOption}return opts},doFormSave:function(){var opts=this.getFormOpts();this.completeFormSave(opts)},completeFormSave:function(opts){this.base.restoreSelection();this.execAction(this.action,opts);this.base.checkSelection()},ensureEncodedUri:function(str){return str===decodeURI(str)?encodeURI(str):str},ensureEncodedUriComponent:function(str){return str===decodeURIComponent(str)?encodeURIComponent(str):str},ensureEncodedParam:function(param){var split=param.split("="),key=split[0],val=split[1];return key+(val===undefined?"":"="+this.ensureEncodedUriComponent(val))},ensureEncodedQuery:function(queryString){return queryString.split("&").map(this.ensureEncodedParam.bind(this)).join("&")},checkLinkFormat:function(value){var urlSchemeRegex=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,hasScheme=urlSchemeRegex.test(value),scheme="",telRegex=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/,urlParts=value.match(/^(.*?)(?:\?(.*?))?(?:#(.*))?$/),path=urlParts[1],query=urlParts[2],fragment=urlParts[3];if(telRegex.test(value)){return"tel:"+value}if(!hasScheme){var host=path.split("/")[0];if(host.match(/.+(\.|:).+/)||host==="localhost"){scheme="http://"}}return scheme+this.ensureEncodedUri(path)+(query===undefined?"":"?"+this.ensureEncodedQuery(query))+(fragment===undefined?"":"#"+fragment)},doFormCancel:function(){this.base.restoreSelection();this.base.checkSelection()},attachFormEvents:function(form){var close=form.querySelector(".medium-editor-toolbar-close"),save=form.querySelector(".medium-editor-toolbar-save"),input=form.querySelector(".medium-editor-toolbar-input");this.on(form,"click",this.handleFormClick.bind(this));this.on(input,"keyup",this.handleTextboxKeyup.bind(this));this.on(close,"click",this.handleCloseClick.bind(this));this.on(save,"click",this.handleSaveClick.bind(this),true)},createForm:function(){var doc=this.document,form=doc.createElement("div");form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-anchor-"+this.getEditorId();form.innerHTML=this.getTemplate();this.attachFormEvents(form);return form},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(event){if(event.keyCode===MediumEditor.util.keyCode.ENTER){event.preventDefault();this.doFormSave();return}if(event.keyCode===MediumEditor.util.keyCode.ESCAPE){event.preventDefault();this.doFormCancel()}},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}});MediumEditor.extensions.anchor=AnchorForm})();(function(){"use strict";var AnchorPreview=MediumEditor.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:false,showOnEmptyLinks:true,init:function(){this.anchorPreview=this.createPreview();this.getEditorOption("elementsContainer").appendChild(this.anchorPreview);this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var el=this.document.createElement("div");el.id="medium-editor-anchor-preview-"+this.getEditorId();el.className="medium-editor-anchor-preview";el.innerHTML=this.getTemplate();this.on(el,"click",this.handleClick.bind(this));return el},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">'+'    <a class="medium-editor-toolbar-anchor-preview-inner"></a>'+"</div>"},destroy:function(){if(this.anchorPreview){if(this.anchorPreview.parentNode){this.anchorPreview.parentNode.removeChild(this.anchorPreview)}delete this.anchorPreview}},hidePreview:function(){if(this.anchorPreview){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")}this.activeAnchor=null},showPreview:function(anchorEl){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||anchorEl.getAttribute("data-disable-preview")){return true}if(this.previewValueSelector){this.anchorPreview.querySelector(this.previewValueSelector).textContent=anchorEl.attributes.href.value;this.anchorPreview.querySelector(this.previewValueSelector).href=anchorEl.attributes.href.value}this.anchorPreview.classList.add("medium-toolbar-arrow-over");this.anchorPreview.classList.remove("medium-toolbar-arrow-under");if(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")){this.anchorPreview.classList.add("medium-editor-anchor-preview-active")}this.activeAnchor=anchorEl;this.positionPreview();this.attachPreviewHandlers();return this},positionPreview:function(activeAnchor){activeAnchor=activeAnchor||this.activeAnchor;var containerWidth=this.window.innerWidth,buttonHeight=this.anchorPreview.offsetHeight,boundary=activeAnchor.getBoundingClientRect(),diffLeft=this.diffLeft,diffTop=this.diffTop,elementsContainer=this.getEditorOption("elementsContainer"),elementsContainerAbsolute=["absolute","fixed"].indexOf(window.getComputedStyle(elementsContainer).getPropertyValue("position"))>-1,relativeBoundary={},halfOffsetWidth,defaultLeft,middleBoundary,elementsContainerBoundary,top;halfOffsetWidth=this.anchorPreview.offsetWidth/2;var toolbarExtension=this.base.getExtensionByName("toolbar");if(toolbarExtension){diffLeft=toolbarExtension.diffLeft;diffTop=toolbarExtension.diffTop}defaultLeft=diffLeft-halfOffsetWidth;if(elementsContainerAbsolute){elementsContainerBoundary=elementsContainer.getBoundingClientRect();["top","left"].forEach(function(key){relativeBoundary[key]=boundary[key]-elementsContainerBoundary[key]});relativeBoundary.width=boundary.width;relativeBoundary.height=boundary.height;boundary=relativeBoundary;containerWidth=elementsContainerBoundary.width;top=elementsContainer.scrollTop}else{top=this.window.pageYOffset}middleBoundary=boundary.left+boundary.width/2;top+=buttonHeight+boundary.top+boundary.height-diffTop-this.anchorPreview.offsetHeight;this.anchorPreview.style.top=Math.round(top)+"px";this.anchorPreview.style.right="initial";if(middleBoundary<halfOffsetWidth){this.anchorPreview.style.left=defaultLeft+halfOffsetWidth+"px";this.anchorPreview.style.right="initial"}else if(containerWidth-middleBoundary<halfOffsetWidth){this.anchorPreview.style.left="auto";this.anchorPreview.style.right=0}else{this.anchorPreview.style.left=defaultLeft+middleBoundary+"px";this.anchorPreview.style.right="initial"}},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this));this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){if(!this.showWhenToolbarIsVisible){this.hidePreview()}},handleClick:function(event){var anchorExtension=this.base.getExtensionByName("anchor"),activeAnchor=this.activeAnchor;if(anchorExtension&&activeAnchor){event.preventDefault();this.base.selectElement(this.activeAnchor);this.base.delay(function(){if(activeAnchor){var opts={value:activeAnchor.attributes.href.value,target:activeAnchor.getAttribute("target"),buttonClass:activeAnchor.getAttribute("class")};anchorExtension.showForm(opts);activeAnchor=null}}.bind(this))}this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null;this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout);this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(event){var target=MediumEditor.util.getClosestTag(event.target,"a");if(false===target){return}if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(target.outerHTML)||/href=["']#\S+["']/.test(target.outerHTML))){return true}var toolbar=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&toolbar&&toolbar.isDisplayed&&toolbar.isDisplayed()){return true}if(this.activeAnchor&&this.activeAnchor!==target){this.detachPreviewHandlers()}this.anchorToPreview=target;this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this);this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout);this.base.delay(function(){if(this.anchorToPreview){this.showPreview(this.anchorToPreview)}}.bind(this))},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime();this.hovering=true},handlePreviewMouseout:function(event){if(!event.relatedTarget||!/anchor-preview/.test(event.relatedTarget.className)){this.hovering=false}},updatePreview:function(){if(this.hovering){return true}var durr=(new Date).getTime()-this.lastOver;if(durr>this.hideDelay){this.detachPreviewHandlers()}},detachPreviewHandlers:function(){clearInterval(this.intervalTimer);if(this.instanceHandlePreviewMouseover){this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover);this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout);if(this.activeAnchor){this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover);this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}}this.hidePreview();this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime();this.hovering=true;this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this);this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this);this.intervalTimer=setInterval(this.updatePreview.bind(this),200);this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout);this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover);this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});MediumEditor.extensions.anchorPreview=AnchorPreview})();(function(){"use strict";var WHITESPACE_CHARS,KNOWN_TLDS_FRAGMENT,LINK_REGEXP_TEXT,KNOWN_TLDS_REGEXP,LINK_REGEXP;WHITESPACE_CHARS=[" ","\t","\n","\r"," "," "," "," "," ","\u2028","\u2029"];KNOWN_TLDS_FRAGMENT="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|"+"xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|"+"bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|"+"fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|"+"is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|"+"mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|"+"pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|"+"tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw";LINK_REGEXP_TEXT="("+"((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+KNOWN_TLDS_FRAGMENT+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?«»“”‘’]))"+")|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+KNOWN_TLDS_FRAGMENT+"))";KNOWN_TLDS_REGEXP=new RegExp("^("+KNOWN_TLDS_FRAGMENT+")$","i");LINK_REGEXP=new RegExp(LINK_REGEXP_TEXT,"gi");function nodeIsNotInsideAnchorTag(node){return!MediumEditor.util.getClosestTag(node,"a")}var AutoLink=MediumEditor.Extension.extend({init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.disableEventHandling=false;this.subscribe("editableKeypress",this.onKeypress.bind(this));this.subscribe("editableBlur",this.onBlur.bind(this));this.document.execCommand("AutoUrlDetect",false,false)},isLastInstance:function(){var activeInstances=0;for(var i=0;i<this.window._mediumEditors.length;i++){var editor=this.window._mediumEditors[i];if(editor!==null&&editor.getExtensionByName("autoLink")!==undefined){activeInstances++}}return activeInstances===1},destroy:function(){if(this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()){this.document.execCommand("AutoUrlDetect",false,true)}},onBlur:function(blurEvent,editable){this.performLinking(editable)},onKeypress:function(keyPressEvent){if(this.disableEventHandling){return}if(MediumEditor.util.isKey(keyPressEvent,[MediumEditor.util.keyCode.SPACE,MediumEditor.util.keyCode.ENTER])){clearTimeout(this.performLinkingTimeout);this.performLinkingTimeout=setTimeout(function(){try{var sel=this.base.exportSelection();if(this.performLinking(keyPressEvent.target)){this.base.importSelection(sel,true)}}catch(e){if(window.console){window.console.error("Failed to perform linking",e)}this.disableEventHandling=true}}.bind(this),0)}},performLinking:function(contenteditable){var blockElements=MediumEditor.util.splitByBlockElements(contenteditable),documentModified=false;if(blockElements.length===0){blockElements=[contenteditable]}for(var i=0;i<blockElements.length;i++){documentModified=this.removeObsoleteAutoLinkSpans(blockElements[i])||documentModified;documentModified=this.performLinkingWithinElement(blockElements[i])||documentModified}this.base.events.updateInput(contenteditable,{target:contenteditable,currentTarget:contenteditable});return documentModified},removeObsoleteAutoLinkSpans:function(element){if(!element||element.nodeType===3){return false}var spans=element.querySelectorAll('span[data-auto-link="true"]'),documentModified=false;for(var i=0;i<spans.length;i++){var textContent=spans[i].textContent;if(textContent.indexOf("://")===-1){textContent=MediumEditor.util.ensureUrlHasProtocol(textContent)}if(spans[i].getAttribute("data-href")!==textContent&&nodeIsNotInsideAnchorTag(spans[i])){documentModified=true;var trimmedTextContent=textContent.replace(/\s+$/,"");if(spans[i].getAttribute("data-href")===trimmedTextContent){var charactersTrimmed=textContent.length-trimmedTextContent.length,subtree=MediumEditor.util.splitOffDOMTree(spans[i],this.splitTextBeforeEnd(spans[i],charactersTrimmed));spans[i].parentNode.insertBefore(subtree,spans[i].nextSibling)}else{MediumEditor.util.unwrap(spans[i],this.document)}}}return documentModified},splitTextBeforeEnd:function(element,characterCount){var treeWalker=this.document.createTreeWalker(element,NodeFilter.SHOW_TEXT,null,false),lastChildNotExhausted=true;while(lastChildNotExhausted){lastChildNotExhausted=treeWalker.lastChild()!==null}var currentNode,currentNodeValue,previousNode;while(characterCount>0&&previousNode!==null){currentNode=treeWalker.currentNode;currentNodeValue=currentNode.nodeValue;if(currentNodeValue.length>characterCount){previousNode=currentNode.splitText(currentNodeValue.length-characterCount);characterCount=0}else{previousNode=treeWalker.previousNode();characterCount-=currentNodeValue.length}}return previousNode},performLinkingWithinElement:function(element){var matches=this.findLinkableText(element),linkCreated=false;for(var matchIndex=0;matchIndex<matches.length;matchIndex++){var matchingTextNodes=MediumEditor.util.findOrCreateMatchingTextNodes(this.document,element,matches[matchIndex]);if(this.shouldNotLink(matchingTextNodes)){continue}this.createAutoLink(matchingTextNodes,matches[matchIndex].href)}return linkCreated},shouldNotLink:function(textNodes){var shouldNotLink=false;for(var i=0;i<textNodes.length&&shouldNotLink===false;i++){shouldNotLink=!!MediumEditor.util.traverseUp(textNodes[i],function(node){return node.nodeName.toLowerCase()==="a"||node.getAttribute&&node.getAttribute("data-auto-link")==="true"})}return shouldNotLink},findLinkableText:function(contenteditable){var textContent=contenteditable.textContent,match=null,matches=[];while((match=LINK_REGEXP.exec(textContent))!==null){var matchOk=true,matchEnd=match.index+match[0].length;matchOk=(match.index===0||WHITESPACE_CHARS.indexOf(textContent[match.index-1])!==-1)&&(matchEnd===textContent.length||WHITESPACE_CHARS.indexOf(textContent[matchEnd])!==-1);matchOk=matchOk&&(match[0].indexOf("/")!==-1||KNOWN_TLDS_REGEXP.test(match[0].split(".").pop().split("?").shift()));if(matchOk){matches.push({href:match[0],start:match.index,end:matchEnd})}}return matches},createAutoLink:function(textNodes,href){href=MediumEditor.util.ensureUrlHasProtocol(href);var anchor=MediumEditor.util.createLink(this.document,textNodes,href,this.getEditorOption("targetBlank")?"_blank":null),span=this.document.createElement("span");span.setAttribute("data-auto-link","true");span.setAttribute("data-href",href);anchor.insertBefore(span,anchor.firstChild);while(anchor.childNodes.length>1){span.appendChild(anchor.childNodes[1])}}});MediumEditor.extensions.autoLink=AutoLink})();(function(){"use strict";var CLASS_DRAG_OVER="medium-editor-dragover";function clearClassNames(element){var editable=MediumEditor.util.getContainerEditorElement(element),existing=Array.prototype.slice.call(editable.parentElement.querySelectorAll("."+CLASS_DRAG_OVER));existing.forEach(function(el){el.classList.remove(CLASS_DRAG_OVER)})}var FileDragging=MediumEditor.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(event){event.preventDefault();event.dataTransfer.dropEffect="copy";var target=event.target.classList?event.target:event.target.parentElement;clearClassNames(target);if(event.type==="dragover"){target.classList.add(CLASS_DRAG_OVER)}},handleDrop:function(event){event.preventDefault();event.stopPropagation();this.base.selectElement(event.target);var selection=this.base.exportSelection();selection.start=selection.end;this.base.importSelection(selection);if(event.dataTransfer.files){Array.prototype.slice.call(event.dataTransfer.files).forEach(function(file){if(this.isAllowedFile(file)){if(file.type.match("image")){this.insertImageFile(file)}}},this)}clearClassNames(event.target)},isAllowedFile:function(file){return this.allowedTypes.some(function(fileType){return!!file.type.match(fileType)})},insertImageFile:function(file){if(typeof FileReader!=="function"){return}var fileReader=new FileReader;fileReader.readAsDataURL(file);fileReader.addEventListener("load",function(e){var addImageElement=this.document.createElement("img");addImageElement.src=e.target.result;MediumEditor.util.insertHTMLCommand(this.document,addImageElement.outerHTML)}.bind(this))}});MediumEditor.extensions.fileDragging=FileDragging})();(function(){"use strict";var KeyboardCommands=MediumEditor.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:true,shift:false,alt:false},{command:"italic",key:"I",meta:true,shift:false,alt:false},{command:"underline",key:"U",meta:true,shift:false,alt:false}],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe("editableKeydown",this.handleKeydown.bind(this));this.keys={};this.commands.forEach(function(command){var keyCode=command.key.charCodeAt(0);if(!this.keys[keyCode]){this.keys[keyCode]=[]}this.keys[keyCode].push(command)},this)},handleKeydown:function(event){var keyCode=MediumEditor.util.getKeyCode(event);if(!this.keys[keyCode]){return}var isMeta=MediumEditor.util.isMetaCtrlKey(event),isShift=!!event.shiftKey,isAlt=!!event.altKey;this.keys[keyCode].forEach(function(data){if(data.meta===isMeta&&data.shift===isShift&&(data.alt===isAlt||undefined===data.alt)){event.preventDefault();event.stopPropagation();if(typeof data.command==="function"){data.command.apply(this)}else if(false!==data.command){this.execAction(data.command)}}},this)}});MediumEditor.extensions.keyboardCommands=KeyboardCommands})();(function(){"use strict";var FontNameForm=MediumEditor.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(event){event.preventDefault();event.stopPropagation();if(!this.isDisplayed()){var fontName=this.document.queryCommandValue("fontName")+"";this.showForm(fontName)}return false},getForm:function(){if(!this.form){this.form=this.createForm()}return this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none";this.getSelect().value=""},showForm:function(fontName){var select=this.getSelect();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();select.value=fontName||"";select.focus()},destroy:function(){if(!this.form){return false}if(this.form.parentNode){this.form.parentNode.removeChild(this.form)}delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontName();this.base.checkSelection()},createForm:function(){var doc=this.document,form=doc.createElement("div"),select=doc.createElement("select"),close=doc.createElement("a"),save=doc.createElement("a"),option;form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-fontname-"+this.getEditorId();this.on(form,"click",this.handleFormClick.bind(this));for(var i=0;i<this.fonts.length;i++){option=doc.createElement("option");option.innerHTML=this.fonts[i];option.value=this.fonts[i];select.appendChild(option)}select.className="medium-editor-toolbar-select";form.appendChild(select);this.on(select,"change",this.handleFontChange.bind(this));save.setAttribute("href","#");save.className="medium-editor-toobar-save";save.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;";form.appendChild(save);this.on(save,"click",this.handleSaveClick.bind(this),true);close.setAttribute("href","#");close.className="medium-editor-toobar-close";close.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;";form.appendChild(close);this.on(close,"click",this.handleCloseClick.bind(this));return form},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){MediumEditor.selection.getSelectedElements(this.document).forEach(function(el){if(el.nodeName.toLowerCase()==="font"&&el.hasAttribute("face")){el.removeAttribute("face")}})},handleFontChange:function(){var font=this.getSelect().value;if(font===""){this.clearFontName()}else{this.execAction("fontName",{value:font})}},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}});MediumEditor.extensions.fontName=FontNameForm})();(function(){"use strict";var FontSizeForm=MediumEditor.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(event){event.preventDefault();event.stopPropagation();if(!this.isDisplayed()){var fontSize=this.document.queryCommandValue("fontSize")+"";this.showForm(fontSize)}return false},getForm:function(){if(!this.form){this.form=this.createForm()}return this.form},isDisplayed:function(){return this.getForm().style.display==="block"},hideForm:function(){this.getForm().style.display="none";this.getInput().value=""},showForm:function(fontSize){var input=this.getInput();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display="block";this.setToolbarPosition();input.value=fontSize||"";input.focus()},destroy:function(){if(!this.form){return false}if(this.form.parentNode){this.form.parentNode.removeChild(this.form)}delete this.form},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection();this.clearFontSize();this.base.checkSelection()},createForm:function(){var doc=this.document,form=doc.createElement("div"),input=doc.createElement("input"),close=doc.createElement("a"),save=doc.createElement("a");form.className="medium-editor-toolbar-form";form.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId();this.on(form,"click",this.handleFormClick.bind(this));input.setAttribute("type","range");input.setAttribute("min","1");input.setAttribute("max","7");input.className="medium-editor-toolbar-input";form.appendChild(input);this.on(input,"change",this.handleSliderChange.bind(this));save.setAttribute("href","#");save.className="medium-editor-toobar-save";save.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-check"></i>':"&#10003;";form.appendChild(save);this.on(save,"click",this.handleSaveClick.bind(this),true);close.setAttribute("href","#");close.className="medium-editor-toobar-close";close.innerHTML=this.getEditorOption("buttonLabels")==="fontawesome"?'<i class="fa fa-times"></i>':"&times;";form.appendChild(close);this.on(close,"click",this.handleCloseClick.bind(this));return form},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){MediumEditor.selection.getSelectedElements(this.document).forEach(function(el){if(el.nodeName.toLowerCase()==="font"&&el.hasAttribute("size")){el.removeAttribute("size")}})},handleSliderChange:function(){var size=this.getInput().value;if(size==="4"){this.clearFontSize()}else{this.execAction("fontSize",{value:size})}},handleFormClick:function(event){event.stopPropagation()},handleSaveClick:function(event){event.preventDefault();this.doFormSave()},handleCloseClick:function(event){event.preventDefault();this.doFormCancel()}});MediumEditor.extensions.fontSize=FontSizeForm})();(function(){"use strict";var pasteBinDefaultContent="%ME_PASTEBIN%",lastRange=null,keyboardPasteEditable=null,stopProp=function(event){event.stopPropagation()};function createReplacements(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function getClipboardContent(event,win,doc){var dataTransfer=event.clipboardData||win.clipboardData||doc.dataTransfer,data={};if(!dataTransfer){return data}if(dataTransfer.getData){var legacyText=dataTransfer.getData("Text");if(legacyText&&legacyText.length>0){data["text/plain"]=legacyText}}if(dataTransfer.types){for(var i=0;i<dataTransfer.types.length;i++){var contentType=dataTransfer.types[i];data[contentType]=dataTransfer.getData(contentType)}}return data}var PasteHandler=MediumEditor.Extension.extend({forcePlainText:true,cleanPastedHTML:false,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],unwrapTags:[],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);if(this.forcePlainText||this.cleanPastedHTML){this.subscribe("editableKeydown",this.handleKeydown.bind(this));this.getEditorElements().forEach(function(element){this.on(element,"paste",this.handlePaste.bind(this))},this);this.subscribe("addElement",this.handleAddElement.bind(this))}},handleAddElement:function(event,editable){this.on(editable,"paste",this.handlePaste.bind(this))},destroy:function(){if(this.forcePlainText||this.cleanPastedHTML){this.removePasteBin()}},handlePaste:function(event,editable){if(event.defaultPrevented){return}var clipboardContent=getClipboardContent(event,this.window,this.document),pastedHTML=clipboardContent["text/html"],pastedPlain=clipboardContent["text/plain"];if(this.window.clipboardData&&event.clipboardData===undefined&&!pastedHTML){pastedHTML=pastedPlain}if(pastedHTML||pastedPlain){event.preventDefault();this.doPaste(pastedHTML,pastedPlain,editable)}},doPaste:function(pastedHTML,pastedPlain,editable){var paragraphs,html="",p;if(this.cleanPastedHTML&&pastedHTML){return this.cleanPaste(pastedHTML)}if(!pastedPlain){return}if(!(this.getEditorOption("disableReturn")||editable&&editable.getAttribute("data-disable-return"))){paragraphs=pastedPlain.split(/[\r\n]+/g);if(paragraphs.length>1){for(p=0;p<paragraphs.length;p+=1){if(paragraphs[p]!==""){html+="<p>"+MediumEditor.util.htmlEntities(paragraphs[p])+"</p>"}}}else{html=MediumEditor.util.htmlEntities(paragraphs[0])}}else{html=MediumEditor.util.htmlEntities(pastedPlain)}MediumEditor.util.insertHTMLCommand(this.document,html)},handlePasteBinPaste:function(event){if(event.defaultPrevented){this.removePasteBin();return}var clipboardContent=getClipboardContent(event,this.window,this.document),pastedHTML=clipboardContent["text/html"],pastedPlain=clipboardContent["text/plain"],editable=keyboardPasteEditable;if(!this.cleanPastedHTML||pastedHTML){event.preventDefault();this.removePasteBin();this.doPaste(pastedHTML,pastedPlain,editable);this.trigger("editablePaste",{currentTarget:editable,target:editable},editable);return}setTimeout(function(){if(this.cleanPastedHTML){pastedHTML=this.getPasteBinHtml()}this.removePasteBin();this.doPaste(pastedHTML,pastedPlain,editable);this.trigger("editablePaste",{currentTarget:editable,target:editable},editable)}.bind(this),0)},handleKeydown:function(event,editable){if(!(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.V)&&MediumEditor.util.isMetaCtrlKey(event))){return}event.stopImmediatePropagation();this.removePasteBin();this.createPasteBin(editable)},createPasteBin:function(editable){var rects,range=MediumEditor.selection.getSelectionRange(this.document),top=this.window.pageYOffset;keyboardPasteEditable=editable;if(range){rects=range.getClientRects();if(rects.length){top+=rects[0].top}else if(range.startContainer.getBoundingClientRect!==undefined){top+=range.startContainer.getBoundingClientRect().top}else{top+=range.getBoundingClientRect().top}}lastRange=range;var pasteBinElm=this.document.createElement("div");pasteBinElm.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now();pasteBinElm.setAttribute("style","border: 1px red solid; position: absolute; top: "+top+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0");pasteBinElm.setAttribute("contentEditable",true);pasteBinElm.innerHTML=pasteBinDefaultContent;this.document.body.appendChild(pasteBinElm);this.on(pasteBinElm,"focus",stopProp);this.on(pasteBinElm,"focusin",stopProp);this.on(pasteBinElm,"focusout",stopProp);pasteBinElm.focus();MediumEditor.selection.selectNode(pasteBinElm,this.document);if(!this.boundHandlePaste){this.boundHandlePaste=this.handlePasteBinPaste.bind(this)}this.on(pasteBinElm,"paste",this.boundHandlePaste)},removePasteBin:function(){if(null!==lastRange){MediumEditor.selection.selectRange(this.document,lastRange);lastRange=null}if(null!==keyboardPasteEditable){keyboardPasteEditable=null}var pasteBinElm=this.getPasteBin();if(!pasteBinElm){return}if(pasteBinElm){this.off(pasteBinElm,"focus",stopProp);this.off(pasteBinElm,"focusin",stopProp);this.off(pasteBinElm,"focusout",stopProp);this.off(pasteBinElm,"paste",this.boundHandlePaste);pasteBinElm.parentElement.removeChild(pasteBinElm)}},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var pasteBinElm=this.getPasteBin();if(!pasteBinElm){return false}if(pasteBinElm.firstChild&&pasteBinElm.firstChild.id==="mcepastebin"){return false}var pasteBinHtml=pasteBinElm.innerHTML;if(!pasteBinHtml||pasteBinHtml===pasteBinDefaultContent){return false}return pasteBinHtml},cleanPaste:function(text){var i,elList,tmp,workEl,multiline=/<p|<br|<div/.test(text),replacements=[].concat(this.preCleanReplacements||[],createReplacements(),this.cleanReplacements||[]);for(i=0;i<replacements.length;i+=1){text=text.replace(replacements[i][0],replacements[i][1])}if(!multiline){return this.pasteHTML(text)}tmp=this.document.createElement("div");tmp.innerHTML="<p>"+text.split("<br><br>").join("</p><p>")+"</p>";elList=tmp.querySelectorAll("a,p,div,br");for(i=0;i<elList.length;i+=1){workEl=elList[i];workEl.innerHTML=workEl.innerHTML.replace(/\n/gi," ");switch(workEl.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(workEl);break;case"br":this.filterLineBreak(workEl);break}}this.pasteHTML(tmp.innerHTML)},pasteHTML:function(html,options){options=MediumEditor.util.defaults({},options,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags,unwrapTags:this.unwrapTags});var elList,workEl,i,fragmentBody,pasteBlock=this.document.createDocumentFragment();pasteBlock.appendChild(this.document.createElement("body"));fragmentBody=pasteBlock.querySelector("body");fragmentBody.innerHTML=html;this.cleanupSpans(fragmentBody);elList=fragmentBody.querySelectorAll("*");for(i=0;i<elList.length;i+=1){workEl=elList[i];if("a"===workEl.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")){MediumEditor.util.setTargetBlank(workEl)}MediumEditor.util.cleanupAttrs(workEl,options.cleanAttrs);MediumEditor.util.cleanupTags(workEl,options.cleanTags);MediumEditor.util.unwrapTags(workEl,options.unwrapTags)}MediumEditor.util.insertHTMLCommand(this.document,fragmentBody.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(el){return el&&(el.nodeName.toLowerCase()==="p"||el.nodeName.toLowerCase()==="div")},filterCommonBlocks:function(el){if(/^\s*$/.test(el.textContent)&&el.parentNode){el.parentNode.removeChild(el)}},filterLineBreak:function(el){if(this.isCommonBlock(el.previousElementSibling)){this.removeWithParent(el)}else if(this.isCommonBlock(el.parentNode)&&(el.parentNode.firstChild===el||el.parentNode.lastChild===el)){this.removeWithParent(el)}else if(el.parentNode&&el.parentNode.childElementCount===1&&el.parentNode.textContent===""){this.removeWithParent(el)}},removeWithParent:function(el){if(el&&el.parentNode){if(el.parentNode.parentNode&&el.parentNode.childElementCount===1){el.parentNode.parentNode.removeChild(el.parentNode)}else{el.parentNode.removeChild(el)}}},cleanupSpans:function(containerEl){var i,el,newEl,spans=containerEl.querySelectorAll(".replace-with"),isCEF=function(el){return el&&el.nodeName!=="#text"&&el.getAttribute("contenteditable")==="false"};for(i=0;i<spans.length;i+=1){el=spans[i];newEl=this.document.createElement(el.classList.contains("bold")?"b":"i");if(el.classList.contains("bold")&&el.classList.contains("italic")){newEl.innerHTML="<i>"+el.innerHTML+"</i>"}else{newEl.innerHTML=el.innerHTML}el.parentNode.replaceChild(newEl,el)}spans=containerEl.querySelectorAll("span");for(i=0;i<spans.length;i+=1){el=spans[i];if(MediumEditor.util.traverseUp(el,isCEF)){return false}MediumEditor.util.unwrap(el,this.document)}}});MediumEditor.extensions.paste=PasteHandler})();(function(){"use strict";var Placeholder=MediumEditor.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:true,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.initPlaceholders();this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(event,editable){this.initElement(editable)},initElement:function(el){if(!el.getAttribute("data-placeholder")){el.setAttribute("data-placeholder",this.text)}this.updatePlaceholder(el)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(event,editable){this.cleanupElement(editable)},cleanupElement:function(el){if(el.getAttribute("data-placeholder")===this.text){el.removeAttribute("data-placeholder")}},showPlaceholder:function(el){if(el){if(MediumEditor.util.isFF&&el.childNodes.length===0){el.classList.add("medium-editor-placeholder-relative");el.classList.remove("medium-editor-placeholder")}else{el.classList.add("medium-editor-placeholder");el.classList.remove("medium-editor-placeholder-relative")}}},hidePlaceholder:function(el){if(el){el.classList.remove("medium-editor-placeholder");el.classList.remove("medium-editor-placeholder-relative")}},updatePlaceholder:function(el,dontShow){if(el.querySelector("img, blockquote, ul, ol, table")||el.textContent.replace(/^\s+|\s+$/g,"")!==""){return this.hidePlaceholder(el)}if(!dontShow){this.showPlaceholder(el)}},attachEventHandlers:function(){if(this.hideOnClick){this.subscribe("focus",this.handleFocus.bind(this))}this.subscribe("editableInput",this.handleInput.bind(this));this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("addElement",this.handleAddElement.bind(this));this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(event,element){var dontShow=this.hideOnClick&&element===this.base.getFocusedElement();this.updatePlaceholder(element,dontShow)},handleFocus:function(event,element){this.hidePlaceholder(element)},handleBlur:function(event,element){this.updatePlaceholder(element)}});MediumEditor.extensions.placeholder=Placeholder})();(function(){"use strict";var Toolbar=MediumEditor.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:true,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:false,static:false,sticky:false,stickyTopOffset:0,updateOnEmptySelection:false,relativeContainer:null,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.initThrottledMethods();if(!this.relativeContainer){this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())}else{this.relativeContainer.appendChild(this.getToolbarElement())}},forEachExtension:function(iterator,context){return this.base.extensions.forEach(function(command){if(command===this){return}return iterator.apply(context||this,arguments)},this)},createToolbar:function(){var toolbar=this.document.createElement("div");toolbar.id="medium-editor-toolbar-"+this.getEditorId();toolbar.className="medium-editor-toolbar";if(this.static){toolbar.className+=" static-toolbar"}else if(this.relativeContainer){toolbar.className+=" medium-editor-relative-toolbar"}else{toolbar.className+=" medium-editor-stalker-toolbar"}toolbar.appendChild(this.createToolbarButtons());this.forEachExtension(function(extension){if(extension.hasForm){toolbar.appendChild(extension.getForm())}});this.attachEventHandlers();return toolbar},createToolbarButtons:function(){var ul=this.document.createElement("ul"),li,btn,buttons,extension,buttonName,buttonOpts;ul.id="medium-editor-toolbar-actions"+this.getEditorId();ul.className="medium-editor-toolbar-actions";ul.style.display="block";this.buttons.forEach(function(button){if(typeof button==="string"){buttonName=button;buttonOpts=null}else{buttonName=button.name;buttonOpts=button}extension=this.base.addBuiltInExtension(buttonName,buttonOpts);if(extension&&typeof extension.getButton==="function"){btn=extension.getButton(this.base);li=this.document.createElement("li");if(MediumEditor.util.isElement(btn)){li.appendChild(btn)}else{li.innerHTML=btn}ul.appendChild(li)}},this);buttons=ul.querySelectorAll("button");if(buttons.length>0){buttons[0].classList.add(this.firstButtonClass);buttons[buttons.length-1].classList.add(this.lastButtonClass)}return ul},destroy:function(){if(this.toolbar){if(this.toolbar.parentNode){this.toolbar.parentNode.removeChild(this.toolbar)}delete this.toolbar}},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){if(!this.toolbar){this.toolbar=this.createToolbar()}return this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=MediumEditor.util.throttle(function(){if(this.base.isActive){this.positionToolbarIfShown()}}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this));this.subscribe("focus",this.handleFocus.bind(this));this.subscribe("editableClick",this.handleEditableClick.bind(this));this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this));this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this));if(this.static&&this.sticky){this.on(this.window,"scroll",this.handleWindowScroll.bind(this),true)}this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(event){if(event&&event.target&&MediumEditor.util.isDescendant(this.getToolbarElement(),event.target)){return false}this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout);clearTimeout(this.delayShowTimeout);this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout);if(!this.isDisplayed()){this.getToolbarElement().classList.add("medium-editor-toolbar-active");this.trigger("showToolbar",{},this.base.getFocusedElement())}},hideToolbar:function(){if(this.isDisplayed()){this.getToolbarElement().classList.remove("medium-editor-toolbar-active");this.trigger("hideToolbar",{},this.base.getFocusedElement())}},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==="block"},hideToolbarDefaultActions:function(){if(this.isToolbarDefaultActionsDisplayed()){this.getToolbarActionsElement().style.display="none"}},showToolbarDefaultActions:function(){this.hideExtensionForms();if(!this.isToolbarDefaultActionsDisplayed()){this.getToolbarActionsElement().style.display="block"}this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(extension){if(extension.hasForm&&extension.isDisplayed()){extension.hideForm()}})},multipleBlockElementsSelected:function(){var regexEmptyHTMLTags=/<[^\/>][^>]*><\/[^>]+>/gim,regexBlockElements=new RegExp("<("+MediumEditor.util.blockContainerElementNames.join("|")+")[^>]*>","g"),selectionHTML=MediumEditor.selection.getSelectionHtml(this.document).replace(regexEmptyHTMLTags,""),hasMultiParagraphs=selectionHTML.match(regexBlockElements);return!!hasMultiParagraphs&&hasMultiParagraphs.length>1},modifySelection:function(){var selection=this.window.getSelection(),selectionRange=selection.getRangeAt(0);if(this.standardizeSelectionStart&&selectionRange.startContainer.nodeValue&&selectionRange.startOffset===selectionRange.startContainer.nodeValue.length){var adjacentNode=MediumEditor.util.findAdjacentTextNodeWithContent(MediumEditor.selection.getSelectionElement(this.window),selectionRange.startContainer,this.document);if(adjacentNode){var offset=0;while(adjacentNode.nodeValue.substr(offset,1).trim().length===0){offset=offset+1}selectionRange=MediumEditor.selection.select(this.document,adjacentNode,offset,selectionRange.endContainer,selectionRange.endOffset)}}},checkState:function(){if(this.base.preventSelectionUpdates){return}if(!this.base.getFocusedElement()||MediumEditor.selection.selectionInContentEditableFalse(this.window)){return this.hideToolbar()}var selectionElement=MediumEditor.selection.getSelectionElement(this.window);if(!selectionElement||this.getEditorElements().indexOf(selectionElement)===-1||selectionElement.getAttribute("data-disable-toolbar")){return this.hideToolbar()}if(this.updateOnEmptySelection&&this.static){return this.showAndUpdateToolbar()}if(!MediumEditor.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===false&&this.multipleBlockElementsSelected()){return this.hideToolbar()}this.showAndUpdateToolbar()},showAndUpdateToolbar:function(){this.modifySelection();this.setToolbarButtonStates();this.trigger("positionToolbar",{},this.base.getFocusedElement());this.showToolbarDefaultActions();this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(extension){if(typeof extension.isActive==="function"&&typeof extension.setInactive==="function"){extension.setInactive()}});this.checkActiveButtons()},checkActiveButtons:function(){var manualStateChecks=[],queryState=null,selectionRange=MediumEditor.selection.getSelectionRange(this.document),parentNode,updateExtensionState=function(extension){if(typeof extension.checkState==="function"){extension.checkState(parentNode)}else if(typeof extension.isActive==="function"&&typeof extension.isAlreadyApplied==="function"&&typeof extension.setActive==="function"){if(!extension.isActive()&&extension.isAlreadyApplied(parentNode)){extension.setActive()}}};if(!selectionRange){return}this.forEachExtension(function(extension){if(typeof extension.queryCommandState==="function"){queryState=extension.queryCommandState();if(queryState!==null){if(queryState&&typeof extension.setActive==="function"){extension.setActive()}return}}manualStateChecks.push(extension)});parentNode=MediumEditor.selection.getSelectedParentElement(selectionRange);if(!this.getEditorElements().some(function(element){return MediumEditor.util.isDescendant(element,parentNode,true)})){return}while(parentNode){manualStateChecks.forEach(updateExtensionState);if(MediumEditor.util.isMediumEditorElement(parentNode)){break}parentNode=parentNode.parentNode}},positionToolbarIfShown:function(){if(this.isDisplayed()){this.setToolbarPosition()}},setToolbarPosition:function(){var container=this.base.getFocusedElement(),selection=this.window.getSelection();if(!container){return this}if(this.static||!selection.isCollapsed){this.showToolbar();if(!this.relativeContainer){if(this.static){this.positionStaticToolbar(container)}else{this.positionToolbar(selection)}}this.trigger("positionedToolbar",{},this.base.getFocusedElement())}},positionStaticToolbar:function(container){this.getToolbarElement().style.left="0";var scrollTop=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,windowWidth=this.window.innerWidth,toolbarElement=this.getToolbarElement(),containerRect=container.getBoundingClientRect(),containerTop=containerRect.top+scrollTop,containerCenter=containerRect.left+containerRect.width/2,toolbarHeight=toolbarElement.offsetHeight,toolbarWidth=toolbarElement.offsetWidth,halfOffsetWidth=toolbarWidth/2,targetLeft;if(this.sticky){if(scrollTop>containerTop+container.offsetHeight-toolbarHeight-this.stickyTopOffset){toolbarElement.style.top=containerTop+container.offsetHeight-toolbarHeight+"px";toolbarElement.classList.remove("medium-editor-sticky-toolbar")}else if(scrollTop>containerTop-toolbarHeight-this.stickyTopOffset){toolbarElement.classList.add("medium-editor-sticky-toolbar");toolbarElement.style.top=this.stickyTopOffset+"px"}else{toolbarElement.classList.remove("medium-editor-sticky-toolbar");toolbarElement.style.top=containerTop-toolbarHeight+"px"}}else{toolbarElement.style.top=containerTop-toolbarHeight+"px"}switch(this.align){case"left":targetLeft=containerRect.left;break;case"right":targetLeft=containerRect.right-toolbarWidth;break;case"center":targetLeft=containerCenter-halfOffsetWidth;break}if(targetLeft<0){targetLeft=0}else if(targetLeft+toolbarWidth>windowWidth){targetLeft=windowWidth-Math.ceil(toolbarWidth)-1}toolbarElement.style.left=targetLeft+"px"},positionToolbar:function(selection){this.getToolbarElement().style.left="0";this.getToolbarElement().style.right="initial";var range=selection.getRangeAt(0),boundary=range.getBoundingClientRect();if(!boundary||boundary.height===0&&boundary.width===0&&range.startContainer===range.endContainer){if(range.startContainer.nodeType===1&&range.startContainer.querySelector("img")){boundary=range.startContainer.querySelector("img").getBoundingClientRect()}else{boundary=range.startContainer.getBoundingClientRect()}}var containerWidth=this.window.innerWidth,toolbarElement=this.getToolbarElement(),toolbarHeight=toolbarElement.offsetHeight,toolbarWidth=toolbarElement.offsetWidth,halfOffsetWidth=toolbarWidth/2,buttonHeight=50,defaultLeft=this.diffLeft-halfOffsetWidth,elementsContainer=this.getEditorOption("elementsContainer"),elementsContainerAbsolute=["absolute","fixed"].indexOf(window.getComputedStyle(elementsContainer).getPropertyValue("position"))>-1,positions={},relativeBoundary={},middleBoundary,elementsContainerBoundary;if(elementsContainerAbsolute){elementsContainerBoundary=elementsContainer.getBoundingClientRect();["top","left"].forEach(function(key){relativeBoundary[key]=boundary[key]-elementsContainerBoundary[key]});relativeBoundary.width=boundary.width;relativeBoundary.height=boundary.height;boundary=relativeBoundary;containerWidth=elementsContainerBoundary.width;positions.top=elementsContainer.scrollTop}else{positions.top=this.window.pageYOffset}middleBoundary=boundary.left+boundary.width/2;positions.top+=boundary.top-toolbarHeight;if(boundary.top<buttonHeight){toolbarElement.classList.add("medium-toolbar-arrow-over");toolbarElement.classList.remove("medium-toolbar-arrow-under");positions.top+=buttonHeight+boundary.height-this.diffTop}else{toolbarElement.classList.add("medium-toolbar-arrow-under");toolbarElement.classList.remove("medium-toolbar-arrow-over");positions.top+=this.diffTop}if(middleBoundary<halfOffsetWidth){positions.left=defaultLeft+halfOffsetWidth;positions.right="initial"}else if(containerWidth-middleBoundary<halfOffsetWidth){positions.left="auto";positions.right=0}else{positions.left=defaultLeft+middleBoundary;positions.right="initial"}["top","left","right"].forEach(function(key){toolbarElement.style[key]=positions[key]+(isNaN(positions[key])?"":"px")})}});MediumEditor.extensions.toolbar=Toolbar})();(function(){"use strict";var ImageDragging=MediumEditor.Extension.extend({init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe("editableDrag",this.handleDrag.bind(this));this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(event){var className="medium-editor-dragover";event.preventDefault();event.dataTransfer.dropEffect="copy";if(event.type==="dragover"){event.target.classList.add(className)}else if(event.type==="dragleave"){event.target.classList.remove(className)}},handleDrop:function(event){var className="medium-editor-dragover",files;event.preventDefault();event.stopPropagation();if(event.dataTransfer.files){files=Array.prototype.slice.call(event.dataTransfer.files,0);files.some(function(file){if(file.type.match("image")){var fileReader,id;fileReader=new FileReader;fileReader.readAsDataURL(file);id="medium-img-"+ +new Date;MediumEditor.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+id+'" />');fileReader.onload=function(){var img=this.document.getElementById(id);if(img){img.removeAttribute("id");img.removeAttribute("class");img.src=fileReader.result}}.bind(this)}}.bind(this))}event.target.classList.remove(className)}});MediumEditor.extensions.imageDragging=ImageDragging})();(function(){"use strict";function handleDisableExtraSpaces(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),textContent=node.textContent,caretPositions=MediumEditor.selection.getCaretOffsets(node);if(textContent[caretPositions.left-1]===undefined||textContent[caretPositions.left-1].trim()===""||textContent[caretPositions.left]!==undefined&&textContent[caretPositions.left].trim()===""){event.preventDefault()}}function handleDisabledEnterKeydown(event,element){if(this.options.disableReturn||element.getAttribute("data-disable-return")){event.preventDefault()}else if(this.options.disableDoubleReturn||element.getAttribute("data-disable-double-return")){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument);if(node&&node.textContent.trim()===""&&node.nodeName.toLowerCase()!=="li"||node.previousElementSibling&&node.previousElementSibling.nodeName.toLowerCase()!=="br"&&node.previousElementSibling.textContent.trim()===""){event.preventDefault()}}}function handleTabKeydown(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),tag=node&&node.nodeName.toLowerCase();if(tag==="pre"){event.preventDefault();MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,"    ")}if(MediumEditor.util.isListItem(node)){event.preventDefault();if(event.shiftKey){this.options.ownerDocument.execCommand("outdent",false,null)}else{this.options.ownerDocument.execCommand("indent",false,null)}}}function handleBlockDeleteKeydowns(event){var p,node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),tagName=node.nodeName.toLowerCase(),isEmpty=/^(\s+|<br\/?>)?$/i,isHeader=/h\d/i;if(MediumEditor.util.isKey(event,[MediumEditor.util.keyCode.BACKSPACE,MediumEditor.util.keyCode.ENTER])&&node.previousElementSibling&&isHeader.test(tagName)&&MediumEditor.selection.getCaretOffsets(node).left===0){if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&isEmpty.test(node.previousElementSibling.innerHTML)){node.previousElementSibling.parentNode.removeChild(node.previousElementSibling);event.preventDefault()}else if(!this.options.disableDoubleReturn&&MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)){p=this.options.ownerDocument.createElement("p");p.innerHTML="<br>";node.previousElementSibling.parentNode.insertBefore(p,node);event.preventDefault()}}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.DELETE)&&node.nextElementSibling&&node.previousElementSibling&&!isHeader.test(tagName)&&isEmpty.test(node.innerHTML)&&isHeader.test(node.nextElementSibling.nodeName.toLowerCase())){MediumEditor.selection.moveCursor(this.options.ownerDocument,node.nextElementSibling);node.previousElementSibling.parentNode.removeChild(node);event.preventDefault()}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&tagName==="li"&&isEmpty.test(node.innerHTML)&&!node.previousElementSibling&&!node.parentElement.previousElementSibling&&node.nextElementSibling&&node.nextElementSibling.nodeName.toLowerCase()==="li"){p=this.options.ownerDocument.createElement("p");p.innerHTML="<br>";node.parentElement.parentElement.insertBefore(p,node.parentElement);MediumEditor.selection.moveCursor(this.options.ownerDocument,p);node.parentElement.removeChild(node);event.preventDefault()}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&MediumEditor.util.getClosestTag(node,"blockquote")!==false&&MediumEditor.selection.getCaretOffsets(node).left===0){event.preventDefault();MediumEditor.util.execFormatBlock(this.options.ownerDocument,"p")}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)&&MediumEditor.util.getClosestTag(node,"blockquote")!==false&&MediumEditor.selection.getCaretOffsets(node).right===0){p=this.options.ownerDocument.createElement("p");p.innerHTML="<br>";node.parentElement.insertBefore(p,node.nextSibling);MediumEditor.selection.moveCursor(this.options.ownerDocument,p);event.preventDefault()}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&MediumEditor.util.isMediumEditorElement(node.parentElement)&&!node.previousElementSibling&&node.nextElementSibling&&isEmpty.test(node.innerHTML)){event.preventDefault();MediumEditor.selection.moveCursor(this.options.ownerDocument,node.nextSibling);node.parentElement.removeChild(node)}}function handleKeyup(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),tagName;if(!node){return}if(MediumEditor.util.isMediumEditorElement(node)&&node.children.length===0&&!MediumEditor.util.isBlockContainer(node)){this.options.ownerDocument.execCommand("formatBlock",false,"p")}if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)&&!MediumEditor.util.isListItem(node)&&!MediumEditor.util.isBlockContainer(node)){tagName=node.nodeName.toLowerCase();if(tagName==="a"){this.options.ownerDocument.execCommand("unlink",false,null)}else if(!event.shiftKey&&!event.ctrlKey){this.options.ownerDocument.execCommand("formatBlock",false,"p")}}}function handleEditableInput(event,editable){var textarea=editable.parentNode.querySelector('textarea[medium-editor-textarea-id="'+editable.getAttribute("medium-editor-textarea-id")+'"]');if(textarea){textarea.value=editable.innerHTML.trim()}}function addToEditors(win){if(!win._mediumEditors){win._mediumEditors=[null]}if(!this.id){this.id=win._mediumEditors.length}win._mediumEditors[this.id]=this}function removeFromEditors(win){if(!win._mediumEditors||!win._mediumEditors[this.id]){return}win._mediumEditors[this.id]=null}function createElementsArray(selector,doc,filterEditorElements){var elements=[];if(!selector){selector=[]}if(typeof selector==="string"){selector=doc.querySelectorAll(selector)}if(MediumEditor.util.isElement(selector)){selector=[selector]}if(filterEditorElements){for(var i=0;i<selector.length;i++){var el=selector[i];if(MediumEditor.util.isElement(el)&&!el.getAttribute("data-medium-editor-element")&&!el.getAttribute("medium-editor-textarea-id")){elements.push(el)}}}else{elements=Array.prototype.slice.apply(selector)}return elements}function cleanupTextareaElement(element){var textarea=element.parentNode.querySelector('textarea[medium-editor-textarea-id="'+element.getAttribute("medium-editor-textarea-id")+'"]');if(textarea){textarea.classList.remove("medium-editor-hidden");textarea.removeAttribute("medium-editor-textarea-id")}if(element.parentNode){element.parentNode.removeChild(element)}}function setExtensionDefaults(extension,defaults){Object.keys(defaults).forEach(function(prop){if(extension[prop]===undefined){extension[prop]=defaults[prop]}});return extension}function initExtension(extension,name,instance){var extensionDefaults={window:instance.options.contentWindow,document:instance.options.ownerDocument,base:instance};extension=setExtensionDefaults(extension,extensionDefaults);if(typeof extension.init==="function"){extension.init()}if(!extension.name){extension.name=name}return extension}function isToolbarEnabled(){if(this.elements.every(function(element){return!!element.getAttribute("data-disable-toolbar")})){return false}return this.options.toolbar!==false}function isAnchorPreviewEnabled(){if(!isToolbarEnabled.call(this)){return false}return this.options.anchorPreview!==false}function isPlaceholderEnabled(){return this.options.placeholder!==false}function isAutoLinkEnabled(){return this.options.autoLink!==false}function isImageDraggingEnabled(){return this.options.imageDragging!==false}function isKeyboardCommandsEnabled(){return this.options.keyboardCommands!==false}function shouldUseFileDraggingExtension(){return!this.options.extensions["imageDragging"]}function createContentEditable(textarea){var div=this.options.ownerDocument.createElement("div"),now=Date.now(),uniqueId="medium-editor-"+now,atts=textarea.attributes;while(this.options.ownerDocument.getElementById(uniqueId)){now++;uniqueId="medium-editor-"+now}div.className=textarea.className;div.id=uniqueId;div.innerHTML=textarea.value;textarea.setAttribute("medium-editor-textarea-id",uniqueId);for(var i=0,n=atts.length;i<n;i++){if(!div.hasAttribute(atts[i].nodeName)){div.setAttribute(atts[i].nodeName,atts[i].value)}}if(textarea.form){this.on(textarea.form,"reset",function(event){if(!event.defaultPrevented){this.resetContent(this.options.ownerDocument.getElementById(uniqueId))}}.bind(this))}textarea.classList.add("medium-editor-hidden");textarea.parentNode.insertBefore(div,textarea);return div}function initElement(element,editorId){if(!element.getAttribute("data-medium-editor-element")){if(element.nodeName.toLowerCase()==="textarea"){element=createContentEditable.call(this,element);if(!this.instanceHandleEditableInput){this.instanceHandleEditableInput=handleEditableInput.bind(this);this.subscribe("editableInput",this.instanceHandleEditableInput)}}if(!this.options.disableEditing&&!element.getAttribute("data-disable-editing")){element.setAttribute("contentEditable",true);element.setAttribute("spellcheck",this.options.spellcheck)}if(!this.instanceHandleEditableKeydownEnter){if(element.getAttribute("data-disable-return")||element.getAttribute("data-disable-double-return")){this.instanceHandleEditableKeydownEnter=handleDisabledEnterKeydown.bind(this);this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)}}if(!this.options.disableReturn&&!element.getAttribute("data-disable-return")){this.on(element,"keyup",handleKeyup.bind(this))}var elementId=MediumEditor.util.guid();element.setAttribute("data-medium-editor-element",true);element.classList.add("medium-editor-element");element.setAttribute("role","textbox");element.setAttribute("aria-multiline",true);element.setAttribute("data-medium-editor-editor-index",editorId);element.setAttribute("medium-editor-index",elementId);initialContent[elementId]=element.innerHTML;this.events.attachAllEventsToElement(element)}return element}function attachHandlers(){this.subscribe("editableKeydownTab",handleTabKeydown.bind(this));this.subscribe("editableKeydownDelete",handleBlockDeleteKeydowns.bind(this));this.subscribe("editableKeydownEnter",handleBlockDeleteKeydowns.bind(this));if(this.options.disableExtraSpaces){this.subscribe("editableKeydownSpace",handleDisableExtraSpaces.bind(this))}if(!this.instanceHandleEditableKeydownEnter){if(this.options.disableReturn||this.options.disableDoubleReturn){this.instanceHandleEditableKeydownEnter=handleDisabledEnterKeydown.bind(this);this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)}}}function initExtensions(){this.extensions=[];Object.keys(this.options.extensions).forEach(function(name){if(name!=="toolbar"&&this.options.extensions[name]){this.extensions.push(initExtension(this.options.extensions[name],name,this))}},this);if(shouldUseFileDraggingExtension.call(this)){var opts=this.options.fileDragging;if(!opts){opts={};if(!isImageDraggingEnabled.call(this)){opts.allowedTypes=[]}}this.addBuiltInExtension("fileDragging",opts)}var builtIns={paste:true,"anchor-preview":isAnchorPreviewEnabled.call(this),autoLink:isAutoLinkEnabled.call(this),keyboardCommands:isKeyboardCommandsEnabled.call(this),placeholder:isPlaceholderEnabled.call(this)};Object.keys(builtIns).forEach(function(name){if(builtIns[name]){this.addBuiltInExtension(name)}},this);var toolbarExtension=this.options.extensions["toolbar"];if(!toolbarExtension&&isToolbarEnabled.call(this)){var toolbarOptions=MediumEditor.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});toolbarExtension=new MediumEditor.extensions.toolbar(toolbarOptions)}if(toolbarExtension){this.extensions.push(initExtension(toolbarExtension,"toolbar",this))}}function mergeOptions(defaults,options){var deprecatedProperties=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];if(options){deprecatedProperties.forEach(function(pair){if(options.hasOwnProperty(pair[0])&&options[pair[0]]!==undefined){MediumEditor.util.deprecated(pair[0],pair[1],"v6.0.0")}})}return MediumEditor.util.defaults({},options,defaults)}function execActionInternal(action,opts){var appendAction=/^append-(.+)$/gi,justifyAction=/justify([A-Za-z]*)$/g,match,cmdValueArgument;match=appendAction.exec(action);if(match){return MediumEditor.util.execFormatBlock(this.options.ownerDocument,match[1])}if(action==="fontSize"){if(opts.size){MediumEditor.util.deprecated(".size option for fontSize command",".value","6.0.0")}cmdValueArgument=opts.value||opts.size;return this.options.ownerDocument.execCommand("fontSize",false,cmdValueArgument)}if(action==="fontName"){if(opts.name){MediumEditor.util.deprecated(".name option for fontName command",".value","6.0.0")}cmdValueArgument=opts.value||opts.name;return this.options.ownerDocument.execCommand("fontName",false,cmdValueArgument)}if(action==="createLink"){return this.createLink(opts)}if(action==="image"){var src=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",false,src)}if(action==="html"){var html=this.options.contentWindow.getSelection().toString().trim();return MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,html)}if(justifyAction.exec(action)){var result=this.options.ownerDocument.execCommand(action,false,null),parentNode=MediumEditor.selection.getSelectedParentElement(MediumEditor.selection.getSelectionRange(this.options.ownerDocument));if(parentNode){cleanupJustifyDivFragments.call(this,MediumEditor.util.getTopBlockContainer(parentNode))}return result}cmdValueArgument=opts&&opts.value;return this.options.ownerDocument.execCommand(action,false,cmdValueArgument)}function cleanupJustifyDivFragments(blockContainer){if(!blockContainer){return}var textAlign,childDivs=Array.prototype.slice.call(blockContainer.childNodes).filter(function(element){var isDiv=element.nodeName.toLowerCase()==="div";if(isDiv&&!textAlign){textAlign=element.style.textAlign}return isDiv});if(childDivs.length){this.saveSelection();childDivs.forEach(function(div){if(div.style.textAlign===textAlign){var lastChild=div.lastChild;if(lastChild){MediumEditor.util.unwrap(div,this.options.ownerDocument);var br=this.options.ownerDocument.createElement("BR");lastChild.parentNode.insertBefore(br,lastChild.nextSibling)}}},this);blockContainer.style.textAlign=textAlign;this.restoreSelection()}}var initialContent={};MediumEditor.prototype={init:function(elements,options){this.options=mergeOptions.call(this,this.defaults,options);this.origElements=elements;if(!this.options.elementsContainer){this.options.elementsContainer=this.options.ownerDocument.body}return this.setup()},setup:function(){if(this.isActive){return}addToEditors.call(this,this.options.contentWindow);this.events=new MediumEditor.Events(this);this.elements=[];this.addElements(this.origElements);if(this.elements.length===0){return}this.isActive=true;initExtensions.call(this);attachHandlers.call(this)},destroy:function(){if(!this.isActive){return}this.isActive=false;this.extensions.forEach(function(extension){if(typeof extension.destroy==="function"){extension.destroy()}},this);this.events.destroy();this.elements.forEach(function(element){if(this.options.spellcheck){element.innerHTML=element.innerHTML}element.removeAttribute("contentEditable");element.removeAttribute("spellcheck");element.removeAttribute("data-medium-editor-element");element.classList.remove("medium-editor-element");element.removeAttribute("role");element.removeAttribute("aria-multiline");element.removeAttribute("medium-editor-index");element.removeAttribute("data-medium-editor-editor-index");if(element.getAttribute("medium-editor-textarea-id")){cleanupTextareaElement(element)}},this);this.elements=[];this.instanceHandleEditableKeydownEnter=null;this.instanceHandleEditableInput=null;removeFromEditors.call(this,this.options.contentWindow)},on:function(target,event,listener,useCapture){this.events.attachDOMEvent(target,event,listener,useCapture);return this},off:function(target,event,listener,useCapture){this.events.detachDOMEvent(target,event,listener,useCapture);return this},subscribe:function(event,listener){this.events.attachCustomEvent(event,listener);return this},unsubscribe:function(event,listener){this.events.detachCustomEvent(event,listener);return this},trigger:function(name,data,editable){this.events.triggerCustomEvent(name,data,editable);return this},delay:function(fn){var self=this;return setTimeout(function(){if(self.isActive){fn()}},this.options.delay)},serialize:function(){var i,elementid,content={},len=this.elements.length;for(i=0;i<len;i+=1){elementid=this.elements[i].id!==""?this.elements[i].id:"element-"+i;content[elementid]={value:this.elements[i].innerHTML.trim()}}return content},getExtensionByName:function(name){var extension;if(this.extensions&&this.extensions.length){this.extensions.some(function(ext){if(ext.name===name){extension=ext;return true}return false})}return extension},addBuiltInExtension:function(name,opts){var extension=this.getExtensionByName(name),merged;if(extension){return extension}switch(name){case"anchor":merged=MediumEditor.util.extend({},this.options.anchor,opts);extension=new MediumEditor.extensions.anchor(merged);break;case"anchor-preview":extension=new MediumEditor.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":extension=new MediumEditor.extensions.autoLink;break;case"fileDragging":extension=new MediumEditor.extensions.fileDragging(opts);break;case"fontname":extension=new MediumEditor.extensions.fontName(this.options.fontName);break;case"fontsize":extension=new MediumEditor.extensions.fontSize(opts);break;case"keyboardCommands":extension=new MediumEditor.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":extension=new MediumEditor.extensions.paste(this.options.paste);break;case"placeholder":extension=new MediumEditor.extensions.placeholder(this.options.placeholder);break;default:if(MediumEditor.extensions.button.isBuiltInButton(name)){if(opts){merged=MediumEditor.util.defaults({},opts,MediumEditor.extensions.button.prototype.defaults[name]);extension=new MediumEditor.extensions.button(merged)}else{extension=new MediumEditor.extensions.button(name)}}}if(extension){this.extensions.push(initExtension(extension,name,this))}return extension},stopSelectionUpdates:function(){this.preventSelectionUpdates=true},startSelectionUpdates:function(){this.preventSelectionUpdates=false},checkSelection:function(){var toolbar=this.getExtensionByName("toolbar");if(toolbar){toolbar.checkState()}return this},queryCommandState:function(action){var fullAction=/^full-(.+)$/gi,match,queryState=null;match=fullAction.exec(action);if(match){action=match[1]}try{queryState=this.options.ownerDocument.queryCommandState(action)}catch(exc){queryState=null}return queryState},execAction:function(action,opts){var fullAction=/^full-(.+)$/gi,match,result;match=fullAction.exec(action);if(match){this.saveSelection();this.selectAllContents();result=execActionInternal.call(this,match[1],opts);this.restoreSelection()}else{result=execActionInternal.call(this,action,opts)}if(action==="insertunorderedlist"||action==="insertorderedlist"){MediumEditor.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement())}this.checkSelection();return result},getSelectedParentElement:function(range){if(range===undefined){range=this.options.contentWindow.getSelection().getRangeAt(0)}return MediumEditor.selection.getSelectedParentElement(range)},selectAllContents:function(){var currNode=MediumEditor.selection.getSelectionElement(this.options.contentWindow);if(currNode){while(currNode.children.length===1){currNode=currNode.children[0]}this.selectElement(currNode)}},selectElement:function(element){MediumEditor.selection.selectNode(element,this.options.ownerDocument);var selElement=MediumEditor.selection.getSelectionElement(this.options.contentWindow);if(selElement){this.events.focusElement(selElement)}},getFocusedElement:function(){var focused;this.elements.some(function(element){if(!focused&&element.getAttribute("data-medium-focused")){focused=element}return!!focused},this);return focused},exportSelection:function(){var selectionElement=MediumEditor.selection.getSelectionElement(this.options.contentWindow),editableElementIndex=this.elements.indexOf(selectionElement),selectionState=null;if(editableElementIndex>=0){selectionState=MediumEditor.selection.exportSelection(selectionElement,this.options.ownerDocument)}if(selectionState!==null&&editableElementIndex!==0){selectionState.editableElementIndex=editableElementIndex}return selectionState},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(selectionState,favorLaterSelectionAnchor){if(!selectionState){return}var editableElement=this.elements[selectionState.editableElementIndex||0];MediumEditor.selection.importSelection(selectionState,editableElement,this.options.ownerDocument,favorLaterSelectionAnchor)},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(opts){var currentEditor=MediumEditor.selection.getSelectionElement(this.options.contentWindow),customEvent={},targetUrl;if(this.elements.indexOf(currentEditor)===-1){return}try{this.events.disableCustomEvent("editableInput");if(opts.url){MediumEditor.util.deprecated(".url option for createLink",".value","6.0.0")}targetUrl=opts.url||opts.value;if(targetUrl&&targetUrl.trim().length>0){var currentSelection=this.options.contentWindow.getSelection();if(currentSelection){var currRange=currentSelection.getRangeAt(0),commonAncestorContainer=currRange.commonAncestorContainer,exportedSelection,startContainerParentElement,endContainerParentElement,textNodes;if(currRange.endContainer.nodeType===3&&currRange.startContainer.nodeType!==3&&currRange.startOffset===0&&currRange.startContainer.firstChild===currRange.endContainer){commonAncestorContainer=currRange.endContainer}startContainerParentElement=MediumEditor.util.getClosestBlockContainer(currRange.startContainer);endContainerParentElement=MediumEditor.util.getClosestBlockContainer(currRange.endContainer);if(commonAncestorContainer.nodeType!==3&&commonAncestorContainer.textContent.length!==0&&startContainerParentElement===endContainerParentElement){var parentElement=startContainerParentElement||currentEditor,fragment=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink");exportedSelection=this.exportSelection();fragment.appendChild(parentElement.cloneNode(true));if(currentEditor===parentElement){MediumEditor.selection.select(this.options.ownerDocument,parentElement.firstChild,0,parentElement.lastChild,parentElement.lastChild.nodeType===3?parentElement.lastChild.nodeValue.length:parentElement.lastChild.childNodes.length)}else{MediumEditor.selection.select(this.options.ownerDocument,parentElement,0,parentElement,parentElement.childNodes.length)}var modifiedExportedSelection=this.exportSelection();textNodes=MediumEditor.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,fragment,{start:exportedSelection.start-modifiedExportedSelection.start,end:exportedSelection.end-modifiedExportedSelection.start,editableElementIndex:exportedSelection.editableElementIndex});if(textNodes.length===0){fragment=this.options.ownerDocument.createDocumentFragment();fragment.appendChild(commonAncestorContainer.cloneNode(true));textNodes=[fragment.firstChild.firstChild,fragment.firstChild.lastChild]}MediumEditor.util.createLink(this.options.ownerDocument,textNodes,targetUrl.trim());var leadingWhitespacesCount=(fragment.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,fragment.firstChild.innerHTML.replace(/^\s+/,""));exportedSelection.start-=leadingWhitespacesCount;exportedSelection.end-=leadingWhitespacesCount;this.importSelection(exportedSelection)}else{this.options.ownerDocument.execCommand("createLink",false,targetUrl)}if(this.options.targetBlank||opts.target==="_blank"){MediumEditor.util.setTargetBlank(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),targetUrl)}else{MediumEditor.util.removeTargetBlank(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),targetUrl)}if(opts.buttonClass){MediumEditor.util.addClassToAnchors(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),opts.buttonClass)}}}if(this.options.targetBlank||opts.target==="_blank"||opts.buttonClass){customEvent=this.options.ownerDocument.createEvent("HTMLEvents");customEvent.initEvent("input",true,true,this.options.contentWindow);for(var i=0,len=this.elements.length;i<len;i+=1){this.elements[i].dispatchEvent(customEvent)}}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",customEvent,currentEditor)},cleanPaste:function(text){this.getExtensionByName("paste").cleanPaste(text)},pasteHTML:function(html,options){this.getExtensionByName("paste").pasteHTML(html,options)},setContent:function(html,index){index=index||0;if(this.elements[index]){var target=this.elements[index];target.innerHTML=html;this.checkContentChanged(target)}},getContent:function(index){index=index||0;if(this.elements[index]){return this.elements[index].innerHTML.trim()}return null},checkContentChanged:function(editable){editable=editable||MediumEditor.selection.getSelectionElement(this.options.contentWindow);this.events.updateInput(editable,{target:editable,currentTarget:editable})},resetContent:function(element){if(element){var index=this.elements.indexOf(element);if(index!==-1){this.setContent(initialContent[element.getAttribute("medium-editor-index")],index)}return}this.elements.forEach(function(el,idx){this.setContent(initialContent[el.getAttribute("medium-editor-index")],idx)},this)},addElements:function(selector){var elements=createElementsArray(selector,this.options.ownerDocument,true);if(elements.length===0){return false}elements.forEach(function(element){element=initElement.call(this,element,this.id);this.elements.push(element);this.trigger("addElement",{target:element,currentTarget:element},element)},this)},removeElements:function(selector){var elements=createElementsArray(selector,this.options.ownerDocument),toRemove=elements.map(function(el){if(el.getAttribute("medium-editor-textarea-id")&&el.parentNode){return el.parentNode.querySelector('div[medium-editor-textarea-id="'+el.getAttribute("medium-editor-textarea-id")+'"]')}else{return el}});this.elements=this.elements.filter(function(element){if(toRemove.indexOf(element)!==-1){this.events.cleanupElement(element);if(element.getAttribute("medium-editor-textarea-id")){cleanupTextareaElement(element)}this.trigger("removeElement",{target:element,currentTarget:element},element);return false}return true},this)}};MediumEditor.getEditorFromElement=function(element){var index=element.getAttribute("data-medium-editor-editor-index"),win=element&&element.ownerDocument&&(element.ownerDocument.defaultView||element.ownerDocument.parentWindow);if(win&&win._mediumEditors&&win._mediumEditors[index]){return win._mediumEditors[index]}return null}})();(function(){MediumEditor.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:false,delay:0,disableReturn:false,disableDoubleReturn:false,disableExtraSpaces:false,disableEditing:false,autoLink:false,elementsContainer:false,contentWindow:window,ownerDocument:document,targetBlank:false,extensions:{},spellcheck:true}})();MediumEditor.parseVersionString=function(release){var split=release.split("-"),version=split[0].split("."),preRelease=split.length>1?split[1]:"";return{major:parseInt(version[0],10),minor:parseInt(version[1],10),revision:parseInt(version[2],10),preRelease:preRelease,toString:function(){return[version[0],version[1],version[2]].join(".")+(preRelease?"-"+preRelease:"")}}};MediumEditor.version=MediumEditor.parseVersionString.call(this,{version:"5.23.3"}.version);return MediumEditor}())},function(module,exports,__webpack_require__){var process=__webpack_require__(11);var __WEBPACK_AMD_DEFINE_RESULT__;(function(root,factory){"use strict";var isElectron=true&&process&&process.versions&&process.versions.electron;if(!isElectron&&"object"==="object"){module.exports=factory}else if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this,function(){"use strict";function extend(dest,source){var prop;dest=dest||{};for(prop in source){if(source.hasOwnProperty(prop)&&!dest.hasOwnProperty(prop)){dest[prop]=source[prop]}}return dest}function getSelectionText(doc){if(doc.getSelection){return doc.getSelection().toString()}if(doc.selection&&doc.selection.type!=="Control"){return doc.selection.createRange().text}return""}function getSelectionStart(doc){var node=doc.getSelection().anchorNode,startNode=node&&node.nodeType===3?node.parentNode:node;return startNode}function placeCaretAtNode(doc,node,before){if(doc.getSelection!==undefined&&node){var range=doc.createRange(),selection=doc.getSelection();if(before){range.setStartBefore(node)}else{range.setStartAfter(node)}range.collapse(true);selection.removeAllRanges();selection.addRange(range)}}function isInsideElementOfTag(node,tag){if(!node){return false}var parentNode=node.parentNode,tagName=parentNode.tagName.toLowerCase();while(tagName!=="body"){if(tagName===tag){return true}parentNode=parentNode.parentNode;if(parentNode&&parentNode.tagName){tagName=parentNode.tagName.toLowerCase()}else{return false}}return false}function getParentOf(el,tagTarget){var tagName=el&&el.tagName?el.tagName.toLowerCase():false;if(!tagName){return false}while(tagName&&tagName!=="body"){if(tagName===tagTarget){return el}el=el.parentNode;tagName=el&&el.tagName?el.tagName.toLowerCase():false}}function Grid(el,callback,rows,columns){return this.init(el,callback,rows,columns)}Grid.prototype={init:function(el,callback,rows,columns){this._root=el;this._callback=callback;this.rows=rows;this.columns=columns;return this._render()},setCurrentCell:function(cell){this._currentCell=cell},markCells:function(){[].forEach.call(this._cellsElements,function(el){var cell={column:parseInt(el.dataset.column,10),row:parseInt(el.dataset.row,10)},active=this._currentCell&&cell.row<=this._currentCell.row&&cell.column<=this._currentCell.column;if(active===true){el.classList.add("active")}else{el.classList.remove("active")}}.bind(this))},_generateCells:function(){var row=-1;this._cells=[];for(var i=0;i<this.rows*this.columns;i++){var column=i%this.columns;if(column===0){row++}this._cells.push({column:column,row:row,active:false})}},_html:function(){var width=this.columns*COLUMN_WIDTH+BORDER_WIDTH*2,height=this.rows*COLUMN_WIDTH+BORDER_WIDTH*2,html='<div class="medium-editor-table-builder-grid clearfix" style="width:'+width+"px;height:"+height+'px;">';html+=this._cellsHTML();html+="</div>";return html},_cellsHTML:function(){var html="";this._generateCells();this._cells.map(function(cell){html+='<a href="#" class="medium-editor-table-builder-cell'+(cell.active===true?" active":"")+'" '+'data-row="'+cell.row+'" data-column="'+cell.column+'">';html+="</a>"});return html},_render:function(){this._root.innerHTML=this._html();this._cellsElements=this._root.querySelectorAll("a");this._bindEvents()},_bindEvents:function(){[].forEach.call(this._cellsElements,function(el){this._onMouseEnter(el);this._onClick(el)}.bind(this))},_onMouseEnter:function(el){var self=this,timer;el.addEventListener("mouseenter",function(){clearTimeout(timer);var dataset=this.dataset;timer=setTimeout(function(){self._currentCell={column:parseInt(dataset.column,10),row:parseInt(dataset.row,10)};self.markCells()},50)})},_onClick:function(el){var self=this;el.addEventListener("click",function(e){e.preventDefault();self._callback(this.dataset.row,this.dataset.column)})}};function Builder(options){return this.init(options)}Builder.prototype={init:function(options){this.options=options;this._doc=options.ownerDocument||document;this._root=this._doc.createElement("div");this._root.className="medium-editor-table-builder";this.grid=new Grid(this._root,this.options.onClick,this.options.rows,this.options.columns);this._range=null;this._toolbar=this._doc.createElement("div");this._toolbar.className="medium-editor-table-builder-toolbar";var spanRow=this._doc.createElement("span");spanRow.innerHTML="Row:";this._toolbar.appendChild(spanRow);var addRowBefore=this._doc.createElement("button");addRowBefore.title="Add row before";addRowBefore.innerHTML='<i class="fa fa-long-arrow-up"></i>';addRowBefore.onclick=this.addRow.bind(this,true);this._toolbar.appendChild(addRowBefore);var addRowAfter=this._doc.createElement("button");addRowAfter.title="Add row after";addRowAfter.innerHTML='<i class="fa fa-long-arrow-down"></i>';addRowAfter.onclick=this.addRow.bind(this,false);this._toolbar.appendChild(addRowAfter);var remRow=this._doc.createElement("button");remRow.title="Remove row";remRow.innerHTML='<i class="fa fa-close"></i>';remRow.onclick=this.removeRow.bind(this);this._toolbar.appendChild(remRow);var spanCol=this._doc.createElement("span");spanCol.innerHTML="Column:";this._toolbar.appendChild(spanCol);var addColumnBefore=this._doc.createElement("button");addColumnBefore.title="Add column before";addColumnBefore.innerHTML='<i class="fa fa-long-arrow-left"></i>';addColumnBefore.onclick=this.addColumn.bind(this,true);this._toolbar.appendChild(addColumnBefore);var addColumnAfter=this._doc.createElement("button");addColumnAfter.title="Add column after";addColumnAfter.innerHTML='<i class="fa fa-long-arrow-right"></i>';addColumnAfter.onclick=this.addColumn.bind(this,false);this._toolbar.appendChild(addColumnAfter);var remColumn=this._doc.createElement("button");remColumn.title="Remove column";remColumn.innerHTML='<i class="fa fa-close"></i>';remColumn.onclick=this.removeColumn.bind(this);this._toolbar.appendChild(remColumn);var remTable=this._doc.createElement("button");remTable.title="Remove table";remTable.innerHTML='<i class="fa fa-trash-o"></i>';remTable.onclick=this.removeTable.bind(this);this._toolbar.appendChild(remTable);var grid=this._root.childNodes[0];this._root.insertBefore(this._toolbar,grid)},getElement:function(){return this._root},hide:function(){this._root.style.display="";this.grid.setCurrentCell({column:-1,row:-1});this.grid.markCells()},show:function(left){this._root.style.display="block";this._root.style.left=left+"px"},setEditor:function(range,restrictNestedTable){this._range=range;this._toolbar.style.display="block";if(restrictNestedTable){var elements=this._doc.getElementsByClassName("medium-editor-table-builder-grid");elements[0].style.display="none"}},setBuilder:function(){this._range=null;this._toolbar.style.display="none";var elements=this._doc.getElementsByClassName("medium-editor-table-builder-grid");elements[0].style.display="block";for(var i=0;i<elements.length;i++){elements[i].style.height=COLUMN_WIDTH*this.rows+BORDER_WIDTH*2+"px";elements[i].style.width=COLUMN_WIDTH*this.columns+BORDER_WIDTH*2+"px"}},getParentType:function(el,targetNode){var nodeName=el&&el.nodeName?el.nodeName.toLowerCase():false;if(!nodeName){return false}while(nodeName&&nodeName!=="body"){if(nodeName===targetNode){return el}el=el.parentNode;nodeName=el&&el.nodeName?el.nodeName.toLowerCase():false}},addRow:function(before,e){e.preventDefault();e.stopPropagation();var tbody=this.getParentType(this._range,"tbody"),selectedTR=this.getParentType(this._range,"tr"),tr=this._doc.createElement("tr"),td;for(var i=0;i<selectedTR.childNodes.length;i++){td=this._doc.createElement("td");td.appendChild(this._doc.createElement("br"));tr.appendChild(td)}if(before!==true&&selectedTR.nextSibling){tbody.insertBefore(tr,selectedTR.nextSibling)}else if(before===true){tbody.insertBefore(tr,selectedTR)}else{tbody.appendChild(tr)}this.options.onClick(0,0)},removeRow:function(e){e.preventDefault();e.stopPropagation();var tbody=this.getParentType(this._range,"tbody"),selectedTR=this.getParentType(this._range,"tr");tbody.removeChild(selectedTR);this.options.onClick(0,0)},addColumn:function(before,e){e.preventDefault();e.stopPropagation();var selectedTR=this.getParentType(this._range,"tr"),selectedTD=this.getParentType(this._range,"td"),cell=Array.prototype.indexOf.call(selectedTR.childNodes,selectedTD),tbody=this.getParentType(this._range,"tbody"),td;for(var i=0;i<tbody.childNodes.length;i++){td=this._doc.createElement("td");td.appendChild(this._doc.createElement("br"));if(before===true){tbody.childNodes[i].insertBefore(td,tbody.childNodes[i].childNodes[cell])}else if(tbody.childNodes[i].childNodes[cell].nextSibling){tbody.childNodes[i].insertBefore(td,tbody.childNodes[i].childNodes[cell].nextSibling)}else{tbody.childNodes[i].appendChild(td)}}this.options.onClick(0,0)},removeColumn:function(e){e.preventDefault();e.stopPropagation();var selectedTR=this.getParentType(this._range,"tr"),selectedTD=this.getParentType(this._range,"td"),cell=Array.prototype.indexOf.call(selectedTR.childNodes,selectedTD),tbody=this.getParentType(this._range,"tbody"),rows=tbody.childNodes.length;for(var i=0;i<rows;i++){tbody.childNodes[i].removeChild(tbody.childNodes[i].childNodes[cell])}this.options.onClick(0,0)},removeTable:function(e){e.preventDefault();e.stopPropagation();var selectedTR=this.getParentType(this._range,"tr"),selectedTD=this.getParentType(this._range,"td"),cell=Array.prototype.indexOf.call(selectedTR.childNodes,selectedTD),table=this.getParentType(this._range,"table");table.parentNode.removeChild(table);this.options.onClick(0,0)}};function Table(editor){return this.init(editor)}var TAB_KEY_CODE=9;Table.prototype={init:function(editor){this._editor=editor;this._doc=this._editor.options.ownerDocument;this._bindTabBehavior()},insert:function(rows,cols){var html=this._html(rows,cols);this._editor.pasteHTML('<table class="medium-editor-table" id="medium-editor-table"'+' width="100%">'+'<tbody id="medium-editor-table-tbody">'+html+"</tbody>"+"</table>",{cleanAttrs:[],cleanTags:[]});var table=this._doc.getElementById("medium-editor-table"),tbody=this._doc.getElementById("medium-editor-table-tbody");if(0===$(table).find("#medium-editor-table-tbody").length){$(tbody).detach().appendTo(table)}tbody.removeAttribute("id");table.removeAttribute("id");placeCaretAtNode(this._doc,table.querySelector("td"),true);this._editor.checkSelection()},_html:function(rows,cols){var html="",x,y,text=getSelectionText(this._doc);for(x=0;x<=rows;x++){html+="<tr>";for(y=0;y<=cols;y++){html+="<td>"+(x===0&&y===0?text:"<br />")+"</td>"}html+="</tr>"}return html},_bindTabBehavior:function(){var self=this;[].forEach.call(this._editor.elements,function(el){el.addEventListener("keydown",function(e){self._onKeyDown(e)})})},_onKeyDown:function(e){var el=getSelectionStart(this._doc),table;if(e.which===TAB_KEY_CODE&&isInsideElementOfTag(el,"table")){e.preventDefault();e.stopPropagation();table=this._getTableElements(el);if(e.shiftKey){this._tabBackwards(el.previousSibling,table.row)}else{if(this._isLastCell(el,table.row,table.root)){this._insertRow(getParentOf(el,"tbody"),table.row.cells.length)}placeCaretAtNode(this._doc,el)}}},_getTableElements:function(el){return{cell:getParentOf(el,"td"),row:getParentOf(el,"tr"),root:getParentOf(el,"table")}},_tabBackwards:function(el,row){el=el||this._getPreviousRowLastCell(row);placeCaretAtNode(this._doc,el,true)},_insertRow:function(tbody,cols){var tr=document.createElement("tr"),html="",i;for(i=0;i<cols;i+=1){html+="<td><br /></td>"}tr.innerHTML=html;tbody.appendChild(tr)},_isLastCell:function(el,row,table){return row.cells.length-1===el.cellIndex&&table.rows.length-1===row.rowIndex},_getPreviousRowLastCell:function(row){row=row.previousSibling;if(row){return row.cells[row.cells.length-1]}}};var COLUMN_WIDTH=16,BORDER_WIDTH=1,MediumEditorTable;MediumEditorTable=MediumEditor.extensions.form.extend({name:"table",aria:"create table",action:"table",contentDefault:"TBL",contentFA:'<i class="fa fa-table"></i>',handleClick:function(event){event.preventDefault();event.stopPropagation();this[this.isActive()===true?"hide":"show"]()},hide:function(){this.setInactive();this.builder.hide()},show:function(){this.setActive();var range=MediumEditor.selection.getSelectionRange(this.document);if(range.startContainer.nodeName.toLowerCase()==="td"||range.endContainer.nodeName.toLowerCase()==="td"||MediumEditor.util.getClosestTag(MediumEditor.selection.getSelectedParentElement(range),"td")){this.builder.setEditor(MediumEditor.selection.getSelectedParentElement(range),this.restrictNestedTable)}else{this.builder.setBuilder()}this.builder.show(this.button.offsetLeft)},getForm:function(){if(!this.builder){this.builder=new Builder({onClick:function(rows,columns){if(rows>0||columns>0){this.table.insert(rows,columns)}this.hide()}.bind(this),ownerDocument:this.document,rows:this.rows||10,columns:this.columns||10});this.table=new Table(this.base)}return this.builder.getElement()}});return MediumEditorTable}())},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Config=__webpack_require__(112);const util=__webpack_require__(114);const uri=__webpack_require__(116);const doc=__webpack_require__(115);module.exports={initLocalStorage:initLocalStorage,enableLocalStorage:enableLocalStorage,disableLocalStorage:disableLocalStorage,updateLocalStorageDocument:updateLocalStorageDocument,updateHTTPStorageDocument:updateHTTPStorageDocument,enableAutoSave:enableAutoSave,disableAutoSave:disableAutoSave,removeLocalStorageItem:removeLocalStorageItem,removeLocalStorageProfile:removeLocalStorageProfile,getLocalStorageProfile:getLocalStorageProfile,updateLocalStorageProfile:updateLocalStorageProfile,showAutoSaveStorage:showAutoSaveStorage,hideAutoSaveStorage:hideAutoSaveStorage};function initLocalStorage(key){if(typeof window.localStorage!="undefined"){enableLocalStorage(key)}}function enableLocalStorage(key){Config.UseLocalStorage=true;var o=localStorage.getItem(key);try{document.documentElement.innerHTML=JSON.parse(o).object.content;Config.init()}catch(e){}console.log(util.getDateTimeISO()+": "+key+" storage enabled.");enableAutoSave(key,{method:"localStorage"})}function disableLocalStorage(key){Config.UseLocalStorage=false;localStorage.removeItem(key);disableAutoSave(key,{method:"localStorage"});console.log(util.getDateTimeISO()+": "+key+" storage disabled.")}function updateLocalStorageDocument(key,data,options){data=data||doc.getDocument();options=options||{};var id=util.generateUUID();var o=localStorage.getItem(key);var datetime=util.getDateTimeISO();var object={"@context":"https://www.w3.org/ns/activitystreams",id:id,type:"Update",object:{id:key,type:"Document",updated:datetime,mediaType:"text/html",content:data}};localStorage.setItem(key,JSON.stringify(object));if(options.autoSave){Config.AutoSave.Items[key]["localStorage"]["updated"]=object.object.updated}console.log(datetime+": Document saved.")}function updateHTTPStorageDocument(url,data,options){data=data||doc.getDocument();options=options||{};var datetime=util.getDateTimeISO();doc.updateMutableResource(url);if(options.autoSave){Config.AutoSave.Items[url]["http"]["updated"]=datetime}console.log(datetime+": Document saved.")}function enableAutoSave(key,options){options=options||{};options["method"]="method"in options?options.method:"localStorage";options["autoSave"]=true;Config.AutoSave.Items[key]=Config.AutoSave.Items[key]?Config.AutoSave.Items[key]:{};Config.AutoSave.Items[key][options.method]=Config.AutoSave.Items[key][options.method]?Config.AutoSave.Items[key][options.method]:{};var id;switch(options.method){default:case"localStorage":id=setInterval(function(){var data=doc.getDocument();util.getHash(data).then(hash=>{if(!("hash"in Config.AutoSave.Items[key][options.method]&&Config.AutoSave.Items[key][options.method].hash==hash)){updateLocalStorageDocument(key,data,options);Config.AutoSave.Items[key][options.method]["hash"]=hash}})},Config.AutoSave.Timer);break;case"http":id=setInterval(function(){var data=doc.getDocument();util.getHash(data).then(hash=>{if(!("hash"in Config.AutoSave.Items[key][options.method]&&Config.AutoSave.Items[key][options.method].hash==hash)){updateHTTPStorageDocument(key,data,options);Config.AutoSave.Items[key][options.method]["hash"]=hash}})},Config.AutoSave.Timer);break}Config.AutoSave.Items[key][options.method]["id"]=id;console.log(util.getDateTimeISO()+": "+key+" "+options.method+" autosave enabled.")}function disableAutoSave(key,options){options=options||{};var methods;if(!Config.AutoSave.Items[key]){return}if("method"in options){methods=Array.isArray(options.method)?options.method:[options.method];methods.forEach(method=>{if(Config.AutoSave.Items[key][method]){clearInterval(Config.AutoSave.Items[key][method].id);Config.AutoSave.Items[key][method]=undefined;console.log(util.getDateTimeISO()+": "+key+" "+options.method+" autosave disabled.")}})}}function removeLocalStorageItem(key){if(!key){Promise.resolve()}if(Config.WebExtension){var browser=typeof browser!=="undefined"?browser:chrome;return browser.storage.sync.remove(key)}else if(window.localStorage){return Promise.resolve(localStorage.removeItem(key))}else{return Promise.reject({message:"storage is unavailable"})}}function removeLocalStorageProfile(key){key=key||"DO.C.User";return removeLocalStorageItem(key)}function getLocalStorageProfile(key){key=key||"DO.C.User";if(Config.WebExtension){if(typeof browser!=="undefined"){return browser.storage.sync.get(key).then(function(o){return o[key]})}else{var value={};chrome.storage.sync.get(key,function(o){value=o[key]});return new Promise(function(resolve,reject){window.setTimeout(function(){return resolve(value)},50)})}}else if(window.localStorage){var o=localStorage.getItem(key);return Promise.resolve(JSON.parse(o))}else{return Promise.reject({message:"storage is unavailable"})}}function updateLocalStorageProfile(User){if(!User.IRI){return Promise.resolve({message:"User.IRI is not set"})}var U={...User};var key="DO.C.User";var id=util.generateUUID();var datetime=util.getDateTimeISO();if(U.Graph){delete U.Graph}if(U.Contacts){U.Contacts={}}var object={"@context":"https://www.w3.org/ns/activitystreams",id:id,type:"Update",object:{id:key,type:"Profile",describes:U},datetime:datetime,actor:U.IRI};if(Config.WebExtension){if(typeof browser!=="undefined"){return browser.storage.sync.set({[key]:object})}else{return Promise.resolve(chrome.storage.sync.set({[key]:object}))}}else if(window.localStorage){return Promise.resolve(localStorage.setItem(key,JSON.stringify(object)))}else{return Promise.reject({message:"storage is unavailable"})}}function showAutoSaveStorage(node,iri){iri=iri||uri.stripFragmentFromString(document.location.href);if(document.querySelector("#autosave-items")){return}var checked;var useLocalStorage="";if(window.localStorage){checked=Config.AutoSave.Items[iri]&&Config.AutoSave.Items[iri]["localStorage"]?' checked="checked"':"";enableAutoSave(iri,{method:"localStorage"})}checked=Config.AutoSave.Items[iri]&&Config.AutoSave.Items[iri]["http"]?' checked="checked"':"";var useHTTPStorage='<li class="http-storage-html-autosave"><input id="http-storage-html-autosave" class="autosave" type="checkbox"'+checked+' /> <label for="http-storage-html-autosave">'+Config.AutoSave.Timer/6e4+"m autosave (http)</label></li>";node.insertAdjacentHTML("beforeend",'<ul id="autosave-items" class="on">'+useLocalStorage+useHTTPStorage+"</ul>");node.querySelector("#autosave-items").addEventListener("click",function(e){if(e.target.closest("input.autosave")){var method;switch(e.target.id){default:case"local-storage-html-autosave":method="localStorage";break;case"http-storage-html-autosave":method="http";break}if(e.target.getAttribute("checked")){e.target.removeAttribute("checked");disableAutoSave(iri,{method:method})}else{e.target.setAttribute("checked","checked");enableAutoSave(iri,{method:method})}}})}function hideAutoSaveStorage(node,iri){node=node||document.getElementById("autosave-items");iri=iri||uri.stripFragmentFromString(document.location.href);node.parentNode.removeChild(node);disableAutoSave(iri);if(Config.AutoSave.Items[iri]&&Config.AutoSave.Items[iri]["localStorage"]){disableAutoSave(iri,{method:"localStorage"})}}},(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Config=__webpack_require__(112);const fetcher=__webpack_require__(1);const util=__webpack_require__(114);const uri=__webpack_require__(116);const storage=__webpack_require__(123);const solidAuth=__webpack_require__(119);module.exports={isActorType:isActorType,isActorProperty:isActorProperty,afterSignIn:afterSignIn,enableDisableButton:enableDisableButton,getAgentImage:getAgentImage,getAgentName:getAgentName,getAgentURL:getAgentURL,getAgentStorage:getAgentStorage,getAgentOutbox:getAgentOutbox,getAgentInbox:getAgentInbox,getAgentKnows:getAgentKnows,getAgentSupplementalInfo:getAgentSupplementalInfo,getAgentSeeAlso:getAgentSeeAlso,getAgentTypeIndex:getAgentTypeIndex,getAgentPreferencesFile:getAgentPreferencesFile,getAgentPreferencesInfo:getAgentPreferencesInfo,getAgentPreferredProxy:getAgentPreferredProxy,getAgentPreferredPolicy:getAgentPreferredPolicy,getAgentPublicTypeIndex:getAgentPublicTypeIndex,getAgentPrivateTypeIndex:getAgentPrivateTypeIndex,getUserContacts:getUserContacts,getUserHTML:getUserHTML,getUserSignedInHTML:getUserSignedInHTML,setUserInfo:setUserInfo,showUserIdentityInput:showUserIdentityInput,showUserSigninSignout:showUserSigninSignout,submitSignIn:submitSignIn,processSameAs:processSameAs};function isActorType(s){var actorTypes=["foafAgent","foafPerson","foafGroup","foafOrganization","vcardVCard","vcardIndividual","vcardGroup","vcardOrganization","schemaPerson","schemaOrganization","dctermsAgent","asApplication","asGroup","asOrganization","asPerson","asService"];actorTypes=actorTypes.map(a=>{if(Config.Vocab[a]["@id"])return Config.Vocab[a]["@id"]});if(actorTypes.indexOf(s)>-1){return true}return false}function isActorProperty(s){var actorTypes=["foafknows","asactor","schemacreator","schemaauthor","schemacontributor","schemaeditor","dctermscreator"];actorTypes=actorTypes.map(a=>{if(Config.Vocab[a]["@id"])return Config.Vocab[a]["@id"]});if(actorTypes.indexOf(s)>-1){return true}return false}function getUserHTML(options){options=options||{};var avatarSize="avatarSize"in options?options.avatarSize:Config["AvatarSize"];let userName=Config.SecretAgentNames[Math.floor(Math.random()*Config.SecretAgentNames.length)];if(Config.User.Name){userName='<span about="'+Config.User.IRI+'" property="schema:name">'+Config.User.Name+"</span>"}let userImage="";if(!("omitImage"in options&&options.omitImage)&&"Image"in Config.User&&typeof Config.User.Image!=="undefined"&&Config.User.Image.length>0){userImage='<img alt="" height="'+avatarSize+'" rel="schema:image" src="'+Config.User.Image+'" width="'+avatarSize+'" /> '}let user="";if("IRI"in Config.User&&Config.User.IRI!==null&&Config.User.IRI.length>0){user='<span about="'+Config.User.IRI+'" typeof="schema:Person">'+userImage+'<a rel="schema:url" href="'+Config.User.IRI+'"> '+userName+"</a></span>"}else{user='<span typeof="schema:Person">'+userName+"</span>"}return user}function getUserSignedInHTML(){return getUserHTML()+'<button class="signout-user" title="Live long and prosper"><svg class="far fa-hand-spock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M21.096 381.79l129.092 121.513a32 32 0 0 0 21.932 8.698h237.6c14.17 0 26.653-9.319 30.68-22.904l31.815-107.313A115.955 115.955 0 0 0 477 348.811v-36.839c0-4.051.476-8.104 1.414-12.045l31.73-133.41c10.099-42.412-22.316-82.738-65.544-82.525-4.144-24.856-22.543-47.165-49.85-53.992-35.803-8.952-72.227 12.655-81.25 48.75L296.599 184 274.924 52.01c-8.286-36.07-44.303-58.572-80.304-50.296-29.616 6.804-50.138 32.389-51.882 61.295-42.637.831-73.455 40.563-64.071 81.844l31.04 136.508c-27.194-22.515-67.284-19.992-91.482 5.722-25.376 26.961-24.098 69.325 2.871 94.707zm32.068-61.811l.002-.001c7.219-7.672 19.241-7.98 26.856-.813l53.012 49.894C143.225 378.649 160 371.4 160 357.406v-69.479c0-1.193-.134-2.383-.397-3.546l-34.13-150.172c-5.596-24.617 31.502-32.86 37.054-8.421l30.399 133.757a16 16 0 0 0 15.603 12.454h8.604c10.276 0 17.894-9.567 15.594-19.583l-41.62-181.153c-5.623-24.469 31.39-33.076 37.035-8.508l45.22 196.828A16 16 0 0 0 288.956 272h13.217a16 16 0 0 0 15.522-12.119l42.372-169.49c6.104-24.422 42.962-15.159 36.865 9.217L358.805 252.12c-2.521 10.088 5.115 19.88 15.522 19.88h9.694a16 16 0 0 0 15.565-12.295L426.509 146.6c5.821-24.448 42.797-15.687 36.966 8.802L431.72 288.81a100.094 100.094 0 0 0-2.72 23.162v36.839c0 6.548-.943 13.051-2.805 19.328L397.775 464h-219.31L53.978 346.836c-7.629-7.18-7.994-19.229-.814-26.857z"/></svg></button>'}async function showUserSigninSignout(node){const session=await solid.auth.currentSession();var webId=session?session.webId:null;if(webId&&(webId!=Config.User.IRI||!Config.User.IRI)){await setUserInfo(webId,true).then(()=>{afterSignIn()})}if(!webId&&Config.User.IRI&&Config.User.OIDC){storage.removeLocalStorageProfile();Config.User={IRI:null,Role:"social",UI:{}};util.removeChildren(node)}var userInfo=document.getElementById("user-info");if(!userInfo){var s="";if(Config.User.IRI){s=getUserSignedInHTML()}else{s='<button class="signin-user" title="Sign in to authenticate"><svg class="fas fa-user-secret fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M383.9 308.3l23.9-62.6c4-10.5-3.7-21.7-15-21.7h-58.5c11-18.9 17.8-40.6 17.8-64v-.3c39.2-7.8 64-19.1 64-31.7 0-13.3-27.3-25.1-70.1-33-9.2-32.8-27-65.8-40.6-82.8-9.5-11.9-25.9-15.6-39.5-8.8l-27.6 13.8c-9 4.5-19.6 4.5-28.6 0L182.1 3.4c-13.6-6.8-30-3.1-39.5 8.8-13.5 17-31.4 50-40.6 82.8-42.7 7.9-70 19.7-70 33 0 12.6 24.8 23.9 64 31.7v.3c0 23.4 6.8 45.1 17.8 64H56.3c-11.5 0-19.2 11.7-14.7 22.3l25.8 60.2C27.3 329.8 0 372.7 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-48.4-25.8-90.4-64.1-114.1zM176 480l-41.6-192 49.6 32 24 40-32 120zm96 0l-32-120 24-40 49.6-32L272 480zm41.7-298.5c-3.9 11.9-7 24.6-16.5 33.4-10.1 9.3-48 22.4-64-25-2.8-8.4-15.4-8.4-18.3 0-17 50.2-56 32.4-64 25-9.5-8.8-12.7-21.5-16.5-33.4-.8-2.5-6.3-5.7-6.3-5.8v-10.8c28.3 3.6 61 5.8 96 5.8s67.7-2.1 96-5.8v10.8c-.1.1-5.6 3.2-6.4 5.8z"/></svg>Sign in</button>'}node.insertAdjacentHTML("beforeend",'<section id="user-info">'+s+"</section>");userInfo=document.getElementById("user-info");userInfo.addEventListener("click",async function(e){if(e.target.closest(".signout-user")){if(Config.User.OIDC){await solidAuth.logout()}storage.removeLocalStorageProfile();Config.User={IRI:null,Role:"social",UI:{}};util.removeChildren(node);var documentMenu=document.querySelector("#document-menu");showUserSigninSignout(documentMenu.querySelector("header"));var ra=documentMenu.querySelector(".resource-activities");ra.disabled=true;ra.innerHTML='<svg class="fas fa-bolt fa-2x" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"/></svg>Activities'}});var su=document.querySelector("#document-menu button.signin-user");if(su){su.addEventListener("click",showUserIdentityInput)}var rA=document.querySelector("#document-menu .resource-activities");if(rA){rA.setAttribute("disabled","disabled")}}}function showUserIdentityInput(e){if(typeof e!=="undefined"){e.target.disabled=true}var webid=Config.User.WebIdDelegate?Config.User.WebIdDelegate:"";var code='<aside id="user-identity-input" class="do on">'+Config.Button.Close+'<h2>Sign in</h2><p id="user-identity-input-webid"><label>WebID</label> <input id="webid" type="text" placeholder="https://csarven.ca/#i" value="'+webid+'" name="webid"/> <button class="signin">Sign in</button></p>';if(window.location.protocol==="https:"){code+='<p id="user-identity-input-oidc">or with <label>OpenID Connect</label> <button class="signin-oidc">Sign in</button></p>'}code+="</aside>";document.documentElement.appendChild(util.fragmentFromString(code));var buttonSignIn=document.querySelector("#user-identity-input button.signin");if(!Config.User.WebIdDelegate)buttonSignIn.setAttribute("disabled","disabled");document.querySelector("#user-identity-input").addEventListener("click",e=>{if(e.target.closest("button.close")){var signinUser=document.querySelector("#document-menu button.signin-user");if(signinUser){signinUser.disabled=false}}});var inputWebID=document.querySelector("#user-identity-input input#webid");if(inputWebID){buttonSignIn.addEventListener("click",submitSignIn);let events=["keyup","cut","paste","input"];events.forEach(eventType=>{inputWebID.addEventListener(eventType,e=>{enableDisableButton(e,buttonSignIn)})})}var buttonSignInOIDC=document.querySelector("#user-identity-input button.signin-oidc");if(buttonSignInOIDC){buttonSignInOIDC.addEventListener("click",submitSignInOIDC)}inputWebID.focus()}function enableDisableButton(e,button){var delay=e.type==="cut"||e.type==="paste"?250:0;var input;window.setTimeout(function(){input=e.target.value;if(input.length>10&&input.match(/^https?:\/\//g)){if(typeof e.which!=="undefined"&&e.which===13){if(!button.getAttribute("disabled")){button.setAttribute("disabled","disabled");e.preventDefault();e.stopPropagation();submitSignIn()}}else{button.removeAttribute("disabled")}}else{if(!button.getAttribute("disabled")){button.setAttribute("disabled","disabled")}}},delay)}function submitSignIn(url){var userIdentityInput=document.getElementById("user-identity-input");if(typeof url!=="string"){if(userIdentityInput){userIdentityInput.querySelector("#user-identity-input-webid").insertAdjacentHTML("beforeend",'<svg class="fas fa-circle-notch fa-spin fa-fw" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M288 39.056v16.659c0 10.804 7.281 20.159 17.686 23.066C383.204 100.434 440 171.518 440 256c0 101.689-82.295 184-184 184-101.689 0-184-82.295-184-184 0-84.47 56.786-155.564 134.312-177.219C216.719 75.874 224 66.517 224 55.712V39.064c0-15.709-14.834-27.153-30.046-23.234C86.603 43.482 7.394 141.206 8.003 257.332c.72 137.052 111.477 246.956 248.531 246.667C393.255 503.711 504 392.788 504 256c0-115.633-79.14-212.779-186.211-240.236C302.678 11.889 288 23.456 288 39.056z"/></svg>')}url=userIdentityInput.querySelector("input#webid").value.trim()}if(!url){console.log("submitSignIn - no user url input");return Promise.resolve()}return setUserInfo(url,false).then(()=>{var uI=document.getElementById("user-info");if(uI){util.removeChildren(uI);uI.insertAdjacentHTML("beforeend",getUserSignedInHTML())}if(userIdentityInput){userIdentityInput.parentNode.removeChild(userIdentityInput)}afterSignIn()})}function submitSignInOIDC(url){var userIdentityInput=document.getElementById("user-identity-input");var popupUri=Config.OidcPopupUrl;if(solidAuth){solidAuth.popupLogin({popupUri:popupUri}).then(session=>{if(session&&session.webId){console.log("Connected:",session.webId);setUserInfo(session.webId,true).then(()=>{var uI=document.getElementById("user-info");if(uI){util.removeChildren(uI);uI.insertAdjacentHTML("beforeend",getUserSignedInHTML())}if(userIdentityInput){userIdentityInput.parentNode.removeChild(userIdentityInput)}afterSignIn()})}}).catch(err=>{console.log("submitSignInOIDC - "+err);return Promise.resolve()})}}function setUserInfo(userIRI,oidc){if(!userIRI){return Promise.reject(new Error("Could not set user info - no user IRI"))}return fetcher.getResourceGraph(userIRI).then(g=>{var s=g.child(userIRI);Config.User.Graph=s;Config.User.IRI=userIRI;Config.User.Name=getAgentName(s);Config.User.Image=getAgentImage(s);Config.User.URL=getAgentURL(s);Config.User.OIDC=oidc?true:false;Config.User.Delegates=getAgentDelegates(s);Config.User.Contacts={};Config.User.Knows=getAgentKnows(s);Config.User.SameAs=[];Config.User.SeeAlso=[];Config.User.Storage=getAgentStorage(s);Config.User.Outbox=getAgentOutbox(s);Config.User.Inbox=getAgentInbox(s);Config.User.TypeIndex={};Config.User.PreferencesGraph=undefined;Config.User.PreferencesFile=getAgentPreferencesFile(s);Config.User.PublicTypeIndex=getAgentPublicTypeIndex(s);Config.User.PrivateTypeIndex=getAgentPrivateTypeIndex(s);Config.User.ProxyURL=getAgentPreferredProxy(s);Config.User.PreferredPolicy=getAgentPreferredPolicy(s);return Config.User})}function afterSignIn(){var promises=[];promises.push(getAgentTypeIndex(Config.User));promises.push(getAgentSupplementalInfo(Config.User.IRI));promises.push(getAgentSeeAlso(Config.User.Graph));promises.push(getAgentPreferencesInfo(Config.User.Graph));Promise.all(promises).then(function(results){var uI=document.getElementById("user-info");if(uI){uI.innerHTML=getUserSignedInHTML()}return storage.updateLocalStorageProfile(Config.User)}).catch(function(e){return Promise.resolve()});var rA=document.querySelector("#document-menu .resource-activities");if(rA){rA.removeAttribute("disabled")}var user=document.querySelectorAll('aside.do article *[rel~="schema:creator"] > *[about="'+Config.User.IRI+'"]');for(let i=0;i<user.length;i++){var article=user[i].closest("article");article.insertAdjacentHTML("afterbegin",'<button class="delete"><svg class="fas fa-trash-alt" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 84V56c0-13.3 10.7-24 24-24h112l9.4-18.7c4-8.2 12.3-13.3 21.4-13.3h114.3c9.1 0 17.4 5.1 21.5 13.3L312 32h112c13.3 0 24 10.7 24 24v28c0 6.6-5.4 12-12 12H12C5.4 96 0 90.6 0 84zm416 56v324c0 26.5-21.5 48-48 48H80c-26.5 0-48-21.5-48-48V140c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12zm-272 68c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208zm96 0c0-8.8-7.2-16-16-16s-16 7.2-16 16v224c0 8.8 7.2 16 16 16s16-7.2 16-16V208z"/></svg></button>')}var buttonDelete=document.querySelectorAll("aside.do blockquote[cite] article button.delete");for(let i=0;i<buttonDelete.length;i++){buttonDelete[i].addEventListener("click",function(e){e.preventDefault();e.stopPropagation();var article=e.target.closest("article");var refId="r-"+article.id;var noteIRI=article.closest("blockquote[cite]");noteIRI=noteIRI.getAttribute("cite");fetcher.deleteResource(noteIRI).then(()=>{var aside=e.target.closest("aside.do");aside.parentNode.removeChild(aside);var span=document.querySelector('span[resource="#'+refId+'"]');span.outerHTML=span.querySelector("mark").textContent})})}}function getAgentPreferencesInfo(g){if(!g){return}var preferencesFile=Config.User.PreferencesFile?Config.User.PreferencesFile:getAgentPreferencesFile(g);var getPreferredPolicy=function(s){var preferredPolicy=getAgentPreferredPolicy(s);if(preferredPolicy&&preferredPolicy.at(0)){Config.User.PreferredPolicy=preferredPolicy}};if(preferencesFile){var promises=[];return fetcher.getResourceGraph(preferencesFile).then(g=>{Config.User["PreferencesGraph"]=g;getPreferredPolicy(g.child(Config.User.IRI))})}else{Config.User["PreferencesGraph"]=Config.User.Graph.child(Config.User.IRI);getPreferredPolicy(Config.User["PreferencesGraph"]);return Promise.resolve()}}function getAgentSupplementalInfo(iri){if(iri==Config.User.IRI){return processSameAs(Config.User.Graph,getAgentSupplementalInfo)}else{return fetcher.getResourceGraph(iri).then(function(g){if(typeof g._graph=="undefined"){return Promise.resolve([])}var s=g.child(iri);Config.User.Name=Config.User.Name||getAgentName(s);Config.User.Image=Config.User.Image||getAgentImage(s);var storage=getAgentStorage(s)||[];var outbox=getAgentOutbox(s)||[];var knows=getAgentKnows(s)||[];if(storage.length>0){Config.User.Storage=Config.User.Storage?util.uniqueArray(Config.User.Storage.concat(storage)):storage}if(outbox.length>0){Config.User.Outbox=Config.User.Outbox?util.uniqueArray(Config.User.Outbox.concat(outbox)):outbox}if(knows.length>0){Config.User.Knows=Config.User.Knows?util.uniqueArray(Config.User.Knows.concat(knows)):knows}return processSameAs(s,getAgentSupplementalInfo)},function(reason){return Promise.resolve([])})}}function getAgentSeeAlso(g,baseURI,subjectURI){if(!g){return}subjectURI=baseURI=baseURI||g.iri().toString();var seeAlso=g.child(baseURI).rdfsseeAlso;if(seeAlso&&seeAlso._array.length>0){var iris=[];var promises=[];seeAlso._array.forEach(function(iri){if(Config.User.SeeAlso.indexOf(iri)<0){iris.push(iri)}});iris.forEach(function(iri){Config.User.SeeAlso=util.uniqueArray(Config.User.SeeAlso.concat(iri));fetcher.getResourceGraph(iri).then(g=>{var s=g.child(subjectURI);var knows=getAgentKnows(s)||[];if(knows.length>0){Config.User.Knows=Config.User.Knows?util.uniqueArray(Config.User.Knows.concat(knows)):knows}promises.push(getAgentSeeAlso(g,iri,subjectURI))})});Promise.all(promises).then(function(results){return Promise.resolve([])}).catch(function(e){return Promise.resolve([])})}else{return Promise.resolve([])}}function getUserContacts(iri){var fyn=function(iri){if(iri==Config.User.IRI&&Config.User.Graph){return processSameAs(Config.User.Graph,getUserContacts)}else{return fetcher.getResourceGraph(iri).then(function(g){if(typeof g._graph=="undefined"){return Promise.resolve([])}var s=g.child(iri);var knows=getAgentKnows(s)||[];if(knows.length>0){Config.User.Knows=Config.User.Knows?util.uniqueArray(Config.User.Knows.concat(knows)):knows}return processSameAs(s,getUserContacts)},function(reason){return Promise.resolve([])})}};return fyn(iri).then(function(i){return Config.User.Knows||[]})}function getAgentTypeIndex(iri){const TypeRegistrationClasses=[DO.C.Vocab["oaAnnotation"]["@id"],DO.C.Vocab["asAnnounce"]["@id"]];var fetchTypeRegistration=function(iri){var pIRI=uri.getProxyableIRI(iri);fetcher.getTriplesFromGraph(pIRI).then(function(triples){if(triples.length>0){var indexes={};triples.forEach(function(t){var s=t.subject.nominalValue;var p=t.predicate.nominalValue;var o=t.object.nominalValue;if(p==Config.Vocab["solidforClass"]["@id"]&&TypeRegistrationClasses.indexOf(o)>-1){indexes[s]={};indexes[s][Config.Vocab["solidforClass"]["@id"]]=o}});triples.forEach(function(t){var s=t.subject.nominalValue;var p=t.predicate.nominalValue;var o=t.object.nominalValue;if(indexes[s]&&p==Config.Vocab["solidinstanceContainer"]["@id"]){var forClass=indexes[s][Config.Vocab["solidforClass"]["@id"]];Config.User.TypeIndex[forClass]=o}});return Config.User.TypeIndex}})};var promises=[];if(Config.User.PublicTypeIndex){promises.push(fetchTypeRegistration(Config.User.PublicTypeIndex))}if(Config.User.PrivateTypeIndex){promises.push(fetchTypeRegistration(Config.User.PrivateTypeIndex))}return Promise.all(promises).then(function(results){results.filter(result=>!(result instanceof Error))})}function processSameAs(s,callback){if(s.owlsameAs&&s.owlsameAs._array.length>0){var iris=s.owlsameAs._array;var promises=[];iris.forEach(function(iri){if(iri!=Config.User.IRI&&Config.User.SameAs.indexOf(iri)<0){Config.User.SameAs=util.uniqueArray(Config.User.SameAs.concat(iri));if(typeof callback!=="undefined"){promises.push(callback(iri))}else{promises.push(Promise.resolve(Config.User.SameAs))}}});return Promise.all(promises).then(function(results){return Promise.resolve([])}).catch(function(e){return Promise.resolve([])})}else{return Promise.resolve([])}}function getAgentPreferredProxy(s){return s.solidpreferredProxy||undefined}function getAgentPreferredPolicy(s){return s.solidpreferredPolicy||undefined}function getAgentImage(s){return s.foafimg||s.schemaimage||s.vcardphoto||s.vcardhasPhoto||s.asimage||s.siocavatar||s.foafdepiction||undefined}function getAgentName(s){var name=s.foafname||s.schemaname||s.vcardfn||s.asname||s.rdfslabel||undefined;if(typeof name==="undefined"){if(s.schemafamilyName&&s.schemafamilyName.length>0&&s.schemagivenName&&s.schemagivenName.length>0){name=s.schemagivenName+" "+s.schemafamilyName}else if(s.foaffamilyName&&s.foaffamilyName.length>0&&s.foafgivenName&&s.foafgivenName.length>0){name=s.foafgivenName+" "+s.foaffamilyName}else if(s.vcardfamilyname&&s.vcardfamilyname.length>0&&s.vcardgivenname&&s.vcardgivenname.length>0){name=s.vcardgivenname+" "+s.vcardfamilyname}else if(s.foafnick&&s.foafnick.length>0){name=s.foafnick}else if(s.vcardnickname&&s.vcardnickname.length>0){name=s.vcardnickname}}return name}function getAgentURL(s){return s.foafhomepage||s.foafweblog||s.schemaurl||s.vcardurl||undefined}function getAgentDelegates(s){return s.acldelegates||undefined}function getAgentStorage(s){return s.pimstorage&&s.pimstorage._array.length>0?s.pimstorage._array:undefined}function getAgentOutbox(s){return s.asoutbox&&s.asoutbox._array.length>0?s.asoutbox._array:undefined}function getAgentInbox(s){return s.ldpinbox&&s.ldpinbox._array.length>0?s.ldpinbox._array:s.asinbox&&s.asinbox._array.length>0?s.asinbox._array:undefined}function getAgentKnows(s){var knows=[];if(s.foafknows&&s.foafknows._array.length>0){knows=knows.concat(s.foafknows._array)}if(s.schemaknows&&s.schemaknows._array.length>0){knows=knows.concat(s.schemaknows._array)}knows=util.uniqueArray(knows);return knows.length>0?knows:undefined}function getAgentPublicTypeIndex(s){return s.solidpublicTypeIndex&&s.solidpublicTypeIndex.length>0?s.solidpublicTypeIndex:undefined}function getAgentPrivateTypeIndex(s){return s.solidprivateTypeIndex&&s.solidprivateTypeIndex.length>0?s.solidprivateTypeIndex:undefined}function getAgentPreferencesFile(s){return s.pimpreferencesFile&&s.pimpreferencesFile.length>0?s.pimpreferencesFile:undefined}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{clientPoint:()=>_point__WEBPACK_IMPORTED_MODULE_7__["default"],create:()=>_create__WEBPACK_IMPORTED_MODULE_0__["default"],creator:()=>_creator__WEBPACK_IMPORTED_MODULE_1__["default"],customEvent:()=>_selection_on__WEBPACK_IMPORTED_MODULE_17__.customEvent,event:()=>_selection_on__WEBPACK_IMPORTED_MODULE_17__.event,local:()=>_local__WEBPACK_IMPORTED_MODULE_2__["default"],matcher:()=>_matcher__WEBPACK_IMPORTED_MODULE_3__["default"],mouse:()=>_mouse__WEBPACK_IMPORTED_MODULE_4__["default"],namespace:()=>_namespace__WEBPACK_IMPORTED_MODULE_5__["default"],namespaces:()=>_namespaces__WEBPACK_IMPORTED_MODULE_6__["default"],select:()=>_select__WEBPACK_IMPORTED_MODULE_8__["default"],selectAll:()=>_selectAll__WEBPACK_IMPORTED_MODULE_9__["default"],selection:()=>_selection_index__WEBPACK_IMPORTED_MODULE_10__["default"],selector:()=>_selector__WEBPACK_IMPORTED_MODULE_11__["default"],selectorAll:()=>_selectorAll__WEBPACK_IMPORTED_MODULE_12__["default"],style:()=>_selection_style__WEBPACK_IMPORTED_MODULE_13__.styleValue,touch:()=>_touch__WEBPACK_IMPORTED_MODULE_14__["default"],touches:()=>_touches__WEBPACK_IMPORTED_MODULE_15__["default"],window:()=>_window__WEBPACK_IMPORTED_MODULE_16__["default"]});var _create__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(126);var _creator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(162);var _local__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(169);var _matcher__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(134);var _mouse__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(170);var _namespace__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(151);var _namespaces__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(152);var _point__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(172);var _select__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(127);var _selectAll__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(173);var _selection_index__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(128);var _selector__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(130);var _selectorAll__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(132);var _selection_style__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(153);var _touch__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(174);var _touches__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(175);var _window__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(154);var _selection_on__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(167)},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _creator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(162);var _select__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(127);function __WEBPACK_DEFAULT_EXPORT__(name){return(0,_select__WEBPACK_IMPORTED_MODULE_0__["default"])((0,_creator__WEBPACK_IMPORTED_MODULE_1__["default"])(name).call(document.documentElement))}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _selection_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);function __WEBPACK_DEFAULT_EXPORT__(selector){return typeof selector==="string"?new _selection_index__WEBPACK_IMPORTED_MODULE_0__.Selection([[document.querySelector(selector)]],[document.documentElement]):new _selection_index__WEBPACK_IMPORTED_MODULE_0__.Selection([[selector]],_selection_index__WEBPACK_IMPORTED_MODULE_0__.root)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{Selection:()=>Selection,default:()=>__WEBPACK_DEFAULT_EXPORT__,root:()=>root});var _select__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(129);var _selectAll__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(131);var _filter__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(133);var _data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(135);var _enter__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(136);var _exit__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(139);var _join__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(140);var _merge__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(141);var _order__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(142);var _sort__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(143);var _call__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(144);var _nodes__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(145);var _node__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(146);var _size__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(147);var _empty__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(148);var _each__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(149);var _attr__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(150);var _style__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(153);var _property__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(155);var _classed__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(156);var _text__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(157);var _html__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(158);var _raise__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(159);var _lower__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(160);var _append__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(161);var _insert__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(163);var _remove__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(164);var _clone__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(165);var _datum__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(166);var _on__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(167);var _dispatch__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(168);var root=[null];function Selection(groups,parents){this._groups=groups;this._parents=parents}function selection(){return new Selection([[document.documentElement]],root)}Selection.prototype=selection.prototype={constructor:Selection,select:_select__WEBPACK_IMPORTED_MODULE_0__["default"],selectAll:_selectAll__WEBPACK_IMPORTED_MODULE_1__["default"],filter:_filter__WEBPACK_IMPORTED_MODULE_2__["default"],data:_data__WEBPACK_IMPORTED_MODULE_3__["default"],enter:_enter__WEBPACK_IMPORTED_MODULE_4__["default"],exit:_exit__WEBPACK_IMPORTED_MODULE_5__["default"],join:_join__WEBPACK_IMPORTED_MODULE_6__["default"],merge:_merge__WEBPACK_IMPORTED_MODULE_7__["default"],order:_order__WEBPACK_IMPORTED_MODULE_8__["default"],sort:_sort__WEBPACK_IMPORTED_MODULE_9__["default"],call:_call__WEBPACK_IMPORTED_MODULE_10__["default"],nodes:_nodes__WEBPACK_IMPORTED_MODULE_11__["default"],node:_node__WEBPACK_IMPORTED_MODULE_12__["default"],size:_size__WEBPACK_IMPORTED_MODULE_13__["default"],empty:_empty__WEBPACK_IMPORTED_MODULE_14__["default"],each:_each__WEBPACK_IMPORTED_MODULE_15__["default"],attr:_attr__WEBPACK_IMPORTED_MODULE_16__["default"],style:_style__WEBPACK_IMPORTED_MODULE_17__["default"],property:_property__WEBPACK_IMPORTED_MODULE_18__["default"],classed:_classed__WEBPACK_IMPORTED_MODULE_19__["default"],text:_text__WEBPACK_IMPORTED_MODULE_20__["default"],html:_html__WEBPACK_IMPORTED_MODULE_21__["default"],raise:_raise__WEBPACK_IMPORTED_MODULE_22__["default"],lower:_lower__WEBPACK_IMPORTED_MODULE_23__["default"],append:_append__WEBPACK_IMPORTED_MODULE_24__["default"],insert:_insert__WEBPACK_IMPORTED_MODULE_25__["default"],remove:_remove__WEBPACK_IMPORTED_MODULE_26__["default"],clone:_clone__WEBPACK_IMPORTED_MODULE_27__["default"],datum:_datum__WEBPACK_IMPORTED_MODULE_28__["default"],on:_on__WEBPACK_IMPORTED_MODULE_29__["default"],dispatch:_dispatch__WEBPACK_IMPORTED_MODULE_30__["default"]};const __WEBPACK_DEFAULT_EXPORT__=selection},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(128);var _selector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(130);function __WEBPACK_DEFAULT_EXPORT__(select){if(typeof select!=="function")select=(0,_selector__WEBPACK_IMPORTED_MODULE_0__["default"])(select);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=subgroups[j]=new Array(n),node,subnode,i=0;i<n;++i){if((node=group[i])&&(subnode=select.call(node,node.__data__,i,group))){if("__data__"in node)subnode.__data__=node.__data__;subgroup[i]=subnode}}}return new _index__WEBPACK_IMPORTED_MODULE_1__.Selection(subgroups,this._parents)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function none(){}function __WEBPACK_DEFAULT_EXPORT__(selector){return selector==null?none:function(){return this.querySelector(selector)}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(128);var _selectorAll__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(132);function __WEBPACK_DEFAULT_EXPORT__(select){if(typeof select!=="function")select=(0,_selectorAll__WEBPACK_IMPORTED_MODULE_0__["default"])(select);for(var groups=this._groups,m=groups.length,subgroups=[],parents=[],j=0;j<m;++j){for(var group=groups[j],n=group.length,node,i=0;i<n;++i){if(node=group[i]){subgroups.push(select.call(node,node.__data__,i,group));parents.push(node)}}}return new _index__WEBPACK_IMPORTED_MODULE_1__.Selection(subgroups,parents)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function empty(){return[]}function __WEBPACK_DEFAULT_EXPORT__(selector){return selector==null?empty:function(){return this.querySelectorAll(selector)}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(128);var _matcher__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(134);function __WEBPACK_DEFAULT_EXPORT__(match){if(typeof match!=="function")match=(0,_matcher__WEBPACK_IMPORTED_MODULE_0__["default"])(match);for(var groups=this._groups,m=groups.length,subgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,subgroup=subgroups[j]=[],node,i=0;i<n;++i){if((node=group[i])&&match.call(node,node.__data__,i,group)){subgroup.push(node)}}}return new _index__WEBPACK_IMPORTED_MODULE_1__.Selection(subgroups,this._parents)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(selector){return function(){return this.matches(selector)}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(128);var _enter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(136);var _constant__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(138);var keyPrefix="$";function bindIndex(parent,group,enter,update,exit,data){var i=0,node,groupLength=group.length,dataLength=data.length;for(;i<dataLength;++i){if(node=group[i]){node.__data__=data[i];update[i]=node}else{enter[i]=new _enter__WEBPACK_IMPORTED_MODULE_0__.EnterNode(parent,data[i])}}for(;i<groupLength;++i){if(node=group[i]){exit[i]=node}}}function bindKey(parent,group,enter,update,exit,data,key){var i,node,nodeByKeyValue={},groupLength=group.length,dataLength=data.length,keyValues=new Array(groupLength),keyValue;for(i=0;i<groupLength;++i){if(node=group[i]){keyValues[i]=keyValue=keyPrefix+key.call(node,node.__data__,i,group);if(keyValue in nodeByKeyValue){exit[i]=node}else{nodeByKeyValue[keyValue]=node}}}for(i=0;i<dataLength;++i){keyValue=keyPrefix+key.call(parent,data[i],i,data);if(node=nodeByKeyValue[keyValue]){update[i]=node;node.__data__=data[i];nodeByKeyValue[keyValue]=null}else{enter[i]=new _enter__WEBPACK_IMPORTED_MODULE_0__.EnterNode(parent,data[i])}}for(i=0;i<groupLength;++i){if((node=group[i])&&nodeByKeyValue[keyValues[i]]===node){exit[i]=node}}}function __WEBPACK_DEFAULT_EXPORT__(value,key){if(!value){data=new Array(this.size()),j=-1;this.each(function(d){data[++j]=d});return data}var bind=key?bindKey:bindIndex,parents=this._parents,groups=this._groups;if(typeof value!=="function")value=(0,_constant__WEBPACK_IMPORTED_MODULE_1__["default"])(value);for(var m=groups.length,update=new Array(m),enter=new Array(m),exit=new Array(m),j=0;j<m;++j){var parent=parents[j],group=groups[j],groupLength=group.length,data=value.call(parent,parent&&parent.__data__,j,parents),dataLength=data.length,enterGroup=enter[j]=new Array(dataLength),updateGroup=update[j]=new Array(dataLength),exitGroup=exit[j]=new Array(groupLength);bind(parent,group,enterGroup,updateGroup,exitGroup,data,key);for(var i0=0,i1=0,previous,next;i0<dataLength;++i0){if(previous=enterGroup[i0]){if(i0>=i1)i1=i0+1;while(!(next=updateGroup[i1])&&++i1<dataLength);previous._next=next||null}}}update=new _index__WEBPACK_IMPORTED_MODULE_2__.Selection(update,parents);update._enter=enter;update._exit=exit;return update}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{EnterNode:()=>EnterNode,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _sparse__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(137);var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);function __WEBPACK_DEFAULT_EXPORT__(){return new _index__WEBPACK_IMPORTED_MODULE_0__.Selection(this._enter||this._groups.map(_sparse__WEBPACK_IMPORTED_MODULE_1__["default"]),this._parents)}function EnterNode(parent,datum){this.ownerDocument=parent.ownerDocument;this.namespaceURI=parent.namespaceURI;this._next=null;this._parent=parent;this.__data__=datum}EnterNode.prototype={constructor:EnterNode,appendChild:function(child){return this._parent.insertBefore(child,this._next)},insertBefore:function(child,next){return this._parent.insertBefore(child,next)},querySelector:function(selector){return this._parent.querySelector(selector)},querySelectorAll:function(selector){return this._parent.querySelectorAll(selector)}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(update){return new Array(update.length)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(x){return function(){return x}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _sparse__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(137);var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);function __WEBPACK_DEFAULT_EXPORT__(){return new _index__WEBPACK_IMPORTED_MODULE_0__.Selection(this._exit||this._groups.map(_sparse__WEBPACK_IMPORTED_MODULE_1__["default"]),this._parents)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(onenter,onupdate,onexit){var enter=this.enter(),update=this,exit=this.exit();enter=typeof onenter==="function"?onenter(enter):enter.append(onenter+"");if(onupdate!=null)update=onupdate(update);if(onexit==null)exit.remove();else onexit(exit);return enter&&update?enter.merge(update).order():update}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);function __WEBPACK_DEFAULT_EXPORT__(selection){for(var groups0=this._groups,groups1=selection._groups,m0=groups0.length,m1=groups1.length,m=Math.min(m0,m1),merges=new Array(m0),j=0;j<m;++j){for(var group0=groups0[j],group1=groups1[j],n=group0.length,merge=merges[j]=new Array(n),node,i=0;i<n;++i){if(node=group0[i]||group1[i]){merge[i]=node}}}for(;j<m0;++j){merges[j]=groups0[j]}return new _index__WEBPACK_IMPORTED_MODULE_0__.Selection(merges,this._parents)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){for(var groups=this._groups,j=-1,m=groups.length;++j<m;){for(var group=groups[j],i=group.length-1,next=group[i],node;--i>=0;){if(node=group[i]){if(next&&node.compareDocumentPosition(next)^4)next.parentNode.insertBefore(node,next);next=node}}}return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);function __WEBPACK_DEFAULT_EXPORT__(compare){if(!compare)compare=ascending;function compareNode(a,b){return a&&b?compare(a.__data__,b.__data__):!a-!b}for(var groups=this._groups,m=groups.length,sortgroups=new Array(m),j=0;j<m;++j){for(var group=groups[j],n=group.length,sortgroup=sortgroups[j]=new Array(n),node,i=0;i<n;++i){if(node=group[i]){sortgroup[i]=node}}sortgroup.sort(compareNode)}return new _index__WEBPACK_IMPORTED_MODULE_0__.Selection(sortgroups,this._parents).order()}function ascending(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){var callback=arguments[0];arguments[0]=this;callback.apply(null,arguments);return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){var nodes=new Array(this.size()),i=-1;this.each(function(){nodes[++i]=this});return nodes}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length;i<n;++i){var node=group[i];if(node)return node}}return null}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){var size=0;this.each(function(){++size});return size}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){return!this.node()}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(callback){for(var groups=this._groups,j=0,m=groups.length;j<m;++j){for(var group=groups[j],i=0,n=group.length,node;i<n;++i){if(node=group[i])callback.call(node,node.__data__,i,group)}}return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _namespace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(151);function attrRemove(name){return function(){this.removeAttribute(name)}}function attrRemoveNS(fullname){return function(){this.removeAttributeNS(fullname.space,fullname.local)}}function attrConstant(name,value){return function(){this.setAttribute(name,value)}}function attrConstantNS(fullname,value){return function(){this.setAttributeNS(fullname.space,fullname.local,value)}}function attrFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttribute(name);else this.setAttribute(name,v)}}function attrFunctionNS(fullname,value){return function(){var v=value.apply(this,arguments);if(v==null)this.removeAttributeNS(fullname.space,fullname.local);else this.setAttributeNS(fullname.space,fullname.local,v)}}function __WEBPACK_DEFAULT_EXPORT__(name,value){var fullname=(0,_namespace__WEBPACK_IMPORTED_MODULE_0__["default"])(name);if(arguments.length<2){var node=this.node();return fullname.local?node.getAttributeNS(fullname.space,fullname.local):node.getAttribute(fullname)}return this.each((value==null?fullname.local?attrRemoveNS:attrRemove:typeof value==="function"?fullname.local?attrFunctionNS:attrFunction:fullname.local?attrConstantNS:attrConstant)(fullname,value))}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _namespaces__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(152);function __WEBPACK_DEFAULT_EXPORT__(name){var prefix=name+="",i=prefix.indexOf(":");if(i>=0&&(prefix=name.slice(0,i))!=="xmlns")name=name.slice(i+1);return _namespaces__WEBPACK_IMPORTED_MODULE_0__["default"].hasOwnProperty(prefix)?{space:_namespaces__WEBPACK_IMPORTED_MODULE_0__["default"][prefix],local:name}:name}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,xhtml:()=>xhtml});var xhtml="http://www.w3.org/1999/xhtml";const __WEBPACK_DEFAULT_EXPORT__={svg:"http://www.w3.org/2000/svg",xhtml:xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,styleValue:()=>styleValue});var _window__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(154);function styleRemove(name){return function(){this.style.removeProperty(name)}}function styleConstant(name,value,priority){return function(){this.style.setProperty(name,value,priority)}}function styleFunction(name,value,priority){return function(){var v=value.apply(this,arguments);if(v==null)this.style.removeProperty(name);else this.style.setProperty(name,v,priority)}}function __WEBPACK_DEFAULT_EXPORT__(name,value,priority){return arguments.length>1?this.each((value==null?styleRemove:typeof value==="function"?styleFunction:styleConstant)(name,value,priority==null?"":priority)):styleValue(this.node(),name)}function styleValue(node,name){return node.style.getPropertyValue(name)||(0,_window__WEBPACK_IMPORTED_MODULE_0__["default"])(node).getComputedStyle(node,null).getPropertyValue(name)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(node){return node.ownerDocument&&node.ownerDocument.defaultView||node.document&&node||node.defaultView}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function propertyRemove(name){return function(){delete this[name]}}function propertyConstant(name,value){return function(){this[name]=value}}function propertyFunction(name,value){return function(){var v=value.apply(this,arguments);if(v==null)delete this[name];else this[name]=v}}function __WEBPACK_DEFAULT_EXPORT__(name,value){return arguments.length>1?this.each((value==null?propertyRemove:typeof value==="function"?propertyFunction:propertyConstant)(name,value)):this.node()[name]}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function classArray(string){return string.trim().split(/^|\s+/)}function classList(node){return node.classList||new ClassList(node)}function ClassList(node){this._node=node;this._names=classArray(node.getAttribute("class")||"")}ClassList.prototype={add:function(name){var i=this._names.indexOf(name);if(i<0){this._names.push(name);this._node.setAttribute("class",this._names.join(" "))}},remove:function(name){var i=this._names.indexOf(name);if(i>=0){this._names.splice(i,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(name){return this._names.indexOf(name)>=0}};function classedAdd(node,names){var list=classList(node),i=-1,n=names.length;while(++i<n)list.add(names[i])}function classedRemove(node,names){var list=classList(node),i=-1,n=names.length;while(++i<n)list.remove(names[i])}function classedTrue(names){return function(){classedAdd(this,names)}}function classedFalse(names){return function(){classedRemove(this,names)}}function classedFunction(names,value){return function(){(value.apply(this,arguments)?classedAdd:classedRemove)(this,names)}}function __WEBPACK_DEFAULT_EXPORT__(name,value){var names=classArray(name+"");if(arguments.length<2){var list=classList(this.node()),i=-1,n=names.length;while(++i<n)if(!list.contains(names[i]))return false;return true}return this.each((typeof value==="function"?classedFunction:value?classedTrue:classedFalse)(names,value))}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function textRemove(){this.textContent=""}function textConstant(value){return function(){this.textContent=value}}function textFunction(value){return function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v}}function __WEBPACK_DEFAULT_EXPORT__(value){return arguments.length?this.each(value==null?textRemove:(typeof value==="function"?textFunction:textConstant)(value)):this.node().textContent}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function htmlRemove(){this.innerHTML=""}function htmlConstant(value){return function(){this.innerHTML=value}}function htmlFunction(value){return function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v}}function __WEBPACK_DEFAULT_EXPORT__(value){return arguments.length?this.each(value==null?htmlRemove:(typeof value==="function"?htmlFunction:htmlConstant)(value)):this.node().innerHTML}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function raise(){if(this.nextSibling)this.parentNode.appendChild(this)}function __WEBPACK_DEFAULT_EXPORT__(){return this.each(raise)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function lower(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function __WEBPACK_DEFAULT_EXPORT__(){return this.each(lower)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _creator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(162);function __WEBPACK_DEFAULT_EXPORT__(name){var create=typeof name==="function"?name:(0,_creator__WEBPACK_IMPORTED_MODULE_0__["default"])(name);return this.select(function(){return this.appendChild(create.apply(this,arguments))})}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _namespace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(151);var _namespaces__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(152);function creatorInherit(name){return function(){var document=this.ownerDocument,uri=this.namespaceURI;return uri===_namespaces__WEBPACK_IMPORTED_MODULE_0__.xhtml&&document.documentElement.namespaceURI===_namespaces__WEBPACK_IMPORTED_MODULE_0__.xhtml?document.createElement(name):document.createElementNS(uri,name)}}function creatorFixed(fullname){return function(){return this.ownerDocument.createElementNS(fullname.space,fullname.local)}}function __WEBPACK_DEFAULT_EXPORT__(name){var fullname=(0,_namespace__WEBPACK_IMPORTED_MODULE_1__["default"])(name);return(fullname.local?creatorFixed:creatorInherit)(fullname)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _creator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(162);var _selector__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(130);function constantNull(){return null}function __WEBPACK_DEFAULT_EXPORT__(name,before){var create=typeof name==="function"?name:(0,_creator__WEBPACK_IMPORTED_MODULE_0__["default"])(name),select=before==null?constantNull:typeof before==="function"?before:(0,_selector__WEBPACK_IMPORTED_MODULE_1__["default"])(before);return this.select(function(){return this.insertBefore(create.apply(this,arguments),select.apply(this,arguments)||null)})}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function remove(){var parent=this.parentNode;if(parent)parent.removeChild(this)}function __WEBPACK_DEFAULT_EXPORT__(){return this.each(remove)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function selection_cloneShallow(){var clone=this.cloneNode(false),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function selection_cloneDeep(){var clone=this.cloneNode(true),parent=this.parentNode;return parent?parent.insertBefore(clone,this.nextSibling):clone}function __WEBPACK_DEFAULT_EXPORT__(deep){return this.select(deep?selection_cloneDeep:selection_cloneShallow)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(value){return arguments.length?this.property("__data__",value):this.node().__data__}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{customEvent:()=>customEvent,default:()=>__WEBPACK_DEFAULT_EXPORT__,event:()=>event});var filterEvents={};var event=null;if(typeof document!=="undefined"){var element=document.documentElement;if(!("onmouseenter"in element)){filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"}}}function filterContextListener(listener,index,group){listener=contextListener(listener,index,group);return function(event){var related=event.relatedTarget;if(!related||related!==this&&!(related.compareDocumentPosition(this)&8)){listener.call(this,event)}}}function contextListener(listener,index,group){return function(event1){var event0=event;event=event1;try{listener.call(this,this.__data__,index,group)}finally{event=event0}}}function parseTypenames(typenames){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)name=t.slice(i+1),t=t.slice(0,i);return{type:t,name:name}})}function onRemove(typename){return function(){var on=this.__on;if(!on)return;for(var j=0,i=-1,m=on.length,o;j<m;++j){if(o=on[j],(!typename.type||o.type===typename.type)&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.capture)}else{on[++i]=o}}if(++i)on.length=i;else delete this.__on}}function onAdd(typename,value,capture){var wrap=filterEvents.hasOwnProperty(typename.type)?filterContextListener:contextListener;return function(d,i,group){var on=this.__on,o,listener=wrap(value,i,group);if(on)for(var j=0,m=on.length;j<m;++j){if((o=on[j]).type===typename.type&&o.name===typename.name){this.removeEventListener(o.type,o.listener,o.capture);this.addEventListener(o.type,o.listener=listener,o.capture=capture);o.value=value;return}}this.addEventListener(typename.type,listener,capture);o={type:typename.type,name:typename.name,value:value,listener:listener,capture:capture};if(!on)this.__on=[o];else on.push(o)}}function __WEBPACK_DEFAULT_EXPORT__(typename,value,capture){var typenames=parseTypenames(typename+""),i,n=typenames.length,t;if(arguments.length<2){var on=this.node().__on;if(on)for(var j=0,m=on.length,o;j<m;++j){for(i=0,o=on[j];i<n;++i){if((t=typenames[i]).type===o.type&&t.name===o.name){return o.value}}}return}on=value?onAdd:onRemove;if(capture==null)capture=false;for(i=0;i<n;++i)this.each(on(typenames[i],value,capture));return this}function customEvent(event1,listener,that,args){var event0=event;event1.sourceEvent=event;event=event1;try{return listener.apply(that,args)}finally{event=event0}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _window__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(154);function dispatchEvent(node,type,params){var window=(0,_window__WEBPACK_IMPORTED_MODULE_0__["default"])(node),event=window.CustomEvent;if(typeof event==="function"){event=new event(type,params)}else{event=window.document.createEvent("Event");if(params)event.initEvent(type,params.bubbles,params.cancelable),event.detail=params.detail;else event.initEvent(type,false,false)}node.dispatchEvent(event)}function dispatchConstant(type,params){return function(){return dispatchEvent(this,type,params)}}function dispatchFunction(type,params){return function(){return dispatchEvent(this,type,params.apply(this,arguments))}}function __WEBPACK_DEFAULT_EXPORT__(type,params){return this.each((typeof params==="function"?dispatchFunction:dispatchConstant)(type,params))}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>local});var nextId=0;function local(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=local.prototype={constructor:Local,get:function(node){var id=this._;while(!(id in node))if(!(node=node.parentNode))return;return node[id]},set:function(node,value){return node[this._]=value},remove:function(node){return this._ in node&&delete node[this._]},toString:function(){return this._}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _sourceEvent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(171);var _point__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(172);function __WEBPACK_DEFAULT_EXPORT__(node){var event=(0,_sourceEvent__WEBPACK_IMPORTED_MODULE_0__["default"])();if(event.changedTouches)event=event.changedTouches[0];return(0,_point__WEBPACK_IMPORTED_MODULE_1__["default"])(node,event)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _selection_on__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(167);function __WEBPACK_DEFAULT_EXPORT__(){var current=_selection_on__WEBPACK_IMPORTED_MODULE_0__.event,source;while(source=current.sourceEvent)current=source;return current}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(node,event){var svg=node.ownerSVGElement||node;if(svg.createSVGPoint){var point=svg.createSVGPoint();point.x=event.clientX,point.y=event.clientY;point=point.matrixTransform(node.getScreenCTM().inverse());return[point.x,point.y]}var rect=node.getBoundingClientRect();return[event.clientX-rect.left-node.clientLeft,event.clientY-rect.top-node.clientTop]}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _selection_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(128);function __WEBPACK_DEFAULT_EXPORT__(selector){return typeof selector==="string"?new _selection_index__WEBPACK_IMPORTED_MODULE_0__.Selection([document.querySelectorAll(selector)],[document.documentElement]):new _selection_index__WEBPACK_IMPORTED_MODULE_0__.Selection([selector==null?[]:selector],_selection_index__WEBPACK_IMPORTED_MODULE_0__.root)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _sourceEvent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(171);var _point__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(172);function __WEBPACK_DEFAULT_EXPORT__(node,touches,identifier){if(arguments.length<3)identifier=touches,touches=(0,_sourceEvent__WEBPACK_IMPORTED_MODULE_0__["default"])().changedTouches;for(var i=0,n=touches?touches.length:0,touch;i<n;++i){if((touch=touches[i]).identifier===identifier){return(0,_point__WEBPACK_IMPORTED_MODULE_1__["default"])(node,touch)}}return null}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _sourceEvent__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(171);var _point__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(172);function __WEBPACK_DEFAULT_EXPORT__(node,touches){if(touches==null)touches=(0,_sourceEvent__WEBPACK_IMPORTED_MODULE_0__["default"])().touches;for(var i=0,n=touches?touches.length:0,points=new Array(n);i<n;++i){points[i]=(0,_point__WEBPACK_IMPORTED_MODULE_1__["default"])(node,touches[i])}return points}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{forceCenter:()=>_center_js__WEBPACK_IMPORTED_MODULE_0__["default"],forceCollide:()=>_collide_js__WEBPACK_IMPORTED_MODULE_1__["default"],forceLink:()=>_link_js__WEBPACK_IMPORTED_MODULE_2__["default"],forceManyBody:()=>_manyBody_js__WEBPACK_IMPORTED_MODULE_3__["default"],forceRadial:()=>_radial_js__WEBPACK_IMPORTED_MODULE_4__["default"],forceSimulation:()=>_simulation_js__WEBPACK_IMPORTED_MODULE_5__["default"],forceX:()=>_x_js__WEBPACK_IMPORTED_MODULE_6__["default"],forceY:()=>_y_js__WEBPACK_IMPORTED_MODULE_7__["default"]});var _center_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(177);var _collide_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(178);var _link_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(195);var _manyBody_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(196);var _radial_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(201);var _simulation_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(197);var _x_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(202);var _y_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(203)},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(x,y){var nodes,strength=1;if(x==null)x=0;if(y==null)y=0;function force(){var i,n=nodes.length,node,sx=0,sy=0;for(i=0;i<n;++i){node=nodes[i],sx+=node.x,sy+=node.y}for(sx=(sx/n-x)*strength,sy=(sy/n-y)*strength,i=0;i<n;++i){node=nodes[i],node.x-=sx,node.y-=sy}}force.initialize=function(_){nodes=_};force.x=function(_){return arguments.length?(x=+_,force):x};force.y=function(_){return arguments.length?(y=+_,force):y};force.strength=function(_){return arguments.length?(strength=+_,force):strength};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var d3_quadtree__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(180);var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);var _jiggle_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(194);function x(d){return d.x+d.vx}function y(d){return d.y+d.vy}function __WEBPACK_DEFAULT_EXPORT__(radius){var nodes,radii,random,strength=1,iterations=1;if(typeof radius!=="function")radius=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(radius==null?1:+radius);function force(){var i,n=nodes.length,tree,node,xi,yi,ri,ri2;for(var k=0;k<iterations;++k){tree=(0,d3_quadtree__WEBPACK_IMPORTED_MODULE_1__["default"])(nodes,x,y).visitAfter(prepare);for(i=0;i<n;++i){node=nodes[i];ri=radii[node.index],ri2=ri*ri;xi=node.x+node.vx;yi=node.y+node.vy;tree.visit(apply)}}function apply(quad,x0,y0,x1,y1){var data=quad.data,rj=quad.r,r=ri+rj;if(data){if(data.index>node.index){var x=xi-data.x-data.vx,y=yi-data.y-data.vy,l=x*x+y*y;if(l<r*r){if(x===0)x=(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_2__["default"])(random),l+=x*x;if(y===0)y=(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_2__["default"])(random),l+=y*y;l=(r-(l=Math.sqrt(l)))/l*strength;node.vx+=(x*=l)*(r=(rj*=rj)/(ri2+rj));node.vy+=(y*=l)*r;data.vx-=x*(r=1-r);data.vy-=y*r}}return}return x0>xi+r||x1<xi-r||y0>yi+r||y1<yi-r}}function prepare(quad){if(quad.data)return quad.r=radii[quad.data.index];for(var i=quad.r=0;i<4;++i){if(quad[i]&&quad[i].r>quad.r){quad.r=quad[i].r}}}function initialize(){if(!nodes)return;var i,n=nodes.length,node;radii=new Array(n);for(i=0;i<n;++i)node=nodes[i],radii[node.index]=+radius(node,i,nodes)}force.initialize=function(_nodes,_random){nodes=_nodes;random=_random;initialize()};force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations};force.strength=function(_){return arguments.length?(strength=+_,force):strength};force.radius=function(_){return arguments.length?(radius=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):radius};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(x){return function(){return x}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>quadtree});var _add_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(183);var _cover_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(184);var _data_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(185);var _extent_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(186);var _find_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(187);var _remove_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(189);var _root_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(190);var _size_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(191);var _visit_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(192);var _visitAfter_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(193);var _x_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(181);var _y_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(182);function quadtree(nodes,x,y){var tree=new Quadtree(x==null?_x_js__WEBPACK_IMPORTED_MODULE_0__.defaultX:x,y==null?_y_js__WEBPACK_IMPORTED_MODULE_1__.defaultY:y,NaN,NaN,NaN,NaN);return nodes==null?tree:tree.addAll(nodes)}function Quadtree(x,y,x0,y0,x1,y1){this._x=x;this._y=y;this._x0=x0;this._y0=y0;this._x1=x1;this._y1=y1;this._root=undefined}function leaf_copy(leaf){var copy={data:leaf.data},next=copy;while(leaf=leaf.next)next=next.next={data:leaf.data};return copy}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var copy=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),node=this._root,nodes,child;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;nodes=[{source:node,target:copy._root=new Array(4)}];while(node=nodes.pop()){for(var i=0;i<4;++i){if(child=node.source[i]){if(child.length)nodes.push({source:child,target:node.target[i]=new Array(4)});else node.target[i]=leaf_copy(child)}}}return copy};treeProto.add=_add_js__WEBPACK_IMPORTED_MODULE_2__["default"];treeProto.addAll=_add_js__WEBPACK_IMPORTED_MODULE_2__.addAll;treeProto.cover=_cover_js__WEBPACK_IMPORTED_MODULE_3__["default"];treeProto.data=_data_js__WEBPACK_IMPORTED_MODULE_4__["default"];treeProto.extent=_extent_js__WEBPACK_IMPORTED_MODULE_5__["default"];treeProto.find=_find_js__WEBPACK_IMPORTED_MODULE_6__["default"];treeProto.remove=_remove_js__WEBPACK_IMPORTED_MODULE_7__["default"];treeProto.removeAll=_remove_js__WEBPACK_IMPORTED_MODULE_7__.removeAll;treeProto.root=_root_js__WEBPACK_IMPORTED_MODULE_8__["default"];treeProto.size=_size_js__WEBPACK_IMPORTED_MODULE_9__["default"];treeProto.visit=_visit_js__WEBPACK_IMPORTED_MODULE_10__["default"];treeProto.visitAfter=_visitAfter_js__WEBPACK_IMPORTED_MODULE_11__["default"];treeProto.x=_x_js__WEBPACK_IMPORTED_MODULE_0__["default"];treeProto.y=_y_js__WEBPACK_IMPORTED_MODULE_1__["default"]},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,defaultX:()=>defaultX});function defaultX(d){return d[0]}function __WEBPACK_DEFAULT_EXPORT__(_){return arguments.length?(this._x=_,this):this._x}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,defaultY:()=>defaultY});function defaultY(d){return d[1]}function __WEBPACK_DEFAULT_EXPORT__(_){return arguments.length?(this._y=_,this):this._y}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{addAll:()=>addAll,default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(d){const x=+this._x.call(null,d),y=+this._y.call(null,d);return add(this.cover(x,y),x,y,d)}function add(tree,x,y,d){if(isNaN(x)||isNaN(y))return tree;var parent,node=tree._root,leaf={data:d},x0=tree._x0,y0=tree._y0,x1=tree._x1,y1=tree._y1,xm,ym,xp,yp,right,bottom,i,j;if(!node)return tree._root=leaf,tree;while(node.length){if(right=x>=(xm=(x0+x1)/2))x0=xm;else x1=xm;if(bottom=y>=(ym=(y0+y1)/2))y0=ym;else y1=ym;if(parent=node,!(node=node[i=bottom<<1|right]))return parent[i]=leaf,tree}xp=+tree._x.call(null,node.data);yp=+tree._y.call(null,node.data);if(x===xp&&y===yp)return leaf.next=node,parent?parent[i]=leaf:tree._root=leaf,tree;do{parent=parent?parent[i]=new Array(4):tree._root=new Array(4);if(right=x>=(xm=(x0+x1)/2))x0=xm;else x1=xm;if(bottom=y>=(ym=(y0+y1)/2))y0=ym;else y1=ym}while((i=bottom<<1|right)===(j=(yp>=ym)<<1|xp>=xm));return parent[j]=node,parent[i]=leaf,tree}function addAll(data){var d,i,n=data.length,x,y,xz=new Array(n),yz=new Array(n),x0=Infinity,y0=Infinity,x1=-Infinity,y1=-Infinity;for(i=0;i<n;++i){if(isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d)))continue;xz[i]=x;yz[i]=y;if(x<x0)x0=x;if(x>x1)x1=x;if(y<y0)y0=y;if(y>y1)y1=y}if(x0>x1||y0>y1)return this;this.cover(x0,y0).cover(x1,y1);for(i=0;i<n;++i){add(this,xz[i],yz[i],data[i])}return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(x,y){if(isNaN(x=+x)||isNaN(y=+y))return this;var x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1;if(isNaN(x0)){x1=(x0=Math.floor(x))+1;y1=(y0=Math.floor(y))+1}else{var z=x1-x0||1,node=this._root,parent,i;while(x0>x||x>=x1||y0>y||y>=y1){i=(y<y0)<<1|x<x0;parent=new Array(4),parent[i]=node,node=parent,z*=2;switch(i){case 0:x1=x0+z,y1=y0+z;break;case 1:x0=x1-z,y1=y0+z;break;case 2:x1=x0+z,y0=y1-z;break;case 3:x0=x1-z,y0=y1-z;break}}if(this._root&&this._root.length)this._root=node}this._x0=x0;this._y0=y0;this._x1=x1;this._y1=y1;return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){var data=[];this.visit(function(node){if(!node.length)do{data.push(node.data)}while(node=node.next)});return data}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?undefined:[[this._x0,this._y0],[this._x1,this._y1]]}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _quad_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(188);function __WEBPACK_DEFAULT_EXPORT__(x,y,radius){var data,x0=this._x0,y0=this._y0,x1,y1,x2,y2,x3=this._x1,y3=this._y1,quads=[],node=this._root,q,i;if(node)quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](node,x0,y0,x3,y3));if(radius==null)radius=Infinity;else{x0=x-radius,y0=y-radius;x3=x+radius,y3=y+radius;radius*=radius}while(q=quads.pop()){if(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(x2=q.x1)<x0||(y2=q.y1)<y0)continue;if(node.length){var xm=(x1+x2)/2,ym=(y1+y2)/2;quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](node[3],xm,ym,x2,y2),new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](node[2],x1,ym,xm,y2),new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](node[1],xm,y1,x2,ym),new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](node[0],x1,y1,xm,ym));if(i=(y>=ym)<<1|x>=xm){q=quads[quads.length-1];quads[quads.length-1]=quads[quads.length-1-i];quads[quads.length-1-i]=q}}else{var dx=x-+this._x.call(null,node.data),dy=y-+this._y.call(null,node.data),d2=dx*dx+dy*dy;if(d2<radius){var d=Math.sqrt(radius=d2);x0=x-d,y0=y-d;x3=x+d,y3=y+d;data=node.data}}}return data}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(node,x0,y0,x1,y1){this.node=node;this.x0=x0;this.y0=y0;this.x1=x1;this.y1=y1}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,removeAll:()=>removeAll});function __WEBPACK_DEFAULT_EXPORT__(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d)))return this;var parent,node=this._root,retainer,previous,next,x0=this._x0,y0=this._y0,x1=this._x1,y1=this._y1,x,y,xm,ym,right,bottom,i,j;if(!node)return this;if(node.length)while(true){if(right=x>=(xm=(x0+x1)/2))x0=xm;else x1=xm;if(bottom=y>=(ym=(y0+y1)/2))y0=ym;else y1=ym;if(!(parent=node,node=node[i=bottom<<1|right]))return this;if(!node.length)break;if(parent[i+1&3]||parent[i+2&3]||parent[i+3&3])retainer=parent,j=i}while(node.data!==d)if(!(previous=node,node=node.next))return this;if(next=node.next)delete node.next;if(previous)return next?previous.next=next:delete previous.next,this;if(!parent)return this._root=next,this;next?parent[i]=next:delete parent[i];if((node=parent[0]||parent[1]||parent[2]||parent[3])&&node===(parent[3]||parent[2]||parent[1]||parent[0])&&!node.length){if(retainer)retainer[j]=node;else this._root=node}return this}function removeAll(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){return this._root}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(){var size=0;this.visit(function(node){if(!node.length)do{++size}while(node=node.next)});return size}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _quad_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(188);function __WEBPACK_DEFAULT_EXPORT__(callback){var quads=[],q,node=this._root,child,x0,y0,x1,y1;if(node)quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](node,this._x0,this._y0,this._x1,this._y1));while(q=quads.pop()){if(!callback(node=q.node,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2;if(child=node[3])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,xm,ym,x1,y1));if(child=node[2])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,x0,ym,xm,y1));if(child=node[1])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,xm,y0,x1,ym));if(child=node[0])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,x0,y0,xm,ym))}}return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _quad_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(188);function __WEBPACK_DEFAULT_EXPORT__(callback){var quads=[],next=[],q;if(this._root)quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](this._root,this._x0,this._y0,this._x1,this._y1));while(q=quads.pop()){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,x1=q.x1,y1=q.y1,xm=(x0+x1)/2,ym=(y0+y1)/2;if(child=node[0])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,x0,y0,xm,ym));if(child=node[1])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,xm,y0,x1,ym));if(child=node[2])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,x0,ym,xm,y1));if(child=node[3])quads.push(new _quad_js__WEBPACK_IMPORTED_MODULE_0__["default"](child,xm,ym,x1,y1))}next.push(q)}while(q=next.pop()){callback(q.node,q.x0,q.y0,q.x1,q.y1)}return this}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});function __WEBPACK_DEFAULT_EXPORT__(random){return(random()-.5)*1e-6}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);var _jiggle_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(194);function index(d){return d.index}function find(nodeById,nodeId){var node=nodeById.get(nodeId);if(!node)throw new Error("node not found: "+nodeId);return node}function __WEBPACK_DEFAULT_EXPORT__(links){var id=index,strength=defaultStrength,strengths,distance=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(30),distances,nodes,count,bias,random,iterations=1;if(links==null)links=[];function defaultStrength(link){return 1/Math.min(count[link.source.index],count[link.target.index])}function force(alpha){for(var k=0,n=links.length;k<iterations;++k){for(var i=0,link,source,target,x,y,l,b;i<n;++i){link=links[i],source=link.source,target=link.target;x=target.x+target.vx-source.x-source.vx||(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_1__["default"])(random);y=target.y+target.vy-source.y-source.vy||(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_1__["default"])(random);l=Math.sqrt(x*x+y*y);l=(l-distances[i])/l*alpha*strengths[i];x*=l,y*=l;target.vx-=x*(b=bias[i]);target.vy-=y*b;source.vx+=x*(b=1-b);source.vy+=y*b}}}function initialize(){if(!nodes)return;var i,n=nodes.length,m=links.length,nodeById=new Map(nodes.map((d,i)=>[id(d,i,nodes),d])),link;for(i=0,count=new Array(n);i<m;++i){link=links[i],link.index=i;if(typeof link.source!=="object")link.source=find(nodeById,link.source);if(typeof link.target!=="object")link.target=find(nodeById,link.target);count[link.source.index]=(count[link.source.index]||0)+1;count[link.target.index]=(count[link.target.index]||0)+1}for(i=0,bias=new Array(m);i<m;++i){link=links[i],bias[i]=count[link.source.index]/(count[link.source.index]+count[link.target.index])}strengths=new Array(m),initializeStrength();distances=new Array(m),initializeDistance()}function initializeStrength(){if(!nodes)return;for(var i=0,n=links.length;i<n;++i){strengths[i]=+strength(links[i],i,links)}}function initializeDistance(){if(!nodes)return;for(var i=0,n=links.length;i<n;++i){distances[i]=+distance(links[i],i,links)}}force.initialize=function(_nodes,_random){nodes=_nodes;random=_random;initialize()};force.links=function(_){return arguments.length?(links=_,initialize(),force):links};force.id=function(_){return arguments.length?(id=_,force):id};force.iterations=function(_){return arguments.length?(iterations=+_,force):iterations};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initializeStrength(),force):strength};force.distance=function(_){return arguments.length?(distance=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initializeDistance(),force):distance};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var d3_quadtree__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(180);var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);var _jiggle_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(194);var _simulation_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(197);function __WEBPACK_DEFAULT_EXPORT__(){var nodes,node,random,alpha,strength=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(-30),strengths,distanceMin2=1,distanceMax2=Infinity,theta2=.81;function force(_){var i,n=nodes.length,tree=(0,d3_quadtree__WEBPACK_IMPORTED_MODULE_1__["default"])(nodes,_simulation_js__WEBPACK_IMPORTED_MODULE_2__.x,_simulation_js__WEBPACK_IMPORTED_MODULE_2__.y).visitAfter(accumulate);for(alpha=_,i=0;i<n;++i)node=nodes[i],tree.visit(apply)}function initialize(){if(!nodes)return;var i,n=nodes.length,node;strengths=new Array(n);for(i=0;i<n;++i)node=nodes[i],strengths[node.index]=+strength(node,i,nodes)}function accumulate(quad){var strength=0,q,c,weight=0,x,y,i;if(quad.length){for(x=y=i=0;i<4;++i){if((q=quad[i])&&(c=Math.abs(q.value))){strength+=q.value,weight+=c,x+=c*q.x,y+=c*q.y}}quad.x=x/weight;quad.y=y/weight}else{q=quad;q.x=q.data.x;q.y=q.data.y;do{strength+=strengths[q.data.index]}while(q=q.next)}quad.value=strength}function apply(quad,x1,_,x2){if(!quad.value)return true;var x=quad.x-node.x,y=quad.y-node.y,w=x2-x1,l=x*x+y*y;if(w*w/theta2<l){if(l<distanceMax2){if(x===0)x=(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_3__["default"])(random),l+=x*x;if(y===0)y=(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_3__["default"])(random),l+=y*y;if(l<distanceMin2)l=Math.sqrt(distanceMin2*l);node.vx+=x*quad.value*alpha/l;node.vy+=y*quad.value*alpha/l}return true}else if(quad.length||l>=distanceMax2)return;if(quad.data!==node||quad.next){if(x===0)x=(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_3__["default"])(random),l+=x*x;if(y===0)y=(0,_jiggle_js__WEBPACK_IMPORTED_MODULE_3__["default"])(random),l+=y*y;if(l<distanceMin2)l=Math.sqrt(distanceMin2*l)}do{if(quad.data!==node){w=strengths[quad.data.index]*alpha/l;node.vx+=x*w;node.vy+=y*w}}while(quad=quad.next)}force.initialize=function(_nodes,_random){nodes=_nodes;random=_random;initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):strength};force.distanceMin=function(_){return arguments.length?(distanceMin2=_*_,force):Math.sqrt(distanceMin2)};force.distanceMax=function(_){return arguments.length?(distanceMax2=_*_,force):Math.sqrt(distanceMax2)};force.theta=function(_){return arguments.length?(theta2=_*_,force):Math.sqrt(theta2)};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,x:()=>x,y:()=>y});var d3_dispatch__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(199);var d3_timer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(198);var _lcg_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(200);function x(d){return d.x}function y(d){return d.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function __WEBPACK_DEFAULT_EXPORT__(nodes){var simulation,alpha=1,alphaMin=.001,alphaDecay=1-Math.pow(alphaMin,1/300),alphaTarget=0,velocityDecay=.6,forces=new Map,stepper=(0,d3_timer__WEBPACK_IMPORTED_MODULE_0__.timer)(step),event=(0,d3_dispatch__WEBPACK_IMPORTED_MODULE_1__["default"])("tick","end"),random=(0,_lcg_js__WEBPACK_IMPORTED_MODULE_2__["default"])();if(nodes==null)nodes=[];function step(){tick();event.call("tick",simulation);if(alpha<alphaMin){stepper.stop();event.call("end",simulation)}}function tick(iterations){var i,n=nodes.length,node;if(iterations===undefined)iterations=1;for(var k=0;k<iterations;++k){alpha+=(alphaTarget-alpha)*alphaDecay;forces.forEach(function(force){force(alpha)});for(i=0;i<n;++i){node=nodes[i];if(node.fx==null)node.x+=node.vx*=velocityDecay;else node.x=node.fx,node.vx=0;if(node.fy==null)node.y+=node.vy*=velocityDecay;else node.y=node.fy,node.vy=0}}return simulation}function initializeNodes(){for(var i=0,n=nodes.length,node;i<n;++i){node=nodes[i],node.index=i;if(node.fx!=null)node.x=node.fx;if(node.fy!=null)node.y=node.fy;if(isNaN(node.x)||isNaN(node.y)){var radius=initialRadius*Math.sqrt(.5+i),angle=i*initialAngle;node.x=radius*Math.cos(angle);node.y=radius*Math.sin(angle)}if(isNaN(node.vx)||isNaN(node.vy)){node.vx=node.vy=0}}}function initializeForce(force){if(force.initialize)force.initialize(nodes,random);return force}initializeNodes();return simulation={tick:tick,restart:function(){return stepper.restart(step),simulation},stop:function(){return stepper.stop(),simulation},nodes:function(_){return arguments.length?(nodes=_,initializeNodes(),forces.forEach(initializeForce),simulation):nodes},alpha:function(_){return arguments.length?(alpha=+_,simulation):alpha},alphaMin:function(_){return arguments.length?(alphaMin=+_,simulation):alphaMin},alphaDecay:function(_){return arguments.length?(alphaDecay=+_,simulation):+alphaDecay},alphaTarget:function(_){return arguments.length?(alphaTarget=+_,simulation):alphaTarget},velocityDecay:function(_){return arguments.length?(velocityDecay=1-_,simulation):1-velocityDecay},randomSource:function(_){return arguments.length?(random=_,forces.forEach(initializeForce),simulation):random},force:function(name,_){return arguments.length>1?(_==null?forces.delete(name):forces.set(name,initializeForce(_)),simulation):forces.get(name)},find:function(x,y,radius){var i=0,n=nodes.length,dx,dy,d2,node,closest;if(radius==null)radius=Infinity;else radius*=radius;for(i=0;i<n;++i){node=nodes[i];dx=x-node.x;dy=y-node.y;d2=dx*dx+dy*dy;if(d2<radius)closest=node,radius=d2}return closest},on:function(name,_){return arguments.length>1?(event.on(name,_),simulation):event.on(name)}}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{Timer:()=>Timer,now:()=>now,timer:()=>timer,timerFlush:()=>timerFlush});var frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance==="object"&&performance.now?performance:Date,setFrame=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(f){setTimeout(f,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(callback,delay,time){if(typeof callback!=="function")throw new TypeError("callback is not a function");time=(time==null?now():+time)+(delay==null?0:+delay);if(!this._next&&taskTail!==this){if(taskTail)taskTail._next=this;else taskHead=this;taskTail=this}this._call=callback;this._time=time;sleep()},stop:function(){if(this._call){this._call=null;this._time=Infinity;sleep()}}};function timer(callback,delay,time){var t=new Timer;t.restart(callback,delay,time);return t}function timerFlush(){now();++frame;var t=taskHead,e;while(t){if((e=clockNow-t._time)>=0)t._call.call(null,e);t=t._next}--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew;frame=timeout=0;try{timerFlush()}finally{frame=0;nap();clockNow=0}}function poke(){var now=clock.now(),delay=now-clockLast;if(delay>pokeDelay)clockSkew-=delay,clockLast=now}function nap(){var t0,t1=taskHead,t2,time=Infinity;while(t1){if(t1._call){if(time>t1._time)time=t1._time;t0=t1,t1=t1._next}else{t2=t1._next,t1._next=null;t1=t0?t0._next=t2:taskHead=t2}}taskTail=t0;sleep(time)}function sleep(time){if(frame)return;if(timeout)timeout=clearTimeout(timeout);var delay=time-clockNow;if(delay>24){if(time<Infinity)timeout=setTimeout(wake,time-clock.now()-clockSkew);if(interval)interval=clearInterval(interval)}else{if(!interval)clockLast=clock.now(),interval=setInterval(poke,pokeDelay);frame=1,setFrame(wake)}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var noop={value:()=>{}};function dispatch(){for(var i=0,n=arguments.length,_={},t;i<n;++i){if(!(t=arguments[i]+"")||t in _||/[\s.]/.test(t))throw new Error("illegal type: "+t);_[t]=[]}return new Dispatch(_)}function Dispatch(_){this._=_}function parseTypenames(typenames,types){return typenames.trim().split(/^|\s+/).map(function(t){var name="",i=t.indexOf(".");if(i>=0)name=t.slice(i+1),t=t.slice(0,i);if(t&&!types.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:name}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(typename,callback){var _=this._,T=parseTypenames(typename+"",_),t,i=-1,n=T.length;if(arguments.length<2){while(++i<n)if((t=(typename=T[i]).type)&&(t=get(_[t],typename.name)))return t;return}if(callback!=null&&typeof callback!=="function")throw new Error("invalid callback: "+callback);while(++i<n){if(t=(typename=T[i]).type)_[t]=set(_[t],typename.name,callback);else if(callback==null)for(t in _)_[t]=set(_[t],typename.name,null)}return this},copy:function(){var copy={},_=this._;for(var t in _)copy[t]=_[t].slice();return new Dispatch(copy)},call:function(type,that){if((n=arguments.length-2)>0)for(var args=new Array(n),i=0,n,t;i<n;++i)args[i]=arguments[i+2];if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)},apply:function(type,that,args){if(!this._.hasOwnProperty(type))throw new Error("unknown type: "+type);for(var t=this._[type],i=0,n=t.length;i<n;++i)t[i].value.apply(that,args)}};function get(type,name){for(var i=0,n=type.length,c;i<n;++i){if((c=type[i]).name===name){return c.value}}}function set(type,name,callback){for(var i=0,n=type.length;i<n;++i){if(type[i].name===name){type[i]=noop,type=type.slice(0,i).concat(type.slice(i+1));break}}if(callback!=null)type.push({name:name,value:callback});return type}const __WEBPACK_DEFAULT_EXPORT__=dispatch},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const a=1664525;const c=1013904223;const m=4294967296;function __WEBPACK_DEFAULT_EXPORT__(){let s=1;return()=>(s=(a*s+c)%m)/m}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);function __WEBPACK_DEFAULT_EXPORT__(radius,x,y){var nodes,strength=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(.1),strengths,radiuses;if(typeof radius!=="function")radius=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+radius);if(x==null)x=0;if(y==null)y=0;function force(alpha){for(var i=0,n=nodes.length;i<n;++i){var node=nodes[i],dx=node.x-x||1e-6,dy=node.y-y||1e-6,r=Math.sqrt(dx*dx+dy*dy),k=(radiuses[i]-r)*strengths[i]*alpha/r;node.vx+=dx*k;node.vy+=dy*k}}function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);radiuses=new Array(n);for(i=0;i<n;++i){radiuses[i]=+radius(nodes[i],i,nodes);strengths[i]=isNaN(radiuses[i])?0:+strength(nodes[i],i,nodes)}}force.initialize=function(_){nodes=_,initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):strength};force.radius=function(_){return arguments.length?(radius=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):radius};force.x=function(_){return arguments.length?(x=+_,force):x};force.y=function(_){return arguments.length?(y=+_,force):y};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);function __WEBPACK_DEFAULT_EXPORT__(x){var strength=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(.1),nodes,strengths,xz;if(typeof x!=="function")x=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(x==null?0:+x);function force(alpha){for(var i=0,n=nodes.length,node;i<n;++i){node=nodes[i],node.vx+=(xz[i]-node.x)*strengths[i]*alpha}}function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);xz=new Array(n);for(i=0;i<n;++i){strengths[i]=isNaN(xz[i]=+x(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}force.initialize=function(_){nodes=_;initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):strength};force.x=function(_){return arguments.length?(x=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):x};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);function __WEBPACK_DEFAULT_EXPORT__(y){var strength=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(.1),nodes,strengths,yz;if(typeof y!=="function")y=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(y==null?0:+y);function force(alpha){for(var i=0,n=nodes.length,node;i<n;++i){node=nodes[i],node.vy+=(yz[i]-node.y)*strengths[i]*alpha}}function initialize(){if(!nodes)return;var i,n=nodes.length;strengths=new Array(n);yz=new Array(n);for(i=0;i<n;++i){strengths[i]=isNaN(yz[i]=+y(nodes[i],i,nodes))?0:+strength(nodes[i],i,nodes)}}force.initialize=function(_){nodes=_;initialize()};force.strength=function(_){return arguments.length?(strength=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):strength};force.y=function(_){return arguments.length?(y=typeof _==="function"?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__["default"])(+_),initialize(),force):y};return force}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _default_options__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(205);var _slide__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(206);var _utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(207);var _modules_install__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(208);class Shower extends EventTarget{constructor(options){super();(0,_utils__WEBPACK_IMPORTED_MODULE_2__.defineReadOnly)(this,{options:{..._default_options__WEBPACK_IMPORTED_MODULE_0__["default"],...options}});this._mode="list";this._isStarted=false;this._container=null}configure(options){if(this._isStarted){throw new _utils__WEBPACK_IMPORTED_MODULE_2__.ShowerError("Shower should be configured before it is started.")}Object.assign(this.options,options)}start(){if(this._isStarted)return;const{containerSelector:containerSelector}=this.options;this._container=document.querySelector(containerSelector);if(!this._container){throw new _utils__WEBPACK_IMPORTED_MODULE_2__.ShowerError(`Shower container with selector '${containerSelector}' was not found.`)}this._initSlides();(0,_modules_install__WEBPACK_IMPORTED_MODULE_3__["default"])(this);this._isStarted=true;this.dispatchEvent(new Event("start"))}_initSlides(){const visibleSlideSelector=`${this.options.slideSelector}:not([hidden])`;const visibleSlideElements=this._container.querySelectorAll(visibleSlideSelector);this.slides=Array.from(visibleSlideElements,(slideElement,index)=>{if(!slideElement.id){slideElement.id=index+1}return new _slide__WEBPACK_IMPORTED_MODULE_1__["default"](this,slideElement)})}_setMode(mode){if(mode===this._mode)return;this._mode=mode;this.dispatchEvent(new Event("modechange"))}dispatchEvent(event){if(!this._isStarted)return false;return super.dispatchEvent(event)}get container(){return this._container}get isFullMode(){return this._mode==="full"}get isListMode(){return this._mode==="list"}get activeSlide(){return this.slides.find(slide=>slide.isActive)}get activeSlideIndex(){return this.slides.findIndex(slide=>slide.isActive)}enterFullMode(){this._setMode("full")}exitFullMode(){this._setMode("list")}goTo(index){const slide=this.slides[index];if(slide){slide.activate()}}goBy(delta){this.goTo(this.activeSlideIndex+delta)}prev(isForce){const prev=new Event("prev",{cancelable:!isForce});if(this.dispatchEvent(prev)){this.goBy(-1)}}next(isForce){const next=new Event("next",{cancelable:!isForce});if(this.dispatchEvent(next)){this.goBy(1)}}first(){this.goTo(0)}last(){this.goTo(this.slides.length-1)}}const __WEBPACK_DEFAULT_EXPORT__=Shower},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={containerSelector:".shower",progressSelector:".progress",stepSelector:".next",fullModeClass:"full",listModeClass:"list",mouseHiddenClass:"pointless",mouseInactivityTimeout:5e3,slideSelector:".slide",slideTitleSelector:"h2",activeSlideClass:"active",visitedSlideClass:"visited"}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(207);class Slide extends EventTarget{constructor(shower,element){super();(0,_utils__WEBPACK_IMPORTED_MODULE_0__.defineReadOnly)(this,{shower:shower,element:element,state:{visitCount:0,innerStepCount:0}});this._isActive=false;this._options=this.shower.options;this.element.addEventListener("click",event=>{if(event.defaultPrevented)return;this.activate();this.shower.enterFullMode()})}get isActive(){return this._isActive}get isVisited(){return this.state.visitCount>0}get id(){return this.element.id}get title(){const titleElement=this.element.querySelector(this._options.slideTitleSelector);return titleElement?titleElement.innerText:""}activate(){if(this._isActive)return;const prev=this.shower.activeSlide;if(prev){prev._deactivate()}this.state.visitCount++;this.element.classList.add(this._options.activeSlideClass);this._isActive=true;this.dispatchEvent(new Event("activate"));this.shower.dispatchEvent(new CustomEvent("slidechange",{detail:{prev:prev}}))}deactivate(){if(this.shower.isFullMode){throw new _utils__WEBPACK_IMPORTED_MODULE_0__.ShowerError("In full mode, another slide should be activated instead.")}if(this._isActive){this._deactivate()}}_deactivate(){this.element.classList.replace(this._options.activeSlideClass,this._options.visitedSlideClass);this._isActive=false;this.dispatchEvent(new Event("deactivate"))}}const __WEBPACK_DEFAULT_EXPORT__=Slide},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{ShowerError:()=>ShowerError,contentLoaded:()=>contentLoaded,defineReadOnly:()=>defineReadOnly,isInteractiveElement:()=>isInteractiveElement});const isInteractiveElement=element=>element.tabIndex!==-1;const contentLoaded=callback=>{if(document.currentScript.async){callback()}else{document.addEventListener("DOMContentLoaded",callback)}};const defineReadOnly=(target,props)=>{for(const[key,value]of Object.entries(props)){Object.defineProperty(target,key,{value:value,writable:false,enumerable:true,configurable:true})}};class ShowerError extends Error{}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _a11y__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(209);var _keys__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(210);var _location__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(211);var _next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(212);var _progress__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(213);var _timer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(214);var _title__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(216);var _view__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(217);var _touch__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(218);var _mouse__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(219);const __WEBPACK_DEFAULT_EXPORT__=shower=>{(0,_a11y__WEBPACK_IMPORTED_MODULE_0__["default"])(shower);(0,_progress__WEBPACK_IMPORTED_MODULE_4__["default"])(shower);(0,_keys__WEBPACK_IMPORTED_MODULE_1__["default"])(shower);(0,_next__WEBPACK_IMPORTED_MODULE_3__["default"])(shower);(0,_timer__WEBPACK_IMPORTED_MODULE_5__["default"])(shower);(0,_title__WEBPACK_IMPORTED_MODULE_6__["default"])(shower);(0,_location__WEBPACK_IMPORTED_MODULE_2__["default"])(shower);(0,_view__WEBPACK_IMPORTED_MODULE_7__["default"])(shower);(0,_touch__WEBPACK_IMPORTED_MODULE_8__["default"])(shower);(0,_mouse__WEBPACK_IMPORTED_MODULE_9__["default"])(shower);if(shower.isFullMode&&!shower.activeSlide){shower.first()}}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const createLiveRegion=()=>{const liveRegion=document.createElement("section");liveRegion.className="region";liveRegion.setAttribute("role","region");liveRegion.setAttribute("aria-live","assertive");liveRegion.setAttribute("aria-relevant","all");liveRegion.setAttribute("aria-label","Slide Content: Auto-updating");return liveRegion};const __WEBPACK_DEFAULT_EXPORT__=shower=>{const{container:container}=shower;const liveRegion=createLiveRegion();container.appendChild(liveRegion);const updateDocumentRole=()=>{if(shower.isFullMode){container.setAttribute("role","application")}else{container.removeAttribute("role")}};const updateLiveRegion=()=>{const slide=shower.activeSlide;if(slide){liveRegion.innerHTML=slide.element.innerHTML}};shower.addEventListener("start",()=>{updateDocumentRole();updateLiveRegion()});shower.addEventListener("modechange",updateDocumentRole);shower.addEventListener("slidechange",updateLiveRegion)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(207);const __WEBPACK_DEFAULT_EXPORT__=shower=>{const doSlideActions=event=>{const isShowerAction=!(event.ctrlKey||event.altKey||event.metaKey);switch(event.key.toUpperCase()){case"ENTER":if(event.metaKey&&shower.isListMode){if(event.shiftKey){event.preventDefault();shower.first()}break}event.preventDefault();if(event.shiftKey){shower.prev()}else{shower.next()}break;case"BACKSPACE":case"PAGEUP":case"ARROWUP":case"ARROWLEFT":case"H":case"K":case"P":if(isShowerAction){event.preventDefault();shower.prev(event.shiftKey)}break;case"PAGEDOWN":case"ARROWDOWN":case"ARROWRIGHT":case"L":case"J":case"N":if(isShowerAction){event.preventDefault();shower.next(event.shiftKey)}break;case" ":if(isShowerAction&&shower.isFullMode){event.preventDefault();if(event.shiftKey){shower.prev()}else{shower.next()}}break;case"HOME":event.preventDefault();shower.first();break;case"END":event.preventDefault();shower.last();break}};const doModeActions=event=>{switch(event.key.toUpperCase()){case"ESCAPE":if(shower.isFullMode){event.preventDefault();shower.exitFullMode()}break;case"ENTER":if(event.metaKey&&shower.isListMode){event.preventDefault();shower.enterFullMode()}break;case"P":if(event.metaKey&&event.altKey&&shower.isListMode){event.preventDefault();shower.enterFullMode()}break;case"F5":if(event.shiftKey&&shower.isListMode){event.preventDefault();shower.enterFullMode()}break}};shower.container.addEventListener("keydown",event=>{if(event.defaultPrevented)return;if((0,_utils__WEBPACK_IMPORTED_MODULE_0__.isInteractiveElement)(event.target))return;doSlideActions(event);doModeActions(event)})}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=shower=>{const composeURL=()=>{const search=shower.isFullMode?"?full":"";const slide=shower.activeSlide;const hash=slide?`#${slide.id}`:"";return location.pathname+search+hash};const applyURLMode=()=>{const isFull=new URLSearchParams(location.search).has("full");if(isFull){shower.enterFullMode()}else{shower.exitFullMode()}};const applyURLSlide=()=>{const id=location.hash.slice(1);if(!id)return;const target=shower.slides.find(slide=>slide.id===id);if(target){target.activate()}else if(!shower.activeSlide){shower.first()}};const applyURL=()=>{applyURLMode();applyURLSlide()};applyURL();window.addEventListener("popstate",applyURL);shower.addEventListener("start",()=>{history.replaceState(null,document.title,composeURL())});shower.addEventListener("modechange",()=>{history.replaceState(null,document.title,composeURL())});shower.addEventListener("slidechange",()=>{const url=composeURL();if(!location.href.endsWith(url)){history.pushState(null,document.title,url)}})}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=shower=>{const{stepSelector:stepSelector,activeSlideClass:activeSlideClass,visitedSlideClass:visitedSlideClass}=shower.options;let innerSteps;let activeIndex;const isActive=step=>step.classList.contains(activeSlideClass);const isVisited=step=>step.classList.contains(visitedSlideClass);const setInnerStepsState=()=>{if(shower.isListMode)return;const slide=shower.activeSlide;innerSteps=[...slide.element.querySelectorAll(stepSelector)];activeIndex=innerSteps.length&&innerSteps.every(isVisited)?innerSteps.length:innerSteps.filter(isActive).length-1;slide.state.innerStepCount=innerSteps.length};shower.addEventListener("start",setInnerStepsState);shower.addEventListener("modechange",setInnerStepsState);shower.addEventListener("slidechange",setInnerStepsState);shower.addEventListener("next",event=>{if(shower.isListMode||event.defaultPrevented||!event.cancelable)return;activeIndex++;innerSteps.forEach((step,index)=>{step.classList.toggle(visitedSlideClass,index<activeIndex);step.classList.toggle(activeSlideClass,index===activeIndex)});if(activeIndex<innerSteps.length){event.preventDefault()}});shower.addEventListener("prev",event=>{if(shower.isListMode||event.defaultPrevented||!event.cancelable)return;if(activeIndex===-1||activeIndex===innerSteps.length)return;activeIndex--;innerSteps.forEach((step,index)=>{step.classList.toggle(visitedSlideClass,index<activeIndex+1);step.classList.toggle(activeSlideClass,index===activeIndex)});event.preventDefault()})}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=shower=>{const{progressSelector:progressSelector}=shower.options;const bar=shower.container.querySelector(progressSelector);if(!bar)return;bar.setAttribute("role","progressbar");bar.setAttribute("aria-valuemin",0);bar.setAttribute("aria-valuemax",100);const updateProgress=()=>{const index=shower.activeSlideIndex;const{length:length}=shower.slides;const progress=index/(length-1)*100;bar.style.width=`${progress}%`;bar.setAttribute("aria-valuenow",progress);bar.setAttribute("aria-valuetext",`Slideshow progress: ${progress}%`)};shower.addEventListener("start",updateProgress);shower.addEventListener("slidechange",updateProgress)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _parse_timing__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(215);const __WEBPACK_DEFAULT_EXPORT__=shower=>{let id;const resetTimer=()=>{clearTimeout(id);if(shower.isListMode)return;const slide=shower.activeSlide;const{visitCount:visitCount,innerStepCount:innerStepCount}=slide.state;if(visitCount>1)return;const timing=(0,_parse_timing__WEBPACK_IMPORTED_MODULE_0__["default"])(slide.element.dataset.timing);if(!timing)return;if(innerStepCount){const stepTiming=timing/(innerStepCount+1);id=setInterval(()=>shower.next(),stepTiming)}else{id=setTimeout(()=>shower.next(),timing)}};shower.addEventListener("start",resetTimer);shower.addEventListener("modechange",resetTimer);shower.addEventListener("slidechange",resetTimer);shower.container.addEventListener("keydown",event=>{if(!event.defaultPrevented){clearTimeout(id)}})}},(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const units=["s","m","h"];const hasUnits=timing=>{return units.some(unit=>timing.includes(unit))};const parseUnits=timing=>{return units.map(unit=>timing.match(`(\\S+)${unit}`)).map(match=>match&&match[1])};const parseColons=timing=>{return`::${timing}`.split(":").reverse()};const SEC_IN_MIN=60;const SEC_IN_HOUR=SEC_IN_MIN*60;const __WEBPACK_DEFAULT_EXPORT__=timing=>{if(!timing)return 0;const parsed=hasUnits(timing)?parseUnits(timing):parseColons(timing);let[sec,min,hour]=parsed.map(Number);sec+=min*SEC_IN_MIN;sec+=hour*SEC_IN_HOUR;return Math.max(sec*1e3,0)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const mdash="—";const __WEBPACK_DEFAULT_EXPORT__=shower=>{const{title:title}=document;const updateTitle=()=>{if(shower.isFullMode){const slide=shower.activeSlide;const slideTitle=slide.title;if(slideTitle){document.title=`${slideTitle} ${mdash} ${title}`;return}}document.title=title};shower.addEventListener("start",updateTitle);shower.addEventListener("modechange",updateTitle);shower.addEventListener("slidechange",updateTitle)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=shower=>{const{container:container}=shower;const{fullModeClass:fullModeClass,listModeClass:listModeClass}=shower.options;if(container.classList.contains(fullModeClass)){shower.enterFullMode()}else{container.classList.add(listModeClass)}const updateScale=()=>{const firstSlide=shower.slides[0];if(!firstSlide)return;const{innerWidth:innerWidth,innerHeight:innerHeight}=window;const{offsetWidth:offsetWidth,offsetHeight:offsetHeight}=firstSlide.element;const listScale=1/(offsetWidth/innerWidth);const fullScale=1/Math.max(offsetWidth/innerWidth,offsetHeight/innerHeight);container.style.setProperty("--shower-list-scale",listScale);container.style.setProperty("--shower-full-scale",fullScale)};const updateModeView=()=>{if(shower.isFullMode){container.classList.remove(listModeClass);container.classList.add(fullModeClass)}else{container.classList.remove(fullModeClass);container.classList.add(listModeClass)}updateScale();if(shower.isFullMode)return;const slide=shower.activeSlide;if(slide){slide.element.scrollIntoView({block:"center"})}};shower.addEventListener("start",updateModeView);shower.addEventListener("modechange",updateModeView);shower.addEventListener("slidechange",()=>{if(shower.isFullMode)return;const slide=shower.activeSlide;slide.element.scrollIntoView({block:"nearest"})});window.addEventListener("resize",updateScale)}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=shower=>{let exitFullScreen=false;let clickable=false;document.addEventListener("touchstart",event=>{if(event.touches.length===1){const touch=event.touches[0];const x=touch.clientX;const{target:target}=touch;clickable=target.tabIndex!==-1;if(!clickable){if(shower.isFullMode){if(event.cancelable)event.preventDefault();if(window.innerWidth/2<x){shower.next()}else{shower.prev()}}}}else if(event.touches.length===3){exitFullScreen=true}});shower.container.addEventListener("touchend",event=>{if(exitFullScreen){event.preventDefault();exitFullScreen=false;shower.exitFullMode()}else if(event.touches.length===1&&!clickable&&shower.isFullMode)event.preventDefault()})}},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=shower=>{const{mouseHiddenClass:mouseHiddenClass,mouseInactivityTimeout:mouseInactivityTimeout}=shower.options;let hideMouseTimeoutId=null;const cleanUp=()=>{shower.container.classList.remove(mouseHiddenClass);clearTimeout(hideMouseTimeoutId);hideMouseTimeoutId=null};const hideMouseIfInactive=()=>{if(hideMouseTimeoutId!==null){cleanUp()}hideMouseTimeoutId=setTimeout(()=>{shower.container.classList.add(mouseHiddenClass)},mouseInactivityTimeout)};const initHideMouseIfInactiveModule=()=>{shower.container.addEventListener("mousemove",hideMouseIfInactive)};const destroyHideMouseIfInactiveModule=()=>{shower.container.removeEventListener("mousemove",hideMouseIfInactive);cleanUp()};const handleModeChange=()=>{if(shower.isFullMode){initHideMouseIfInactiveModule()}else{destroyHideMouseIfInactiveModule()}};shower.addEventListener("start",handleModeChange);shower.addEventListener("modechange",handleModeChange)}}];var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId].call(module.exports,module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.amdO={}})();(()=>{__webpack_require__.d=((exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}})})();(()=>{__webpack_require__.g=function(){if(typeof globalThis==="object")return globalThis;try{return this||new Function("return this")()}catch(e){if(typeof window==="object")return window}}()})();(()=>{__webpack_require__.o=((obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop))})();(()=>{__webpack_require__.r=(exports=>{if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})})})();var __webpack_exports__=__webpack_require__(0);window.DO=__webpack_exports__})();
//# sourceMappingURL=dokieli.js.map